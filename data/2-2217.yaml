- en: How to Calculate Conditional Probabilities from Any DataFrame in 3 Lines of
    Code
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¦‚ä½•åœ¨ 3 è¡Œä»£ç ä¸­ä»ä»»ä½• DataFrame è®¡ç®—æ¡ä»¶æ¦‚ç‡
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/unlock-the-secret-to-effortlessly-calculating-conditional-probabilities-from-any-dataframe-a232ca71e33c](https://towardsdatascience.com/unlock-the-secret-to-effortlessly-calculating-conditional-probabilities-from-any-dataframe-a232ca71e33c)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/unlock-the-secret-to-effortlessly-calculating-conditional-probabilities-from-any-dataframe-a232ca71e33c](https://towardsdatascience.com/unlock-the-secret-to-effortlessly-calculating-conditional-probabilities-from-any-dataframe-a232ca71e33c)
- en: Learn to write a simple Python function that will calculate conditional probabilities
    using notation like p(exam=1 | study=1)
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å­¦ä¼šç¼–å†™ä¸€ä¸ªç®€å•çš„ Python å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä½¿ç”¨è¯¸å¦‚ p(exam=1 | study=1) çš„ç¬¦å·æ¥è®¡ç®—æ¡ä»¶æ¦‚ç‡ã€‚
- en: '[](https://grahamharrison-86487.medium.com/?source=post_page-----a232ca71e33c--------------------------------)[![Graham
    Harrison](../Images/c6bfe00c6e0cfcdf3bd042c7fdc03554.png)](https://grahamharrison-86487.medium.com/?source=post_page-----a232ca71e33c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----a232ca71e33c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----a232ca71e33c--------------------------------)
    [Graham Harrison](https://grahamharrison-86487.medium.com/?source=post_page-----a232ca71e33c--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://grahamharrison-86487.medium.com/?source=post_page-----a232ca71e33c--------------------------------)[![Graham
    Harrison](../Images/c6bfe00c6e0cfcdf3bd042c7fdc03554.png)](https://grahamharrison-86487.medium.com/?source=post_page-----a232ca71e33c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----a232ca71e33c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----a232ca71e33c--------------------------------)
    [Graham Harrison](https://grahamharrison-86487.medium.com/?source=post_page-----a232ca71e33c--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----a232ca71e33c--------------------------------)
    Â·6 min readÂ·Feb 10, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----a232ca71e33c--------------------------------)
    Â·é˜…è¯»æ—¶é—´ 6 åˆ†é’ŸÂ·2023å¹´2æœˆ10æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/49261007e57b90575e7a9af51a7f4d6a.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/49261007e57b90575e7a9af51a7f4d6a.png)'
- en: Photo by [Dan Cristian PÄƒdureÈ›](https://unsplash.com/@dancristianpaduret?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/xJLN32FO7AY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Dan Cristian PÄƒdureÈ›](https://unsplash.com/@dancristianpaduret?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    æä¾›ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/photos/xJLN32FO7AY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
- en: Background
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: èƒŒæ™¯
- en: As I have continued to delve into causal inference I reached a stage where I
    needed to be able to construct formulas that use complex combinations of conditional
    probabilities and the code was starting to be difficult to read and maintain.
    This led to me developing a simple way to calculate conditional probabilities.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: éšç€æˆ‘ç»§ç»­æ·±å…¥æ¢è®¨å› æœæ¨æ–­ï¼Œæˆ‘è¾¾åˆ°äº†ä¸€ä¸ªé˜¶æ®µï¼Œåœ¨è¿™ä¸ªé˜¶æ®µæˆ‘éœ€è¦æ„å»ºä½¿ç”¨å¤æ‚æ¡ä»¶æ¦‚ç‡ç»„åˆçš„å…¬å¼ï¼Œè€Œä»£ç å˜å¾—éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚è¿™ä¿ƒä½¿æˆ‘å¼€å‘äº†ä¸€ç§ç®€å•çš„è®¡ç®—æ¡ä»¶æ¦‚ç‡çš„æ–¹æ³•ã€‚
- en: By the end of this article you will be equipped with a short Python function
    that can apply a conditional probability directly to a any pandas `DataFrame`
    and return the result.
  id: totrans-10
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ–‡ç»“æŸæ—¶ï¼Œä½ å°†æŒæ¡ä¸€ä¸ªç®€çŸ­çš„ Python å‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥å°†æ¡ä»¶æ¦‚ç‡ç›´æ¥åº”ç”¨äºä»»ä½• pandas `DataFrame` å¹¶è¿”å›ç»“æœã€‚
- en: A Recap
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å›é¡¾
- en: Conditional probability is the probability of an event occurring given that
    another event has already occurred. The notation ğ‘ƒ(ğ´âˆ£ğµ) can be understood as the
    probability (P) of event A given (|) that event B has already occurred.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: æ¡ä»¶æ¦‚ç‡æ˜¯æŒ‡åœ¨å¦ä¸€ä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿçš„æƒ…å†µä¸‹ï¼ŒæŸä¸ªäº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ã€‚ç¬¦å· ğ‘ƒ(ğ´âˆ£ğµ) å¯ä»¥ç†è§£ä¸ºäº‹ä»¶ A çš„æ¦‚ç‡ï¼ˆPï¼‰ï¼Œç»™å®šï¼ˆ|ï¼‰äº‹ä»¶ B å·²ç»å‘ç”Ÿã€‚
- en: To extend this one step forward the notation ğ‘ƒ(ğ´âˆ£ğµ,ğ¶) means the probability
    of event A given that both event B and event C have already occurerd.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: å‘å‰è¿ˆè¿›ä¸€æ­¥ï¼Œç¬¦å· ğ‘ƒ(ğ´âˆ£ğµ,ğ¶) æ„å‘³ç€åœ¨äº‹ä»¶ B å’Œäº‹ä»¶ C éƒ½å·²ç»å‘ç”Ÿçš„æƒ…å†µä¸‹ï¼Œäº‹ä»¶ A çš„æ¦‚ç‡ã€‚
- en: An Example
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹
- en: We all know that if a fair coin is tossed twice the probability of getting two
    heads is 0.25 because the probability of the first event (tossing the first coin
    and getting ahead) is 0.5 multiplied by the probability of the second event (tossing
    the second coin and getting a head), also 0.5 i.e. 0.5 x 0.5 = 0.25.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¦‚æœå…¬å¹³çš„ç¡¬å¸è¢«æŠ›æ·ä¸¤æ¬¡ï¼Œå¾—åˆ°ä¸¤ä¸ªæ­£é¢çš„æ¦‚ç‡æ˜¯ 0.25ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡äº‹ä»¶ï¼ˆæŠ›æ·ç¬¬ä¸€æ¬¡ç¡¬å¸å¹¶å¾—åˆ°æ­£é¢ï¼‰çš„æ¦‚ç‡æ˜¯ 0.5 ä¹˜ä»¥ç¬¬äºŒæ¬¡äº‹ä»¶ï¼ˆæŠ›æ·ç¬¬äºŒæ¬¡ç¡¬å¸å¹¶å¾—åˆ°æ­£é¢ï¼‰çš„æ¦‚ç‡ï¼Œä¹Ÿæ˜¯
    0.5ï¼Œå³ 0.5 x 0.5 = 0.25ã€‚
- en: The simple multiplication works when the two events are completely independent
    of each other i.e. there is no way that the result of the first coin toss can
    impact the second so before we perform the two events the probability of two heads
    is 0.25.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä¸¤ä¸ªäº‹ä»¶å®Œå…¨ç‹¬ç«‹æ—¶ï¼Œç®€å•çš„ä¹˜æ³•æ³•åˆ™é€‚ç”¨ï¼Œå³ç¬¬ä¸€ä¸ªç¡¬å¸æŠ›æ·çš„ç»“æœä¸ä¼šå½±å“ç¬¬äºŒä¸ªäº‹ä»¶ï¼Œå› æ­¤åœ¨æ‰§è¡Œè¿™ä¸¤ä¸ªäº‹ä»¶ä¹‹å‰ï¼Œä¸¤ä¸ªæ­£é¢æœä¸Šçš„æ¦‚ç‡æ˜¯0.25ã€‚
- en: However, not all events are independent and this is best explained using an
    example â€¦
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„äº‹ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œè¿™æœ€å¥½é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£é‡Š â€¦
- en: Here is a table of synthetic data representing a fictitious sample of 800 people
    where whether they study or not and whether they pass an exam or not has been
    observed and recorded â€¦
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªåˆæˆæ•°æ®çš„è¡¨æ ¼ï¼Œä»£è¡¨äº†ä¸€ä¸ªè™šæ„çš„800äººæ ·æœ¬ï¼Œå…¶ä¸­æ˜¯å¦å­¦ä¹ å’Œæ˜¯å¦é€šè¿‡è€ƒè¯•éƒ½è¢«è§‚å¯Ÿå’Œè®°å½•äº† â€¦
- en: '![](../Images/f99d21937e76b06ae1fe83eca560375f.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f99d21937e76b06ae1fe83eca560375f.png)'
- en: Image by Author
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾åƒ
- en: The probability of passing the exam (exam=1) is as follows -
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡è€ƒè¯•ï¼ˆexam=1ï¼‰çš„æ¦‚ç‡å¦‚ä¸‹ -
- en: '![](../Images/fd08348091681e56648acb4503615384.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fd08348091681e56648acb4503615384.png)'
- en: 'How about if we ask the following question:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆå¦‚æœæˆ‘ä»¬é—®ä»¥ä¸‹é—®é¢˜ä¼šæ€æ ·ï¼š
- en: One of the test subjects is selected at random and it is found that they studied
    (study=1). What is the probability that they passed the exam (exam=1)?
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ä¸€ä¸ªæµ‹è¯•å¯¹è±¡è¢«éšæœºé€‰ä¸­ï¼Œç»“æœå‘ç°ä»–ä»¬å­¦ä¹ äº†ï¼ˆstudy=1ï¼‰ã€‚ä»–ä»¬é€šè¿‡è€ƒè¯•ï¼ˆexam=1ï¼‰çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ
- en: These probabilities are not independent like the coin tossing because we already
    know that the chosen subject studied. The answer to this question can be expressed
    as follows -
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›æ¦‚ç‡ä¸æ˜¯åƒæŠ›ç¡¬å¸é‚£æ ·ç‹¬ç«‹çš„ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»çŸ¥é“æ‰€é€‰æ‹©çš„å¯¹è±¡å­¦ä¹ äº†ã€‚è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ -
- en: '![](../Images/dbe09afec0e55d58b1bbf90d962c4b3f.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dbe09afec0e55d58b1bbf90d962c4b3f.png)'
- en: i.e. the what is probability that exam = 1 given that study = 1?
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: å³ï¼Œç»™å®šstudy = 1ï¼Œexam = 1çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ
- en: There are two ways to calculate this result, the intuitive way and the probabilistic
    way.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è®¡ç®—è¿™ä¸ªç»“æœï¼šç›´è§‚æ–¹æ³•å’Œæ¦‚ç‡æ–¹æ³•ã€‚
- en: The Intuitive Way
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç›´è§‚æ–¹æ³•
- en: It is easy to see that there are 400 studiers (341 + 59) by looking for rows
    in the summary table where study = 1 -
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡æŸ¥çœ‹æ±‡æ€»è¡¨ä¸­study = 1çš„è¡Œï¼Œå¾ˆå®¹æ˜“çœ‹åˆ°æœ‰400ä¸ªå­¦ä¹ è€…ï¼ˆ341 + 59ï¼‰ -
- en: '![](../Images/9f7e7bef0af5d0095bcc1d4224d85c99.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9f7e7bef0af5d0095bcc1d4224d85c99.png)'
- en: Image by Author
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾åƒ
- en: If we have already selected a studier, they must have come from this part of
    the sample. Of these 400 it is easy to see that 59 pass the exam, so â€¦
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬å·²ç»é€‰æ‹©äº†ä¸€ä¸ªå­¦ä¹ è€…ï¼Œä»–ä»¬å¿…é¡»æ¥è‡ªè¿™ä¸ªæ ·æœ¬ä¸­çš„è¿™ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™400äººä¸­ï¼Œå¾ˆå®¹æ˜“çœ‹å‡º59äººé€šè¿‡äº†è€ƒè¯•ï¼Œå› æ­¤ â€¦
- en: '![](../Images/49e10e2c7ab5f4c8939c05f904cfdd4d.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/49e10e2c7ab5f4c8939c05f904cfdd4d.png)'
- en: The Mathematical Way
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ•°å­¦æ–¹æ³•
- en: The formula for calculating a conditional probability is as follows -
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: è®¡ç®—æ¡ä»¶æ¦‚ç‡çš„å…¬å¼å¦‚ä¸‹ -
- en: '![](../Images/b5720e37f0fa5d816047aa1e7f3ab5c2.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b5720e37f0fa5d816047aa1e7f3ab5c2.png)'
- en: Note â€” the notation P(A|B) can be read as â€” the conditional probability or event
    A â€œgivenâ€ event B.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨ - ç¬¦å·P(A|B)å¯ä»¥è¯»ä½œ - æ¡ä»¶æ¦‚ç‡æˆ–äº‹ä»¶Aåœ¨äº‹ä»¶Bâ€œç»™å®šâ€çš„æƒ…å†µä¸‹ã€‚
- en: Personally I find this to be less intuitive that the first solution as I can
    easily visualise what is going on inside the `DataFrame` of values but this way
    does have a big advantage. If you only have access to the probabilities and not
    to all of the underlying data then the "Intuitive Way" is not an option.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä¸ªäººå‘ç°è¿™ä¸ªæ–¹æ³•ä¸å¦‚ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆç›´è§‚ï¼Œå› ä¸ºæˆ‘å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨`DataFrame`ä¸­å¯è§†åŒ–å‘ç”Ÿçš„æƒ…å†µï¼Œä½†è¿™ç§æ–¹æ³•ç¡®å®æœ‰ä¸€ä¸ªå¤§ä¼˜ç‚¹ã€‚å¦‚æœä½ åªèƒ½è®¿é—®æ¦‚ç‡è€Œæ— æ³•è®¿é—®æ‰€æœ‰åº•å±‚æ•°æ®ï¼Œé‚£ä¹ˆâ€œç›´è§‚æ–¹æ³•â€å°±ä¸é€‚ç”¨äº†ã€‚
- en: Consider the following which is the same summary but with the probabilities
    instead of the counts â€¦
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·è€ƒè™‘ä»¥ä¸‹å†…å®¹ï¼Œè¿™ä¸æ±‡æ€»è¡¨ç›¸åŒï¼Œä½†ä½¿ç”¨çš„æ˜¯æ¦‚ç‡è€Œä¸æ˜¯è®¡æ•° â€¦
- en: '![](../Images/ea2875a39eca05555434869b895ff2c5.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ea2875a39eca05555434869b895ff2c5.png)'
- en: Image by Author
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾åƒ
- en: Now p(exam=1 | study=1) can be calculated as follows -
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨p(exam=1 | study=1)å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è®¡ç®— -
- en: '![](../Images/e513ed35b96b56f23797ef5c06d99dd6.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e513ed35b96b56f23797ef5c06d99dd6.png)'
- en: The Python Function Solution
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Pythonå‡½æ•°è§£å†³æ–¹æ¡ˆ
- en: Given the explanation of conditional probabilities, the objective now is to
    develop a Python function that can take all of the pain away and just work them
    out for any pandas `DataFrame`.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: é‰´äºæ¡ä»¶æ¦‚ç‡çš„è§£é‡Šï¼Œç°åœ¨çš„ç›®æ ‡æ˜¯å¼€å‘ä¸€ä¸ªPythonå‡½æ•°ï¼Œå¯ä»¥æ¶ˆé™¤æ‰€æœ‰çš„éº»çƒ¦ï¼Œå¹¶ä¸ºä»»ä½•pandas `DataFrame`è¿›è¡Œè®¡ç®—ã€‚
- en: The first thing we need are some test data. I have created a synthetic dataset
    using my `BinaryDataGenerator` class. If you would like the full source code,
    head over to this article â€¦
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸€äº›æµ‹è¯•æ•°æ®ã€‚æˆ‘ä½¿ç”¨æˆ‘çš„`BinaryDataGenerator`ç±»åˆ›å»ºäº†ä¸€ä¸ªåˆæˆæ•°æ®é›†ã€‚å¦‚æœä½ æƒ³è¦å®Œæ•´çš„æºä»£ç ï¼Œè¯·è®¿é—®è¿™ç¯‡æ–‡ç«  â€¦
- en: '[](/how-to-generate-synthetic-data-for-any-causal-inference-project-in-less-than-10-lines-of-code-158688a89349?source=post_page-----a232ca71e33c--------------------------------)
    [## How to Generate Synthetic Data for any Causal Inference Project in less than
    10 Lines of Code'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/how-to-generate-synthetic-data-for-any-causal-inference-project-in-less-than-10-lines-of-code-158688a89349?source=post_page-----a232ca71e33c--------------------------------)
    [## å¦‚ä½•åœ¨å°‘äº 10 è¡Œä»£ç ä¸­ç”Ÿæˆä»»ä½•å› æœæ¨æ–­é¡¹ç›®çš„åˆæˆæ•°æ®'
- en: If 99% are Vaccinated, 1% Get a Reaction and 2% Get the Disease How Can You
    Generate Representative Synthetic Data?
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å¦‚æœ 99% çš„äººæ¥ç§äº†ç–«è‹—ï¼Œ1% çš„äººå‡ºç°ååº”ï¼Œ2% çš„äººå¾—ç—…ï¼Œä½ å¦‚ä½•ç”Ÿæˆå…·æœ‰ä»£è¡¨æ€§çš„åˆæˆæ•°æ®ï¼Ÿ
- en: towardsdatascience.com](/how-to-generate-synthetic-data-for-any-causal-inference-project-in-less-than-10-lines-of-code-158688a89349?source=post_page-----a232ca71e33c--------------------------------)
    ![](../Images/9120da1c67451600530123b4034c7a2f.png)
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/how-to-generate-synthetic-data-for-any-causal-inference-project-in-less-than-10-lines-of-code-158688a89349?source=post_page-----a232ca71e33c--------------------------------)
    ![](../Images/9120da1c67451600530123b4034c7a2f.png)
- en: Image by Author
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥æºï¼šä½œè€…
- en: 'Version 1: Basic Function'
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç‰ˆæœ¬ 1ï¼šåŸºæœ¬å‡½æ•°
- en: The most basic version of the function, implemented using the promised â€œ3 lines
    of codeâ€ is as follows -
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ‰¿è¯ºçš„â€œä¸‰è¡Œä»£ç â€å®ç°çš„æœ€åŸºæœ¬ç‰ˆæœ¬çš„å‡½æ•°å¦‚ä¸‹ -
- en: '[PRE0]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Version 2: Basic Function Plus LaTeX Output'
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç‰ˆæœ¬ 2ï¼šåŸºæœ¬å‡½æ•°åŠ  LaTeX è¾“å‡º
- en: However, I soon got bored with all the `print` statements to show the results
    which led to the second version which can optionally output a LaTeX representation
    of the calculation ...
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œæˆ‘å¾ˆå¿«å°±åŒå€¦äº†æ‰€æœ‰çš„ `print` è¯­å¥æ¥æ˜¾ç¤ºç»“æœï¼Œè¿™å¯¼è‡´äº†ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼Œå®ƒå¯ä»¥é€‰æ‹©æ€§åœ°è¾“å‡ºè®¡ç®—çš„ LaTeX è¡¨ç¤º...
- en: '![](../Images/956ab66ac7a4f906d3c4151b0b6ace43.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/956ab66ac7a4f906d3c4151b0b6ace43.png)'
- en: 'Version 3: Advanced Function'
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç‰ˆæœ¬ 3ï¼šé«˜çº§å‡½æ•°
- en: Having got this far I really wanted a final version where I could just say P(exam=1
    | study=1) directly and get the result, but I also wanted to retain `outcome`
    and `events` as optional parameters so I could choose with method to use ...
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘çœŸçš„å¸Œæœ›æœ‰ä¸€ä¸ªæœ€ç»ˆç‰ˆæœ¬ï¼Œå…¶ä¸­å¯ä»¥ç›´æ¥è¯´ P(exam=1 | study=1) å¹¶è·å¾—ç»“æœï¼Œä½†æˆ‘ä¹Ÿå¸Œæœ›ä¿ç•™ `outcome` å’Œ `events`
    ä½œä¸ºå¯é€‰å‚æ•°ï¼Œä»¥ä¾¿æˆ‘å¯ä»¥é€‰æ‹©ä½¿ç”¨å“ªç§æ–¹æ³•...
- en: '![](../Images/956ab66ac7a4f906d3c4151b0b6ace43.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/956ab66ac7a4f906d3c4151b0b6ace43.png)'
- en: Conclusion
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: Conditional probabilities are very useful in a range of statistical and machine
    learning solutions but there is no easy, readable and repeatable way to calculate
    them from a pandas `DataFrame`.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: æ¡ä»¶æ¦‚ç‡åœ¨å„ç§ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹ è§£å†³æ–¹æ¡ˆä¸­éå¸¸æœ‰ç”¨ï¼Œä½†ä» pandas `DataFrame` ä¸­è®¡ç®—æ¡ä»¶æ¦‚ç‡æ²¡æœ‰ç®€å•ã€å¯è¯»å’Œå¯é‡å¤çš„æ–¹æ³•ã€‚
- en: This article has explained what conditional probabilities are, given an example
    and then provided all the source code for a Python function that can take any
    `DataFrame` and then calculate and display the result.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡è§£é‡Šäº†ä»€ä¹ˆæ˜¯æ¡ä»¶æ¦‚ç‡ï¼Œç»™å‡ºäº†ä¸€ä¸ªç¤ºä¾‹ï¼Œå¹¶æä¾›äº†ä¸€ä¸ª Python å‡½æ•°çš„æ‰€æœ‰æºä»£ç ï¼Œè¯¥å‡½æ•°å¯ä»¥æ¥å—ä»»ä½• `DataFrame` å¹¶è®¡ç®—å’Œæ˜¾ç¤ºç»“æœã€‚
- en: If you enjoyed this article you can get unlimited access to thousands more by
    becoming a Medium member for just $5 a month by [clicking on my referral link](https://grahamharrison-86487.medium.com/membership)
    (I will receive a proportion of the fees if you sign up using this link at no
    extra cost to you).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œä½ å¯ä»¥é€šè¿‡æˆä¸º Medium ä¼šå‘˜ï¼Œæ¯æœˆåªéœ€ $5 å³å¯æ— é™è®¿é—®æ›´å¤šå†…å®¹ï¼Œé€šè¿‡ [ç‚¹å‡»æˆ‘çš„æ¨èé“¾æ¥](https://grahamharrison-86487.medium.com/membership)ï¼ˆå¦‚æœä½ é€šè¿‡æ­¤é“¾æ¥æ³¨å†Œï¼Œæˆ‘å°†è·å¾—ä¸€å®šæ¯”ä¾‹çš„è´¹ç”¨ï¼Œä¸”å¯¹ä½ æ²¡æœ‰é¢å¤–è´¹ç”¨ï¼‰ã€‚
- en: '[](https://grahamharrison-86487.medium.com/membership?source=post_page-----a232ca71e33c--------------------------------)
    [## Join Medium with my referral link - Graham Harrison'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://grahamharrison-86487.medium.com/membership?source=post_page-----a232ca71e33c--------------------------------)
    [## é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥ Medium - Graham Harrison'
- en: Read every story from Graham Harrison (and thousands of other writers on Medium).
    Enhance your knowledge of Dataâ€¦
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: é˜…è¯» Graham Harrison çš„æ¯ä¸€ä¸ªæ•…äº‹ï¼ˆä»¥åŠ Medium ä¸Šçš„å…¶ä»–æˆåƒä¸Šä¸‡ä½ä½œè€…çš„æ•…äº‹ï¼‰ã€‚æå‡ä½ çš„æ•°æ®çŸ¥è¯†â€¦
- en: grahamharrison-86487.medium.com](https://grahamharrison-86487.medium.com/membership?source=post_page-----a232ca71e33c--------------------------------)
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: grahamharrison-86487.medium.com](https://grahamharrison-86487.medium.com/membership?source=post_page-----a232ca71e33c--------------------------------)
- en: '[Subscribing to a free e-mail whenever I publish a new story](https://grahamharrison-86487.medium.com/subscribe).'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '[è®¢é˜…æˆ‘çš„å…è´¹ç”µå­é‚®ä»¶ï¼Œæ¯å½“æˆ‘å‘å¸ƒæ–°æ•…äº‹æ—¶](https://grahamharrison-86487.medium.com/subscribe)ã€‚'
- en: '[Taking a quick look at my previous articles](https://grahamharrison-86487.medium.com/).'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '[å¿«é€ŸæŸ¥çœ‹æˆ‘çš„ä»¥å‰æ–‡ç« ](https://grahamharrison-86487.medium.com/)ã€‚'
- en: '[Downloading my free strategic data-driven decision making framework](https://relentless-originator-3199.ck.page/5f4857fd12).'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '[ä¸‹è½½æˆ‘å…è´¹çš„æˆ˜ç•¥æ•°æ®é©±åŠ¨å†³ç­–æ¡†æ¶](https://relentless-originator-3199.ck.page/5f4857fd12)ã€‚'
- en: Visiting my data science website â€” [The Data Blog](https://www.the-data-blog.co.uk/).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: è®¿é—®æˆ‘çš„æ•°æ®ç§‘å­¦ç½‘ç«™ â€” [æ•°æ®åšå®¢](https://www.the-data-blog.co.uk/)ã€‚
