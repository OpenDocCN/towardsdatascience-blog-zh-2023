- en: 'Charting the Non-Parametric Odyssey: Statistical Frameworks for Distribution-Free
    Hypothesis Testing'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 绘制非参数探索：无分布假设检验的统计框架
- en: 原文：[https://towardsdatascience.com/charting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a?source=collection_archive---------7-----------------------#2023-05-10](https://towardsdatascience.com/charting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a?source=collection_archive---------7-----------------------#2023-05-10)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/charting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a?source=collection_archive---------7-----------------------#2023-05-10](https://towardsdatascience.com/charting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a?source=collection_archive---------7-----------------------#2023-05-10)
- en: Gauging the Mechanics of the Sign and Wilcoxon Signed Rank Tests
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 评估符号检验和 Wilcoxon 符号秩检验的机制
- en: '[](https://namanagr03.medium.com/?source=post_page-----e13c10cb157a--------------------------------)[![Naman
    Agrawal](../Images/6bb885397aec17f5029cfac7f01edad9.png)](https://namanagr03.medium.com/?source=post_page-----e13c10cb157a--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e13c10cb157a--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e13c10cb157a--------------------------------)
    [Naman Agrawal](https://namanagr03.medium.com/?source=post_page-----e13c10cb157a--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://namanagr03.medium.com/?source=post_page-----e13c10cb157a--------------------------------)[![Naman
    Agrawal](../Images/6bb885397aec17f5029cfac7f01edad9.png)](https://namanagr03.medium.com/?source=post_page-----e13c10cb157a--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e13c10cb157a--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e13c10cb157a--------------------------------)
    [Naman Agrawal](https://namanagr03.medium.com/?source=post_page-----e13c10cb157a--------------------------------)'
- en: ·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5bbb90aa727&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcharting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a&user=Naman+Agrawal&userId=5bbb90aa727&source=post_page-5bbb90aa727----e13c10cb157a---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e13c10cb157a--------------------------------)
    ·19 min read·May 10, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe13c10cb157a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcharting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a&user=Naman+Agrawal&userId=5bbb90aa727&source=-----e13c10cb157a---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5bbb90aa727&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcharting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a&user=Naman+Agrawal&userId=5bbb90aa727&source=post_page-5bbb90aa727----e13c10cb157a---------------------post_header-----------)
    发布于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e13c10cb157a--------------------------------)
    ·19 分钟阅读·2023年5月10日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe13c10cb157a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcharting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a&user=Naman+Agrawal&userId=5bbb90aa727&source=-----e13c10cb157a---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe13c10cb157a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcharting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a&source=-----e13c10cb157a---------------------bookmark_footer-----------)![](../Images/a20ca4c61e3ea8da4ffa4dec3594bbf3.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe13c10cb157a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcharting-the-non-parametric-odyssey-statistical-frameworks-for-distribution-free-hypothesis-e13c10cb157a&source=-----e13c10cb157a---------------------bookmark_footer-----------)![](../Images/a20ca4c61e3ea8da4ffa4dec3594bbf3.png)'
- en: Photo by [Kiwihug](https://unsplash.com/@kiwihug?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/Hld-BtdRdPU?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由 [Kiwihug](https://unsplash.com/@kiwihug?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    提供，来源于 [Unsplash](https://unsplash.com/photos/Hld-BtdRdPU?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
- en: Contents
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 内容
- en: Introduction
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 介绍
- en: 'Tool 1: One-Sample Sign Test'
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 工具 1：单样本符号检验
- en: 'Tool 2: Two-Sample Sign Test'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 工具 2：双样本符号检验
- en: Limitations of the Sign Test
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 符号检验的局限性
- en: 'Tool 3: One-Sample Wilcoxon Signed Rank Test'
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 工具 3：单样本 Wilcoxon 符号秩检验
- en: 'Wilcoxon Signed Rank Test: Possible Complications'
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 威尔科克森符号秩检验：可能的并发症
- en: 'Tool 4: Two-Sample Wilcoxon Signed Rank Test'
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 工具 4：两样本威尔科克森符号秩检验
- en: Conclusion
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 结论
- en: Introduction
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: 'Statistics is the corpus of instruments of knowledge that allow us to infer
    from data through tools including, but not limited to, estimation of parameters,
    construction of confidence intervals, and hypothesis testing to validate our assumptions.
    In this article, we will learn about frameworks that allow us to test our hypothesis
    about the values of different data quantiles, namely the Sign Test and the Wilcoxon
    Signed Rank Test. What’s unique about these frameworks is that, unlike popular
    hypothesis tests such as the z-test or the t-test, these tests don’t require any
    assumption made on the data, either through intuition or enforced via the Central
    Limit Theorem i.e., they are distribution-free or non-parametric. All that you
    need is data coming from a symmetric and continuous distribution, and you will
    be equipped with the tools to test claims such as:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 统计学是知识工具的集合，允许我们通过包括但不限于参数估计、置信区间构建和假设检验等工具从数据中推断以验证我们的假设。在本文中，我们将学习允许我们检验有关不同数据分位数值的假设的框架，即符号检验和威尔科克森符号秩检验。这些框架的独特之处在于，与
    z 检验或 t 检验等流行的假设检验不同，这些检验不需要对数据做任何假设，无论是通过直觉还是通过中央极限定理强加的，即，它们是无分布的或非参数的。您只需拥有来自对称和连续分布的数据，您将配备检验如下主张的工具：
- en: '![](../Images/7149e1e2a3a1cab6e3a9dda81e9ac472.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7149e1e2a3a1cab6e3a9dda81e9ac472.png)'
- en: 'Tool 1: One-Sample Sign Test'
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工具 1：单样本符号检验
- en: 'Let’s start with a straightforward test, which only involves counting the values
    lesser than or equal to the threshold for the hypothesis: The Sign Test (aka the
    Binomial Test). In particular, we consider a sample of size n X₁, …, Xₙ as well
    as the simple null hypothesis and the corresponding alternative hypothesis stated
    as follows:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从一个简单的检验开始，它只涉及计算小于或等于阈值的值，用于假设检验：符号检验（即二项检验）。特别是，我们考虑一个大小为 n 的样本 X₁, …,
    Xₙ 以及以下陈述的简单零假设和相应的替代假设：
- en: '![](../Images/6d5f260a110c17c2da87371691a5f9d6.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6d5f260a110c17c2da87371691a5f9d6.png)'
- en: 'where m denotes the median of the given data. As a starting point, let’s think
    about how we’d approach the problem in a traditional t-test setting. In such a
    case, we would assume that n is large, allowing the Central Limit Theorem to kick
    in. Further, since the distribution is always assumed to be symmetric, testing
    for the median should be the same as testing for the mean. Thus, we can define
    the test statistic and the corresponding critical region as follows:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 m 表示给定数据的中位数。作为起点，我们来考虑在传统 t 检验设置下我们如何处理这个问题。在这种情况下，我们会假设 n 很大，使得中央极限定理发挥作用。此外，由于分布总是假设为对称的，检验中位数应该与检验均值相同。因此，我们可以定义检验统计量和相应的临界区域如下：
- en: '![](../Images/160f30a10e64f30d7379995d0f9e3b53.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/160f30a10e64f30d7379995d0f9e3b53.png)'
- en: 'That’s simple enough and quite powerful (as we’ll later see), but it’s based
    on the assumption that the distribution converges to a t distribution of n — 1
    degrees of freedom. But this may not necessarily be true, especially if n isn’t
    large enough. This necessitates an alternative framework that lets us test this
    assumption without bringing in the distributional assumption of the data. This
    leads us to the Sign Test, which simply involves counting the total number of
    observations more than m⁰. For example, consider the following data of n samples:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 这很简单且相当强大（正如我们稍后将看到的），但它基于一个假设，即分布收敛到一个自由度为 n — 1 的 t 分布。但这可能不一定成立，特别是当 n 不够大时。这需要一个替代框架，让我们可以在不引入数据的分布假设的情况下检验这个假设。这引出了符号检验，它只是涉及统计总数大于
    m⁰ 的观察值。例如，考虑以下的 n 个样本数据：
- en: '![](../Images/ac112324978024a1015d6b8b3ecec54f.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ac112324978024a1015d6b8b3ecec54f.png)'
- en: 'The hypotheses are given as follows:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 假设如下：
- en: '![](../Images/53c8ef19a49b100c48b1f8a01b969911.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/53c8ef19a49b100c48b1f8a01b969911.png)'
- en: 'As discussed above, we first calculate the number of Xᵢ more than m⁰. Let N⁺
    denote the random variable for the number of Xᵢ more than m⁰ and let n⁺ be its
    realized value for the given sample:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如上所述，我们首先计算大于 m⁰ 的 Xᵢ 的数量。令 N⁺ 表示大于 m⁰ 的 Xᵢ 的随机变量，令 n⁺ 为给定样本的实际值：
- en: '![](../Images/a3de8510815e024d68553abeb14035ac.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a3de8510815e024d68553abeb14035ac.png)'
- en: Now, we determine the distribution of the above test statistic under the null.
    Since m = m⁰ under the null, the probability that a sample is more than m⁰ must
    be 0.5\. Thus, N⁺ measures the number of samples more than m⁰, where each sample
    has a probability of 0.5 to contribute to N⁺ under the null hypothesis. In other
    words, N⁺ counts the number of successes, where each success occurs with a probability
    of 0.5\. This defines a binomial random variable parametrized with the number
    of samples n = 10, and the probability of success p = 0.5\. Thus,
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们确定在原假设下上述检验统计量的分布。由于在原假设下 m = m⁰，样本大于 m⁰ 的概率必须是 0.5。因此，N⁺ 衡量的是大于 m⁰ 的样本数，每个样本在原假设下有
    0.5 的概率贡献到 N⁺。换句话说，N⁺ 计算的是成功次数，每次成功的概率为 0.5。这定义了一个二项随机变量，参数为样本数 n = 10 和成功概率 p
    = 0.5。因此，
- en: '![](../Images/cf2c52e71931808c4b07c8baec97d280.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cf2c52e71931808c4b07c8baec97d280.png)'
- en: Now that the distribution of the test statistic is known under the null, we
    can proceed to calculate the p-value for the given sample. Recall that the p-value
    denotes the probability of observing a more extreme value (relative to the sample
    observed value of the test statistic) under the assumption that the null hypothesis
    is true. Thus,
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，已知检验统计量在原假设下的分布，我们可以继续计算给定样本的 p 值。请记住，p 值表示在原假设为真的假设下观察到比检验统计量样本值更极端值的概率。因此，
- en: '![](../Images/45dcadd08e7adba1f1997e2ec5197546.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/45dcadd08e7adba1f1997e2ec5197546.png)'
- en: 'Evidently, the p-value is quite large. So, even at a 10% significance level,
    since the p-value > 0.10, we fail to reject the null hypothesis! And that concludes
    the simple, yet useful application of the sign test. This also leads us to another
    important question: What if the alternative hypothesis was in the other direction,
    or what if it was two-sided? The process still remains the same, just that we
    count the number of observations that are lesser than m⁰ (N⁻). In particular,
    suppose we were interested in testing:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，p 值相当大。因此，即使在 10% 的显著性水平下，由于 p 值 > 0.10，我们也未能拒绝原假设！这就结束了简单却有用的符号检验应用。这也引出了另一个重要问题：如果备择假设在另一个方向，或者如果是双侧的情况呢？过程依然相同，只是我们计算比
    m⁰（N⁻）更少的观察次数。具体来说，假设我们有兴趣进行测试：
- en: '![](../Images/965d2ea4b8cd84913e0386c5117223b0.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/965d2ea4b8cd84913e0386c5117223b0.png)'
- en: Then,
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，
- en: '![](../Images/b65704d808e73534bff8750b4764d96a.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b65704d808e73534bff8750b4764d96a.png)'
- en: 'Note that the distribution still follows binomial with the same parameters
    as the reasoning remains the same as for the previous case. Finally, we discuss
    the two-sided hypothesis case:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，分布仍然遵循二项分布，参数与前一个案例的推理相同。最后，我们讨论双侧假设的情况：
- en: '![](../Images/5ed99ed2fdba0d80f8c7afeb20190ebd.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5ed99ed2fdba0d80f8c7afeb20190ebd.png)'
- en: 'For this case, we compute both N⁺ and N⁻ for the sample:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这种情况，我们计算样本的 N⁺ 和 N⁻：
- en: '![](../Images/3096e3bcc4adb035237f55b4760a9869.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3096e3bcc4adb035237f55b4760a9869.png)'
- en: As before the p-value gives us the probability of an outcome as extreme as 6
    or more numbers more than 0.5\. Because this is a two-sided test, an extreme result
    can be either 6 or more numbers more than 0.5 or 4 or fewer numbers more than
    0.5.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 与之前一样，p 值给出了比 6 或更多大于 0.5 的数值更极端的结果的概率。因为这是一个双侧检验，所以极端结果可以是 6 或更多大于 0.5 的数值，或者
    4 或更少大于 0.5 的数值。
- en: '![](../Images/111ba9f360355fde73fbafca6939ccc1.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/111ba9f360355fde73fbafca6939ccc1.png)'
- en: 'Just as before, the p-value is quite large. So, even at a 10% significance
    level, since the p-value > 0.10, we fail to reject the null hypothesis! Isn’t
    this fascinating? Just simple counting and one of the most basic probability distributions
    can allow us to test such a hypothesis. But, can we generalize the results? In
    other words, can we use this test in general for any specific quantile, not just
    the median? Sure, the methodology remains exactly the same. For example, suppose
    for the same dataset as above, we are given the following hypotheses:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 和以前一样，p 值相当大。因此，即使在 10% 的显著性水平下，由于 p 值 > 0.10，我们也未能拒绝原假设！这难道不令人着迷吗？仅仅是简单的计数和最基本的概率分布就能让我们测试这样的假设。但我们能否推广结果？换句话说，我们能否将此检验通用于任何特定分位数，而不仅仅是中位数？当然，方法论保持完全相同。例如，假设对于上述相同的数据集，我们有以下假设：
- en: '![](../Images/d4e2262542896795b3f25a1ae2ca7192.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d4e2262542896795b3f25a1ae2ca7192.png)'
- en: 'Note that π₀.₂₅ denotes the 25th quantile or the 1st quartile of the data.
    Just as before, we count the number of Xᵢ less than 3:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 注意π₀.₂₅表示数据的第25百分位数或第1四分位数。和以前一样，我们计算小于3的Xᵢ数量：
- en: '![](../Images/f475e13496091f7c24ea9139bef648e0.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f475e13496091f7c24ea9139bef648e0.png)'
- en: Now, we determine the distribution of the above test statistic under the null.
    Since π₀.₂₅ = 3 under the null, the probability that a sample is less than 3 must
    be 0.25\. Thus, N⁻ measures the number of samples less than 3, where each sample
    has a probability of 0.25 to contribute to N⁻ under the null hypothesis. In other
    words, N⁻ counts the number of successes, where each success occurs with a probability
    of 0.25\. This defines a binomial random variable parametrized with the number
    of samples n = 10, and the probability of success p = 0.25\. Thus,
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们确定在零假设下上述检验统计量的分布。由于在零假设下π₀.₂₅ = 3，因此样本小于3的概率必须是0.25。因此，N⁻测量小于3的样本数量，每个样本在零假设下有0.25的概率贡献给N⁻。换句话说，N⁻计算成功的数量，每个成功的概率是0.25。这定义了一个参数化为样本数量n
    = 10，成功概率p = 0.25的二项随机变量。因此，
- en: '![](../Images/7dfe18fb1315742ddba34587bb884631.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7dfe18fb1315742ddba34587bb884631.png)'
- en: Consequently,
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，
- en: '![](../Images/17afc994e96435ab7aed6b4776631c88.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/17afc994e96435ab7aed6b4776631c88.png)'
- en: That’s a lower p-value, but still not quite low enough to reject at a 5% or
    10% significance level. With this, we conclude our discussion on the One-Sample
    Sign Test.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个较低的p值，但仍不足以在5%或10%的显著性水平下拒绝。由此，我们结束了对单样本符号检验的讨论。
- en: 'Tool 2: Two-Sample Sign Test'
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工具 2：两样本符号检验
- en: 'In this section, we will attempt to generalize the sign test presented earlier
    to the case of two samples. Previously, we were given data (consisting of observations
    from a single sample X), and we could test the hypothesis on whether the median
    (or any of the quantiles) was larger, smaller, or not equal to a given threshold.
    In this section, we will extend the above notion to that of two samples. In particular,
    suppose we are given independent pairs of sample data (x₁, y₁), · · ·, (xₙ, yₙ).
    The null hypothesis states that the two samples are equally likely to be larger
    than the other i.e., the difference in their medians is 0, whereas the alternative
    hypothesis suggests that there is a difference in the two samples i.e, the difference
    in the median is either positive, negative or non-zero. Mathematically, the null
    and alternative hypotheses are given as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将尝试将前面介绍的符号检验推广到两样本的情况。之前，我们提供了数据（由单一样本X的观察值组成），我们可以检验中位数（或任何分位数）是否大于、小于或不等于给定的阈值。在本节中，我们将上述概念扩展到两样本的情况。特别地，假设我们得到独立的样本对数据(x₁,
    y₁)，· · ·, (xₙ, yₙ)。零假设声明两个样本大于对方的概率相等，即它们的中位数差为0，而备择假设则建议两个样本之间存在差异，即中位数差异为正、负或非零。数学上，零假设和备择假设如下：
- en: '![](../Images/888d7fd887aba34d28e1fcd5ce6bae06.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/888d7fd887aba34d28e1fcd5ce6bae06.png)'
- en: 'Example: Suppose we are given the following paired data:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：假设我们给出了以下配对数据：
- en: '![](../Images/3fff6daa8be6e28ab714982a7d8170e4.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3fff6daa8be6e28ab714982a7d8170e4.png)'
- en: 'The hypotheses are given as follows:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 假设如下：
- en: '![](../Images/ac944abab676dad739e10e7a9fe7ebfc.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ac944abab676dad739e10e7a9fe7ebfc.png)'
- en: 'The process of deriving the test statistic and finding its distribution remains
    similar. In the previous case, we simply checked for samples that were more than
    or less than the threshold (value under the null). In this case, we check for
    the sign by comparing each pair of observations. In other words, we check for
    the sign of Wᵢ = Xᵢ − Yᵢ for each observation from i = 1 to n:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 推导检验统计量并找到其分布的过程保持类似。在前面的案例中，我们只是检查了样本是否大于或小于阈值（零假设下的值）。在这个案例中，我们通过比较每对观察值来检查符号。换句话说，我们检查每个观察值的Wᵢ
    = Xᵢ − Yᵢ的符号，从i = 1到n：
- en: '![](../Images/366f47d45d869d73401c9080f995cbfb.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/366f47d45d869d73401c9080f995cbfb.png)'
- en: 'Table 1: Image by Author'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 表1：作者提供的图片
- en: 'The test statistic is given by:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 检验统计量定义为：
- en: '![](../Images/e355fce9aaffb46fc05120fe5d9e8d3c.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e355fce9aaffb46fc05120fe5d9e8d3c.png)'
- en: 'By previous logic, the distribution of the test statistic is Bin(n, 0.5) under
    the null (Think of the value of the test statistic as the number of successes
    in n trials, where each success i.e., Xᵢ > Yᵢ has a probability of 0.5 as both
    samples are equally likely to be larger than the other). The p-value is therefore
    given by:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 根据之前的逻辑，在原假设下，检验统计量的分布是 Bin(n, 0.5)（可以将检验统计量的值看作在 n 次试验中的成功次数，其中每次成功即 Xᵢ > Yᵢ
    的概率为 0.5，因为两个样本都同样可能大于对方）。因此，p值由以下公式给出：
- en: '![](../Images/8a3eb7f9c7d1b9d9ca0bf9437bdba61b.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8a3eb7f9c7d1b9d9ca0bf9437bdba61b.png)'
- en: 'Indeed, the p-value is much smaller, and we can reject the null hypothesis
    at a 10% significance level! Finally, let’s try to calculate the p-value for the
    same data if the alternative hypothesis was two-sided:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 确实，p值要小得多，我们可以在10%的显著性水平下拒绝原假设！最后，如果备择假设是双侧的，我们来尝试计算相同数据的p值：
- en: '![](../Images/479870ebc4b08fd9556963ccfcc87318.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/479870ebc4b08fd9556963ccfcc87318.png)'
- en: 'Because this is a two-sided test, an extreme result can be either 8 or more
    positive signs or 2 or fewer positive signs:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 因为这是一个双侧检验，极端结果可以是8个或更多正符号，或者2个或更少正符号：
- en: '![](../Images/9239649e4e05566d23bd61de4208a0a1.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9239649e4e05566d23bd61de4208a0a1.png)'
- en: Thus, we won’t be able to reject the null at a 10% significance for the two-sided
    case. This concludes our discussion on conducting the Sign Test for one and two
    sample cases.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们无法在10%的显著性水平下拒绝双侧假设。这结束了我们关于进行单样本和双样本符号检验的讨论。
- en: Limitations of the Sign Test
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 符号检验的局限性
- en: 'In the previous two sections, we used the sign test to conduct different kinds
    of hypothesis testing. While the test was found to be quite useful due to its
    non-parametricity (aka distribution-free). However, in general, the sign test
    isn’t quite powerful (i.e., for the same significance level, the probability of
    type 2 error remains quite high). The main reason for this is that the sign test
    only considers the sign of the values i.e., whether they are lesser than the threshold
    value under the null (for one-sample) or lesser than their counterpart (for two-sample).
    It does not consider the magnitude of the difference i.e., how large or small
    the deviation from 0 is. In practice, the sign test is rarely used, but it still
    serves as a great tool for introducing discussions on non-parametric hypothesis
    testing due to its immense simplicity. This leads us to a new hypothesis-testing
    framework: The Wilcoxon Signed Rank test, an extension to the Sign test in a way,
    that considers the order of the magnitude of deviation from 0 and assigns ranks
    to each sample value. The test will be described in greater detail in the next
    section.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在前两节中，我们使用符号检验进行不同类型的假设检验。由于其非参数性（即分布无关性），符号检验被发现非常有用。然而，一般来说，符号检验的能力并不是很强（即，对于相同的显著性水平，第二类错误的概率仍然很高）。主要原因是符号检验只考虑值的符号，即它们是否小于原假设下的阈值（对于单样本）或是否小于其对应值（对于双样本）。它没有考虑差异的大小，即偏离0的程度。在实践中，符号检验很少使用，但由于其极大的简单性，它仍然是引入非参数假设检验讨论的一个很好的工具。这引导我们进入一个新的假设检验框架：威尔科克森符号秩检验，这在某种程度上是对符号检验的扩展，考虑了偏离0的大小顺序，并为每个样本值分配秩。在下一节中，我们将更详细地描述该检验。
- en: 'Tool 3: One-Sample Wilcoxon Signed Rank Test'
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工具 3：单样本威尔科克森符号秩检验
- en: 'The theory behind the Wilcoxon Signed Rank Test is slightly convoluted. But,
    don’t worry. Let’s revisit the example from the previous section and apply the
    Wilcoxon test sequentially:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 威尔科克森符号秩检验背后的理论稍微复杂一些。但不用担心。让我们重新审视上一节中的例子，并依次应用威尔科克森检验：
- en: '![](../Images/fc108f5bcb37fb2a7048f67047f719b8.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fc108f5bcb37fb2a7048f67047f719b8.png)'
- en: '**Step 1:** Find the absolute value of the difference between Xᵢ and m⁰ for
    each i:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '**步骤 1：** 计算每个 Xᵢ 和 m⁰ 之间差值的绝对值：'
- en: '![](../Images/d21708499c47097c1fb6a483ce7bc46d.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d21708499c47097c1fb6a483ce7bc46d.png)'
- en: 'Table 2: Image by Author'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 表 2：作者提供的图片
- en: '**Step 2:** Rank each of the computed values in step 1 i.e., assign rank (Rᵢ)
    from 1 to n for every | Xᵢ − m⁰|:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '**步骤 2：** 对步骤 1 中计算出的每个值进行排名，即为每个 | Xᵢ − m⁰| 分配排名 (Rᵢ)，从1到 n：'
- en: '![](../Images/2ce047c5f4f0c4d83b90ecc4956d36d8.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2ce047c5f4f0c4d83b90ecc4956d36d8.png)'
- en: 'Table 3: Image by Author'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 表 3：作者提供的图片
- en: '**Step 3:** Compute the Signed Rank (Rₛᵢ) for each sample, where the sign is
    given by the sign of Xᵢ − 4 (the same sign that was used in the Sign Test) i.e.,'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '**步骤 3：** 计算每个样本的符号秩 (Rₛᵢ)，其中符号由 Xᵢ − 4 的符号给出（与符号检验中使用的符号相同），即：'
- en: '![](../Images/d8c1bfd3e5e51ac3824ebad1331e69e2.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d8c1bfd3e5e51ac3824ebad1331e69e2.png)'
- en: 'Table 4: Image by Author'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 表 4：作者提供的图像
- en: '**Step 4:** Compute the Wilcoxon Signed Rank Test statistic, which is given
    by the sum of the signed ranks for all the data points:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '**步骤 4：** 计算 Wilcoxon 符号秩检验统计量，其由所有数据点的符号秩之和给出：'
- en: '![](../Images/fd65a5daa17b5c852e64fb85700f2a6b.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fd65a5daa17b5c852e64fb85700f2a6b.png)'
- en: Before, we proceed to discuss the distribution of W, let’s pause for a moment
    and think about the logic for these steps. In the sign test, we simply counted
    the number of samples more than or less than m⁰. Here, we are weighing the count
    by rank, which measures the relative absolute deviation from m⁰ for different
    samples. This allows us to give a higher weight to values that were much lesser
    or much larger than m⁰, helping us overcome the limitation of the Sign test.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在讨论 W 的分布之前，让我们暂停一下，思考这些步骤的逻辑。在符号检验中，我们只是计算了大于或小于 m⁰ 的样本数量。在这里，我们通过秩来加权计数，这衡量了不同样本相对于
    m⁰ 的绝对偏差。这使我们能够对远小于或远大于 m⁰ 的值给予更高的权重，帮助我们克服符号检验的局限性。
- en: 'Now, let’s evaluate the distribution of W. It’s important to mention now that
    there is NO closed formula for the distribution of W (there are closed-form expressions
    for its moment-generating function, but no such expression exists for its mass
    function). One way to approach this problem is to use tables (Yes, there are specific
    tables designed for the critical values of W for different sample sizes) The other
    alternative is to approximate the distribution (CDF) of W using the Lyapunov CLT:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们评估 W 的分布。需要提到的是，W 的分布没有封闭形式的公式（虽然其矩生成函数有封闭形式的表达式，但其质量函数没有这样的表达式）。一种方法是使用表格（是的，有专门为不同样本量设计的
    W 临界值表）。另一种替代方法是使用 Lyapunov CLT 来近似 W 的分布（CDF）：
- en: '![](../Images/52d6b3880e0e15f38fee20209b521b2e.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/52d6b3880e0e15f38fee20209b521b2e.png)'
- en: 'where Φ is the cumulative density function of the standard normal distribution.
    The precise math is quite complex and beyond the scope of this article. But, we
    will still try to make sense of it. Let’s try to calculate the expectation and
    variance of W:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 Φ 是标准正态分布的累积分布函数。精确的数学公式相当复杂，超出了本文的范围。但是，我们仍将尽力理解它。让我们尝试计算 W 的期望和方差：
- en: '![](../Images/8a48db14ae72f5da24cfec3696d1678d.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8a48db14ae72f5da24cfec3696d1678d.png)'
- en: where Sᵣ denotes the sign of the rᵗʰ rank (all rank values will go from 1 to
    n). Thus,
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 Sᵣ 表示第 rᵗʰ 秩的符号（所有秩值将从 1 到 n）。因此，
- en: '![](../Images/501de44e03949ded7717efd6e8ea0650.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/501de44e03949ded7717efd6e8ea0650.png)'
- en: 'If we standardize W, we contain:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们对 W 进行标准化，我们得到：
- en: '![](../Images/998878c6f62e828369cf8ef4c545abcf.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/998878c6f62e828369cf8ef4c545abcf.png)'
- en: Indeed it’s quite similar to the expression inside Φ. In fact, by Lyapunov CLT
    (Not the traditional CLT, as even though the rSᵣ are independent, they are not
    necessarily identically distributed), we h
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 确实，它与 Φ 内部的表达式非常相似。实际上，通过 Lyapunov CLT（不是传统的 CLT，因为尽管 rSᵣ 是独立的，但它们不一定是同分布的），我们
    h
- en: '![](../Images/c59742d3d0fcf9f0116742c20d496908.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c59742d3d0fcf9f0116742c20d496908.png)'
- en: 'This leads to the Φ term in the distribution of W. You may also notice that
    the CDF of W contains an additional factor of 1\. This is simply a unit correction.
    Recall that W is a discrete random variable. Whenever a discrete random variable
    is approximated by a continuous one (e.g., the normal distribution), it’s always
    important to add a correction term, usually the half-unit correction. The half-unit
    correction helps to account for this discrepancy by adjusting the probabilities
    of the continuous distribution so that they more closely match the probabilities
    of the discrete distribution. Specifically, the correction involves shifting the
    midpoints of the intervals used to define the continuous distribution by 0.5 units
    in the direction opposite to the rounding convention. This ensures that the probabilities
    assigned to the intervals in the continuous distribution more closely match the
    probabilities of the discrete distribution, which improves the accuracy of the
    approximation. However, for approximating W, we tend to use a full-unit correction
    (instead of the traditional half-unit). This is because the values of W can differ
    from one another only in multiples of 2\. Think of it this way: If you have a
    value of W to be w, and you’re interested in decreasing the value of W by 1, you
    will have to flip the sign of a positive rank, which would add a minimal difference
    of 2\. For instance, in our example, W was calculated to be 3\. If we want to
    decrease W by 1, the best we can do is flip the +1 to -1, but this decreases the
    value of W by 2 (-1–1 = -2). Similar logic holds for increasing the value of W.
    Thus, in order to control for this range of values that W can take, a whole unit
    correction (0.5 × 2 = 1) is used instead of the traditional half unit correction
    (0.5 × 1 = 0.5). Thus, after applying the whole-unit correction and using Lyapunov
    CLT, we obtain:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这导致了W分布中的Φ项。你可能还会注意到W的CDF包含一个额外的1\. 这只是一个单位修正。回忆一下W是一个离散随机变量。每当离散随机变量被连续随机变量（例如正态分布）近似时，添加修正项总是很重要的，通常是半单位修正。半单位修正通过调整连续分布的概率，使其更接近离散分布的概率，从而帮助解决这个差异。具体来说，这个修正涉及将用于定义连续分布的区间的中点向相反的四舍五入约定方向移动0.5单位。这确保了连续分布中分配给区间的概率更接近离散分布的概率，从而提高了近似的准确性。然而，对于近似W，我们倾向于使用全单位修正（而不是传统的半单位修正）。这是因为W的值只能以2的倍数不同。这样考虑：如果你有一个W值为w，并且你有兴趣将W值减少1，你将不得不翻转一个正排名，这会使W的值减少2。例如，在我们的示例中，W被计算为3。如果我们想减少W值1，我们能做的最好是将+1翻转为-1，但这将使W的值减少2（-1–1
    = -2）。类似的逻辑适用于增加W的值。因此，为了控制W可以取的值范围，使用全单位修正（0.5 × 2 = 1）而不是传统的半单位修正（0.5 × 1 =
    0.5）。因此，在应用全单位修正并使用Lyapunov CLT之后，我们得到：
- en: '![](../Images/aecc4da2e81e30e1cba89df13c63137e.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/aecc4da2e81e30e1cba89df13c63137e.png)'
- en: Now that we have obtained an approximate expression for the distribution of
    W, we proceed to calculate the p-value for our example. Recall that the p-value
    denotes the probability of observing a more extreme value (relative to the sample
    observed value of the test statistic) under the assumption that the null hypothesis
    is true. Thus,
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经获得了W分布的近似表达式，我们继续计算我们示例的p值。回忆一下，p值表示在原假设为真的假设下观察到比样本观测值更极端的值的概率。因此，
- en: '![](../Images/b3cc00d2b559b6336f7e0984e9004090.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b3cc00d2b559b6336f7e0984e9004090.png)'
- en: 'Evidently, the p-value is quite large. So, even at a 10% significance level,
    since the p-value > 0.10, we fail to reject the null hypothesis! And that concludes
    the simple, yet useful application of the Wilcoxon Signed Rank test. Now let’s
    consider the case when the alternative hypothesis was in the other direction.
    In particular, suppose we were interested in testing:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，p值相当大。因此，即使在10%的显著性水平下，由于p值 > 0.10，我们未能拒绝原假设！这就是Wilcoxon符号秩检验的简单而有用的应用。现在让我们考虑当备择假设在另一个方向上的情况。特别是，假设我们有兴趣测试：
- en: '![](../Images/30e90198eb4ebb7234a0561685b9746c.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/30e90198eb4ebb7234a0561685b9746c.png)'
- en: 'The test statistic still remains the same. However, since the direction in
    favor of the alternative hypothesis changes, the p-value calculation is adjusted
    accordingly (as per the definition of p-value):'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 检验统计量仍然保持不变。然而，由于支持备择假设的方向发生变化，p值计算也相应调整（根据p值的定义）：
- en: '![](../Images/84457dbe74ae797fd38ca5b91604d086.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/84457dbe74ae797fd38ca5b91604d086.png)'
- en: 'Again, the p-value is large and we fail to reject the null at a 10% significance
    level. Finally, let’s look at the two-sided case:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，p 值较大，我们在 10% 的显著性水平下未能拒绝原假设。最后，让我们看一下双边情况：
- en: '![](../Images/cb6c8cc38de0452c1843b843aa916512.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cb6c8cc38de0452c1843b843aa916512.png)'
- en: 'The test statistic still remains the same. However, just as before, since the
    direction in favor of the alternative hypothesis changes, the p-value calculation
    is adjusted accordingly (as per the definition of p-value):'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 检验统计量仍然保持不变。然而，就像之前一样，由于支持替代假设的方向发生了变化，p 值的计算也会相应调整（按照 p 值的定义）：
- en: '![](../Images/87573c3ac3c9c5e16c8bc6b9167e39f6.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/87573c3ac3c9c5e16c8bc6b9167e39f6.png)'
- en: 'Again, the p-value is large and we fail to reject the null at a 10% significance
    level. Now, let’s generalize the test statistic for any specific quantile, not
    just the median. The methodology remains exactly the same. For example, suppose
    for the same dataset as above, we are given the following hypotheses:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，p 值较大，我们在 10% 的显著性水平下未能拒绝原假设。现在，让我们将检验统计量推广到任何特定的分位数，而不仅仅是中位数。方法完全相同。例如，假设对于上面的相同数据集，我们给出以下假设：
- en: '![](../Images/1a3f055fa21768ef737cc7dea8083603.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1a3f055fa21768ef737cc7dea8083603.png)'
- en: 'Just as before, we construct the table and sum up the signed ranks to get the
    test statistic:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 就像之前一样，我们构建表格并汇总符号秩以得到检验统计量：
- en: '![](../Images/ffab3d6dab8aaf9cc6f2b86ee592345e.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ffab3d6dab8aaf9cc6f2b86ee592345e.png)'
- en: 'Table 5: Image by Author'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 表 5：作者提供的图片
- en: '![](../Images/700490045d868650679012a0fd7f5e29.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/700490045d868650679012a0fd7f5e29.png)'
- en: 'Now, we determine the distribution of the above test statistic under the null:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们确定上述检验统计量在原假设下的分布：
- en: '![](../Images/1cdc7c457538a3dfe450ac5564c7bf4e.png)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1cdc7c457538a3dfe450ac5564c7bf4e.png)'
- en: If we standardize W, we obtain
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们标准化 W，我们得到
- en: '![](../Images/c82f74a0f706c24491685058bc6a9f11.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c82f74a0f706c24491685058bc6a9f11.png)'
- en: 'By Lyapunov CLT, we have:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 根据 Lyapunov CLT，我们有：
- en: '![](../Images/4148114ea1018e89ae55aba5dcfd8fa6.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4148114ea1018e89ae55aba5dcfd8fa6.png)'
- en: Thus,
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，
- en: '![](../Images/0e08e44242febcb158fc5e1b00f50f4f.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0e08e44242febcb158fc5e1b00f50f4f.png)'
- en: That’s a lower p-value, but still not quite low enough to reject at a 5% or
    10% significance level. With this, we conclude our discussion on the One-Sample
    Wilcoxon Signed Rank Test.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个较低的 p 值，但仍然不够低，无法在 5% 或 10% 显著性水平下拒绝原假设。至此，我们结束了对单样本 Wilcoxon 符号秩检验的讨论。
- en: 'Wilcoxon Signed Rank Test: Possible Complications'
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Wilcoxon 符号秩检验：可能的复杂情况
- en: 'There are two possible complications that may arise while using the Wilcoxon
    Signed Rank test:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Wilcoxon 符号秩检验时可能会出现两种可能的复杂情况：
- en: 'For i ̸= j, |Xᵢ − m⁰| = |Xᵢⱼ − m⁰| i.e., the absolute deviations from m⁰ are
    the same. In this case, which of the observations would be assigned a higher rank?
    Firstly, under the assumption that the data follows a continuous distribution,
    the same data shouldn’t be occurring more than once theoretically. But, often
    in practice, this can happen. There are many ways to approach this problem, but
    the most common strategy is to assign each sample the average of the ranks. For
    instance, if there are 4 sample values such that they have the same absolute deviation
    from m⁰. If these observations take the ranks 7, 8, 9, and 10, for each sample
    we assign the average rank: (7 + 8 + 9 + 10)/4 = 8.5.'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 i ≠ j，|Xᵢ − m⁰| = |Xᵢⱼ − m⁰| 即，绝对偏差与 m⁰ 相同。在这种情况下，哪个观察值会被分配更高的秩？首先，在数据遵循连续分布的假设下，相同的数据理论上不应出现多次。但是，实际上，往往会发生这种情况。有很多方法可以解决这个问题，但最常见的策略是为每个样本分配秩的平均值。例如，如果有
    4 个样本值，它们与 m⁰ 的绝对偏差相同。如果这些观察值的秩为 7、8、9 和 10，则为每个样本分配平均秩：(7 + 8 + 9 + 10)/4 = 8.5。
- en: If |Xᵢ − m⁰| = 0 for some i, we exclude this sample from the analysis itself.
    We just used the reduced sample (and the corresponding reduced sample size) to
    compute the test statistic and its distribution.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果 |Xᵢ − m⁰| = 0，对于某些 i，我们从分析中排除该样本。我们仅使用减少后的样本（以及相应的减少样本量）来计算检验统计量及其分布。
- en: 'For example, if we are given the following data and hypothesis:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果我们给出以下数据和假设：
- en: '![](../Images/a015e993a056970dc9c291a2d699b2e0.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a015e993a056970dc9c291a2d699b2e0.png)'
- en: 'We exclude the 5th sample (since |X₅ − 3| = 0) and use the remaining samples
    to calculate the average ranks:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 我们排除第 5 个样本（因为 |X₅ − 3| = 0），并使用剩余的样本来计算平均秩：
- en: '![](../Images/0dab4e06fd86eec6e5f79244ee2386a1.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0dab4e06fd86eec6e5f79244ee2386a1.png)'
- en: 'Table 6: Image by Author'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 表 6：作者提供的图片
- en: '![](../Images/77f18ab626682d0c20958d49f5ae98cf.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/77f18ab626682d0c20958d49f5ae98cf.png)'
- en: 'Tool 4: Two-Sample Wilcoxon Signed Rank Test'
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '工具 4: 两样本 Wilcoxon 符号秩检验'
- en: 'As our last non-parametric hypothesis testing toolkit, let’s look at the two-sample
    extension of the Wilcoxon Signed Rank Test. As before, the null hypothesis states
    that the difference in the medians is 0, whereas the alternative hypothesis suggests
    that there is a difference in the two samples i.e., the difference in the median
    is either positive, negative, or non-zero. Mathematically, the null and alternative
    hypotheses are given as follows:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 作为我们最后的非参数假设检验工具包，让我们看一下 Wilcoxon 符号秩检验的两样本扩展。如前所述，原假设认为中位数的差异为 0，而备择假设则建议两个样本之间存在差异，即中位数的差异为正、负或非零。数学上，原假设和备择假设如下：
- en: '![](../Images/ef702dac012ea64f002954ac0f17a3dd.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ef702dac012ea64f002954ac0f17a3dd.png)'
- en: 'Let’s first look at the general framework and then consider an example. Suppose
    we are given data from two samples: X₁, X₂, · · ·, Xₙ₁ and Y₁, Y₂, · · ·, Yₙ₂.
    We combine the two samples in a single sample and arrange all observations in
    ascending order. For each observation, we assign the ranks (or average ranks in
    case of disputes) from 1, 2, · · ·, n1 + n2\. Finally, we calculate the sum of
    ranks for all observations from X, which we refer to as our test statistic W.
    For example, consider that we are given the following paired data:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 首先看一下总体框架，然后考虑一个示例。假设我们有两个样本的数据：X₁, X₂, · · ·, Xₙ₁ 和 Y₁, Y₂, · · ·, Yₙ₂。我们将两个样本组合成一个样本，并将所有观测值按升序排列。对于每个观测值，我们分配排名（如有争议则使用平均排名），从
    1, 2, · · ·, n1 + n2 开始。最后，我们计算所有 X 样本观测值的排名总和，我们称之为测试统计量 W。例如，考虑以下配对数据：
- en: '![](../Images/369ba34c44549ad4c38c0da167c1e3fc.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/369ba34c44549ad4c38c0da167c1e3fc.png)'
- en: 'The hypotheses are given as follows:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 假设如下：
- en: '![](../Images/ff0e0773c4372fb79616f8acb9bc88ce.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ff0e0773c4372fb79616f8acb9bc88ce.png)'
- en: '**Step 1:** Combine Xᵢ and Yᵢ :'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '**步骤 1:** 组合 Xᵢ 和 Yᵢ：'
- en: 24.27, 8.63, 16.76, 21.92, 29.59, 4.01, 7.28, −7.75, −6.61, 13.05, 13.47, 24.6,
    −4.97, 0.07, 6.96, −0.53, 7.26, −11.7, −5.01, −4.43
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 24.27, 8.63, 16.76, 21.92, 29.59, 4.01, 7.28, −7.75, −6.61, 13.05, 13.47, 24.6,
    −4.97, 0.07, 6.96, −0.53, 7.26, −11.7, −5.01, −4.43
- en: '**Step 2:** Arrange the combination in ascending order (remember to keep track
    of which observations, come from which sample:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '**步骤 2:** 将组合排列成升序（记得跟踪哪些观测值来自哪个样本）：'
- en: '![](../Images/44f8ba660c689d962bd6620b9c2793f2.png)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/44f8ba660c689d962bd6620b9c2793f2.png)'
- en: 'Table 7: Image by Author'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '表 7: 作者提供的图片'
- en: '**Step 3:** Assign The Ranks:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '**步骤 3:** 分配排名：'
- en: '![](../Images/ec2489951f660a98fb1b02787730f5d8.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ec2489951f660a98fb1b02787730f5d8.png)'
- en: 'Table 8: Image by Author'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '表 8: 作者提供的图片'
- en: '**Step 4:** Calculate the test statistic by summing up ranks from sample X:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '**步骤 4:** 通过对 X 样本的排名求和来计算测试统计量：'
- en: '![](../Images/0715f185b6814f23386d3c95f258556d.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0715f185b6814f23386d3c95f258556d.png)'
- en: 'Next, we find the distribution of W under the null. As before, there is NO
    closed formula for the distribution of W, So we approximate the distribution (CDF)
    of W using the Lyapunov CLT:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们找到 W 在原假设下的分布。如前所述，W 的分布没有封闭公式，因此我们使用 Lyapunov CLT 来近似 W 的分布（CDF）：
- en: '![](../Images/ae0861a77c9553bb309ca28d49d15839.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ae0861a77c9553bb309ca28d49d15839.png)'
- en: 'where Φ is the cumulative density function of the standard normal distribution.
    We can check this by calculating the expectation and variance of W. Note, that
    this calculation is quite extensive, so you may skip over it and proceed to the
    p-value calculation directly. But, we still include it for completeness. Let Rˣᵢ
    denote the rank assigned to the iᵗʰ sample from X, and Rʸⱼ denote the rank assigned
    to the jᵗʰ sample from Y :'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 Φ 是标准正态分布的累积分布函数。我们可以通过计算 W 的期望和方差来检查这一点。请注意，这一计算相当复杂，因此您可以跳过它，直接进行 p 值计算。但我们仍包括这一部分以求完整。让
    Rˣᵢ 表示分配给 X 的第 i 个样本的排名，而 Rʸⱼ 表示分配给 Y 的第 j 个样本的排名：
- en: '![](../Images/dfabb1c2ac2f622639f73d96329b1095.png)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dfabb1c2ac2f622639f73d96329b1095.png)'
- en: Under the null, since the distributions are identical, Rˣᵢ and Rʸⱼ must be identically
    distributed for all 1 ≤ i ≤ n₁; 1 ≤ j ≤ n₂. Thus,
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在原假设下，由于分布相同，Rˣᵢ 和 Rʸⱼ 必须在 1 ≤ i ≤ n₁; 1 ≤ j ≤ n₂ 的范围内完全分布。因此，
- en: '![](../Images/7337e05c048d922e13f8e97ae05be341.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7337e05c048d922e13f8e97ae05be341.png)'
- en: 'The calculation for the variance is slightly more complex. We make use of the
    following facts:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 方差的计算略微复杂。我们利用以下事实：
- en: '![](../Images/6239363e48f08be0411db609063975d1.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6239363e48f08be0411db609063975d1.png)'
- en: Thus,
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，
- en: '![](../Images/1d2ab73f023515aa323446553ac02f49.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1d2ab73f023515aa323446553ac02f49.png)'
- en: 'Similarly, for i ̸= j:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，对于 i ̸= j：
- en: '![](../Images/5a1ac30dfd3e5cfcbada0a17abc6c043.png)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5a1ac30dfd3e5cfcbada0a17abc6c043.png)'
- en: 'Therefore, by the definition of variance and covariance, we have:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，根据方差和协方差的定义，我们有：
- en: '![](../Images/3f67eecb40e3eddc06099957956e5cab.png)![](../Images/fe5d37ef1c600689926f6c20ceee52cf.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3f67eecb40e3eddc06099957956e5cab.png)![](../Images/fe5d37ef1c600689926f6c20ceee52cf.png)'
- en: 'Therefore, by the extended sum of variances:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，通过方差的扩展和求和：
- en: '![](../Images/2b35a6826f737a5b486242ac2ecdd1e9.png)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2b35a6826f737a5b486242ac2ecdd1e9.png)'
- en: 'Thus, if we standardize W and apply CLT, we obtain:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，如果我们标准化 W 并应用 CLT，我们得到：
- en: '![](../Images/130f11157c699f6171657e875d00d8d1.png)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/130f11157c699f6171657e875d00d8d1.png)'
- en: Thus,
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，
- en: '![](../Images/0f00cecb1587c1b22ad732810e47ac1f.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0f00cecb1587c1b22ad732810e47ac1f.png)'
- en: 'Thus, at a 10% significance level, since the p-value < 0.10 we can reject the
    null hypothesis! Finally, let’s try to calculate the p-value for the same data
    if the alternative hypothesis was two-sided:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在 10% 的显著性水平下，由于 p 值 < 0.10，我们可以拒绝零假设！最后，让我们尝试计算相同数据的 p 值，如果备择假设是双侧的：
- en: '![](../Images/0298ea43f2349b54fb58a1fe5c9b3d20.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0298ea43f2349b54fb58a1fe5c9b3d20.png)'
- en: 'The test statistic still remains the same. However, just as before, since the
    direction in favor of the alternative hypothesis changes, the p-value calculation
    is adjusted accordingly (as per the definition of p-value):'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 测试统计量仍然保持不变。然而，就像以前一样，由于支持备择假设的方向改变，p 值的计算相应地进行了调整（根据 p 值的定义）：
- en: '![](../Images/c6fe463fc4703b076fc0f2e9550e5693.png)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c6fe463fc4703b076fc0f2e9550e5693.png)'
- en: Thus, we won’t be able to reject the null at 10% significance for the two-sided
    case. This concludes our discussion on conducting the Wilcoxon Signed Rank Test
    for one and two sample cases.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在双侧情况下，我们无法在 10% 的显著性水平下拒绝零假设。这结束了我们对进行 Wilcoxon 符号秩检验进行单样本和双样本情况讨论。
- en: Conclusion
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: In this article, we familiarised ourselves with some of the most well-known
    non-parametric or distribution-free hypothesis testing frameworks. We took a look
    at the Sign Test and the Wilcoxon Signed Rank Test for both the one-sample and
    the two-sample case and compared their performance on sample observations. We
    explored both the one-sided and the two-sided cases for each of the tests as well
    as how to generalize them for testing for any given quantile of the data. The
    Sign test, although less powerful in general is quite simple, relying only on
    the CDF of the binomial distribution to derive the associated p-values. The Wilcoxon
    Signed Rank Test, on the other hand, is far more complex in its theory but tends
    to give better results as it not only considers whether the values are smaller
    or bigger than the threshold but also considers the relative magnitude of their
    absolute deviations.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我们熟悉了一些最知名的非参数或无分布假设检验框架。我们查看了符号检验和 Wilcoxon 符号秩检验在单样本和双样本情况下的表现，并比较了它们在样本观察中的表现。我们探讨了每个测试的单侧和双侧情况，以及如何将它们推广为测试数据的任何给定分位数。符号检验虽然一般不太强大，但非常简单，仅依赖于二项分布的累积分布函数来推导相关的
    p 值。另一方面，Wilcoxon 符号秩检验在理论上更为复杂，但往往能够给出更好的结果，因为它不仅考虑值是否小于或大于阈值，还考虑它们绝对偏差的相对大小。
- en: Hope you enjoyed reading this article! In case you have any doubts or suggestions,
    do reply in the comment box.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 希望您喜欢阅读本文！如果您有任何疑问或建议，请在评论框中回复。
- en: Please feel free to contact me via [mail](mailto:naman.agr03@gmail.com). If
    you liked my article and want to read more of them, visit this [link](https://medium.com/@namanagr03).
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您喜欢我的文章并希望阅读更多，请随时通过 [邮件](mailto:naman.agr03@gmail.com) 联系我。访问此 [链接](https://medium.com/@namanagr03)。
- en: 'Note: All images have been made by the author.'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 注：所有图片均由作者制作。
