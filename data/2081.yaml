- en: Monitoring unstructured data for LLM and NLP
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控无结构数据以用于LLM和NLP
- en: 原文：[https://towardsdatascience.com/monitoring-unstructured-data-for-llm-and-nlp-efff42704e5b?source=collection_archive---------10-----------------------#2023-06-27](https://towardsdatascience.com/monitoring-unstructured-data-for-llm-and-nlp-efff42704e5b?source=collection_archive---------10-----------------------#2023-06-27)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/monitoring-unstructured-data-for-llm-and-nlp-efff42704e5b?source=collection_archive---------10-----------------------#2023-06-27](https://towardsdatascience.com/monitoring-unstructured-data-for-llm-and-nlp-efff42704e5b?source=collection_archive---------10-----------------------#2023-06-27)
- en: A code tutorial on using text descriptors
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用文本描述符的代码教程
- en: '[](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)[![Elena
    Samuylova](../Images/bc3024500f8b90a97f13d82ecaa1c9e7.png)](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)[](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)
    [Elena Samuylova](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)[![Elena
    Samuylova](../Images/bc3024500f8b90a97f13d82ecaa1c9e7.png)](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)[](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)[![数据科学前沿](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)
    [Elena Samuylova](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)'
- en: ·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9621354b583a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&user=Elena+Samuylova&userId=9621354b583a&source=post_page-9621354b583a----efff42704e5b---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)
    ·14 min read·Jun 27, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fefff42704e5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&user=Elena+Samuylova&userId=9621354b583a&source=-----efff42704e5b---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9621354b583a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&user=Elena+Samuylova&userId=9621354b583a&source=post_page-9621354b583a----efff42704e5b---------------------post_header-----------)
    发表在 [数据科学前沿](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)
    · 14分钟阅读 · 2023年6月27日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fefff42704e5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&user=Elena+Samuylova&userId=9621354b583a&source=-----efff42704e5b---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fefff42704e5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&source=-----efff42704e5b---------------------bookmark_footer-----------)![](../Images/9449b853160c4015be247a0c901aee69.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fefff42704e5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&source=-----efff42704e5b---------------------bookmark_footer-----------)![](../Images/9449b853160c4015be247a0c901aee69.png)'
- en: Image by Author.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: Once you deploy an NLP or LLM-based solution, you need a way to keep tabs on
    it. But how do you monitor unstructured data to make sense of the pile of texts?
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你部署了基于NLP或LLM的解决方案，你需要一种方法来监控它。但是你如何监控无结构数据以理解大量文本呢？
- en: There are a few approaches here, from [detecting drift in raw text data](https://www.evidentlyai.com/blog/tutorial-detecting-drift-in-text-data)
    and [embedding drift](https://www.evidentlyai.com/blog/embedding-drift-detection)
    to using regular expressions to run rule-based checks.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有几种方法，从 [检测原始文本数据中的漂移](https://www.evidentlyai.com/blog/tutorial-detecting-drift-in-text-data)
    和 [嵌入漂移](https://www.evidentlyai.com/blog/embedding-drift-detection) 到使用正则表达式进行规则检查。
- en: In this tutorial, we’ll dive into one particular approach — tracking interpretable
    text descriptors that help assign specific properties to every text.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们将深入探讨一种特定的方法——跟踪可解释的文本描述符，这有助于为每段文本分配特定属性。
- en: '**First, we’ll cover some theory:**'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '**首先，我们将讨论一些理论：**'
- en: What is a text descriptor, and when to use them.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是文本描述符，以及何时使用它们。
- en: Examples of text descriptors.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本描述符示例。
- en: How to select custom descriptors.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何选择自定义描述符。
- en: '**Next, get to code!** You will work with e-commerce review data and go through
    the following steps:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '**接下来，开始编码吧！** 你将使用电子商务评论数据并完成以下步骤：'
- en: Get an overview of the text data.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取文本数据的概览。
- en: Evaluate text data drift using standard descriptors.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用标准描述符评估文本数据漂移。
- en: Add a custom text descriptor using an external pre-trained model.
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用外部预训练模型添加自定义文本描述符。
- en: Implement pipeline tests to monitor data changes.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施管道测试以监控数据变化。
- en: We will use the [Evidently open-source Python library](https://github.com/evidentlyai/evidently)
    to generate text descriptors and evaluate changes in the data.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用[Evidently开源Python库](https://github.com/evidentlyai/evidently)来生成文本描述符并评估数据变化。
- en: '***Code example:*** *If you prefer to go straight to the code, here is the*
    [*example notebook*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb)*.*'
  id: totrans-22
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***代码示例：*** *如果你更喜欢直接查看代码，这里是* [*示例笔记本*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb)*。*'
- en: What is a text descriptor?
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是文本描述符？
- en: A text descriptor is any feature or property that describes objects in the text
    dataset. For example, the length of texts or the number of symbols in them.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 文本描述符是描述文本数据集中对象的任何特征或属性。例如，文本长度或其中的符号数量。
- en: You might already have helpful metadata to accompany your texts that will serve
    as descriptors. For example, e-commerce user reviews might come with user-assigned
    ratings or topic labels.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能已经拥有有用的元数据来伴随你的文本，作为描述符。例如，电子商务用户评论可能会附带用户分配的评级或主题标签。
- en: Otherwise, you can generate your own descriptors! You do this by adding “virtual
    features” to your text data. Each helps describe or classify your texts using
    some meaningful criteria.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 否则，你可以生成自己的描述符！你可以通过向文本数据添加“虚拟特征”来做到这一点。每个描述符都有助于使用一些有意义的标准描述或分类你的文本。
- en: '![](../Images/4d3ad2d6d7d7d91249e42b8d12b13dec.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4d3ad2d6d7d7d91249e42b8d12b13dec.png)'
- en: Image by Author.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: By creating these descriptors, you basically come up with your own simple “embedding”
    and map each text to several interpretable dimensions. This helps make sense of
    the otherwise unstructured data.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 通过创建这些描述符，你基本上提出了自己的简单“嵌入”，并将每个文本映射到几个可解释的维度。这有助于理解那些原本无结构的数据。
- en: 'You can then use these text descriptors:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 然后你可以使用这些文本描述符：
- en: '**To monitor production NLP models.** You can track the properties of your
    data in time and detect when they change. For example, descriptors help detect
    text length spikes or drift in sentiment.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控生产 NLP 模型。** 你可以跟踪数据的属性，并检测它们何时发生变化。例如，描述符有助于检测文本长度的突增或情感的漂移。'
- en: '**To test models during updates.** When you iterate on models, you can compare
    the properties of the evaluation datasets and model responses. For example, you
    can check that the lengths of the LLM-generated answers remain similar, and they
    consistently include words you expect to see.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在更新期间测试模型。** 当你迭代模型时，可以比较评估数据集的属性和模型响应。例如，你可以检查LLM生成的答案的长度是否保持一致，并且它们是否始终包含你期望看到的单词。'
- en: '**To debug data drift or model decay.** If you detect [embedding drift](https://www.evidentlyai.com/blog/embedding-drift-detection)
    or directly observe a drop in the model quality, you can use text descriptors
    to explore where it comes from.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**调试数据漂移或模型衰退。** 如果你检测到[嵌入漂移](https://www.evidentlyai.com/blog/embedding-drift-detection)或直接观察到模型质量下降，你可以使用文本描述符来探索其来源。'
- en: Examples of text descriptors
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 文本描述符示例
- en: 'Here are a few text descriptors we consider good defaults:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们认为良好的默认文本描述符：
- en: Text length
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 文本长度
- en: '![](../Images/184e6533f48040200fe1378cad612a11.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/184e6533f48040200fe1378cad612a11.png)'
- en: '*Image by Author. Text overview metric visualization using the* [*Evidently
    Python library*](https://github.com/evidentlyai/evidently)*.*'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '*作者提供的图片。使用* [*Evidently Python 库*](https://github.com/evidentlyai/evidently)*的文本概览度量可视化。*'
- en: An excellent place to start is simple text statistics. For example, you can
    look at the **length of texts** measured in words, symbols, or sentences. You
    can evaluate average and min-max length and look at distributions.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 一个很好的起点是简单的文本统计。例如，你可以查看**文本长度**，按单词、符号或句子来度量。你可以评估平均长度、最小值和最大值，并查看分布情况。
- en: You can set expectations based on your use case. Say, product reviews tend to
    be between 5 and 100 words. If they are shorter or longer, this might signal a
    change in context. If there is a spike in fixed-length reviews, this might signal
    a spam attack. If you know that negative reviews are often longer, you can track
    the share of reviews above a certain length.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以根据你的使用案例设定期望。例如，产品评论通常在5到100个单词之间。如果评论更短或更长，这可能表示上下文发生了变化。如果固定长度评论的数量激增，这可能表示垃圾邮件攻击。如果你知道负面评论通常较长，你可以跟踪超过某一长度的评论比例。
- en: 'There are also quick sanity checks: if you run a chatbot, you might expect
    non-zero responses or that there is some minimum length for the meaningful output.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些快速的合理性检查：如果你运行聊天机器人，你可能期望有非零响应或者有一些有意义输出的最小长度。
- en: Out-of-vocabulary words
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 词汇表外的单词
- en: '![](../Images/a65c56974f1b1f3ae2d41514a07315b3.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a65c56974f1b1f3ae2d41514a07315b3.png)'
- en: Image by Author. *The mean OOV share in the example reference dataset is 5.378%.*
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。*示例参考数据集中OOV的平均比例为5.378%。*
- en: Evaluating the share of words outside the defined vocabulary is a good “crude”
    measure of data quality. Did your users start writing reviews in a new language?
    Are users talking to your chatbot in Python, not English? Are users filling the
    responses with “ggg” instead of actual words?
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 评估超出定义词汇范围的单词比例是一个很好的“粗略”数据质量衡量标准。你的用户是否开始用新的语言撰写评论？用户是否用Python而非英语与聊天机器人对话？用户是否用“ggg”代替实际单词填写响应？
- en: This is a single practical measure to detect all sorts of changes. Once you
    catch a shift, you can then debug deeper.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 这是检测各种变化的一个实际措施。一旦发现变化，你可以进行更深入的调试。
- en: You can shape expectations about the share of OOV words based on the examples
    from “good” production data accumulated over time. For example, if you look at
    the corpus of previous product reviews, you might expect OOV to be under 10% and
    monitor if the value goes above this threshold.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以根据长期积累的“良好”生产数据示例来设定对OOV单词比例的期望。例如，如果你查看以往产品评论的语料库，你可能会期望OOV在10%以下，并监控其值是否超过这个阈值。
- en: Non-letter characters
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 非字母字符
- en: 'Related, but with a twist: this descriptor will count all sorts of special
    symbols that are not letters or numbers, including commas, brackets, hashes, etc.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 相关，但有个小变化：这个描述符将统计所有非字母或数字的特殊符号，包括逗号、括号、井号等。
- en: 'Sometimes you expect a fair share of special symbols: your texts might contain
    code or be structured as a JSON. Sometimes, you only expect punctuation marks
    in human-readable text.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你会期望出现相当多的特殊符号：你的文本可能包含代码或以JSON格式结构化。有时，你只期望在人类可读的文本中出现标点符号。
- en: Detecting a shift in non-letter characters can expose data quality issues, like
    HTML codes leaking into the texts of the reviews, spam attacks, unexpected use
    cases, etc.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 检测非字母字符的变化可以揭示数据质量问题，比如HTML代码泄漏到评论文本中、垃圾邮件攻击、意外的使用场景等。
- en: Sentiment
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 情感
- en: '![](../Images/0b6feb7078990f2fd42ebf4054b2cb2b.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0b6feb7078990f2fd42ebf4054b2cb2b.png)'
- en: Image by Author. *Baseline “sentiment” distribution in the example e-commerce
    reviews dataset.*
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。*示例电子商务评论数据集中“基准”情感分布。*
- en: 'Text sentiment is another indicator. It is helpful in various scenarios: from
    chatbot conversations to user reviews and writing marketing copy. You can typically
    set an expectation about the sentiment of the texts you deal with.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 文本情感是另一个指标。它在各种场景中都很有用：从聊天机器人对话到用户评论和营销文案编写。你通常可以设定你处理的文本的情感预期。
- en: 'Even if the sentiment “does not apply,” this might translate to the expectation
    of a primarily neutral tone. The potential appearance of either a negative or
    positive tone is worth tracking and looking into. It might indicate unexpected
    usage scenarios: is the user using your virtual mortgage advisor as a complaint
    channel?'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 即使情感“无关”，这可能意味着期望的主要是中立的语调。负面或正面的语调的潜在出现是值得跟踪和调查的。这可能表明意外的使用场景：用户是否将你的虚拟抵押贷款顾问用作投诉渠道？
- en: 'You might also expect a certain balance: for example, there is always a share
    of conversations or reviews with a negative tone, but you’d expect it not to exceed
    a certain threshold or the overall distribution of review sentiment to remain
    stable.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可能期望某种平衡：例如，总会有一部分对话或评论带有负面语调，但你会期望它不会超过某个阈值，或者评论情感的整体分布保持稳定。
- en: Trigger words
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 触发词
- en: '![](../Images/b8cb44f8a4202672b43ca925422086b8.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b8cb44f8a4202672b43ca925422086b8.png)'
- en: 'Image by Author. *Reviews consistently mention dresses: no distribution drift
    is detected.*'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。*评论一致提到连衣裙：未检测到分布漂移。*
- en: You can also check whether the texts contain words from a specific list or lists
    and treat this as a binary feature.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以检查文本是否包含特定列表中的单词，并将其视为二进制特征。
- en: 'This is a powerful way to encode multiple expectations about your texts. You
    need some effort to curate lists manually, but you can design many handy checks
    this way. For example, you can create lists of trigger words like:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一种强大的方式来编码对你文本的多个期望。你需要一些努力来手动策划列表，但你可以通过这种方式设计许多有用的检查。例如，你可以创建触发词列表，如：
- en: Mentions of products or brands.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提及产品或品牌。
- en: Mentions of competitors.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提及竞争对手。
- en: Mentions of locations, cities, places, etc.
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提及地点、城市、地方等。
- en: Mentions of words that represent particular topics.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提及代表特定主题的单词。
- en: You can curate (and continuously extend) lists like this that are specific to
    your use case.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以策划（并不断扩展）类似的列表，这些列表是特定于你的用例的。
- en: For example, if an advisor chatbot helps choose between products offered by
    the company, you might expect most of the responses to contain the names of one
    of the products from the list.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果一个顾问聊天机器人帮助选择公司提供的产品之一，你可能会期望大多数响应中包含该列表中某个产品的名称。
- en: RegExp matches
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: RegExp 匹配
- en: 'The inclusion of specific words from the list is one example of a pattern you
    can formulate as a regular expression. You can come up with others: do you expect
    your texts to start with “hello” and end with “thank you”? Include emails? Contain
    known named elements?'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 包含特定单词的例子是你可以制定的正则表达式模式之一。你可以想出其他模式：你是否期望你的文本以“hello”开头并以“thank you”结尾？包含电子邮件？包含已知的命名元素？
- en: If you expect the model inputs or outputs to match a specific format, you can
    use regular expression match as another descriptor.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你期望模型输入或输出符合特定格式，你可以使用正则表达式匹配作为另一种描述符。
- en: Custom descriptors
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自定义描述符
- en: 'You can extend this idea further. For example:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以进一步扩展这个想法。例如：
- en: '**Evaluate other text properties**: toxicity, subjectivity, the formality of
    the tone, readability score, etc. You can often find open pre-trained models to
    do the trick.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**评估其他文本属性**：毒性、主观性、语气的正式程度、可读性评分等。你通常可以找到开放的预训练模型来完成这项任务。'
- en: '**Count specific components:** emails, URLs, emojis, dates, and parts of speech.
    You can use external models or even simple regular expressions.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**计数特定组件：** 电子邮件、URL、表情符号、日期和词性。你可以使用外部模型或甚至简单的正则表达式。'
- en: '**Get granular with stats:** you can track very detailed text statistics if
    they are meaningful to your use case, e.g., track average lengths of words, whether
    they are upper or lower case, the ratio of unique words, etc.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**深入统计数据：** 如果这些数据对你的用例有意义，你可以追踪非常详细的文本统计数据，例如，追踪单词的平均长度，它们是大写还是小写，唯一单词的比例等。'
- en: '**Monitor personally identifiable information**: for example, when you do not
    expect it to come up in chatbot conversations.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控个人可识别信息**：例如，当你不期望它出现在聊天机器人对话中时。'
- en: '**Use named entity recognition:** to extract specific entities and treat them
    as tags. **‍**'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用命名实体识别：** 提取特定实体并将其视为标签。**‍**'
- en: '**Use topic modeling** to build a topic monitoring system. This is the most
    laborious approach but powerful when done right. It is useful when you expect
    the texts to stay mostly on-topic and have the corpus of previous examples to
    train the model. You can use unsupervised topic clustering and create a model
    to assign new texts to known clusters. You can then treat assigned classes as
    descriptors to monitor the changes in the distribution of topics in the new data.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用主题建模** 来建立主题监控系统。这是最繁琐的方法，但做得好时非常强大。当你期望文本保持在主要话题上并且拥有之前的示例语料库来训练模型时，它非常有用。你可以使用无监督主题聚类并创建一个模型来将新文本分配到已知的簇中。然后，你可以将分配的类别作为描述符来监控新数据中主题分布的变化。'
- en: '![](../Images/56ae75356635ea5aebe10c8b079438e6.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/56ae75356635ea5aebe10c8b079438e6.png)'
- en: Image by Author. *Example of a summary drift report for multiple descriptors.*
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。*多个描述符的总结漂移报告示例。*
- en: 'Here are a few things to keep in mind when designing descriptors to monitor:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 设计描述符时要记住的几点：
- en: '**It is best to stay focused** and try to find a small number of suitable quality
    indicators that match the use case rather than monitor all possible dimensions.
    Think of descriptors as model features. You want to find a few strong ones rather
    than generate a lot of weak or unhelpful features. Many of them are bound to be
    correlated: language and share of OOV words, length in sentences and symbols,
    etc. Pick your favorite!'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最好保持专注**，尽量找出少量适合的质量指标，这些指标与用例匹配，而不是监控所有可能的维度。将描述符视为模型特征。你希望找到一些强大的特征，而不是生成大量弱的或无用的特征。许多特征往往是相关的：语言和
    OOV 单词的比例、句子和符号的长度等。选择你最喜欢的！'
- en: '**Use exploratory data analysis** to evaluate text properties in existing data
    (for example, logs of previous conversations) to test your assumptions before
    adding them to model monitoring.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用探索性数据分析** 评估现有数据中的文本属性（例如，以前对话的日志），以测试你的假设，然后再将它们添加到模型监控中。'
- en: '**Learn from model failures**. Whenever you face an issue with production model
    quality that you expect to reappear (e.g., texts in a foreign language), consider
    how to develop a test case or a descriptor to add to detect it in the future.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**从模型失败中学习**。每当你遇到一个你期望再次出现的生产模型质量问题（例如，外语文本），考虑如何开发一个测试用例或描述符，以便在未来检测到它。'
- en: '**Mind the computation cost.** Using external models to score your texts by
    every possible dimension is tempting, but this comes at a cost. Consider it when
    working with larger datasets: every external classifier is an extra model to run.
    You can often get away with fewer or simpler checks.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**注意计算成本。** 使用外部模型按每个可能的维度评分文本是很诱人的，但这会带来额外的成本。考虑一下在处理较大的数据集时：每个外部分类器都是一个额外的模型。通常可以通过更少或更简单的检查来解决问题。'
- en: Step-by-step tutorial
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分步教程
- en: 'To illustrate the idea, let’s walk through the following scenario: you are
    building a classifier model to score reviews that users leave on an e-commerce
    website and tag them by topic. Once it is in production, you want to detect changes
    in the data and model environment, but you do not have the true labels. You need
    to run a separate labeling process to get them.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明这个想法，让我们通过以下场景来演示：你正在构建一个分类器模型，以对用户在电子商务网站上留下的评论进行评分并按主题标记。一旦模型投入生产，你希望检测数据和模型环境的变化，但你没有真实标签。你需要运行一个单独的标记过程来获取它们。
- en: How can you keep tabs on the changes without the labels?
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 没有标签的情况下你如何跟踪变化？
- en: 'Let’s take an example dataset and go through the following steps:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们以一个示例数据集为例，按照以下步骤进行操作：
- en: '***Code example:*** *head to the* [*example notebook*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb)
    *to follow all the steps.*'
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***代码示例：*** *请前往* [*示例笔记本*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb)
    *以查看所有步骤。*'
- en: 💻 1\. Install Evidently
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 💻 1\. 安装 Evidently
- en: First, install Evidently. Use the Python package manager to install it in your
    environment. If you are working in Colab, run *!pip install*. In the Jupyter Notebook,
    you should also install nbextension. Check out the [instructions](https://docs.evidentlyai.com/user-guide/install-evidently/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)
    for your environment.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，安装 Evidently。使用 Python 包管理器在你的环境中安装它。如果你在 Colab 中工作，运行 *!pip install*。在 Jupyter
    Notebook 中，你还需要安装 nbextension。查看 [安装说明](https://docs.evidentlyai.com/user-guide/install-evidently/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)
    以获取你的环境信息。
- en: You will also need to import a few other libraries like *pandas* and specific
    Evidently components. Follow the instructions in the notebook.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 你还需要导入一些其他库，如 *pandas* 和特定的 Evidently 组件。按照笔记本中的说明进行操作。
- en: 🔡 2\. Prepare the data
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 🔡 2\. 准备数据
- en: Once you have it all set, let’s look at the data! You will work with an open
    dataset from e-commerce reviews.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你设置好了所有内容，让我们来看看数据吧！你将使用一个来自电子商务评论的开放数据集。
- en: 'Here is how the dataset looks:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是数据集的样子：
- en: '![](../Images/61dc47d6fb8c0c43b9c82d3180b95766.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/61dc47d6fb8c0c43b9c82d3180b95766.png)'
- en: Image by Author.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: We’ll focus on the “Review_Text” column for demo purposes. In production, we
    want to monitor changes in the texts of the reviews.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将重点关注“Review_Text”列进行演示。在生产中，我们想要监控评论文本的变化。
- en: 'You will need to specify the column that contains texts using column mapping:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要使用列映射指定包含文本的列：
- en: '[PRE0]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'You should also split the data into two: reference and current. Imagine that
    “reference” data is the data for some representative past period (e.g., previous
    month) and “current” is the current production data (e.g., this month). These
    are the two datasets that you will compare using descriptors.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 你还应该将数据分成两部分：参考数据和当前数据。假设“参考”数据是某个代表性过去时期的数据（例如，上个月），而“当前”是当前生产数据（例如，本月）。这两个数据集是你将使用描述符进行比较的数据集。
- en: '***Note:*** *it’s important to establish a suitable historical baseline. Pick
    the period that reflects your expectations about how the data should look in the
    future.*'
  id: totrans-104
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***注意：*** *建立合适的历史基线很重要。选择一个反映你对未来数据预期的时期。*'
- en: We selected 5000 examples for each sample. To make things interesting, we introduced
    an artificial shift by selecting the negative reviews for our current dataset.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们为每个样本选择了5000个例子。为了增加趣味性，我们通过选择负面评论来人为地引入了一些偏差。
- en: '[PRE1]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 📊 3\. Exploratory data analysis
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 📊 3\. 探索性数据分析
- en: To better understand the data, you can generate a visual report using Evidently.
    There is a pre-built **Text Overview Preset** that helps quickly compare two text
    datasets. It combines various descriptive checks and evaluates overall data drift
    (in this case, using a [model-based drift detection method](https://www.evidentlyai.com/blog/evidently-data-quality-monitoring-and-drift-detection-for-text-data)).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解数据，你可以使用 Evidently 生成可视化报告。这里有一个预设的**文本概览预设**，帮助快速比较两个文本数据集。它结合了各种描述性检查，并评估整体数据漂移（在这种情况下，使用[基于模型的漂移检测方法](https://www.evidentlyai.com/blog/evidently-data-quality-monitoring-and-drift-detection-for-text-data)）。
- en: 'This report also includes a few standard descriptors and allows you to add
    descriptors using lists of Trigger Words. We’ll look at the following descriptors
    as part of the report:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 此报告还包括一些标准描述符，并允许你使用触发词列表添加描述符。我们将在报告中查看以下描述符：
- en: Length of texts
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本长度
- en: Share of OOV words
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OOV词汇的比例
- en: Share of Non-letter symbols
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非字母符号的比例
- en: The sentiment of the reviews
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评论的情感
- en: Reviews that include either words “dress” or “gown”
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含“dress”或“gown”这两个词的评论
- en: Reviews that include either words “blouse” or “shirt”
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含“blouse”或“shirt”这两个词的评论
- en: '*Check out the Evidently* [*docs on Descriptors for details*](https://docs.evidentlyai.com/user-guide/customization/text-descriptors-parameters/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*.*'
  id: totrans-116
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*查看 Evidently* [*有关描述符的文档以获取详细信息*](https://docs.evidentlyai.com/user-guide/customization/text-descriptors-parameters/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*。*'
- en: Here is the code you need to run this report. You can assign custom names to
    each descriptor.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这是运行此报告所需的代码。你可以为每个描述符分配自定义名称。
- en: '[PRE2]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Running a report like this helps explore patterns and shape your expectations
    about particular properties, such as text length distribution.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 运行这样的报告有助于探索模式，并形成对特定属性的期望，例如文本长度分布。
- en: 'The distribution of the “sentiment” descriptor quickly exposes the trick we
    did when splitting the data. We put reviews with a ranking above 3 in “reference”
    and more negative reviews in “current” datasets. The results are visible:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: “情感”描述符的分布迅速揭示了我们在拆分数据时所做的操作。我们将排名高于3的评论放入“参考”数据集中，而将更多负面评论放入“当前”数据集中。结果一目了然：
- en: '![](../Images/f6f0128ec9976fe67cdfb3d79e3cd4b2.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f6f0128ec9976fe67cdfb3d79e3cd4b2.png)'
- en: Image by Author.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: The default report is very comprehensive and helps look at many text properties
    at once. Up to exploring correlations between descriptors and other columns in
    the dataset!
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 默认报告非常全面，可以一次查看多个文本属性。可以探索描述符与数据集中其他列之间的相关性！
- en: You can use it during the exploratory phase, but this is probably not something
    you’d need to go through all the time.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在探索阶段使用它，但这可能不是你需要一直使用的工具。
- en: Luckily, it’s easy to customize.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，它很容易自定义。
- en: '***Evidently Presets and Metrics****. Evidently has report presets that quickly
    generate the reports out of the box. However, there are a lot of individual metrics
    to choose from! You can combine them to create a custom report. Browse the* [*presets*](https://docs.evidentlyai.com/presets/all-presets/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)
    *and metrics to understand what’s there.*'
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***Evidently预设和指标***。Evidently有报告预设，可以快速生成报告。不过，还有很多个别指标可供选择！你可以将它们组合起来创建自定义报告。浏览一下*
    [*预设*](https://docs.evidentlyai.com/presets/all-presets/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)
    *和指标以了解有哪些。*'
- en: 📈 4\. Monitor descriptors drift
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 📈 4\. 监控描述符漂移
- en: 'Let’s say that based on exploratory analysis and your understanding of the
    business problem, you decide only to track a small number of properties:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 假设根据探索性分析和你对业务问题的理解，你决定仅跟踪少量属性：
- en: 'You want to notice when there is a statistical change: the distributions of
    these properties differ from the reference period. To detect it, you can use drift
    detection methods implemented in Evidently. For example, for numerical features
    like “sentiment,” it will, by default, monitor the shift using Wasserstein distance.
    You can also choose a different method.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 你希望注意到何时有统计变化：这些属性的分布与参考期不同。为了检测它，你可以使用Evidently中实现的漂移检测方法。例如，对于“情感”这样的数值特征，它将默认使用Wasserstein距离监控漂移。你也可以选择其他方法。
- en: Here is how you can create a simple drift report to track changes in the three
    descriptors.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 这是你如何创建一个简单的漂移报告以跟踪三个描述符变化的方法。
- en: '[PRE3]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Once you run the report, you will get combined visualizations for all chosen
    descriptors. Here is one:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你运行报告，你将得到所有选定描述符的综合可视化。这里是一个示例：
- en: '![](../Images/167750d2843c66fe380500152b7584da.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/167750d2843c66fe380500152b7584da.png)'
- en: Image by Author.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: The dark green line is the mean sentiment in the reference dataset. The green
    area covers one standard deviation from the mean. You can notice that the current
    distribution (in red) is visibly more negative.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 深绿色线条是参考数据集中情感的平均值。绿色区域覆盖了平均值的一个标准差。你可以注意到当前的分布（红色）明显更为负面。
- en: '***Note:*** *In this scenario, it also makes sense to monitor the output drift:
    by tracking shifts in the predicted classes. You can use categorical* [*data drift
    detection methods*](https://docs.evidentlyai.com/reference/data-drift-algorithm/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*,
    like JS divergence. We do not cover this in the tutorial, as we focus only on
    inputs and do not generate predictions. In practice, prediction drift is often
    the first signal to react to.*'
  id: totrans-136
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***注意：*** *在这种情况下，监控输出漂移也是有意义的：通过跟踪预测类别的变化。你可以使用分类的* [*数据漂移检测方法*](https://docs.evidentlyai.com/reference/data-drift-algorithm/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*，如JS散度。我们在教程中没有涵盖这一点，因为我们仅关注输入而不生成预测。在实际应用中，预测漂移通常是反应的第一个信号。*'
- en: 😍 5\. Add an “emotion” descriptor
  id: totrans-137
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 😍 5\. 添加一个“情感”描述符
- en: 'Let’s say you decided to track one more meaningful property: the emotion expressed
    in the review. The overall sentiment is one thing, but it also helps distinguish
    between “sad” and “angry” reviews, for example.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你决定跟踪一个更有意义的属性：评论中表达的情感。整体情感是一个方面，但它也有助于区分“伤心”和“愤怒”的评论，例如。
- en: Let’s add this custom descriptor! You can find an appropriate external open-source
    model to score your dataset. Then, you will work with this property as an additional
    column.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们添加这个自定义描述符吧！你可以找到一个合适的外部开源模型来评分你的数据集。然后，你将把这个属性作为额外的列进行处理。
- en: We will take the [Distilbert model](https://huggingface.co/bhadresh-savani/distilbert-base-uncased-emotion)
    from Huggingface, which classifies the text by five emotions.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用来自Huggingface的[Distilbert模型](https://huggingface.co/bhadresh-savani/distilbert-base-uncased-emotion)，它通过五种情感对文本进行分类。
- en: You can consider using any other model for your use case, such as named entity
    recognition, language detection, toxicity detection, etc.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以考虑为你的用例使用任何其他模型，如命名实体识别、语言检测、毒性检测等。
- en: 'You must install transformers to be able to run the model. Check [the instructions](https://huggingface.co/docs/transformers/installation)
    for more details. Then, apply it to the review dataset:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 你必须安装transformers才能运行模型。有关更多细节，请查看[安装说明](https://huggingface.co/docs/transformers/installation)。然后，将其应用于评论数据集：
- en: '[PRE4]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '***Note:*** *this step will score the dataset using the external model. It
    will take some time to execute, depending on your environment. To understand the
    principle without waiting, refer to the “Simple Example” section in the example
    notebook.*'
  id: totrans-144
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***注意：*** *这一步将使用外部模型对数据集进行评分。根据你的环境，这可能需要一些时间才能执行完毕。要在不等待的情况下了解原理，请参考示例笔记本中的“简单示例”部分。*'
- en: After you add the new column “emotion” to the dataset, you must reflect this
    in Column Mapping. You should specify that it is a new categorical variable in
    the dataset.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在将新列“emotion”添加到数据集后，你必须在列映射中反映这一点。你应该指定这是数据集中的一个新分类变量。
- en: '[PRE5]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Now, you can add the “emotion” distribution drift monitoring to the Report.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以将“emotion”分布漂移监控添加到报告中。
- en: '[PRE6]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Here is what you get!
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 这是你得到的结果！
- en: '![](../Images/8ca2d594a2f48d88dec8b624c5ca703b.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8ca2d594a2f48d88dec8b624c5ca703b.png)'
- en: Image by Author.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图片来源：作者。
- en: You can see a significant increase in “sad” reviews and a decrease in “joy.”
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到“sad”评价显著增加，而“joy”评价减少。
- en: Does it appear helpful to track over time? You can continue running this check
    by scoring new data as it comes.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 追踪随时间变化是否有帮助？你可以继续通过对新数据进行评分来运行此检查。
- en: 🏗️ 6\. Run pipeline tests
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 🏗️ 6\. 运行管道测试
- en: To perform regular analysis of your data inputs, it makes sense to package the
    evaluations as tests. You get a clear “pass” or “fail” result in this scenario.
    You probably do not need to look at the plots if all tests pass. You’re only interested
    when things change!
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 为了定期分析数据输入，将评估打包成测试是有意义的。在这种情况下，你会得到一个明确的“通过”或“失败”结果。如果所有测试都通过，你可能不需要查看图表。你只对变化感兴趣！
- en: Evidently has an alternative interface called Test Suite that works this way.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: Evidently 有一个替代接口，称为测试套件，它以这种方式工作。
- en: 'Here is how you create a Test Suite to check for statistical distribution in
    the same four descriptors:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是如何创建一个测试套件以检查相同四个描述符中的统计分布：
- en: '[PRE7]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '***Note:*** *we go with defaults, but you can also set* [*custom drift methods
    and conditions*](https://docs.evidentlyai.com/user-guide/customization/options-for-statistical-tests/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*.*'
  id: totrans-159
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***注意：*** *我们使用默认设置，但你也可以设置* [*自定义漂移方法和条件*](https://docs.evidentlyai.com/user-guide/customization/options-for-statistical-tests/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*。*'
- en: Here is the result. The output is neatly structured so you can see which descriptors
    have drifted.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 这是结果。输出结构清晰，你可以看到哪些描述符发生了漂移。
- en: '![](../Images/77d27b490b8c0aa4b642b8509c854d7e.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/77d27b490b8c0aa4b642b8509c854d7e.png)'
- en: Image by Author.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 图片来源：作者。
- en: Detecting statistical distribution drift is one of the ways to monitor changes
    in the text property. There are others! Sometimes, it is convenient to run rule-based
    expectations on the descriptor’s min, max, or mean values.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 检测统计分布漂移是监控文本属性变化的方法之一。还有其他方法！有时，根据描述符的最小值、最大值或均值运行基于规则的期望也很方便。
- en: Let’s say you want to check that all review texts are longer than two words.
    If at least one review is shorter than two words, you want the test to fail and
    see the number of short texts in the response.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你想检查所有评价文本是否长于两个词。如果至少有一条评价短于两个词，你希望测试失败并在响应中查看短文本的数量。
- en: 'Here is how you do that! You can pick a **TestNumberOfOutRangeValues()** check.
    This time, you should set a custom boundary: the “left” side of the expected range
    is two words. You must also set a test condition: **eq=0**. This means you expect
    the number of objects outside this range to be 0\. If it is higher, you want the
    test to return a fail.'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以选择一个**TestNumberOfOutRangeValues()** 检查。此次，你应设置一个自定义边界：期望范围的“左”侧是两个词。你还必须设置一个测试条件：**eq=0**。这意味着你期望这个范围外的对象数量为0。如果高于此值，你希望测试返回失败。
- en: '[PRE8]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Here is the result. You can also see the test details that show the defined
    expectation.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 这是结果。你还可以看到显示定义期望的测试细节。
- en: '![](../Images/c7522aa55016dfa55e61e8499366d7d2.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c7522aa55016dfa55e61e8499366d7d2.png)'
- en: Image by Author.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图片来源：作者。
- en: You can follow this principle to design other checks.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以遵循这一原则设计其他检查。
- en: Support Evidently
  id: totrans-171
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 支持 Evidently
- en: '*Enjoyed the tutorial? Star* [*Evidently on GitHub*](https://github.com/evidentlyai/evidently)
    *to contribute back! This helps us continue creating free, open-source tools and
    content for the community.* [*⭐️ Star on GitHub ⟶*](https://github.com/evidentlyai/evidently)'
  id: totrans-172
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*喜欢这个教程吗？给* [*Evidently 在 GitHub 上点个星*](https://github.com/evidentlyai/evidently)
    *以回馈支持！这有助于我们继续为社区创建免费的开源工具和内容。* [*⭐️ 在 GitHub 上点星 ⟶*](https://github.com/evidentlyai/evidently)'
- en: Summing up
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Text descriptors map text data to interpretable dimensions you can express as
    a numerical or a categorical attribute. They help describe, evaluate, and monitor
    unstructured data.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 文本描述符将文本数据映射到可解释的维度，你可以将其表示为数值或分类属性。它们帮助描述、评估和监控非结构化数据。
- en: In this tutorial, you learned how to monitor text data using descriptors.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，你学会了如何使用描述符来监控文本数据。
- en: You can use this approach to monitor the behavior of NLP and LLM-powered models
    production. You can customize and combine your descriptors with other methods,
    such as [monitoring embedding drift](https://www.evidentlyai.com/blog/embedding-drift-detection).
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用这种方法来监控 NLP 和 LLM 驱动模型的生产行为。你可以将你的描述符与其他方法结合使用，如 [监控嵌入漂移](https://www.evidentlyai.com/blog/embedding-drift-detection)。
- en: Are there other descriptors you consider universally useful? Let us know! Join
    our [Discord community](https://discord.com/invite/xZjKRaNp8b) to share your thoughts.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 你认为还有其他普遍有用的描述符吗？告诉我们！加入我们的 [Discord 社区](https://discord.com/invite/xZjKRaNp8b)
    分享你的想法。
- en: '*Originally published at* [*https://www.evidentlyai.com*](https://www.evidentlyai.com/blog/unstructured-data-monitoring)
    *on June 27, 2023\. Thanks to* [*Olga Filippova*](https://www.evidentlyai.com/author/olga-fillipova)
    *for co-authoring the article.*'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '*最初发布于* [*https://www.evidentlyai.com*](https://www.evidentlyai.com/blog/unstructured-data-monitoring)
    *于2023年6月27日。感谢* [*Olga Filippova*](https://www.evidentlyai.com/author/olga-fillipova)
    *共同撰写本文。*'
