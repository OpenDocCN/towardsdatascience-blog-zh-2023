- en: On the Importance of Compressing Big Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关于压缩大数据的重要性
- en: 原文：[https://towardsdatascience.com/on-the-importance-of-compressing-big-data-edd4cc7441d2?source=collection_archive---------18-----------------------#2023-01-24](https://towardsdatascience.com/on-the-importance-of-compressing-big-data-edd4cc7441d2?source=collection_archive---------18-----------------------#2023-01-24)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/on-the-importance-of-compressing-big-data-edd4cc7441d2?source=collection_archive---------18-----------------------#2023-01-24](https://towardsdatascience.com/on-the-importance-of-compressing-big-data-edd4cc7441d2?source=collection_archive---------18-----------------------#2023-01-24)
- en: Why and How to Minimize your Data Storage Footprint
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为什么以及如何最小化你的数据存储占用
- en: '[](https://chaimrand.medium.com/?source=post_page-----edd4cc7441d2--------------------------------)[![Chaim
    Rand](../Images/c52659c389f167ad5d6dc139940e7955.png)](https://chaimrand.medium.com/?source=post_page-----edd4cc7441d2--------------------------------)[](https://towardsdatascience.com/?source=post_page-----edd4cc7441d2--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----edd4cc7441d2--------------------------------)
    [Chaim Rand](https://chaimrand.medium.com/?source=post_page-----edd4cc7441d2--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://chaimrand.medium.com/?source=post_page-----edd4cc7441d2--------------------------------)[![Chaim
    Rand](../Images/c52659c389f167ad5d6dc139940e7955.png)](https://chaimrand.medium.com/?source=post_page-----edd4cc7441d2--------------------------------)[](https://towardsdatascience.com/?source=post_page-----edd4cc7441d2--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----edd4cc7441d2--------------------------------)
    [Chaim Rand](https://chaimrand.medium.com/?source=post_page-----edd4cc7441d2--------------------------------)'
- en: ·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9440b37e27fe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fon-the-importance-of-compressing-big-data-edd4cc7441d2&user=Chaim+Rand&userId=9440b37e27fe&source=post_page-9440b37e27fe----edd4cc7441d2---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----edd4cc7441d2--------------------------------)
    ·15 min read·Jan 24, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fedd4cc7441d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fon-the-importance-of-compressing-big-data-edd4cc7441d2&user=Chaim+Rand&userId=9440b37e27fe&source=-----edd4cc7441d2---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9440b37e27fe&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fon-the-importance-of-compressing-big-data-edd4cc7441d2&user=Chaim+Rand&userId=9440b37e27fe&source=post_page-9440b37e27fe----edd4cc7441d2---------------------post_header-----------)
    发表在[Towards Data Science](https://towardsdatascience.com/?source=post_page-----edd4cc7441d2--------------------------------)
    ·15分钟阅读·2023年1月24日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fedd4cc7441d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fon-the-importance-of-compressing-big-data-edd4cc7441d2&user=Chaim+Rand&userId=9440b37e27fe&source=-----edd4cc7441d2---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fedd4cc7441d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fon-the-importance-of-compressing-big-data-edd4cc7441d2&source=-----edd4cc7441d2---------------------bookmark_footer-----------)![](../Images/3ef46726724121d8bb2393d48a773ef6.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fedd4cc7441d2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fon-the-importance-of-compressing-big-data-edd4cc7441d2&source=-----edd4cc7441d2---------------------bookmark_footer-----------)![](../Images/3ef46726724121d8bb2393d48a773ef6.png)'
- en: Photo by [Joshua Sortino](https://unsplash.com/@sortino?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图片来源：[Joshua Sortino](https://unsplash.com/@sortino?utm_source=medium&utm_medium=referral)在[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: '“Data is the new oil”, a phrase attributed to [Clive Humby](https://en.wikipedia.org/wiki/Clive_Humby),
    describes the growing reliance of many modern companies on data for their development
    and success. Companies are collecting massive amounts of data, to the point where
    units of measurement such as the petabyte, exabyte, and zettabyte, have replaced
    the megabyte, gigabyte, and terabyte in common discourse. However, mindless collection
    of data is useless and wasteful. This fact is best summarized by the following
    expansion of Humby’s quote:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: “数据是新的石油”，这是[Clive Humby](https://en.wikipedia.org/wiki/Clive_Humby)提出的一句话，用来描述现代许多公司在其发展和成功中对数据日益增长的依赖。公司们正收集大量数据，以至于像拍字节（petabyte）、艾字节（exabyte）和泽字节（zettabyte）这样的计量单位，已经在日常对话中取代了兆字节（megabyte）、千兆字节（gigabyte）和太字节（terabyte）。然而，无目的的数据收集是无用且浪费的。这个事实可以通过对Humby名言的以下扩展来最准确地总结：
- en: Data is just like crude. It’s valuable, but if unrefined it cannot really be
    used.
  id: totrans-10
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 数据就像原油。它有价值，但如果未经精炼，它实际上不能被有效使用。
- en: ''
  id: totrans-11
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: — [Michael Palmer](https://ana.blogs.com/maestros/2006/11/data_is_the_new.html)
  id: totrans-12
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: — [迈克尔·帕尔默](https://ana.blogs.com/maestros/2006/11/data_is_the_new.html)
- en: For data to be valuable, the manner in which it is collected, the goals of its
    use, and how those goals are achieved, need to be carefully designed. One important
    element of this design is how and where the collected data will be stored. Given
    the enormous scale of the data being collected today, dedicated solutions are
    required for its storage. To meet the growing demand, data center storage facilities
    have increased in size, and cloud based object storage services such as [Amazon
    S3](https://aws.amazon.com/s3/), [Google Cloud Storage](https://cloud.google.com/storage),
    and [Azure Blob Storage](https://azure.microsoft.com/en-us/products/category/storage/),
    have increased in popularity.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使数据具有价值，收集数据的方式、使用目标及如何实现这些目标需要精心设计。这种设计的一个重要元素是如何以及在哪里存储收集的数据。鉴于今天收集的数据规模巨大，存储需要专门的解决方案。为了满足不断增长的需求，数据中心存储设施的规模不断扩大，基于云的对象存储服务如[Amazon
    S3](https://aws.amazon.com/s3/)、[Google Cloud Storage](https://cloud.google.com/storage)和[Azure
    Blob Storage](https://azure.microsoft.com/en-us/products/category/storage/)也越来越受欢迎。
- en: The Cost of Data Storage
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据存储的成本
- en: Data storage comes with a number of costs, some more obvious than others. If
    not managed properly, storage costs can easily become a dominant factor in your
    monthly R&D expenses. Here are some of the cost considerations.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 数据存储涉及许多成本，有些成本比其他成本更为明显。如果管理不当，存储成本很容易成为你每月研发费用中的主导因素。以下是一些成本考虑因素。
- en: '**Direct Storage Costs**:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '**直接存储成本**：'
- en: While the cost per unit of storage space has been on a steady decline over the
    years (due to technological advancement), this decline has been more than eclipsed
    by the increase in demand. Regardless of whether you are using a local data center
    or a cloud storage service, **direct storage costs can climb quickly**.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管单位存储空间的成本多年来一直稳步下降（由于技术进步），但这种下降已被需求的增加所盖过。不论你使用的是本地数据中心还是云存储服务，**直接存储成本可能迅速上升**。
- en: '**Environmental Costs**:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '**环境成本**：'
- en: Over the past few years we have witnessed an increase in the awareness of the
    carbon footprint of data centers and calls for increasing sustainability in computational
    sciences (e.g., see [here](https://www.green-algorithms.org/)). Although the most
    significant portion of the carbon footprint is attributed to the compute-heavy
    data center servers, **storage also requires significant investments in power,
    cooling, and lifecycle replacement**. It is estimated that roughly 10% of the
    data center carbon footprint — equaling the footprint of a medium sized western
    country — comes from data storage (e.g., see [here](https://journals.plos.org/ploscompbiol/article?id=10.1371%2Fjournal.pcbi.1009324)
    and [here](https://www.osti.gov/servlets/purl/1372902)).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去的几年里，我们见证了对数据中心碳足迹意识的提高，以及对计算科学中增加可持续性的呼吁（例如，见[这里](https://www.green-algorithms.org/)）。虽然数据中心服务器的计算密集型工作负荷占据了碳足迹的最大部分，但**存储也需要在电力、冷却和生命周期更换上进行大量投资**。预计大约10%的数据中心碳足迹——相当于一个中型西方国家的碳足迹——来自数据存储（例如，见[这里](https://journals.plos.org/ploscompbiol/article?id=10.1371%2Fjournal.pcbi.1009324)和[这里](https://www.osti.gov/servlets/purl/1372902)）。
- en: '**Data Streaming Costs**:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据流成本**：'
- en: Although not a direct storage cost, attention must be given to the costs associated
    with pushing and pulling data to and from storage. These could be explicit data
    transfer costs associated with a cloud storage service, or costs related to designing
    an infrastructure that supports the communication bandwidths required by the data
    applications.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然不是直接存储成本，但必须关注与数据推送和拉取相关的成本。这些可能是与云存储服务相关的显性数据传输成本，或是与设计支持数据应用所需通信带宽的基础设施相关的成本。
- en: '**The Impact on the Data Application:** It is also important to note the impact
    of how the data is stored, and particularly its size, on the data application.
    Many data applications rely on the continuous flow of data from storage. In an
    ideal situation, the data will flow through the system fast enough to keep all
    of the computation resources of the application host fully utilized. However,
    if your storage solution is not appropriately designed, your application might
    remain idle while it waits for input data. This will increase the overall time
    it takes to run your data applications and also **increase the computation costs**.
    We describe this scenario in greater detail in an appendix to this post.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**对数据应用的影响：** 还需要注意数据存储的方式，特别是其大小，对数据应用的影响。许多数据应用依赖于从存储中持续流动的数据。在理想情况下，数据应以足够快的速度流经系统，以使应用主机的所有计算资源得到充分利用。然而，如果您的存储解决方案设计不当，您的应用可能会在等待输入数据时处于空闲状态。这将增加运行数据应用所需的整体时间，并且**增加计算成本**。我们在本文的附录中更详细地描述了这一情况。'
- en: Reducing the Costs of Data Storage
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 降低数据存储成本
- en: 'Our data collection and storage strategy solution must account for the potentially
    high costs of data storage. Some good practices include the following:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的数据收集和存储策略解决方案必须考虑到数据存储的潜在高成本。一些良好的做法包括以下几点：
- en: Limit the collection and storage of data to what is actually required.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据的收集和存储限制在实际需要的范围内。
- en: Remove data that is no longer required from storage.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从存储中删除不再需要的数据。
- en: Many cloud service providers offer multiple *storage classes* — to address different
    types of data access patterns (e.g., see [Amazon S3 Intelligent-Tiering](https://aws.amazon.com/s3/storage-classes/intelligent-tiering/),
    [Google Storage Classes](https://cloud.google.com/storage/docs/storage-classes),
    and [Azure Storage Access Tiers](https://learn.microsoft.com/en-us/azure/storage/blobs/access-tiers-overview)).
    While the standard storage offerings (e.g., [Amazon S3](https://aws.amazon.com/s3/),
    [Google Cloud Storage](https://cloud.google.com/storage), and [Azure Blob Storage](https://azure.microsoft.com/en-us/products/category/storage/))
    are recommended for data that is accessed frequently or requires low latency,
    assigning other data to storage classes that are more archival in nature, can
    reduce cost.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 许多云服务提供商提供多种*存储类别*—以应对不同类型的数据访问模式（例如，请参见 [Amazon S3 Intelligent-Tiering](https://aws.amazon.com/s3/storage-classes/intelligent-tiering/)、[Google
    Storage Classes](https://cloud.google.com/storage/docs/storage-classes)和 [Azure
    Storage Access Tiers](https://learn.microsoft.com/en-us/azure/storage/blobs/access-tiers-overview)）。虽然标准存储选项（例如，[Amazon
    S3](https://aws.amazon.com/s3/)、[Google Cloud Storage](https://cloud.google.com/storage)和
    [Azure Blob Storage](https://azure.microsoft.com/en-us/products/category/storage/)）推荐用于频繁访问或需要低延迟的数据，将其他数据分配给更具归档性质的存储类别，可以降低成本。
- en: Store data in a **compressed format**.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以**压缩格式**存储数据。
- en: In this post we will focus on **data compression** as a means to reduce storage
    costs. We will discuss a few different compression techniques and demonstrate,
    by example, the potential savings of applying them.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我们将重点讨论**数据压缩**作为降低存储成本的一种手段。我们将讨论几种不同的压缩技术，并通过示例展示应用这些技术的潜在节省。
- en: '**Disclaimers**'
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**免责声明**'
- en: 'Just before we dive in, a few disclaimers are in order:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入讨论之前，需要说明几点免责声明：
- en: In our discussion we will mention several compression techniques and tools.
    These are provided merely as examples. Our intention is **not** to promote these
    over any one of the many other alternative techniques or tools. The best solution
    for you will greatly depend on your specific needs.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在我们的讨论中，我们将提到几种压缩技术和工具。这些仅作为示例。我们的意图是**不**要推广这些技术或工具，而是与许多其他替代技术或工具进行比较。适合您的最佳解决方案将极大地依赖于您的具体需求。
- en: Before you settle on a compression algorithm (or *any* published algorithm,
    for that matter) make sure that you read and understand the associated terms of
    use.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在决定使用某种压缩算法（或*任何*已发布的算法）之前，请确保您已阅读并理解相关的使用条款。
- en: While the focus of our example will be on image data, the general principles
    apply to other domains as well.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虽然我们的示例将重点放在图像数据上，但这些基本原则同样适用于其他领域。
- en: Data Compression
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据压缩
- en: In this section we will review a few compression techniques and demonstrate
    them through example. The primary insight that we will reach is that the best
    results are received by adapting the compression algorithm to the specific properties
    of the data at hand. A pinnacle example of this can be found in the distinction
    between ***lossy*** and ***lossless*** compression schemes.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将回顾几种压缩技术并通过示例展示它们。我们将得出的主要见解是，通过将压缩算法适应于数据的特定属性，可以获得最佳结果。一个典型的例子就是***有损***和***无损***压缩方案之间的区别。
- en: Lossy vs. Lossless Compression
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 有损与无损压缩
- en: 'In a lossless compression scheme no data is lost. When uncompressing the data
    all of the information is restored: ***X=uncompress(compress(X))***. In a lossy
    compression scheme some of the information is lost as a result of compression:
    ***X≠uncompress(compress(X))***. While this loss of data may seem concerning at
    first, there are many scenarios in which it will have little to no effect. A classic
    example of this is image compression. Many image compression methods, such as
    the popular JPEGcompression, involve a certain degree of loss of data but (provided
    that a sensible compression configuration is used) will result in an image that
    is barely distinguishable to the human eye from the original image. There is no
    doubt that, despite the visual similarity, there may be some algorithms that are
    sensitive specifically to this loss of data. However, more often than not, it
    will not have any impact. And the potential savings in storage space can be considerable.
    We will expand a bit more on the topic of image compression below.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在无损压缩方案中不会丢失数据。解压缩数据时，所有信息都会被恢复：***X=uncompress(compress(X))***。在有损压缩方案中，由于压缩的原因会丢失一些信息：***X≠uncompress(compress(X))***。虽然这种数据丢失一开始可能让人担忧，但在许多情况下，这种影响会很小。一个经典的例子就是图像压缩。许多图像压缩方法，如流行的JPEG压缩，涉及到一定程度的数据丢失，但（前提是使用合理的压缩配置）得到的图像与原始图像几乎无法区分。毫无疑问，尽管视觉上相似，但某些算法可能对这种数据丢失特别敏感。然而，更多情况下，这种影响不会显著。而且潜在的存储空间节省可以非常可观。我们将在下面进一步扩展图像压缩的话题。
- en: How to Measure Compression Quality
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何衡量压缩质量
- en: 'There are a number of ways in which to evaluate the quality of a compression
    scheme, including:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 评估压缩方案质量的方法有很多种，包括：
- en: '**Compression Ratio**: This measures the reduction in the size of data as a
    result of compression.'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**压缩比**：这衡量了压缩过程中数据大小的减少。'
- en: '**Loss of Information**: Only relevant in the case of lossy compression, this
    measures the degree to which the loss of information resulting from the compression
    impacts the quality of our data. There are many different ways of measuring this
    loss of quality, depending on the type of data, the domain, what the data will
    be used for, and more.'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**信息丢失**：仅在有损压缩的情况下相关，这衡量了压缩导致的信息丢失对数据质量的影响程度。根据数据类型、领域、数据的用途等，有许多不同的方法来衡量这种质量损失。'
- en: '**Overhead of Compression**: Using a compression scheme implies the need to
    **compress** and **uncompress** the data at different stages of the pipeline.
    Both activities require a certain amount of compute resources and might imply
    a certain degree of latency. The precise amounts of required compute and latency
    can vary considerably based on the compression strategy you choose.'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**压缩开销**：使用压缩方案意味着需要在管道的不同阶段进行**压缩**和**解压缩**。这两项活动都需要一定的计算资源，并可能意味着一定程度的延迟。所需的计算量和延迟可以根据选择的压缩策略有所不同。'
- en: '**Infrastructure Dependencies**: Different compression schemes will vary based
    on their infrastructure dependencies. These can be HW dependencies and/or SW dependencies.'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**基础设施依赖**：不同的压缩方案会因其基础设施依赖而有所不同。这些依赖可能是硬件依赖和/或软件依赖。'
- en: In the example that follows we will measure just the **compression ratio** and
    **loss of quality**. In practice, additional metrics ought to be applied in order
    to make a fully informed decision about the compression strategy.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的示例中，我们将仅测量**压缩比**和**质量损失**。在实际操作中，应应用其他指标，以便对压缩策略做出全面的决策。
- en: Toy Example
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 示例
- en: 'To facilitate our discussion, we will consider a toy example in which each
    data sample includes: an 800x534 RGB image, two associated pixel-wise classification
    maps with 16 categories each, and a pixel-wise depth map containing the distance
    (in meters) from the image plane to the 3D location captured by each pixel in
    the scene. If you would like to follow along with the example, you can apply the
    code snippet below to the [Unsplash](https://unsplash.com/) image at the top of
    this blog post.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 为了方便讨论，我们将考虑一个玩具示例，其中每个数据样本包括：一个800x534 RGB图像、两个具有16个类别的像素级分类图，以及一个像素级深度图，包含从图像平面到场景中每个像素捕获的3D位置的距离（以米为单位）。如果您想跟随示例，可以将下面的代码片段应用于[Unsplash](https://unsplash.com/)上这篇博客文章顶部的图像。
- en: '[PRE0]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Measuring the storage footprint of the raw data files (e.g., by running *ls
    -l* in Linux) we find that the image requires 1.3 MB of storage and the 3 label
    maps require 1.7 MB each.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 测量原始数据文件的存储足迹（例如，通过在Linux中运行*ls -l*），我们发现图像需要1.3 MB的存储空间，而3个标签图需要每个1.7 MB。
- en: Choosing a File Format
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择文件格式
- en: One important step in designing your data storage strategy is choosing the format
    in which to store your data. This decision can have a meaningful impact on the
    ease and speed of access of your data applications. In particular, your design
    should take into account the different types of access patterns of different applications.
    In a [previous post](/data-formats-for-training-in-tensorflow-parquet-petastorm-feather-and-more-e55179eeeb72)
    we discussed some of the potential implications of the choice file format on ML
    training. For the sake of simplicity, we will store our data sample in a standard
    tarball.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 设计数据存储策略的一个重要步骤是选择存储数据的格式。这个决定可能会对数据应用程序的访问简便性和速度产生重大影响。特别是，您的设计应考虑不同应用程序的不同访问模式。在[上一篇文章](/data-formats-for-training-in-tensorflow-parquet-petastorm-feather-and-more-e55179eeeb72)中，我们讨论了选择文件格式对机器学习训练的一些潜在影响。为了简化起见，我们将数据样本存储在标准tarball中。
- en: '[PRE1]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The resultant file is 6.2 MB.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 结果文件为6.2 MB。
- en: Compression with ZIP Variants
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用ZIP变体进行压缩
- en: By “ZIP variants” we refer to a wide variety of highly popular, general purpose
    file formats and their associated compression schemes, including [ZIP](https://en.wikipedia.org/wiki/ZIP_(file_format)),
    [gzip](https://en.wikipedia.org/wiki/Gzip), [7-zip](https://en.wikipedia.org/wiki/7-Zip),
    [bzip2](https://en.wikipedia.org/wiki/Bzip2), [Brotli](https://en.wikipedia.org/wiki/Brotli),
    and more. Note that while we group these together, the underlying algorithms may
    differ substantially. Many file formats include flags for auto-compressing data
    samples using a ZIP variant. For example, using [bzip2](https://en.wikipedia.org/wiki/Bzip2)
    compression, we can decrease the size of the tarball down to 2.7 MB, a reduction
    of 2.3X.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 所谓“ZIP变体”，是指各种流行的通用文件格式及其相关压缩方案，包括[ZIP](https://en.wikipedia.org/wiki/ZIP_(file_format))、[gzip](https://en.wikipedia.org/wiki/Gzip)、[7-zip](https://en.wikipedia.org/wiki/7-Zip)、[bzip2](https://en.wikipedia.org/wiki/Bzip2)、[Brotli](https://en.wikipedia.org/wiki/Brotli)等。请注意，虽然我们将这些格式归为一类，但底层算法可能存在显著差异。许多文件格式包含用于自动压缩数据样本的ZIP变体标志。例如，使用[bzip2](https://en.wikipedia.org/wiki/Bzip2)压缩，我们可以将tarball的大小减少到2.7
    MB，减少了2.3倍。
- en: '[PRE2]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Compression using a ZIP variant is especially compelling due to its versatility.
    It can be applied generally without requiring any knowledge of the specific types
    or domains of the underlying data. In the next sections we will see if we can
    improve this result using a compression scheme that takes into account the details
    of the raw data types.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 使用ZIP变体进行压缩特别吸引人，因为它的通用性。它可以普遍应用，而无需了解底层数据的具体类型或领域。在接下来的章节中，我们将查看是否可以使用考虑到原始数据类型详细信息的压缩方案来改进这一结果。
- en: Using Lower Precision Data Types
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用低精度数据类型
- en: A considerable amount of storage space can be saved by converting the data to
    use lower bit-precision data types. There are two opportunities for such optimization
    in our example.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将数据转换为使用低位精度数据类型，可以节省大量存储空间。在我们的例子中有两个优化机会。
- en: '**Replace int32 with uint8**: A lot of storage space can be saved by using
    the smallest integer type that addresses your needs. In our case, it is clear
    that a 32-bit integer representation is overkill for representing our 16-class
    label maps. These can easily fit in uint8 matrices without any loss of information.'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**将int32替换为uint8**：通过使用最小的整数类型来满足需求，可以节省大量的存储空间。在我们的例子中，32位整数表示显然对于表示我们的16类标签图来说是过多的。这些可以很容易地适应uint8矩阵而不会丢失任何信息。'
- en: '**Replace float32 with float16**: Contrary to the reduction in integer precision,
    this operation *will* result in a loss of information (i.e., it is *lossy*). This
    change should be made only after assessing the potential impact that it will have
    on the data algorithms that consume it. In the code block below, we demonstrate
    two metrics for measuring the change in data quality. These can be used to predict
    the impact on the data algorithms. Ideally, we would find some form of correlation
    between our metrics and the performance of our algorithm, but this is not always
    so simple.'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**将 float32 替换为 float16**：与整数精度减少相反，此操作*会*导致信息丢失（即，它是*有损的*）。此更改应仅在评估其对数据算法的潜在影响后进行。在下面的代码块中，我们演示了两种衡量数据质量变化的指标。这些可以用来预测对数据算法的影响。理想情况下，我们会发现这些指标与算法性能之间的某种关联，但这并不总是那么简单。'
- en: '[PRE3]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: These optimizations alone result in a tarball of 2.9 MB, a reduction of 2.14X.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 仅这些优化就产生了 2.9 MB 的 tarball，减少了 2.14 倍。
- en: Merging Elements with Bitwise Operations
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用按位操作合并元素
- en: At this point each classification map is stored in 8-bit uint8 buffers. However,
    since each of the maps contain only 16 classes, they are actually using only four
    bits each. We can further compress the data by combining the two into a single
    data map.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，每个分类图都存储在8位`uint8`缓冲区中。然而，由于这些图像只包含16个类别，它们实际上每个只使用了四位。我们可以通过将两个图像合并成一个数据图来进一步压缩数据。
- en: '[PRE4]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The resultant tarball is 2.5 MB, for an overall reduction of 2.48X.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 结果的 tarball 大小为 2.5 MB，总体减少了 2.48 倍。
- en: Note that we could have also considered combining pairs of adjacent elements
    within each individual label map, thus decreasing their resolution to 400x534\.
    In practice, we have found that combining together separate label maps lends itself
    to better compression later in the pipeline (as discussed in the next section).
    To borrow terminology from the field of Information Theory, the result has lower
    entropy.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，我们也可以考虑将每个单独标签图中的相邻元素对合并，从而将其分辨率降至 400x534。在实践中，我们发现将单独的标签图合并有利于在后续处理阶段更好地压缩（如下一节讨论）。借用信息论中的术语，结果具有更低的熵。
- en: Image Compression
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 图像压缩
- en: A wide variety of image compression algorithms (sometimes called *codecs*) take
    advantage of the unique statistical properties of image data to increase the rate
    of compression. While a full overview of image compression is out of the scope
    of this post, we will touch on a few points that pertain to the problem at hand.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 各种图像压缩算法（有时称为*编解码器*）利用图像数据的独特统计特性来提高压缩率。虽然对图像压缩的全面概述超出了本文的范围，但我们将触及一些与当前问题相关的要点。
- en: 'A cursory search for image codecs will return a wide variety of options including,
    [PNG](https://en.wikipedia.org/wiki/Portable_Network_Graphics), [JPEG](https://en.wikipedia.org/wiki/JPEG),
    [WebP](https://en.wikipedia.org/wiki/WebP), [JPEG XL](https://en.wikipedia.org/wiki/JPEG_XL),
    and more. These codecs differ in several properties including the following:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 对图像编解码器进行初步搜索将返回各种选项，包括 [PNG](https://en.wikipedia.org/wiki/Portable_Network_Graphics)、[JPEG](https://en.wikipedia.org/wiki/JPEG)、[WebP](https://en.wikipedia.org/wiki/WebP)、[JPEG
    XL](https://en.wikipedia.org/wiki/JPEG_XL) 等。这些编解码器在几个属性上有所不同，包括以下几点：
- en: '**Lossless vs. lossy compression support**: Some codecs support lossless compression,
    some support lossy compression, and some support both. In most cases lossy compression
    results in measurably better compression rates than lossless compression.'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**无损与有损压缩支持**：一些编解码器支持无损压缩，一些支持有损压缩，还有一些支持两者。在大多数情况下，有损压缩的压缩率比无损压缩更好。'
- en: '**Supported input formats**: The different algorithms support different types
    of input. Typical limitations include the number of color channels that are supported,
    the number of bits per pixel that are supported, etc.'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**支持的输入格式**：不同的算法支持不同类型的输入。典型的限制包括支持的颜色通道数量、支持的每像素位数等。'
- en: '**Compression quality controls**: The codecs differ in the degree and nature
    of control they enable over the resultant compression quality. For example, by
    tuning the quality controls we can manage the trade-off between the compression
    rate, on the one hand, and the speed of encoding/decoding and/or loss of information,
    on the other hand.'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**压缩质量控制**：编解码器在允许控制结果压缩质量的程度和性质上有所不同。例如，通过调整质量控制，我们可以管理压缩率与编码/解码速度和/或信息丢失之间的权衡。'
- en: '**Underlying compression algorithm**: The algorithms underlying the codecs
    behave differently, optimize different functions, and exhibit different artifacts.
    For example, some algorithms might be more prone than others to the removal of
    specific image frequencies on which your algorithm relies.'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**底层压缩算法**：编解码器底层的算法行为各异，优化的功能不同，表现出的伪影也不同。例如，一些算法可能比其他算法更容易去除你所依赖的特定图像频率。'
- en: The [**Structural Similarity** I**ndex Measure** (**SSIM**)](https://en.wikipedia.org/wiki/Structural_similarity)
    is a popular metric for evaluating the degradation in image quality resulting
    from a lossy image compression scheme. The SSIM value ranges from 0 to 1 with
    1 implying an exact match with the original image. Other metrics for measuring
    image degradation include [MSE](https://en.wikipedia.org/wiki/Mean_squared_error)
    and [PSNR](https://en.wikipedia.org/wiki/Peak_signal-to-noise_ratio). As before,
    your goal should be to choose metrics that are able to predict the impact of the
    information loss on the performance of your data algorithms.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '[**结构相似性**指数测量（**SSIM**）](https://en.wikipedia.org/wiki/Structural_similarity)
    是一种常用的度量标准，用于评估图像压缩方案带来的图像质量退化。SSIM值范围从0到1，其中1表示与原始图像完全匹配。其他测量图像退化的指标包括 [MSE](https://en.wikipedia.org/wiki/Mean_squared_error)
    和 [PSNR](https://en.wikipedia.org/wiki/Peak_signal-to-noise_ratio)。如前所述，你的目标应是选择能够预测信息丧失对数据算法性能影响的指标。'
- en: 'A few words of caution regarding the use of lossy image compression schemes
    are warranted:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 关于使用有损图像压缩方案，有几点需要注意：
- en: While most codecs optimize for visual perception, your algorithm might be sensitive
    to elements in the image that are not visually apparent. In particular, relying
    on a high degree of visual similarity for evaluating a compression scheme should
    **not** replace an in-depth assessment.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尽管大多数编解码器优化了视觉感知，你的算法可能对图像中那些不明显的元素较为敏感。特别是，依赖于高度视觉相似性来评估压缩方案**不**应替代深入评估。
- en: Beware of websites that give off the impression that one particular codec is
    always better than all others. In practice, the relative performance of different
    codecs can vary greatly between domains of images (e.g., deep space images vs.
    medical images) and even between image samples within the same domain. It is highly
    advised that you conduct your own analysis on your own image datasets.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当心那些给人以某个编解码器总是优于其他编解码器印象的网站。实际上，不同编解码器的相对性能在图像领域（例如，深空图像与医学图像）之间差异很大，甚至同一领域内的图像样本之间也会有所不同。强烈建议你对自己的图像数据集进行分析。
- en: For video sequence data, you may feel compelled to adopt a video compression
    format. Video compression utilizes similarities between nearby frames to further
    increase compression rates. However, often times this results in significantly
    reduced quality (e.g., as measured by SSIM) compared to image compression. In
    some cases, you may be better off compressing each frame independently.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于视频序列数据，你可能会觉得有必要采用视频压缩格式。视频压缩利用相邻帧之间的相似性来进一步提高压缩率。然而，这通常会导致与图像压缩相比显著降低的质量（例如，通过SSIM测量）。在某些情况下，你可能会发现独立压缩每一帧效果更好。
- en: Our toy example includes two opportunities for applying image compression. First,
    we compress the image map using the classic lossy JPEG codec and with a compression
    *quality* setting of 95 (see [here](https://pillow.readthedocs.io/en/stable/handbook/image-file-formats.html#jpeg)
    for details on setting the *quality* value). Next, we compress the label map.
    Since we expect our ML algorithm to be highly dependent on the accuracy of our
    data labels, we choose the lossless PNG compression format so as not to lose any
    label information. Note that while both JPEG and PNG are extremely popular formats,
    they are not known for providing the best compression rates. Although sufficient
    for the purposes of our demonstration, you might get better results using more
    modern image compression algorithms.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的示例包括两个应用图像压缩的机会。首先，我们使用经典的有损JPEG编解码器压缩图像图，并将压缩*质量*设置为95（有关设置*质量*值的详细信息，请参见
    [这里](https://pillow.readthedocs.io/en/stable/handbook/image-file-formats.html#jpeg)）。接下来，我们压缩标签图。由于我们期望机器学习算法高度依赖数据标签的准确性，因此我们选择无损PNG压缩格式，以避免丢失任何标签信息。请注意，尽管JPEG和PNG都是极受欢迎的格式，但它们并不以提供最佳压缩率而闻名。虽然足够用于我们的演示目的，但你可能会发现使用更现代的图像压缩算法能获得更好的结果。
- en: The code block below demonstrates the image compression using the [Pillow](https://pypi.org/project/Pillow/)
    package (version 9.2.0). We apply the SSIM metric using the [scikit-image](https://pypi.org/project/scikit-image/)
    package (version 0.19.3).
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的代码块演示了使用[Pillow](https://pypi.org/project/Pillow/) 包（版本 9.2.0）进行图像压缩。我们使用[scikit-image](https://pypi.org/project/scikit-image/)
    包（版本 0.19.3）应用 SSIM 评分。
- en: '[PRE5]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The SSIM score in our example is 0.996, indicating a relatively low loss in
    the quality of information resulting from the JPEG encoding. Naturally, whether
    this level of image degradation is acceptable will depend on the sensitivity of
    the ML algorithm that consumes the data. Note that compression quality that we
    have chosen is relatively high. A lower quality rate would likely result in better
    compression but at the cost of a greater loss of image detail.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 我们示例中的 SSIM 分数为 0.996，表明 JPEG 编码导致的信息质量损失相对较低。自然，这一水平的图像降级是否可接受将取决于消耗数据的 ML
    算法的敏感性。请注意，我们选择的压缩质量相对较高。较低的质量率可能会导致更好的压缩，但以更大的图像细节损失为代价。
- en: The following image displays the original input alongside the decoded output
    and the absolute differences between them (scaled by 20 for enhancement).
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了原始输入、解码输出以及它们之间的绝对差异（为了增强效果，差异被缩放了 20 倍）。
- en: '![](../Images/ce4b9a2ffdadd6d8d95aacc4b9fc14ae.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ce4b9a2ffdadd6d8d95aacc4b9fc14ae.png)'
- en: Impact of JPEG on the Photo by [Joshua Sortino](https://unsplash.com/@sortino?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: JPEG 对[Joshua Sortino](https://unsplash.com/@sortino?utm_source=medium&utm_medium=referral)在[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)上的照片的影响
- en: Result
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 结果
- en: 'At this stage the image, label, and depth maps take up 341 KB, 205 KB, and
    835 KB of storage space, respectively. The size of the tarball is 1.2 MB. By applying
    a general purpose ZIP algorithm to the tarball, this drops to 1.1 MB. This is
    less than half the size of the result of the trivial compression with which we
    started. The final compression sequence is summarized in the following code block:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，图像、标签和深度图分别占用 341 KB、205 KB 和 835 KB 的存储空间。tarball 的大小为 1.2 MB。通过对 tarball
    应用通用的 ZIP 算法，这一大小降至 1.1 MB。这比我们最初开始时的简单压缩结果小了一半。最终的压缩序列总结在下面的代码块中：
- en: '[PRE6]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: With this relatively simple sequence we managed to reduce the size of our data
    by 5.64X. This amounts to more than **80% savings** in storage space. Applying
    this to your full dataset can have **profound implications on your storage costs**.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这个相对简单的序列，我们成功地将数据的大小减少了 5.64 倍。这意味着存储空间节省了超过**80%**。将其应用于你的完整数据集可能对**存储成本产生深远影响**。
- en: It is likely that we could go on and find additional opportunities for compression.
    However, the rate of compression of each additional action will most likely decrease.
    It is also likely that a different compression sequence would have resulted in
    an even better compression rate. Continued exploration may be warranted based
    on your existing storage costs and potential for savings.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能还会发现额外的压缩机会。然而，每次额外操作的压缩率可能会降低。此外，使用不同的压缩序列可能会获得更好的压缩率。根据你现有的存储成本和潜在的节省，可能值得继续探索。
- en: Summary
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this post we have discussed the importance of data compression for data
    science in general and machine learning in particular. We demonstrated just a
    few simple compression techniques and measured their impact on the data storage
    size. As emphasized above, the methods we chose will not necessarily be the right
    ones for you. The keys to finding a good solution include: an intimate knowledge
    of the raw data types, a deep understanding of the ways in which they are consumed,
    and a good grasp of the relevant compression schemes.'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在这篇文章中，我们讨论了数据压缩对数据科学尤其是机器学习的重要性。我们演示了几个简单的压缩技术，并测量了它们对数据存储大小的影响。如上所述，我们选择的方法不一定适合你。找到一个好的解决方案的关键包括：对原始数据类型的深入了解、对数据消耗方式的深刻理解，以及对相关压缩方案的良好掌握。
- en: As we begin the year 2023, we find ourselves deep into what is often referred
    to as the big data revolution. Proper data management, including the use of data
    compression schemes, is just one of the many important components of this revolution.
    Happy New Year.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 随着2023年的开始，我们发现自己深陷于通常被称为大数据革命的过程中。正确的数据管理，包括使用数据压缩方案，仅仅是这一革命中许多重要组成部分之一。新年快乐。
- en: 'Appendix: The Impact of Compression on the Data Application'
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录：压缩对数据应用的影响
- en: Many data applications can be described as the continuous flow of extremely
    large amounts of data between different devices and device components. In deep
    learning training workload, for example, raw training data is streamed from storage
    to CPU workers for pre-processing and batching, training batches are fed from
    the CPU into the training accelerator and then streamed through the different
    phases of the forward computation graph, gradients are calculated via backward
    propagation, and, in the case of distributed training, data is communicated between
    the participating accelerators.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 许多数据应用可以描述为在不同设备和设备组件之间连续流动的大量数据。例如，在深度学习训练负载中，原始训练数据从存储中流向CPU工作节点进行预处理和批处理，训练批次从CPU送入训练加速器，然后在前向计算图的不同阶段流动，梯度通过反向传播计算，而在分布式训练的情况下，数据在参与的加速器之间进行通信。
- en: '![](../Images/ea40e2462fdf4ff84624888c19ee2440.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ea40e2462fdf4ff84624888c19ee2440.png)'
- en: The Flow of Data in a Typical DL Training Step (by Author)
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 数据在典型深度学习训练步骤中的流动（作者提供）
- en: 'In an ideal situation, the data will flow through the system fast enough to
    keep all of the computation resorces fully utilized. However, sometimes you might
    find that your data flow is bounded by limitations on the bandwidth of the communication
    channel. This can lead to the presence of a performance bottleneck in the application
    and result in under-utilization of the compute resources. In this undesired situation,
    expensive resources remain idle as they wait for data input. Such issues can be
    resolved in a number of ways including: increasing the communication bandwidth
    (e.g. using different instance types with different specifications), changing
    up the application architecture, and/or **reducing the size of the data**.'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在理想情况下，数据会在系统中足够快地流动，以保持所有计算资源的充分利用。然而，有时你可能会发现数据流受到通信通道带宽限制的约束。这可能导致应用中存在性能瓶颈，并导致计算资源的未充分利用。在这种不理想的情况下，昂贵的资源处于闲置状态，等待数据输入。这类问题可以通过多种方式解决，包括：增加通信带宽（例如，使用不同规格的实例类型）、改变应用架构和/或**减少数据的大小**。
- en: If the size of your data is large and the communication bandwidth between storage
    and the application host is limited, you might be particularly susceptible to
    a data flow bottleneck. **Storing your data in a compressed format reduces the
    potential for bottlenecks on the interface between the storage location and the
    application**.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 如果数据的大小很大，并且存储与应用主机之间的通信带宽有限，你可能特别容易遇到数据流瓶颈。**将数据存储在压缩格式中可以减少存储位置与应用之间接口的瓶颈潜力**。
- en: One potential tradeoff of compression is the additional compute resources that
    are required for compressing and/or uncompressing the data. If your data application
    is already compute intensive, you might find that storing your data in a compressed
    format frees up a *data flow* bottleneck in one part of the application only to
    introduce a *compute* bottleneck somewhere else. Thus, **data compression on a
    data application pipeline can turn into a delicate art in balancing the utilization
    of different resources**.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 压缩的一种潜在权衡是压缩和/或解压数据所需的额外计算资源。如果你的数据应用已经计算密集，你可能会发现将数据存储在压缩格式中虽然在应用的某一部分释放了*数据流*瓶颈，却在其他地方引入了*计算*瓶颈。因此，**数据应用管道中的数据压缩可能成为在不同资源的利用之间取得微妙平衡的艺术**。
