- en: 'AWS Essentials for Data Science: Compute'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ•°æ®ç§‘å­¦AWSåŸºç¡€ï¼šè®¡ç®—
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/aws-essentials-for-data-science-compute-9b4c6e3b46bf](https://towardsdatascience.com/aws-essentials-for-data-science-compute-9b4c6e3b46bf)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/aws-essentials-for-data-science-compute-9b4c6e3b46bf](https://towardsdatascience.com/aws-essentials-for-data-science-compute-9b4c6e3b46bf)
- en: Understanding and deploying EC2 and Lambda services
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç†è§£å’Œéƒ¨ç½²EC2å’ŒLambdaæœåŠ¡
- en: '[](https://mgsosna.medium.com/?source=post_page-----9b4c6e3b46bf--------------------------------)[![Matt
    Sosna](../Images/c3175c0dc62b795a8d0fa57532fb669b.png)](https://mgsosna.medium.com/?source=post_page-----9b4c6e3b46bf--------------------------------)[](https://towardsdatascience.com/?source=post_page-----9b4c6e3b46bf--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----9b4c6e3b46bf--------------------------------)
    [Matt Sosna](https://mgsosna.medium.com/?source=post_page-----9b4c6e3b46bf--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://mgsosna.medium.com/?source=post_page-----9b4c6e3b46bf--------------------------------)[![Matt
    Sosna](../Images/c3175c0dc62b795a8d0fa57532fb669b.png)](https://mgsosna.medium.com/?source=post_page-----9b4c6e3b46bf--------------------------------)[](https://towardsdatascience.com/?source=post_page-----9b4c6e3b46bf--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----9b4c6e3b46bf--------------------------------)
    [Matt Sosna](https://mgsosna.medium.com/?source=post_page-----9b4c6e3b46bf--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----9b4c6e3b46bf--------------------------------)
    Â·18 min readÂ·Jan 3, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----9b4c6e3b46bf--------------------------------)
    Â·é˜…è¯»æ—¶é—´18åˆ†é’ŸÂ·2023å¹´1æœˆ3æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/7452510321621511a738d6a39304a5d4.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7452510321621511a738d6a39304a5d4.png)'
- en: Photo by [Nick Owuor (astro.nic.visuals)](https://unsplash.com/@astro_nic25?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Nick Owuor (astro.nic.visuals)](https://unsplash.com/@astro_nic25?utm_source=medium&utm_medium=referral)
    æä¾›ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: So youâ€™ve built a cool app and want to show it off to the world. Maybe itâ€™s
    an AI that generates [cat pictures from scribbles](https://affinelayer.com/pixsrv/),
    a [viral LinkedIn post generator](https://viralpostgenerator.com), or an [English
    to RegEx translator](https://www.autoregex.xyz/). You want a user to just click
    a link and immediately start interacting with your app, rather than needing to
    download and run it on their computer.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥ä½ åˆ›å»ºäº†ä¸€ä¸ªå¾ˆé…·çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æƒ³å‘å…¨ä¸–ç•Œå±•ç¤ºå®ƒã€‚ä¹Ÿè®¸å®ƒæ˜¯ä¸€ä¸ªå¯ä»¥ç”Ÿæˆ[æ¶‚é¸¦çŒ«å’ªå›¾ç‰‡çš„AI](https://affinelayer.com/pixsrv/)ã€ä¸€ä¸ª[ç—…æ¯’å¼LinkedInå¸–å­ç”Ÿæˆå™¨](https://viralpostgenerator.com)æˆ–ä¸€ä¸ª[è‹±è¯­åˆ°RegExçš„ç¿»è¯‘å™¨](https://www.autoregex.xyz/)ã€‚ä½ å¸Œæœ›ç”¨æˆ·åªéœ€ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ï¼Œå°±èƒ½ç«‹å³å¼€å§‹ä½¿ç”¨ä½ çš„åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯éœ€è¦ä¸‹è½½å¹¶åœ¨ä»–ä»¬çš„ç”µè„‘ä¸Šè¿è¡Œå®ƒã€‚
- en: This â€œimmediate interactivityâ€ is going to require a **server**, which takes
    user requests (e.g., cat scribbles) and *serves* responses (e.g., AI-generated
    cat images). You *could* use your personal laptop, but itâ€™ll stop serving requests
    when it goes to sleep or turns off, and a sophisticated hacker could probably
    steal your private data. The cherry on top is that your hard drive might melt
    if your computer tries serving too many requests at once!
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§â€œå³æ—¶äº¤äº’â€éœ€è¦ä¸€ä¸ª**æœåŠ¡å™¨**ï¼Œå®ƒæ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼ˆä¾‹å¦‚ï¼ŒçŒ«å’ªæ¶‚é¸¦ï¼‰å¹¶*æä¾›*å“åº”ï¼ˆä¾‹å¦‚ï¼ŒAIç”Ÿæˆçš„çŒ«å’ªå›¾ç‰‡ï¼‰ã€‚ä½ *å¯ä»¥*ä½¿ç”¨ä¸ªäººç¬”è®°æœ¬ç”µè„‘ï¼Œä½†å½“å®ƒè¿›å…¥ç¡çœ æ¨¡å¼æˆ–å…³é—­æ—¶ï¼Œå®ƒå°†åœæ­¢å¤„ç†è¯·æ±‚ï¼Œè€Œä¸”ä¸€ä¸ªç†Ÿç»ƒçš„é»‘å®¢å¯èƒ½ä¼šçªƒå–ä½ çš„ç§äººæ•°æ®ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœä½ çš„è®¡ç®—æœºå°è¯•åŒæ—¶å¤„ç†è¿‡å¤šçš„è¯·æ±‚ï¼Œä½ çš„ç¡¬ç›˜å¯èƒ½ä¼šè¿‡çƒ­ï¼
- en: Unless you like hacked, melted laptops, youâ€™ll probably want to [rent a server
    from the cloud](/aws-essentials-for-data-science-why-cloud-computing-141cc6cee284).
    While you sacrifice some control by not having access to the physical machine,
    youâ€™ll abstract away a lot of configuration and maintenance you likely donâ€™t want
    to deal with anyway. And if youâ€™re willing to pay a bit more, you can easily rent
    a machine â€” or several â€” that are significantly stronger than your laptop. So
    how do we get started?
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤éä½ å–œæ¬¢è¢«é»‘å®¢æ”»å‡»æˆ–ç¡¬ç›˜è¿‡çƒ­çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œå¦åˆ™ä½ å¯èƒ½ä¼šæƒ³è¦[ç§Ÿç”¨äº‘æœåŠ¡å™¨](/aws-essentials-for-data-science-why-cloud-computing-141cc6cee284)ã€‚è™½ç„¶ä½ å¤±å»äº†ä¸€äº›å¯¹ç‰©ç†æœºå™¨çš„æ§åˆ¶ï¼Œä½†ä½ ä¼šé¿å…å¾ˆå¤šä½ å¯èƒ½ä¸æ„¿æ„å¤„ç†çš„é…ç½®å’Œç»´æŠ¤ã€‚è€Œä¸”å¦‚æœä½ æ„¿æ„å¤šèŠ±ç‚¹é’±ï¼Œä½ å¯ä»¥è½»æ¾ç§Ÿç”¨ä¸€å°â€”â€”ç”šè‡³å‡ å°â€”â€”è¿œæ¯”ä½ çš„ç¬”è®°æœ¬ç”µè„‘å¼ºå¤§çš„æœºå™¨ã€‚é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆå¼€å§‹å‘¢ï¼Ÿ
- en: We previously covered a [high-level overview](/aws-essentials-for-data-science-why-cloud-computing-141cc6cee284)
    of the cloud, as well as a tutorial on [storing data](/aws-essentials-for-data-science-storage-5755afc3cb4a).
    But what about the *engines* of the cloud? In this final post, weâ€™ll cover two
    compute-focused **Amazon Web Services**. Weâ€™ll start with the fundamental cloud
    building block, **EC2**, before moving on to server-less computing with **Lambda**.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¹‹å‰è¦†ç›–äº†äº‘è®¡ç®—çš„[é«˜å±‚æ¦‚è¿°](/aws-essentials-for-data-science-why-cloud-computing-141cc6cee284)ä»¥åŠ[å­˜å‚¨æ•°æ®](
    /aws-essentials-for-data-science-storage-5755afc3cb4a)çš„æ•™ç¨‹ã€‚ä½†äº‘è®¡ç®—çš„*å¼•æ“*æ˜¯ä»€ä¹ˆï¼Ÿåœ¨è¿™ç¯‡æœ€åçš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸¤ä¸ªè®¡ç®—å¯†é›†å‹çš„**äºšé©¬é€Šç½‘ç»œæœåŠ¡**ã€‚æˆ‘ä»¬å°†ä»åŸºç¡€çš„äº‘æ„å»ºæ¨¡å—**EC2**å¼€å§‹ï¼Œç„¶åè½¬åˆ°æ— æœåŠ¡å™¨è®¡ç®—çš„**Lambda**ã€‚
- en: '![](../Images/8bb891a7b1f3e4070c7195dc9c94e8e7.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8bb891a7b1f3e4070c7195dc9c94e8e7.png)'
- en: Photo by [Taylor Vick](https://unsplash.com/@tvick?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±[Taylor Vick](https://unsplash.com/@tvick?utm_source=medium&utm_medium=referral)åœ¨[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)æ‹æ‘„
- en: Background
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: èƒŒæ™¯
- en: The holiday season is a recurring chaotic time for retailers. Q4 accounts for
    **a staggering 33â€“39%** of [Macyâ€™s](https://ycharts.com/companies/M/revenues)
    and [Kohlâ€™s](https://ycharts.com/companies/KSS/revenues) yearly revenues, for
    example, and even with Prime Day in the summer, [Amazonâ€™s](https://ycharts.com/companies/AMZN/revenues)
    Q4 is still around 31%. Much of this holiday rush [takes place online](https://www.cbre.com/insights/articles/omnichannel-what-is-the-share-of-e-commerce-in-overall-retail-sales),
    translating to *a lot more users* spending *a lot more time* on storesâ€™ websites.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å‡æœŸå­£èŠ‚å¯¹äºé›¶å”®å•†æ¥è¯´æ˜¯ä¸€ä¸ªåå¤å‡ºç°çš„æ··ä¹±æ—¶åˆ»ã€‚ä¾‹å¦‚ï¼Œç¬¬å››å­£åº¦å **æƒŠäººçš„33â€“39%**çš„[Macy's](https://ycharts.com/companies/M/revenues)å’Œ[Kohl's](https://ycharts.com/companies/KSS/revenues)å¹´åº¦æ”¶å…¥ï¼Œç”šè‡³åœ¨å¤å­£çš„Prime
    Dayä¹‹åï¼Œ[äºšé©¬é€Š](https://ycharts.com/companies/AMZN/revenues)çš„ç¬¬å››å­£åº¦ä»ç„¶çº¦ä¸º31%ã€‚è¿™è‚¡å‡æ—¥å†²åŠ¨[å¤§å¤šåœ¨çº¿ä¸Šå‘ç”Ÿ](https://www.cbre.com/insights/articles/omnichannel-what-is-the-share-of-e-commerce-in-overall-retail-sales)ï¼Œè½¬åŒ–ä¸º*æ›´å¤šçš„ç”¨æˆ·*åœ¨å•†åº—ç½‘ç«™ä¸Š*èŠ±è´¹æ›´å¤šçš„æ—¶é—´*ã€‚
- en: 'Put yourself in the shoes of an Amazon infrastructure engineer in October 2005,
    a few years after the [dot-com bubble](https://en.wikipedia.org/wiki/Dot-com_bubble),
    but before the cloud industry really started. You know you have to do *something*
    to handle the tsunami of traffic on the horizon: the last thing you want is for
    the site to be down, [millions of dollars of sales slipping by](https://www.independent.co.uk/news/business/amazon-down-internet-outage-sales-b1861737.html)
    as frustrated shoppers switch to another website. [1]'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è‡ªå·±ç½®èº«äº2005å¹´10æœˆçš„äºšé©¬é€ŠåŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆçš„è§’è‰²ä¸­ï¼Œé‚£æ—¶[äº’è”ç½‘æ³¡æ²«](https://en.wikipedia.org/wiki/Dot-com_bubble)å·²è¿‡å»å‡ å¹´ï¼Œä½†äº‘è®¡ç®—è¡Œä¸šå°šæœªçœŸæ­£èµ·æ­¥ã€‚ä½ çŸ¥é“ä½ å¿…é¡»åš*æŸäº›äº‹æƒ…*æ¥åº”å¯¹å³å°†åˆ°æ¥çš„æµé‡æ´ªå³°ï¼šä½ æœ€ä¸å¸Œæœ›çš„å°±æ˜¯ç½‘ç«™å´©æºƒï¼Œ[æ•°ç™¾ä¸‡ç¾å…ƒçš„é”€å”®æœºä¼šæºœèµ°](https://www.independent.co.uk/news/business/amazon-down-internet-outage-sales-b1861737.html)ï¼Œå› ä¸ºæ²®ä¸§çš„é¡¾å®¢è½¬å‘äº†å…¶ä»–ç½‘ç«™ã€‚[1]
- en: One way to handle the additional load is to *buy more computers*. (There are
    indeed [stories of early Amazon engineers](https://open.spotify.com/episode/14LmWeOMRZysw2i2vYSOuw?si=ce630660e3b44461)
    preparing for the holidays by buying the most powerful servers they could find
    and crossing their fingers!) These extra servers should indeed handle the spike
    in traffic. But when the holiday buzz ends, that extra compute will end up sitting
    around unused until the next holiday season. [2]
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: å¤„ç†é¢å¤–è´Ÿè½½çš„ä¸€ç§æ–¹æ³•æ˜¯*è´­ä¹°æ›´å¤šè®¡ç®—æœº*ã€‚ (ç¡®å®æœ‰[æ—©æœŸäºšé©¬é€Šå·¥ç¨‹å¸ˆçš„æ•…äº‹](https://open.spotify.com/episode/14LmWeOMRZysw2i2vYSOuw?si=ce630660e3b44461)ï¼Œä»–ä»¬åœ¨å‡æœŸå‰è´­ä¹°äº†ä»–ä»¬èƒ½æ‰¾åˆ°çš„æœ€å¼ºå¤§çš„æœåŠ¡å™¨ï¼Œå¹¶ç¥ˆç¥·ä¸€åˆ‡é¡ºåˆ©ï¼)
    è¿™äº›é¢å¤–çš„æœåŠ¡å™¨ç¡®å®åº”è¯¥å¤„ç†æµé‡æ¿€å¢ã€‚ä½†å½“å‡æœŸçƒ­æ½®ç»“æŸæ—¶ï¼Œè¿™äº›é¢å¤–çš„è®¡ç®—èµ„æºå°†ä¼šé—²ç½®ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªå‡æœŸå­£èŠ‚ã€‚[2]
- en: The alternative would be to *rent* compute somehow. Ideally, resources would
    **elastically** and **automatically** increase and decrease to your immediate
    needs, rather than needing to guess ahead of time. Youâ€™d abstract away the physical
    hardware, instead just dipping into a â€œpoolâ€ of resources.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: æ›¿ä»£æ–¹æ¡ˆæ˜¯ä»¥æŸç§æ–¹å¼*ç§Ÿç”¨*è®¡ç®—èµ„æºã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œèµ„æºä¼š**å¼¹æ€§åœ°**å’Œ**è‡ªåŠ¨åœ°**æ ¹æ®ä½ çš„å³æ—¶éœ€æ±‚å¢åŠ å’Œå‡å°‘ï¼Œè€Œä¸éœ€è¦æå‰çŒœæµ‹ã€‚ä½ å°†æŠ½è±¡åŒ–ç‰©ç†ç¡¬ä»¶ï¼Œè€Œåªéœ€è¿›å…¥ä¸€ä¸ªâ€œèµ„æºæ± â€ã€‚
- en: 'Amazon Web Services was born out of needs like these in the fledgling internet:
    dynamically accessing the compute resources you need, when you need them. Weâ€™ve
    [already covered](/aws-essentials-for-data-science-storage-5755afc3cb4a) one of
    their fundamental *storage* offerings: Amazon Simple Storage Service (S3), a catch-all
    Dropbox analogue for storing data. But letâ€™s now turn to Amazonâ€™s fundamental
    *compute* offering: **Elastic Compute Cloud.**'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: äºšé©¬é€Šç½‘ç»œæœåŠ¡ï¼ˆAWSï¼‰æ­£æ˜¯ä¸ºäº†åº”å¯¹è¿™äº›åˆåˆ›äº’è”ç½‘çš„éœ€æ±‚è€Œè¯ç”Ÿçš„ï¼šåŠ¨æ€åœ°è®¿é—®ä½ æ‰€éœ€çš„è®¡ç®—èµ„æºã€‚æˆ‘ä»¬å·²ç»[ä»‹ç»è¿‡](/aws-essentials-for-data-science-storage-5755afc3cb4a)å…¶åŸºç¡€çš„*å­˜å‚¨*æœåŠ¡ï¼šäºšé©¬é€Šç®€å•å­˜å‚¨æœåŠ¡ï¼ˆS3ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼äºDropboxçš„ç»¼åˆæ•°æ®å­˜å‚¨æœåŠ¡ã€‚ä½†ç°åœ¨è®©æˆ‘ä»¬è½¬å‘äºšé©¬é€Šçš„åŸºç¡€*è®¡ç®—*æœåŠ¡ï¼š**å¼¹æ€§è®¡ç®—äº‘**ã€‚
- en: '![](../Images/470af19619c1d5e1dc39271aa48d12e1.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/470af19619c1d5e1dc39271aa48d12e1.png)'
- en: Screenshot by author
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: 'EC2: Elastic Compute Cloud'
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 'EC2: å¼¹æ€§è®¡ç®—äº‘'
- en: 'We can use **Amazon EC2** to access the fundamental building block of the cloud:
    the **virtual server**. Data centers are filled with servers, which are [logically
    partitioned](https://en.wikipedia.org/wiki/Logical_partition) into virtual servers,
    allowing multiple people to simultaneously and independently use the hardware.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨**äºšé©¬é€ŠEC2**æ¥è®¿é—®äº‘çš„åŸºæœ¬æ„å»ºå—ï¼š**è™šæ‹ŸæœåŠ¡å™¨**ã€‚æ•°æ®ä¸­å¿ƒå……æ»¡äº†æœåŠ¡å™¨ï¼Œè¿™äº›æœåŠ¡å™¨è¢«[é€»è¾‘åˆ†åŒº](https://en.wikipedia.org/wiki/Logical_partition)æˆè™šæ‹ŸæœåŠ¡å™¨ï¼Œå…è®¸å¤šäººåŒæ—¶ç‹¬ç«‹ä½¿ç”¨ç¡¬ä»¶ã€‚
- en: One server could be simultaneously running simulations for a weather forecast,
    fetching data from multiple databases, sending the HTML for a dozen webpages,
    and more. Importantly, this physical server would be abstracted away from its
    users beyond the configurations of their virtual servers, letting them focus on
    their applications.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€å°æœåŠ¡å™¨å¯ä»¥åŒæ—¶è¿è¡Œå¤©æ°”é¢„æŠ¥æ¨¡æ‹Ÿï¼Œä»å¤šä¸ªæ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œå‘é€åå‡ ä¸ªç½‘é¡µçš„HTMLç­‰ç­‰ã€‚é‡è¦çš„æ˜¯ï¼Œè¿™å°ç‰©ç†æœåŠ¡å™¨å¯¹ç”¨æˆ·æ¥è¯´æ˜¯æŠ½è±¡çš„ï¼Œè¶…å‡ºäº†ä»–ä»¬è™šæ‹ŸæœåŠ¡å™¨çš„é…ç½®èŒƒå›´ï¼Œè®©ä»–ä»¬èƒ½å¤Ÿä¸“æ³¨äºè‡ªå·±çš„åº”ç”¨ã€‚
- en: At AWS, virtual servers are called **EC2 instances**. Released in 2006, EC2
    was [one of Amazonâ€™s first cloud services](https://aws.amazon.com/blogs/aws/aws-blog-the-first-five-years/)
    and has grown to be a [central component of the tech stacks](https://aws.amazon.com/ec2/customers/)
    of Netflix, Pinterest, Lyft, and many others. EC2 instances are modular and configurable,
    allowing users to optimize for compute, memory, GPU, storage, or a combination
    depending on their needs. A GPU-optimized instance could be used for training
    machine learning models, for example, while a storage-optimized instance could
    host a database.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨AWSä¸­ï¼Œè™šæ‹ŸæœåŠ¡å™¨è¢«ç§°ä¸º**EC2å®ä¾‹**ã€‚EC2äº2006å¹´å‘å¸ƒï¼Œæ˜¯[äºšé©¬é€Šçš„é¦–æ‰¹äº‘æœåŠ¡ä¹‹ä¸€](https://aws.amazon.com/blogs/aws/aws-blog-the-first-five-years/)ï¼Œå¹¶å·²æˆé•¿ä¸º[Netflixã€Pinterestã€Lyftç­‰ä¼—å¤šå…¬å¸æŠ€æœ¯æ ˆçš„æ ¸å¿ƒç»„ä»¶](https://aws.amazon.com/ec2/customers/)ã€‚EC2å®ä¾‹å…·æœ‰æ¨¡å—åŒ–å’Œå¯é…ç½®æ€§ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®éœ€æ±‚ä¼˜åŒ–è®¡ç®—ã€å†…å­˜ã€GPUã€å­˜å‚¨æˆ–å®ƒä»¬çš„ç»„åˆã€‚ä¾‹å¦‚ï¼ŒGPUä¼˜åŒ–å®ä¾‹å¯ä»¥ç”¨äºè®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè€Œå­˜å‚¨ä¼˜åŒ–å®ä¾‹åˆ™å¯ä»¥æ‰˜ç®¡æ•°æ®åº“ã€‚
- en: Letâ€™s now create an EC2 instance to take a closer look. We [log into our AWS
    account](https://aws.amazon.com/login), then navigate to EC2 from the menu of
    services. We should see something like the image below. Letâ€™s click on the `Launch
    instance` button and begin.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªEC2å®ä¾‹è¿›è¡Œæ›´è¯¦ç»†çš„äº†è§£ã€‚æˆ‘ä»¬[ç™»å½•åˆ°æˆ‘ä»¬çš„AWSè´¦æˆ·](https://aws.amazon.com/login)ï¼Œç„¶åä»æœåŠ¡èœå•ä¸­å¯¼èˆªåˆ°EC2ã€‚æˆ‘ä»¬åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å›¾åƒã€‚ç‚¹å‡»`Launch
    instance`æŒ‰é’®å¹¶å¼€å§‹ã€‚
- en: '![](../Images/443377eeee944a578b77e8c1c6b38154.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/443377eeee944a578b77e8c1c6b38154.png)'
- en: Screenshot by author
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: Set up
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è®¾ç½®
- en: 'AMI: Amazon Machine Image'
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 'AMI: äºšé©¬é€Šæœºå™¨é•œåƒ'
- en: 'The first thing weâ€™ll do when launching an EC2 instance is select the [**Amazon
    Machine Image**](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html).
    An AMI specifies the basic software configuration our instance: the operating
    system, [application server](https://www.gartner.com/en/information-technology/glossary/application-server),
    and applications required for your server to run. AMIs are like [Docker images](https://www.tutorialspoint.com/docker/docker_images.htm):
    **reusable templates** that let us create the exact environment we want each time.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: å¯åŠ¨EC2å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦é€‰æ‹©[**äºšé©¬é€Šæœºå™¨é•œåƒ**](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html)ã€‚AMIæŒ‡å®šäº†æˆ‘ä»¬å®ä¾‹çš„åŸºæœ¬è½¯ä»¶é…ç½®ï¼šæ“ä½œç³»ç»Ÿï¼Œ[åº”ç”¨æœåŠ¡å™¨](https://www.gartner.com/en/information-technology/glossary/application-server)å’Œè¿è¡ŒæœåŠ¡å™¨æ‰€éœ€çš„åº”ç”¨ç¨‹åºã€‚AMIå°±åƒ[Dockeré•œåƒ](https://www.tutorialspoint.com/docker/docker_images.htm)ï¼š**å¯é‡ç”¨æ¨¡æ¿**ï¼Œè®©æˆ‘ä»¬æ¯æ¬¡éƒ½èƒ½åˆ›å»ºå‡ºæˆ‘ä»¬æƒ³è¦çš„ç²¾ç¡®ç¯å¢ƒã€‚
- en: The default AMI comes with a Linux kernel optimized for EC2, [the system and
    service manager *systemd*](https://en.wikipedia.org/wiki/Systemd), [the GCC compiler](https://en.wikipedia.org/wiki/GNU_Compiler_Collection),
    and other very low-level software. We could create our own AMI if we had strong
    opinions about how to optimize for our use case. But this is an intro tutorial,
    so letâ€™s just choose the default Amazon Linux 2 AMI.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: é»˜è®¤çš„ AMI é…å¤‡äº†ä¼˜åŒ–ç”¨äº EC2 çš„ Linux å†…æ ¸ï¼Œ[ç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨ *systemd*](https://en.wikipedia.org/wiki/Systemd)ã€[GCC
    ç¼–è¯‘å™¨](https://en.wikipedia.org/wiki/GNU_Compiler_Collection)ä»¥åŠå…¶ä»–éå¸¸åº•å±‚çš„è½¯ä»¶ã€‚å¦‚æœæˆ‘ä»¬å¯¹å¦‚ä½•ä¼˜åŒ–ä»¥é€‚åº”æˆ‘ä»¬çš„ç”¨ä¾‹æœ‰å¼ºçƒˆçš„æ„è§ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„
    AMIã€‚ä½†è¿™æ˜¯ä¸€ä¸ªå…¥é—¨æ•™ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±é€‰æ‹©é»˜è®¤çš„ Amazon Linux 2 AMIã€‚
- en: '![](../Images/1d0bfcc28ce35bfb9f09c53647b09f82.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1d0bfcc28ce35bfb9f09c53647b09f82.png)'
- en: Screenshot by author
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: Instance Type
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å®ä¾‹ç±»å‹
- en: Next up is **Instance Type**, where we choose the hardware for our server. We
    wonâ€™t want to deviate from the `t2.micro` option, which is covered by the Free
    Tier. In a production setting, we could decide to optimize for **CPU** (for running
    a [wide range of system operations simultaneously](https://www.weka.io/learn/hpc/cpu-vs-gpu)),
    **GPU** (for machine learning or graphics processing), **storage** (for slow reads
    and writes of persistent data), **memory** (for [fast reads and writes of volatile
    data](https://www.backblaze.com/blog/whats-diff-ram-vs-storage/)), or some combination.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥æ˜¯**å®ä¾‹ç±»å‹**ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©æœåŠ¡å™¨çš„ç¡¬ä»¶ã€‚æˆ‘ä»¬ä¸å¸Œæœ›åç¦»`t2.micro`é€‰é¡¹ï¼Œè¯¥é€‰é¡¹è¢«å…è´¹å¥—é¤è¦†ç›–ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šä¼˜åŒ–**CPU**ï¼ˆç”¨äºåŒæ—¶è¿è¡Œ[å„ç§ç³»ç»Ÿæ“ä½œ](https://www.weka.io/learn/hpc/cpu-vs-gpu)ï¼‰ã€**GPU**ï¼ˆç”¨äºæœºå™¨å­¦ä¹ æˆ–å›¾å½¢å¤„ç†ï¼‰ã€**å­˜å‚¨**ï¼ˆç”¨äºæ…¢é€Ÿè¯»å†™æŒä¹…æ•°æ®ï¼‰ã€**å†…å­˜**ï¼ˆç”¨äº[å¿«é€Ÿè¯»å†™æ˜“å¤±æ€§æ•°æ®](https://www.backblaze.com/blog/whats-diff-ram-vs-storage/)ï¼‰æˆ–æŸç§ç»„åˆã€‚
- en: We canâ€™t change the instance type once we launch our instance, so make sure
    you donâ€™t accidentally click [the one that charges $31.21 per hour](https://www.todayilearnedcloud.com/Amazon-EC2-How-Much-Does-The-Most-Expensive-Instance-Cost/)!
    Triple-checking that weâ€™ve selected `t2.micro`, we can continue to the next step.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦å¯åŠ¨äº†å®ä¾‹ï¼Œæˆ‘ä»¬æ— æ³•æ›´æ”¹å®ä¾‹ç±»å‹ï¼Œå› æ­¤è¯·ç¡®ä¿ä½ ä¸è¦æ„å¤–ç‚¹å‡»[æ¯å°æ—¶æ”¶è´¹ 31.21 ç¾å…ƒçš„å®ä¾‹](https://www.todayilearnedcloud.com/Amazon-EC2-How-Much-Does-The-Most-Expensive-Instance-Cost/)!
    ä»”ç»†æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦é€‰æ‹©äº†`t2.micro`ï¼Œç„¶åå¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥ã€‚
- en: Key Pair
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¯†é’¥å¯¹
- en: Weâ€™ll now create a key pair. [AWS uses public-key cryptography](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html)
    to secure the login information for EC2 instances. Rather than a password, weâ€™ll
    use the key pair to remotely log into our instance via [SSH](https://www.techtarget.com/searchsecurity/definition/Secure-Shell).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å°†åˆ›å»ºä¸€å¯¹å¯†é’¥ã€‚[AWS ä½¿ç”¨å…¬é’¥åŠ å¯†](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html)æ¥ä¿æŠ¤
    EC2 å®ä¾‹çš„ç™»å½•ä¿¡æ¯ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å¯†é’¥å¯¹è€Œä¸æ˜¯å¯†ç ï¼Œé€šè¿‡[SSH](https://www.techtarget.com/searchsecurity/definition/Secure-Shell)è¿œç¨‹ç™»å½•åˆ°æˆ‘ä»¬çš„å®ä¾‹ã€‚
- en: Weâ€™ll click on `Create a new key pair`. We then give it a name and stick with
    the RSA and .pem defaults. (Select PuTTY if youâ€™re using Windows.)
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†ç‚¹å‡»`åˆ›å»ºæ–°å¯†é’¥å¯¹`ã€‚ç„¶åç»™å®ƒèµ·ä¸ªåå­—ï¼Œå¹¶ä¿æŒ RSA å’Œ .pem çš„é»˜è®¤è®¾ç½®ã€‚ï¼ˆå¦‚æœä½ ä½¿ç”¨ Windowsï¼Œè¯·é€‰æ‹© PuTTYã€‚ï¼‰
- en: '![](../Images/9eb6f1ec40755f4b4d36838dccedb54d.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9eb6f1ec40755f4b4d36838dccedb54d.png)'
- en: Screenshot by author
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: Once we click `Create key pair`, Amazon will save a public part of our key,
    and our computer will download the private key. Make sure you donâ€™t lose this
    .pem (or .ppk) file, as weâ€™ll use it to identify ourselves when remotely accessing
    the EC2 instance.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬ç‚¹å‡»`åˆ›å»ºå¯†é’¥å¯¹`ï¼ŒAmazon å°†ä¿å­˜å¯†é’¥çš„å…¬é’¥éƒ¨åˆ†ï¼Œæˆ‘ä»¬çš„è®¡ç®—æœºå°†ä¸‹è½½ç§é’¥ã€‚ç¡®ä¿ä¸è¦ä¸¢å¤±è¿™ä¸ª .pemï¼ˆæˆ– .ppkï¼‰æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬å°†ç”¨å®ƒæ¥åœ¨è¿œç¨‹è®¿é—®
    EC2 å®ä¾‹æ—¶è¿›è¡Œèº«ä»½éªŒè¯ã€‚
- en: Network settings
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç½‘ç»œè®¾ç½®
- en: We now set the rules for how to access our EC2 instance via the internet. For
    this demo, letâ€™s just click `Select existing security group`, then our default
    VPC ([virtual private cloud](https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html)).
    If you followed along in the previous [AWS Storage post](https://medium.com/towards-data-science/aws-essentials-for-data-science-storage-5755afc3cb4a),
    youâ€™ll have already tinkered with the inbound and outbound access rules for this
    VPC.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬è®¾ç½®é€šè¿‡äº’è”ç½‘è®¿é—® EC2 å®ä¾‹çš„è§„åˆ™ã€‚å¯¹äºè¿™ä¸ªæ¼”ç¤ºï¼Œåªéœ€ç‚¹å‡»`é€‰æ‹©ç°æœ‰çš„å®‰å…¨ç»„`ï¼Œç„¶åé€‰æ‹©æˆ‘ä»¬çš„é»˜è®¤ VPCï¼ˆ[è™šæ‹Ÿç§æœ‰äº‘](https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html)ï¼‰ã€‚å¦‚æœä½ æŒ‰ç…§ä¹‹å‰çš„[AWS
    å­˜å‚¨å¸–å­](https://medium.com/towards-data-science/aws-essentials-for-data-science-storage-5755afc3cb4a)è¿›è¡Œäº†æ“ä½œï¼Œä½ å°†å·²ç»è°ƒæ•´äº†è¿™ä¸ª
    VPC çš„å…¥ç«™å’Œå‡ºç«™è®¿é—®è§„åˆ™ã€‚
- en: Configure storage
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é…ç½®å­˜å‚¨
- en: Weâ€™ll leave our storage config at the default values, which are well within
    the Free Tier limits. Any data we write to our instance will be deleted once our
    demo is over; if we cared about persisting this data, we could click `Add new
    volume` to reserve an [Amazon Elastic Block Storage (EBS)](https://aws.amazon.com/ebs/)
    volume and save our data there. But letâ€™s stick with the root volume for now.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†å­˜å‚¨é…ç½®ä¿æŒåœ¨é»˜è®¤å€¼ï¼Œè¿™äº›å€¼åœ¨å…è´¹å±‚é™åˆ¶èŒƒå›´å†…ã€‚æˆ‘ä»¬å†™å…¥å®ä¾‹çš„ä»»ä½•æ•°æ®å°†åœ¨æ¼”ç¤ºç»“æŸåè¢«åˆ é™¤ï¼›å¦‚æœæˆ‘ä»¬å…³å¿ƒæ•°æ®çš„æŒä¹…æ€§ï¼Œå¯ä»¥ç‚¹å‡» `Add new
    volume` æ¥é¢„ç•™ä¸€ä¸ª[Amazon Elastic Block Storage (EBS)](https://aws.amazon.com/ebs/)
    å·ï¼Œå¹¶å°†æ•°æ®ä¿å­˜åœ¨é‚£é‡Œã€‚ä½†ç°åœ¨æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨æ ¹å·å§ã€‚
- en: Advanced details
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é«˜çº§ç»†èŠ‚
- en: Weâ€™ll skip this section for our demo. But this is where we can specify configurations
    like using on-demand [spot instances](https://aws.amazon.com/ec2/spot/), shutdown
    and [hibernate](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Hibernate.html)
    behavior, whether we want detailed [Amazon CloudWatch](https://aws.amazon.com/cloudwatch/)
    logs, and more.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†åœ¨æ¼”ç¤ºä¸­è·³è¿‡è¿™ä¸€éƒ¨åˆ†ã€‚ä½†è¿™é‡Œæ˜¯æˆ‘ä»¬å¯ä»¥æŒ‡å®šé…ç½®çš„åœ°æ–¹ï¼Œä¾‹å¦‚ä½¿ç”¨æŒ‰éœ€[Spot å®ä¾‹](https://aws.amazon.com/ec2/spot/)ã€å…³é—­å’Œ[ä¼‘çœ ](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Hibernate.html)è¡Œä¸ºã€æ˜¯å¦éœ€è¦è¯¦ç»†çš„[Amazon
    CloudWatch](https://aws.amazon.com/cloudwatch/) æ—¥å¿—ç­‰ã€‚
- en: '![](../Images/ee21d11cb4f05e977d479d444602656c.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ee21d11cb4f05e977d479d444602656c.png)'
- en: Photo by [charlesdeluvio](https://unsplash.com/@charlesdeluvio?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '[charlesdeluvio](https://unsplash.com/@charlesdeluvio?utm_source=medium&utm_medium=referral)
    åœ¨ [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral) ä¸Šçš„ç…§ç‰‡'
- en: Connecting to our instance
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è¿æ¥åˆ°æˆ‘ä»¬çš„å®ä¾‹
- en: Our instance will be available within a few minutes after we hit `Create`. On
    the EC2 home page, we can then click on `Instances` and see something like the
    image below.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„å®ä¾‹å°†åœ¨æˆ‘ä»¬ç‚¹å‡» `Create` åçš„å‡ åˆ†é’Ÿå†…å¯ç”¨ã€‚åœ¨ EC2 é¦–é¡µï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡» `Instances` å¹¶æŸ¥çœ‹ç±»ä¼¼ä¸‹å›¾çš„å†…å®¹ã€‚
- en: '![](../Images/8b47df54cb414eac6f6214a6daf1b94c.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8b47df54cb414eac6f6214a6daf1b94c.png)'
- en: Screenshot by author
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: Letâ€™s now connect to our instance. Weâ€™ll use [**SSH**](https://www.techtarget.com/searchsecurity/definition/Secure-Shell),
    a network protocol that enables secure communication over an unsecured network
    (like the internet). Once weâ€™ve SSHâ€™d into our instance, we will be able to control
    the machine as if we were in a Terminal on our laptop.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬è¿æ¥åˆ°å®ä¾‹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨[**SSH**](https://www.techtarget.com/searchsecurity/definition/Secure-Shell)ï¼Œè¿™æ˜¯ä¸€ç§åœ¨ä¸å®‰å…¨ç½‘ç»œï¼ˆå¦‚äº’è”ç½‘ï¼‰ä¸Šè¿›è¡Œå®‰å…¨é€šä¿¡çš„ç½‘ç»œåè®®ã€‚ä¸€æ—¦æˆ‘ä»¬é€šè¿‡
    SSH è¿æ¥åˆ°å®ä¾‹ï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿåƒåœ¨ç¬”è®°æœ¬ç”µè„‘çš„ç»ˆç«¯ä¸Šæ§åˆ¶æœºå™¨ä¸€æ ·æ§åˆ¶å®ƒã€‚
- en: The first thing to do is **modify the instanceâ€™s security group to allow inbound
    traffic.** On our instance page, weâ€™ll click on the `Security` tab at the bottom,
    then the link for the instanceâ€™s security group.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆè¦åšçš„æ˜¯ **ä¿®æ”¹å®ä¾‹çš„å®‰å…¨ç»„ä»¥å…è®¸å…¥ç«™æµé‡**ã€‚åœ¨æˆ‘ä»¬çš„å®ä¾‹é¡µé¢ä¸Šï¼Œæˆ‘ä»¬ç‚¹å‡»åº•éƒ¨çš„ `Security` é€‰é¡¹å¡ï¼Œç„¶åç‚¹å‡»å®ä¾‹å®‰å…¨ç»„çš„é“¾æ¥ã€‚
- en: '![](../Images/59c948bf7b5d0877c77e4e7f1b05c790.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/59c948bf7b5d0877c77e4e7f1b05c790.png)'
- en: Screenshot by author
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: On the Security Group page, click `Edit inbound rules`, then `Add rule`. Select
    **SSH** for `Type`, then **My IP** for `Source`. Finally, click `Save rules`.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å®‰å…¨ç»„é¡µé¢ï¼Œç‚¹å‡» `Edit inbound rules`ï¼Œç„¶åç‚¹å‡» `Add rule`ã€‚é€‰æ‹© **SSH** ä½œä¸º `Type`ï¼Œç„¶åé€‰æ‹© **My
    IP** ä½œä¸º `Source`ã€‚æœ€åï¼Œç‚¹å‡» `Save rules`ã€‚
- en: So letâ€™s try connecting to our instance now. The command is `ssh` followed by
    the Public [IPv4 DNS](https://www.cloudns.net/blog/what-is-ipv4-everything-you-need-to-know/),
    available on the Instance page. You can also go to `Connect` > `SSH client` to
    get the address.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬å°è¯•è¿æ¥åˆ°æˆ‘ä»¬çš„å®ä¾‹ã€‚å‘½ä»¤æ˜¯ `ssh`ï¼Œåè·Ÿå…¬å…±[IPv4 DNS](https://www.cloudns.net/blog/what-is-ipv4-everything-you-need-to-know/)ï¼Œè¯¥ä¿¡æ¯å¯ä»¥åœ¨å®ä¾‹é¡µé¢æ‰¾åˆ°ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡
    `Connect` > `SSH client` æ¥è·å–åœ°å€ã€‚
- en: We get a Permission denied error because we havenâ€™t passed in our private key.
    Letâ€™s change directories to the one with our key and try again.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é‡åˆ°äº†æƒé™è¢«æ‹’ç»çš„é”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¼ å…¥ç§é’¥ã€‚è®©æˆ‘ä»¬åˆ‡æ¢åˆ°åŒ…å«ç§é’¥çš„ç›®å½•ï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚
- en: 'So far so good, but then we get another error:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©ï¼Œä½†éšåæˆ‘ä»¬é‡åˆ°äº†å¦ä¸€ä¸ªé”™è¯¯ï¼š
- en: 'The error is that our private key has [permission code 644](https://chmodcommand.com/chmod-0644/),
    which means that anyone can read the file. This is the [default access level](https://www.namecheap.com/support/knowledgebase/article.aspx/400/205/file-permissions/)
    for new files, but AWS considers this too insecure: anyone with your key could
    impersonate you.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: é”™è¯¯æ˜¯æˆ‘ä»¬çš„ç§é’¥å…·æœ‰[æƒé™ä»£ç  644](https://chmodcommand.com/chmod-0644/)ï¼Œè¿™æ„å‘³ç€ä»»ä½•äººéƒ½å¯ä»¥è¯»å–è¯¥æ–‡ä»¶ã€‚è¿™æ˜¯æ–°æ–‡ä»¶çš„[é»˜è®¤è®¿é—®çº§åˆ«](https://www.namecheap.com/support/knowledgebase/article.aspx/400/205/file-permissions/)ï¼Œä½†
    AWS è®¤ä¸ºè¿™ä¸å¤Ÿå®‰å…¨ï¼šä»»ä½•æ‹¥æœ‰ä½ çš„å¯†é’¥çš„äººéƒ½å¯èƒ½å†’å……ä½ ã€‚
- en: So weâ€™ll need to modify the file privacy to make it more secure. To do so, we
    use [**chmod**](https://en.wikipedia.org/wiki/Chmod) to change the read and write
    permissions of the file. Specifically, weâ€™ll change the file so that **the only
    valid action is a read by the owner (us).** Even if someone copied our private
    key to another computer, or a different user on our network somehow found the
    key, the file wouldnâ€™t open because that person isnâ€™t the owner. As an additional
    precaution, we remove our write access as well.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ–‡ä»¶çš„éšç§è®¾ç½®ä»¥å¢å¼ºå®‰å…¨æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ [**chmod**](https://en.wikipedia.org/wiki/Chmod)
    æ¥æ›´æ”¹æ–‡ä»¶çš„è¯»å†™æƒé™ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†æ–‡ä»¶æ›´æ”¹ä¸º **ä»…å…è®¸æ‰€æœ‰è€…ï¼ˆæˆ‘ä»¬ï¼‰è¯»å–**ã€‚å³ä½¿æœ‰äººå°†æˆ‘ä»¬çš„ç§é’¥å¤åˆ¶åˆ°å¦ä¸€å°è®¡ç®—æœºä¸Šï¼Œæˆ–ç½‘ç»œä¸Šçš„å…¶ä»–ç”¨æˆ·ä»¥æŸç§æ–¹å¼æ‰¾åˆ°äº†å¯†é’¥ï¼Œæ–‡ä»¶ä¹Ÿæ— æ³•æ‰“å¼€ï¼Œå› ä¸ºé‚£ä¸ªäººä¸æ˜¯æ‰€æœ‰è€…ã€‚ä½œä¸ºé¢å¤–çš„é¢„é˜²æªæ–½ï¼Œæˆ‘ä»¬è¿˜ç§»é™¤äº†å†™æƒé™ã€‚
- en: 'The `chmod` code for [this permission level is 400](https://chmodcommand.com/chmod-400/):
    owner can only read (`4`), security group canâ€™t read/write/execute (`0`), and
    others canâ€™t read/write/execute (`0`). Letâ€™s therefore run this command in the
    Terminal:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '[è¿™ä¸ªæƒé™çº§åˆ«çš„ `chmod` ä»£ç æ˜¯ 400](https://chmodcommand.com/chmod-400/): æ‰€æœ‰è€…åªèƒ½è¯»å–ï¼ˆ`4`ï¼‰ï¼Œå®‰å…¨ç»„æ— æ³•è¯»å–/å†™å…¥/æ‰§è¡Œï¼ˆ`0`ï¼‰ï¼Œå…¶ä»–äººæ— æ³•è¯»å–/å†™å…¥/æ‰§è¡Œï¼ˆ`0`ï¼‰ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­è¿è¡Œè¿™ä¸ªå‘½ä»¤ï¼š'
- en: 'Now when we try to connect, we succeed:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨å½“æˆ‘ä»¬å°è¯•è¿æ¥æ—¶ï¼Œæˆ‘ä»¬æˆåŠŸäº†ï¼š
- en: Weâ€™re in! To the left of our cursor we should see something like `[ec2-user@ip-xx-xx-xx-xxx
    ~]$`, where we previously just saw `$`. Letâ€™s now run some quick commands to explore
    the instance.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿›æ¥äº†ï¼åœ¨å…‰æ ‡å·¦ä¾§ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°ç±»ä¼¼ `[ec2-user@ip-xx-xx-xx-xxx ~]$` çš„å†…å®¹ï¼Œè€Œä¹‹å‰æˆ‘ä»¬åªçœ‹åˆ° `$`ã€‚ç°åœ¨è®©æˆ‘ä»¬è¿è¡Œä¸€äº›å¿«é€Ÿå‘½ä»¤æ¥æ¢ç´¢å®ä¾‹ã€‚
- en: Python already comes installed, which is convenient! Letâ€™s download a [sample
    Python file](https://raw.githubusercontent.com/mgsosna/code_samples/master/calculate_mean.py)
    from GitHub and run some basic calculations on our EC2 instance. Weâ€™ll use `curl`
    to download the file from the URL, then pass in some arguments to `calculate_mean.py`
    to get their average value.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: Python å·²ç»å®‰è£…äº†ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼è®©æˆ‘ä»¬ä» GitHub ä¸‹è½½ä¸€ä¸ª [ç¤ºä¾‹ Python æ–‡ä»¶](https://raw.githubusercontent.com/mgsosna/code_samples/master/calculate_mean.py)ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„
    EC2 å®ä¾‹ä¸Šè¿è¡Œä¸€äº›åŸºæœ¬è®¡ç®—ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ `curl` ä» URL ä¸‹è½½æ–‡ä»¶ï¼Œç„¶åä¼ é€’ä¸€äº›å‚æ•°ç»™ `calculate_mean.py` ä»¥è·å–å…¶å¹³å‡å€¼ã€‚
- en: Letâ€™s now train a random forest classifier on some generated data. Weâ€™ll download
    `numpy`, `pandas`, and `scikit-learn`, open Python, generate the data, then create
    the model.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬åœ¨ç”Ÿæˆçš„æ•°æ®ä¸Šè®­ç»ƒä¸€ä¸ªéšæœºæ£®æ—åˆ†ç±»å™¨ã€‚æˆ‘ä»¬å°†ä¸‹è½½ `numpy`ã€`pandas` å’Œ `scikit-learn`ï¼Œæ‰“å¼€ Pythonï¼Œç”Ÿæˆæ•°æ®ï¼Œç„¶ååˆ›å»ºæ¨¡å‹ã€‚
- en: Weâ€™ll first download the necessary libraries.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†é¦–å…ˆä¸‹è½½å¿…è¦çš„åº“ã€‚
- en: We can now run Python, generate our data, train the model, and make some predictions.
    Weâ€™ll use `np.random.normal` for the features and `np.random.choice` for the labels.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å¯ä»¥è¿è¡Œ Pythonï¼Œç”Ÿæˆæ•°æ®ï¼Œè®­ç»ƒæ¨¡å‹ï¼Œå¹¶åšå‡ºä¸€äº›é¢„æµ‹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ `np.random.normal` ç”Ÿæˆç‰¹å¾ï¼Œç”¨ `np.random.choice`
    ç”Ÿæˆæ ‡ç­¾ã€‚
- en: Ta da! Youâ€™ve (technically) trained a machine learning model in the cloud. Since
    weâ€™ve hit the pinnacle of EC2 use cases (ğŸ˜œ), letâ€™s sever our SSH connection and
    terminate our instance.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: å‘µå‘µï¼ä½ ï¼ˆä»æŠ€æœ¯ä¸Šè®²ï¼‰åœ¨äº‘ç«¯è®­ç»ƒäº†ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚æ—¢ç„¶æˆ‘ä»¬å·²ç»è¾¾åˆ°äº† EC2 ç”¨ä¾‹çš„**å·…å³°**ï¼ˆğŸ˜œï¼‰ï¼Œè®©æˆ‘ä»¬æ–­å¼€ SSH è¿æ¥å¹¶ç»ˆæ­¢æˆ‘ä»¬çš„å®ä¾‹ã€‚
- en: Now on our Instance page on the EC2 page, we can click on `Instance state` >
    `Terminate instance`. Note that weâ€™ll lose our Python libraries and the `calculate_mean.py`
    file, since the instanceâ€™s data will be wiped as itâ€™s made available for someone
    else to use. If we want to hold onto the instance a little longer, we can click
    `Stop instance` instead.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨åœ¨æˆ‘ä»¬çš„ EC2 å®ä¾‹é¡µé¢ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡» `Instance state` > `Terminate instance`ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬å°†ä¸¢å¤±æˆ‘ä»¬çš„
    Python åº“å’Œ `calculate_mean.py` æ–‡ä»¶ï¼Œå› ä¸ºå®ä¾‹çš„æ•°æ®å°†è¢«æ¸…é™¤ï¼Œä»¥ä¾¿å…¶ä»–äººä½¿ç”¨ã€‚å¦‚æœæˆ‘ä»¬æƒ³å¤šä¿ç•™ä¸€ä¼šå„¿å®ä¾‹ï¼Œå¯ä»¥ç‚¹å‡» `Stop
    instance`ã€‚
- en: '![](../Images/a43a9b752dfb8c056421cbec446094cb.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a43a9b752dfb8c056421cbec446094cb.png)'
- en: Photo by [Ivan Diaz](https://unsplash.com/@ivvndiaz?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Ivan Diaz](https://unsplash.com/@ivvndiaz?utm_source=medium&utm_medium=referral)
    åœ¨ [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral) æä¾›ã€‚
- en: Beyond the basics
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åŸºç¡€ä¹‹å¤–
- en: So we just created an EC2 instance, downloaded files from the internet, and
    ran some Python code. While this is awesome, we havenâ€™t experienced anything that
    we couldnâ€™t run on our own laptop, which is likely more powerful than a `t2.micro`
    server. **So what value are we really getting from EC2?**
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥æˆ‘ä»¬åˆšåˆšåˆ›å»ºäº†ä¸€ä¸ª EC2 å®ä¾‹ï¼Œä»äº’è”ç½‘ä¸Šä¸‹è½½äº†æ–‡ä»¶ï¼Œå¹¶è¿è¡Œäº†ä¸€äº› Python ä»£ç ã€‚è™½ç„¶è¿™å¾ˆæ£’ï¼Œä½†æˆ‘ä»¬è¿˜æ²¡æœ‰ä½“éªŒåˆ°ä»»ä½•æ— æ³•åœ¨è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿è¡Œçš„ä¸œè¥¿ï¼Œè€Œ
    `t2.micro` æœåŠ¡å™¨å¯èƒ½ä¸å¦‚æˆ‘ä»¬çš„ç¬”è®°æœ¬ç”µè„‘å¼ºå¤§ã€‚ **é‚£æˆ‘ä»¬ä» EC2 è·å¾—äº†ä»€ä¹ˆçœŸæ­£çš„ä»·å€¼ï¼Ÿ**
- en: The first thing to note is that **there are a wide range of EC2 options beyond
    the Free Tier.** If we wanted to run simulations for a research paper, we could
    simply select an EC2 instance with more CPU or GPU than our laptop. This would
    get the job done more quickly, especially if we donâ€™t have a decent computer or
    canâ€™t dedicate all of its resources to the simulations. (It would also prevent
    damaging your own laptop, which I accidentally did in college with a horribly
    inefficient R script!)
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**é™¤äº†å…è´¹å¥—é¤ä¹‹å¤–ï¼ŒEC2 é€‰é¡¹æœ‰å¾ˆå¤šç§ã€‚** å¦‚æœæˆ‘ä»¬æƒ³ä¸ºç ”ç©¶è®ºæ–‡è¿è¡Œæ¨¡æ‹Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°é€‰æ‹©ä¸€ä¸ªæ¯”æˆ‘ä»¬ç¬”è®°æœ¬ç”µè„‘æ‹¥æœ‰æ›´å¤š CPU
    æˆ– GPU çš„ EC2 å®ä¾‹ã€‚è¿™å°†æ›´å¿«å®Œæˆä»»åŠ¡ï¼Œç‰¹åˆ«æ˜¯å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¸€å°ä¸é”™çš„è®¡ç®—æœºæˆ–ä¸èƒ½å°†å…¶æ‰€æœ‰èµ„æºéƒ½ç”¨äºæ¨¡æ‹Ÿçš„è¯ã€‚ï¼ˆè¿™ä¹Ÿå¯ä»¥é˜²æ­¢æŸåä½ è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè¿™ä¸€ç‚¹æˆ‘åœ¨å¤§å­¦é‡Œç”¨ä¸€ä¸ªéå¸¸ä½æ•ˆçš„
    R è„šæœ¬æ—¶ä¸å°å¿ƒåšåˆ°äº†ï¼ï¼‰
- en: But more importantly, we need to remember that **EC2 instances are just *building
    blocks*.** For our research simulations, it may be more efficient to rent two
    or three instances and parallelize the calculations. If weâ€™re using an EC2 instance
    to host a Flask API for our website, when traffic grows we can simply duplicate
    the instance and add a load balancer to distribute traffic. Better yet, [we can
    automatically scale](https://aws.amazon.com/ec2/autoscaling/) the number of instances
    up and down to meet demand, letting us focus more on our actual application. Q4,
    while still a demanding time for retailers, has become so much more manageable
    with cloud computing.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½ï¼Œ**EC2 å®ä¾‹åªæ˜¯*æ„å»ºå—*ã€‚** å¯¹äºæˆ‘ä»¬çš„ç ”ç©¶æ¨¡æ‹Ÿï¼Œç§Ÿç”¨ä¸¤ä¸ªæˆ–ä¸‰ä¸ªå®ä¾‹å¹¶è¿›è¡Œå¹¶è¡Œè®¡ç®—å¯èƒ½æ›´é«˜æ•ˆã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ EC2 å®ä¾‹æ¥æ‰˜ç®¡æˆ‘ä»¬ç½‘ç«™çš„
    Flask APIï¼Œå½“æµé‡å¢é•¿æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å¤åˆ¶å®ä¾‹å¹¶æ·»åŠ è´Ÿè½½å‡è¡¡å™¨æ¥åˆ†é…æµé‡ã€‚æ›´å¥½çš„æ˜¯ï¼Œ[æˆ‘ä»¬å¯ä»¥è‡ªåŠ¨è°ƒæ•´](https://aws.amazon.com/ec2/autoscaling/)
    å®ä¾‹çš„æ•°é‡ä»¥æ»¡è¶³éœ€æ±‚ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å¤šåœ°ä¸“æ³¨äºå®é™…åº”ç”¨ã€‚å°½ç®¡ Q4 å¯¹é›¶å”®å•†æ¥è¯´ä»æ˜¯ä¸€ä¸ªç´§å¼ æ—¶æœŸï¼Œä½†å€ŸåŠ©äº‘è®¡ç®—ï¼Œå®ƒå·²ç»å˜å¾—æ›´åŠ å¯ç®¡ç†ã€‚
- en: All this abstraction is a tremendous step forward from the internet of the early
    2000â€™s. And yetâ€¦ sometimes even a virtual server isnâ€™t flexible or scalable enough
    for our use case. In that case, we may want a â€œserver-lessâ€ option like **Amazon
    Lambda.**
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€æœ‰è¿™äº›æŠ½è±¡åŒ–ç›¸è¾ƒäº 2000 å¹´ä»£åˆæœŸçš„äº’è”ç½‘æ˜¯ä¸€ä¸ªå·¨å¤§çš„è¿›æ­¥ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å³ä½¿æ˜¯è™šæ‹ŸæœåŠ¡å™¨ä¹Ÿå¯èƒ½ä¸å¤Ÿçµæ´»æˆ–å¯æ‰©å±•ä»¥æ»¡è¶³æˆ‘ä»¬çš„ç”¨ä¾‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åƒ**Amazon
    Lambda**è¿™æ ·çš„â€œæ— æœåŠ¡å™¨â€é€‰é¡¹ã€‚
- en: '![](../Images/41eb304519c31ce50d517da6fc85edd7.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/41eb304519c31ce50d517da6fc85edd7.png)'
- en: Screenshot by author
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: Lambda
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Lambda
- en: When is EC2 not the right choice?
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä»€ä¹ˆæ—¶å€™ EC2 ä¸æ˜¯æ­£ç¡®çš„é€‰æ‹©ï¼Ÿ
- en: With EC2, weâ€™re given an entire virtual server. AWS gives us incredible flexibility
    in defining what this server will look like, letting us tinker with every hardware
    and software detail imaginable. This postâ€™s EC2 setup section for a simple demo,
    for example, was dozens of lines long!
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ EC2ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„è™šæ‹ŸæœåŠ¡å™¨ã€‚AWS åœ¨å®šä¹‰è¿™ä¸ªæœåŠ¡å™¨çš„å¤–è§‚æ–¹é¢ç»™äº†æˆ‘ä»¬æƒŠäººçš„çµæ´»æ€§ï¼Œè®©æˆ‘ä»¬å¯ä»¥è°ƒæ•´æ¯ä¸€ä¸ªç¡¬ä»¶å’Œè½¯ä»¶ç»†èŠ‚ã€‚æ¯”å¦‚ï¼Œæœ¬å¸–çš„
    EC2 è®¾ç½®éƒ¨åˆ†çš„ç®€å•æ¼”ç¤ºå°±æœ‰å‡ åè¡Œï¼
- en: This flexibility means we can find some combination of EC2 instances that will
    meet essentially any task we can imagine. **But this puts the responsibility on
    *us* to make sure weâ€™re configuring our instances properly.** This configuration
    may be straightforward if weâ€™re performing a single task like training a machine
    learning model. But optimizing our resource usage becomes much more challenging
    when weâ€™re juggling multiple instances, *especially if we have multiple instance
    types*. If our app is clunky, should we add more instances to host our database,
    fetch data from the database, or display it on the frontend? And how does this
    change as traffic to our app changes?
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§çµæ´»æ€§æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€äº› EC2 å®ä¾‹çš„ç»„åˆï¼Œä»¥æ»¡è¶³æˆ‘ä»¬å¯ä»¥æƒ³è±¡çš„ä»»ä½•ä»»åŠ¡ã€‚**ä½†è¿™å°±å°†è´£ä»»è½åœ¨*æˆ‘ä»¬*èº«ä¸Šï¼Œä»¥ç¡®ä¿æˆ‘ä»¬æ­£ç¡®é…ç½®å®ä¾‹ã€‚** å¦‚æœæˆ‘ä»¬åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œæ¯”å¦‚è®­ç»ƒä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè¿™ç§é…ç½®å¯èƒ½å¾ˆç®€å•ã€‚ä½†å½“æˆ‘ä»¬åŒæ—¶å¤„ç†å¤šä¸ªå®ä¾‹æ—¶ï¼Œä¼˜åŒ–èµ„æºä½¿ç”¨å°±å˜å¾—æ›´åŠ å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œ*å°¤å…¶æ˜¯å½“æˆ‘ä»¬æœ‰å¤šç§å®ä¾‹ç±»å‹æ—¶*ã€‚å¦‚æœæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè¿è¡Œä¸ç•…ï¼Œæˆ‘ä»¬æ˜¯åº”è¯¥å¢åŠ æ›´å¤šå®ä¾‹æ¥æ‰˜ç®¡æ•°æ®åº“ã€ä»æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œè¿˜æ˜¯åœ¨å‰ç«¯å±•ç¤ºæ•°æ®ï¼Ÿéšç€æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„æµé‡å˜åŒ–ï¼Œè¿™ç§æƒ…å†µä¼šå¦‚ä½•å˜åŒ–ï¼Ÿ
- en: Another issue is that **our instance is only accessible while itâ€™s running.**
    Just like how our laptop wonâ€™t respond to inputs while itâ€™s sleeping or turned
    off, we canâ€™t use our EC2 instance unless itâ€™s running â€” ***and charging us for
    its usage.*** This is fine if weâ€™re constantly sending requests to our instance.
    But if we expect to use our instance sporadically, then it can be expensive and
    inefficient to keep the instance running while weâ€™re not using it.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œ**æˆ‘ä»¬çš„å®ä¾‹åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½è®¿é—®ã€‚** å°±åƒæˆ‘ä»¬çš„ç¬”è®°æœ¬ç”µè„‘åœ¨ç¡çœ æˆ–å…³é—­æ—¶ä¸ä¼šå“åº”è¾“å…¥ä¸€æ ·ï¼Œé™¤é EC2 å®ä¾‹æ­£åœ¨è¿è¡Œ â€” ***è€Œä¸”ä¼šå¯¹å…¶ä½¿ç”¨æ”¶è´¹ã€‚***
    å¦‚æœæˆ‘ä»¬ä¸æ–­å‘å®ä¾‹å‘é€è¯·æ±‚ï¼Œè¿™æ²¡é—®é¢˜ã€‚ä½†å¦‚æœæˆ‘ä»¬é¢„è®¡ä¼šå¶å°”ä½¿ç”¨å®ä¾‹ï¼Œé‚£ä¹ˆåœ¨æˆ‘ä»¬ä¸ä½¿ç”¨å®ƒæ—¶ä¿æŒå®ä¾‹è¿è¡Œå¯èƒ½ä¼šå¾ˆæ˜‚è´µä¸”æ•ˆç‡ä½ä¸‹ã€‚
- en: What is Lambda?
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä»€ä¹ˆæ˜¯ Lambdaï¼Ÿ
- en: In 2014, Amazon released [**Lambda**](https://aws.amazon.com/lambda/), pushing
    the abstraction of the cloud to a new level with ***server-less* computing**.
    In contrast to EC2, weâ€™re given *zero* information about the machine(s) running
    our code. Our [only tunable parameter](https://aws.amazon.com/lambda/pricing/)
    is the amount of memory our code is allowed to use.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ 2014 å¹´ï¼Œäºšé©¬é€Šå‘å¸ƒäº†[**Lambda**](https://aws.amazon.com/lambda/)ï¼Œå°†äº‘è®¡ç®—çš„æŠ½è±¡æ¨å‘äº†ä¸€ä¸ªæ–°æ°´å¹³ï¼Œæä¾›äº†***æ— æœåŠ¡å™¨è®¡ç®—*æœåŠ¡**ã€‚ä¸
    EC2 ç›¸æ¯”ï¼Œæˆ‘ä»¬å¯¹è¿è¡Œä»£ç çš„æœºå™¨æ²¡æœ‰*ä»»ä½•*ä¿¡æ¯ã€‚æˆ‘ä»¬çš„[å”¯ä¸€å¯è°ƒå‚æ•°](https://aws.amazon.com/lambda/pricing/)æ˜¯ä»£ç å…è®¸ä½¿ç”¨çš„å†…å­˜é‡ã€‚
- en: Lambda executes code in response to *events* and automatically manages the underlying
    compute resources. If our code isnâ€™t actively running on a machine, weâ€™re not
    paying for anything. This is ideal for one-off actions like [writing user actions
    to a database](https://docs.aws.amazon.com/lambda/latest/dg/services-apigateway-tutorial.html)
    or [generating predictions from an ML model](https://aws.amazon.com/blogs/compute/pay-as-you-go-machine-learning-inference-with-aws-lambda/),
    but we can even build a [microservice-based web app](https://aws.amazon.com/getting-started/hands-on/build-serverless-web-app-lambda-apigateway-s3-dynamodb-cognito/)
    or [real-time streaming data processor](https://aws.amazon.com/blogs/compute/building-serverless-applications-with-streaming-data-part-1/).
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: Lambda å“åº”*äº‹ä»¶*æ‰§è¡Œä»£ç ï¼Œå¹¶è‡ªåŠ¨ç®¡ç†åº•å±‚è®¡ç®—èµ„æºã€‚å¦‚æœæˆ‘ä»¬çš„ä»£ç æ²¡æœ‰åœ¨æœºå™¨ä¸Šä¸»åŠ¨è¿è¡Œï¼Œæˆ‘ä»¬ä¸ä¼šæ”¯ä»˜ä»»ä½•è´¹ç”¨ã€‚è¿™éå¸¸é€‚åˆåƒ[å°†ç”¨æˆ·æ“ä½œå†™å…¥æ•°æ®åº“](https://docs.aws.amazon.com/lambda/latest/dg/services-apigateway-tutorial.html)æˆ–[ä»
    ML æ¨¡å‹ç”Ÿæˆé¢„æµ‹](https://aws.amazon.com/blogs/compute/pay-as-you-go-machine-learning-inference-with-aws-lambda/)è¿™æ ·çš„å•æ¬¡æ“ä½œï¼Œä½†æˆ‘ä»¬ç”šè‡³å¯ä»¥æ„å»ºä¸€ä¸ª[åŸºäºå¾®æœåŠ¡çš„
    Web åº”ç”¨](https://aws.amazon.com/getting-started/hands-on/build-serverless-web-app-lambda-apigateway-s3-dynamodb-cognito/)æˆ–[å®æ—¶æµæ•°æ®å¤„ç†å™¨](https://aws.amazon.com/blogs/compute/building-serverless-applications-with-streaming-data-part-1/)ã€‚
- en: Our workflow in Lambda will involve setting up ***functions*** that we then
    *trigger* from other services. No need to stress about configuring hardware, ensuring
    its security patches are up to date, and efficiently utilizing our resources.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬åœ¨ Lambda ä¸­çš„å·¥ä½œæµç¨‹å°†æ¶‰åŠè®¾ç½®***å‡½æ•°***ï¼Œç„¶åä»å…¶ä»–æœåŠ¡ä¸­*è§¦å‘*è¿™äº›å‡½æ•°ã€‚ä¸éœ€è¦æ‹…å¿ƒé…ç½®ç¡¬ä»¶ã€ç¡®ä¿å…¶å®‰å…¨è¡¥ä¸æ˜¯æœ€æ–°çš„ï¼Œå¹¶æœ‰æ•ˆåˆ©ç”¨èµ„æºã€‚
- en: The one major downside is that **because we donâ€™t have a dedicated virtual server
    waiting for requests, there is a brief delay when we first begin triggering our
    functions**, as Lambda needs to find and reserve the necessary resources for us.
    Scattering our application across many Lambda functions, as opposed to one monolithic
    EC2 instance, can also **significantly increase the complexity of our app** as
    it grows. But these are often small prices to pay for the convenience of having
    the hardware completely abstracted away from us.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: å”¯ä¸€çš„ä¸»è¦ç¼ºç‚¹æ˜¯**å› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¸“ç”¨çš„è™šæ‹ŸæœåŠ¡å™¨æ¥ç­‰å¾…è¯·æ±‚ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸€æ¬¡è§¦å‘å‡½æ•°æ—¶ä¼šæœ‰çŸ­æš‚çš„å»¶è¿Ÿ**ï¼Œå› ä¸º Lambda éœ€è¦æ‰¾åˆ°å¹¶é¢„ç•™æ‰€éœ€çš„èµ„æºã€‚å°†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåˆ†æ•£åˆ°å¤šä¸ª
    Lambda å‡½æ•°ä¸­ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå·¨å¤§çš„ EC2 å®ä¾‹ï¼Œä¹Ÿå¯èƒ½**æ˜¾è‘—å¢åŠ åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§**ã€‚ä½†è¿™äº›é€šå¸¸æ˜¯ä¸ºäº†å®Œå…¨æŠ½è±¡åŒ–ç¡¬ä»¶æ‰€éœ€æ”¯ä»˜çš„å°ä»£ä»·ã€‚
- en: '![](../Images/1b3fa5d106fd7f7db09ca4d12f7b570d.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1b3fa5d106fd7f7db09ca4d12f7b570d.png)'
- en: Photo by [Michael Dziedzic](https://unsplash.com/es/@lazycreekimages?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[Michael Dziedzic](https://unsplash.com/es/@lazycreekimages?utm_source=medium&utm_medium=referral)æ‹æ‘„ï¼Œæ¥æºäº[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Creating a function
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªå‡½æ•°
- en: Letâ€™s explore Lambda by setting up a function that returns the mean of a set
    of numbers. In the AWS Console, we start by navigating to the Lambda homepage.
    We then click the big orange `Create function` button. Weâ€™ll stick with the â€œAuthor
    from scratchâ€ option, then give our function a name (`calculate_mean`) and select
    the Python 3.9 runtime. Then we scroll down and click `Create function`.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬é€šè¿‡è®¾ç½®ä¸€ä¸ªè¿”å›ä¸€ç»„æ•°å­—å¹³å‡å€¼çš„å‡½æ•°æ¥æ¢ç´¢ Lambdaã€‚åœ¨ AWS æ§åˆ¶å°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼èˆªåˆ° Lambda é¦–é¡µã€‚ç„¶åç‚¹å‡»å¤§æ©™è‰²çš„ `Create
    function` æŒ‰é’®ã€‚æˆ‘ä»¬å°†é€‰æ‹©â€œä»å¤´å¼€å§‹åˆ›å»ºâ€é€‰é¡¹ï¼Œç„¶åç»™æˆ‘ä»¬çš„å‡½æ•°èµ·ä¸ªåå­—ï¼ˆ`calculate_mean`ï¼‰å¹¶é€‰æ‹© Python 3.9 è¿è¡Œæ—¶ã€‚æ¥ç€æˆ‘ä»¬å‘ä¸‹æ»šåŠ¨å¹¶ç‚¹å‡»
    `Create function`ã€‚
- en: '![](../Images/6edc0d09913b87a8aa2f2ccd889be463.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6edc0d09913b87a8aa2f2ccd889be463.png)'
- en: Screenshot by author
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå±
- en: 'Weâ€™re then taken to the Lambda function page. Scrolling down to the `Code`
    tab, we see a basic template provided for our function:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éšåè¢«å¸¦åˆ°äº† Lambda å‡½æ•°é¡µé¢ã€‚å‘ä¸‹æ»šåŠ¨åˆ° `Code` æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸ºæˆ‘ä»¬çš„å‡½æ•°æä¾›çš„åŸºæœ¬æ¨¡æ¿ï¼š
- en: And in the `Test` tab, we see a simple JSON input we can use to test our function.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ `Test` æ ‡ç­¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç®€å•çš„ JSON è¾“å…¥ï¼Œä¾›æˆ‘ä»¬æµ‹è¯•å‡½æ•°ä½¿ç”¨ã€‚
- en: Weâ€™ll want to change both of these for our `calculate_mean` function. Letâ€™s
    start by changing the test input to an array of numbers like below. Give your
    test a name (e.g., `my_array`) and hit `Save`. You should see a green banner at
    the top that says, *â€œThe test event* ***my_array*** *was successfully saved.â€*
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„ `calculate_mean` å‡½æ•°æ›´æ”¹è¿™ä¸¤ä¸ªå†…å®¹ã€‚é¦–å…ˆæ›´æ”¹æµ‹è¯•è¾“å…¥ä¸ºä¸‹é¢çš„æ•°å­—æ•°ç»„ã€‚ç»™ä½ çš„æµ‹è¯•å‘½åï¼ˆä¾‹å¦‚ `my_array`ï¼‰ï¼Œç„¶åç‚¹å‡»
    `ä¿å­˜`ã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°é¡¶éƒ¨çš„ç»¿è‰²æ¨ªå¹…ï¼Œä¸Šé¢å†™ç€ *â€œæµ‹è¯•äº‹ä»¶* ***my_array*** *å·²æˆåŠŸä¿å­˜ã€‚â€*
- en: Now letâ€™s go back to the Lambda function and change it to the code below. Specifically,
    we remove the `json` import, extract the `nums` field from `event`, and change
    the return `body` field to calculate the mean. In a production setting, weâ€™d want
    to add error handling for empty arrays, arrays with non-numbers, etc., but this
    is fine for now. [3]
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬å›åˆ° Lambda å‡½æ•°ï¼Œå¹¶å°†å…¶æ›´æ”¹ä¸ºä¸‹é¢çš„ä»£ç ã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å»æ‰ `json` å¯¼å…¥ï¼Œä» `event` ä¸­æå– `nums` å­—æ®µï¼Œå¹¶å°†è¿”å›çš„
    `body` å­—æ®µæ›´æ”¹ä¸ºè®¡ç®—å‡å€¼ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ å¯¹ç©ºæ•°ç»„ã€éæ•°å­—æ•°ç»„ç­‰çš„é”™è¯¯å¤„ç†ï¼Œä½†ç°åœ¨è¿™æ ·å°±è¶³å¤Ÿäº†ã€‚[3]
- en: Save your function (âŒ˜ + `s`, or `File` > `Save`), then click `Deploy`. You should
    see a green banner that says, *â€œSuccessfully updated the function* ***calculate_mean****.â€*
    Now hit `Test`, which should generate some logs like below. The import thing is
    that the response `body` field should be the mean of the array of numbers in your
    test file (for us 3, the mean 1 to 5).
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: ä¿å­˜ä½ çš„å‡½æ•°ï¼ˆâŒ˜ + `s`ï¼Œæˆ– `æ–‡ä»¶` > `ä¿å­˜`ï¼‰ï¼Œç„¶åç‚¹å‡» `éƒ¨ç½²`ã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°ä¸€æ¡ç»¿è‰²æ¨ªå¹…ï¼Œä¸Šé¢å†™ç€ *â€œæˆåŠŸæ›´æ–°äº†å‡½æ•°* ***calculate_mean****ã€‚â€*
    ç°åœ¨ç‚¹å‡» `æµ‹è¯•`ï¼Œåº”è¯¥ä¼šç”Ÿæˆä¸€äº›æ—¥å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚é‡è¦çš„æ˜¯å“åº”çš„ `body` å­—æ®µåº”è¯¥æ˜¯ä½ æµ‹è¯•æ–‡ä»¶ä¸­æ•°å­—æ•°ç»„çš„å‡å€¼ï¼ˆä¾‹å¦‚æˆ‘ä»¬çš„æ˜¯ 3ï¼Œå‡å€¼ä¸º 1 åˆ° 5ï¼‰ã€‚
- en: '![](../Images/46a1f470353736fca114b88dc988aac1.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/46a1f470353736fca114b88dc988aac1.png)'
- en: Screenshot by author
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: Letâ€™s try this now from the **AWS CLI**. (If you havenâ€™t downloaded the CLI,
    you can follow [these steps](https://medium.com/towards-data-science/aws-essentials-for-data-science-why-cloud-computing-141cc6cee284).)
    Open a Terminal window, create an input JSON file, and send the file to your Lambda
    function. Lambda will return the response as a file, `output.json` here, which
    we can then view.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬ä» **AWS CLI** å°è¯•ä¸€ä¸‹ã€‚ï¼ˆå¦‚æœä½ è¿˜æ²¡æœ‰ä¸‹è½½ CLIï¼Œå¯ä»¥å‚è€ƒ [è¿™äº›æ­¥éª¤](https://medium.com/towards-data-science/aws-essentials-for-data-science-why-cloud-computing-141cc6cee284)ã€‚ï¼‰æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œåˆ›å»ºä¸€ä¸ªè¾“å…¥
    JSON æ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶å‘é€åˆ°ä½ çš„ Lambda å‡½æ•°ã€‚Lambda ä¼šå°†å“åº”è¿”å›ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™é‡Œæ˜¯ `output.json`ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ã€‚
- en: '![](../Images/51a6712981e175dc0d601dd8dae619f1.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/51a6712981e175dc0d601dd8dae619f1.png)'
- en: Photo by [Sergei Wing](https://unsplash.com/@sergeiwing?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Sergei Wing](https://unsplash.com/@sergeiwing?utm_source=medium&utm_medium=referral)
    æä¾›ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Triggering via API Gateway
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é€šè¿‡ API Gateway è§¦å‘
- en: Congrats, we have a Lambda function! But we can only really interact with this
    function in the Lambda console and on our personal computer. What we really want
    is **to be able to trigger this function from anywhere.** So back in the browser,
    letâ€™s scroll to the top of the `calculate_mean` function page, where we can see
    the triggers (and destinations) for our function.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: æ­å–œï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ª Lambda å‡½æ•°ï¼ä½†æˆ‘ä»¬åªèƒ½åœ¨ Lambda æ§åˆ¶å°å’Œä¸ªäººè®¡ç®—æœºä¸ŠçœŸæ­£ä¸è¿™ä¸ªå‡½æ•°äº¤äº’ã€‚æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„æ˜¯ **èƒ½å¤Ÿä»ä»»ä½•åœ°æ–¹è§¦å‘è¿™ä¸ªå‡½æ•°**ã€‚æ‰€ä»¥å›åˆ°æµè§ˆå™¨ï¼Œè®©æˆ‘ä»¬æ»šåŠ¨åˆ°
    `calculate_mean` å‡½æ•°é¡µé¢çš„é¡¶éƒ¨ï¼Œåœ¨é‚£é‡Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å‡½æ•°çš„è§¦å‘å™¨ï¼ˆå’Œç›®æ ‡ï¼‰ã€‚
- en: '![](../Images/4e12f7d7d4b3887e11c44db5065aa71c.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4e12f7d7d4b3887e11c44db5065aa71c.png)'
- en: Screenshot by author
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: When we click `Add trigger`, weâ€™re taken to a drop-down menu with an astonishing
    number of services, from [Alexa](https://aws.amazon.com/alexaforbusiness/), [AWS
    IoT](https://aws.amazon.com/iot/), and [DynamoDB](https://aws.amazon.com/dynamodb/),
    to non-AWS services like [Auth0](https://auth0.com/), [Datadog](https://www.datadoghq.com/),
    and [Shopify](https://www.shopify.com/). We could have Auth0 trigger a Lambda
    function that writes to a database whenever a user logs in, for example, or [Amazon
    SNS](https://aws.amazon.com/sns/) send us a notification any time a new file is
    uploaded to one of our S3 buckets.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æˆ‘ä»¬ç‚¹å‡» `æ·»åŠ è§¦å‘å™¨` æ—¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªä¸‹æ‹‰èœå•ï¼Œå…¶ä¸­åŒ…å«å¤§é‡æœåŠ¡ï¼Œä» [Alexa](https://aws.amazon.com/alexaforbusiness/)ã€[AWS
    IoT](https://aws.amazon.com/iot/)ã€[DynamoDB](https://aws.amazon.com/dynamodb/)ï¼Œåˆ°é
    AWS æœåŠ¡å¦‚ [Auth0](https://auth0.com/)ã€[Datadog](https://www.datadoghq.com/)ã€[Shopify](https://www.shopify.com/)ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è®©
    Auth0 è§¦å‘ä¸€ä¸ª Lambda å‡½æ•°ï¼Œåœ¨ç”¨æˆ·ç™»å½•æ—¶å†™å…¥æ•°æ®åº“ï¼Œæˆ–è€… [Amazon SNS](https://aws.amazon.com/sns/)
    åœ¨æ¯æ¬¡æ–°æ–‡ä»¶ä¸Šä¼ åˆ°æˆ‘ä»¬çš„ S3 æ¡¶æ—¶å‘é€é€šçŸ¥ã€‚
- en: Letâ€™s choose [**API Gateway**](https://aws.amazon.com/api-gateway/) to create
    an HTTP endpoint for our function. This will let us invoke our Lambda function
    from any code that can send an HTTP request. Weâ€™ll select `Create a new API`,
    `HTTP API` for API type, and `Open` for Security. Then click `Add`.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬é€‰æ‹© [**API Gateway**](https://aws.amazon.com/api-gateway/) ä¸ºæˆ‘ä»¬çš„å‡½æ•°åˆ›å»ºä¸€ä¸ª HTTP
    ç«¯ç‚¹ã€‚è¿™å°†å…è®¸æˆ‘ä»¬ä»ä»»ä½•å¯ä»¥å‘é€ HTTP è¯·æ±‚çš„ä»£ç ä¸­è°ƒç”¨æˆ‘ä»¬çš„ Lambda å‡½æ•°ã€‚æˆ‘ä»¬å°†é€‰æ‹© `åˆ›å»ºä¸€ä¸ªæ–°çš„ API`ï¼Œé€‰æ‹© `HTTP API` ä½œä¸º
    API ç±»å‹ï¼Œç„¶åé€‰æ‹© `å¼€æ”¾` ä½œä¸ºå®‰å…¨æ€§è®¾ç½®ã€‚ç„¶åç‚¹å‡» `æ·»åŠ `ã€‚
- en: '![](../Images/a99412c28775e78ff1233b680e877cd1.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a99412c28775e78ff1233b680e877cd1.png)'
- en: Screenshot by author
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: We should now see API Gateway as a trigger for our `calculate_mean` function.
    The endpoint should look something like `[https://xx.execute-api.us-east-1.amazonaws.com/default/calculate_mean](https://xx.execute-api.us-east-1.amazonaws.com/default/calculate_mean.)`[.](https://xx.execute-api.us-east-1.amazonaws.com/default/calculate_mean.)
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨åº”è¯¥çœ‹åˆ° API Gateway ä½œä¸ºæˆ‘ä»¬ `calculate_mean` å‡½æ•°çš„è§¦å‘å™¨ã€‚ç«¯ç‚¹åº”è¯¥ç±»ä¼¼äº `[https://xx.execute-api.us-east-1.amazonaws.com/default/calculate_mean](https://xx.execute-api.us-east-1.amazonaws.com/default/calculate_mean.)`[.](https://xx.execute-api.us-east-1.amazonaws.com/default/calculate_mean.)
- en: If we click on the link, weâ€™re taken to a page that just says â€œInternal Server
    Error.â€ This is because our Lambda function is configured to expect a JSON with
    the field `nums`, but our browserâ€™s HTTP request doesnâ€™t have this field. An easy
    way to pass in this field is as a [**query string parameter**](https://www.positly.com/support/query-string-parameters/),
    where *the URL itself* has `nums` and the array of values. So instead of `/default/calculate_mean`,
    we would have something like `/default/calculate_mean?nums=1,2,3`.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬ç‚¹å‡»é“¾æ¥ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªåªæ˜¾ç¤ºâ€œå†…éƒ¨æœåŠ¡å™¨é”™è¯¯â€çš„é¡µé¢ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„ Lambda å‡½æ•°é…ç½®ä¸ºæœŸæœ›ä¸€ä¸ªåŒ…å« `nums` å­—æ®µçš„ JSONï¼Œä½†æˆ‘ä»¬æµè§ˆå™¨çš„
    HTTP è¯·æ±‚æ²¡æœ‰è¿™ä¸ªå­—æ®µã€‚ä¼ é€’æ­¤å­—æ®µçš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯ä½œä¸º [**æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°**](https://www.positly.com/support/query-string-parameters/)ï¼Œå…¶ä¸­
    *URL æœ¬èº«* åŒ…å« `nums` å’Œæ•°å€¼æ•°ç»„ã€‚å› æ­¤ï¼Œåº”è¯¥æ˜¯ `/default/calculate_mean?nums=1,2,3`ï¼Œè€Œä¸æ˜¯ `/default/calculate_mean`ã€‚
- en: So letâ€™s modify our Lambda function to accept URL parameters. Weâ€™ll add a try-except
    block, where we first try pulling the `nums` param from the query string (`event['queryStringParameters']`).
    We convert the string to a list of strings, then cast each number to float. If
    the user passes in a JSON (as we did previously), we just pull the `nums` array
    from the `event` object.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥è®©æˆ‘ä»¬ä¿®æ”¹æˆ‘ä»¬çš„ Lambda å‡½æ•°ä»¥æ¥å— URL å‚æ•°ã€‚æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ª try-except å—ï¼Œå…¶ä¸­æˆ‘ä»¬é¦–å…ˆå°è¯•ä»æŸ¥è¯¢å­—ç¬¦ä¸² (`event['queryStringParameters']`)
    ä¸­æå– `nums` å‚æ•°ã€‚æˆ‘ä»¬å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œç„¶åå°†æ¯ä¸ªæ•°å­—è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚å¦‚æœç”¨æˆ·ä¼ é€’ JSONï¼ˆå¦‚æˆ‘ä»¬ä¹‹å‰æ‰€åšï¼‰ï¼Œæˆ‘ä»¬åªéœ€ä» `event`
    å¯¹è±¡ä¸­æå– `nums` æ•°ç»„ã€‚
- en: Donâ€™t forget to save the function and deploy it. Wait a few seconds, then copy
    your API endpoint into the URL address of a new tab on your browser. Add `?nums=1,2,3`
    to the end of the URL and hit enter.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸è¦å¿˜è®°ä¿å­˜å‡½æ•°å¹¶éƒ¨ç½²å®ƒã€‚ç­‰å¾…å‡ ç§’é’Ÿï¼Œç„¶åå°†ä½ çš„ API ç«¯ç‚¹å¤åˆ¶åˆ°æµè§ˆå™¨æ–°æ ‡ç­¾é¡µçš„ URL åœ°å€æ ä¸­ã€‚å°† `?nums=1,2,3` æ·»åŠ åˆ° URL
    æœ«å°¾ï¼Œç„¶åæŒ‰å›è½¦é”®ã€‚
- en: '![](../Images/17a73d405aedb1952cbc1ec1159f2700.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/17a73d405aedb1952cbc1ec1159f2700.png)'
- en: Screenshot by author
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æˆªå›¾
- en: 'Awesome! Letâ€™s try one last thing. Open a Python window on your local machine
    (or your EC2, if youâ€™re feeling fancy) and run the following:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: å¤ªæ£’äº†ï¼è®©æˆ‘ä»¬å†å°è¯•æœ€åä¸€ä»¶äº‹ã€‚åœ¨æœ¬åœ°æœºå™¨ï¼ˆæˆ–ä½ çš„ EC2ï¼Œå¦‚æœä½ æƒ³è¦ç‚«è€€çš„è¯ï¼‰ä¸Šæ‰“å¼€ä¸€ä¸ª Python çª—å£ï¼Œå¹¶è¿è¡Œä»¥ä¸‹ä»£ç ï¼š
- en: We see that we can even pass in floats via the URL string to our function, and
    that weâ€™re able to access it from anywhere. Congrats! ğŸ‰
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬ç”šè‡³å¯ä»¥é€šè¿‡ URL å­—ç¬¦ä¸²ä¼ é€’æµ®ç‚¹æ•°åˆ°æˆ‘ä»¬çš„å‡½æ•°ï¼Œå¹¶ä¸”æˆ‘ä»¬èƒ½å¤Ÿä»ä»»ä½•åœ°æ–¹è®¿é—®å®ƒã€‚æ­å–œï¼ğŸ‰
- en: '![](../Images/2af2041c1ced328260045a86ce773937.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2af2041c1ced328260045a86ce773937.png)'
- en: Photo by [Sarah Brown](https://unsplash.com/@sweetpagesco?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '[Sarah Brown](https://unsplash.com/@sweetpagesco?utm_source=medium&utm_medium=referral)
    åœ¨ [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral) æä¾›çš„ç…§ç‰‡'
- en: Cleaning up
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ¸…ç†
- en: Our demos are over, so letâ€™s make sure to delete everything we created to avoid
    incurring charges. We should **start with our API endpoint, which is currently
    available for anyone on the internet to use** â€” if someone guesses our URL, they
    could start sending hundreds or thousands of requests per second, which weâ€™ll
    have to pay AWS for.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„æ¼”ç¤ºç»“æŸäº†ï¼Œå› æ­¤è®©æˆ‘ä»¬ç¡®ä¿åˆ é™¤æˆ‘ä»¬åˆ›å»ºçš„æ‰€æœ‰å†…å®¹ï¼Œä»¥é¿å…äº§ç”Ÿè´¹ç”¨ã€‚æˆ‘ä»¬åº”è¯¥**ä»æˆ‘ä»¬çš„ API ç«¯ç‚¹å¼€å§‹ï¼Œè¯¥ç«¯ç‚¹ç›®å‰å¯¹äº’è”ç½‘ç”¨æˆ·å¼€æ”¾**â€”â€”å¦‚æœæœ‰äººçŒœåˆ°æˆ‘ä»¬çš„
    URLï¼Œä»–ä»¬å¯èƒ½ä¼šå¼€å§‹æ¯ç§’å‘é€æ•°ç™¾æˆ–æ•°åƒä¸ªè¯·æ±‚ï¼Œè€Œè¿™äº›è¯·æ±‚æˆ‘ä»¬å°†éœ€è¦ä¸º AWS æ”¯ä»˜è´¹ç”¨ã€‚
- en: So letâ€™s navigate to **API Gateway** in the AWS Console and delete our API endpoint.
    You click on the button next to `calculate_mean-API`, then `Actions` > `Delete`.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥è®©æˆ‘ä»¬åœ¨ AWS æ§åˆ¶å°ä¸­å¯¼èˆªåˆ° **API Gateway** å¹¶åˆ é™¤æˆ‘ä»¬çš„ API ç«¯ç‚¹ã€‚ä½ ç‚¹å‡» `calculate_mean-API` æ—è¾¹çš„æŒ‰é’®ï¼Œç„¶åé€‰æ‹©
    `æ“ä½œ` > `åˆ é™¤`ã€‚
- en: Next up is the Lambda function. Navigate to **Lambda** in the AWS Console and
    delete the function.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥æ˜¯Lambdaå‡½æ•°ã€‚å¯¼èˆªåˆ°**Lambda**åœ¨AWSæ§åˆ¶å°ä¸­ï¼Œå¹¶åˆ é™¤è¯¥å‡½æ•°ã€‚
- en: Finally, if you havenâ€™t already, terminate your EC2 instance. Navigate to **EC2**
    in the console, stop your instance if you havenâ€™t already, and then terminate
    it. You can also go to your security group and remove your IP address from the
    inbound traffic rules.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œå¦‚æœä½ è¿˜æ²¡åšï¼Œè¯·ç»ˆæ­¢ä½ çš„EC2å®ä¾‹ã€‚å¯¼èˆªåˆ°**EC2**åœ¨æ§åˆ¶å°ä¸­ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰åœæ­¢å®ä¾‹ï¼Œè¯·å…ˆåœæ­¢ï¼Œç„¶åç»ˆæ­¢å®ƒã€‚ä½ è¿˜å¯ä»¥è¿›å…¥ä½ çš„å®‰å…¨ç»„ï¼Œå°†ä½ çš„IPåœ°å€ä»å…¥ç«™æµé‡è§„åˆ™ä¸­ç§»é™¤ã€‚
- en: '![](../Images/e9e12f4782263c078c9cbc5773996aa8.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e9e12f4782263c078c9cbc5773996aa8.png)'
- en: Photo by [Ian Stauffer](https://unsplash.com/ja/@ianstauffer?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä¼Šæ©Â·æ–¯æ‰˜å¼—](https://unsplash.com/ja/@ianstauffer?utm_source=medium&utm_medium=referral)æä¾›ï¼Œæ¥è‡ª[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Conclusions
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: 'In this post, we explored two Amazon Web Services for compute: **EC2** and
    **Lambda.** We saw how **Amazon EC2 lets us reserve a virtual server with whatever
    exact configuration weâ€™d like**, tailoring our resources to our use case. We created
    a server and SSHâ€™d into it after modifying the read permissions of our private
    key. We then downloaded files from the internet, ran a Python script, and trained
    a classifier on some generated data.'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†ä¸¤ç§è®¡ç®—çš„äºšé©¬é€Šç½‘ç»œæœåŠ¡ï¼š**EC2**å’Œ**Lambda**ã€‚æˆ‘ä»¬çœ‹åˆ°**Amazon EC2 è®©æˆ‘ä»¬å¯ä»¥é¢„ç•™ä¸€ä¸ªå…·æœ‰æˆ‘ä»¬æ‰€éœ€ç²¾ç¡®é…ç½®çš„è™šæ‹ŸæœåŠ¡å™¨**ï¼Œæ ¹æ®æˆ‘ä»¬çš„ä½¿ç”¨æ¡ˆä¾‹è°ƒæ•´èµ„æºã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶åœ¨ä¿®æ”¹äº†ç§é’¥çš„è¯»å–æƒé™åé€šè¿‡SSHè¿æ¥åˆ°æœåŠ¡å™¨ã€‚ç„¶åï¼Œæˆ‘ä»¬ä»äº’è”ç½‘ä¸‹è½½äº†æ–‡ä»¶ï¼Œè¿è¡Œäº†ä¸€ä¸ªPythonè„šæœ¬ï¼Œå¹¶åœ¨ä¸€äº›ç”Ÿæˆçš„æ•°æ®ä¸Šè®­ç»ƒäº†ä¸€ä¸ªåˆ†ç±»å™¨ã€‚
- en: We then contrasted EC2 with **AWS Lambda, Amazonâ€™s â€œserver-lessâ€ approach to
    compute.** We created a function for calculating the mean of an array of numbers
    and invoked the function from the console and AWS CLI. We then added an AWS API
    Gateway trigger, modified our function to take query string parameters, and called
    the function from our browser and local Python environment.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éšåå°†EC2ä¸**AWS Lambdaï¼Œäºšé©¬é€Šçš„â€œæ— æœåŠ¡å™¨â€è®¡ç®—æ–¹æ³•**è¿›è¡Œäº†å¯¹æ¯”ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç”¨äºè®¡ç®—æ•°å­—æ•°ç»„å¹³å‡å€¼çš„å‡½æ•°ï¼Œå¹¶ä»æ§åˆ¶å°å’ŒAWS
    CLIä¸­è°ƒç”¨äº†è¯¥å‡½æ•°ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†AWS API Gatewayè§¦å‘å™¨ï¼Œä¿®æ”¹äº†å‡½æ•°ä»¥æ¥å—æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶ä»æµè§ˆå™¨å’Œæœ¬åœ°Pythonç¯å¢ƒä¸­è°ƒç”¨äº†è¯¥å‡½æ•°ã€‚
- en: 'Between our [intro,](/aws-essentials-for-data-science-why-cloud-computing-141cc6cee284)
    [storage](/aws-essentials-for-data-science-storage-5755afc3cb4a), and compute
    posts, weâ€™ve used seven fundamental services: IAM, S3, RDS, DynamoDB, EC2, Lambda,
    and API Gateway. While Amazon offers [over 200 services](https://www.aboutamazon.com/what-we-do/amazon-web-services),
    many build on these core services. With the knowledge weâ€™ve gained in this series,
    weâ€™re well equipped to begin leveraging the cloud for our needs.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬çš„[ä»‹ç»](/aws-essentials-for-data-science-why-cloud-computing-141cc6cee284)ã€[å­˜å‚¨](/aws-essentials-for-data-science-storage-5755afc3cb4a)å’Œè®¡ç®—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸ƒé¡¹åŸºæœ¬æœåŠ¡ï¼šIAMã€S3ã€RDSã€DynamoDBã€EC2ã€Lambdaå’ŒAPI
    Gatewayã€‚è™½ç„¶äºšé©¬é€Šæä¾›äº†[è¶…è¿‡200é¡¹æœåŠ¡](https://www.aboutamazon.com/what-we-do/amazon-web-services)ï¼Œè®¸å¤šæœåŠ¡å»ºç«‹åœ¨è¿™äº›æ ¸å¿ƒæœåŠ¡ä¹‹ä¸Šã€‚é€šè¿‡æˆ‘ä»¬åœ¨è¿™ä¸€ç³»åˆ—ä¸­è·å¾—çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å·²ç»åšå¥½äº†å……åˆ†å‡†å¤‡ï¼Œå¯ä»¥å¼€å§‹åˆ©ç”¨äº‘æœåŠ¡æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚
- en: Thanks for reading!
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: æ„Ÿè°¢é˜…è¯»ï¼
- en: Best,
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: ç¥å¥½ï¼Œ
- en: Matt
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: é©¬ç‰¹
- en: Footnotes
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è„šæ³¨
- en: 1\. Background
  id: totrans-143
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1\. èƒŒæ™¯
- en: 'In researching for this post, I found plenty of interesting statistics about
    how expensive it can be for a popular website to be unresponsive or unavailable.
    Some of the more interesting stats:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç ”ç©¶è¿™ç¯‡æ–‡ç« æ—¶ï¼Œæˆ‘å‘ç°äº†å¾ˆå¤šå…³äºæµè¡Œç½‘ç«™åœ¨ä¸å¯å“åº”æˆ–ä¸å¯ç”¨æ—¶çš„é«˜æˆæœ¬çš„æœ‰è¶£ç»Ÿè®¡æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ›´æœ‰è¶£çš„ç»Ÿè®¡æ•°æ®ï¼š
- en: '[Taobao](https://en.wikipedia.org/wiki/Taobao), a Chinese online shopping platform,
    had a 20-minute crash during Singlesâ€™ Day in 2021 that may have cost [**several
    billion dollars**](https://queue-it.com/blog/singles-day-statistics/) in sales.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[æ·˜å®](https://en.wikipedia.org/wiki/Taobao)ï¼Œä¸€ä¸ªä¸­å›½åœ¨çº¿è´­ç‰©å¹³å°ï¼Œåœ¨2021å¹´åŒåä¸€æœŸé—´ç»å†äº†20åˆ†é’Ÿçš„å´©æºƒï¼Œè¿™å¯èƒ½å¯¼è‡´äº†[**æ•°åäº¿ç¾å…ƒ**](https://queue-it.com/blog/singles-day-statistics/)çš„é”€å”®æŸå¤±ã€‚'
- en: A webpage that loads within two seconds has an average [bounce rate](https://en.wikipedia.org/wiki/Bounce_rate)
    of 9%. That number [**jumps to 38%**](https://www.pingdom.com/blog/page-load-time-really-affect-bounce-rate/)
    when the webpage takes five seconds to load.
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŠ è½½æ—¶é—´åœ¨ä¸¤ç§’å†…çš„ç½‘é¡µå…·æœ‰å¹³å‡[è·³å‡ºç‡](https://en.wikipedia.org/wiki/Bounce_rate)ä¸º9%ã€‚å½“ç½‘é¡µåŠ è½½æ—¶é—´è¾¾åˆ°äº”ç§’æ—¶ï¼Œè¿™ä¸ªæ•°å­—[**è·ƒå‡åˆ°38%**](https://www.pingdom.com/blog/page-load-time-really-affect-bounce-rate/)ã€‚
- en: 2\. Background
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2\. èƒŒæ™¯
- en: For hyper-growth early Amazon, the extra compute purchased during the holiday
    season would eventually just serve the normal business needs as the company grew.
    But for most companies, this extra compute would be a hindrance most of the year.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºå¤„äºè¶…é«˜é€Ÿå¢é•¿æœŸçš„æ—©æœŸäºšé©¬é€Šæ¥è¯´ï¼ŒèŠ‚å‡æ—¥æœŸé—´è´­ä¹°çš„é¢å¤–è®¡ç®—èµ„æºæœ€ç»ˆåªæ˜¯æ»¡è¶³å…¬å¸æˆé•¿åçš„æ­£å¸¸ä¸šåŠ¡éœ€æ±‚ã€‚ä½†å¯¹å¤§å¤šæ•°å…¬å¸æ¥è¯´ï¼Œè¿™äº›é¢å¤–çš„è®¡ç®—èµ„æºåœ¨å¤§éƒ¨åˆ†æ—¶é—´é‡Œå°†æˆä¸ºä¸€ç§è´Ÿæ‹…ã€‚
- en: As a side note, thereâ€™s a common narrative that AWS spun out of Amazon trying
    to utilize all this â€œextra computeâ€ sitting around Q1-Q3\. They had all these
    unused servers, so why not just let customers use them? My [favorite rebuttal](https://open.spotify.com/episode/14LmWeOMRZysw2i2vYSOuw?si=ce630660e3b44461&nd=1)
    of this narrative is that when Q4 came up the following year, Amazon obviously
    couldnâ€™t just terminate all those customers to take back their servers! Amazon
    would be stuck needing to buy a bunch more servers again.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: é¡ºä¾¿æä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªå¸¸è§çš„è¯´æ³•æ˜¯ AWS ä»äºšé©¬é€Šè¯•å›¾åˆ©ç”¨è¿™äº›â€œé¢å¤–çš„è®¡ç®—èµ„æºâ€ä¸­åˆ†æ‹†å‡ºæ¥çš„ã€‚ä»–ä»¬æœ‰è¿™ä¹ˆå¤šæœªä½¿ç”¨çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸è®©å®¢æˆ·ä½¿ç”¨å‘¢ï¼Ÿæˆ‘å¯¹è¿™ä¸ªè¯´æ³•çš„[æœ€å–œæ¬¢çš„åé©³](https://open.spotify.com/episode/14LmWeOMRZysw2i2vYSOuw?si=ce630660e3b44461&nd=1)æ˜¯ï¼Œå½“ä¸‹ä¸€å¹´çš„
    Q4 åˆ°æ¥æ—¶ï¼Œäºšé©¬é€Šæ˜¾ç„¶ä¸èƒ½ä»…ä»…ç»ˆæ­¢æ‰€æœ‰è¿™äº›å®¢æˆ·ä»¥æ”¶å›ä»–ä»¬çš„æœåŠ¡å™¨ï¼äºšé©¬é€Šå°†ä¸å¾—ä¸å†æ¬¡è´­ä¹°å¤§é‡æœåŠ¡å™¨ã€‚
- en: 3\. Creating a function
  id: totrans-150
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3\. åˆ›å»ºå‡½æ•°
- en: 'We can argue whether error handling should be within the Lambda function or
    at callers to the function. There are tradeoffs: adding error handling to the
    function means the checks are in one place, reducing mental load on developers
    interacting with the function. But checks make the function heavier â€” they need
    to run *every* time the function is called.'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥è®¨è®ºé”™è¯¯å¤„ç†æ˜¯å¦åº”è¯¥åœ¨ Lambda å‡½æ•°å†…éƒ¨è¿˜æ˜¯åœ¨è°ƒç”¨å‡½æ•°çš„åœ°æ–¹ã€‚ä¸¤è€…å„æœ‰åˆ©å¼Šï¼šå°†é”™è¯¯å¤„ç†æ·»åŠ åˆ°å‡½æ•°ä¸­æ„å‘³ç€æ£€æŸ¥é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå‡å°‘äº†ä¸å‡½æ•°äº¤äº’çš„å¼€å‘è€…çš„å¿ƒç†è´Ÿæ‹…ã€‚ä½†æ£€æŸ¥ä¼šè®©å‡½æ•°å˜å¾—æ›´é‡â€”â€”å®ƒä»¬éœ€è¦åœ¨å‡½æ•°æ¯æ¬¡è¢«è°ƒç”¨æ—¶éƒ½è¿è¡Œã€‚
- en: We can keep the function lightweight by having callers guarantee valid inputs.
    But enforcing this responsibility is challenging, especially if the codebase is
    large and developers donâ€™t necessarily have the full context of the system. This
    also means thereâ€™s no standardization on what checks are run and how errors are
    communicated back to the user.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡è®©è°ƒç”¨è€…ä¿è¯æœ‰æ•ˆè¾“å…¥æ¥ä¿æŒå‡½æ•°çš„è½»é‡åŒ–ã€‚ä½†å¼ºåˆ¶æ‰§è¡Œè¿™ä¸€è´£ä»»æ˜¯å…·æœ‰æŒ‘æˆ˜æ€§çš„ï¼Œç‰¹åˆ«æ˜¯å½“ä»£ç åº“å¾ˆå¤§è€Œå¼€å‘è€…ä¸ä¸€å®šæ‹¥æœ‰ç³»ç»Ÿçš„å®Œæ•´ä¸Šä¸‹æ–‡æ—¶ã€‚è¿™ä¹Ÿæ„å‘³ç€æ²¡æœ‰æ ‡å‡†åŒ–çš„æ£€æŸ¥å†…å®¹ä»¥åŠå¦‚ä½•å°†é”™è¯¯åé¦ˆç»™ç”¨æˆ·ã€‚
- en: One intermediate option could be to have checks performed by [one Lambda function
    that then passes valid inputs to the actual function](https://stackoverflow.com/questions/31714788/can-an-aws-lambda-function-call-another).
    This increases the overall system complexity, but it allows for both reduced mental
    load on callers and a lightweight function. Ultimately, the right approach depends
    on your use case.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªä¸­é—´é€‰é¡¹å¯èƒ½æ˜¯ç”±[ä¸€ä¸ª Lambda å‡½æ•°æ¥æ‰§è¡Œæ£€æŸ¥ï¼Œç„¶åå°†æœ‰æ•ˆè¾“å…¥ä¼ é€’ç»™å®é™…å‡½æ•°](https://stackoverflow.com/questions/31714788/can-an-aws-lambda-function-call-another)ã€‚è¿™ä¼šå¢åŠ æ•´ä½“ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œä½†å®ƒå¯ä»¥å‡å°‘è°ƒç”¨è€…çš„å¿ƒç†è´Ÿæ‹…ï¼Œå¹¶ä¿æŒå‡½æ•°çš„è½»é‡åŒ–ã€‚**æœ€ç»ˆ**ï¼Œåˆé€‚çš„æ–¹æ³•å–å†³äºä½ çš„ä½¿ç”¨åœºæ™¯ã€‚
