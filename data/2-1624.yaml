- en: Pandas for Time Series
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 时间序列的Pandas
- en: 原文：[https://towardsdatascience.com/pandas-for-time-series-c6cb7c0a3680](https://towardsdatascience.com/pandas-for-time-series-c6cb7c0a3680)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/pandas-for-time-series-c6cb7c0a3680](https://towardsdatascience.com/pandas-for-time-series-c6cb7c0a3680)
- en: Data Processing in Python
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Python中的数据处理
- en: This article explained the pandas’ methods for time series. Let’s deal with
    the time series like a pro.
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 本文解释了pandas的时间序列方法。让我们像专业人士一样处理时间序列。
- en: '[](https://kahemchu.medium.com/?source=post_page-----c6cb7c0a3680--------------------------------)[![KahEm
    Chu](../Images/2f89d02e85f61f08f048773990f4d53f.png)](https://kahemchu.medium.com/?source=post_page-----c6cb7c0a3680--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c6cb7c0a3680--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c6cb7c0a3680--------------------------------)
    [KahEm Chu](https://kahemchu.medium.com/?source=post_page-----c6cb7c0a3680--------------------------------)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://kahemchu.medium.com/?source=post_page-----c6cb7c0a3680--------------------------------)[![KahEm
    Chu](../Images/2f89d02e85f61f08f048773990f4d53f.png)](https://kahemchu.medium.com/?source=post_page-----c6cb7c0a3680--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c6cb7c0a3680--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c6cb7c0a3680--------------------------------)
    [KahEm Chu](https://kahemchu.medium.com/?source=post_page-----c6cb7c0a3680--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c6cb7c0a3680--------------------------------)
    ·13 min read·Jul 26, 2023
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: ·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c6cb7c0a3680--------------------------------)
    ·阅读时间13分钟·2023年7月26日
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/0d95a391ba99fb3f6fd922f3c4bbba8f.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0d95a391ba99fb3f6fd922f3c4bbba8f.png)'
- en: Photo by [Aron Visuals](https://unsplash.com/@aronvisuals?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/s/photos/time?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由 [Aron Visuals](https://unsplash.com/@aronvisuals?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    提供，[Unsplash](https://unsplash.com/s/photos/time?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    上的照片
- en: Since I joined the workforce as a data scientist, most of the data I deal with
    are time series. Well, so there are a lot of definitions for ***time series***,
    generally it’s defined as a set of data points collected over a period of time.
    Or speaking in a Pythonic way, it refers to a dataset with a datetime index, and
    at least one column with numerical values.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 自从我作为数据科学家进入职场以来，我处理的大多数数据都是时间序列。好吧，时间序列有很多定义，通常定义为一组在一段时间内收集的数据点。或者用Python的方式说，它指的是一个带有日期时间索引的数据集，并且至少有一列数值。
- en: It could be the price of a stock over the past few months, the sales of a hypermarket
    for the past few weeks, or even the blood sugar level records collected throughout
    the months for a patient.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以是过去几个月的股票价格，过去几周的大型超市销售数据，甚至是一个患者在几个月内记录的血糖水平。
- en: In this article, I will show how to apply pandas to a time series dataset, with
    an example of generated blood sugar level records.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我将展示如何将pandas应用于时间序列数据集，以生成的血糖水平记录为例。
- en: 'With that, this article will be structured as below:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些，这篇文章将按如下结构进行：
- en: '[DateTime Format Manipulation](#aca7) — *changing the datetime series into
    the desired format*'
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[日期时间格式处理](#aca7) — *将日期时间序列转换为所需格式*'
- en: '[Converting DateTime to a Particular Period](#0342) — *convert each data point
    to the specific time periods*'
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[将日期时间转换为特定周期](#0342) — *将每个数据点转换为特定时间段*'
- en: '[Filtering DateTime Series based on Condition](#db28) — *filtering data points
    based on selected time period*'
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[根据条件筛选日期时间序列](#db28) — *根据选定时间段筛选数据点*'
- en: '[Time Shift](#e5e1) — *shifting data points down for a specific number of period*'
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[时间偏移](#e5e1) — *将数据点向下移动特定周期*'
- en: '[Resampling Time Series](#6895) — *grouping data points based on the specified
    time period*'
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[重新抽样时间序列](#6895) — *根据指定的时间周期对数据点进行分组*'
- en: '[Line Chart](#b3cf)'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[折线图](#b3cf)'
- en: Let’s get started!
  id: totrans-19
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 让我们开始吧！
- en: As usual, the first step in any analysis with Python is importing the necessary
    library.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 像往常一样，任何Python分析的第一步是导入必要的库。
- en: Import Libraries
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导入库
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Create data
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建数据
- en: Then, let’s generate a blood sugar level records dataset for this demo.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们为这个演示生成一个血糖水平记录数据集。
- en: '[PRE1]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: With the script above, a dataset with 2160 data points recorded in one year,
    with 4 hours gap is generated. The data points started on July 1st, 2020 and ended
    on Jun 25th, 2021.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 使用上述脚本，生成了一个包含2160个数据点的数据集，记录了一年，间隔4小时。数据点从2020年7月1日开始，到2021年6月25日结束。
- en: '![](../Images/ab1a588e0031acd76012e416dc6774e4.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ab1a588e0031acd76012e416dc6774e4.png)'
- en: The first 10 data points. Image by the author.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 前10个数据点。图片来源：作者。
- en: '![](../Images/099cacfb56278a59cdddf740a64b0c37.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/099cacfb56278a59cdddf740a64b0c37.png)'
- en: The last 10 data points. Image by the author.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的10个数据点。图片来源：作者。
- en: Now the data is ready, let’s get started!😊
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 现在数据准备好了，开始吧！😊
- en: DateTime Format Manipulation
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 日期时间格式操作
- en: Below are five methods that can be used for manipulating datetime series.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是五种可以用来操作日期时间序列的方法。
- en: '`[pandas.Series.dt.normalize](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.normalize.html)`
    — Convert times to midnight, 12:00:00.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.dt.normalize](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.normalize.html)`
    — 将时间转换为午夜12:00:00。'
- en: '`[pandas.Series.dt.round](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.round.html)`
    — Perform round operation on the data to the specified freq.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.dt.round](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.round.html)`
    — 对数据执行四舍五入操作到指定的频率。'
- en: '`[pandas.Series.dt.floor](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.floor.html)`
    — Perform floor operation on the data to the specified freq.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.dt.floor](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.floor.html)`
    — 对数据执行向下取整操作到指定的频率。'
- en: '`[pandas.Series.dt.ceil](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.ceil.html)`
    — Perform ceil operation on the data to the specified freq.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.dt.ceil](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.ceil.html)`
    — 对数据执行向上取整操作到指定的频率。'
- en: '`[pandas.Series.dt.strftime](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.strftime.html)`
    — Convert to Index using specified date_format.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.dt.strftime](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.strftime.html)`
    — 使用指定的date_format转换为索引。'
- en: Method to Round Off the Timestamp
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 舍入时间戳的方法
- en: For the `.round`, `.floor` and `.ceil` methods, we need to define the frequency
    to round off the time. The frequency must be a fixed frequency like ‘S’ (second)
    and cannot be ‘ME’ (month end).
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 对于`.round`、`.floor`和`.ceil`方法，我们需要定义频率来舍入时间。频率必须是固定频率，如‘S’（秒），不能是‘ME’（月末）。
- en: Based on the author’s try & error, the fixed frequency are D, H, T/min, S, L/ms,
    U/us, and N. See [Time Series Frequencies](https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases)
    for all the frequency values.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 根据作者的尝试与错误，固定频率有D、H、T/min、S、L/ms、U/us和N。查看[时间序列频率](https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases)获取所有频率值。
- en: The difference of `.round`, `.floor` and `.ceil` methods will be shown in the
    two examples below. *The two examples below will use the list of dates generated
    instead of the data frame generated for demo purposes.*
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '`.round`、`.floor`和`.ceil`方法之间的区别将在下面的两个例子中显示。*下面的两个例子将使用生成的日期列表，而不是为演示生成的数据框。*'
- en: The first example is rounding off the timestamp with a 2-hour frequency gap
    to a 6-hour frequency gap.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个例子是将时间戳从2小时频率间隔舍入到6小时频率间隔。
- en: '[PRE2]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/9e61ab3ca714132bad512c44ec4fbccf.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9e61ab3ca714132bad512c44ec4fbccf.png)'
- en: Script Output 1\. Image by Author.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本输出1。图片来源：作者。
- en: The second example is rounding off the timestamp with a 3-hour frequency gap
    to a 6-hour frequency gap.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个例子是将时间戳从3小时频率间隔舍入到6小时频率间隔。
- en: '[PRE3]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](../Images/05f6416445f4c74d95fafe6f03514bf0.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/05f6416445f4c74d95fafe6f03514bf0.png)'
- en: Script Output 2\. Image by Author.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本输出2。图片来源：作者。
- en: The 6-hour frequency means the time will be cut into equal-length time periods,
    where each period is 6 hours apart, and the first period always starts at midnight
    00:00:00\. As there are 24 hours in a day, hence we will be having 4 periods as
    shown in the chart below.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 6小时频率意味着时间将被分割成等长的时间段，每个时间段间隔6小时，第一个时间段总是从午夜00:00:00开始。一天有24小时，因此我们会有4个时间段，如下图所示。
- en: The first period will be 12 am to 6 am, then the second period will be 6 am
    to 12 pm and so on.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个时间段将是凌晨12点到早上6点，然后第二个时间段将是早上6点到中午12点，以此类推。
- en: '![](../Images/e14e879219bb5be9280f8a761f5cb606.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e14e879219bb5be9280f8a761f5cb606.png)'
- en: Difference between round, floor and ceil methods. Image by Author.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: round、floor和ceil方法之间的区别。图片来源：作者。
- en: As shown in the chart above, for the `.floor` method, it will always return
    the lower bound of the period. For the `.ceil` method, it is the opposite of `.floor`,
    where it will always return the upper bound of the period.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如上图所示，对于 `.floor` 方法，它将始终返回时间段的下边界。对于 `.ceil` 方法，则与 `.floor` 相反，它将始终返回时间段的上边界。
- en: For the `.round` method, it will return the nearest bound of the period, but
    when the distance to the two bounds is equal, it will return either.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 `.round` 方法，它将返回该时间段的最近边界，但当距离两个边界相等时，它将返回任意一个。
- en: That’s the difference between the 3 methods above. How the timestamps are rounded
    off will impact the result of the analysis later, hence, it’s critical to pick
    the method according to the analysis required.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是上述三种方法之间的区别。时间戳的舍入方式将影响后续分析的结果，因此，根据需要的分析选择方法是至关重要的。
- en: To apply the method above on a data frame, we need to add `.dt` before the method.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 要在数据框上应用上述方法，我们需要在方法前加上 `.dt`。
- en: To change the date, let us copy the date index as a column.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 要更改日期，我们可以将日期索引复制为一列。
- en: '[PRE4]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![](../Images/ec79f7a0c68e4a242cdce8ca3e5be818.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ec79f7a0c68e4a242cdce8ca3e5be818.png)'
- en: A data frame with duplicated dates column. Image by Author.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 一个包含重复日期列的数据框。图片由作者提供。
- en: The `dtypes` of the data frame is as follows.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 数据框的 `dtypes` 如下所示。
- en: '![](../Images/96a8f2018730d6f2208bc984cfc61dc2.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/96a8f2018730d6f2208bc984cfc61dc2.png)'
- en: Image by Author.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: In the first example below, we will round the timestamp at a 6-hour frequency.
    The `.dt.normalize` will always round the time to midnight, hence only the date
    is shown here.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的第一个示例中，我们将在 6 小时的频率下对时间戳进行舍入。`.dt.normalize` 将始终将时间舍入到午夜，因此这里只显示日期。
- en: '[PRE5]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/edcbf73626b8f8fb800dce67bae2c0af.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/edcbf73626b8f8fb800dce67bae2c0af.png)'
- en: Image by Author.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: The first example is the same as the two examples with generated list of dates,
    the timestamp is rounding off according to the hour.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个示例与生成的日期列表的两个示例相同，时间戳按小时进行舍入。
- en: In the second example below, we will round the date at “D” frequency which means
    the timestamp will be rounded off to the nearest day.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的第二个示例中，我们将以“D”频率对日期进行舍入，这意味着时间戳将舍入到最近的一天。
- en: '[PRE6]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/51c6b86cd4572b84cdd481c581f8a2e7.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/51c6b86cd4572b84cdd481c581f8a2e7.png)'
- en: Image by Author.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: For the second example, the `.floor` method will return the lower bound of the
    period which is the same day as the timestamp, while the `.ceil` method will always
    return the upper bound of the period which is the next day of the date **except**
    when the timestamp is at midnight 00:00 hour.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第二个示例，`.floor` 方法将返回时间段的下边界，即与时间戳相同的一天，而 `.ceil` 方法将始终返回时间段的上边界，即日期的下一天 **除非**
    时间戳是在午夜 00:00 时。
- en: For the `.round` method, it will still return the nearest bound of the period,
    but when the distance to the two bounds is equal, it will return either.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 `.round` 方法，它仍然会返回时间段的最近边界，但当距离两个边界相等时，它将返回任意一个。
- en: Method to Convert the DateTime Format — strftime()
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 转换 DateTime 格式的方法 — strftime()
- en: By using `.strftime()` methods, we can convert the timestamp into the required
    format. In the example below, the standard ISO format date has been converted
    into <month> <day>, <year> format, which can be represented by `strftime()` format
    code`‘%B %d, %Y’`. `%B` is referring to Month as the locale’s full name. See all
    the `strftime()` format codes [here](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior).
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用 `.strftime()` 方法，我们可以将时间戳转换为所需的格式。在下面的示例中，标准的 ISO 格式日期已被转换为 <month> <day>,
    <year> 格式，这可以通过 `strftime()` 格式代码`‘%B %d, %Y’` 表示。`%B` 代表的是月份的完整名称。查看所有的 `strftime()`
    格式代码 [这里](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior)。
- en: '[PRE7]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![](../Images/2873e42fa1dfe494f788cad3e878f28e.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2873e42fa1dfe494f788cad3e878f28e.png)'
- en: Image by Author.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: Converting the DateTime format like changing the month from digit to full name
    can clear the clutter for whether the 7 refers to month or day.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 转换 DateTime 格式，例如将月份从数字转换为完整名称，可以消除 7 是指月份还是日期的混淆。
- en: Converting DateTime to a Particular Period
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将 DateTime 转换为特定的时间段
- en: '`[pandas.Series.dt.to_period](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.to_period.html)`
    — Cast to PeriodArray/Index at a particular frequency. Converts DatetimeArray/Index
    to PeriodArray/Index.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.dt.to_period](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.to_period.html)`
    — 转换为特定频率的 PeriodArray/Index。将 DatetimeArray/Index 转换为 PeriodArray/Index。'
- en: The first example below will convert a timestamp to a week.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 以下第一个示例将时间戳转换为周。
- en: '[PRE8]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: As in the output below, the datetime array has been converted to a period array,
    where each element in the list has been changed from a timestamp to a week.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 如下输出所示，日期时间数组已转换为周期数组，其中列表中的每个元素已从时间戳更改为周。
- en: '![](../Images/9a90575ffc056d13bcb48f48aaae255e.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9a90575ffc056d13bcb48f48aaae255e.png)'
- en: Image by Author.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: The second example below will convert a timestamp to a month.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 以下第二个示例将时间戳转换为月份。
- en: '[PRE9]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: As in the output below, the datetime array has been converted to a month array,
    where each element in the list has been changed from a timestamp to a month.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如下输出所示，日期时间数组已转换为月份数组，其中列表中的每个元素已从时间戳更改为月份。
- en: '![](../Images/fa55cb7d0207e8e8c7e3ade86c79f503.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fa55cb7d0207e8e8c7e3ade86c79f503.png)'
- en: Image by Author.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: Now let's apply that to a data frame. Same with the example earlier, we need
    to add `.dt` before `.to_period()` when applying the method to a data frame.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们将其应用于数据框。与之前的示例一样，应用方法到数据框时，需要在 `.to_period()` 前添加 `.dt`。
- en: '[PRE10]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Each datetime in the dates column has been converted to a month.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 日期列中的每个日期时间已被转换为月份。
- en: '![](../Images/04b5ffce2c0afef01547e648c747be91.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/04b5ffce2c0afef01547e648c747be91.png)'
- en: Image by Author.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: With the new period column, we can do a pivot table to get additional insight.
    For example, we can calculate the average blood sugar level for each month.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 使用新的周期列，我们可以创建透视表以获得更多见解。例如，我们可以计算每个月的平均血糖水平。
- en: '[PRE11]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](../Images/f9169fc78117bfa750e47428d4e21774.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f9169fc78117bfa750e47428d4e21774.png)'
- en: Image by Author.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: We can also calculate the average blood sugar level by week period for more
    detailed monitoring.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以通过周期间计算平均血糖水平，以便进行更详细的监测。
- en: '[PRE12]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![](../Images/4bf944a77acb638a23066f071853ebc5.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4bf944a77acb638a23066f071853ebc5.png)'
- en: Image by Author.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: We can calculate the average blood sugar level for each week as below. If the
    blood sugar level continues to increase for multiple weeks, then we should take
    action to control it.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以计算每周的平均血糖水平，如下所示。如果血糖水平在多周内持续上升，则应采取措施进行控制。
- en: '[PRE13]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '![](../Images/30a4d0016f257664489ee919ec838e31.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/30a4d0016f257664489ee919ec838e31.png)'
- en: Image by Author.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: If we use the daily data, the rise in blood sugar level for a few days might
    be due to a luxurious dinner only, but the rise in blood sugar for a few weeks
    might indicate the patient’s health is at risk.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们使用每日数据，几天内血糖水平的上升可能仅是由于丰盛的晚餐，但几周内血糖水平的上升可能表明患者的健康存在风险。
- en: '![](../Images/9499700b4325fe839794c84693dcdc78.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9499700b4325fe839794c84693dcdc78.png)'
- en: Image by Author.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: For the pivot table, the index label and the column label will not be at the
    same level, as shown in the image above.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 对于透视表，索引标签和列标签将不会处于同一级别，如上图所示。
- en: To make the Index label and column label at the same level, the index will need
    to be reset as below.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使索引标签和列标签处于同一级别，需要重置索引，如下所示。
- en: '[PRE14]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '![](../Images/228697cd406880712d8605853eed8baf.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/228697cd406880712d8605853eed8baf.png)'
- en: Image by Author.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: Filtering DateTime Series based on Condition
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于条件过滤 DateTime 系列
- en: '`[pandas.Series.at_time](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.at_time.html)`
    — Select values at a particular time of day (e.g., 9:30 AM).'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.at_time](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.at_time.html)`
    — 选择一天中特定时间的值（例如，上午 9:30）。'
- en: '`[pandas.Series.between_time](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.between_time.html)`
    — Select values between particular times of the day (e.g., 9:00–9:30 AM).'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.between_time](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.between_time.html)`
    — 选择一天中特定时间段之间的值（例如，上午 9:00–9:30）。'
- en: This method is nice for the investigation of health records, like the blood
    sugar level of a patient every day in the early morning and before sleep. It could
    also be useful for applications like tracking your sales or the airline within
    a specific time period.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法适用于健康记录的调查，例如每天早晨和睡前的血糖水平。它也可以用于跟踪销售或特定时间段内的航班等应用。
- en: For examples below, we will apply the two methods mentioned above to track the
    blood sugar level records at 8 am and between 7 pm and 9 pm.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，我们将应用上述两种方法来跟踪上午 8 点和晚上 7 点到 9 点之间的血糖水平记录。
- en: '[PRE15]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![](../Images/83410cb6b8e5404b1d4a707d16cd31cc.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/83410cb6b8e5404b1d4a707d16cd31cc.png)'
- en: Image by Author.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: In the example above, only the records that were recorded at 8 am will be shown.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的例子中，仅会显示在早上8点记录的记录。
- en: '**Note:** This method only can be applied on the data frame where the Index
    is **DatetimeIndex**, else will cause TypeError as below.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意：** 此方法只能应用于索引为**DatetimeIndex**的数据框，否则会导致如下面所示的TypeError。'
- en: '![](../Images/44aa998134696c5af3f4d4cdd8c6c438.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/44aa998134696c5af3f4d4cdd8c6c438.png)'
- en: Image by Author.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: For example below, only the first five records between 7 pm and 9 pm will be
    shown.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 例如下面的例子中，仅会显示晚上7点到9点之间的前五条记录。
- en: '[PRE16]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '![](../Images/1510c8b669c68f53b0ed19d7d44e5442.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1510c8b669c68f53b0ed19d7d44e5442.png)'
- en: Image by Author.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: Time Shift
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 时间移位
- en: '`[pandas.Series.shift](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.shift.html)`
    — Shift the time index, using the index’s frequency if available.'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.shift](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.shift.html)`
    — 移动时间索引，如果可用的话使用索引的频率。'
- en: '**Note:** As this method shifts the data points according to the time index,
    the Index must be a **Datetime index** or a **Period index**.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意：** 由于此方法根据时间索引移动数据点，因此索引必须是**日期时间索引**或**周期索引**。'
- en: '[PRE17]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Let’s recall the pivot table from the previous section to demo the time shift
    method.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回顾前一节的透视表来演示时间移位方法。
- en: '![](../Images/65190e0b07e74504bd611d78f1cf4a80.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/65190e0b07e74504bd611d78f1cf4a80.png)'
- en: Image by Author.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: '[PRE18]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: We can shift down the data points by one period as specified in the script.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以按照脚本中指定的周期向下移位数据点。
- en: '![](../Images/6dc7a0152d5733655a9fb82c985e011f.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6dc7a0152d5733655a9fb82c985e011f.png)'
- en: Image by Author.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: By changing the periods to -1, we can shift up the data points by one period
    too. For example, the data points have been shifting up one month, which means
    the current July data point was August.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将周期更改为-1，我们也可以将数据点向上移位一个周期。例如，数据点已经向上移位一个月，这意味着当前的7月数据点是8月。
- en: '[PRE19]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '![](../Images/d443c77132f66aac8385a46d645424a2.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d443c77132f66aac8385a46d645424a2.png)'
- en: Image by Author.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: The column name might be ambiguous as it did not reflect the actual value. To
    solve that, we can combine it with `.rename()` method to directly rename the time
    shift column.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 列名可能会产生歧义，因为它没有反映实际值。为了解决这个问题，我们可以将其与`.rename()`方法结合，直接重命名时间移位列。
- en: '[PRE20]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '![](../Images/aeb5df3091c81123599f1f91fcd7addf.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/aeb5df3091c81123599f1f91fcd7addf.png)'
- en: Image by Author.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: We can combine the original data points with the shifted data points to make
    a comparison table.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将原始数据点与移位后的数据点结合，制作比较表。
- en: '[PRE21]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '![](../Images/8fadc57577f486223f5525d494c55a1e.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8fadc57577f486223f5525d494c55a1e.png)'
- en: Image by Author.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: With the two series above, we can calculate the percentage of changes in blood
    sugar levels.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 使用上面的两个系列，我们可以计算血糖水平的变化百分比。
- en: '[PRE22]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '![](../Images/04a81197d5a5a19fc6aaf0deef3899fb.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/04a81197d5a5a19fc6aaf0deef3899fb.png)'
- en: Image by Author.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: That’s pretty cool. Do you know what is even cooler? We do not need to calculate
    the percentage of change, `pandas` have the method ready for you😊!
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 这很酷。你知道什么更酷吗？我们不需要计算变化百分比，`pandas`已经为你准备好了方法😊！
- en: '[PRE23]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '![](../Images/d1627990dbc8a45e4362ead6ca178d65.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d1627990dbc8a45e4362ead6ca178d65.png)'
- en: Image by Author.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: '[PRE24]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: As we continue from the previous example, there are two columns in the data
    frame now. When have more than one column, need to specify to perform calculations
    on which column.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 继续前面的例子，现在数据框中有两列。当有多个列时，需要指定在哪一列上进行计算。
- en: '![](../Images/4059a24b87f02a485abf4304b8eb7842.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4059a24b87f02a485abf4304b8eb7842.png)'
- en: Image by Author.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图片。
- en: Resampling Time Series
  id: totrans-171
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重采样时间序列
- en: '`[pandas.Series.resample](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.resample.html)`
    — Convenience method for frequency conversion and resampling of time series. The
    object must have a datetime-like index (DatetimeIndex, PeriodIndex, or TimedeltaIndex),
    or the caller must pass the label of a datetime-like series/index to the on/level
    keyword parameter.'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.resample](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.resample.html)`
    — 用于时间序列频率转换和重采样的便捷方法。对象必须具有类似日期时间的索引（DatetimeIndex、PeriodIndex 或 TimedeltaIndex），或者调用者必须将类似日期时间的系列/索引的标签传递给on/level关键字参数。'
- en: The example below is using the `df_pivot` from the previous section.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的例子使用的是上一节中的`df_pivot`。
- en: '[PRE25]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: The script above will resample the data frame based on the period index, which
    means it will group the data points based on the period specified, where in this
    case is “Q” or quarter, by the mean of the data points within the period.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 上面的脚本将根据时间段索引重新采样数据框，这意味着它将根据指定的时间段进行分组，在本例中是“Q”或季度，通过该时间段内数据点的均值进行分组。
- en: '![](../Images/cad40a1b8bdb89fe8932f629eb7c0a7d.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cad40a1b8bdb89fe8932f629eb7c0a7d.png)'
- en: Image by Author.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: Below is another example of resampling the data points with another period of
    time.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是另一个以不同时间段重新采样数据点的示例。
- en: '[PRE26]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '![](../Images/a6722e30b83e9813b00c114bf9a16b56.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a6722e30b83e9813b00c114bf9a16b56.png)'
- en: Image by Author.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: For this example, the data points will be grouped based on the period specified,
    where in this case is “Y” or year, by the mean of the data points within the period.
    We can also group the data points by the max value from the data points within
    the period.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个示例中，数据点将根据指定的时间段进行分组，在本例中是“Y”或年份，通过该时间段内数据点的均值进行分组。我们也可以通过该时间段内数据点的最大值进行分组。
- en: '[PRE27]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '![](../Images/8a502609f7bb50ccd27fb941f3c268e2.png)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8a502609f7bb50ccd27fb941f3c268e2.png)'
- en: Image by Author.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: Take note that the calculated column like `pct_change` and `value_change` will
    be added up too, so now the calculated column in the output does not reflect the
    correct value anymore.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，计算列如`pct_change`和`value_change`也会被加总，因此现在输出中的计算列不再反映正确的值。
- en: Take note that the resample request the data frame to have a DateTime-like or
    period index, else it will cause a type error. Let’s see
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，重新采样要求数据框具有类似DateTime或时间段的索引，否则会导致类型错误。我们来看看。
- en: '[PRE28]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '![](../Images/42d7d127534bd9082696331f1493eb13.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/42d7d127534bd9082696331f1493eb13.png)'
- en: Image by Author.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: '[PRE29]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '![](../Images/f64d19f9524971652070572afac56b76.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f64d19f9524971652070572afac56b76.png)'
- en: Image by Author.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: Line Chart
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 折线图
- en: '`[pandas.Series.plot.line](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.plot.line.html)`
    — Plot Series or DataFrame as lines.'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '`[pandas.Series.plot.line](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.plot.line.html)`
    — 将Series或DataFrame绘制为折线图。'
- en: We can plot the line chart with `.plot()` method and `.plot.line()` .
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`.plot()`方法和`.plot.line()`绘制折线图。
- en: '[PRE30]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Both commands above yield the same result.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 上述两个命令产生相同的结果。
- en: '![](../Images/378745db7b15c4059019f249c78307fa.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/378745db7b15c4059019f249c78307fa.png)'
- en: Image by Author.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: If you notice, there is 2021 under Jan, maybe if we let the data start from
    2020 Jan, it will show 2020 as well?
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你注意到，1月下有2021年，或许如果我们让数据从2020年1月开始，它也会显示2020年？
- en: Let’s create the data frame with data points starting from the year 2020.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建一个数据点从2020年开始的数据框。
- en: '[PRE31]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '![](../Images/78a463395f065708813e4317cc4756da.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/78a463395f065708813e4317cc4756da.png)'
- en: Image by Author.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: '[PRE32]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Let’s plot the chart!
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们绘制图表！
- en: '![](../Images/eb605ca424ac3274fdb77d81c8e2e1a1.png)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/eb605ca424ac3274fdb77d81c8e2e1a1.png)'
- en: Image by Author.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: Yes! So the year will show under January, if you have data starting from the
    second or later month in the year, you may need to make a better title to remove
    clutter from your audience.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 是的！所以年份会显示在1月下，如果你有从年度第二个月或之后的数据，你可能需要更好的标题以减少观众的混乱。
- en: '[PRE33]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '![](../Images/7c863a77c9fd478635a6deee038fd232.png)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7c863a77c9fd478635a6deee038fd232.png)'
- en: Image by Author.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者提供。
- en: One last note to you, the `pandas` plot function required `matplotlib` library
    to be installed, or else it will cause an import error.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一点，`pandas`绘图功能需要安装`matplotlib`库，否则会导致导入错误。
- en: Conclusion
  id: totrans-215
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: In conclusion, we have covered how to format the DateTime series, and how to
    change a timestamp to a period or group them into periods by resampling. We also
    cover how to effectively filter the time series based on condition, and shift
    the data points up or down to learn new insights. Lastly, we also go thru how
    to swiftly create a chart to see the trend for the time series.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，我们已经涵盖了如何格式化DateTime序列，以及如何通过重新采样将时间戳更改为时间段或将其分组到时间段中。我们还涵盖了如何根据条件有效过滤时间序列，并上下移动数据点以获取新见解。最后，我们还介绍了如何快速创建图表以查看时间序列的趋势。
- en: That’s all for the `pandas` for time series. I hope you enjoy reading this article
    and hope it helps you to understand more about how to apply `pandas` to deal with
    time series. Thanks! 😊
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 关于`pandas`时间序列的内容就到这里。我希望你喜欢阅读这篇文章，并希望它能帮助你更好地了解如何应用`pandas`处理时间序列。谢谢！😊
- en: Stay Connected
  id: totrans-218
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 保持联系
- en: Subscribe on [YouTube](https://www.youtube.com/channel/UCiMtx0qbILP41Ot-pkk6eJw)
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 订阅 [YouTube](https://www.youtube.com/channel/UCiMtx0qbILP41Ot-pkk6eJw)
- en: Side Note
  id: totrans-220
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附注
- en: I have explained the possible manipulation you can perform on the DateTime variables
    in [Dealing with Dates in Python](https://medium.com/towards-data-science/dealing-with-dates-in-python-1b4069a07a0f).
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 我在 [处理 Python 中的日期] (https://medium.com/towards-data-science/dealing-with-dates-in-python-1b4069a07a0f)
    中解释了你可以对 DateTime 变量进行的可能操作。
- en: In [Report Automation Tips with Python](/report-automation-tips-with-python-783a9cd58e23),
    I have explained some tips on report automation. Check it out!
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [报告自动化技巧与 Python](/report-automation-tips-with-python-783a9cd58e23) 中，我解释了一些报告自动化的技巧。快来看看吧！
- en: Thank you and congrats for reading to the end 😊!
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢你阅读到最后，祝贺你😊！
- en: '![](../Images/9779752c92760d918255cb7694d8ab6f.png)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9779752c92760d918255cb7694d8ab6f.png)'
- en: Photo by [Hanny Naibaho](https://unsplash.com/@hannynaibaho?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/images/events/thank-you?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由 [Hanny Naibaho](https://unsplash.com/@hannynaibaho?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    提供，来源于 [Unsplash](https://unsplash.com/images/events/thank-you?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
