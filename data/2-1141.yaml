- en: How to Create a Time Series Network Graph Visualization in Python
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¦‚ä½•åœ¨ Python ä¸­åˆ›å»ºæ—¶é—´åºåˆ—ç½‘ç»œå›¾å¯è§†åŒ–
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/how-to-create-a-time-series-network-graph-visualization-in-python-8da0227fa4b8](https://towardsdatascience.com/how-to-create-a-time-series-network-graph-visualization-in-python-8da0227fa4b8)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/how-to-create-a-time-series-network-graph-visualization-in-python-8da0227fa4b8](https://towardsdatascience.com/how-to-create-a-time-series-network-graph-visualization-in-python-8da0227fa4b8)
- en: Use Plotly and NetworkX to show how a network evolves over time
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Plotly å’Œ NetworkX å±•ç¤ºç½‘ç»œå¦‚ä½•éšæ—¶é—´æ¼”å˜
- en: '[](https://ds-claudia.medium.com/?source=post_page-----8da0227fa4b8--------------------------------)[![Claudia
    Ng](../Images/e3f42d73e4a459a4a276aaa293fa6861.png)](https://ds-claudia.medium.com/?source=post_page-----8da0227fa4b8--------------------------------)[](https://towardsdatascience.com/?source=post_page-----8da0227fa4b8--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----8da0227fa4b8--------------------------------)
    [Claudia Ng](https://ds-claudia.medium.com/?source=post_page-----8da0227fa4b8--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://ds-claudia.medium.com/?source=post_page-----8da0227fa4b8--------------------------------)[![Claudia
    Ng](../Images/e3f42d73e4a459a4a276aaa293fa6861.png)](https://ds-claudia.medium.com/?source=post_page-----8da0227fa4b8--------------------------------)[](https://towardsdatascience.com/?source=post_page-----8da0227fa4b8--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----8da0227fa4b8--------------------------------)
    [Claudia Ng](https://ds-claudia.medium.com/?source=post_page-----8da0227fa4b8--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----8da0227fa4b8--------------------------------)
    Â·9 min readÂ·Oct 26, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒäº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----8da0227fa4b8--------------------------------)
    Â·é˜…è¯»æ—¶é—´ 9 åˆ†é’ŸÂ·2023å¹´10æœˆ26æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/32d47dc42370ba8c6be98f368dde3c7a.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/32d47dc42370ba8c6be98f368dde3c7a.png)'
- en: Visualizing changes in connections to a selected physician over time
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å¯è§†åŒ–ä¸é€‰å®šåŒ»ç”Ÿçš„è¿æ¥éšæ—¶é—´å˜åŒ–
- en: In this article, you will learn to create a time series network visualization
    in Python that shows how connections in a network develop over time, as illustrated
    in the animation above. Network data is very effective for revealing connections,
    and time series data can be useful for uncovering trends and anomalies in the
    underlying data.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•åœ¨ Python ä¸­åˆ›å»ºæ—¶é—´åºåˆ—ç½‘ç»œå¯è§†åŒ–ï¼Œå±•ç¤ºç½‘ç»œä¸­çš„è¿æ¥å¦‚ä½•éšæ—¶é—´å‘å±•ï¼Œå¦‚ä¸Šæ–¹åŠ¨ç”»æ‰€ç¤ºã€‚ç½‘ç»œæ•°æ®å¯¹äºæ­ç¤ºè¿æ¥éå¸¸æœ‰æ•ˆï¼Œè€Œæ—¶é—´åºåˆ—æ•°æ®å¯ä»¥ç”¨æ¥æ­ç¤ºåŸºç¡€æ•°æ®ä¸­çš„è¶‹åŠ¿å’Œå¼‚å¸¸ã€‚
- en: 'For this article, we will create an example using a Kaggle [dataset](https://www.kaggle.com/datasets/rohitrox/healthcare-provider-fraud-detection-analysis/data?select=Train_Beneficiarydata-1542865627584.csv)
    on healthcare provider fraud. (This dataset is currently licensed CC0: Public
    Domain on Kaggle. Please note that this dataset might not be accurate, and itâ€™s
    used in this article only for demonstration purposes).'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 'åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Kaggle ä¸Šå…³äºåŒ»ç–—æœåŠ¡æä¾›è€…æ¬ºè¯ˆçš„ [æ•°æ®é›†](https://www.kaggle.com/datasets/rohitrox/healthcare-provider-fraud-detection-analysis/data?select=Train_Beneficiarydata-1542865627584.csv)
    åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ã€‚ï¼ˆè¯¥æ•°æ®é›†ç›®å‰åœ¨ Kaggle ä¸Šçš„è®¸å¯è¯ä¸º CC0: å…¬ä¼—é¢†åŸŸã€‚è¯·æ³¨æ„ï¼Œè¯¥æ•°æ®é›†å¯èƒ½ä¸å‡†ç¡®ï¼Œä»…ç”¨äºæœ¬æ–‡æ¼”ç¤ºç›®çš„ï¼‰ã€‚'
- en: We will combine data from the provided link to get a cluster of fraudulent claims
    associated with the given attending physician, followed by plotting the connections
    between this physician and other entities (up to a certain number of hops away)
    over time based on the claim start date.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†ç»“åˆæä¾›çš„é“¾æ¥ä¸­çš„æ•°æ®ï¼Œè·å–ä¸ç»™å®šä¸»æ²»åŒ»ç”Ÿç›¸å…³çš„æ¬ºè¯ˆæ€§ç´¢èµ”çš„é›†ç¾¤ï¼Œç„¶åæ ¹æ®ç´¢èµ”å¼€å§‹æ—¥æœŸç»˜åˆ¶è¯¥åŒ»ç”Ÿä¸å…¶ä»–å®ä½“ä¹‹é—´çš„è¿æ¥ï¼ˆæœ€å¤šåˆ°æŸä¸ªè·³æ•°ï¼‰éšæ—¶é—´çš„å˜åŒ–ã€‚
- en: Be sure to have [Plotly](https://plotly.com/python/getting-started/) and [NetworkX](https://networkx.org/documentation/stable/install.html)
    installed in your Python virtual environment.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: ç¡®ä¿åœ¨ä½ çš„ Python è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…äº† [Plotly](https://plotly.com/python/getting-started/) å’Œ
    [NetworkX](https://networkx.org/documentation/stable/install.html)ã€‚
- en: If you want to learn an effective way to visualize how a network grows over
    time, read on!
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æƒ³å­¦ä¹ ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•æ¥å¯è§†åŒ–ç½‘ç»œå¦‚ä½•éšæ—¶é—´å¢é•¿ï¼Œè¯·ç»§ç»­é˜…è¯»ï¼
- en: Findings from Dataset
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ•°æ®é›†å‘ç°
- en: This dataset contains a total of 82,063 distinct physicians, of which 20,592
    have at least one fraudulent claim. While the majority of these physicians have
    only a handful of fraudulent claims, there is a small fraction who are prolific
    fraudsters.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ•°æ®é›†åŒ…å«æ€»å…± 82,063 åä¸åŒçš„åŒ»ç”Ÿï¼Œå…¶ä¸­ 20,592 åè‡³å°‘æœ‰ä¸€ä¸ªæ¬ºè¯ˆæ€§ç´¢èµ”ã€‚è™½ç„¶å¤§å¤šæ•°è¿™äº›åŒ»ç”Ÿåªæœ‰å°‘æ•°å‡ ä¸ªæ¬ºè¯ˆæ€§ç´¢èµ”ï¼Œä½†ä¹Ÿæœ‰å°‘æ•°äººæ˜¯æå…¶æ´»è·ƒçš„æ¬ºè¯ˆè€…ã€‚
- en: The top 25% of physicians have at least 5 claims, and the most egregious example
    is a physician with 2,534 fraudulent claims!
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ 25% çš„åŒ»ç”Ÿè‡³å°‘æœ‰ 5 ä¸ªç´¢èµ”ï¼Œæœ€ä¸¥é‡çš„ä¾‹å­æ˜¯ä¸€ä½æœ‰ 2,534 ä¸ªæ¬ºè¯ˆæ€§ç´¢èµ”çš„åŒ»ç”Ÿï¼
- en: While it is easy to calculate these statistics on the physician level, a time
    series network visualization is a good way to make sense of the scale of fraud
    committed by this physician and over what timeframe.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡åœ¨åŒ»ç”Ÿå±‚é¢è®¡ç®—è¿™äº›ç»Ÿè®¡æ•°æ®å¾ˆå®¹æ˜“ï¼Œä½†æ—¶é—´åºåˆ—ç½‘ç»œå¯è§†åŒ–æ˜¯ç†è§£è¯¥åŒ»ç”Ÿå®æ–½çš„è¯ˆéª—è§„æ¨¡åŠå…¶æ—¶é—´èŒƒå›´çš„ä¸€ä¸ªå¥½æ–¹æ³•ã€‚
- en: Finding Connections
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æŸ¥æ‰¾è¿æ¥
- en: Given a physician, what if we could find its connections that also have fraudulent
    claims up to a certain number of hops away?
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™å®šä¸€ä¸ªåŒ»ç”Ÿï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°å…¶è¿æ¥ï¼Œå¹¶ä¸”è¿™äº›è¿æ¥ä¹Ÿæœ‰æ¬ºè¯ˆæ€§ç´¢èµ”ï¼Œæœ€å¤šè·³æ•°ä¸ºä¸€å®šèŒƒå›´å†…ï¼Œä¼šæ€æ ·å‘¢ï¼Ÿ
- en: For this, we will write a function that takes a DataFrame with claims data,
    AttendingPhysician (string) and MaxHops (integer) as arguments and returns a DataFrame
    containing fraudulent claims associated with the given AttendingPhysician up to
    a maximum number of hops away.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—åŒ…å«ç´¢èµ”æ•°æ®çš„ DataFrameã€AttendingPhysicianï¼ˆå­—ç¬¦ä¸²ï¼‰å’Œ MaxHopsï¼ˆæ•´æ•°ï¼‰ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª
    DataFrameï¼ŒåŒ…å«ä¸ç»™å®š AttendingPhysician ç›¸å…³çš„æ¬ºè¯ˆæ€§ç´¢èµ”ï¼Œæœ€å¤šè·³æ•°ä¸º MaxHopsã€‚
- en: Starting from one physician, this function executes to identify beneficiaries
    and physicians with fraudulent claims connected to the cluster. It continues as
    long as the number of iterations is at or under MaxHops and it hasnâ€™t converged,
    meaning that the cluster size at the end of the previous iteration is smaller
    than the cluster size after this iteration.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ä¸€ä¸ªåŒ»ç”Ÿå¼€å§‹ï¼Œè¯¥å‡½æ•°æ‰§è¡Œä»¥è¯†åˆ«ä¸é›†ç¾¤è¿æ¥çš„å…·æœ‰æ¬ºè¯ˆæ€§ç´¢èµ”çš„å—ç›Šäººå’ŒåŒ»ç”Ÿã€‚åªè¦è¿­ä»£æ¬¡æ•°ç­‰äºæˆ–å°äº MaxHops å¹¶ä¸”å°šæœªæ”¶æ•›ï¼Œå³å‰ä¸€è½®è¿­ä»£çš„é›†ç¾¤å¤§å°å°äºè¿™ä¸€è½®è¿­ä»£çš„é›†ç¾¤å¤§å°ï¼Œå‡½æ•°å°†ç»§ç»­æ‰§è¡Œã€‚
- en: 'Below is a code snippet illustrating how to do this:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯ä¸€ä¸ªä»£ç ç‰‡æ®µï¼Œæ¼”ç¤ºå¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œï¼š
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Now that you know how to get connections of fraudulent claims associated with
    a given physician, letâ€™s pick a random physician. Letâ€™s use AttendingPhysician
    `PHY379763` as an example, who has only 2 claims but both were fraudulent.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ å·²ç»çŸ¥é“å¦‚ä½•è·å–ä¸ç»™å®šåŒ»ç”Ÿç›¸å…³çš„æ¬ºè¯ˆæ€§ç´¢èµ”è¿æ¥ï¼Œè®©æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªéšæœºåŒ»ç”Ÿã€‚ä»¥ AttendingPhysician `PHY379763` ä¸ºä¾‹ï¼Œè¯¥åŒ»ç”Ÿåªæœ‰
    2 ä¸ªç´¢èµ”ï¼Œä½†è¿™ä¸¤ä¸ªç´¢èµ”éƒ½æ˜¯æ¬ºè¯ˆæ€§çš„ã€‚
- en: After using the function above to find this physicianâ€™s connections up to 2
    hops away, the resulting dataset has 1,483 fraudulent claims containing 920 unique
    beneficiaries and 2 other physicians (so 3 distinct physicians altogether).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä½¿ç”¨ä¸Šè¿°å‡½æ•°æ‰¾åˆ°è¯¥åŒ»ç”Ÿçš„è¿æ¥ï¼ˆæœ€å¤š 2 è·³ï¼‰åï¼Œç»“æœæ•°æ®é›†ä¸­åŒ…å« 1,483 ä¸ªæ¬ºè¯ˆæ€§ç´¢èµ”ï¼Œæ¶‰åŠ 920 ä¸ªç‹¬ç‰¹å—ç›Šäººå’Œ 2 ä½å…¶ä»–åŒ»ç”Ÿï¼ˆæ€»å…± 3 ä½ä¸åŒçš„åŒ»ç”Ÿï¼‰ã€‚
- en: It is crazy to think that looking at the connections to a physician with only
    2 claims can expand so quickly!
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ï¼Œè§‚å¯Ÿåˆ°ä¸€ä¸ªä»…æœ‰ 2 ä¸ªç´¢èµ”çš„åŒ»ç”Ÿçš„è¿æ¥ï¼Œç«Ÿç„¶å¯ä»¥å¦‚æ­¤è¿…é€Ÿåœ°æ‰©å±•ï¼Œå®åœ¨ä»¤äººæƒŠè®¶ï¼
- en: Creating the Time Series Network Plot
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ›å»ºæ—¶é—´åºåˆ—ç½‘ç»œå›¾
- en: 'After gathering the connections data, we are now ready to create a visualization.
    This can be broken down into 4 steps: i) building the main graph, ii) drawing
    a graph per time interval, iii) plotting the graphs per time interval, iv) configuring
    the figure.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ”¶é›†å®Œè¿æ¥æ•°æ®åï¼Œæˆ‘ä»¬ç°åœ¨å‡†å¤‡åˆ›å»ºå¯è§†åŒ–ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸º 4 ä¸ªæ­¥éª¤ï¼ši) æ„å»ºä¸»å›¾ï¼Œii) æŒ‰æ—¶é—´é—´éš”ç»˜åˆ¶å›¾å½¢ï¼Œiii) æŒ‰æ—¶é—´é—´éš”ç»˜åˆ¶å›¾è¡¨ï¼Œiv)
    é…ç½®å›¾å½¢ã€‚
- en: I. Building the Graph
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: I. æ„å»ºå›¾å½¢
- en: 'To begin, initialize an empty graph using `networkx`and add data to it from
    the DataFrame. In this example, the graph will contain two sets of nodes: one
    set of nodes for beneficiaries and another set for physicians.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œä½¿ç”¨ `networkx` åˆå§‹åŒ–ä¸€ä¸ªç©ºå›¾ï¼Œå¹¶ä» DataFrame ä¸­æ·»åŠ æ•°æ®ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå›¾å°†åŒ…å«ä¸¤ç»„èŠ‚ç‚¹ï¼šä¸€ç»„æ˜¯å—ç›ŠäººèŠ‚ç‚¹ï¼Œå¦ä¸€ç»„æ˜¯åŒ»ç”ŸèŠ‚ç‚¹ã€‚
- en: It is important to label the nodes with {type, ID (`BeneID`or `AttendingPhysician`),
    claim start date (`ClaimStartDt`)}, because later on we will use the date to select
    nodes to remove for our monthly graphs.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™èŠ‚ç‚¹æ ‡æ³¨ {type, ID (`BeneID` æˆ– `AttendingPhysician`), ç´¢èµ”å¼€å§‹æ—¥æœŸ (`ClaimStartDt`)}
    æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºç¨åæˆ‘ä»¬å°†ä½¿ç”¨æ—¥æœŸæ¥é€‰æ‹©èŠ‚ç‚¹ï¼Œä»¥ä¾¿ä»æˆ‘ä»¬çš„æœˆåº¦å›¾è¡¨ä¸­åˆ é™¤è¿™äº›èŠ‚ç‚¹ã€‚
- en: Next, add the edges between connections. In this case, the edges exist between
    connected beneficiaries and physicians, and the label of these edges contain the
    {beneficiary ID (`BeneID`), physician ID (`AttendingPhysician`), claim start date
    (`ClaimStartDt`)}. Again, we will use the date to select edges to remove for the
    monthly graphs.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæ·»åŠ è¿æ¥ä¹‹é—´çš„è¾¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾¹å­˜åœ¨äºè¿æ¥çš„å—ç›Šäººå’ŒåŒ»ç”Ÿä¹‹é—´ï¼Œè¿™äº›è¾¹çš„æ ‡ç­¾åŒ…å« {å—ç›Šäºº ID (`BeneID`), åŒ»ç”Ÿ ID (`AttendingPhysician`),
    ç´¢èµ”å¼€å§‹æ—¥æœŸ (`ClaimStartDt`)}ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ—¥æœŸæ¥é€‰æ‹©è¾¹ï¼Œä»¥ä¾¿ä»æœˆåº¦å›¾è¡¨ä¸­åˆ é™¤è¿™äº›è¾¹ã€‚
- en: 'Below is what this section looks like:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯æœ¬èŠ‚çš„å†…å®¹ï¼š
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Note that the `RootPhysicianID` is the given physician ID that we started with,
    and we use a different label for this node so that we can give it a distinct color
    later on when plotting.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œ`RootPhysicianID` æ˜¯æˆ‘ä»¬å¼€å§‹æ—¶ä½¿ç”¨çš„ç»™å®šåŒ»ç”Ÿ IDï¼Œæˆ‘ä»¬ä¸ºè¯¥èŠ‚ç‚¹ä½¿ç”¨ä¸åŒçš„æ ‡ç­¾ï¼Œä»¥ä¾¿åœ¨ç»˜å›¾æ—¶å¯ä»¥ç»™å®ƒåˆ†é…ä¸åŒçš„é¢œè‰²ã€‚
- en: Also, it is important to get the positions of nodes and edges using the`nx.spring_layout()`
    function, so that we can supply these positions to monthly graphs in order for
    nodes and edges to appear consistently in the same positions over time later on
    in the plotting step.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œä½¿ç”¨ `nx.spring_layout()` å‡½æ•°è·å–èŠ‚ç‚¹å’Œè¾¹ç¼˜çš„ä½ç½®ä¹Ÿå¾ˆé‡è¦ï¼Œä»¥ä¾¿åœ¨ç»˜å›¾æ­¥éª¤ä¸­å°†è¿™äº›ä½ç½®æä¾›ç»™æ¯æœˆå›¾å½¢ï¼Œä»¥ä¾¿èŠ‚ç‚¹å’Œè¾¹ç¼˜å¯ä»¥åœ¨æ—¶é—´ä¸Šä¿æŒä¸€è‡´çš„ä½ç½®ã€‚
- en: II. Draw a Graph per Interval
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: II. æ¯ä¸ªé—´éš”ç»˜åˆ¶å›¾å½¢
- en: Next, decide on what time interval and frequency you would like your visualization
    to show. In this case, we will be using monthly intervals, so the resulting plot
    will create sliders for each month in the dataset.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œå†³å®šå¯è§†åŒ–å›¾è¡¨çš„æ—¶é—´é—´éš”å’Œé¢‘ç‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æŒ‰æœˆçš„é—´éš”ï¼Œå› æ­¤ç”Ÿæˆçš„å›¾è¡¨å°†ä¸ºæ•°æ®é›†ä¸­çš„æ¯ä¸ªæœˆåˆ›å»ºæ»‘å—ã€‚
- en: 'Start by identifying the months to loop through by grabbing the unique months
    in the dataset:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œé€šè¿‡æŠ“å–æ•°æ®é›†ä¸­å”¯ä¸€çš„æœˆä»½æ¥ç¡®å®šéœ€è¦å¾ªç¯çš„æœˆä»½ï¼š
- en: '[PRE2]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Then, loop through each month to duplicate the original graph (`G`) and create
    a new graph (`new_G`) that we can modify to show data for this month. Then, identify
    and grab nodes and edges to remove if they occur after this month based on the
    claim start date in the labels. Remove these nodes, edges and any self-loops:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œéå†æ¯ä¸ªæœˆä»¥å¤åˆ¶åŸå§‹å›¾è¡¨ï¼ˆ`G`ï¼‰ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾è¡¨ï¼ˆ`new_G`ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å®ƒä»¥æ˜¾ç¤ºè¯¥æœˆçš„æ•°æ®ã€‚ç„¶åï¼Œè¯†åˆ«å¹¶åˆ é™¤åœ¨æ­¤æœˆä»½ä¹‹åå‡ºç°çš„èŠ‚ç‚¹å’Œè¾¹ç¼˜ï¼ŒåŸºäºæ ‡ç­¾ä¸­çš„ç´¢èµ”å¼€å§‹æ—¥æœŸã€‚åˆ é™¤è¿™äº›èŠ‚ç‚¹ã€è¾¹ç¼˜å’Œä»»ä½•è‡ªç¯ï¼š
- en: '[PRE3]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Now that we have a graph created for every month, it is time to plot them and
    add them to a Plotly Figure.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬ä¸ºæ¯ä¸ªæœˆåˆ›å»ºäº†ä¸€ä¸ªå›¾å½¢ï¼Œæ˜¯æ—¶å€™ç»˜åˆ¶å®ƒä»¬å¹¶å°†å®ƒä»¬æ·»åŠ åˆ° Plotly å›¾ä¸­ã€‚
- en: III. Plotting the Graph
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: III. ç»˜åˆ¶å›¾å½¢
- en: To plot a network graph using Plotly, start by selecting the positions (x- and
    y-coordinates) of nodes and edges from the positions selected in the previous
    step stored in the variable `pos`.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: è¦ä½¿ç”¨ Plotly ç»˜åˆ¶ç½‘ç»œå›¾å½¢ï¼Œé¦–å…ˆä»å‰ä¸€æ­¥ä¸­å­˜å‚¨åœ¨å˜é‡ `pos` ä¸­çš„ä½ç½®é€‰æ‹©èŠ‚ç‚¹å’Œè¾¹ç¼˜çš„ x å’Œ y åæ ‡ã€‚
- en: We will also add extra text and/ or colors for different nodes, and then add
    these edges and nodes to the figure. We will choose and define colors for different
    nodes and store this in a dictionary called `color_mappings`. The keys correspond
    to the node labels and the values are the colorsâ€™ hex codes. Here is a helpful
    [website](https://palettes.shecodes.io/) for choosing colors that go well together.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜ä¼šä¸ºä¸åŒçš„èŠ‚ç‚¹æ·»åŠ é¢å¤–çš„æ–‡æœ¬å’Œ/æˆ–é¢œè‰²ï¼Œç„¶åå°†è¿™äº›è¾¹ç¼˜å’ŒèŠ‚ç‚¹æ·»åŠ åˆ°å›¾å½¢ä¸­ã€‚æˆ‘ä»¬å°†é€‰æ‹©å¹¶å®šä¹‰ä¸åŒèŠ‚ç‚¹çš„é¢œè‰²ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º `color_mappings`
    çš„å­—å…¸ä¸­ã€‚é”®å¯¹åº”äºèŠ‚ç‚¹æ ‡ç­¾ï¼Œå€¼æ˜¯é¢œè‰²çš„åå…­è¿›åˆ¶ä»£ç ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæœ‰ç”¨çš„ [ç½‘ç«™](https://palettes.shecodes.io/)ï¼Œå¯ä»¥é€‰æ‹©æ­é…å¥½çš„é¢œè‰²ã€‚
- en: 'Below is the function to plot a graph:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯ç»˜åˆ¶å›¾å½¢çš„å‡½æ•°ï¼š
- en: '[PRE4]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The function above is useful and will be reused to plot each monthly graph
    as such:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šé¢çš„å‡½æ•°å¾ˆæœ‰ç”¨ï¼Œå°†ç”¨äºç»˜åˆ¶æ¯ä¸ªæœˆçš„å›¾å½¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE5]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: IV. Configuring Figure
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IV. é…ç½®å›¾å½¢
- en: Up until this step, we have a main graph (`G`) containing all nodes and edges,
    monthly graphs (multiple `new_G`â€˜s) containing all nodes and edges with claim
    start dates up to that month, and a Plotly figure (`fig`) containing multiple
    traces that plots the network graphs for each month.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰èŠ‚ç‚¹å’Œè¾¹ç¼˜çš„ä¸»å›¾ï¼ˆ`G`ï¼‰ï¼Œå¤šä¸ªåŒ…å«æ‰€æœ‰èŠ‚ç‚¹å’Œè¾¹ç¼˜ï¼ˆå«ç´¢èµ”å¼€å§‹æ—¥æœŸåˆ°è¯¥æœˆçš„ `new_G`ï¼‰çš„æ¯æœˆå›¾å½¢ï¼Œä»¥åŠä¸€ä¸ªåŒ…å«å¤šä¸ªæ•°æ®é›†çš„
    Plotly å›¾ï¼ˆ`fig`ï¼‰ï¼Œç»˜åˆ¶äº†æ¯ä¸ªæœˆçš„ç½‘ç»œå›¾å½¢ã€‚
- en: Next, we have to add the steps for the slider. There should be a step for each
    month on the slider, and we need to configure what traces to show at each step.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æ»‘å—çš„æ­¥éª¤ã€‚æ»‘å—ä¸Šåº”è¯¥æœ‰æ¯ä¸ªæœˆçš„æ­¥éª¤ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ¯ä¸ªæ­¥éª¤æ˜¾ç¤ºçš„æ•°æ®æ˜¾ç¤ºã€‚
- en: 'Remember that we have two sets of traces, one for nodes and one for edges for
    each month, so we will set the visibility for these traces accordingly:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: è®°ä½ï¼Œæˆ‘ä»¬æ¯ä¸ªæœˆæœ‰ä¸¤ä¸ªæ•°æ®é›†ï¼Œä¸€ä¸ªæ˜¯èŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯è¾¹ç¼˜ï¼Œå› æ­¤æˆ‘ä»¬å°†ç›¸åº”åœ°è®¾ç½®è¿™äº›æ•°æ®é›†çš„å¯è§æ€§ï¼š
- en: '[PRE6]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'After creating steps for the slider, we can update the layout of the figure
    to add the slider, title and other miscellaneous configurations:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸ºæ»‘å—åˆ›å»ºæ­¥éª¤åï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°å›¾å½¢çš„å¸ƒå±€ï¼Œæ·»åŠ æ»‘å—ã€æ ‡é¢˜å’Œå…¶ä»–æ‚é¡¹é…ç½®ï¼š
- en: '[PRE7]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: All that is left is to show the figure and your time series network plot should
    appear!
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: å‰©ä¸‹çš„å°±æ˜¯æ˜¾ç¤ºå›¾å½¢ï¼Œä½ çš„æ—¶é—´åºåˆ—ç½‘ç»œå›¾åº”è¯¥ä¼šå‡ºç°ï¼
- en: 'Finally, use the following command if you wish to save the interactive plot
    as an html file:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œå¦‚æœä½ å¸Œæœ›å°†äº¤äº’å¼å›¾ä¿å­˜ä¸º HTML æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
- en: '[PRE8]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Conclusion
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: Network visualizations are very powerful, and adding a time series component
    make them even more informative! Visualizing the growth of a network has many
    applications in various fields, ranging from understanding the origins of a disease
    to following the expansion of services and more.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ç½‘ç»œå¯è§†åŒ–éå¸¸å¼ºå¤§ï¼ŒåŠ å…¥æ—¶é—´åºåˆ—ç»„ä»¶ä½¿å…¶æ›´åŠ ä¿¡æ¯ä¸°å¯Œï¼å¯è§†åŒ–ç½‘ç»œçš„å¢é•¿åœ¨å„ç§é¢†åŸŸéƒ½æœ‰è®¸å¤šåº”ç”¨ï¼Œä»ç†è§£ç–¾ç—…çš„èµ·æºåˆ°è·Ÿè¸ªæœåŠ¡çš„æ‰©å±•ç­‰ç­‰ã€‚
- en: The example we saw involved finding fraudulent claims associated with a selected
    physician up to two hops away, and then plotting this out over time to see how
    fraud for this cluster developed.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çœ‹åˆ°çš„ä¾‹å­æ¶‰åŠåˆ°æŸ¥æ‰¾ä¸é€‰å®šåŒ»ç”Ÿç›¸å…³çš„æ¬ºè¯ˆæ€§ç´¢èµ”ï¼Œæœ€å¤šä¸¤æ­¥è¿œï¼Œç„¶åç»˜åˆ¶è¿™äº›æ•°æ®ï¼ŒæŸ¥çœ‹è¯¥é›†ç¾¤çš„æ¬ºè¯ˆè¡Œä¸ºå¦‚ä½•å‘å±•ã€‚
- en: 'To recap, you learned how to find connections to a given entity up to a maximum
    number of hop and create a time series network plot by:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»ç»“ä¸€ä¸‹ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•æ‰¾åˆ°ä¸ç»™å®šå®ä½“çš„è¿æ¥ï¼Œæœ€å¤šç»è¿‡çš„è·³æ•°ï¼Œå¹¶é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºæ—¶é—´åºåˆ—ç½‘ç»œå›¾ï¼š
- en: i) Building the main graph (`G`),
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: i) æ„å»ºä¸»è¦å›¾ï¼ˆ`G`ï¼‰ï¼Œ
- en: ii) Drawing a new graph for each time interval (monthly in this case),
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ii) ä¸ºæ¯ä¸ªæ—¶é—´é—´éš”ï¼ˆåœ¨æ­¤æƒ…å†µä¸‹ä¸ºæ¯æœˆï¼‰ç»˜åˆ¶æ–°å›¾ï¼Œ
- en: iii) Plotting each monthly graph (multiple `new_G`â€™s) and adding them to the
    figure (`fig`),
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: iii) ç»˜åˆ¶æ¯ä¸ªæœˆçš„å›¾è¡¨ï¼ˆå¤šä¸ª `new_G`ï¼‰ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°å›¾å½¢ï¼ˆ`fig`ï¼‰ä¸­ï¼Œ
- en: iv) Configuring the slider for the figure.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: iv) é…ç½®å›¾å½¢çš„æ»‘å—ã€‚
- en: It is fascinating to visualize how the connections between physicians and beneficiaries
    grew over time!
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: çœ‹åˆ°åŒ»ç”Ÿå’Œå—ç›Šäººä¹‹é—´çš„è”ç³»éšç€æ—¶é—´çš„æ¨ç§»è€Œå¢é•¿ï¼ŒçœŸæ˜¯ä»¤äººç€è¿·ï¼
- en: Comment below with your thoughts and learnings. What data will you try this
    on? What insights did you draw from creating the visualization?
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹é¢è¯„è®ºä½ çš„æƒ³æ³•å’Œå­¦ä¹ ç»å†ã€‚ä½ ä¼šå°è¯•ç”¨è¿™äº›æ•°æ®åšä»€ä¹ˆï¼Ÿåœ¨åˆ›å»ºå¯è§†åŒ–è¿‡ç¨‹ä¸­ä½ å¾—å‡ºäº†ä»€ä¹ˆè§è§£ï¼Ÿ
- en: Link to this [Jupyter notebook](https://github.com/claudian37/DS_Portfolio/tree/master/healthcare_fraud_network_viz)
    on Github
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: é“¾æ¥åˆ°è¿™ä¸ª [Jupyter notebook](https://github.com/claudian37/DS_Portfolio/tree/master/healthcare_fraud_network_viz)
    åœ¨ Github ä¸Š
- en: '*Do you feel stuck in your analyst role? You might even feel a sense of imposter
    syndrome trying to learn new skills without a PhD or computer science background.*'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '*ä½ åœ¨åˆ†æå¸ˆè§’è‰²ä¸­æ„Ÿåˆ°å›°æƒ‘å—ï¼Ÿä½ å¯èƒ½ä¼šæ„Ÿåˆ°ä¸€ç§å†’åé¡¶æ›¿ç»¼åˆç—‡ï¼Œè¯•å›¾åœ¨æ²¡æœ‰åšå£«å­¦ä½æˆ–è®¡ç®—æœºç§‘å­¦èƒŒæ™¯çš„æƒ…å†µä¸‹å­¦ä¹ æ–°æŠ€èƒ½ã€‚*'
- en: '*I transitioned to Data Science in 2020 without a technical background, and
    I want to help others do the same. Iâ€™ve created a* [***FREE Five-Day Data Science
    LaunchPad Email Course***](http://www.ds-claudia.com) *to jump-start your career.
    ğŸš€*'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '*æˆ‘åœ¨ 2020 å¹´è½¬è¡Œæ•°æ®ç§‘å­¦ï¼Œæ²¡æœ‰æŠ€æœ¯èƒŒæ™¯ï¼Œæˆ‘å¸Œæœ›å¸®åŠ©å…¶ä»–äººåšåˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘åˆ›å»ºäº†ä¸€ä¸ª* [***å…è´¹äº”å¤©æ•°æ®ç§‘å­¦å¯åŠ¨è¯¾ç¨‹ç”µå­é‚®ä»¶è¯¾ç¨‹***](http://www.ds-claudia.com)
    *æ¥å¯åŠ¨ä½ çš„èŒä¸šç”Ÿæ¶¯ã€‚ğŸš€*'
- en: '[www.ds-claudia.com](http://www.ds-claudia.com)'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '[www.ds-claudia.com](http://www.ds-claudia.com)'
