- en: 'Optimization, Newton’s Method, & Profit Maximization: Part 3 — Applied Profit
    Maximization'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优化、牛顿法与利润最大化：第三部分 — 应用利润最大化
- en: 原文：[https://towardsdatascience.com/optimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd?source=collection_archive---------15-----------------------#2023-03-01](https://towardsdatascience.com/optimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd?source=collection_archive---------15-----------------------#2023-03-01)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/optimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd?source=collection_archive---------15-----------------------#2023-03-01](https://towardsdatascience.com/optimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd?source=collection_archive---------15-----------------------#2023-03-01)
- en: '![](../Images/d17a89745a40cf803080e2086b011c88.png)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d17a89745a40cf803080e2086b011c88.png)'
- en: All Images by Author
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 所有图片由作者提供
- en: Learn how to apply optimization & econometric techniques to solve an applied
    profit maximization problem
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 学习如何应用优化和计量经济学技术来解决实际利润最大化问题
- en: '[](https://medium.com/@jakepenzak?source=post_page-----23a8c16167cd--------------------------------)[![Jacob
    Pieniazek](../Images/2d9c6295d39fcaaec4e62f11c359cb29.png)](https://medium.com/@jakepenzak?source=post_page-----23a8c16167cd--------------------------------)[](https://towardsdatascience.com/?source=post_page-----23a8c16167cd--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----23a8c16167cd--------------------------------)
    [Jacob Pieniazek](https://medium.com/@jakepenzak?source=post_page-----23a8c16167cd--------------------------------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@jakepenzak?source=post_page-----23a8c16167cd--------------------------------)[![Jacob
    Pieniazek](../Images/2d9c6295d39fcaaec4e62f11c359cb29.png)](https://medium.com/@jakepenzak?source=post_page-----23a8c16167cd--------------------------------)[](https://towardsdatascience.com/?source=post_page-----23a8c16167cd--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----23a8c16167cd--------------------------------)
    [Jacob Pieniazek](https://medium.com/@jakepenzak?source=post_page-----23a8c16167cd--------------------------------)'
- en: ·
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6f0948d99b1c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd&user=Jacob+Pieniazek&userId=6f0948d99b1c&source=post_page-6f0948d99b1c----23a8c16167cd---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----23a8c16167cd--------------------------------)
    ·19 min read·Mar 1, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F23a8c16167cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd&user=Jacob+Pieniazek&userId=6f0948d99b1c&source=-----23a8c16167cd---------------------clap_footer-----------)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6f0948d99b1c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd&user=Jacob+Pieniazek&userId=6f0948d99b1c&source=post_page-6f0948d99b1c----23a8c16167cd---------------------post_header-----------)
    发表在 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----23a8c16167cd--------------------------------)
    ·19 分钟阅读·2023年3月1日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F23a8c16167cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd&user=Jacob+Pieniazek&userId=6f0948d99b1c&source=-----23a8c16167cd---------------------clap_footer-----------)'
- en: --
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F23a8c16167cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd&source=-----23a8c16167cd---------------------bookmark_footer-----------)'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F23a8c16167cd&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Foptimization-newtons-method-profit-maximization-part-3-applied-profit-maximization-23a8c16167cd&source=-----23a8c16167cd---------------------bookmark_footer-----------)'
- en: This article is the **3rd**, and final, in a 3 part series. In the [1st part](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565),
    we studied basic optimization theory. Then, in [pt. 2](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770),
    we extended this theory to constrained optimization problems. Now, in pt. 3, we
    will apply the optimization theory covered, as well as econometric and economic
    theory, to solve a profit maximization problem.
  id: totrans-10
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 本文是**第三**篇，也是最后一篇，在这个三部分系列中。在[第一部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)中，我们研究了基本优化理论。然后，在[第二部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)中，我们将这一理论扩展到约束优化问题。现在，在第三部分中，我们将应用所涉及的优化理论，以及计量经济学和经济学理论，来解决利润最大化问题。
- en: Suppose, as a data scientist working for your company, you are tasked with estimating
    the optimal amount of money to allocate towards different advertising channels
    that will maximize the overall profit of a certain product line. Furthermore,
    suppose you are given constraints on these allocation decisions, such as the maximum
    total spend you have to allocate and/or minimum amounts that have to spent in
    certain channels. In this article, we are going to combine the optimization theory
    covered in [part 1](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)
    and [part 2](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)
    of this series, along with additional economic and econometric theory to tackle
    a theoretical profit maximization problem of this sorts — which we will flesh
    out in more detail in this article.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 假设，作为公司的一名数据科学家，你的任务是估算最佳的资金分配，以最大化某产品线的整体利润。此外，假设你在这些分配决策上有一些约束条件，例如必须分配的总花费上限和/或必须在某些渠道上花费的最低金额。在本文中，我们将结合[第一部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)和[第二部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)中涉及的优化理论，以及额外的经济学和计量经济学理论，来处理这种理论上的利润最大化问题——我们将在本文中进一步详细阐述。
- en: The goal of this article is to tie together what we have learned thus far and
    my hope is to motivate and inspire readers on how to incorporate these techniques
    into an applied setting. It is not meant to be a comprehensive solution to the
    problem covered as nuances and idiosyncrasies can, of course, complicate theoretical
    examples. Furthermore, many of the techniques covered have much more optimized
    implementations in python via packages such as [pyomo](https://www.pyomo.org/),
    [SciPy](https://docs.scipy.org/doc/scipy/tutorial/optimize.html), etc. Nevertheless,
    I hope to provide a strong framework for constructing applied optimization problems.
    Let’s dive into it!
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本文的目标是将我们迄今为止学到的知识结合起来，我希望能激励和启发读者如何将这些技术应用到实际环境中。本文并非针对所讨论问题的全面解决方案，因为细微差别和特性当然会使理论示例复杂化。此外，许多涉及的技术在
    Python 中通过像[pyomo](https://www.pyomo.org/)、[SciPy](https://docs.scipy.org/doc/scipy/tutorial/optimize.html)等包有更优化的实现。尽管如此，我希望能提供一个构建应用优化问题的强大框架。让我们深入探讨吧！
- en: '*In* [*part 1*](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)*,
    we covered basic optimization theory — including 1) setting up and solving a simple
    single variable optimization problem analytically, 2) iterative optimization schemes
    — namely, gradient descent & Newton’s Method, and 3) implementing Newton’s method
    by hand and in python for a multi-dimensional optimization problem. In* [*part
    2*](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)*,
    we covered constrained optimization theory — including 1) incorporating equality
    constraints and 2) incorporating inequality constraints into our optimization
    problems and solving them via Newton’s Method. This article is designed to be
    accessible for those who are already familiar with the content covered in* [*part
    1*](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)
    *and* [*part 2*](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)*.*'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '*在*[*第1部分*](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)*中，我们涵盖了基本的优化理论
    — 包括1) 设置并通过分析解决一个简单的单变量优化问题，2) 迭代优化方案 — 即，梯度下降和牛顿法，和3) 通过手工和python实现牛顿法解决多维优化问题。在*[*第2部分*](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)*中，我们涵盖了有约束优化理论
    — 包括1)将等式约束和2)将不等式约束纳入我们的优化问题中，并通过牛顿法解决它们。本文旨在为那些已经熟悉*[*第1部分*](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)*和*[*第2部分*](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)*中涵盖的内容的人士提供帮助。**'
- en: Optimization Theory ([Part 1](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)
    & [Part 2](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)
    Recap)
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 优化理论（[第1部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)
    & [第2部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)
    总结）
- en: 'A mathematical optimization problem can be formulated abstractly as follows:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 一个数学优化问题可以抽象地表述如下：
- en: '![](../Images/91d0602859b3778af388eb855d77cd2a.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/91d0602859b3778af388eb855d77cd2a.png)'
- en: (1)
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: (1)
- en: 'where we choose real values of the vector **x** that minimize the *objective
    function* *f*(**x**) (or maximize -*f*(**x**)) subject to the *inequality constraints*
    *g*(**x**) and *equality constraints* *h*(**x**). In [part 2](/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770),
    we discussed how to incorporate these constraints directly into our optimization
    problem. Notably, using Lagrange Multipliers and Logarithmic Barrier functions
    we can construct a new *objective function* ***O***(**x, Λ*,*** *ρ*):'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '我们选择使向量**x**的实值最小化*目标函数**f**(**x**)（或最大化-*f**(**x**)），受*不等式约束**g**(**x**)和*等式约束**h**(**x**)约束。在[第2部分](/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)中，我们讨论了如何将这些约束直接纳入我们的优化问题中。值得注意的是，使用拉格朗日乘子和对数障碍函数，我们可以构建一个新的*目标函数***O***(**x,
    Λ*,*** *ρ*):'
- en: '![](../Images/46185c03e54a45fd89007a0ab112edb1.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/46185c03e54a45fd89007a0ab112edb1.png)'
- en: (2) Generalizable function for constrained optimization problems
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: (2) 有约束优化问题的泛化函数
- en: 'where **Λ** is the vector of Lagrange multipliers associated with each *equality
    constraints* *h*(**x**) and*ρ* is the barrier parameter associated with all of
    the *inequality constraints* *g*(**x**). We can then solve this new *objective
    function* iterating by choose a starting value *ρ* (*note that large functional
    values of the objective function will require much larger starting values of ρ
    to scale the penalization*)*,* optimize the new objective function evaluated at
    *ρ* using Newton’s method iterative scheme, then update *ρ* by slowly decreasing
    it (*ρ* → 0), and repeat until convergence — where Newton’s Method iterative scheme
    is as follows:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 其中**Λ**是与每个*等式约束* *h*(**x**)相关的拉格朗日乘子向量，而*ρ*是与所有*不等式约束* *g*(**x**)相关的障碍参数。然后我们可以通过选择一个初始值*ρ*（*注意，目标函数的大功能值会要求更大的初始值ρ以调整惩罚*），使用牛顿法迭代优化新目标函数，接着通过逐渐减小*ρ*（*ρ*
    → 0）来更新*ρ*，并重复直到收敛 — 牛顿法迭代方案如下：
- en: '![](../Images/aeea601b1cde8c66b5fd09c5d76f1710.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/aeea601b1cde8c66b5fd09c5d76f1710.png)'
- en: (3) Newton’s Method Iterative Scheme
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: (3) 牛顿法迭代方案
- en: 'where **H**(**x**)and **∇***f*(**x**) denote the Hessian and gradient ofour
    *objective function* ***O***(**x, Λ*,*** *ρ*), respectively. Convergence is obtained
    when we reach convergence across one or more of the following criteria:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 其中**H**(**x**)和**∇***f*(**x**)分别表示我们的*目标函数* ***O***(**x, Λ*,*** *ρ*)的海森矩阵和梯度。当我们达到以下一个或多个标准的收敛时，即表示收敛：
- en: '![](../Images/855991698a9b3c03d179ffcba7c2ef8c.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/855991698a9b3c03d179ffcba7c2ef8c.png)'
- en: (4) Convergence Criteria for Iterative Optimization Schemes
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: (4) 迭代优化方案的收敛标准
- en: In python, utilizing [SymPy](https://www.sympy.org/en/index.html), we have 4
    functions. A function that obtains the gradient of our SymPy function, the Hessian
    of our SymPy function, solves unconstrained optimization problem via Newton’s
    method, and solves a constrained optimization problem via Newton’s method according
    to the generalization eq. (2) (see [part 1](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)
    and [part 2](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)
    of series for more in-depth coverage of this material). See the appendix for these
    functions.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在Python中，利用[SymPy](https://www.sympy.org/en/index.html)，我们有4个函数。一个函数用于获取我们的SymPy函数的梯度，一个函数用于获取我们的SymPy函数的海森矩阵，一个函数通过牛顿法解决无约束优化问题，另一个函数通过牛顿法解决根据广义方程（2）的有约束优化问题（有关该材料的更详细覆盖，请参见[第1部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)和[第2部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)）。有关这些函数，请参见附录。
- en: 'To solve a constrained optimization problem, we can run the following code
    (Make sure starting values are in the feasible range of inequality constraints!):'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 要解决一个有约束的优化问题，我们可以运行以下代码（确保起始值在不等式约束的可行范围内！）：
- en: '[PRE0]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'With the corresponding output:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 对应的输出为：
- en: '![](../Images/50feae3f14b28f95d2f2da062f6e5c6d.png)![](../Images/5965f76b2276c8b3ecffa41085fc5f14.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/50feae3f14b28f95d2f2da062f6e5c6d.png)![](../Images/5965f76b2276c8b3ecffa41085fc5f14.png)'
- en: If the material above felt foreign or you need a more rigorous recap, then I
    recommend taking a look at [part 1](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)
    and [part 2](/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)
    of this series which will provide a more in-depth survey of the material above.
    For the remainder of this article, we will first discuss basic profit maximization
    & econometric theory and then move into solving the theoretical example.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果上述材料感觉陌生或需要更详细的回顾，建议查看本系列的[第1部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)和[第2部分](/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)，这些将提供更深入的材料概述。对于本文的其余部分，我们将首先讨论基本的利润最大化和计量经济学理论，然后进入理论示例的解决方案。
- en: Applied Profit Maximization
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 应用利润最大化
- en: '*Suppose we have a $100,000 advertising budget and all of it must be spent.
    We are tasked with choosing the optimal amount of this budget to allocate towards
    two types of advertisement channels (digital ads and television ads) that maximize
    the overall profit for a particular product line. Furthermore, suppose that we
    must allocate at a minimum of $20k to television advertising and $10k to digital
    advertising.*'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '*假设我们有一个$100,000的广告预算，并且必须全部花费。我们的任务是选择最优的预算分配到两种广告渠道（数字广告和电视广告），以最大化某一产品线的整体利润。此外，假设我们必须至少分配$20,000到电视广告和$10,000到数字广告。*'
- en: '**Theoretical Formulation**'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '**理论公式**'
- en: 'Let’s now mathematically formulate the profit maximization problem we seek
    to solve:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将数学地制定我们寻求解决的利润最大化问题：
- en: '![](../Images/551a5821664dd68bc5bed9994ed29576.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/551a5821664dd68bc5bed9994ed29576.png)'
- en: (5) [Link](https://math.embed.fun/8uidE7jJM8PZVuegURC75K)
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: (5) [链接](https://math.embed.fun/8uidE7jJM8PZVuegURC75K)
- en: 'where *π(*⋅)denotes the profit function, *δ* denotes digital ad spend, *τ*
    denotes television ad spend, and (⋅) is a placeholder for additional variables.​
    Note that we are minimizing the negative of *π(*⋅) which is equivalent to maximizing
    *π(*⋅). The profit function is defined as follows:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '*π(*⋅)表示利润函数，*δ*表示数字广告支出，*τ*表示电视广告支出，(⋅)是额外变量的占位符。请注意，我们在最小化*π(*⋅)的负值，这等同于最大化*π(*⋅)。利润函数定义如下：'
- en: '![](../Images/0a5b5ecc92b703ba2c125df45da77799.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0a5b5ecc92b703ba2c125df45da77799.png)'
- en: (6) [Link](https://math.embed.fun/nUyUXLuje8daREdpVGejco)
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: (6) [链接](https://math.embed.fun/nUyUXLuje8daREdpVGejco)
- en: 'where *p* denotes the price, *q(δ, τ,* ⋅) denotes the quantity demanded function,
    and C*(q(⋅), δ, τ)* denotes the cost function which, intuitively, is a direct
    function of the quantity (if we make more it will cost more to produce) and how
    much we spend on advertising. The cost function can also take on additional inputs,
    but for the sake of demonstration we will keep it as a function of quantity and
    advertising costs. Notice that our choices of *δ* and *τ* impact the profit function
    directly through theirimpact of quantity demanded and the cost function. In order
    to add tractability to our optimization problem, we will need to use econometric
    techniques to estimate our quantity function. Once we have specified our cost
    function and estimated the quantity function, we can then solve our optimization
    problem as follows:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '*p*表示价格，*q(δ, τ,* ⋅)表示需求量函数，C*(q(⋅), δ, τ)*表示成本函数，直观上，它是数量的直接函数（如果我们生产更多，成本会增加）以及广告支出的多少。成本函数还可以接受额外输入，但为了演示，我们将其保持为数量和广告费用的函数。请注意，我们选择的*δ*和*τ*通过其对需求量和成本函数的影响直接影响利润函数。为了增加优化问题的可操作性，我们需要使用计量经济学技术来估计我们的需求量函数。一旦我们指定了成本函数并估计了需求量函数，我们可以按如下方式解决优化问题：'
- en: '![](../Images/da222d55a1b6237d33e88b62282b9d4b.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/da222d55a1b6237d33e88b62282b9d4b.png)'
- en: (7) [Link](https://math.embed.fun/adaiCXKX3TzPu72P89yg2E)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: (7) [链接](https://math.embed.fun/adaiCXKX3TzPu72P89yg2E)
- en: 'where *q_hat* is our estimated econometric model for quantity demanded. Before
    we lay out the econometric specification of our quantity model, it is necessary
    that we discuss an important note regarding the required assumptions for this
    optimization problem to prove tractable. It is imperative that we obtain the *causal
    estimates* of digital and television advertising on the quantity demanded. In
    the economists jargon, digital and television advertising need be *exogenous*
    in the econometric model*.* That is, they are uncorrelated with the error in the
    model. Exogeneity can be achieved in two ways: 1) We have the correct structural
    specification of the econometric model for the impact of digital and television
    advertising on quantity demanded (i.e., we include all of the relevant variables
    that are correlated with both quantity demanded and digital & television advertising
    spend) *or* 2) We have random variation of digital & television advertising spend
    (this can be achieved from randomly varying spend over time to see how demand
    responds).'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *q_hat* 是我们对需求量的经济计量模型的估计。在我们阐述需求量模型的经济计量规格之前，有必要讨论一个关于优化问题所需假设的重要说明，以证明其可操作性。我们必须获得数字广告和电视广告对需求量的
    *因果估计*。用经济学术语来说，数字广告和电视广告在经济计量模型中需要是 *外生* 的。也就是说，它们与模型中的误差不相关。外生性可以通过两种方式实现：1）我们有正确的经济计量模型结构规范，以衡量数字广告和电视广告对需求量的影响（即，我们包括所有与需求量以及数字和电视广告支出相关的变量）；*或*
    2）我们有随机变化的数字和电视广告支出（这可以通过随时间随机变化的支出来观察需求的响应）。
- en: Intuitively, exogeneity is required because it is necessary to capture the causal
    impact of changing advertising spend — that is, what will happen, on average,
    if we change the values of the advertising spend. If the effect we estimate is
    *not* causal then the changes we make in advertising spend will *not* correspond
    to the true change in quantity demanded. Note the model need not make the best
    predictions for quantity demanded, but rather accurately capture the causal relationship.
    See my [prior article](https://medium.com/towards-data-science/controlling-for-x-9cb51652f7ad)
    that discusses the exogeneity assumption in more depth.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 直观上，外生性是必需的，因为需要捕捉广告支出变化的因果影响——也就是说，如果我们改变广告支出的数值，平均而言会发生什么。如果我们估计的效果 *不是* 因果的，那么我们对广告支出的变化
    *不会* 对应于需求量的真实变化。注意，模型不需要为需求量做出最佳预测，而是需要准确捕捉因果关系。请参阅我的 [前一篇文章](https://medium.com/towards-data-science/controlling-for-x-9cb51652f7ad)，其中更深入地讨论了外生性假设。
- en: 'Let’s now suppose we specify the following econometric model for quantity demanded
    indexed by time *t*:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 现在假设我们为按时间 *t* 索引的需求量指定以下经济计量模型：
- en: '![](../Images/a541fd2c7dca42039a2484286c4a780d.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a541fd2c7dca42039a2484286c4a780d.png)'
- en: (8) [Link](https://math.embed.fun/ivouwfcw3QYx3ojZMXNt6n)
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: (8) [链接](https://math.embed.fun/ivouwfcw3QYx3ojZMXNt6n)
- en: where *β* and *γ* are the estimates of the impact of the natural log of digital
    ad spend, *δ,* and television ad spend, *τ*, respectively. Additionally, *α* is
    our intercept, *ϕ*1 and *ϕ2* are estimates of the [autoregressive](https://en.wikipedia.org/wiki/Autoregressive_model)
    components of quantity demanded, ***S*** denotes seasonality, **X** is the set
    of all relevant covariates and lagged covariates along with the matrix of their
    coefficient estimates **Ω**, and*ϵ* is the error term*.* Furthermore, assume that
    digital and television advertising satisfy the exogeneity assumption *conditional*
    on **X**, ***S***, and the autoregressive components within our model. That is,
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *β* 和 *γ* 分别是数字广告支出自然对数的影响估计值 *δ* 和电视广告支出的影响估计值 *τ*。此外，*α* 是我们的截距，*ϕ*1 和
    *ϕ2* 是需求量的 [自回归](https://en.wikipedia.org/wiki/Autoregressive_model) 组件的估计值，***S***
    表示季节性，**X** 是所有相关协变量和滞后协变量的集合及其系数估计矩阵 **Ω**，*ϵ* 是误差项。此外，假设数字和电视广告在 **X**、***S***
    和我们模型中的自回归组件 *条件下* 满足外生性假设。也就是说，
- en: '![](../Images/22a0120665e2fa3bdb6da7fc1bbde87d.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/22a0120665e2fa3bdb6da7fc1bbde87d.png)'
- en: (9) [Link](https://math.embed.fun/qaR3eKYoxckpQ16jLtVR2R)
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: (9) [链接](https://math.embed.fun/qaR3eKYoxckpQ16jLtVR2R)
- en: 'Why the natural log of digital and television ad spend you may ask? This is
    by no means a required nor a definitive decision in this context, but I am seeking
    to demonstrate how variable transformations can capture hypotheses about the relationship
    between our choice variables and the outcomes of interest. In our case, suppose
    we hypothesize that the impact on ad spend increases sharply initially, but gradually
    levels out (ie, the law of diminishing returns). This is exactly what the logarithm
    transformation will allow us to model. Observe:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会问，为什么使用数字和电视广告支出的自然对数？这并不是在此背景下的必需或决定性的选择，但我旨在展示变量变换如何捕捉我们选择变量与感兴趣结果之间的关系。以我们的案例为例，假设我们假设广告支出的影响最初急剧增加，但逐渐趋于平稳（即收益递减法则）。这正是对数变换允许我们建模的内容。请观察：
- en: '![](../Images/422c7918c3906d59f06da82c68775485.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/422c7918c3906d59f06da82c68775485.png)'
- en: 'Note that the cost functional form can generally be more easily known internally.
    Thus, let’s also specify the functional form of our cost function:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，成本函数的形式通常可以在内部更容易得知。因此，我们也来指定我们的成本函数的形式：
- en: '![](../Images/43b4263219befa1ccb0fc56aaf5b03f6.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/43b4263219befa1ccb0fc56aaf5b03f6.png)'
- en: (10) [Link](https://math.embed.fun/bmuMitXmNJ8yHcHiLp2QuY)
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: (10) [链接](https://math.embed.fun/bmuMitXmNJ8yHcHiLp2QuY)
- en: Here we can see that we have a cost *ζ* associated with each unit produced and
    this cost is discounted as we produce more (think a discount for larger contracts
    or [economies of scale](https://en.wikipedia.org/wiki/Economies_of_scale)). We
    also simply sum digital ad spend and television ad spend into our total cost.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以看到每生产一个单位都有一个成本*ζ*，并且随着生产量的增加，这个成本会得到折扣（可以理解为对大合同的折扣或[规模经济](https://en.wikipedia.org/wiki/Economies_of_scale)）。我们还简单地将数字广告支出和电视广告支出合并到我们的总成本中。
- en: Now that we have developed the theoretical basis for our econometric profit
    maximization problem, let’s simulate some data and take this to python!
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经为我们的计量经济学利润最大化问题建立了理论基础，让我们来模拟一些数据并将其带入Python！
- en: '**Data Simulation (Optional)**'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据模拟（可选）**'
- en: Note this section can be skipped without any loss of the primary content.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，本节可以跳过而不会丢失主要内容。
- en: 'Let’s first simulate monthly data over 10 years for quantity demanded, where
    the following variables included are as follows :'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们来模拟10年期间的每月需求量数据，其中包括以下变量：
- en: '[PRE1]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Note that we include lag variables because it is highly plausible that today’s
    quantity demanded is a function of lagged values for many of the variables. We
    also control for seasonality effects by incorporation dummy variables for each
    month (this is one of many ways to incorporate seasonality into the model). We
    then specify the parameters associated with each variable as (note that these
    parameters are specifiedin the same order as the columns of the dataframe!):'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，我们包括滞后变量，因为今天的需求量很可能是许多变量滞后值的函数。我们还通过引入每月的虚拟变量来控制季节性效应（这只是将季节性纳入模型的多种方式之一）。然后我们指定与每个变量相关的参数（请注意，这些参数按数据框的列顺序指定！）：
- en: '[PRE2]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We can then simulate our econometric specification (eq. 8) of quantity demanded
    by running `quantity_demanded = np.array(df) @ params`. However, note that we
    are missing the autoregressive components, thus we also want quantity demanded
    to follow an [autoregressive process](https://en.wikipedia.org/wiki/Autoregressive_model)
    as mentioned above. That is, quantity demanded is also a function of its own lagged
    values. We include 2 lags here (AR(2) process) with respective coefficients *ϕ1*
    and *ϕ2*. Note, we can simulate this with initial conditions *q0* and *q-1* via
    the following system:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们可以通过运行`quantity_demanded = np.array(df) @ params`来模拟我们的计量经济学规范（方程8）中的需求量。然而，请注意我们缺少自回归成分，因此我们还希望需求量遵循上述的[自回归过程](https://en.wikipedia.org/wiki/Autoregressive_model)。也就是说，需求量也是其自身滞后值的函数。我们在这里包括2个滞后期（AR(2)过程），其系数分别为*ϕ1*和*ϕ2*。注意，我们可以通过以下系统用初始条件*q0*和*q-1*来模拟：
- en: '![](../Images/3243ebff8fe5a9cc6e1f9ad1ef350710.png)![](../Images/2cf576fa7a1f88525655c9e7e7aab78e.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3243ebff8fe5a9cc6e1f9ad1ef350710.png)![](../Images/2cf576fa7a1f88525655c9e7e7aab78e.png)'
- en: (11) [Link](https://math.embed.fun/mwCEwVTYD8Q824KTYYCyon)
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: (11) [链接](https://math.embed.fun/mwCEwVTYD8Q824KTYYCyon)
- en: '[PRE3]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '**Econometric Estimation & Optimization**'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '**计量经济学估计与优化**'
- en: 'Let’s first use our framework in eq. (2) to transform our constrained optimization
    problem in eq. (7) to one in which we can solve utilizing our function `constrained_newton_method()`
    from above:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 首先使用我们在方程（2）中的框架，将我们在方程（7）中的约束优化问题转化为一个可以利用我们上面提到的函数`constrained_newton_method()`来解决的问题：
- en: '![](../Images/9fa50e97034f048af9d07293672ff031.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9fa50e97034f048af9d07293672ff031.png)'
- en: (12) [Link](https://math.embed.fun/v1egYNfHrCeA6fX6PMv8vX)
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: (12) [链接](https://math.embed.fun/v1egYNfHrCeA6fX6PMv8vX)
- en: 'As discussed before, we need to estimate our quantity demanded, *q_hat.* Let’s
    take a look at what our quantity demanded looks like over the 10 years simulated:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，我们需要估计我们的需求量，*q_hat*。让我们看看在模拟的10年中我们的需求量是什么样的：
- en: '![](../Images/5840cecb9e6365ed27c49db279673b84.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5840cecb9e6365ed27c49db279673b84.png)'
- en: 'We can clearly see some seasonality occurring towards the end of the years
    and it appears we are dealing with a [stationary process](https://en.wikipedia.org/wiki/Stationary_process)
    (this is all by construction). Now suppose that we have the following observed
    variables:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以清楚地看到，在年末时出现了一些季节性现象，且我们似乎在处理一个[平稳过程](https://en.wikipedia.org/wiki/Stationary_process)（这一切都是由构造决定的）。现在假设我们有以下观察变量：
- en: '![](../Images/e2c2697ee4fe4fdd69263b7c1428589d.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e2c2697ee4fe4fdd69263b7c1428589d.png)'
- en: where, in eq. 8, our econometric specification, *quantity_demanded* is our outcome
    *q*, *log_digital_advertising* is our ln(δ), *log_television_advertising* is our
    ln(τ), *constant* is our *α*, *quantity_demanded_lag1* & *quantity_demanded_lag2*
    are our autoregressive components *q_t-1* & *q_t-2*, and the remainder are our
    additional covariates **X** including seasonality ***S***.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在方程8中，我们的计量经济学规范中，*quantity_demanded* 是我们的结果 *q*，*log_digital_advertising* 是我们的
    ln(δ)，*log_television_advertising* 是我们的 ln(τ)，*constant* 是我们的 *α*，*quantity_demanded_lag1*
    和 *quantity_demanded_lag2* 是我们的自回归组件 *q_t-1* 和 *q_t-2*，其余是我们的额外协变量 **X**，包括季节性
    ***S***。
- en: Now, with this data, we seek to estimate our econometric specification in eq.
    8\. We can estimate this structural model using OLS. For this we will use [statsmodels](https://www.statsmodels.org/stable/index.html#).
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，有了这些数据，我们试图估计方程8中的计量经济学规范。我们可以使用最小二乘法（OLS）来估计这个结构模型。为此，我们将使用[statsmodels](https://www.statsmodels.org/stable/index.html#)。
- en: 'A great exercise would be to solve the linear regression using the Newton’s
    method code we have constructed and compare the results to statsmodels. Hint:
    the objective in a linear regression is to minimize the [Residual Sum of Squares](https://en.wikipedia.org/wiki/Residual_sum_of_squares).
    Note that the code we have written is by no means an efficient approach to solving
    a linear regression, but this is more oriented towards illustrating optimization
    theory in a model fitting (regression) context. Code for this will be provided
    at the end of the article!'
  id: totrans-80
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 一个很好的练习是使用我们构建的牛顿法代码来解决线性回归，并将结果与statsmodels进行比较。提示：线性回归中的目标是最小化[残差平方和](https://en.wikipedia.org/wiki/Residual_sum_of_squares)。请注意，我们编写的代码绝非解决线性回归的高效方法，但它更多地用于在模型拟合（回归）背景下说明优化理论。相关代码将在文章末尾提供！
- en: 'Note that we drop the first 2 observations as these are our first two lags
    and we drop July as a reference month:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，我们删除了前两个观察值，因为这些是我们的前两个滞后项，同时我们删除了七月作为参考月份：
- en: '[PRE4]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![](../Images/b35e2ba514da815113bc072eedf0c732.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b35e2ba514da815113bc072eedf0c732.png)'
- en: 'Now we have our estimated econometric specification for quantity demanded!
    A few observations:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了我们对需求量的估计计量经济学规范！几点观察：
- en: An increase in log digital ad spend and log television ad spend are associated
    with an increase in quantity demand
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数字广告支出和电视广告支出的对数增加与需求量的增加相关
- en: An increase price is associated with a decrease in quantity demand (this is
    expected behavior)
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 价格的增加与需求量的减少相关（这是预期的行为）
- en: We see clear seasonality with increasing demand during Sep-Dec, this is consistent
    with our time series above
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们看到在9月到12月期间有明显的季节性需求增长，这与我们上面的时间序列一致
- en: We see that the first lag of quantity demanded is predictive of the present,
    in favor of autoregressive process
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们看到需求量的第一个滞后项对现在有预测作用，这支持自回归过程
- en: '*The results above can be verified and compared with the data construction
    above in the data simulation section*'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*上面的结果可以通过数据模拟部分的数据显示和比较来验证*'
- en: 'Let’s now specify our symbolic variables for our optimization problem (δ, τ,
    λ, and ρ), the values of our present variables at time *t*, and grab the lagged
    values from our data. We will then have everything necessary to construct our
    optimization problem:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们为优化问题指定我们的符号变量（δ、τ、λ 和 ρ），设定时间 *t* 上的当前变量值，并从数据中获取滞后值。这样我们就有了构建优化问题所需的一切：
- en: '[PRE5]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'where our estimated quantity demanded from eq. 8 becomes:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从方程 8 得到的估计需求量为：
- en: '![](../Images/b5015b545d08938e9ebf90ffd20382d6.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b5015b545d08938e9ebf90ffd20382d6.png)'
- en: Estimated Quantity Demanded Function
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 估计需求量函数
- en: 'Now we can construct our revenue, cost, and put them together to construct
    our profit function. Here our cost to produce each unit is $140 base and is discounted
    by $0.0001 for each additional unit produced:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以构建我们的收入、成本，并将它们结合起来构建我们的利润函数。这里我们生产每单位的成本为 $140 基础，并且每生产一个额外单位的折扣为 $0.0001：
- en: '[PRE6]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/44c0cf47c361e7b63044c2df87cd4886.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/44c0cf47c361e7b63044c2df87cd4886.png)'
- en: Estimated Profit Function
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 估计利润函数
- en: 'Plotting our profit as a function of digital ad spend and television ad spend,
    *π(*δ, τ):'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 将我们的利润绘制为数字广告支出和电视广告支出的函数，*π(*δ、τ)：
- en: '![](../Images/6d167ea875235cbf343a4e4693ece278.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6d167ea875235cbf343a4e4693ece278.png)'
- en: Let’s now solve our optimization problem as formulated in eq. 12 via python
    using the optimization theory that we have learned from [part 1](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)
    and [part 2](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)
    of this series. *Note that the extremely high value of ρ is to account for the
    fact that the values of our objective function are extremely large thus we need
    to make sure penalization is large enough to avoid “jumping” out of constraints.*
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们使用 python 按照方程 12 中的公式解决我们的优化问题，利用我们在[第 1 部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)和[第
    2 部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)中学到的优化理论。*注意，ρ
    的极高值是为了考虑到我们的目标函数值极大，因此我们需要确保惩罚足够大，以避免“跳出”约束。*
- en: '[PRE7]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'with the corresponding output:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 以及相应的输出：
- en: '![](../Images/ad878086b18364caf3f9b53ed3a77a39.png)![](../Images/755b734a39337c1d27087734dd0d9022.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ad878086b18364caf3f9b53ed3a77a39.png)![](../Images/755b734a39337c1d27087734dd0d9022.png)'
- en: 'Thus, our solution is to spend ~$66,831 on digital ad spend and ~$33,169 on
    television ad spend. These values correspond to:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们的解决方案是将大约 $66,831 用于数字广告支出，将大约 $33,169 用于电视广告支出。这些数值对应于：
- en: '[PRE8]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](../Images/3d4f60e0c1fde63625410dd5dc9fa5e8.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3d4f60e0c1fde63625410dd5dc9fa5e8.png)'
- en: And there you have it!
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 就这样！
- en: Conclusion
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 结论
- en: The profit maximization problem in this final article was by no means meant
    to be an entirely comprehensive solution. In fact, we did not need to even use
    Newton’s Method for such a simple optimization problem! But, as optimization problems
    increase in complexity and dimensionality, which is quite common in the real world,
    these tools become increasingly relevant. The goal was to take what we have learned
    in [part 1](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)
    and [part 2](/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)
    of this series and take a fun exploration into one of infinitely many applications
    of optimization theory.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，利润最大化问题绝非完全综合的解决方案。实际上，我们甚至不需要对这么简单的优化问题使用牛顿法！但是，随着优化问题在复杂性和维度上的增加，这在现实世界中非常常见，这些工具变得越来越相关。我们的目标是利用我们在[第
    1 部分](https://medium.com/towards-data-science/optimization-newtons-method-profit-maximization-part-1-basic-optimization-theory-ff7c5f966565)和[第
    2 部分](/optimization-newtons-method-profit-maximization-part-2-constrained-optimization-theory-dc18613c5770)中学到的知识，进行一次有趣的探索，以了解优化理论的无数应用之一。
- en: If you have made it up to this point, thank you for taking time out of your
    day to read my article and I want to extend an extra thank you to those individuals
    that have read through all 3 parts of this series. I hope at this point you feel
    very comfortable with basic multi-dimensional optimization theory and extensions
    involving constraints on the objective function. As always, I hope you have enjoyed
    reading this as much as I enjoyed writing it. Please let me know what you thought
    of this article and the series as whole!
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你读到这里，感谢你抽出时间阅读我的文章，并向那些阅读了系列中所有 3 部分的读者表示特别的感谢。我希望你现在对基本的多维优化理论和涉及目标函数约束的扩展有很好的理解。一如既往，我希望你像我写这篇文章时那样享受阅读。如果你对这篇文章和整个系列有任何想法，请告诉我！
- en: '**Bonus — Numerical and Analytical Solutions to Linear Regression**'
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**附加内容 — 线性回归的数值和解析解**'
- en: As promised above, this section will provide code for solving the linear regression
    problem above utilizing Newton’s method and we will compare this result to the
    analytical solution (the one utilized by statsmodels). Recall that the objective
    for solving the linear regression is to minimize the [Residual Sum of Squares](https://en.wikipedia.org/wiki/Residual_sum_of_squares).
    That is, in terms of matrices,
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 如上所承诺，本节将提供利用牛顿方法解决线性回归问题的代码，并将该结果与解析解（statsmodels 使用的解）进行比较。请回忆，解决线性回归的目标是最小化
    [残差平方和](https://en.wikipedia.org/wiki/Residual_sum_of_squares)。也就是说，就矩阵而言，
- en: '![](../Images/aea487e9476419d077057c62aed6cd1a.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/aea487e9476419d077057c62aed6cd1a.png)'
- en: (A1) Minimize Residual Sum of Squares
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: (A1) 最小化残差平方和
- en: 'Thus, using our Newton method function and framework, we have:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，使用我们的牛顿方法函数和框架，我们得到：
- en: '[PRE9]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'with the following output:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![](../Images/ed65415b554d6469ad88913c4f5758c6.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ed65415b554d6469ad88913c4f5758c6.png)'
- en: 'Next we will compute the analytical solution. That is, if we take the derivative
    of eq. (A1*)* and set it equal to zero and solve for *β*, we obtain:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来我们将计算解析解。也就是说，如果我们对等式 (A1*)* 求导并将其设为零并解出 *β*，我们得到：
- en: '![](../Images/7fe14394521bb3091ef6ec2b1d8222b2.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7fe14394521bb3091ef6ec2b1d8222b2.png)'
- en: (A2) OLS Analytical Solution
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: (A2) OLS 解析解
- en: 'Coding this, we have *(we also provide analytical standard errors to compare
    to statsmodels, but do not dive into this further — see the OLS* [*wiki page*](https://en.wikipedia.org/wiki/Ordinary_least_squares#Estimation)
    *if you are interested)*:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 编写代码如下 *(我们还提供了与 statsmodels 比较的解析标准误差，但不再进一步探讨 — 如果你感兴趣，请参见 OLS* [*维基百科页面*](https://en.wikipedia.org/wiki/Ordinary_least_squares#Estimation)
    *）*：
- en: '[PRE10]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Comparing all the results with statsmodels:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 与 statsmodels 的所有结果进行比较：
- en: '[PRE11]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](../Images/d786ea544bc60459340b8c3e5c09f0cc.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d786ea544bc60459340b8c3e5c09f0cc.png)'
- en: Appendix — Code
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 — 代码
- en: '[PRE12]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '*Access all the code via this GitHub Repo:* [https://github.com/jakepenzak/Blog-Posts](https://github.com/jakepenzak/Blog-Posts)'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '*通过此 GitHub 仓库访问所有代码：* [https://github.com/jakepenzak/Blog-Posts](https://github.com/jakepenzak/Blog-Posts)'
- en: '*I appreciate you reading my post! My posts on Medium seek to explore real-world
    and theoretical applications utilizing* ***econometric*** *and* ***statistical/machine
    learning*** *techniques. Additionally, I seek to provide posts on the theoretical
    underpinnings of various methodologies via theory and simulations. Most importantly,
    I write to learn! I hope to make complex topics slightly more accessible to all.
    If you enjoyed this post, please consider* [***following me on Medium***](https://medium.com/@jakepenzak)*!*'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '*感谢你阅读我的帖子！我在 Medium 上的帖子旨在探索利用* ***计量经济学*** *和* ***统计/机器学习*** *技术的实际和理论应用。此外，我还通过理论和模拟提供关于各种方法学的理论基础的帖子。最重要的是，我写作是为了学习！我希望使复杂的话题对所有人稍微更易于理解。如果你喜欢这篇文章，请考虑*
    [***关注我在 Medium 上的账号***](https://medium.com/@jakepenzak)*！*'
