- en: 'Detecting Covariate Shift: A Guide to the Multivariate Approach'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检测协变量偏移：多变量方法指南
- en: 原文：[https://towardsdatascience.com/detecting-covariate-shift-a-guide-to-the-multivariate-approach-c099bd1891b9](https://towardsdatascience.com/detecting-covariate-shift-a-guide-to-the-multivariate-approach-c099bd1891b9)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/detecting-covariate-shift-a-guide-to-the-multivariate-approach-c099bd1891b9](https://towardsdatascience.com/detecting-covariate-shift-a-guide-to-the-multivariate-approach-c099bd1891b9)
- en: MLOps
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: MLOps
- en: Good old PCA can alert you when the distribution of your production data changes
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 好的旧PCA可以在生产数据的分布发生变化时提醒你
- en: '[](https://michaloleszak.medium.com/?source=post_page-----c099bd1891b9--------------------------------)[![Michał
    Oleszak](../Images/61b32e70cec4ba54612a8ca22e977176.png)](https://michaloleszak.medium.com/?source=post_page-----c099bd1891b9--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c099bd1891b9--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c099bd1891b9--------------------------------)
    [Michał Oleszak](https://michaloleszak.medium.com/?source=post_page-----c099bd1891b9--------------------------------)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://michaloleszak.medium.com/?source=post_page-----c099bd1891b9--------------------------------)[![Michał
    Oleszak](../Images/61b32e70cec4ba54612a8ca22e977176.png)](https://michaloleszak.medium.com/?source=post_page-----c099bd1891b9--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c099bd1891b9--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c099bd1891b9--------------------------------)
    [Michał Oleszak](https://michaloleszak.medium.com/?source=post_page-----c099bd1891b9--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c099bd1891b9--------------------------------)
    ·16 min read·Jan 17, 2023
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: ·发布于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c099bd1891b9--------------------------------)
    ·阅读时长16分钟·2023年1月17日
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/43ed7a846bc901d5218d81828fd041fb.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/43ed7a846bc901d5218d81828fd041fb.png)'
- en: The ultimate purpose of any machine learning model is to bring value to its
    owner. Typically, this value comes in the form of the algorithm doing things better
    or faster (or both) than a human can. The cost of investment in developing and
    deploying the model is often high. In order to pay it back, the model needs to
    provide value in production for a long enough period of time. This can be impeded
    by covariate shift, a phenomenon causing the models in production to degrade over
    time. Let’s see how to detect it, and why the popular simple approaches are usually
    not good enough.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 任何机器学习模型的最终目的都是为其所有者带来价值。通常，这种价值表现为算法比人类更好或更快地完成任务（或两者兼而有之）。开发和部署模型的投资成本通常很高。为了收回这笔投入，模型需要在生产中提供足够长时间的价值。协变量偏移可能会妨碍这一点，它是一种导致模型在生产中随时间退化的现象。让我们来看看如何检测它，以及为什么流行的简单方法通常不够好。
- en: '![](../Images/b7814b740dbdd56bf28850809a36088a.png)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b7814b740dbdd56bf28850809a36088a.png)'
- en: Introducing covariate shift
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍协变量偏移
- en: '[Covariate shift](https://medium.com/towards-data-science/dont-let-your-model-s-quality-drift-away-53d2f7899c09)
    is a situation in which the distribution of the model’s input features in production
    changes compared to what the model has seen during training and validation.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[协变量偏移](https://medium.com/towards-data-science/dont-let-your-model-s-quality-drift-away-53d2f7899c09)是指模型的输入特征在生产中的分布与模型在训练和验证时看到的分布发生变化的情况。'
- en: Covariate shift is a change in the distribution of the model’s inputs between
    training and production data.
  id: totrans-12
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 协变量偏移是指模型输入在训练数据和生产数据之间分布的变化。
- en: In most applications, it is a matter of time before covariate shift occurs.
    If you are modeling your customers, for instance, their behavior patterns will
    shift as the economy changes, as they get older, or as the customer base alters
    due to marketing campaigns. The only constant in life is change, as the Greek
    philosopher Heraclitus has supposedly said.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数应用中，协变量偏移发生是时间问题。例如，如果你在建模客户，他们的行为模式会随着经济变化、年龄增长或由于营销活动而改变客户基础。生活中唯一不变的就是变化，正如希腊哲学家赫拉克利特所说的。
- en: The key to ensuring the models keep working well in production is to detect
    covariate shift early. How can we do this? Let’s find out!
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 确保模型在生产中持续有效的关键是及早检测协变量偏移。我们该如何做到这一点呢？让我们来探讨一下！
- en: '![](../Images/762c36e5777aa117d1422e1ed5687fe5.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/762c36e5777aa117d1422e1ed5687fe5.png)'
- en: 'Detecting covariate shift: a naive approach'
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检测协变量偏移：一种天真的方法
- en: We have said that covariate shift is a change in the distribution of the model’s
    inputs. We know the distribution of each feature in the training data, and we
    should also be able to obtain it for the features in production. Why don’t we
    just compare the two?
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经提到协变量漂移是模型输入分布的变化。我们知道训练数据中每个特征的分布，我们也应该能够获取生产中的特征分布。那我们为什么不直接比较这两者呢？
- en: Actually, it is a valid approach. Tools such as [TensorFlow Data Validation](/dont-let-your-model-s-quality-drift-away-53d2f7899c09)
    or [Great Expectations](https://medium.com/towards-data-science/reducing-pipeline-debt-with-great-expectations-f1afddbfdc0b)
    allow us to easily compare distributions of the input features between training
    and production data, feature by feature.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，这是一个有效的方法。像[TensorFlow数据验证](/dont-let-your-model-s-quality-drift-away-53d2f7899c09)或[Great
    Expectations](https://medium.com/towards-data-science/reducing-pipeline-debt-with-great-expectations-f1afddbfdc0b)这样的工具可以让我们轻松地逐特征比较训练数据和生产数据之间的分布。
- en: The simplest way to establish whether the training and production distributions
    differ for a given feature is to compare their summary statistics, such as means,
    medians, etc.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 确定给定特征的训练分布和生产分布是否不同的最简单方法是比较它们的摘要统计量，如均值、中位数等。
- en: A more sophisticated approach would be to directly calculate how much the two
    distributions differ using a (dis)similarity measure such as [Earth mover’s distance](https://en.wikipedia.org/wiki/Earth_mover%27s_distance)
    or [Jensen–Shannon divergence](https://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence).
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 更复杂的方法是直接计算这两个分布的差异，使用如[地球搬运工距离](https://en.wikipedia.org/wiki/Earth_mover%27s_distance)或[詹森-香农散度](https://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence)这样的（不）相似性度量。
- en: An even more statistically rigorous approach is to conduct [a proper hypothesis
    test](https://medium.com/towards-data-science/the-hypothesis-testers-guide-75f7db2e4d0d).
    The [Kolmogorov-Smirnov test](https://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test)
    for continuous features and the [Chi-squared test](https://en.wikipedia.org/wiki/Chi-squared_test)
    for categorical ones can help us establish whether the feature distributions differ
    in a significant manner.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 更加统计学严格的方法是进行[适当的假设检验](https://medium.com/towards-data-science/the-hypothesis-testers-guide-75f7db2e4d0d)。连续特征的[Kolmogorov-Smirnov检验](https://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test)和分类特征的[卡方检验](https://en.wikipedia.org/wiki/Chi-squared_test)可以帮助我们确定特征分布是否以显著的方式不同。
- en: The latter approach, however, features a serious drawback. Testing production
    data like this would require continuously conducting many tests on large data
    volumes. Many of them will surely signal significant effects, but that would not
    always be a reason to worry from the monitoring standpoint. In many cases, a statistically
    significant distribution change does not correspond to a covariate shift resulting
    in degraded model performance.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，后一种方法存在一个严重的缺点。像这样测试生产数据需要不断地对大数据量进行许多测试。许多测试肯定会发出显著效果的信号，但从监控的角度来看，这并不总是值得担忧的原因。在许多情况下，统计上显著的分布变化并不一定对应于导致模型性能下降的协变量漂移。
- en: 'But there is also an even more significant drawback that all of the approaches
    discussed above share: they are *univariate*, meaning that they treat each feature
    in isolation from the rest. In real life, we often observe a *multivariate data
    drift*, in which the distributions of the individual features don’t necessarily
    change, but their joint distribution does. Consider the following example.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，还有一个更显著的缺点是上述所有方法都共享的：它们是*单变量*的，这意味着它们将每个特征与其他特征隔离开来处理。在现实生活中，我们经常观察到*多变量数据漂移*，即单个特征的分布不一定发生变化，但它们的联合分布会发生变化。考虑以下示例。
- en: '![](../Images/762c36e5777aa117d1422e1ed5687fe5.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/762c36e5777aa117d1422e1ed5687fe5.png)'
- en: When univariate drift detection fails
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 当单变量漂移检测失败时
- en: 'We have a dataset consisting of two features: age and income, and the data
    is collected over a number of weeks.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有一个由两个特征组成的数据集：年龄和收入，数据是在几周内收集的。
- en: '![](../Images/7d55c55623e88be6d2e84d78ffae2f61.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7d55c55623e88be6d2e84d78ffae2f61.png)'
- en: Income vs age. Image by the author.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 收入与年龄。作者提供的图像。
- en: Both features have been standardized so that they can be neatly visualized together.
    The standardization used the mean and variance values from the general population,
    i.e., not calculated from these data, which means we don’t need to worry about
    any data leaks.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 两个特征已经被标准化，以便可以整齐地一起可视化。标准化使用了来自总体的均值和方差值，即未从这些数据计算的，这意味着我们不需要担心任何数据泄漏。
- en: 'In the 10th week (blue), there is a pretty strong positive correlation between
    the two features. This makes sense: most people get more experience with age,
    and they are getting promoted, which results in a higher income, on average.'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在第10周（蓝色），两个特征之间有相当强的正相关。这是有道理的：大多数人随着年龄增长获得更多经验，他们也得到晋升，这导致平均收入更高。
- en: In the 16th week (yellow), the marginal univariate distribution of each feature
    is still standard normal as before, but the correlation pattern has changed dramatically;
    now, the two features are negatively correlated. Maybe the data from Week 16 was
    collected from older people. In this case, the older a person, the higher the
    likelihood they are retired and thus have a lower income.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在第16周（黄色），每个特征的边际单变量分布仍然是标准正态分布，但相关模式发生了剧烈变化；现在，两个特征之间呈负相关。也许第16周的数据是从年长的人那里收集的。在这种情况下，年纪越大，越有可能退休，因此收入较低。
- en: Univariate drift detection methods fail when the univariate feature distributions
    remain unchanged while the joint distribution changes.
  id: totrans-32
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 当单变量特征分布保持不变而联合分布发生变化时，单变量漂移检测方法会失败。
- en: We are clearly experiencing a strong covariate shift; any machine learning models
    trained on the data from week 10 would perform very poorly on the data from week
    16\. However, the univariate drift detection methods we have discussed previously
    would not alert us to this dangerous shift.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 我们显然正在经历强烈的协变量漂移；任何基于第10周数据训练的机器学习模型在第16周的数据上表现都会非常糟糕。然而，我们之前讨论的单变量漂移检测方法不会提醒我们这一危险的变化。
- en: '![](../Images/8a2369dbb77f8623e8f9d3602abc4cd1.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8a2369dbb77f8623e8f9d3602abc4cd1.png)'
- en: 'Detecting covariate shift: a multivariate approach'
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检测协变量漂移：一种多变量方法
- en: In order to reliably detect covariate shift in any situation, we need (on top
    of the univariate methods) another method that can capture the changes in the
    joint distribution of all the features. A very simple yet clever approach to achieve
    this is based on the good old Principal Components Analysis (PCA).
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 为了可靠地检测任何情况下的协变量漂移，我们需要（在单变量方法之外）另一种能够捕捉所有特征联合分布变化的方法。一种非常简单但巧妙的方法是基于经典的主成分分析（PCA）。
- en: Principal Components Analysis
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主成分分析
- en: Principal Components Analysis is a dimensionality reduction technique. It identifies
    the directions of our data that contain most of the variance. The directions,
    called principal components, are ordered in decreasing order of captured variance.
    This means that by restricting ourselves to a selected number of first principal
    components, we can capture most of the variability of our data while reducing
    the number of dimensions we have. In other words, we could say that PCA projects
    the data to a lower-dimensional space.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 主成分分析是一种降维技术。它识别出数据中包含最多方差的方向。这些方向称为主成分，按捕获的方差从高到低排序。这意味着通过限制自己选择前几个主成分，我们可以捕捉数据的大部分变异性，同时减少维度。换句话说，我们可以说PCA将数据投影到一个低维空间。
- en: PCA maps original data into a lower-dimensional space, keeping most of the informative
    signal
  id: totrans-39
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: PCA将原始数据映射到低维空间，保留了大部分信息信号。
- en: Dimensionality reduction with PCA finds multiple applications. It can be performed
    as a pre-processing step before model training in order to reduce the number of
    features, as some machine learning models become very slow to train with too many
    features.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: PCA的降维在多个应用中都找到了用武之地。在模型训练之前进行降维处理可以减少特征数量，因为一些机器学习模型在特征过多时训练速度变得非常慢。
- en: But speed is not the only gain from using PCA as the preprocessing step. In
    some cases, machine learning models trained on the PCA-transformed data perform
    better. This is because when we reduce the dimensionality, we try to squeeze *the
    same* amount of information into fewer variables. This process is lossy, meaning
    that some information will inevitably be discarded. PCA assumes that useful information
    about a dataset is captured by its variance, so using independent principal components
    that capture most of the variance as features can lead to better decision thresholds.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 但使用PCA作为预处理步骤获得的好处不仅仅是速度。在某些情况下，基于PCA转换数据训练的机器学习模型表现更好。这是因为当我们降低维度时，我们试图将*相同*数量的信息挤入更少的变量中。这个过程是有损的，这意味着一些信息将不可避免地被丢弃。PCA假设数据集的有用信息由其方差捕捉，因此使用捕捉大部分方差的独立主成分作为特征可以带来更好的决策阈值。
- en: Finally, PCA is also useful for visualizing and finding patterns in multidimensional
    datasets — after compressing the data to two or three features, we can easily
    plot them, color each data point by an attribute of interest, and spot interesting
    patterns.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，PCA对于可视化和发现多维数据集中的模式也非常有用——在将数据压缩为两个或三个特征后，我们可以轻松地绘制这些特征，用一个感兴趣的属性为每个数据点着色，并发现有趣的模式。
- en: Data reconstruction with PCA
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据重建与PCA
- en: Okay, but how does this dimensionality reduction help with drift detection,
    I hear you asking. Here is the idea.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 好吧，但我听到你在问，这种降维如何帮助漂移检测。这里是想法。
- en: 'The only piece of the puzzle that we’re missing is the fact that the PCA transformation
    is invertible. Once we have compressed the data to fewer features, we can use
    the PCA model to decompress them, that is: bring the dataset back to its original
    number of features. The result will not be exactly the same as the original data
    due to the lossy compression process, but it should be quite similar. Let’s call
    the difference between the original and decompressed data the *reconstruction
    error*.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们唯一缺少的拼图是PCA变换是可逆的。一旦我们将数据压缩为较少的特征，我们可以使用PCA模型来解压数据，即：将数据集恢复到其原始特征数量。由于有损压缩过程，结果可能不会与原始数据完全相同，但应该非常相似。我们将原始数据与解压数据之间的差异称为*重建误差*。
- en: 'Let’s go back to our example dataset. Recall that we compared Week 10 to Week
    16 to find that a multivariate data drift has occurred in the meantime. Now, let’s
    focus on Weeks 9, 10, and 11, during which no covariate shift happens, that is:
    the joint multivariate distribution of the features is the same for all these
    three weeks.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到我们的示例数据集。回忆一下，我们将第10周与第16周进行了比较，以发现期间发生了多变量数据漂移。现在，让我们关注第9周、第10周和第11周，在这段时间内没有发生协变量漂移，也就是说：这些三周内特征的联合多变量分布是相同的。
- en: If we learn the PCA mapping on Week 9, we can use it to compress and decompress
    both Week 10 and Week 11 to obtain similar, low reconstruction errors.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们在第9周学习了PCA映射，我们可以使用它来压缩和解压第10周和第11周的数据，从而获得类似的、较低的重建误差。
- en: '![](../Images/9bbbb691ba12aa54b5a184cd3d82b0db.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9bbbb691ba12aa54b5a184cd3d82b0db.png)'
- en: PCA reconstruction errors without covariate shift. Image by the author.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 没有协变量漂移的PCA重建误差。图像由作者提供。
- en: We don’t really care about the particular value of the error now. What’s important
    is that it is likely to be roughly the same for weeks 10 and 11, because the internal
    structure of the data stays the same, and the compression-decompression mapping
    learned by the PCA is still applicable.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在实际上不关心误差的具体数值。重要的是，第10周和第11周的误差可能大致相同，因为数据的内部结构保持不变，PCA学到的压缩-解压映射仍然适用。
- en: Now, what would happen if we used our PCA model on Weeks 10 and 16, rather than
    10 and 11? This time, the mapping learned by PCA will still hold for Week 10,
    but not for Week 16\. Thus, the reconstruction error for Week 16 will be significantly
    larger than the one for Week 10.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果我们在第10周和第16周而不是第10周和第11周使用我们的PCA模型，会发生什么呢？这次，PCA学到的映射仍然适用于第10周，但不适用于第16周。因此，第16周的重建误差将显著大于第10周的重建误差。
- en: '![](../Images/d0e31580273d4aad1caeba5b97a3285a.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d0e31580273d4aad1caeba5b97a3285a.png)'
- en: PCA reconstruction errors with covariate shift. Image by the author.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 带有协变量漂移的PCA重建误差。图像由作者提供。
- en: The idea we have just discussed can be used to detect covariate shift in production.
    If we know what reconstruction error we can expect from the data without drift
    (think Week 10 error), we can compare it to the reconstruction error of the production
    data. If the latter is significantly larger, we can declare covariate shift to
    be present.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 我们刚刚讨论的想法可以用来检测生产中的协变量漂移。如果我们知道在没有漂移的情况下数据的重建误差（考虑第10周的误差），我们可以将其与生产数据的重建误差进行比较。如果后者显著较大，我们可以声明存在协变量漂移。
- en: We can detect covariate shift by comparing the PCA reconstruction error from
    production data to its expected level.
  id: totrans-55
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们可以通过比较生产数据的PCA重建误差与其预期水平来检测协变量漂移。
- en: 'The only two remaining questions are: what is the *expected reconstruction
    error*, and what does *significantly larger* mean?'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 唯一剩下的两个问题是：什么是*预期重建误差*，以及*显著较大*意味着什么？
- en: Comparing reconstruction errors
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 比较重建误差
- en: One way to estimate the expected reconstruction error is to take a portion of
    the training data that we know not to exhibit covariate shift (let’s call it a
    reference data set), split it into chunks, and compute the reconstruction error
    on each chunk. This way, we get a range of error values from which we can compute
    the mean error and its variance.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 估计期望重建误差的一种方法是取一部分我们知道没有协变量漂移的训练数据（称为参考数据集），将其拆分为块，并计算每个块的重建误差。这样，我们得到一系列误差值，从中可以计算均值和方差。
- en: Then, a simple rule of thumb for declaring covariate shift is to check whether
    the reconstruction error from the data in production is outside of the ranges
    obtained from the reference set. If it is at least three standard deviations away
    from the reference mean, then a shift is very likely.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，声明协变量漂移的一个简单经验法则是检查生产数据中的重建误差是否超出了从参考集获得的范围。如果它偏离参考均值至少三个标准差，那么很可能发生了漂移。
- en: Multivariate drift detection in Python
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Python中的多变量漂移检测
- en: Let’s now take a look at how to implement all of these ideas in Python using
    the NannyML package.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看如何使用NannyML包在Python中实现这些想法。
- en: We will be using Yandex’s [weather dataset](https://research.yandex.com/shifts/weather).
    Multivariate concept drift is inherently present in weather measurements; as the
    seasons come and go, the way in which different climate components interact with
    each other tends to evolve, too. The dataset consists of over a hundred features
    describing various meteorological measures such as temperature, humidity, atmospheric
    pressure, etc.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用Yandex的[天气数据集](https://research.yandex.com/shifts/weather)。多变量概念漂移在天气测量中固有存在；随着季节的更替，不同气候组件相互作用的方式也往往会发生变化。数据集包含超过一百个描述各种气象测量的特征，如温度、湿度、气压等。
- en: 'First, let’s load and prepare the data and split it into two disjoint sets:
    September data (our reference set, on which PCA will be trained) and October data
    (our analysis set, which we will test against covariate shift). We will also need
    to parse the timestamp column to a proper pandas datetime format.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们加载和准备数据，并将其拆分为两个不相交的集合：九月数据（我们的参考集，用于训练PCA）和十月数据（我们的分析集，用于测试协变量漂移）。我们还需要将时间戳列解析为适当的pandas
    datetime格式。
- en: '[PRE0]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Next, we fit NannyML’s drift calculator which does all the steps described above.
    We need to pass it the feature names to check (all but the timestamp column),
    the timestamp column name, and the chunk size based on which the expected reconstruction
    error will be estimated. Then, we simply fit it to the reference data and apply
    it to the analysis data to test for covariate shift.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们使用NannyML的漂移计算器，该计算器完成上述所有步骤。我们需要传递要检查的特征名称（除了时间戳列之外的所有列）、时间戳列名称，以及根据其估计期望重建误差的块大小。然后，我们简单地将其拟合到参考数据上，并将其应用于分析数据以测试协变量漂移。
- en: '[PRE1]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The easiest way to make use of the generated results object is to render it
    as a plot.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 利用生成的结果对象最简单的方法是将其渲染为图表。
- en: '[PRE2]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/961e4cb268b2e5e429b4e0edc54f2e56.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/961e4cb268b2e5e429b4e0edc54f2e56.png)'
- en: Reconstruction error in production data against its expected range. Image by
    the author.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 生产数据中的重建误差与其预期范围的对比。图片由作者提供。
- en: The two dashed lines denote the expected interval for reconstruction error values,
    estimated from September data. As you can see, there is one anomalous observation
    towards the end of this month — perhaps a particularly strong thunderstorm or
    some other impactful event.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 两条虚线表示从九月数据估计的重建误差值的预期区间。如你所见，月末附近有一个异常观测值——可能是一次特别强烈的雷暴或其他有影响的事件。
- en: In the first days of October, there is no covariate shift; it seems the month
    started with weather similar to the one in the last week of September. But then
    the autumn hits, and the rest of October data features a strong covariate shift.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在十月的头几天，没有协变量漂移；似乎这个月的开始天气与九月最后一周的天气类似。但随后秋天来临，十月剩余的数据特征表现出明显的协变量漂移。
- en: Although clear and visually appealing, the plot above will not be a convenient
    way of detecting covariate shift as a part of a pipeline with automated alerting.
    But it’s enough to call the `.to_df()` method on the `results` object to get a
    data frame with all the data behind the plot.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管上面的图表清晰且视觉上很吸引人，但它不适合用作带有自动警报的管道中检测协变量漂移的便捷方法。但是，只需对`results`对象调用`.to_df()`方法即可获取包含图表背后所有数据的数据框。
- en: '[PRE3]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: It contains the `alert` column with a boolean flag denoting whether each particular
    data point was out of the expected bounds. It’s a great way to add covariate drift
    detection to any existing data validation checks!
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 它包含一个 `alert` 列，其中包含一个布尔标志，表示每个数据点是否超出了预期范围。这是一种将协变量漂移检测添加到现有数据验证检查中的好方法！
- en: '![](../Images/619f04f6449ebd7dd342b9dd2cfac826.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/619f04f6449ebd7dd342b9dd2cfac826.png)'
- en: Assumptions & limitations
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 假设与限制
- en: No discussion of a statistical method would be complete without delving deeper
    into the assumptions it makes. This will give us some indication of when the method
    works and when it doesn’t, and what its limitations are. Data drift detection
    based on the change in the PCA reconstruction error is no different.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 对于任何统计方法的讨论，都不应该遗漏对其假设的深入探讨。这将给我们一些指示，了解方法何时有效，何时无效，以及它的局限性。基于 PCA 重建误差变化的数据漂移检测也不例外。
- en: Data completeness
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据完整性
- en: First and foremost, our algorithm needs to handle missing values should there
    be any in our dataset. This requirement transfers from the underlying PCA which
    assumes all data points to be observed so that it can find the principal components.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们的算法需要处理数据集中可能存在的缺失值。这一要求来自于基础 PCA，它假设所有数据点都被观测到，以便能够找到主成分。
- en: 'The obvious remedy is to impute the missing values, should there be any, before
    running drift detection. Actually, the DataReconstrucionDriftCalculator class
    we have used before accepts two arguments `imputer_categorical` and `imputer_continuous`
    through which we can specify the method for filling in the missing data for each
    of the two data types. We just need to pass an instance of the scikit-learn’s
    SimpleImputer as follows:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 显而易见的解决办法是在进行漂移检测之前对缺失值进行填充。实际上，我们之前使用的 DataReconstrucionDriftCalculator 类接受两个参数
    `imputer_categorical` 和 `imputer_continuous`，通过这两个参数我们可以指定填充缺失数据的方法。我们只需传递一个 scikit-learn
    的 SimpleImputer 实例，如下所示：
- en: '[PRE4]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: There is, however, a risk associated with following this approach. The scikit-learn’s
    `SimpleImputer` is, well, simple. As of the time of writing, it can only perform
    four simple donor-based imputation methods; it replaces the missing values with
    the mean, the median, or the mode of other values in the column, or simply with
    a specified constant value.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，采用这种方法存在风险。scikit-learn 的 `SimpleImputer` 是非常简单的。撰写本文时，它只能执行四种简单的基于捐赠者的填充方法；它用列中其他值的均值、中位数或众数，或指定的常数值替代缺失值。
- en: 'If you have taken [my DataCamp course on data imputation](https://datacamp.com/courses/handling-missing-data-with-imputations-in-r)
    or read [my blog post on the topic](/handling-missing-data-5be11eddbdd), then
    you know that these imputation strategies are not the best ways to go. Mean, median,
    mode, or constant imputations all create the same two problems: they reduce the
    variance of the mean-imputed variables and destroy correlations between such variables
    and the rest of the data. This can hurt us twice: first, when we run PCA, a method
    based on the data variance, and second, when we hunt for a shift in the joint
    data distribution, which could have been affected by the imputed values.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你参加过[我的 DataCamp 数据填充课程](https://datacamp.com/courses/handling-missing-data-with-imputations-in-r)或阅读过[我关于这一主题的博客文章](/handling-missing-data-5be11eddbdd)，那么你就会知道这些填充策略并不是最佳选择。均值、中位数、众数或常数填充都存在两个相同的问题：它们减少了均值填充值变量的方差，并破坏了这些变量与其他数据之间的相关性。这可能会对我们造成两次伤害：首先，当我们运行基于数据方差的
    PCA 方法时，其次，当我们寻找联合数据分布的变化时，这种变化可能会受到填充值的影响。
- en: Our drift detector doesn’t allow missing values. If present, they should be
    imputed beforehand, preferably with model-based methods.
  id: totrans-85
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们的漂移检测器不允许缺失值。如果存在，它们应该提前填充，最好使用基于模型的方法。
- en: Hence, it might be a better solution to employ one of the model-based imputation
    methods such as MICE before running drift detection.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，可能更好的解决方案是在进行漂移检测之前使用模型基础的填充方法，如 MICE。
- en: Reconstruction error stability with no drift
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在没有漂移的情况下，重建误差的稳定性
- en: Another important assumption made by our drift detector is that reconstruction
    error is stable in time in the absence of covariate shift. Let’s try to unpack
    this statement.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的漂移检测器还做了一个重要假设，即在没有协变量漂移的情况下，重建误差是稳定的。让我们试着解析一下这个说法。
- en: Let’s go back to the algorithm’s subsequent steps. We started by learning the
    PCA mapping on the data from Week 9\. Then, we have said that we can use this
    mapping to compress and decompress data from subsequent Weeks 10 and 11 (both
    with no drift) and the obtained reconstruction error will be low and similar in
    both cases. One thing that we did not mention earlier is that the error computed
    on the same data that was used for learning the PCA mapping would be even lower.
    And when we do this for Week 16 when the data has drifted, we find a higher reconstruction
    error.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到算法的后续步骤。我们首先在第9周的数据上学习PCA映射。然后，我们说可以使用这个映射来压缩和解压缩来自第10周和第11周的数据（两者均无漂移），得到的重构误差将低且相似。我们之前没有提到的一点是，在用于学习PCA映射的相同数据上计算的误差会更低。当我们在数据发生漂移的第16周进行此操作时，我们会发现重构误差更高。
- en: '![](../Images/9d6f8b79a17c6d95c0f04c076f87bff4.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9d6f8b79a17c6d95c0f04c076f87bff4.png)'
- en: Reconstruction error over time. Image by the author.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 随时间推移的重构误差。图片来自作者。
- en: The assumption of the reconstruction error stability refers to the fact while
    the error increases from Week 9 to Week 10, it remains stable in the following
    weeks, up until the covariate shift happens. Let’s see why this assumption makes
    sense.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 重构误差稳定性的假设指的是，虽然误差从第9周增加到第10周，但在接下来的几周中保持稳定，直到发生协变量偏移。让我们看看为什么这个假设是合理的。
- en: When we fit PCA to Week 9 data, we look for such directions in the multidimensional
    data space that capture the largest amount of variance. We can then use these
    principal components on the same data to obtain some value of the reconstruction
    error, let’s call it *RE9*.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们对第9周的数据进行PCA拟合时，我们在多维数据空间中寻找那些捕捉最大方差的方向。然后，我们可以使用这些主成分在相同的数据上获得一些重构误差值，称之为*RE9*。
- en: When we use the same principal components to get the reconstruction error for
    Week 10, however, we will find *RE10* to be greater than *RE9*. This is because
    the Week 9 components need not be optimal (i.e. capturing the most variance) for
    Week 10 data which features a different noise pattern. Such an effect is known
    as [regression to the mean](https://en.wikipedia.org/wiki/Regression_toward_the_mean).
    This is analogous to how machine learning models typically perform better on the
    training set than on the test set.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们使用相同的主成分来计算第10周的重构误差时，我们会发现*RE10*大于*RE9*。这是因为第9周的组件可能不是第10周数据的最佳选择（即没有捕捉到最多的方差），而第10周的数据具有不同的噪声模式。这种效应被称为[回归均值](https://en.wikipedia.org/wiki/Regression_toward_the_mean)。这类似于机器学习模型通常在训练集上的表现优于测试集。
- en: The crucial assumption is that we expect *RE10 ≈ RE11*, so the error from Week
    11 should be close to the one from Week 10\. This is what allows us to spot the
    drift; we assume the error to remain stable for Weeks 10, 11, 12, etc., up until
    a point when it goes up, which would alert us to a possible drift.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 关键假设是我们期望*RE10 ≈ RE11*，所以第11周的误差应接近第10周的误差。这使我们能够发现漂移；我们假设第10周、第11周、第12周等的误差保持稳定，直到误差上升，这将提醒我们可能存在漂移。
- en: Our drift detector assumes that in the absence of covariate shift, reconstruction
    errors will be stable over time (except for the period used for learning the PCA
    mapping).
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们的漂移检测器假设在没有协变量偏移的情况下，重构误差会随着时间保持稳定（除了用于学习PCA映射的时期）。
- en: The justification behind this assumption is that while *RE9* is underestimated
    through overfitting to the particular Week 9 data, *RE10* is the *expected reconstruction
    error* that we anticipate seeing for each new data sample (provided its joint
    distribution stays unchanged).
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 这个假设的理由是，虽然*RE9*因过拟合于特定的第9周数据而被低估，但*RE10*是我们预期看到的每个新数据样本的*预期重构误差*（前提是其联合分布保持不变）。
- en: Shift (non)linearity
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 偏移（非）线性
- en: Arguably the most important limitation of our approach is in the type of shift
    that the PCA reconstruction error can and cannot capture. Namely, covariate shift
    detection as we have done it will not capture drift when there is a non-linear
    transformation that preserves the correlation between features while also preserving
    the mean and standard deviation of each feature.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 我们方法中最重要的限制之一是PCA重构误差能够捕捉和无法捕捉的漂移类型。即，我们所做的协变量偏移检测不能捕捉到存在非线性变换的漂移，这种变换保持特征之间的相关性，同时保持每个特征的均值和标准差。
- en: PCA-based drift detector won’t work in case of a non-linear drift that preserves
    each feature’s mean and standard deviation, and the correlations between different
    features.
  id: totrans-100
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 基于PCA的漂移检测器在存在非线性漂移且保持每个特征的均值和标准差以及不同特征之间的相关性时将不起作用。
- en: Let’s illustrate this with a simple example. Imagine we have a reference dataset
    consisting of just two features, *x* and *y*. Working with only two dimensions
    allows us to easily visualize the relationship between them.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们用一个简单的例子来说明。假设我们有一个仅包含两个特征 *x* 和 *y* 的参考数据集。仅使用两个维度可以让我们轻松地可视化它们之间的关系。
- en: '![](../Images/4cd36ea08973007a538e61b64e025b2a.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4cd36ea08973007a538e61b64e025b2a.png)'
- en: Hypothetical reference set. Image by the author.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 假设的参考集。图像由作者提供。
- en: There clearly exists a non-random relationship between our two features. Now,
    imagine that at some point, this relationship changes to the following one.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，我们的两个特征之间存在非随机的关系。现在，设想在某个时刻，这种关系变化为以下的形式。
- en: '![](../Images/5955fd79e93d7f56afc3feeb0684bf0e.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5955fd79e93d7f56afc3feeb0684bf0e.png)'
- en: Hypothetical analysis set. Image by the author.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 假设分析集。图像由作者提供。
- en: The range of possible values of *y* increased, while there is a low-density
    region in the middle of the joint distribution where no data points are to be
    found.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '*y* 的可能值范围增加了，而在联合分布的中间存在一个低密度区域，其中没有数据点。'
- en: 'Note how the linear correlation coefficient is almost the same for this new
    dataset and the reference dataset above. If we were to run our drift detector
    on these data, the results would the as follows:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，这个新数据集的线性相关系数几乎与上面的参考数据集相同。如果我们在这些数据上运行漂移检测器，结果将如下：
- en: '![](../Images/22b95f19609ba5d62616b66c3d7670f1.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/22b95f19609ba5d62616b66c3d7670f1.png)'
- en: Drift detection for a dataset with non-linear covariate shift that cannot be
    captured by PCA. Image by the author.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 对于具有非线性协变量漂移且PCA无法捕捉的数据集的漂移检测。图像由作者提供。
- en: 'The detector failed to capture the shift that we know has happened: the blue
    error line is well within the expected bound. This is because the drift left features’
    means and standard deviations, as well as the correlation between the features,
    intact.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 检测器未能捕捉到我们知道已经发生的变化：蓝色误差线在预期范围内。这是因为漂移没有改变特征的均值和标准差，也没有改变特征之间的相关性。
- en: 'We can bring this argument to the extreme. Imagine our analysis dataset takes
    a dino shape (all data discussed in this section comes from the [Datasaurus set](https://cran.r-project.org/web/packages/datasauRus/vignettes/Datasaurus.html):
    a collection of x-y pairs with the same linear correlation and basic summary statistics,
    but very different joint distributions).'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将这个论点推向极端。设想我们的分析数据集呈现出恐龙的形状（本节讨论的所有数据来自于[Datasaurus set](https://cran.r-project.org/web/packages/datasauRus/vignettes/Datasaurus.html)：这是一个包含相同线性相关性和基本统计量的x-y对的集合，但具有非常不同的联合分布）。
- en: '![](../Images/d2b8e01bdc51718aae560340e19d723b.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d2b8e01bdc51718aae560340e19d723b.png)'
- en: Hypothetical dino analysis set. Image by the author.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 假设的恐龙分析集。图像由作者提供。
- en: As long as the linear correlation and the features’ mean and standard deviation
    continue to be the same, the PCA-based drift detector won’t work.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 只要线性相关性以及特征的均值和标准差保持不变，基于PCA的漂移检测器将不起作用。
- en: '![](../Images/47ffaa8ecf9ad1f560a8bc54ea0b7ca4.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/47ffaa8ecf9ad1f560a8bc54ea0b7ca4.png)'
- en: Drift detection for a dataset with non-linear covariate shift that cannot be
    captured by PCA. Image by the author.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 对于具有非线性协变量漂移且PCA无法捕捉的数据集的漂移检测。图像由作者提供。
- en: In our two-dimensional example, we can easily observe the data joint distribution.
    In most real-life applications, however, we work with more features which makes
    it harder to call whether the shift was linear or not.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的二维示例中，我们可以很容易地观察到数据的联合分布。然而，在大多数实际应用中，我们处理的是更多特征，这使得判断漂移是否线性变得更加困难。
- en: If you’ve got not too many features, I suggest looking at their summary statistics
    and the linear correlation between each pair. If it’s similar between your reference
    data and your analysis data, that’s a sign the PCA-based drift detection might
    not be reliable.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的特征不多，我建议查看它们的总结统计量以及每对特征之间的线性相关性。如果它们在参考数据和分析数据之间类似，这表明基于PCA的漂移检测可能不可靠。
- en: While covariate shift detection through data reconstruction with PCA cannot
    detect some cases of shift that we have just discussed, we can detect them with
    univariate drift detection methods. Stay tuned for a separate article about them!
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然通过 PCA 数据重建来检测协变量漂移不能检测到我们刚刚讨论的一些漂移情况，但我们可以使用单变量漂移检测方法来检测这些情况。敬请关注有关它们的单独文章！
- en: '*This article was also published on the* [*NannyML blog*](https://www.nannyml.com/blog/detecting-covariate-shift-multivariate-approach)*.*'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '*这篇文章也发表在* [*NannyML 博客*](https://www.nannyml.com/blog/detecting-covariate-shift-multivariate-approach)*上。*'
- en: '![](../Images/619f04f6449ebd7dd342b9dd2cfac826.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/619f04f6449ebd7dd342b9dd2cfac826.png)'
- en: Thanks for reading!
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢阅读！
- en: If you liked this post, why don’t you [**subscribe for email updates**](https://michaloleszak.medium.com/subscribe)
    on my new articles? And by [**becoming a Medium member**](https://michaloleszak.medium.com/membership),
    you can support my writing and get unlimited access to all stories by other authors
    and yours truly.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你喜欢这篇文章，为什么不[**订阅电子邮件更新**](https://michaloleszak.medium.com/subscribe)以获取我的新文章？通过[**成为
    Medium 会员**](https://michaloleszak.medium.com/membership)，你可以支持我的写作，并无限制地访问所有其他作者和我自己的故事。
- en: Want to always keep your finger on the pulse of the increasingly faster-developing
    field of machine learning and AI? Check out my new newsletter, [**AI Pulse**](https://pulseofai.substack.com/).
    Need consulting? You can ask me anything or book me for a 1:1 [**here**](https://topmate.io/michaloleszak).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 想始终保持对迅速发展的机器学习和人工智能领域的关注吗？查看我的新通讯，[**AI Pulse**](https://pulseofai.substack.com/)。需要咨询？你可以在[**这里**](https://topmate.io/michaloleszak)向我提问或预约一对一咨询。
- en: 'You can also try one of [my other articles](https://michaloleszak.github.io/blog/).
    Can’t choose? Pick one of these:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以尝试阅读[我的其他文章](https://michaloleszak.github.io/blog/)。难以选择？试试这些：
- en: '[](/feature-selection-methods-and-how-to-choose-them-1e7469100e7e?source=post_page-----c099bd1891b9--------------------------------)
    [## Feature Selection Methods and How to Choose Them'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '[特征选择方法及其选择方式](https://www.example.com/feature-selection-methods-and-how-to-choose-them-1e7469100e7e?source=post_page-----c099bd1891b9--------------------------------)
    [## 特征选择方法及其选择方式'
- en: The why, the how, and the when of feature selection, plus some handy tricks
    and tips
  id: totrans-128
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 特征选择的原因、方法和时机，加上一些实用的技巧和窍门
- en: towardsdatascience.com](/feature-selection-methods-and-how-to-choose-them-1e7469100e7e?source=post_page-----c099bd1891b9--------------------------------)
    [](/on-the-importance-of-bayesian-thinking-in-everyday-life-a74475fcceeb?source=post_page-----c099bd1891b9--------------------------------)
    [## On the Importance of Bayesian Thinking in Everyday Life
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '[关于贝叶斯思维在日常生活中的重要性](https://www.example.com/on-the-importance-of-bayesian-thinking-in-everyday-life-a74475fcceeb?source=post_page-----c099bd1891b9--------------------------------)
    [## 关于贝叶斯思维在日常生活中的重要性'
- en: This simple mind-shift will help you better understand the uncertain world around
    you
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 这种简单的思维转变将帮助你更好地理解你周围的不确定世界。
- en: towardsdatascience.com](/on-the-importance-of-bayesian-thinking-in-everyday-life-a74475fcceeb?source=post_page-----c099bd1891b9--------------------------------)
    [](/confidence-intervals-vs-prediction-intervals-7b296ae58745?source=post_page-----c099bd1891b9--------------------------------)
    [## Confidence Intervals vs Prediction Intervals
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '[关于置信区间与预测区间的区别](https://www.example.com/confidence-intervals-vs-prediction-intervals-7b296ae58745?source=post_page-----c099bd1891b9--------------------------------)
    [## 置信区间与预测区间'
- en: Confusing the two can be costly. See how they differ and when to use each!
  id: totrans-132
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 混淆这两者可能会很昂贵。了解它们的不同之处以及何时使用每一种！
- en: towardsdatascience.com](/confidence-intervals-vs-prediction-intervals-7b296ae58745?source=post_page-----c099bd1891b9--------------------------------)
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '[关于置信区间与预测区间的区别](https://www.example.com/confidence-intervals-vs-prediction-intervals-7b296ae58745?source=post_page-----c099bd1891b9--------------------------------)'
