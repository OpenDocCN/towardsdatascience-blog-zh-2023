- en: Implementing, Solving, and Visualizing the Traveling Salesman Problem with Python
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Pythonå®ç°ã€è§£å†³å’Œå¯è§†åŒ–æ—…è¡Œæ¨é”€å‘˜é—®é¢˜
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c?source=collection_archive---------8-----------------------#2023-05-09](https://towardsdatascience.com/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c?source=collection_archive---------8-----------------------#2023-05-09)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c?source=collection_archive---------8-----------------------#2023-05-09](https://towardsdatascience.com/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c?source=collection_archive---------8-----------------------#2023-05-09)
- en: Translate an optimization model from math to Python, optimize it, and visualize
    the solution to gain quick feedback on modeling errors
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å°†æ•°å­¦ä¼˜åŒ–æ¨¡å‹ç¿»è¯‘ä¸ºPythonï¼Œè¿›è¡Œä¼˜åŒ–ï¼Œå¹¶å¯è§†åŒ–è§£å†³æ–¹æ¡ˆï¼Œä»¥ä¾¿å¿«é€Ÿè·å¾—å»ºæ¨¡é”™è¯¯çš„åé¦ˆ
- en: '[](https://medium.com/@carlosjuribe?source=post_page-----fc7ee8198b6c--------------------------------)[![Carlos
    J. Uribe](../Images/902c5f4ac5d404dd99916f145be6756c.png)](https://medium.com/@carlosjuribe?source=post_page-----fc7ee8198b6c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----fc7ee8198b6c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----fc7ee8198b6c--------------------------------)
    [Carlos J. Uribe](https://medium.com/@carlosjuribe?source=post_page-----fc7ee8198b6c--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@carlosjuribe?source=post_page-----fc7ee8198b6c--------------------------------)[![Carlos
    J. Uribe](../Images/902c5f4ac5d404dd99916f145be6756c.png)](https://medium.com/@carlosjuribe?source=post_page-----fc7ee8198b6c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----fc7ee8198b6c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----fc7ee8198b6c--------------------------------)
    [Carlos J. Uribe](https://medium.com/@carlosjuribe?source=post_page-----fc7ee8198b6c--------------------------------)'
- en: Â·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4337eddb94ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c&user=Carlos+J.+Uribe&userId=4337eddb94ed&source=post_page-4337eddb94ed----fc7ee8198b6c---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----fc7ee8198b6c--------------------------------)
    Â·24 min readÂ·May 9, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ffc7ee8198b6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c&user=Carlos+J.+Uribe&userId=4337eddb94ed&source=-----fc7ee8198b6c---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[å…³æ³¨](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4337eddb94ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c&user=Carlos+J.+Uribe&userId=4337eddb94ed&source=post_page-4337eddb94ed----fc7ee8198b6c---------------------post_header-----------)
    å‘è¡¨åœ¨[Towards Data Science](https://towardsdatascience.com/?source=post_page-----fc7ee8198b6c--------------------------------)
    Â·24 åˆ†é’Ÿé˜…è¯»Â·2023 å¹´ 5 æœˆ 9 æ—¥[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Ffc7ee8198b6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c&user=Carlos+J.+Uribe&userId=4337eddb94ed&source=-----fc7ee8198b6c---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffc7ee8198b6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c&source=-----fc7ee8198b6c---------------------bookmark_footer-----------)![](../Images/15ba58fb291ca49e32b081f48ba9f3f7.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffc7ee8198b6c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c&source=-----fc7ee8198b6c---------------------bookmark_footer-----------)![](../Images/15ba58fb291ca49e32b081f48ba9f3f7.png)'
- en: 'Image generated by DALLÂ·E 3 with authorâ€™s prompt: â€œa network of locations in
    a city and an optimal route connecting themâ€'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±DALLÂ·E 3ç”Ÿæˆçš„å›¾åƒï¼Œä½œè€…çš„æç¤ºæ˜¯ï¼šâ€œåŸå¸‚ä¸­çš„ä½ç½®ç½‘ç»œå’Œè¿æ¥å®ƒä»¬çš„æœ€ä½³è·¯çº¿â€
- en: '*ğŸ‘ï¸* **This is article #3 of the series covering the project â€œ**[**An Intelligent
    Decision Support System for Tourism in Python**](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236)**â€.**
    I encourage you to check it out to get a general overview of the whole project.
    If youâ€™re only interested in how to implement a model of the TSP in Python, youâ€™re
    still at the right place: this article is self-contained, and I will walk you
    through all the stepsâ€”installation of dependencies, analysis, code, interpretation
    of results, and model debugging.'
  id: totrans-9
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ‘ï¸* **è¿™æ˜¯æ¶µç›–é¡¹ç›®â€œ**[**Python ä¸­çš„æ™ºèƒ½å†³ç­–æ”¯æŒç³»ç»Ÿ**](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236)**â€çš„ç³»åˆ—æ–‡ç« ä¸­çš„ç¬¬
    3 ç¯‡ã€‚** æˆ‘é¼“åŠ±ä½ æŸ¥çœ‹ï¼Œä»¥è·å¾—æ•´ä¸ªé¡¹ç›®çš„ä¸€èˆ¬æ¦‚è¿°ã€‚å¦‚æœä½ åªæ˜¯å¯¹å¦‚ä½•åœ¨ Python ä¸­å®ç° TSP æ¨¡å‹æ„Ÿå…´è¶£ï¼Œä½ ä»ç„¶æ¥å¯¹åœ°æ–¹äº†ï¼šè¿™ç¯‡æ–‡ç« æ˜¯è‡ªåŒ…å«çš„ï¼Œæˆ‘å°†å¸¦ä½ å®Œæˆæ‰€æœ‰æ­¥éª¤â€”â€”å®‰è£…ä¾èµ–é¡¹ã€åˆ†æã€ä»£ç ã€ç»“æœè§£é‡Šå’Œæ¨¡å‹è°ƒè¯•ã€‚'
- en: The present article continues our journey right where [sprint 2](https://medium.com/@carlosjuribe/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07)
    left off. Here, we take the **mathematical** model we formulated in the previous
    article, and **implement it in Python**, using **Pyomo**, and following **good
    practices.** Then, the model is optimized, and **its solutions are visualized
    and analyzed**. For pedagogyâ€™s sake, we find that the initial model formulation
    is incomplete, so I show how we can derive, from first principles, the **constraints
    needed to fix the formulation**. These new constraints are added to the Pyomo
    model, and the new solutions are analyzed again and verified.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡ç»§ç»­ä»[sprint 2](https://medium.com/@carlosjuribe/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07)ç»“æŸçš„åœ°æ–¹æ¥ç€è®²è§£ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¸Šä¸€ç¯‡æ–‡ç« ä¸­**åˆ¶å®šçš„æ•°å­¦**æ¨¡å‹**å®ç°åˆ°
    Python ä¸­**ï¼Œä½¿ç”¨**Pyomo**ï¼Œå¹¶éµå¾ª**è‰¯å¥½å®è·µ**ã€‚ç„¶åï¼Œæ¨¡å‹ç»è¿‡ä¼˜åŒ–ï¼Œ**è§£å†³æ–¹æ¡ˆè¢«å¯è§†åŒ–å’Œåˆ†æ**ã€‚ä¸ºäº†æ•™å­¦ç›®çš„ï¼Œæˆ‘ä»¬å‘ç°åˆå§‹æ¨¡å‹å…¬å¼ä¸å®Œæ•´ï¼Œå› æ­¤æˆ‘å±•ç¤ºäº†å¦‚ä½•ä»ç¬¬ä¸€æ€§åŸç†æ¨å¯¼å‡º**ä¿®æ­£å…¬å¼æ‰€éœ€çš„çº¦æŸ**ã€‚è¿™äº›æ–°çº¦æŸè¢«æ·»åŠ åˆ°
    Pyomo æ¨¡å‹ä¸­ï¼Œæ–°è§£å†³æ–¹æ¡ˆå†æ¬¡è¢«åˆ†æå’ŒéªŒè¯ã€‚
- en: Table of contents
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç›®å½•
- en: '[1\. Implementing the model in Python using Pyomo](#238c)'
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[1\. ä½¿ç”¨ Pyomo åœ¨ Python ä¸­å®ç°æ¨¡å‹](#238c)'
- en: '[1.1\. Installing the dependencies](#d7b4)'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[1.1\. å®‰è£…ä¾èµ–é¡¹](#d7b4)'
- en: '[1.2\. Math becomes code](#c3f6)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[1.2\. æ•°å­¦å˜æˆä»£ç ](#c3f6)'
- en: '[2\. Solving and validating the model](#2c66)'
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[2\. è§£å†³å’ŒéªŒè¯æ¨¡å‹](#2c66)'
- en: '[2.1\. Solving the model](#5d50)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[2.1\. è§£å†³æ¨¡å‹](#5d50)'
- en: '[2.2\. Visualizing the results](#5e0a)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[2.2\. ç»“æœå¯è§†åŒ–](#5e0a)'
- en: '[2.3\. Analyzing the results](#8620)'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[2.3\. åˆ†æç»“æœ](#8620)'
- en: '[3\. Fixing the formulation](#b10a)'
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[3\. ä¿®æ­£å…¬å¼](#b10a)'
- en: '[3.1\. The motivating idea](#be6b)'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.1\. æ¿€åŠ±æ€æƒ³](#be6b)'
- en: '[3.2\. Expressing the motivating idea as logical implications](#42b8)'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.2\. å°†æ¿€åŠ±æ€æƒ³è¡¨è¾¾ä¸ºé€»è¾‘è•´æ¶µ](#42b8)'
- en: '[3.3\. Formulating the logical implications as linear constraints](#ebeb)'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.3\. å°†é€»è¾‘è•´æ¶µå…¬å¼åŒ–ä¸ºçº¿æ€§çº¦æŸ](#ebeb)'
- en: '[3.4\. Deducing a proper value for the â€œbig Mâ€](#7747)'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.4\. æ¨å¯¼â€œå¤§ Mâ€çš„é€‚å½“å€¼](#7747)'
- en: '[4\. Implementing and verifying the new formulation](#195f)'
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[4\. å®ç°å’ŒéªŒè¯æ–°å…¬å¼](#195f)'
- en: '[4.1\. Augmenting the Pyomo model](#50da)'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[4.1\. æ‰©å±• Pyomo æ¨¡å‹](#50da)'
- en: '[4.2\. Plotting the updated modelâ€™s solution](#f2ba)'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[4.2\. ç»˜åˆ¶æ›´æ–°æ¨¡å‹çš„è§£å†³æ–¹æ¡ˆ](#f2ba)'
- en: '[5\. Conclusion (for next sprint)](#8f98)'
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[5\. ç»“è®ºï¼ˆç”¨äºä¸‹ä¸€ä¸ªå†²åˆºï¼‰](#8f98)'
- en: '*ğŸ“–* If you didnâ€™t read the [previous article](https://medium.com/@carlosjuribe/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07),
    worry not. The mathematical formulation is also **stated (but not derived**) here,
    with each model component next to its code implementation. If you donâ€™t understand
    where things come from or mean, please read the article of â€œ[sprint 2](https://medium.com/@carlosjuribe/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07)â€,
    and if youâ€™d like more context on the problem statement and motivation, read the
    article for â€œ[sprint 1](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef)".'
  id: totrans-28
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ“–* å¦‚æœä½ æ²¡æœ‰é˜…è¯»è¿‡[ä¸Šä¸€ç¯‡æ–‡ç« ](https://medium.com/@carlosjuribe/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07)ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒã€‚æ•°å­¦å…¬å¼åœ¨è¿™é‡Œä¹Ÿ**é˜è¿°ï¼ˆä½†æ²¡æœ‰æ¨å¯¼ï¼‰**ï¼Œæ¯ä¸ªæ¨¡å‹ç»„ä»¶éƒ½ä¸å…¶ä»£ç å®ç°ç›¸é‚»ã€‚å¦‚æœä½ ä¸ç†è§£è¿™äº›å†…å®¹çš„æ¥æºæˆ–å«ä¹‰ï¼Œè¯·é˜…è¯»â€œ[å†²åˆº
    2](https://medium.com/@carlosjuribe/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07)â€çš„æ–‡ç« ï¼Œå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºé—®é¢˜é™ˆè¿°å’ŒåŠ¨æœºçš„èƒŒæ™¯ï¼Œè¯·é˜…è¯»â€œ[å†²åˆº
    1](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef)â€çš„æ–‡ç« ã€‚'
- en: '[](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07?source=post_page-----fc7ee8198b6c--------------------------------)
    [## Modeling the Traveling Salesman Problem from first principles'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07?source=post_page-----fc7ee8198b6c--------------------------------)
    [## ä»ç¬¬ä¸€åŸåˆ™å»ºæ¨¡æ—…è¡Œæ¨é”€å‘˜é—®é¢˜'
- en: A concepts-first, math-second approach to modeling the most well-known routing
    problem in Operations Research
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ä¸€ç§ä»¥æ¦‚å¿µä¸ºå…ˆï¼Œæ•°å­¦ä¸ºåçš„å»ºæ¨¡æ–¹æ³•ï¼Œç”¨äºè§£å†³è¿ç­¹å­¦ä¸­æœ€è‘—åçš„è·¯å¾„é—®é¢˜
- en: towardsdatascience.com](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07?source=post_page-----fc7ee8198b6c--------------------------------)
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '[towardsdatascience.com](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07?source=post_page-----fc7ee8198b6c--------------------------------)'
- en: 1\. Implementing the model in Python using Pyomo
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1. å®ç°ä½¿ç”¨Pyomoçš„Pythonæ¨¡å‹
- en: Python is used as itâ€™s the top language in data science, and [**Pyomo**](https://www.pyomo.org/)
    as itâ€™s one of the best (open-source) libraries that deal effectively with large-scale
    models.
  id: totrans-33
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Pythonæ˜¯å› ä¸ºå®ƒæ˜¯æ•°æ®ç§‘å­¦ä¸­çš„é¡¶çº§è¯­è¨€ï¼Œè€Œ[**Pyomo**](https://www.pyomo.org/)åˆ™æ˜¯å¤„ç†å¤§è§„æ¨¡æ¨¡å‹çš„æœ€ä½³ï¼ˆå¼€æºï¼‰åº“ä¹‹ä¸€ã€‚
- en: In this section, Iâ€™ll go through each **model component** defined in the formulation,
    **and explain how it is translated to Pyomo code**. Iâ€™ve tried to not leave any
    gaps, but if you feel otherwise, please leave a question in the comments.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘å°†é€ä¸€è®²è§£åœ¨å…¬å¼ä¸­å®šä¹‰çš„æ¯ä¸ª**æ¨¡å‹ç»„ä»¶**ï¼Œ**å¹¶è§£é‡Šå®ƒæ˜¯å¦‚ä½•è½¬æ¢ä¸ºPyomoä»£ç **çš„ã€‚æˆ‘å°½é‡ä¸ç•™ä¸‹ä»»ä½•ç©ºç™½ï¼Œä½†å¦‚æœä½ è§‰å¾—è¿˜æœ‰é—®é¢˜ï¼Œè¯·åœ¨è¯„è®ºä¸­æé—®ã€‚
- en: '***Disclaimer****: The target reader is expected to be new to Pyomo, and even
    to modeling, so to lower their cognitive burden,* ***concise and simple implementation
    is prioritized over programming best practices****. The goal now is to teach optimization
    modeling, not software engineering. The code is incrementally improved in future
    iterations as this proof-of-concept evolves into a more sophisticated MVP.*'
  id: totrans-35
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***å…è´£å£°æ˜****ï¼šç›®æ ‡è¯»è€…é¢„è®¡å¯¹Pyomoç”šè‡³å»ºæ¨¡éƒ½æ˜¯æ–°æ‰‹ï¼Œå› æ­¤ä¸ºäº†é™ä½ä»–ä»¬çš„è®¤çŸ¥è´Ÿæ‹…ï¼Œ* ***ç®€æ´æ˜äº†çš„å®ç°ä¼˜å…ˆäºç¼–ç¨‹æœ€ä½³å®è·µ****ã€‚ç›®å‰çš„ç›®æ ‡æ˜¯æ•™æˆä¼˜åŒ–å»ºæ¨¡ï¼Œè€Œéè½¯ä»¶å·¥ç¨‹ã€‚ä»£ç ä¼šåœ¨æœªæ¥è¿­ä»£ä¸­é€æ­¥æ”¹è¿›ï¼Œéšç€è¿™ä¸€æ¦‚å¿µéªŒè¯æ¼”å˜æˆæ›´å¤æ‚çš„MVPã€‚'
- en: 1.1\. Installing the dependencies
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.1. å®‰è£…ä¾èµ–é¡¹
- en: For people in a hurry
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¯¹äºç€æ€¥çš„äºº
- en: Install (or make sure you already have installed) the libraries `pyomo`, `networkx`
    and `pandas`, and the package `glpk`.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: å®‰è£…ï¼ˆæˆ–ç¡®ä¿å·²ç»å®‰è£…ï¼‰åº“`pyomo`ã€`networkx`å’Œ`pandas`ï¼Œä»¥åŠåŒ…`glpk`ã€‚
- en: '*ğŸ“* The package `glpk` contains the [GLPK solver](https://www.gnu.org/software/glpk/),
    which is an (open source) **external solver** we will use to optimize the models
    we create. Pyomo is used to **create models of problems** and pass them to GLPK,
    which will run the algorithms that carry out the optimization process itself.
    GLPK then returns the solutions to the Pyomo model object, which are stored as
    model attributes, so we can use them conveniently without leaving Python.'
  id: totrans-39
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ“* åŒ…`glpk`åŒ…å«[GLPKæ±‚è§£å™¨](https://www.gnu.org/software/glpk/)ï¼Œè¿™æ˜¯æˆ‘ä»¬ç”¨æ¥ä¼˜åŒ–åˆ›å»ºæ¨¡å‹çš„**å¤–éƒ¨æ±‚è§£å™¨**ã€‚Pyomoç”¨äº**åˆ›å»ºé—®é¢˜æ¨¡å‹**å¹¶å°†å…¶ä¼ é€’ç»™GLPKï¼ŒGLPKå°†è¿è¡Œç®—æ³•æ¥æ‰§è¡Œä¼˜åŒ–è¿‡ç¨‹ã€‚ç„¶åï¼ŒGLPKå°†è§£å†³æ–¹æ¡ˆè¿”å›ç»™Pyomoæ¨¡å‹å¯¹è±¡ï¼Œè¿™äº›è§£å†³æ–¹æ¡ˆè¢«å­˜å‚¨ä¸ºæ¨¡å‹å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ç¦»å¼€Pythonçš„æƒ…å†µä¸‹æ–¹ä¾¿åœ°ä½¿ç”¨å®ƒä»¬ã€‚'
- en: 'The recommended way to install GLPK is [through conda](https://anaconda.org/conda-forge/glpk)
    so that Pyomo can find the GLPK solver easily. To install all dependencies together
    in one go, run:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨èçš„å®‰è£…GLPKçš„æ–¹æ³•æ˜¯é€šè¿‡[conda](https://anaconda.org/conda-forge/glpk)ï¼Œè¿™æ ·Pyomoå¯ä»¥è½»æ¾æ‰¾åˆ°GLPKæ±‚è§£å™¨ã€‚è¦ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰ä¾èµ–é¡¹ï¼Œè¯·è¿è¡Œï¼š
- en: '[PRE0]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: For organized people
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¯¹äºæœ‰ç»„ç»‡çš„äºº
- en: I recommend creating a separate **virtual environment** in which to install
    all the libraries needed to follow the articles in this series. Copy this text
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å»ºè®®åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„**è™šæ‹Ÿç¯å¢ƒ**ï¼Œåœ¨å…¶ä¸­å®‰è£…æ‰€æœ‰éœ€è¦çš„åº“ä»¥è·Ÿéšæœ¬ç³»åˆ—çš„æ–‡ç« ã€‚å¤åˆ¶è¿™æ®µæ–‡æœ¬
- en: '[PRE1]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: and save it in a YAML file named `environment.yml`. Open an Anaconda prompt
    in the same location and run the command
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¶å°†å…¶ä¿å­˜åœ¨åä¸º`environment.yml`çš„YAMLæ–‡ä»¶ä¸­ã€‚åœ¨ç›¸åŒä½ç½®æ‰“å¼€Anacondaæç¤ºç¬¦å¹¶è¿è¡Œå‘½ä»¤
- en: '[PRE2]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: After some minutes, the environment is created with all the dependencies installed
    inside. Run `conda activate ttp` to "get inside" the environment, fire up Jupyter
    Lab (by running `jupyter lab` in the terminal), and start coding along!
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: å‡ åˆ†é’Ÿåï¼Œç¯å¢ƒå°†åˆ›å»ºå®Œæ¯•ï¼Œæ‰€æœ‰ä¾èµ–é¡¹éƒ½å·²å®‰è£…ã€‚è¿è¡Œ`conda activate ttp`ä»¥â€œè¿›å…¥â€ç¯å¢ƒï¼Œå¯åŠ¨Jupyter Labï¼ˆåœ¨ç»ˆç«¯ä¸­è¿è¡Œ`jupyter
    lab`ï¼‰ï¼Œç„¶åå¼€å§‹ç¼–ç å§ï¼
- en: 1.2\. Math becomes code
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2. æ•°å­¦å˜æˆä»£ç 
- en: First, letâ€™s make sure the GLPK solver is findable by Pyomo
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œç¡®ä¿Pyomoå¯ä»¥æ‰¾åˆ°GLPKæ±‚è§£å™¨
- en: '[PRE3]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '*â›”* If you got the message `''glpk'' available: False`, the solver didn''t
    install properly. Please try one of these to fix the issue:'
  id: totrans-52
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*â›”* å¦‚æœä½ æ”¶åˆ°æ¶ˆæ¯`''glpk'' available: False`ï¼Œè¯´æ˜æ±‚è§£å™¨å®‰è£…ä¸æ­£ç¡®ã€‚è¯·å°è¯•ä»¥ä¸‹æ–¹æ³•è§£å†³é—®é¢˜ï¼š'
- en: ''
  id: totrans-53
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '- re-do the installation steps carefully'
  id: totrans-54
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '- é‡æ–°ä»”ç»†æ‰§è¡Œå®‰è£…æ­¥éª¤'
- en: ''
  id: totrans-55
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '- run `conda install -y -c conda-forge glpk` in the base (default) environment'
  id: totrans-56
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '- åœ¨åŸºç¡€ï¼ˆé»˜è®¤ï¼‰ç¯å¢ƒä¸­è¿è¡Œ `conda install -y -c conda-forge glpk`'
- en: ''
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '- try to install a different solver that works for you'
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '- å°è¯•å®‰è£…é€‚åˆä½ çš„ä¸åŒæ±‚è§£å™¨'
- en: Then read the distance data CSV file
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åè¯»å–è·ç¦»æ•°æ®çš„CSVæ–‡ä»¶
- en: '[PRE5]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/18f610b518e1fed4161c761c29896bb7.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/18f610b518e1fed4161c761c29896bb7.png)'
- en: 'Now we enter â€œstage 4â€ of the [Agile Operations Research workflow], marked
    as the green block below:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬è¿›å…¥[æ•æ·è¿ç­¹å­¦å·¥ä½œæµç¨‹]çš„â€œé˜¶æ®µ4â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç»¿è‰²å—ï¼š
- en: '![](../Images/7f9b746e25cbf6a6d4850431739abfc9.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7f9b746e25cbf6a6d4850431739abfc9.png)'
- en: '**Figure 1.** Minimalist workflow to problem-solving in OR. 4th stage: **computer**
    **model** (Image by author)'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 1.** è¿ç­¹å­¦é—®é¢˜è§£å†³çš„æç®€å·¥ä½œæµç¨‹ã€‚ç¬¬4é˜¶æ®µï¼š**è®¡ç®—æœº** **æ¨¡å‹**ï¼ˆä½œè€…æä¾›çš„å›¾ç‰‡ï¼‰'
- en: The task is to take the mathematical model created earlier and implement it
    in code *exactly as it was defined mathematically.*
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ä»»åŠ¡æ˜¯å°†ä¹‹å‰åˆ›å»ºçš„æ•°å­¦æ¨¡å‹å®ç°æˆä»£ç ï¼Œ*å®Œå…¨æŒ‰ç…§æ•°å­¦ä¸Šå®šä¹‰çš„æ–¹å¼*ã€‚
- en: '*ğŸ‘ï¸* We are allowed to create as many Python objects as we want if that makes
    the model implementation easier, but **we are not allowed to modify the underlying
    model in any way, while weâ€™re coding it**. **It would cause the math model and
    the computer model to be out-of-sync**, thereby making later model debugging pretty
    hard.'
  id: totrans-66
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ‘ï¸* å¦‚æœè¿™æ ·å¯ä»¥ä½¿æ¨¡å‹å®ç°æ›´å®¹æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä»»æ„æ•°é‡çš„Pythonå¯¹è±¡ï¼Œä½†**åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæˆ‘ä»¬ä¸å…è®¸ä»¥ä»»ä½•æ–¹å¼ä¿®æ”¹åº•å±‚æ¨¡å‹**ã€‚**è¿™ä¼šå¯¼è‡´æ•°å­¦æ¨¡å‹å’Œè®¡ç®—æœºæ¨¡å‹ä¸åŒæ­¥**ï¼Œä»è€Œä½¿åç»­çš„æ¨¡å‹è°ƒè¯•å˜å¾—ç›¸å½“å›°éš¾ã€‚'
- en: 'We instantiate an empty Pyomo model, in which we will store model components
    as attributes:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªç©ºçš„Pyomoæ¨¡å‹ï¼Œåœ¨å…¶ä¸­å°†æ¨¡å‹ç»„ä»¶ä½œä¸ºå±æ€§å­˜å‚¨ï¼š
- en: '[PRE6]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 1.2.1\. Sets
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2.1\. é›†åˆ
- en: 'In order to create the set of sites ğ•Š = {Louvre, Tour Eiffel, â€¦, hotel}, we
    extract their names from the index of the dataframe and use it to create a Pyomo
    `Set` named `sites`:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†åˆ›å»ºç«™ç‚¹é›†åˆğ•Š = {å¢æµ®å®«ï¼ŒåŸƒè²å°”é“å¡”ï¼Œâ€¦ï¼Œé…’åº—}ï¼Œæˆ‘ä»¬ä»æ•°æ®æ¡†çš„ç´¢å¼•ä¸­æå–å®ƒä»¬çš„åç§°ï¼Œå¹¶ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªåä¸º`sites`çš„Pyomo `Set`ï¼š
- en: '[PRE7]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: To create the derived set
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºæ´¾ç”Ÿé›†
- en: '![](../Images/d715b2ebc97925fc3acc15991d0d540e.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d715b2ebc97925fc3acc15991d0d540e.png)'
- en: '**Expression 3.1.** Derived set of possible arcs of the tour (site-to-site
    trajectories).'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.1.** æ—…è¡Œçš„å¯èƒ½å¼§çš„æ´¾ç”Ÿé›†ï¼ˆç«™ç‚¹åˆ°ç«™ç‚¹çš„è½¨è¿¹ï¼‰ã€‚'
- en: We store the filter ğ‘– â‰  ğ‘— inside a *construction rule* (the Python function
    `_rule_domain_arcs`), and pass this rule to the `filter` keyword when initializing
    the `Set`. Note that this filter will be applied to the cross-product of the sites
    (ğ•Š Ã— ğ•Š), and will filter out those members of the cross-product that do not satisfy
    the rule.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†è¿‡æ»¤å™¨ğ‘– â‰  ğ‘— å­˜å‚¨åœ¨*æ„é€ è§„åˆ™*ï¼ˆPythonå‡½æ•°`_rule_domain_arcs`ï¼‰ä¸­ï¼Œå¹¶åœ¨åˆå§‹åŒ–`Set`æ—¶å°†æ­¤è§„åˆ™ä¼ é€’ç»™`filter`å…³é”®å­—ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨å°†åº”ç”¨äºç«™ç‚¹çš„ç¬›å¡å°”ç§¯ï¼ˆğ•Š
    Ã— ğ•Šï¼‰ï¼Œå¹¶ä¼šç­›é€‰å‡ºé‚£äº›ä¸ç¬¦åˆè§„åˆ™çš„ç¬›å¡å°”ç§¯æˆå‘˜ã€‚
- en: '[PRE8]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 1.2.2\. Parameters
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2.2\. å‚æ•°
- en: The parameter
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: ğ·áµ¢â±¼ â‰” Distance between site ğ‘– and site ğ‘—
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: ğ·áµ¢â±¼ â‰” ç«™ç‚¹ğ‘–å’Œç«™ç‚¹ğ‘—ä¹‹é—´çš„è·ç¦»
- en: 'is created with the constructor `pyo.Param`, which takes as **the first** (positional)
    argument the domain ğ”¸ (`model.valid_arcs`) that indexes it, and as the *keyword*
    argument `initialize` another construction rule, `_rule_distance_between_sites`,
    that is evaluated for each pair (ğ‘–, ğ‘—) âˆˆ ğ”¸. In each evaluation, the numeric value
    of the distance is fetched from the dataframe `df_distances`, and linked internally
    to the pair (ğ‘–, ğ‘—):'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¯é€šè¿‡æ„é€ å‡½æ•°`pyo.Param`åˆ›å»ºçš„ï¼Œè¯¥æ„é€ å‡½æ•°å°†**ç¬¬ä¸€ä¸ª**ï¼ˆä½ç½®ï¼‰å‚æ•°åŸŸğ”¸ï¼ˆ`model.valid_arcs`ï¼‰ä¼ é€’ç»™å®ƒï¼Œå¹¶å°†*å…³é”®å­—*å‚æ•°`initialize`è®¾ç½®ä¸ºå¦ä¸€ä¸ªæ„é€ è§„åˆ™`_rule_distance_between_sites`ï¼Œè¯¥è§„åˆ™é’ˆå¯¹æ¯å¯¹ï¼ˆğ‘–,
    ğ‘—ï¼‰âˆˆ ğ”¸è¿›è¡Œè¯„ä¼°ã€‚åœ¨æ¯æ¬¡è¯„ä¼°ä¸­ï¼Œè·ç¦»çš„æ•°å€¼ä»æ•°æ®æ¡†`df_distances`ä¸­æå–ï¼Œå¹¶åœ¨å†…éƒ¨ä¸å¯¹ï¼ˆğ‘–, ğ‘—ï¼‰ç›¸å…³è”ï¼š
- en: '[PRE9]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 1.2.3\. Decision variables
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2.3\. å†³ç­–å˜é‡
- en: Because ğ›¿áµ¢â±¼ has the same â€œindex domainâ€ as ğ·áµ¢â±¼, the way to build this component
    is very similar, with the exception that no construction rule is needed here.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºğ›¿áµ¢â±¼å…·æœ‰ä¸ğ·áµ¢â±¼ç›¸åŒçš„â€œç´¢å¼•åŸŸâ€ï¼Œå› æ­¤æ„å»ºæ­¤ç»„ä»¶çš„æ–¹å¼éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯è¿™é‡Œä¸éœ€è¦æ„é€ è§„åˆ™ã€‚
- en: '![](../Images/991fc19df0913c668de95e6e5728825e.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/991fc19df0913c668de95e6e5728825e.png)'
- en: '**Expression 3.2.** Binary decision variables'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.2.** äºŒè¿›åˆ¶å†³ç­–å˜é‡'
- en: '[PRE10]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The first positional argument of `pyo.Var` is reserved for its index set ğ”¸,
    and the "type" of variable is specified with the keyword argument `within`. With
    "type of variable" I mean the **range of values** that the variable can take.
    Here, the range of ğ›¿áµ¢â±¼ is just 0 and 1, so it is of type binary. Mathematically,
    we would write ğ›¿áµ¢â±¼ âˆˆ {0, 1}, but instead of creating separate constraints to indicate
    this, we can indicate it directly in Pyomo by setting `within=pyo.Binary` at the
    time we create the variable.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '`pyo.Var`çš„ç¬¬ä¸€ä¸ªä½ç½®å‚æ•°ä¿ç•™ç”¨äºå…¶ç´¢å¼•é›†ğ”¸ï¼Œå˜é‡çš„â€œç±»å‹â€é€šè¿‡å…³é”®å­—å‚æ•°`within`æŒ‡å®šã€‚è¿™é‡Œçš„â€œå˜é‡ç±»å‹â€æŒ‡çš„æ˜¯å˜é‡å¯ä»¥å–çš„**å€¼èŒƒå›´**ã€‚åœ¨è¿™é‡Œï¼Œğ›¿áµ¢â±¼çš„èŒƒå›´ä»…ä¸º0å’Œ1ï¼Œæ‰€ä»¥å®ƒæ˜¯äºŒè¿›åˆ¶ç±»å‹ã€‚ä»æ•°å­¦ä¸Šè®²ï¼Œæˆ‘ä»¬ä¼šå†™ä½œğ›¿áµ¢â±¼
    âˆˆ {0, 1}ï¼Œä½†æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºå˜é‡æ—¶é€šè¿‡è®¾ç½®`within=pyo.Binary`ç›´æ¥åœ¨Pyomoä¸­è¡¨ç¤ºè¿™ä¸€ç‚¹ï¼Œè€Œæ— éœ€åˆ›å»ºå•ç‹¬çš„çº¦æŸã€‚'
- en: 1.2.4\. Objective function
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2.4\. ç›®æ ‡å‡½æ•°
- en: '![](../Images/07c3a8da73c03dd98cdfa05171e38da0.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/07c3a8da73c03dd98cdfa05171e38da0.png)'
- en: '**Expression 3.3.** The objective function to be minimized: total tour distance'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.3.** éœ€è¦æœ€å°åŒ–çš„ç›®æ ‡å‡½æ•°ï¼šæ€»å·¡å›è·ç¦»'
- en: To construct an objective function we can â€œstoreâ€ the expression in a function
    that will be used as the *construction rule* for the objective. This function
    only takes one argument, the model, which is used to fetch any model component
    needed to build the expression.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: è¦æ„é€ ç›®æ ‡å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¡¨è¾¾å¼â€œå­˜å‚¨â€åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°å°†ç”¨ä½œ*æ„é€ è§„åˆ™*ã€‚æ­¤å‡½æ•°åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³æ¨¡å‹ï¼Œç”¨äºæå–æ„å»ºè¡¨è¾¾å¼æ‰€éœ€çš„ä»»ä½•æ¨¡å‹ç»„ä»¶ã€‚
- en: '[PRE11]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Observe the parallelism between the mathematical expression and the return statement
    of the function. We specify that this is a minimization problem with the `sense`
    keyword.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: è§‚å¯Ÿæ•°å­¦è¡¨è¾¾å¼ä¸å‡½æ•°çš„è¿”å›è¯­å¥ä¹‹é—´çš„å¹³è¡Œå…³ç³»ã€‚æˆ‘ä»¬é€šè¿‡`sense`å…³é”®å­—æŒ‡å®šè¿™æ˜¯ä¸€ä¸ªæœ€å°åŒ–é—®é¢˜ã€‚
- en: 1.2.5\. Constraints
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2.5\. çº¦æŸ
- en: If you recall from the previous article, a convenient way to enforce that each
    site is visited only once is by enforcing that each site is â€œenteredâ€ once and
    â€œexitedâ€ once, simultaneously.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ è®°å¾—ä¹‹å‰çš„æ–‡ç« ï¼Œä¸€ä¸ªæ–¹ä¾¿çš„æ–¹å¼æ¥å¼ºåˆ¶æ¯ä¸ªç«™ç‚¹ä»…è¢«è®¿é—®ä¸€æ¬¡æ˜¯å¼ºåˆ¶æ¯ä¸ªç«™ç‚¹åŒæ—¶è¢«â€œè¿›å…¥â€ä¸€æ¬¡å’Œâ€œé€€å‡ºâ€ä¸€æ¬¡ã€‚
- en: '**Each site is entered just once**'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ¯ä¸ªç«™ç‚¹ä»…è¢«è®¿é—®ä¸€æ¬¡**'
- en: '![](../Images/b77de8c8305e21df5c734eb15e98d8b5.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b77de8c8305e21df5c734eb15e98d8b5.png)'
- en: '**Expression 3.4.** Constraint set enforcing that each site is â€œenteredâ€ just
    once.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.4.** çº¦æŸé›†ï¼Œå¼ºåˆ¶æ¯ä¸ªç«™ç‚¹ä»…è¢«â€œè¿›å…¥â€ä¸€æ¬¡ã€‚'
- en: '[PRE12]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '**Each site is exited just once**'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ¯ä¸ªç«™ç‚¹ä»…è¢«é€€å‡ºä¸€æ¬¡**'
- en: '![](../Images/19605aa22a16c154824f63abdd7e883e.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/19605aa22a16c154824f63abdd7e883e.png)'
- en: '**Expression 3.5.** Constraint set enforcing that each site is â€œexitedâ€ just
    once.'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.5.** çº¦æŸé›†ï¼Œå¼ºåˆ¶æ¯ä¸ªç«™ç‚¹ä»…è¢«â€œé€€å‡ºâ€ä¸€æ¬¡ã€‚'
- en: '[PRE13]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 1.2.6\. Final inspection of the model
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2.6\. æ¨¡å‹çš„æœ€ç»ˆæ£€æŸ¥
- en: The model implementation is done. To see what it looks like as a whole, we should
    execute `model.pprint()`, and navigate a bit around to see if we missed some declarations
    or made some mistakes.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡å‹å®ç°å·²å®Œæˆã€‚ä¸ºäº†æŸ¥çœ‹æ¨¡å‹çš„æ•´ä½“æƒ…å†µï¼Œæˆ‘ä»¬åº”è¯¥æ‰§è¡Œ`model.pprint()`ï¼Œå¹¶ç¨å¾®æµè§ˆä¸€ä¸‹ï¼Œä»¥æŸ¥çœ‹æ˜¯å¦é—æ¼äº†ä¸€äº›å£°æ˜æˆ–çŠ¯äº†ä¸€äº›é”™è¯¯ã€‚
- en: 'To get an idea of the size of the model, we print the number of variables and
    constraints that it is made of:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†äº†è§£æ¨¡å‹çš„è§„æ¨¡ï¼Œæˆ‘ä»¬æ‰“å°å®ƒåŒ…å«çš„å˜é‡å’Œçº¦æŸçš„æ•°é‡ï¼š
- en: '[PRE14]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Having fewer than 100 constraints or variables, this is a small-size problem,
    and it will be optimized relatively fast by the solver.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: æ‹¥æœ‰å°‘äº100ä¸ªçº¦æŸæˆ–å˜é‡ï¼Œè¿™ä¸ªé—®é¢˜çš„è§„æ¨¡è¾ƒå°ï¼Œæ±‚è§£å™¨ä¼šç›¸å¯¹è¾ƒå¿«åœ°ä¼˜åŒ–å®ƒã€‚
- en: 2\. Solving and validating the model
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2\. è§£å†³å’ŒéªŒè¯æ¨¡å‹
- en: 2.1\. Solving the model
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.1\. è§£å†³æ¨¡å‹
- en: 'The next step in the [AOR flowchart] is to optimize the model, and inspect
    the solutions:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '[AOR æµç¨‹å›¾](https://example.org)ä¸­çš„ä¸‹ä¸€æ­¥æ˜¯ä¼˜åŒ–æ¨¡å‹å¹¶æ£€æŸ¥è§£å†³æ–¹æ¡ˆï¼š'
- en: '[PRE15]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Good news! The solver has found an **optimal solution** to this problem! Letâ€™s
    check it so that we can know what tour to follow when we get to Paris!
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½æ¶ˆæ¯ï¼æ±‚è§£å™¨æ‰¾åˆ°äº†è¿™ä¸ªé—®é¢˜çš„**æœ€ä¼˜è§£**ï¼è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ï¼Œä»¥ä¾¿çŸ¥é“åˆ°å·´é»æ—¶è¯¥è·Ÿéšä»€ä¹ˆè·¯çº¿ï¼
- en: 'For a very quick check, we can run `model.delta_ij.pprint()`, which will print
    all the (optimal) values of the ğ›¿áµ¢â±¼ variables, being either 0 or 1:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è¿›è¡Œå¿«é€Ÿæ£€æŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ`model.delta_ij.pprint()`ï¼Œè¿™å°†æ‰“å°æ‰€æœ‰ğ›¿áµ¢â±¼å˜é‡çš„ï¼ˆæœ€ä¼˜ï¼‰å€¼ï¼Œå€¼ä¸º0æˆ–1ï¼š
- en: '![](../Images/b4904acd1b5e94da81a282a4590f687e.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b4904acd1b5e94da81a282a4590f687e.png)'
- en: '**Figure 3.1.** Excerpt of the values of the decision variables as printed
    by the model (Image by Author)'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 3.1.** æ¨¡å‹æ‰“å°çš„å†³ç­–å˜é‡å€¼æ‘˜å½•ï¼ˆå›¾ç‰‡æ¥æºï¼šä½œè€…ï¼‰'
- en: Itâ€™s difficult to visualize a tour merely by looking at a list of *chosen arcs*,
    let alone analyze it to validate that we formulated the model correctly.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: ä»…é€šè¿‡æŸ¥çœ‹*é€‰æ‹©çš„å¼§çº¿*å¾ˆéš¾å¯è§†åŒ–ä¸€ä¸ªå·¡å›è·¯çº¿ï¼Œæ›´ä¸ç”¨è¯´åˆ†æå®ƒä»¥éªŒè¯æˆ‘ä»¬æ˜¯å¦æ­£ç¡®åœ°åˆ¶å®šäº†æ¨¡å‹ã€‚
- en: To really understand the solution, we need to visualize it.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: è¦çœŸæ­£ç†è§£è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œå¯è§†åŒ–ã€‚
- en: 2.2\. Visualizing the results
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.2\. ç»“æœå¯è§†åŒ–
- en: '*An image is worth a thousand records*'
  id: totrans-120
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ä¸€å¼ å›¾ç‰‡èƒœè¿‡åƒè¨€ä¸‡è¯­*'
- en: As weâ€™re dealing with nodes and arcs, the easiest way to **visualize the solution
    is to plot it as a graph**. Remember that this is a proof-of-concept, so **quick,
    effective feedback trumps beauty**. The [more insightful visualizations](/visualizing-routes-on-interactive-maps-with-python-part-1-44f8d25d0761)
    can wait until we have a working MVP. For now, letâ€™s write some helper functions
    to plot solutions efficiently.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬å¤„ç†çš„æ˜¯èŠ‚ç‚¹å’Œå¼§ï¼Œ**å¯è§†åŒ–è§£å†³æ–¹æ¡ˆçš„æœ€ç®€å•æ–¹æ³•æ˜¯å°†å…¶ç»˜åˆ¶æˆå›¾å½¢**ã€‚è¯·è®°ä½ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæ¦‚å¿µéªŒè¯ï¼Œå› æ­¤**å¿«é€Ÿã€æœ‰æ•ˆçš„åé¦ˆä¼˜äºç¾è§‚**ã€‚æ›´å…·æ´å¯ŸåŠ›çš„[å¯è§†åŒ–](/visualizing-routes-on-interactive-maps-with-python-part-1-44f8d25d0761)å¯ä»¥ç­‰åˆ°æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯è¡Œçš„MVPåå†åšã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç¼–å†™ä¸€äº›è¾…åŠ©å‡½æ•°ä»¥é«˜æ•ˆåœ°ç»˜åˆ¶è§£å†³æ–¹æ¡ˆã€‚
- en: The function `extract_solution_as_arcs` takes in a solved Pyomo model and extracts
    the "chosen arcs" from the solution. Next, the function `plot_arcs_as_graph` stores
    the list of active arcs in a Graph object for easier analysis and plots that graph
    so that the hotel is the only red node, for reference. Lastly, the function `plot_solution_as_graph`
    calls the above two functions to display the solution of the given model as a
    graph.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°`extract_solution_as_arcs`æ¥æ”¶ä¸€ä¸ªå·²è§£å†³çš„Pyomoæ¨¡å‹ï¼Œå¹¶ä»è§£å†³æ–¹æ¡ˆä¸­æå–â€œé€‰å®šçš„å¼§â€ã€‚æ¥ä¸‹æ¥ï¼Œå‡½æ•°`plot_arcs_as_graph`å°†æ´»è·ƒå¼§çš„åˆ—è¡¨å­˜å‚¨åœ¨Graphå¯¹è±¡ä¸­ä»¥ä¾¿äºåˆ†æï¼Œå¹¶ç»˜åˆ¶è¯¥å›¾ï¼Œä½¿å¾—é…’åº—æ˜¯å”¯ä¸€çš„çº¢è‰²èŠ‚ç‚¹ï¼Œä½œä¸ºå‚è€ƒã€‚æœ€åï¼Œå‡½æ•°`plot_solution_as_graph`è°ƒç”¨ä¸Šè¿°ä¸¤ä¸ªå‡½æ•°ï¼Œä»¥å›¾å½¢çš„å½¢å¼å±•ç¤ºç»™å®šæ¨¡å‹çš„è§£å†³æ–¹æ¡ˆã€‚
- en: '[PRE16]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Now we can see what the solution really looks like:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è§£å†³æ–¹æ¡ˆçš„çœŸå®æƒ…å†µï¼š
- en: '[PRE17]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '![](../Images/452bd38032fcfd45ffa9c45cb2f71896.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/452bd38032fcfd45ffa9c45cb2f71896.png)'
- en: '**Figure 3.2.** The solution of the first formulation, showing undesired subtours
    instead of a single tour. (Image by author)'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾3.2.** ç¬¬ä¸€ä¸ªæ¨¡å‹çš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¾ç¤ºäº†ä¸å¸Œæœ›å‡ºç°çš„å­æ—…è¡Œï¼Œè€Œä¸æ˜¯å•ä¸€æ—…è¡Œè·¯çº¿ã€‚ï¼ˆå›¾åƒç”±ä½œè€…æä¾›ï¼‰'
- en: 'Well, this is obviously **not what we expected!** There is no **single tour**
    traversing all sites and coming back to the hotel. Itâ€™s true that all sites are
    visited, but only as part of small disconnected clusters of sites. Technically,
    yes, the constraints we specified are carefully obeyed: each site is entered just
    once and exited just once, but **the overall result is not one single tour, as
    we intended, but a group of subtours**. This means that [the assumption we did
    in the previous article](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07#:~:text=Let%E2%80%99s%20take%20an,all%20the%20time).)
    is wrong, so something else is missing in the model that will encode the requirement
    that â€œsubtours are not permitted in the solutionâ€.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: å—¯ï¼Œè¿™æ˜¾ç„¶æ˜¯**ä¸ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„ï¼** æ²¡æœ‰**å•ä¸€çš„æ—…è¡Œè·¯çº¿**éå†æ‰€æœ‰ç«™ç‚¹å¹¶è¿”å›é…’åº—ã€‚ç¡®å®ï¼Œæ‰€æœ‰ç«™ç‚¹éƒ½è¢«è®¿é—®äº†ï¼Œä½†åªæ˜¯ä½œä¸ºå°çš„ã€ä¸è¿é€šçš„ç«™ç‚¹ç°‡çš„ä¸€éƒ¨åˆ†ã€‚æŠ€æœ¯ä¸Šè®²ï¼Œæˆ‘ä»¬æŒ‡å®šçš„çº¦æŸæ¡ä»¶ç¡®å®è¢«ä¸¥æ ¼éµå®ˆï¼šæ¯ä¸ªç«™ç‚¹åªè¿›å…¥ä¸€æ¬¡ï¼Œç¦»å¼€ä¸€æ¬¡ï¼Œä½†**æ€»ä½“ç»“æœä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„å•ä¸€æ—…è¡Œè·¯çº¿ï¼Œè€Œæ˜¯ä¸€ç»„å­æ—…è¡Œ**ã€‚è¿™æ„å‘³ç€[æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„å‡è®¾](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07#:~:text=Let%E2%80%99s%20take%20an,all%20the%20time).)
    æ˜¯é”™è¯¯çš„ï¼Œå› æ­¤æ¨¡å‹ä¸­ç¼ºå°‘äº†æŸäº›ä¸œè¥¿ï¼Œä»¥ç¼–ç â€œè§£å†³æ–¹æ¡ˆä¸­ä¸å…è®¸å­æ—…è¡Œâ€çš„è¦æ±‚ã€‚
- en: 2.3\. Analyzing the results
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.3\. åˆ†æç»“æœ
- en: What has gone wrong?
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ
- en: '*When the solution of a model does not make sense, thereâ€™s only one possible
    explanation: the* ***model is wrong***[***Â¹***](#02f5)*.*'
  id: totrans-131
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*å½“ä¸€ä¸ªæ¨¡å‹çš„è§£å†³æ–¹æ¡ˆä¸åˆé€»è¾‘æ—¶ï¼Œå”¯ä¸€çš„å¯èƒ½è§£é‡Šæ˜¯ï¼š* ***æ¨¡å‹æ˜¯é”™è¯¯çš„***[***Â¹***](#02f5)*ã€‚*'
- en: The solver gave us what *truly* is the optimal solution to the model, **but
    we gave it a model that does not map to the problem we want to solve**. The task
    is now to find out why, and where we made a mistake. On reflection, the obvious
    candidate is the *dubious assumption* we made in the last two paragraphs of section
    â€œ4.4\. Creating the constraintsâ€ in [the predecessor article](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07),
    where we designed the mathematical model. **We** (wrongly, as we now know) **assumed
    that the formation of a *single tour* would follow naturally from the two constraints
    that ensure each site is visited just once**. But as we just visualized, it doesnâ€™t.
    Why?
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: æ±‚è§£å™¨ç»™å‡ºäº†æ¨¡å‹çš„*çœŸå®*æœ€ä¼˜è§£ï¼Œä½†**æˆ‘ä»¬ç»™å‡ºçš„æ¨¡å‹å¹¶ä¸ç¬¦åˆæˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜**ã€‚ç°åœ¨çš„ä»»åŠ¡æ˜¯æ‰¾å‡ºåŸå› ï¼Œä»¥åŠæˆ‘ä»¬å“ªé‡ŒçŠ¯äº†é”™è¯¯ã€‚å›é¡¾èµ·æ¥ï¼Œæ˜¾è€Œæ˜“è§çš„å€™é€‰å› ç´ æ˜¯æˆ‘ä»¬åœ¨[å‰ä¸€ç¯‡æ–‡ç« ](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07)â€œ4.4\.
    åˆ›å»ºçº¦æŸâ€éƒ¨åˆ†æœ€åä¸¤æ®µä¸­åšå‡ºçš„*å¯ç–‘å‡è®¾*ï¼Œå³æˆ‘ä»¬è®¾è®¡æ•°å­¦æ¨¡å‹æ—¶çš„å‡è®¾ã€‚**æˆ‘ä»¬**ï¼ˆç°åœ¨çŸ¥é“æ˜¯é”™è¯¯çš„ï¼‰**å‡è®¾ä»ä¸¤ä¸ªçº¦æŸæ¡ä»¶è‡ªç„¶ä¼šå½¢æˆä¸€ä¸ª*å•ä¸€çš„æ—…è¡Œè·¯çº¿***ã€‚ä½†æ­£å¦‚æˆ‘ä»¬åˆšåˆšå¯è§†åŒ–çš„é‚£æ ·ï¼Œå¹¶éå¦‚æ­¤ã€‚ä¸ºä»€ä¹ˆï¼Ÿ
- en: 'The root cause of the error lies in what I call â€œ**unspoken common-sense**â€:
    knowledge we have about the world that is so obvious that we forget to specify
    it in the model'
  id: totrans-133
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: é”™è¯¯çš„æ ¹æºåœ¨äºæˆ‘æ‰€ç§°çš„â€œ**æœªè¨€æ˜çš„å¸¸è¯†**â€ï¼šæˆ‘ä»¬å¯¹ä¸–ç•Œçš„çŸ¥è¯†å¦‚æ­¤æ˜æ˜¾ï¼Œä»¥è‡³äºæˆ‘ä»¬å¿˜è®°åœ¨æ¨¡å‹ä¸­æŒ‡å®šå®ƒã€‚
- en: We knew, **implicitly**, that teleportation is not possible when visiting sites,
    **but we didnâ€™t explicitly tell the model**. Thatâ€™s why we observe those little
    subtours, connecting some of the sites, but not all. The model â€œthinksâ€ itâ€™s okay
    to teleport from one site to another, as long as, once itâ€™s on a site, it is *exited*
    once and *entered* once (see Figure 3.2 again). If we see subtours is only because
    we told the model to minimize the tourâ€™s distance, and just so happens that teleportation
    is helpful at saving distance.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬**éšå«åœ°**çŸ¥é“åœ¨è®¿é—®ç«™ç‚¹æ—¶ä¼ é€æ˜¯ä¸å¯èƒ½çš„ï¼Œ**ä½†æˆ‘ä»¬æ²¡æœ‰æ˜ç¡®å‘ŠçŸ¥æ¨¡å‹**ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è§‚å¯Ÿåˆ°é‚£äº›å°çš„å­æ—…è¡Œï¼Œè¿æ¥äº†ä¸€äº›ç«™ç‚¹ï¼Œä½†ä¸æ˜¯å…¨éƒ¨ã€‚æ¨¡å‹â€œè®¤ä¸ºâ€ä»ä¸€ä¸ªç«™ç‚¹ä¼ é€åˆ°å¦ä¸€ä¸ªç«™ç‚¹æ˜¯å¯ä»¥çš„ï¼Œåªè¦ä¸€æ—¦åˆ°è¾¾æŸä¸ªç«™ç‚¹ï¼Œå°±ä¼š*é€€å‡º*ä¸€æ¬¡å¹¶*è¿›å…¥*ä¸€æ¬¡ï¼ˆè¯·å†æ¬¡æŸ¥çœ‹å›¾3.2ï¼‰ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥çœ‹åˆ°å­æ—…è¡Œï¼Œä»…ä»…æ˜¯å› ä¸ºæˆ‘ä»¬å‘Šè¯‰æ¨¡å‹æœ€å°åŒ–æ—…è¡Œçš„è·ç¦»ï¼Œè€Œæ­£å¥½ä¼ é€æœ‰åŠ©äºèŠ‚çœè·ç¦»ã€‚
- en: Thus, **we need to prevent the formation of these subtours** to obtain a realistic
    solution. **We need to design some new constraints** that â€œtell the modelâ€ that
    subtours are forbidden, or, equivalently, that **the solution must be a single
    tour**. Letâ€™s go with the latter, and **deduce, from first principles**, one set
    of constraints that is intuitive and does the job fine.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œ**æˆ‘ä»¬éœ€è¦é˜²æ­¢è¿™äº›å­æ—…è¡Œçš„å½¢æˆ**ä»¥è·å¾—ä¸€ä¸ªç°å®çš„è§£ã€‚**æˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€äº›æ–°çš„çº¦æŸæ¡ä»¶**ï¼Œä»¥â€œå‘ŠçŸ¥æ¨¡å‹â€å­æ—…è¡Œæ˜¯è¢«ç¦æ­¢çš„ï¼Œæˆ–è€…è¯´ï¼Œ**è§£å¿…é¡»æ˜¯ä¸€ä¸ªå•ä¸€çš„æ—…è¡Œ**ã€‚æˆ‘ä»¬é€‰æ‹©åè€…ï¼Œå¹¶**ä»ç¬¬ä¸€åŸåˆ™å‡ºå‘**ï¼Œæ¨å¯¼å‡ºä¸€ç»„ç›´è§‚çš„çº¦æŸæ¡ä»¶ï¼Œå¹¶èƒ½å¾ˆå¥½åœ°å®Œæˆä»»åŠ¡ã€‚
- en: 3\. Fixing the formulation
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3\. ä¿®æ­£æ¨¡å‹
- en: Referring to the [Agile Operations Research workflow], we are now in the **model
    reformulation phase**. A reformulation of a model could be about improving it
    or fixing it. Ours will be about fixing it.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: å‚è€ƒ[æ•æ·è¿ç­¹ç ”ç©¶å·¥ä½œæµç¨‹]ï¼Œæˆ‘ä»¬ç°åœ¨å¤„äº**æ¨¡å‹é‡æ–°åˆ¶å®šé˜¶æ®µ**ã€‚æ¨¡å‹çš„é‡æ–°åˆ¶å®šå¯èƒ½æ¶‰åŠæ”¹è¿›æˆ–ä¿®å¤ã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯ä¿®å¤å®ƒã€‚
- en: 'We know what we want: to force the solution to be a single tour, starting and
    ending at our initial site, the hotel. **The challenge is how to encode that requirement
    into a set of linear constraints**. Below is one idea, stemming from the properties
    of a tour.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆï¼šå¼ºåˆ¶è§£ä¸ºä¸€ä¸ªå•ä¸€çš„æ—…è¡Œï¼Œä»æˆ‘ä»¬çš„åˆå§‹ç«™ç‚¹ï¼Œå³é…’åº—ï¼Œå¼€å§‹å’Œç»“æŸã€‚**æŒ‘æˆ˜åœ¨äºå¦‚ä½•å°†è¿™ä¸€è¦æ±‚ç¼–ç ä¸ºä¸€ç»„çº¿æ€§çº¦æŸ**ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæƒ³æ³•ï¼Œæºäºæ—…è¡Œçš„æ€§è´¨ã€‚
- en: 3.1\. The motivating idea
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.1\. æ¿€åŠ±æ€æƒ³
- en: We have ğ‘ sites to â€œtraverseâ€, including the hotel. Since we start at the hotel,
    that means ğ‘ âˆ’ 1 sites left to visit. **If we keep track of the â€œchronological
    orderâ€ in which we visit those sites**, such that the first destination (after
    the hotel) is given the number 1, the second destination is given the number 2,
    and so on, then the last destination before returning to the hotel will be given
    the number ğ‘ âˆ’ 1\. If we call these numbers used to track the order of visits
    â€œ*ranks*â€, then **the pattern that occurs in the tour** is that *the rank of any
    site (****other than the hotel****) is always 1 unit higher than the rank of the
    site that preceded it in the tour*. If we could **formulate a set of constraints
    that impose such a pattern on any feasible solution**, we would be, loosely speaking,
    introducing a â€œchronological orderâ€ requirement in the model. And it turns out
    we can indeed.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æœ‰ğ‘ä¸ªç«™ç‚¹éœ€è¦â€œéå†â€ï¼ŒåŒ…æ‹¬é…’åº—ã€‚ç”±äºæˆ‘ä»¬ä»é…’åº—å¼€å§‹ï¼Œè¿™æ„å‘³ç€è¿˜æœ‰ ğ‘ âˆ’ 1 ä¸ªç«™ç‚¹éœ€è¦è®¿é—®ã€‚**å¦‚æœæˆ‘ä»¬è·Ÿè¸ªè®¿é—®è¿™äº›ç«™ç‚¹çš„â€œæ—¶é—´é¡ºåºâ€**ï¼Œä½¿å¾—ç¬¬ä¸€ä¸ªç›®çš„åœ°ï¼ˆé…’åº—ä¹‹åï¼‰æ ‡è®°ä¸º1ï¼Œç¬¬äºŒä¸ªç›®çš„åœ°æ ‡è®°ä¸º2ï¼Œä»¥æ­¤ç±»æ¨ï¼Œé‚£ä¹ˆåœ¨è¿”å›é…’åº—ä¹‹å‰çš„æœ€åä¸€ä¸ªç›®çš„åœ°å°†è¢«æ ‡è®°ä¸º
    ğ‘ âˆ’ 1ã€‚å¦‚æœæˆ‘ä»¬å°†è¿™äº›ç”¨äºè·Ÿè¸ªè®¿é—®é¡ºåºçš„æ•°å­—ç§°ä¸ºâ€œ*ç­‰çº§*â€ï¼Œé‚£ä¹ˆ**åœ¨æ—…è¡Œä¸­å‡ºç°çš„æ¨¡å¼**æ˜¯*ä»»ä½•ç«™ç‚¹ï¼ˆ**é™¤äº†é…’åº—**ï¼‰çš„ç­‰çº§æ€»æ˜¯æ¯”å‰ä¸€ä¸ªç«™ç‚¹çš„ç­‰çº§é«˜1ä¸ªå•ä½*ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿ**åˆ¶å®šä¸€ç»„çº¦æŸæ¡ä»¶ï¼Œä½¿å¾—ä»»ä½•å¯è¡Œè§£éƒ½ç¬¦åˆè¿™ç§æ¨¡å¼**ï¼Œé‚£ä¹ˆå¯ä»¥è¯´ï¼Œæˆ‘ä»¬åœ¨æ¨¡å‹ä¸­å¼•å…¥äº†ä¸€ä¸ªâ€œæ—¶é—´é¡ºåºâ€çš„è¦æ±‚ã€‚äº‹å®è¯æ˜æˆ‘ä»¬ç¡®å®å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚
- en: 3.2\. Expressing the motivating idea as logical implications
  id: totrans-141
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.2\. å°†æ¿€åŠ±æ€æƒ³è¡¨è¾¾ä¸ºé€»è¾‘è•´æ¶µ
- en: '*ğŸ’¡* *This is the â€œpatternâ€ that we want any feasible solution to satisfy:*'
  id: totrans-142
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ’¡* *è¿™æ˜¯æˆ‘ä»¬å¸Œæœ›ä»»ä½•å¯è¡Œè§£éƒ½æ»¡è¶³çš„â€œæ¨¡å¼â€ï¼š*'
- en: ''
  id: totrans-143
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The rank of any site (other than the hotel) must always be 1 unit higher than
    the rank of the site that preceded it in the tour
  id: totrans-144
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä»»ä½•ç«™ç‚¹ï¼ˆé™¤äº†é…’åº—ï¼‰çš„ç­‰çº§å¿…é¡»æ€»æ˜¯æ¯”å…¶åœ¨æ—…è¡Œä¸­å‰é¢çš„ç«™ç‚¹çš„ç­‰çº§é«˜1ä¸ªå•ä½
- en: 'We can re-express this pattern as a **logical implication**, like this: â€œthe
    rank of site ğ‘— must be 1 unit higher than the rank of site ğ‘– *if and only if*
    ğ‘— is visited right after ğ‘–, for all arcs (ğ‘–, ğ‘—) that do not include the hotel
    ğ»â€. This wording is expressed mathematically as:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ¨¡å¼é‡æ–°è¡¨è¾¾ä¸ºä¸€ä¸ª**é€»è¾‘è•´æ¶µ**ï¼Œå¦‚ä¸‹ï¼šâ€œç«™ç‚¹ğ‘—çš„ç­‰çº§å¿…é¡»æ¯”ç«™ç‚¹ğ‘–çš„ç­‰çº§é«˜1ä¸ªå•ä½*å½“ä¸”ä»…å½“* ğ‘— ç´§æ¥ç€ ğ‘– è¢«è®¿é—®ï¼Œå¯¹äºæ‰€æœ‰ä¸åŒ…æ‹¬é…’åº—ğ»çš„å¼§
    (ğ‘–, ğ‘—)â€ã€‚è¿™ä¸ªæªè¾åœ¨æ•°å­¦ä¸Šè¡¨ç¤ºä¸ºï¼š
- en: '![](../Images/76ce023b64fdfb59d61f06838d7b8f0b.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/76ce023b64fdfb59d61f06838d7b8f0b.png)'
- en: '**Expression 3.6\.** Logical implication for rank variables: they increase
    by 1 with each new site visited.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.6\.** æ’åå˜é‡çš„é€»è¾‘å«ä¹‰ï¼šæ¯è®¿é—®ä¸€ä¸ªæ–°åœ°ç‚¹ï¼Œæ’åå¢åŠ  1ã€‚'
- en: 'where ğ‘Ÿáµ¢ are the **new variables we need to keep track of the (yet unknown)
    order of visits**. To distinguish them from the decision variables, letâ€™s call
    them â€œ**rank** variablesâ€. The right side is read as â€œfor all ğ‘– and ğ‘— belonging
    to the set of all sites excluding the hotelâ€. For *notational convenience*, we
    define the new set ğ•Š* to store all the sites except the hotel (denoted by ğ»):'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ ğ‘Ÿáµ¢ æ˜¯**æˆ‘ä»¬éœ€è¦è·Ÿè¸ªï¼ˆå°šæœªç¡®å®šçš„ï¼‰è®¿é—®é¡ºåºçš„æ–°å˜é‡**ã€‚ä¸ºäº†å°†å®ƒä»¬ä¸å†³ç­–å˜é‡åŒºåˆ†å¼€æ¥ï¼Œæˆ‘ä»¬ç§°å®ƒä»¬ä¸ºâ€œ**æ’å**å˜é‡â€ã€‚å³ä¾§çš„æ„æ€æ˜¯â€œå¯¹äºæ‰€æœ‰å±äºæ‰€æœ‰åœ°ç‚¹é›†åˆï¼ˆä¸åŒ…æ‹¬é…’åº—ï¼‰çš„
    ğ‘– å’Œ ğ‘—â€ã€‚ä¸ºäº†*ç¬¦å·æ–¹ä¾¿*ï¼Œæˆ‘ä»¬å®šä¹‰æ–°çš„é›†åˆ ğ•Š* æ¥å­˜å‚¨é™¤é…’åº—ä¹‹å¤–çš„æ‰€æœ‰åœ°ç‚¹ï¼ˆç”¨ ğ» è¡¨ç¤ºï¼‰ï¼š
- en: '![](../Images/b45b2753cce9e55709c1509d1efc521e.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b45b2753cce9e55709c1509d1efc521e.png)'
- en: '**Expression 3.7\.** The set of all sites of interest: all sites except the
    hotel.'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.7\.** æ‰€æœ‰æ„Ÿå…´è¶£åœ°ç‚¹çš„é›†åˆï¼šæ‰€æœ‰åœ°ç‚¹ï¼Œé™¤é…’åº—å¤–ã€‚'
- en: 'which allows us to define the rank variables concisely as:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å…è®¸æˆ‘ä»¬ç®€æ´åœ°å®šä¹‰æ’åå˜é‡ä¸ºï¼š
- en: '![](../Images/efecbbacc7c452405d7d615d61c2d04f.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/efecbbacc7c452405d7d615d61c2d04f.png)'
- en: '**Expression 3.8.** Definition of the rank variables, defined only for the
    sites of interest.'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.8.** æ’åå˜é‡çš„å®šä¹‰ï¼Œä»…å®šä¹‰åœ¨æ„Ÿå…´è¶£çš„åœ°ç‚¹ã€‚'
- en: '*ğŸ‘ï¸* *Itâ€™s crucial that the hotel* ***does not have an associated rank variable***
    *because* it will be simultaneously the origin and final destination of any tour*,
    a condition that* ***would violate the pattern*** *of â€œever increasing rank variables
    in the tourâ€. This way, the rank of each site is always forced to increase with
    any new arc taken, which ensures that* ***closed loops are prohibited unless the
    loops close at the only site that doesnâ€™t have a rank variable: the hotel***'
  id: totrans-154
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ‘ï¸* *é…’åº—* ***ä¸èƒ½æœ‰ç›¸å…³çš„æ’åå˜é‡*** *å› ä¸º* é…’åº—å°†åŒæ—¶æ˜¯ä»»ä½•æ—…è¡Œçš„èµ·ç‚¹å’Œç»ˆç‚¹*ï¼Œè¿™ä¸€æ¡ä»¶* ***ä¼šè¿åæ¨¡å¼*** *â€œæ—…è¡Œä¸­æ’åå˜é‡ä¸æ–­å¢åŠ â€*ã€‚è¿™æ ·ï¼Œæ¯ä¸ªåœ°ç‚¹çš„æ’åæ€»æ˜¯éšç€æ¯ä¸ªæ–°å¼§çš„æ·»åŠ è€Œå¢åŠ ï¼Œä»è€Œç¡®ä¿*
    ***ç¦æ­¢å°é—­ç¯è·¯ï¼Œé™¤éç¯è·¯é—­åˆåœ¨å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰æ’åå˜é‡çš„åœ°ç‚¹ï¼šé…’åº—***ã€‚'
- en: 'The bounds of ğ‘Ÿáµ¢ are derived from its description: the rank starts at 1 and
    monotonically increases until all sites in ğ•Š* are visited, thus ending at | ğ•Š*
    | (the size of the set of non-hotel sites). Besides, we allow them to take any
    positive real value:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: ğ‘Ÿáµ¢ çš„ç•Œé™æºè‡ªå…¶æè¿°ï¼šæ’åä» 1 å¼€å§‹ï¼Œå¹¶å•è°ƒå¢åŠ ï¼Œç›´åˆ°æ‰€æœ‰ ğ•Š* ä¸­çš„åœ°ç‚¹éƒ½è¢«è®¿é—®ï¼Œæœ€ç»ˆä¸º | ğ•Š* |ï¼ˆéé…’åº—åœ°ç‚¹é›†åˆçš„å¤§å°ï¼‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å…è®¸å®ƒä»¬å–ä»»ä½•æ­£å®æ•°å€¼ï¼š
- en: '![](../Images/9044818c9b95300536e6d8e8807a49d9.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9044818c9b95300536e6d8e8807a49d9.png)'
- en: '**Expression 3.9.** Bounds and range of the rank variables'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.9.** æ’åå˜é‡çš„èŒƒå›´å’Œç•Œé™'
- en: 3.3\. Formulating the logical implications as linear constraints
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3.3\. å°†é€»è¾‘å«ä¹‰è¡¨è¿°ä¸ºçº¿æ€§çº¦æŸ
- en: The challenge now is to translate this logical implication to a set of linear
    constraints. Thankfully, **linear inequalities serve also the purpose of enforcing
    logical implications**, not just finite resource limitations.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨çš„æŒ‘æˆ˜æ˜¯å°†è¿™ç§é€»è¾‘å«ä¹‰è½¬åŒ–ä¸ºä¸€ç»„çº¿æ€§çº¦æŸã€‚å¹¸è¿çš„æ˜¯ï¼Œ**çº¿æ€§ä¸ç­‰å¼ä¹Ÿå¯ä»¥ç”¨æ¥å¼ºåˆ¶é€»è¾‘å«ä¹‰**ï¼Œä¸ä»…ä»…æ˜¯æœ‰é™èµ„æºé™åˆ¶ã€‚
- en: One way to do that is through the so-called **Big-M method**, which consists
    of declaring a constraint in such a way that, **when the condition you care about
    is met, the constraint applies (becomes active), and when the condition you care
    about is not met, the constraint becomes redundant (becomes inactive)**. The technique
    is called â€œbig-Mâ€ because it makes use of a constant value ğ‘€ that **is sufficiently
    large so as to, when appearing in the constraint, render it redundant for every
    case**. When ğ‘€ does not appear in the constraint, the constraint is â€œactiveâ€ in
    the sense that it is enforcing the *desired implication*.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡æ‰€è°“çš„**Big-M æ–¹æ³•**ï¼Œå…¶åŒ…æ‹¬å£°æ˜ä¸€ä¸ªçº¦æŸï¼Œä½¿å¾—**å½“æ‚¨å…³å¿ƒçš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œçº¦æŸæœ‰æ•ˆï¼ˆæ¿€æ´»ï¼‰ï¼Œå½“æ‚¨å…³å¿ƒçš„æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œçº¦æŸå˜å¾—å†—ä½™ï¼ˆå¤±æ•ˆï¼‰**ã€‚è¯¥æŠ€æœ¯ç§°ä¸ºâ€œå¤§
    Mâ€æ˜¯å› ä¸ºå®ƒä½¿ç”¨ä¸€ä¸ªå¸¸æ•°å€¼ ğ‘€ï¼Œ**è¯¥å€¼è¶³å¤Ÿå¤§ï¼Œä»¥è‡³äºå½“å‡ºç°åœ¨çº¦æŸä¸­æ—¶ï¼Œä½¿çº¦æŸåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½å˜å¾—å†—ä½™**ã€‚å½“ ğ‘€ ä¸å‡ºç°åœ¨çº¦æŸä¸­æ—¶ï¼Œçº¦æŸåœ¨*æœŸæœ›çš„å«ä¹‰*ä¸Šæ˜¯â€œæœ‰æ•ˆçš„â€ã€‚
- en: '**But what determines whether a constraint is â€œactiveâ€ or not?** The short
    answer is the **values of the decision variables themselves** that the constraint
    applies to. Letâ€™s see how it works.'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '**ä½†æ˜¯ä»€ä¹ˆå†³å®šäº†çº¦æŸæ˜¯å¦â€œæœ‰æ•ˆâ€ï¼Ÿ** ç®€çŸ­çš„å›ç­”æ˜¯çº¦æŸæ‰€åº”ç”¨çš„**å†³ç­–å˜é‡çš„å€¼**ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚'
- en: The desired implication is to have ğ‘Ÿâ±¼ = ğ‘Ÿáµ¢ + 1 only when ğ›¿áµ¢â±¼ = 1\. We can replace
    the 1 in the expression with ğ›¿áµ¢â±¼, which yields
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: å¸Œæœ›çš„å«ä¹‰æ˜¯ä»…å½“ ğ›¿áµ¢â±¼ = 1 æ—¶ ğ‘Ÿâ±¼ = ğ‘Ÿáµ¢ + 1ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ ğ›¿áµ¢â±¼ æ›¿ä»£è¡¨è¾¾å¼ä¸­çš„ 1ï¼Œå¾—åˆ°
- en: '![](../Images/ce44a6deb3909982fc5f7195c0b9ab90.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ce44a6deb3909982fc5f7195c0b9ab90.png)'
- en: This is the relation we want to hold when ğ›¿áµ¢â±¼ = 1, but not when ğ›¿áµ¢â±¼ = 0\. To
    â€œcorrectâ€ for the case when ğ›¿áµ¢â±¼ = 0, **we add a redundancy term,** ğ‘…ğ‘‡**, whose
    function is to â€œdeactivate the constraintâ€ only when** ğ›¿áµ¢â±¼ = 0\. Therefore, this
    redundancy term must include the variable ğ›¿áµ¢â±¼, as it depends on it.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ğ›¿áµ¢â±¼ = 1æ—¶ï¼Œè¿™æ˜¯æˆ‘ä»¬å¸Œæœ›ä¿æŒçš„å…³ç³»ï¼Œä½†å½“ğ›¿áµ¢â±¼ = 0æ—¶åˆ™ä¸æ˜¯ã€‚ä¸ºäº†â€œçº æ­£â€ğ›¿áµ¢â±¼ = 0çš„æƒ…å†µï¼Œ**æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå†—ä½™é¡¹** ğ‘…ğ‘‡ **ï¼Œå…¶åŠŸèƒ½æ˜¯ä»…åœ¨**
    ğ›¿áµ¢â±¼ = 0 **æ—¶â€œè§£é™¤çº¦æŸâ€ã€‚å› æ­¤ï¼Œè¿™ä¸ªå†—ä½™é¡¹å¿…é¡»åŒ…æ‹¬å˜é‡ğ›¿áµ¢â±¼ï¼Œå› ä¸ºå®ƒä¾èµ–äºå®ƒã€‚**
- en: '![](../Images/d1bc487b50553663942c9939915fdfdf.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d1bc487b50553663942c9939915fdfdf.png)'
- en: '*In this context, â€œdeactivating the constraintâ€ stands for â€œmaking it redundantâ€,
    since a redundant constraint has the same effect as a non-existing constraint
    in a model.*'
  id: totrans-166
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œâ€œè§£é™¤çº¦æŸâ€æ„å‘³ç€â€œä½¿å…¶å†—ä½™â€ï¼Œå› ä¸ºå†—ä½™çº¦æŸåœ¨æ¨¡å‹ä¸­ä¸ä¸å­˜åœ¨çš„çº¦æŸæ•ˆæœç›¸åŒã€‚*'
- en: 'Letâ€™s see how we can deduce the expression for *RT*. The expression for ğ‘…ğ‘‡(ğ›¿áµ¢â±¼)
    needs to satisfy these properties:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ¥æ·±å…¥æ¢è®¨å¦‚ä½•æ¨å¯¼*RT*çš„è¡¨è¾¾å¼ã€‚ğ‘…ğ‘‡(ğ›¿áµ¢â±¼)çš„è¡¨è¾¾å¼éœ€è¦æ»¡è¶³ä»¥ä¸‹è¿™äº›å±æ€§ï¼š
- en: '![](../Images/a80c248947cb3c1c1b6961574decc29f.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a80c248947cb3c1c1b6961574decc29f.png)'
- en: '**Expression 3.10.** Properties the redundancy term must satisfy to enforce
    valid redundancy.'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.10.** å†—ä½™é¡¹å¿…é¡»æ»¡è¶³çš„å±æ€§ä»¥ç¡®ä¿æœ‰æ•ˆçš„å†—ä½™ã€‚'
- en: To satisfy point (1) we need ğ‘…ğ‘‡(ğ›¿áµ¢â±¼ = 1) = 0, and thus the expression for ğ‘…ğ‘‡
    must contain the multiplier (1 âˆ’ ğ›¿áµ¢â±¼), as it becomes 0 when ğ›¿áµ¢â±¼ =1\. This form
    makes ğ‘…ğ‘‡ â€œvanishâ€ when ğ›¿áµ¢â±¼ = 1, or â€œbe reducedâ€ to a constant (letâ€™s call it *M*)
    when ğ›¿áµ¢â±¼ = 0\. Thus, a candidate for the redundancy term is
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ»¡è¶³ç‚¹ï¼ˆ1ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ğ‘…ğ‘‡(ğ›¿áµ¢â±¼ = 1) = 0ï¼Œå› æ­¤ğ‘…ğ‘‡çš„è¡¨è¾¾å¼å¿…é¡»åŒ…å«ä¹˜æ•°ï¼ˆ1 âˆ’ ğ›¿áµ¢â±¼ï¼‰ï¼Œå› ä¸ºå½“ğ›¿áµ¢â±¼ = 1æ—¶å®ƒå˜ä¸º0ã€‚è¿™ç§å½¢å¼ä½¿ğ‘…ğ‘‡åœ¨ğ›¿áµ¢â±¼
    = 1æ—¶â€œæ¶ˆå¤±â€ï¼Œæˆ–åœ¨ğ›¿áµ¢â±¼ = 0æ—¶â€œå‡å°‘â€ä¸ºä¸€ä¸ªå¸¸æ•°ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º*M*ï¼‰ã€‚å› æ­¤ï¼Œå†—ä½™é¡¹çš„ä¸€ä¸ªå€™é€‰é¡¹æ˜¯
- en: '![](../Images/67e2e24e2c25fe241ac7b1461d740a72.png)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/67e2e24e2c25fe241ac7b1461d740a72.png)'
- en: '**Expression 3.11.** Definition of the â€œredundancy termâ€ needed to selectively
    make some constraints redundant.'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.11.** å®šä¹‰ç”¨äºé€‰æ‹©æ€§ä½¿æŸäº›çº¦æŸå˜ä¸ºå†—ä½™çš„â€œå†—ä½™é¡¹â€ã€‚'
- en: where ğ‘€ should be determined from the problem data (more on that later).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ğ‘€åº”è¯¥ä»é—®é¢˜æ•°æ®ä¸­ç¡®å®šï¼ˆç¨åä¼šè¯¦ç»†è¯´æ˜ï¼‰ã€‚
- en: To satisfy point (2) for **all possible ğ‘–â€™s and ğ‘—â€™s**, we need to make the equality
    in expression (3.11) an inequality (= becomes â‰¥), and **find a constant** ğ‘€ **big
    enough (in absolute value) so that, no matter what values** ğ‘Ÿâ±¼ **and** ğ‘Ÿáµ¢ **take,
    the constraint is always satisfied**. This is where the â€œbigâ€ in â€œbig Mâ€ comes
    from.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ»¡è¶³**æ‰€æœ‰å¯èƒ½çš„ğ‘–å’Œğ‘—**çš„ç‚¹ï¼ˆ2ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦å°†è¡¨è¾¾å¼ï¼ˆ3.11ï¼‰ä¸­çš„ç­‰å¼å˜æˆä¸ç­‰å¼ï¼ˆ=å˜ä¸ºâ‰¥ï¼‰ï¼Œå¹¶**æ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å¸¸æ•°** ğ‘€ **ï¼ˆç»å¯¹å€¼ï¼‰ä»¥ç¡®ä¿æ— è®º**
    ğ‘Ÿâ±¼ **å’Œ** ğ‘Ÿáµ¢ **å–ä»€ä¹ˆå€¼ï¼Œçº¦æŸå§‹ç»ˆå¾—åˆ°æ»¡è¶³**ã€‚è¿™å°±æ˜¯â€œå¤§Mâ€ä¸­çš„â€œå¤§â€çš„æ¥æºã€‚
- en: Once we find such a **sufficiently large constant** ğ‘€, our â€œlogical implicationâ€
    constraint will take the form
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬æ‰¾åˆ°è¿™æ ·çš„**è¶³å¤Ÿå¤§çš„å¸¸æ•°** ğ‘€ï¼Œæˆ‘ä»¬çš„â€œé€»è¾‘æš—ç¤ºâ€çº¦æŸå°†é‡‡å–ä»¥ä¸‹å½¢å¼
- en: '![](../Images/ac57dd4e680caee411938e2ec4e60f96.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ac57dd4e680caee411938e2ec4e60f96.png)'
- en: '**Expression 3.12**. Constraints for the implication that â€œa siteâ€™s rank must
    be higher than its preceding siteâ€™sâ€.'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.12**. å¯¹äºâ€œä¸€ä¸ªç«™ç‚¹çš„ç­‰çº§å¿…é¡»é«˜äºå…¶å‰ä¸€ä¸ªç«™ç‚¹â€çš„æš—ç¤ºçš„çº¦æŸã€‚'
- en: Introducing these constraints into the model will, presumably, force the solution
    to be a single tour. But the constraints wonâ€™t have the desired effect unless
    we first specify a good value for *M.*
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™äº›çº¦æŸå¼•å…¥æ¨¡å‹ä¸­ï¼Œå°†ä¼šå¼ºåˆ¶è§£ä¸ºå•ä¸€å·¡å›ã€‚ä½†å¦‚æœæˆ‘ä»¬ä¸é¦–å…ˆæŒ‡å®šä¸€ä¸ªå¥½çš„*M*å€¼ï¼Œçº¦æŸå°†ä¸ä¼šäº§ç”ŸæœŸæœ›çš„æ•ˆæœã€‚
- en: 3.4\. Deducing a proper value for the â€œbig Mâ€
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3.4. æ¨å¯¼å‡ºâ€œå·¨å¤§Mâ€çš„é€‚å½“å€¼
- en: 'Since the goal is to have ğ‘…ğ‘‡(ğ›¿áµ¢â±¼ = 0) = ğ‘€, we can **deduce a proper value for**
    ğ‘€ by setting ğ›¿áµ¢â±¼ = 0 in the general constraint stated in Expression (3.12):'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºç›®æ ‡æ˜¯ä½¿ğ‘…ğ‘‡(ğ›¿áµ¢â±¼ = 0) = ğ‘€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¡¨è¾¾å¼ï¼ˆ3.12ï¼‰ä¸­è®¾ç½®ğ›¿áµ¢â±¼ = 0æ¥**æ¨å¯¼å‡ºé€‚å½“çš„** ğ‘€ **å€¼ï¼š**
- en: '![](../Images/b33d3bcb04f30c303366638dcd576754.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b33d3bcb04f30c303366638dcd576754.png)'
- en: '**Expression 3.13.** Deduction of minimum value for M.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.13.** ğ‘€çš„æœ€å°å€¼çš„æ¨å¯¼ã€‚'
- en: For ğ‘Ÿâ±¼ âˆ’ ğ‘Ÿáµ¢ â‰¥ ğ‘€ to be **satisfied for all non-hotel sites** ğ‘–, ğ‘—, we need the
    **lower bound** **of ğ‘Ÿâ±¼ âˆ’ ğ‘Ÿáµ¢ to be also greater than ğ‘€.** The lower bound (LB)
    of ğ‘Ÿâ±¼ âˆ’ ğ‘Ÿáµ¢ is the minimum value that ğ‘Ÿâ±¼ âˆ’ ğ‘Ÿáµ¢ can take, and can be obtained by
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿ğ‘Ÿâ±¼ âˆ’ ğ‘Ÿáµ¢ â‰¥ ğ‘€å¯¹**æ‰€æœ‰éé…’åº—ç«™ç‚¹** ğ‘–ï¼Œğ‘— **éƒ½æ»¡è¶³ï¼Œæˆ‘ä»¬éœ€è¦** ğ‘Ÿâ±¼ âˆ’ ğ‘Ÿáµ¢ **çš„ä¸‹ç•Œä¹Ÿå¤§äºğ‘€ã€‚** ğ‘Ÿâ±¼ âˆ’ ğ‘Ÿáµ¢çš„ä¸‹ç•Œï¼ˆLBï¼‰æ˜¯ğ‘Ÿâ±¼
    âˆ’ ğ‘Ÿáµ¢å¯ä»¥å–çš„æœ€å°å€¼ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å¾—
- en: '![](../Images/e052a9f7fb498681f45574c532e2f8c3.png)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e052a9f7fb498681f45574c532e2f8c3.png)'
- en: 'where ğ‘Ÿáµâ±â¿ is the minimum possible rank and ğ‘ŸáµáµƒË£ the maximum possible rank.
    Therefore, for inequality (1) in Expression (3.13) to be true for all ranks of
    all sites, the following inequality must hold too:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ğ‘Ÿáµâ±â¿æ˜¯å¯èƒ½çš„æœ€ä½ç­‰çº§ï¼Œğ‘ŸáµáµƒË£æ˜¯å¯èƒ½çš„æœ€é«˜ç­‰çº§ã€‚å› æ­¤ï¼Œä¸ºäº†ä½¿è¡¨è¾¾å¼ï¼ˆ3.13ï¼‰ä¸­çš„ä¸ç­‰å¼ï¼ˆ1ï¼‰å¯¹æ‰€æœ‰ç«™ç‚¹çš„æ‰€æœ‰ç­‰çº§éƒ½æˆç«‹ï¼Œä»¥ä¸‹ä¸ç­‰å¼ä¹Ÿå¿…é¡»æˆç«‹ï¼š
- en: '![](../Images/c35c59fb0307427a3ffa7b4f60712565.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c35c59fb0307427a3ffa7b4f60712565.png)'
- en: Thanks to this inequalitywe know **the minimum value that** ğ‘€ **must take in
    order for the big-M method to work**, which is
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: å¤šäºäº†è¿™ä¸ªä¸ç­‰å¼ï¼Œæˆ‘ä»¬çŸ¥é“**ä¸ºäº†ä½¿å¤§Mæ–¹æ³•æœ‰æ•ˆï¼Œğ‘€ å¿…é¡»å–çš„æœ€å°å€¼**æ˜¯
- en: '![](../Images/509528146ae2d5bdfdbaad62174cf8e1.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/509528146ae2d5bdfdbaad62174cf8e1.png)'
- en: '**Expression 3.14\.** Lower bound for the big-M.'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.14**. å¤§Mçš„ä¸‹ç•Œã€‚'
- en: 'And what are the values of ğ‘Ÿáµâ±â¿ and ğ‘ŸáµáµƒË£? In our convention, we gave the first
    visited site the rank 1, which is, of course, the *minimum rank* (*i.e.*, ğ‘Ÿáµâ±â¿
    = 1). Since the rank grows by 1 unit in each site visited, the last non-hotel
    site in the tour will have the *maximum rank*, equal to *the number of all non-hotel
    sites*. As the number of non-hotel sites can vary, we need a general expression.
    If you remember, we defined the set ğ•Š* to contain all non-hotel sites, so the
    number weâ€™re after is the *size* (*i.e.*, the number of elements) of the set ğ•Š*,
    which in math notation is expressed as | ğ•Š* |. Thus, we have deduced that ğ‘Ÿáµâ±â¿
    = 1 and ğ‘ŸáµáµƒË£ = | ğ•Š* |. Substituting in Expression (3.14), we finally arrive at
    a proper value for M:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆ ğ‘Ÿáµâ±â¿ å’Œ ğ‘ŸáµáµƒË£ çš„å€¼æ˜¯å¤šå°‘ï¼Ÿæ ¹æ®æˆ‘ä»¬çš„çº¦å®šï¼Œæˆ‘ä»¬ç»™ç¬¬ä¸€ä¸ªè®¿é—®çš„ç«™ç‚¹æ’äº†ç¬¬ 1 åï¼Œè¿™å½“ç„¶æ˜¯*æœ€å°æ’å*ï¼ˆ*å³*ï¼Œğ‘Ÿáµâ±â¿ = 1ï¼‰ã€‚ç”±äºæ’ååœ¨æ¯ä¸ªè®¿é—®çš„ç«™ç‚¹ä¸­å¢åŠ 
    1 å•ä½ï¼Œæ—…è¡Œä¸­çš„æœ€åä¸€ä¸ªéé…’åº—ç«™ç‚¹å°†å…·æœ‰*æœ€å¤§æ’å*ï¼Œç­‰äº*æ‰€æœ‰éé…’åº—ç«™ç‚¹çš„æ•°é‡*ã€‚ç”±äºéé…’åº—ç«™ç‚¹çš„æ•°é‡å¯èƒ½ä¼šå˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé€šç”¨è¡¨è¾¾å¼ã€‚å¦‚æœä½ è¿˜è®°å¾—ï¼Œæˆ‘ä»¬å®šä¹‰äº†é›†åˆ
    ğ•Š* åŒ…å«æ‰€æœ‰éé…’åº—ç«™ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬è¦æ‰¾çš„æ•°å­—æ˜¯é›†åˆ ğ•Š* çš„*å¤§å°*ï¼ˆ*å³*ï¼Œå…ƒç´ çš„æ•°é‡ï¼‰ï¼Œç”¨æ•°å­¦ç¬¦å·è¡¨ç¤ºä¸º | ğ•Š* |ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ¨å¯¼å‡º ğ‘Ÿáµâ±â¿ =
    1 å’Œ ğ‘ŸáµáµƒË£ = | ğ•Š* |ã€‚ä»£å…¥è¡¨è¾¾å¼ï¼ˆ3.14ï¼‰ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°äº†ä¸€ä¸ªé€‚å½“çš„ M å€¼ï¼š
- en: '![](../Images/ceb6c3b83c0912cf432ce8397d299483.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ceb6c3b83c0912cf432ce8397d299483.png)'
- en: '**Expression 3.15**. The value of the big-M, deduced from the problem data.'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.15**. ä»é—®é¢˜æ•°æ®ä¸­æ¨å¯¼å‡ºçš„â€œå¤§Mâ€å€¼ã€‚'
- en: Because ğ•Š* will always have more than 2 sites to be visited (*otherwise, there
    would be no* ***decision*** *problem at all in the first place*), the â€œbig Mâ€
    value, in this model, is always a **negative â€œbigâ€ valueâ€**.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº ğ•Š* æ€»æ˜¯ä¼šæœ‰è¶…è¿‡ 2 ä¸ªéœ€è¦è®¿é—®çš„ç«™ç‚¹ï¼ˆ*å¦åˆ™å°±æ²¡æœ‰* ***å†³ç­–*** *é—®é¢˜*ï¼‰ï¼Œåœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œâ€œå¤§Mâ€å€¼æ€»æ˜¯**è´Ÿçš„â€œå¤§â€å€¼**ã€‚
- en: '*ğŸ“* **Theoretical *values* versus computational *values***'
  id: totrans-194
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ“* **ç†è®º*å€¼*ä¸è®¡ç®—*å€¼***'
- en: ''
  id: totrans-195
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*Theoretically, we are allowed to choose arbitrarily â€œmore negativeâ€ values
    for ğ‘€ than the one deduced hereâ€”even make up* huge *numbers to be sure theyâ€™re
    big enough, to avoid this calculation â€” but* ***this is not good practice.***
    *If ğ‘€ gets too large (in absolute value), it can create* performance issues *in
    the solverâ€™s algorithms, or, in the worst case scenario, even make the solver*
    ***consider infeasible solutions as feasible****. Thatâ€™s why the recommended practice
    is to derive, from the problemâ€™s data, a* ***tight, but sufficiently large value***
    *for ğ‘€.*'
  id: totrans-196
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ç†è®ºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ¯”è¿™é‡Œæ¨å¯¼å‡ºçš„ ğ‘€ å€¼æ›´â€œè´Ÿâ€çš„å€¼â€”â€”ç”šè‡³å¯ä»¥ç¼–é€ * å·¨å¤§çš„ *æ•°å­—ä»¥ç¡®ä¿å®ƒä»¬è¶³å¤Ÿå¤§ï¼Œé¿å…è¿™ä¸ªè®¡ç®—â€”â€”ä½†* ***è¿™ä¸æ˜¯å¥½çš„å®è·µã€‚***
    *å¦‚æœ ğ‘€ å˜å¾—è¿‡å¤§ï¼ˆç»å¯¹å€¼ï¼‰ï¼Œå¯èƒ½ä¼šåœ¨æ±‚è§£å™¨çš„ç®—æ³•ä¸­äº§ç”Ÿ* æ€§èƒ½é—®é¢˜ *ï¼Œæˆ–è€…ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œç”šè‡³ä½¿æ±‚è§£å™¨*** å°†ä¸å¯è¡Œçš„è§£è§†ä¸ºå¯è¡Œè§£***ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¨èçš„åšæ³•æ˜¯ä»é—®é¢˜æ•°æ®ä¸­æ¨å¯¼å‡º*
    ***ç´§å‡‘ä½†è¶³å¤Ÿå¤§çš„å€¼*** *æ¥è¡¨ç¤º ğ‘€ã€‚*'
- en: Now that we have deduced a proper value for â€œbig Mâ€, we will store it in a new
    model parameter, for easier reuse. With this, **the subtour elimination constraint
    set is ready**, and its â€œfull formâ€ is
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¢ç„¶æˆ‘ä»¬å·²ç»æ¨å¯¼å‡ºé€‚å½“çš„â€œå¤§Mâ€å€¼ï¼Œæˆ‘ä»¬å°†æŠŠå®ƒå­˜å‚¨åœ¨æ–°çš„æ¨¡å‹å‚æ•°ä¸­ï¼Œä»¥ä¾¿äºé‡å¤ä½¿ç”¨ã€‚æœ‰äº†è¿™ä¸ªï¼Œ**å­æ—…è¡Œæ’é™¤çº¦æŸé›†å·²å‡†å¤‡å¥½**ï¼Œå…¶â€œå®Œæ•´å½¢å¼â€ä¸º
- en: '![](../Images/173a04975424ba275a920b98435085e5.png)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/173a04975424ba275a920b98435085e5.png)'
- en: '**Expression 3.16**. The subtour elimination constraints.'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.16**. å­æ—…è¡Œæ’é™¤çº¦æŸã€‚'
- en: 'To keep things in perspective, note that this is actually the â€œ**constraint
    equivalentâ€** of the original **logical implication** we formulated earlier in
    Expression (3.6):'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä¿æŒè§†è§’çš„å‡†ç¡®æ€§ï¼Œè¯·æ³¨æ„ï¼Œè¿™å®é™…ä¸Šæ˜¯**åŸå§‹** **é€»è¾‘è•´æ¶µ**åœ¨è¡¨è¾¾å¼ï¼ˆ3.6ï¼‰ä¸­çš„â€œ**çº¦æŸç­‰ä»·ç‰©**â€ï¼š
- en: '![](../Images/0f3a375a13ac3a1a07f78e43acb5a5d4.png)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0f3a375a13ac3a1a07f78e43acb5a5d4.png)'
- en: Congratulations! We finally have a set of constraints that can be added to our
    model. Coming up with them was the hard part. Now, letâ€™s verify that their addition
    to the model really results in the disappearance of subtours.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: æ­å–œï¼æˆ‘ä»¬ç»ˆäºæœ‰äº†ä¸€ç»„å¯ä»¥æ·»åŠ åˆ°æ¨¡å‹ä¸­çš„çº¦æŸã€‚æå‡ºè¿™äº›çº¦æŸæ˜¯å›°éš¾çš„éƒ¨åˆ†ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬éªŒè¯å°†å®ƒä»¬æ·»åŠ åˆ°æ¨¡å‹ä¸­æ˜¯å¦çœŸçš„èƒ½æ¶ˆé™¤å­æ—…è¡Œã€‚
- en: 4\. Implementing and verifying the new formulation
  id: totrans-203
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4\. å®ç°å’ŒéªŒè¯æ–°å…¬å¼
- en: 4.1\. Augmenting the Pyomo model with the new formulation
  id: totrans-204
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1\. ä½¿ç”¨æ–°å…¬å¼æ‰©å±• Pyomo æ¨¡å‹
- en: Revising and correcting the model has required the addition of a few more sets,
    parameters, variables, and constraints. Letâ€™s add these new **model components**
    to the Pyomo model, following the same order as in the initial formulation phase.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: ä¿®è®¢å’Œçº æ­£æ¨¡å‹éœ€è¦æ·»åŠ ä¸€äº›é¢å¤–çš„é›†åˆã€å‚æ•°ã€å˜é‡å’Œçº¦æŸã€‚è®©æˆ‘ä»¬å°†è¿™äº›æ–°çš„**æ¨¡å‹ç»„ä»¶**æŒ‰ç…§æœ€åˆåˆ¶å®šé˜¶æ®µçš„é¡ºåºæ·»åŠ åˆ° Pyomo æ¨¡å‹ä¸­ã€‚
- en: 4.1.1\. Sets and parameters
  id: totrans-206
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1.1\. é›†åˆå’Œå‚æ•°
- en: '**Sites of interest**, ğ•Š*: set of all sites **excluding the hotel:**'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ„Ÿå…´è¶£çš„ç«™ç‚¹**ï¼Œğ•Š*: æ‰€æœ‰ç«™ç‚¹çš„é›†åˆ **ä¸åŒ…æ‹¬é…’åº—ï¼š**'
- en: '![](../Images/a510017c12ff97cc877f6b116824557e.png)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a510017c12ff97cc877f6b116824557e.png)'
- en: '**Expression 3.17**. Definition of the set of sites of interest (a.k.a., non-hotel
    sites)'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¡¨è¾¾å¼ 3.17**ã€‚æ„Ÿå…´è¶£çš„ç«™ç‚¹é›†åˆçš„å®šä¹‰ï¼ˆå³ï¼Œéé…’åº—ç«™ç‚¹ï¼‰'
- en: '*Pyomo* `Set` objects have operations compatible with *Python* sets, so we
    can do the difference between a Pyomo set and a Python set directly:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '*Pyomo* `Set` å¯¹è±¡å…·æœ‰ä¸ *Python* é›†åˆå…¼å®¹çš„æ“ä½œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¡ç®— Pyomo é›†åˆä¸ Python é›†åˆä¹‹é—´çš„å·®å¼‚ï¼š'
- en: '[PRE18]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '**big M**, the new parameter for the subtour elimination constraint:'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**å¤§ M**ï¼Œå­å›è·¯æ¶ˆé™¤çº¦æŸçš„æ–°å‚æ•°ï¼š'
- en: '![](../Images/ceb6c3b83c0912cf432ce8397d299483.png)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ceb6c3b83c0912cf432ce8397d299483.png)'
- en: '[PRE19]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 4.1.2\. Auxiliary variables
  id: totrans-215
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1.2\. è¾…åŠ©å˜é‡
- en: '**rank variables, r**áµ¢: to keep track of the order in which sites are visited:'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ’åºå˜é‡ï¼Œr**áµ¢: ç”¨äºè·Ÿè¸ªç«™ç‚¹è®¿é—®é¡ºåºï¼š'
- en: '![](../Images/f6be26d9f90a5b0a066539c01ff727f8.png)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f6be26d9f90a5b0a066539c01ff727f8.png)'
- en: '[PRE20]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: In the comments, you can see how nicely the elements of the full *mathematical
    definition* of the variables map to the arguments of the *Pyomo variable declaration*
    function `pyo.Var`. I hope this helps you appreciate the value of having a well-defined
    *mathematical* model before starting to build a *Pyomo* model. The implementation
    will just flow naturally, and errors will be less likely.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¯„è®ºä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å®Œæ•´çš„*æ•°å­¦å®šä¹‰*ä¸­å˜é‡çš„å…ƒç´ æ˜¯å¦‚ä½•å¾ˆå¥½åœ°æ˜ å°„åˆ°*Pyomo å˜é‡å£°æ˜*å‡½æ•° `pyo.Var` çš„å‚æ•°ä¸Šçš„ã€‚æˆ‘å¸Œæœ›è¿™æœ‰åŠ©äºä½ ç†è§£åœ¨å¼€å§‹æ„å»º
    *Pyomo* æ¨¡å‹ä¹‹å‰æ‹¥æœ‰ä¸€ä¸ªè‰¯å¥½å®šä¹‰çš„*æ•°å­¦*æ¨¡å‹çš„ä»·å€¼ã€‚å®ç°è¿‡ç¨‹å°†è‡ªç„¶æµç•…ï¼Œé”™è¯¯ä¹Ÿä¼šå‡å°‘ã€‚
- en: 4.1.3\. Constraints
  id: totrans-220
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1.3\. çº¦æŸ
- en: 'The solution must be a **single tour** starting and ending at the hotel:'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è§£å¿…é¡»æ˜¯ä¸€ä¸ª**ä»é…’åº—å¼€å§‹å¹¶ç»“æŸçš„å•ä¸€å·¡å›**ï¼š
- en: '![](../Images/173a04975424ba275a920b98435085e5.png)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/173a04975424ba275a920b98435085e5.png)'
- en: '[PRE21]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: The Pyomo model has been updated. How much has it grown after the addition of
    the subtour elimination constraints?
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: Pyomo æ¨¡å‹å·²æ›´æ–°ã€‚å¢åŠ å­å›è·¯æ¶ˆé™¤çº¦æŸåï¼Œå®ƒå¢é•¿äº†å¤šå°‘ï¼Ÿ
- en: '[PRE22]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: We have gone **from 72 to 80 variables and from 18 to 74 constraints**. Clearly,
    this formulation is heavier on constraints than on variables, as it has quadrupled
    the number of constraints we had before. Thatâ€™s the â€œprice we payâ€, in general,
    for making models more â€œrealisticâ€, as realism usually entailsâ€”if the data is
    unchangedâ€”limiting the number of allowable solutions.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å·²ç»**ä»72ä¸ªå˜é‡å¢åŠ åˆ°80ä¸ªå˜é‡ï¼Œä»18ä¸ªçº¦æŸå¢åŠ åˆ°74ä¸ªçº¦æŸ**ã€‚æ˜¾ç„¶ï¼Œè¿™ç§è¡¨è¿°åœ¨çº¦æŸæ–¹é¢æ¯”å˜é‡æ›´å¤šï¼Œå› ä¸ºå®ƒä½¿æˆ‘ä»¬ä¹‹å‰çš„çº¦æŸæ•°é‡å¢åŠ äº†å››å€ã€‚è¿™å°±æ˜¯æˆ‘ä»¬é€šå¸¸ä¸ºä½¿æ¨¡å‹æ›´â€œç°å®â€è€Œä»˜å‡ºçš„ä»£ä»·ï¼Œå› ä¸ºç°å®æ€§é€šå¸¸æ„å‘³ç€â€”â€”å¦‚æœæ•°æ®ä¸å˜â€”â€”é™åˆ¶å¯å…è®¸çš„è§£çš„æ•°é‡ã€‚
- en: As always, we can inspect the model structure with`model.pprint()`. Although
    this â€œprintâ€ loses its value rapidly as the number of model components grows,
    it still can give us a quick overview of what the model is made of, and how big
    it is.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: å’Œå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`model.pprint()`æ£€æŸ¥æ¨¡å‹ç»“æ„ã€‚è™½ç„¶éšç€æ¨¡å‹ç»„ä»¶æ•°é‡çš„å¢åŠ ï¼Œè¿™ç§â€œæ‰“å°â€è¿…é€Ÿå¤±å»ä»·å€¼ï¼Œä½†å®ƒä»ç„¶å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿäº†è§£æ¨¡å‹çš„æ„æˆå’Œè§„æ¨¡ã€‚
- en: 4.2\. Plotting the updated modelâ€™s solution
  id: totrans-228
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4.2\. ç»˜åˆ¶æ›´æ–°æ¨¡å‹çš„è§£
- en: Letâ€™s solve the updated model and plot the new solution. Fingers crossed.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬è§£å†³æ›´æ–°åçš„æ¨¡å‹å¹¶ç»˜åˆ¶æ–°è§£ã€‚ç¥ˆç¥·å¥½è¿ã€‚
- en: '[PRE23]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '![](../Images/15644a14b7ecefad953db4ce9ce3a954.png)'
  id: totrans-231
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/15644a14b7ecefad953db4ce9ce3a954.png)'
- en: 'Now weâ€™re talking! This is exactly what we were expecting after the addition
    of the new constraints: **no subtours have formed**, which makes the solution
    path **a single tour** now.'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬è¯´åˆ°ç‚¹å­äº†ï¼è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨æ–°å¢çº¦æŸåæœŸå¾…çš„ç»“æœï¼š**æ²¡æœ‰å½¢æˆå­å›è·¯**ï¼Œè¿™ä½¿å¾—è§£è·¯å¾„ç°åœ¨å˜æˆäº†**å•ä¸€å·¡å›**ã€‚
- en: Note how, obviously, the objective value of this solved model is now 14.9 km,
    instead of the unfaithful 5.7 km we got with the incomplete model.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œæ˜¾ç„¶ï¼Œè¿™ä¸ªè§£æ¨¡å‹çš„ç›®æ ‡å€¼ç°åœ¨æ˜¯ 14.9 å…¬é‡Œï¼Œè€Œä¸æ˜¯ä¸å‡†ç¡®çš„ 5.7 å…¬é‡Œï¼Œæˆ‘ä»¬ä»ä¸å®Œæ•´çš„æ¨¡å‹ä¸­å¾—åˆ°çš„ã€‚
- en: '***ğŸ‘ï¸* A drawing of a graph is not a tour on a map**'
  id: totrans-234
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***ğŸ‘ï¸* å›¾å½¢ç»˜åˆ¶ä¸æ˜¯åœ°å›¾ä¸Šçš„å·¡å›**'
- en: ''
  id: totrans-235
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Note that this image is just one possible **drawing** of a graph, not a geographical
    trajectory. The circles and links you see do not correspond to a real path in
    geographical space (how could it, if we havenâ€™t used any geographical information
    in its creation?). You can verify this yourself by running `plot_solution_as_graph(model)`
    multiple times: each time you run it, the nodes will take different positions.
    [Graphs](https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)) are abstract
    mathematical structures that connect "points" through "links", representing relationships
    of any kind between entities of any kind. We used a graph here to **study the
    solution''s validity**, not to **visualize the real tour** in Paris. We do that
    in [this article].'
  id: totrans-236
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œè¿™å¼ å›¾ç‰‡ä»…ä»…æ˜¯å›¾è¡¨çš„ä¸€ç§å¯èƒ½**ç»˜å›¾**ï¼Œè€Œä¸æ˜¯åœ°ç†è½¨è¿¹ã€‚ä½ çœ‹åˆ°çš„åœ†åœˆå’Œé“¾æ¥å¹¶ä¸å¯¹åº”äºåœ°ç†ç©ºé—´ä¸­çš„å®é™…è·¯å¾„ï¼ˆå¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ä»»ä½•åœ°ç†ä¿¡æ¯ï¼Œå®ƒæ€ä¹ˆå¯èƒ½å¯¹åº”å‘¢ï¼Ÿï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡å¤šæ¬¡è¿è¡Œ`plot_solution_as_graph(model)`æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼šæ¯æ¬¡è¿è¡Œæ—¶ï¼ŒèŠ‚ç‚¹çš„ä½ç½®éƒ½ä¼šä¸åŒã€‚[å›¾è¡¨](https://en.wikipedia.org/wiki/Graph_(discrete_mathematics))æ˜¯æŠ½è±¡çš„æ•°å­¦ç»“æ„ï¼Œé€šè¿‡â€œé“¾æ¥â€è¿æ¥â€œç‚¹â€ï¼Œè¡¨ç¤ºä»»æ„å®ä½“ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨å›¾è¡¨æ¥**ç ”ç©¶è§£å†³æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§**ï¼Œè€Œä¸æ˜¯**å¯è§†åŒ–å·´é»çš„çœŸå®æ—…è¡Œ**ã€‚æˆ‘ä»¬åœ¨[è¿™ç¯‡æ–‡ç« ]ä¸­åšåˆ°äº†è¿™ä¸€ç‚¹ã€‚
- en: 5\. Conclusion (or planning for the next sprint)
  id: totrans-237
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 5\. ç»“è®ºï¼ˆæˆ–è§„åˆ’ä¸‹ä¸€ä¸ªå†²åˆºï¼‰
- en: With this final verification of the solution, **we conclude that this updated
    version of the model can solve any instance of the Traveling Salesman Problem**,
    so we can consider it a successful proof-of-concept (POC).
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡å¯¹è§£å†³æ–¹æ¡ˆçš„æœ€ç»ˆéªŒè¯ï¼Œ**æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œè¿™ä¸ªæ›´æ–°ç‰ˆæœ¬çš„æ¨¡å‹å¯ä»¥è§£å†³ä»»ä½•å®ä¾‹çš„æ—…è¡Œæ¨é”€å‘˜é—®é¢˜**ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªæˆåŠŸçš„æ¦‚å¿µéªŒè¯ï¼ˆPOCï¼‰ã€‚
- en: '*ğŸ’¡* **Evolving solutions, one sprint at a time**'
  id: totrans-239
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ’¡* **é€æ­¥æ¼”è¿›è§£å†³æ–¹æ¡ˆï¼Œæ¯æ¬¡å†²åˆºä¸€ä¸ª**'
- en: ''
  id: totrans-240
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This POC doesnâ€™t solve (yet) our original [complex tourism problem](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef),
    but **it does solve the minimum valuable problem** we proposed as the first stepping-stone
    towards a more sophisticated solution. Hence, **it gets us provably** (i.e., evidence-based)
    **closer to a valuable solution of the more complex problem**. With a minimal
    *working* example at hand, we can better evaluate what needs to be done to advance
    in the direction we want, and what can be provisionally *simplified away* until
    a more mature version of the solution is reached. **While having something useful
    at all times, weâ€™ll develop an increasingly-valuable system, until weâ€™re** [**satisficed**](https://en.wikipedia.org/wiki/Satisficing).
    That is the essence of the â€œagile roadâ€ to effective solutions.
  id: totrans-241
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è¿™ä¸ªPOCå°šæœªè§£å†³æˆ‘ä»¬åŸå§‹çš„[å¤æ‚æ—…æ¸¸é—®é¢˜](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef)ï¼Œä½†**å®ƒç¡®å®è§£å†³äº†æˆ‘ä»¬ä½œä¸ºç¬¬ä¸€ä¸ªåŸºçŸ³æå‡ºçš„æœ€å°æœ‰ä»·å€¼é—®é¢˜**ã€‚å› æ­¤ï¼Œ**å®ƒç¡®å®ä½¿æˆ‘ä»¬å¯ä»¥è¯æ˜**ï¼ˆå³åŸºäºè¯æ®ï¼‰**æ›´æ¥è¿‘å¤æ‚é—®é¢˜çš„æœ‰ä»·å€¼è§£å†³æ–¹æ¡ˆ**ã€‚æœ‰äº†ä¸€ä¸ªæœ€å°çš„*æœ‰æ•ˆ*ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°è¯„ä¼°åœ¨æˆ‘ä»¬å¸Œæœ›çš„æ–¹å‘ä¸Šéœ€è¦åšä»€ä¹ˆï¼Œä»¥åŠåœ¨è§£å†³æ–¹æ¡ˆçš„æ›´æˆç†Ÿç‰ˆæœ¬è¾¾åˆ°ä¹‹å‰å¯ä»¥ä¸´æ—¶*ç®€åŒ–æ‰*çš„å†…å®¹ã€‚**åœ¨ä»»ä½•æ—¶å€™éƒ½æœ‰ä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å°†å¼€å‘ä¸€ä¸ªè¶Šæ¥è¶Šæœ‰ä»·å€¼çš„ç³»ç»Ÿï¼Œç›´åˆ°æˆ‘ä»¬**[**æ»¡è¶³**](https://en.wikipedia.org/wiki/Satisficing)ã€‚è¿™å°±æ˜¯é€šå¾€æœ‰æ•ˆè§£å†³æ–¹æ¡ˆçš„â€œæ•æ·ä¹‹è·¯â€çš„æœ¬è´¨ã€‚
- en: With the validity of this approach proven, we must expand it and refine it so
    **it can gradually encompass more features of our original problem**, with each
    iteration providing **incrementally valuable solutions.** In this POC, we focused
    on the design and formulation of a basic model, so we had to assume a fixed set
    of sites and their distance matrix as a given. Of course, this is limiting, and
    the next step should be to have a model that accepts any number of sites. For
    that, **we need a way to automatically generate the distance matrix given a list
    of sites and their geographical coordinates.** That is the goal of [our next sprint](https://medium.com/@carlosjuribe/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e).
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§æ–¹æ³•çš„æœ‰æ•ˆæ€§å·²ç»å¾—åˆ°éªŒè¯ï¼Œæˆ‘ä»¬å¿…é¡»æ‰©å±•å’Œæ”¹è¿›å®ƒï¼Œä»¥ä¾¿**é€æ¸æ¶µç›–æˆ‘ä»¬åŸå§‹é—®é¢˜çš„æ›´å¤šç‰¹å¾**ï¼Œæ¯æ¬¡è¿­ä»£éƒ½æä¾›**é€æ­¥æœ‰ä»·å€¼çš„è§£å†³æ–¹æ¡ˆ**ã€‚åœ¨è¿™ä¸ªPOCä¸­ï¼Œæˆ‘ä»¬ä¸“æ³¨äºåŸºæœ¬æ¨¡å‹çš„è®¾è®¡å’Œåˆ¶å®šï¼Œå› æ­¤æˆ‘ä»¬ä¸å¾—ä¸å‡è®¾ä¸€ç»„å›ºå®šçš„ç«™ç‚¹åŠå…¶è·ç¦»çŸ©é˜µä½œä¸ºç»™å®šæ¡ä»¶ã€‚å½“ç„¶ï¼Œè¿™å…·æœ‰å±€é™æ€§ï¼Œä¸‹ä¸€æ­¥åº”è¯¥æ˜¯æœ‰ä¸€ä¸ªèƒ½å¤Ÿæ¥å—ä»»æ„æ•°é‡ç«™ç‚¹çš„æ¨¡å‹ã€‚ä¸ºæ­¤ï¼Œ**æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œæ ¹æ®ç«™ç‚¹åˆ—è¡¨åŠå…¶åœ°ç†åæ ‡è‡ªåŠ¨ç”Ÿæˆè·ç¦»çŸ©é˜µ**ã€‚è¿™å°±æ˜¯[æˆ‘ä»¬ä¸‹ä¸€ä¸ªå†²åˆº](https://medium.com/@carlosjuribe/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e)çš„ç›®æ ‡ã€‚
- en: 5.1\. Whatâ€™s next
  id: totrans-243
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5.1\. æ¥ä¸‹æ¥åšä»€ä¹ˆ
- en: 'In the next article (sprint 4) we will work on a class that **generates a distance
    matrix automatically from any list of sites.** This functionality, when combined
    with the model we just built here**,** will allow us, among other things, to solve
    **many models for different inputs, quickly,** and compare them**.** Besides,
    generalizing the solution this way will make our lives easier later on when we
    do a bit of **sensitivity and scenario analysis** in future sprints. Also, as
    we will upgrade this proof-of-concept to an â€œMVP statusâ€, we will start using
    **object-oriented code** to keep things well organized, and ready for extensibility.
    Donâ€™t waste the flow and jump [right in](https://medium.com/@carlosjuribe/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e):'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ï¼ˆç¬¬4æ¬¡å†²åˆºï¼‰ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª**ä»ä»»ä½•ç«™ç‚¹åˆ—è¡¨ä¸­è‡ªåŠ¨ç”Ÿæˆè·ç¦»çŸ©é˜µ**çš„ç±»ã€‚è¿™ä¸€åŠŸèƒ½ä¸æˆ‘ä»¬åˆšåˆšåœ¨è¿™é‡Œæ„å»ºçš„æ¨¡å‹ç»“åˆèµ·æ¥ï¼Œå°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿåœ°è§£å†³**ä¸åŒè¾“å…¥çš„å¤šä¸ªæ¨¡å‹**ï¼Œå¹¶è¿›è¡Œæ¯”è¾ƒ**ã€‚**æ­¤å¤–ï¼Œä»¥è¿™ç§æ–¹å¼å¯¹è§£å†³æ–¹æ¡ˆè¿›è¡Œæ¦‚æ‹¬ï¼Œå°†ä½¿æˆ‘ä»¬åœ¨æœªæ¥è¿›è¡Œä¸€äº›**æ•æ„Ÿæ€§å’Œæƒ…æ™¯åˆ†æ**æ—¶æ›´åŠ è½»æ¾ã€‚æ­¤å¤–ï¼Œéšç€æˆ‘ä»¬å°†è¿™ä¸ªæ¦‚å¿µéªŒè¯å‡çº§ä¸ºâ€œMVPçŠ¶æ€â€ï¼Œæˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨**é¢å‘å¯¹è±¡çš„ä»£ç **æ¥ä¿æŒè‰¯å¥½çš„ç»„ç»‡ï¼Œå¹¶ä¸ºæ‰©å±•åšå¥½å‡†å¤‡ã€‚ä¸è¦æµªè´¹æ—¶é—´ï¼Œç›´æ¥è·³åˆ°[è¿™é‡Œ](https://medium.com/@carlosjuribe/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e)ï¼š
- en: '[](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=post_page-----fc7ee8198b6c--------------------------------)
    [## Compute the Distance Matrix of a Set of Sites from Their Coordinates in Python'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=post_page-----fc7ee8198b6c--------------------------------)
    [## ä»åœ°ç†åæ ‡è®¡ç®—ä¸€ç»„ç«™ç‚¹çš„è·ç¦»çŸ©é˜µ'
- en: Estimate the distance between any pair of sites from their geographical coordinates
    as a stepping stone to solvingâ€¦
  id: totrans-246
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ä»åœ°ç†åæ ‡ä¼°ç®—ä»»ä½•ä¸€å¯¹ç«™ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œä½œä¸ºè§£å†³é—®é¢˜çš„ä¸€ä¸ªèµ·ç‚¹â€¦â€¦
- en: towardsdatascience.com](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=post_page-----fc7ee8198b6c--------------------------------)
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=post_page-----fc7ee8198b6c--------------------------------)
- en: Footnotes
  id: totrans-248
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è„šæ³¨
- en: 'Actually, thereâ€™s another cause for a wrong result: the *data* the model feeds
    on can also be wrong, not just the model formulation. But, in a sense, if you
    think of â€œa modelâ€ as a â€œ**model instance**â€, *i.e.*, a concrete model with concrete
    data, then the model will be of course wrong if the data is wrong, which is what
    I intended by the statement. [â†©](#e5d1)'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å®é™…ä¸Šï¼Œè¿˜æœ‰ä¸€ä¸ªå¯¼è‡´ç»“æœé”™è¯¯çš„åŸå› ï¼šæ¨¡å‹æ‰€ä¾èµ–çš„*æ•°æ®*ä¹Ÿå¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œä¸åªæ˜¯æ¨¡å‹å…¬å¼ã€‚ä½†æ˜¯ï¼Œä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå¦‚æœä½ æŠŠâ€œæ¨¡å‹â€è§†ä¸ºâ€œ**æ¨¡å‹å®ä¾‹**â€ï¼Œ*å³*ï¼Œä¸€ä¸ªå…·ä½“çš„æ¨¡å‹ä¸å…·ä½“çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦‚æœæ•°æ®é”™è¯¯ï¼Œæ¨¡å‹è‡ªç„¶ä¹Ÿä¼šé”™è¯¯ï¼Œè¿™å°±æ˜¯æˆ‘å£°æ˜ä¸­çš„æ„æ€ã€‚[â†©](#e5d1)
- en: Thanks for reading, and see you in the next one! ğŸ“ˆğŸ˜Š
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: æ„Ÿè°¢é˜…è¯»ï¼Œä¸‹æ¬¡è§ï¼ğŸ“ˆğŸ˜Š
- en: Feel free to follow me, ask me questions, **give me feedback** in the comments,
    or contact me on [LinkedIn](https://www.linkedin.com/in/carlosjuribe/).
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: éšæ—¶å…³æ³¨æˆ‘ï¼Œå‘æˆ‘æé—®ï¼Œåœ¨è¯„è®ºä¸­**ç»™æˆ‘åé¦ˆ**ï¼Œæˆ–åœ¨[LinkedIn](https://www.linkedin.com/in/carlosjuribe/)ä¸Šè”ç³»æˆ‘ã€‚
