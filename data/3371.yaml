- en: Testing the Consistency of Reported Machine Learning Performance Scores by the
    mlscorecheck Package
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试mlscorecheck包的报告的机器学习性能一致性
- en: 原文：[https://towardsdatascience.com/testing-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610?source=collection_archive---------6-----------------------#2023-11-12](https://towardsdatascience.com/testing-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610?source=collection_archive---------6-----------------------#2023-11-12)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/testing-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610?source=collection_archive---------6-----------------------#2023-11-12](https://towardsdatascience.com/testing-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610?source=collection_archive---------6-----------------------#2023-11-12)
- en: '![](../Images/fa56cf93c52f06cc70ff8f8ba26f6c98.png)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fa56cf93c52f06cc70ff8f8ba26f6c98.png)'
- en: AI (Dall-E) generated depiction of the topic
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: AI (Dall-E) 生成的主题描述
- en: A small step towards the big leap of reproducible machine learning science
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为了实现可复现的机器学习科学迈出了一小步
- en: '[](https://medium.com/@gyuriofkovacs?source=post_page-----e1baaba57610--------------------------------)[![Gyorgy
    Kovacs](../Images/aa5d1fcc59d738acc1056de3f0cbe7ca.png)](https://medium.com/@gyuriofkovacs?source=post_page-----e1baaba57610--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e1baaba57610--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e1baaba57610--------------------------------)
    [Gyorgy Kovacs](https://medium.com/@gyuriofkovacs?source=post_page-----e1baaba57610--------------------------------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@gyuriofkovacs?source=post_page-----e1baaba57610--------------------------------)[![Gyorgy
    Kovacs](../Images/aa5d1fcc59d738acc1056de3f0cbe7ca.png)](https://medium.com/@gyuriofkovacs?source=post_page-----e1baaba57610--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e1baaba57610--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e1baaba57610--------------------------------)
    [Gyorgy Kovacs](https://medium.com/@gyuriofkovacs?source=post_page-----e1baaba57610--------------------------------)'
- en: ·
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4563dd81810c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftesting-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610&user=Gyorgy+Kovacs&userId=4563dd81810c&source=post_page-4563dd81810c----e1baaba57610---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e1baaba57610--------------------------------)
    ·11 min read·Nov 12, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe1baaba57610&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftesting-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610&user=Gyorgy+Kovacs&userId=4563dd81810c&source=-----e1baaba57610---------------------clap_footer-----------)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[跟进](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4563dd81810c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftesting-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610&user=Gyorgy+Kovacs&userId=4563dd81810c&source=post_page-4563dd81810c----e1baaba57610---------------------post_header-----------)
    发布在[Towards Data Science](https://towardsdatascience.com/?source=post_page-----e1baaba57610--------------------------------)
    ·11分钟阅读·2023年11月12日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe1baaba57610&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftesting-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610&user=Gyorgy+Kovacs&userId=4563dd81810c&source=-----e1baaba57610---------------------clap_footer-----------)'
- en: --
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe1baaba57610&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftesting-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610&source=-----e1baaba57610---------------------bookmark_footer-----------)'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe1baaba57610&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Ftesting-the-consistency-of-reported-machine-learning-performance-scores-by-the-mlscorecheck-package-e1baaba57610&source=-----e1baaba57610---------------------bookmark_footer-----------)'
- en: In this post, we explore how the Python package [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    can be used for testing the consistency between reported machine learning performance
    scores and the accompanying descriptions of experimental setups.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我们探讨了如何使用Python包[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)来测试报告的机器学习性能分数与实验设置描述之间的一致性。
- en: '*Disclaimer: the author of this post is the author of the mlscorecheck package.*'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '*免责声明：本文的作者是mlscorecheck包的作者。*'
- en: '**What is the consistency testing of performance scores?**'
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**什么是性能分数的一致性测试？**'
- en: Assume you come across accuracy (0.9494), sensitivity (0.8523), and specificity
    (0.9765) scores reported for a binary classification problem with a testset consisting
    of 100 positive and 1000 negative samples. Can you trust these scores? How can
    you check if they could truly be the outcome of the claimed experiment? This is
    where the `mlscorecheck` package can help you by providing such consistency testing
    capabilities. In this particular example, one can exploit
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你遇到一个二分类问题的准确率（0.9494）、敏感性（0.8523）和特异性（0.9765）分数，这个测试集由100个正样本和1000个负样本组成。你能相信这些分数吗？你如何检查这些分数是否真的可能是所宣称的实验结果？这就是`mlscorecheck`包可以通过提供一致性测试功能来帮助你的地方。在这个具体的例子中，可以利用
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: and the `'insconsistency’` flag of the result being `False` indicates that the
    scores could be yielded from the experiment. (Which is true, since the scores
    correspond to 81 true positive and 850 true negative samples.) What if the accuracy
    score 0.8474 was reported due to an accidental typo?
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 如果结果的`'insconsistency'`标志为`False`，则表明这些分数可能是从实验中得出的。（这是真的，因为这些分数对应于81个真实的正样本和850个真实的负样本。）如果准确率分数0.8474是由于意外的打印错误而报告的呢？
- en: '[PRE1]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Testing the adjusted setup, the result signals inconsistency: the scores could
    not be the outcome of the experiment. Either the scores or the assumed experimental
    setup is incorrect.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 测试调整后的设置时，结果显示不一致：这些分数可能不是实验的结果。要么分数错误，要么假定的实验设置不正确。
- en: In the rest of the post, we take a closer look on the main features and use
    cases of the [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    package.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的内容中，我们将详细查看[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包的主要特性和使用案例。
- en: Introduction
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: In both research and applications, supervised learning approaches are routinely
    ranked by performance scores calculated in some experiments ([binary classification](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers),
    [multiclass classification](/micro-macro-weighted-averages-of-f1-score-clearly-explained-b603420b292f),
    [regression](https://scikit-learn.org/stable/modules/model_evaluation.html#regression-metrics)).
    Due to typos in the publications, [improperly used statistics](https://doi.org/10.1055/s-0033-1359421),
    [data leakage](https://www.cell.com/patterns/abstract/S2666-3899(23)00159-9),
    and [cosmetics](https://doi.org/10.1371/journal.pone.0005738), in many cases the
    reported performance scores are unreliable. Beyond contributing to the [reproducibility
    crisis](https://en.wikipedia.org/wiki/Replication_crisis) in machine learning
    and artificial intelligence, the effect of unrealistically high performance scores
    is usually further amplified by the [publication bias](https://en.wikipedia.org/wiki/Publication_bias),
    eventually [skewing entire fields](https://doi.org/10.1016/j.artmed.2020.101987)
    of research.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在研究和应用中，监督学习方法通常通过在一些实验中计算的性能分数进行排名（[二分类](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers)，[多分类](/micro-macro-weighted-averages-of-f1-score-clearly-explained-b603420b292f)，[回归](https://scikit-learn.org/stable/modules/model_evaluation.html#regression-metrics)）。由于出版物中的打印错误，[不当使用的统计数据](https://doi.org/10.1055/s-0033-1359421)，[数据泄漏](https://www.cell.com/patterns/abstract/S2666-3899(23)00159-9)以及[伪装](https://doi.org/10.1371/journal.pone.0005738)，许多情况下报告的性能分数是不可靠的。除了对机器学习和人工智能中的[可重复性危机](https://en.wikipedia.org/wiki/Replication_crisis)做出贡献外，不切实际的高性能分数的影响通常还会被[出版偏倚](https://en.wikipedia.org/wiki/Publication_bias)进一步放大，最终[扭曲整个领域](https://doi.org/10.1016/j.artmed.2020.101987)的研究。
- en: The goal of the [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    package is to provide numerical techniques **to test if a set of reported performance
    scores could be the outcome of an assumed experimental setup**.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包的目标是提供数值技术**以测试一组报告的性能分数是否可能是假定实验设置的结果**。'
- en: '**The operation of consistency tests**'
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**一致性测试的操作**'
- en: 'The idea behind consistency testing is that in a given experimental setup,
    performance scores cannot take any values independently:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 一致性测试的理念是，在给定的实验设置中，性能分数不能独立地取任何值：
- en: For example, if there are 100 positive samples in a binary classification testset,
    the [sensitivity](https://en.wikipedia.org/wiki/Sensitivity_and_specificity) score
    can only take the values 0.0, 0.01, 0.02, …, 1.0, but it cannot be 0.8543.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，在一个二元分类测试集中有100个正样本时，[灵敏度](https://zh.wikipedia.org/wiki/灵敏度和特异度)分数只能取值为0.0,
    0.01, 0.02, …, 1.0，但不能是0.8543。
- en: When multiple performance scores are reported, they need to be consistent with
    each other. For example, [accuracy](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers)
    is the weighted average of [sensitivity and specificity](https://en.wikipedia.org/wiki/Sensitivity_and_specificity),
    hence, in a binary classification problem with a testset of 100 positive and 100
    negative samples, the scores acc = 0.96, sens = 0.91, spec = 0.97 cannot be yielded.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当报告多个性能分数时，它们需要彼此一致。例如，[准确率](https://zh.wikipedia.org/wiki/ROC曲线)是[灵敏度和特异度](https://zh.wikipedia.org/wiki/ROC曲线)的加权平均，因此，在一个由100个正样本和100个负样本组成的二元分类问题中，得分acc
    = 0.96，sens = 0.91，spec = 0.97是不可能的。
- en: In more complex experimental setups (involving [k-fold cross-validation](https://en.wikipedia.org/wiki/Cross-validation_(statistics)),
    the aggregation of the scores across multiple folds/datasets, etc.), the constraints
    become more advanced, but they still exist. The [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    package implements numerical tests to check if the scores assumed to be yielded
    from an experiment satisfy the corresponding constraints.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在更复杂的实验设置中（涉及[k折交叉验证](https://zh.wikipedia.org/wiki/交叉验证_(统计学))等），跨多个折叠/数据集的分数聚合，等等，约束条件变得更加先进，但它们仍然存在。[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包实现了数值测试，以检查假设从实验中得出的分数是否满足相应的约束条件。
- en: '**The tests are numerical, inconsistencies are identified conclusively, with
    certainty.** Drawing an analogy with statistical hypothesis testing, the null-hypothesis
    is that there are no inconsistencies, and whenever some inconsistency is identified,
    it provides evidence against the null-hypothesis, but being a numerical test,
    this evidence is indisputable.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '**测试是数值化的，确定性地识别出不一致之处**。用统计假设检验作类比，零假设是没有不一致，一旦发现某种不一致，就提供了反对零假设的证据，但作为数值测试，这种证据是无可争议的。'
- en: 'Various experimental setups impose various constraints on the performance scores
    that need dedicated solutions. The tests implemented in the package are based
    on three principles: exhaustive enumeration expedited by interval computing; linear
    integer programming; analytical relations between the scores. The sensitivity
    of the tests highly depends on the experimental setup and the numerical uncertainty:
    large datasets, large numerical uncertainty and a small number of reported scores
    reduce the ability of the tests to recognize deviations from the assumed evaluation
    protocols. Nevertheless, as we see later on, the tests are still applicable in
    many real life scenarios. For further details on the mathematical background of
    the tests, refer to the [preprint](https://www.researchgate.net/publication/374845553_Testing_the_Consistency_of_Performance_Scores_Reported_for_Binary_Classification_Problems)
    and the [documentation](https://mlscorecheck.readthedocs.io/en/latest/).'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 各种实验设置对性能分数施加各种约束，需要专门的解决方案。该包中实施的测试基于三个原则：通过区间计算加快的详尽枚举；线性整数规划；分数之间的分析关系。测试的灵敏度高度依赖于实验设置和数值不确定性：大数据集、大数值不确定性和少数报告的分数减少了测试识别偏离假设评估协议的能力。尽管如此，正如我们后面所看到的，这些测试在许多现实场景中仍然适用。有关测试数学背景的进一步详细信息，请参阅[预印本](https://www.researchgate.net/publication/374845553_Testing_the_Consistency_of_Performance_Scores_Reported_for_Binary_Classification_Problems)和[文档](https://mlscorecheck.readthedocs.io/en/latest/)。
- en: '**Use cases**'
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**用例**'
- en: Now, we explore some examples illustrating the use of the package, but first,
    we discuss the general requirements of testing and some terms used to describe
    the experiments.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们探讨一些示例，说明包的使用，但首先，我们讨论测试的一般要求和描述实验使用的一些术语。
- en: '**The requirements**'
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**要求**'
- en: 'Consistency testing has three requirements:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一致性测试有三个要求：
- en: the collection of **reported performance scores**;
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**报告的性能分数的收集**；'
- en: the **estimated numerical uncertainty** of the scores (when the scores are truncated
    to *4* decimal places, one can assume that the real values are within the range
    of 0.0001 from the reported values, and this is the numerical uncertainty of the
    scores) — this is usually the *eps* parameter of the tests which is simply inferred
    by inspecting the scores;
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分数的**估计数值不确定性**（当分数被截断为*4*位小数时，可以假设实际值在报告值的0.0001范围内，这是分数的数值不确定性） — 这通常是测试的eps参数，只需检查分数即可推断。
- en: the **details of the experiment** (the statistics of the dataset(s) involved,
    the cross-validation scheme, the mode of aggregation).
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实验的细节**（涉及的数据集统计信息，交叉验证方案，聚合模式）。'
- en: '**Glossary**'
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**术语表**'
- en: 'The terms used in the specifications of the experiments:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 实验规范中使用的术语：
- en: '*mean of scores* (MoS): the scores are calculated for each fold/dataset, and
    then averaged to gain the reported ones;'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*得分均值*（MoS）：为每个折叠/数据集计算得分，然后平均以获得报告的得分；'
- en: '*score of means* (SoM): the fold/dataset level raw figures (e.g. confusion
    matrices) are averaged first, and the scores are calculated from the average figures;'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*均值得分*（SoM）：首先对折叠/数据集级别的原始数字（例如混淆矩阵）进行平均，然后从平均数字计算得分；'
- en: '*micro-average*: the evaluation of a multiclass problem is carried out by measuring
    the performance on each class against all other (as a binary classification),
    and the class-level results are aggregated in the *score of means* fashion;'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*微平均*：多类问题的评估通过将每个类别的表现与其他所有类别（作为二元分类）进行比较来完成，类级别的结果以*均值得分*的方式汇总；'
- en: '*macro-average*: the same as the micro-average, but the class level scores
    are aggregated in the *mean of scores* fashion;'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*宏平均*：与微平均相同，但类级别分数以*得分均值*的方式汇总；'
- en: '*fold configuration*: when k-fold cross-validation is used, the tests usually
    rely on linear integer programming. Knowing the number of samples of classes in
    the folds can be utilized in the formation of the linear program. These fold level
    class sample counts are referred to as the fold configuration.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*折叠配置*：当使用 k 折交叉验证时，测试通常依赖于线性整数编程。了解折叠中类的样本数可以用于形成线性程序。这些折叠级别类样本计数称为折叠配置。'
- en: '**Binary classification**'
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**二元分类**'
- en: In the beginning, we already illustrated the use of the package when binary
    classification scores calculated on a single testset are to be tested. Now, we
    look into some more advanced examples.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始时，我们已经说明了在单个测试集上计算的二元分类分数时使用包的情况。现在，我们来看一些更高级的例子。
- en: In addition to the two examples we investigate in detail, the package supports
    altogether 10 experimental setups for binary classification, the list of which
    can be found in the [documentation](https://mlscorecheck.readthedocs.io/en/latest/)
    with further examples in the sample [notebooks](https://github.com/FalseNegativeLab/mlscorecheck/tree/main/notebooks/illustration).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 除了我们详细调查的两个示例外，该软件包还支持共 10 种用于二元分类的实验设置，其列表可以在[文档](https://mlscorecheck.readthedocs.io/en/latest/)中找到，并在[示例笔记本](https://github.com/FalseNegativeLab/mlscorecheck/tree/main/notebooks/illustration)中提供更多示例。
- en: '**N testsets, score-of-means aggregation**'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '**N 个测试集，均值得分汇总**'
- en: In this example, we assume that there are N testsets, k-folding is not involved,
    but the scores are aggregated in the score-of-means fashion, that is, the raw
    true positive and true negative figures are determined for each testset and the
    performance scores are calculated from the total (or average) number of true positive
    and true negative figures. The available scores are assumed to be the [accuracy](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers),
    [negative predictive value](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers)
    and the [F1-score](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers).
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在本例中，我们假设有 N 个测试集，不涉及 k 折交叉验证，但分数以均值得分的方式汇总，即为每个测试集确定原始真正例和真负例数字，然后从总（或平均）真正例和真负例数字计算性能分数。可用的分数被认为是[准确率](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers)，[负预测值](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers)和[F1分数](https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers)。
- en: For example, in practice, the evaluation of an image segmentation technique
    on N test images stored in one tensor usually leads to this scenario.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在实践中，对存储在一个张量中的 N 个测试图像进行图像分割技术的评估通常会导致这种情况。
- en: 'The design of the package is such that the details of the experimental setup
    are encoded in the names of the test functions, in this way guiding the user to
    take care of all available details of the experiment when choosing the suitable
    tests. In this case, the suitable test is the function `check_n_testsets_som_no_kfold`
    in the `mlscorecheck.check.binary` module, the token `''som’` referring to the
    mode of aggregation (score of means):'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 软件包的设计是这样的，实验设置的细节被编码在测试函数的名称中，引导用户在选择适当的测试时注意所有可用的实验细节。在本例中，适当的测试是`mlscorecheck.check.binary`模块中的`check_n_testsets_som_no_kfold`函数，其中`'som'`代表聚合模式（均值分数）：
- en: '[PRE2]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The result indicates that the scores could be the outcome of the experiment.
    No wonder, the scores are prepared by sampling true positive and true negative
    counts for the testsets and calculating them in the specified manner. However,
    if one of the scores is slightly changed, for example F1 is modified to 0.3191,
    the configuration becomes inconsistent:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 结果表明，分数可能是实验的结果。毫不奇怪，这些分数是通过对测试集的真正阳性和真正阴性计数进行抽样，并按指定的方式计算得出的。然而，如果其中一个分数略有变化，例如F1修改为0.3191，则配置变得不一致：
- en: '[PRE3]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Further details of the analysis, for example, the evidence for feasibility can
    be extracted from the dictionaries returned by the test functions. For the structure
    of the outputs, again, see the [documentation](https://mlscorecheck.readthedocs.io/en/latest/).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 进一步分析的详细信息，例如，关于可行性的证据可以从测试函数返回的字典中提取。关于输出的结构，同样，请参阅[文档](https://mlscorecheck.readthedocs.io/en/latest/)。
- en: '**1 dataset, k-fold cross-validation, mean of scores aggregation**'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**1 数据集，k折交叉验证，分数均值聚合**'
- en: In this example, we assume that there is a dataset on which a binary classifier
    is evaluated in a stratified repeated k-fold cross-validation manner (2 folds,
    3 repetitions), and the mean of the scores yielded on the folds is reported.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们假设有一个数据集，对其中的二元分类器进行了分层重复k折交叉验证（2折，3次重复），并报告了各折产生的分数的均值。
- en: This experimental setup is possibly the most commonly used in supervised machine
    learning.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 这个实验设置可能是监督式机器学习中最常用的。
- en: We highlight the distinction between **knowing** and **not knowing** the *fold
    configuration*. Typically, MoS tests rely on linear integer programming and the
    fold configuration is required to formulate the linear integer program. The fold
    configuration might be specified by listing the statistics of the folds, or one
    can refer to a folding strategy leading to deterministic fold statistics, such
    as *stratification*. Later on, we show that testing can be carried in the lack
    of knowing the fold configuration, as well, however, in that case all possible
    fold configurations are tested, which might lead to enormous computational demands.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们强调了*知道*和*不知道**折叠配置*之间的区别。通常，MoS测试依赖于线性整数规划，并且需要折叠配置来制定线性整数规划。折叠配置可以通过列出折叠的统计数据来指定，或者可以引用导致确定性折叠统计的折叠策略，例如*分层*。后来，我们展示了即使在不知道折叠配置的情况下，也可以进行测试，不过在这种情况下，会测试所有可能的折叠配置，这可能会带来巨大的计算需求。
- en: 'Again, the first step is to select the suitable test to be used. In this case,
    the correct test is the `check_1_dataset_known_folds_mos` function, where the
    token `mos` refers to the mode of aggregation, and `known_folds` indicates that
    the *fold configuration* is known (due to stratification). The test is executed
    as follows:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，第一步是选择要使用的适当测试。在这种情况下，正确的测试是`check_1_dataset_known_folds_mos`函数，其中`mos`表示聚合模式，`known_folds`表示由于分层而知道*折叠配置*。测试的执行如下：
- en: '[PRE4]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Similarly to the previous examples, there is no inconsistency, since the performance
    scores are prepared to constitute a consistent configuration. However, if one
    of the scores is slightly changed, the test detects the inconsistency:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于之前的例子，不存在不一致性，因为性能分数准备构成一个一致的配置。然而，如果其中一个分数略有变化，测试就会检测到不一致：
- en: '[PRE5]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In the previous examples, we supposed that the fold configuration is known.
    However, in many cases, the exact fold configuration is not known and stratification
    is not specified. In these cases one can rely on tests that systematically test
    all possible fold configurations, as shown in the below example. This time, the
    suitable test has the `''unknown_folds''` token in its name, indicating that all
    potential fold configurations are to be tested:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的例子中，我们假设了折叠配置是已知的。然而，在许多情况下，确切的折叠配置并不知道，也没有指定分层。在这些情况下，可以依赖于系统地测试所有可能的折叠配置的测试，如下例所示。这次，适当的测试在其名称中具有
    `'unknown_folds'` 标记，表示将测试所有可能的折叠配置：
- en: '[PRE6]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'As before, the test correctly identifies that there is no inconsistency: during
    the process of evaluating all possible fold configurations, it got to the point
    of testing the actual stratified configuration which shows consistency, and with
    this evidence, stopped the testing of the remaining one.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 与以前一样，测试正确地识别出没有不一致性：在评估所有可能的折叠配置过程中，它测试了实际的分层配置，显示出一致性，并且凭借这一证据停止了对剩余配置的测试。
- en: 'In practice, prior to launching a test with unknown folds, it is advised to
    make an estimation on the number of possible fold configurations to be tested:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在实践中，在使用未知折叠进行测试之前，建议对可能要测试的折叠配置数量进行估计：
- en: '[PRE7]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: In worst case, solving 4096 small linear integer programming problems is still
    feasible with regular computing equipment, however, with larger datasets the number
    of potential fold configurations can quickly grow intractable.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在最坏的情况下，解决 4096 个小型线性整数规划问题仍然可行，但是对于更大的数据集，潜在的折叠配置数量可能会迅速变得棘手。
- en: '**Multiclass classification**'
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**多类分类**'
- en: Testing multiclass classification scenarios is analogous to that of the binary
    case, therefore, we do not get into as much details as in the binary case.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 测试多类分类场景类似于二元情况，因此我们不会像在二元情况下那样进入太多细节。
- en: 'From the 6 experimental setups supported by the package we picked a commonly
    used one for illustration: we assume there is a multiclass dataset (4 classes),
    and repeated stratified k-fold cross-validation was carried out with 4 folds and
    2 repetitions. We also know that the scores were aggregated in the *macro-average*
    fashion, that is, in each fold, the performance on each class was evaluated against
    all other classes in a binary classification manner, and the scores were averaged
    across the classes and then across the folds.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在该包支持的6个实验设置中，我们选择了一个常用的用于说明的设置：假设有一个多类数据集（4类），并且使用了4折重复分层k折交叉验证。我们还知道分数是以*宏平均*的方式聚合的，即，在每个折叠中，针对每个类别的性能以二元分类方式评估所有其他类别，然后在类别和折叠上进行平均。
- en: Again, the first step is chosing the suitable test function, which in this case
    becomes `check_1_dataset_known_folds_mos_macro` from the `mlscorecheck.check.multiclass`
    module. Again, the tokens `'mos’` and `'macro’` in the name of the test refer
    to the aggregations used in the experiment.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，第一步是选择合适的测试函数，在这种情况下，选择了来自`mlscorecheck.check.multiclass`模块的`check_1_dataset_known_folds_mos_macro`。名称中的
    `'mos’` 和 `'macro’` 表示实验中使用的聚合方式。
- en: '[PRE8]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Similarly to the previous cases, with the hand-crafted set of consistent scores,
    the test detects no inconsistency. However, a small change, for example, accuracy
    modified to 0.656 renders the configuration infeasible.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于前面的情况，通过手工制作的一组一致分数，测试检测到没有不一致性。然而，一个小的改变，例如，将准确度修改为0.656，就会使配置变得不可行。
- en: '**Regression**'
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**回归**'
- en: The last supervised learning task supported by the [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    package is regression. The testing of regression problems is the most difficult
    since the predictions on the testsets can take any values, consequently, any score
    values could be yielded an experiment. The only thing regression tests can rely
    on is the mathematical relation between the currently supported *mean average
    error (mae)*, *mean squared error (mse)* and *r-squared* (r2).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包支持的最后一个监督学习任务是回归。测试回归问题是最困难的，因为对测试集的预测可以取任何值，因此实验可以产生任何分数值。回归测试唯一可以依赖的是当前支持的*平均绝对误差
    (mae)*、*均方误差 (mse)* 和 *r平方* (r2) 之间的数学关系。'
- en: 'In the following example, we assume that the *mae* and *r2* scores are reported
    for a testset, and we know its main statistics (the number of samples and the
    variance). Then, the consistency test can be executed as follows:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，我们假设*mae*和*r2*分数是针对测试集报告的，并且我们知道其主要统计数据（样本数量和方差）。然后，可以执行一致性测试，如下所示：
- en: '[PRE9]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Again, the test correctly shows that there is no inconsistency (the scores are
    prepared by a real evaluation). However, if the *r2* score is slightly changed,
    for example, to 0.9997, the configuration becomes infeasible.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 再次地，测试正确显示没有不一致（分数是通过实际评估准备的）。但是，如果*r2*分数稍微改变，例如，变为0.9997，配置将变得不可行。
- en: '**Test bundles**'
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**测试包**'
- en: To make the consistency testing of scores reported for popular, widely researched
    problems more accessible, the [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    package includes specifications for numerous experimental setups that are considered
    standards in certain problems.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使针对流行的、广泛研究的问题报告的分数的一致性测试更容易，[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包包括了多个被认为是某些问题标准的实验设置的规范。
- en: '**Retinal vessel segmentation on the DRIVE dataset**'
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**DRIVE数据集上的视网膜血管分割**'
- en: 'In the field of retinal image analysis, an [ambiguity](https://www.researchgate.net/publication/350236730_A_new_baseline_for_retinal_vessel_segmentation_Numerical_identification_and_correction_of_methodological_inconsistencies_affecting_100_papers)
    exists in the evaluation of various segmentation techniques: authors have the
    freedom to account for pixels outside the circular field of view area, and this
    choice is rarely indicated in publications. This ambiguity can result in the ranking
    of algorithms based on incomparable performance scores. The functionalities implemented
    in the [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck) package
    are suitable to identify if the authors used pixels outside the field of view
    for evaluation or not.'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在视网膜图像分析领域，存在一个[歧义](https://www.researchgate.net/publication/350236730_A_new_baseline_for_retinal_vessel_segmentation_Numerical_identification_and_correction_of_methodological_inconsistencies_affecting_100_papers)的问题：作者可以自由选择是否考虑视野圆形区域之外的像素，而这一选择在出版物中很少被指明。这种歧义可能导致基于不可比性能分数的算法排名。在[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包中实现的功能适合识别作者是否使用了视野之外的像素进行评估。
- en: 'One of the most widely researched problems is the segmentation of vessels based
    on the [DRIVE](https://ieeexplore.ieee.org/document/1282003) dataset. To prevent
    the cumbersome task of looking up the statistics of the images and constructing
    the experimental setups, the package contains the statistics of the dataset and
    provides two high-level functions to test the ambiguity of image-level and aggregated
    scores. For example, having a triplet of image level accuracy, sensitivity and
    specificity scores for the test image ‘03’ of the [DRIVE](https://ieeexplore.ieee.org/document/1282003)
    dataset, one can exploit the package as:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 最广泛研究的问题之一是基于[DRIVE](https://ieeexplore.ieee.org/document/1282003)数据集的血管分割。为了避免查找图像统计数据和构建实验设置的繁琐任务，包中包含了数据集的统计数据，并提供了两个高级功能来测试图像级和聚合分数的歧义。例如，拥有测试图像‘03’的[DRIVE](https://ieeexplore.ieee.org/document/1282003)数据集的图像级准确性、敏感性和特异性分数三元组，可以利用包进行如下操作：
- en: '[PRE10]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The result indicates that the scores for this image must have been obtained
    by using only the field of view (*fov*) pixels for evaluation, since the scores
    are not inconsistent with this hypothesis, but they inconsistent with the alternative
    hypothesis of using *all* pixels for evaluation.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 结果表明，对于该图像的分数必须仅通过使用视野内的(*fov*)像素进行评估，因为这些分数与这一假设是一致的，但与使用*所有*像素进行评估的替代假设是不一致的。
- en: '**Further test bundles**'
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**进一步的测试包**'
- en: 'The list of all popular research problems and corresponding publicly available
    datasets supported by test bundles in the [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    package reads as follows:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包中支持的所有流行研究问题和对应的公开数据集的列表如下：'
- en: 'Retinal image analysis:'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视网膜图像分析：
- en: '- Vessel segmentation: [DRIVE](https://ieeexplore.ieee.org/document/1282003),
    [STARE](https://pubmed.ncbi.nlm.nih.gov/9929355/), [HRF](https://pubmed.ncbi.nlm.nih.gov/24416040/),
    [CHASE_DB1](https://ieeexplore.ieee.org/document/6224174);'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- 血管分割： [DRIVE](https://ieeexplore.ieee.org/document/1282003), [STARE](https://pubmed.ncbi.nlm.nih.gov/9929355/),
    [HRF](https://pubmed.ncbi.nlm.nih.gov/24416040/), [CHASE_DB1](https://ieeexplore.ieee.org/document/6224174);'
- en: '- Retinopathy recognition: [DIARETDB0](https://www.semanticscholar.org/paper/DIARETDB-0-%3A-Evaluation-Database-and-Methodology-Kauppi-Kalesnykiene/bd7d2380e76fb9dfd367d669e311d4913f67f7d2),
    [DIARETDB1](https://www.researchgate.net/publication/221259835_DIARETDB1_diabetic_retinopathy_database_and_evaluation_protocol);'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- 视网膜病变识别：[DIARETDB0](https://www.semanticscholar.org/paper/DIARETDB-0-%3A-Evaluation-Database-and-Methodology-Kauppi-Kalesnykiene/bd7d2380e76fb9dfd367d669e311d4913f67f7d2)，[DIARETDB1](https://www.researchgate.net/publication/221259835_DIARETDB1_diabetic_retinopathy_database_and_evaluation_protocol)；'
- en: '- Optic disk/cup segmentation: [DRISHTI_GS](https://ieeexplore.ieee.org/document/6867807);'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- 视盘/杯分割：[DRISHTI_GS](https://ieeexplore.ieee.org/document/6867807)；'
- en: '- Exudate segmentation: [DIARETDB1](https://www.researchgate.net/publication/221259835_DIARETDB1_diabetic_retinopathy_database_and_evaluation_protocol);'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- 渗出物分割：[DIARETDB1](https://www.researchgate.net/publication/221259835_DIARETDB1_diabetic_retinopathy_database_and_evaluation_protocol)；'
- en: 'Skin lesion classification: [ISIC2016](https://arxiv.org/abs/1605.01397), [ISIC2017](https://arxiv.org/abs/1710.05006);'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 皮肤病变分类：[ISIC2016](https://arxiv.org/abs/1605.01397)，[ISIC2017](https://arxiv.org/abs/1710.05006)；
- en: 'Term-preterm delivery prediction from electrohysterogram signals: [TPEHG](https://pubmed.ncbi.nlm.nih.gov/18437439/).'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从电生理图信号预测足月分娩： [TPEHG](https://pubmed.ncbi.nlm.nih.gov/18437439/)。
- en: '**Call for contribution**'
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**征稿启事**'
- en: Experts from any fields are welcome to submit further test bundles to facilitate
    the validation of machine learning performance scores in various areas of research!
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎各领域的专家提交更多测试包，以促进对机器学习性能评分在各研究领域的验证！
- en: '**Conclusions**'
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**结论**'
- en: The meta-analysis of machine learning research doesn’t encompass many techniques
    beyond thorough paper assessments and potential attempts at re-implementing proposed
    methods to validate claimed results. The functionalities provided by the [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    package enable a more concise, numerical approach to the meta-analysis of machine
    learning research, contributing to maintaining the integrity of various research
    fields.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 对机器学习研究的荟萃分析不包括很多技术，超出了对论文的全面评估和可能尝试重新实现所提出的方法以验证声明结果的范围。[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包提供的功能使得对机器学习研究的荟萃分析更为简明、数值化，有助于维护各研究领域的完整性。
- en: '**Further reading**'
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**进一步阅读**'
- en: 'For further information, we recommend checking:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 如需更多信息，我们建议查看：
- en: the README of the [mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)
    package,
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[mlscorecheck](https://github.com/FalseNegativeLab/mlscorecheck)包的README，'
- en: the illustrative [notebooks](https://github.com/FalseNegativeLab/mlscorecheck/tree/main/notebooks/illustration)
    provided in the package,
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 套件中提供的[说明性笔记本](https://github.com/FalseNegativeLab/mlscorecheck/tree/main/notebooks/illustration)，
- en: the detailed [documentation](https://mlscorecheck.readthedocs.io/en/latest/),
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 详细[文档](https://mlscorecheck.readthedocs.io/en/latest/)，
- en: the [preprint](https://www.researchgate.net/publication/374845553_Testing_the_Consistency_of_Performance_Scores_Reported_for_Binary_Classification_Problems)
    that describes the numerical methods.
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述数值方法的[预印本](https://www.researchgate.net/publication/374845553_Testing_the_Consistency_of_Performance_Scores_Reported_for_Binary_Classification_Problems)。
