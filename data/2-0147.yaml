- en: 8 ChatGPT Prompts For Frequently Done Pandas Operations
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8 个 ChatGPT 提示，用于频繁执行的 Pandas 操作
- en: 原文：[https://towardsdatascience.com/8-chatgpt-prompts-for-frequently-done-pandas-operations-e3d7d1965b2c](https://towardsdatascience.com/8-chatgpt-prompts-for-frequently-done-pandas-operations-e3d7d1965b2c)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/8-chatgpt-prompts-for-frequently-done-pandas-operations-e3d7d1965b2c](https://towardsdatascience.com/8-chatgpt-prompts-for-frequently-done-pandas-operations-e3d7d1965b2c)
- en: A quick way to get things done with Pandas
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Pandas 快速完成任务
- en: '[](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)[![Soner
    Yıldırım](../Images/c589572e9d1ee176cd4f5a0008173f1b.png)](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)
    [Soner Yıldırım](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)[![Soner
    Yıldırım](../Images/c589572e9d1ee176cd4f5a0008173f1b.png)](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)
    [Soner Yıldırım](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)
    ·7 min read·May 26, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)
    ·7 分钟阅读·2023年5月26日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/c2e8e682e64722afd27b4fea46bcaa24.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c2e8e682e64722afd27b4fea46bcaa24.png)'
- en: Photo by [Karsten Winegeart](https://unsplash.com/@karsten116?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/YzxeHEzBZ6I?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 由 [Karsten Winegeart](https://unsplash.com/@karsten116?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    在 [Unsplash](https://unsplash.com/photos/YzxeHEzBZ6I?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    上的照片
- en: We’ve all heard about ChatGPT. It’s not just on the tech industry’s radar, but
    also making headlines in the wider press. I frequently get friends reaching out
    to ask if I’ve heard about it. And yes, I sure have — I use it every day.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我们都听说过 ChatGPT。它不仅在科技行业引起关注，也在更广泛的媒体上成为头条新闻。我经常收到朋友问我是否听说过它。是的，我当然听说过 —— 我每天都在使用它。
- en: Despite some critiques concerning its performance and reliability on simpler
    tasks, ChatGPT and other large language models (LLMs) excel in a variety of tasks.
    For me, they’ve served as a significant productivity booster.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管有一些关于其在简单任务上表现和可靠性的批评，ChatGPT 和其他大型语言模型（LLMs）在各种任务中表现出色。对我来说，它们大大提高了生产力。
- en: Recently, I decided to leverage ChatGPT for the Pandas operations I regularly
    carry out for data cleaning and analysis. In this article, I’ll share and guide
    you through 8 prompt examples where I asked ChatGPT how to get things done with
    Pandas.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，我决定利用 ChatGPT 来进行我定期执行的数据清理和分析的 Pandas 操作。在这篇文章中，我将分享并指导你如何使用 ChatGPT 完成
    Pandas 操作的 8 个提示示例。
- en: '*If you’d like to learn more about Pandas, visit my course* [*500 Exercises
    to Master Python Pandas*](https://www.udemy.com/course/500-exercises-to-master-python-pandas/learn/lecture/37842166#overview)*.*'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果你想了解更多关于 Pandas 的信息，请访问我的课程* [*500 Exercises to Master Python Pandas*](https://www.udemy.com/course/500-exercises-to-master-python-pandas/learn/lecture/37842166#overview)*。*'
- en: '**First prompt to define its role:**'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '**第一个提示以定义其角色：**'
- en: '*Prompt: You are a Python tutor teaching me the Pandas library. I will be asking
    you how to do a particular task with Pandas and expecting you to explain it to
    me. Also show me the code along with your explanation.*'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：你是一个 Python 导师，教我 Pandas 库。我会问你如何使用 Pandas 完成特定任务，并希望你向我解释。同时也展示一下代码和你的解释。*'
- en: I gave it the structure of the DataFrame in terms of column names and data types
    before I start asking questions.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始提问之前，我已经根据列名和数据类型给 DataFrame 设定了结构。
- en: '**Second prompt:**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**第二个提示：**'
- en: '*Prompt: Let me first tell you about the DataFrame I have. Then, I will start
    asking questions. The columns and their data types are given below as a Python
    dictionary with keys showing column names and values showing the data types.*'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：首先让我告诉你我拥有的 DataFrame 的信息。然后，我将开始提问。列及其数据类型如下所示，以 Python 字典的形式呈现，键显示列名，值显示数据类型。*'
- en: '*{‘store’: dtype(‘O’), ‘product_group’: dtype(‘O’), ‘product_code’: dtype(‘int64’),
    ‘stock_qty’: dtype(‘int64’), ‘cost’: dtype(‘float64’), ‘price’: dtype(‘float64’),
    ‘last_week_sales’: dtype(‘int64’), ‘last_month_sales’: dtype(‘int64’)}*'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '*{‘store’: dtype(‘O’), ‘product_group’: dtype(‘O’), ‘product_code’: dtype(‘int64’),
    ‘stock_qty’: dtype(‘int64’), ‘cost’: dtype(‘float64’), ‘price’: dtype(‘float64’),
    ‘last_week_sales’: dtype(‘int64’), ‘last_month_sales’: dtype(‘int64’)}*'
- en: I will be using a sample dataset that I prepared with mock data. You can download
    it from my [datasets](https://github.com/SonerYldrm/datasets) repo. It’s the one
    named “sales_data_with_stores.csv”.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我将使用一个我准备的包含虚拟数据的样本数据集。你可以从我的[数据集](https://github.com/SonerYldrm/datasets)仓库下载。它是名为“sales_data_with_stores.csv”的那个。
- en: 'Here is the DataFrame I have for you to reference easily:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我为你准备的DataFrame，方便你参考：
- en: '![](../Images/0733c160600599104d25e18c2c61efc7.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0733c160600599104d25e18c2c61efc7.png)'
- en: The first 5 rows of df (image by author)
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: DataFrame的前5行（图片由作者提供）
- en: We can now start on Pandas tasks.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以开始处理Pandas任务了。
- en: '**Example 1**'
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**示例 1**'
- en: '*Prompt: Tell me how to calculate the average last week sales for each store.*'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：告诉我如何计算每个商店上周的平均销售额。*'
- en: 'This is a simple one-liner but can still take some time to figure out if you
    just started learning Pandas. Here is the answer of ChatGPT:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个简单的一行代码，但如果你刚开始学习Pandas，它仍然可能需要一些时间来弄清楚。以下是ChatGPT的答案：
- en: '![](../Images/59a8c41893d9f96a3746f2b76b72e8cc.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/59a8c41893d9f96a3746f2b76b72e8cc.png)'
- en: (image by author)
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: (图片由作者提供)
- en: I will be copy-pasting the code snippets in case you want to test it for yourself.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我将复制并粘贴代码片段，以防你想自己测试。
- en: '[PRE0]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: ChatGPT also provided a detailed explanation along with the code in terms of
    how the task done and the type of the output.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ChatGPT还提供了详细的解释和代码，说明了任务是如何完成的以及输出的类型。
- en: '**Example 2**'
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**示例 2**'
- en: '*Prompt: Tell me how to find the total profit in the last month for each store.*'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：告诉我如何找到上个月每个商店的总利润。*'
- en: 'For this task, it needs to figure out how to calculate the profit first. Let’s
    see it’s response:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个任务，首先需要计算利润。让我们看看它的回应：
- en: '![](../Images/1f030edaa0c72a6862468502fd2792f2.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1f030edaa0c72a6862468502fd2792f2.png)'
- en: (image by author)
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: (图片由作者提供)
- en: '[PRE1]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Example 3
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 示例 3
- en: When working with real-world data, we often encounter the challenge of missing
    values. I want to see how ChatGPT tackles a task that isn’t quite as straightforward.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理真实世界的数据时，我们常常会遇到缺失值的挑战。我想看看ChatGPT如何处理一个不那么简单的任务。
- en: '*Prompt: There are some missing values in the stock quantity column. I want
    to replace the missing values with average stock quantity in that store. Tell
    me how to do this task.*'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：库存数量列中有一些缺失值。我想用该商店的平均库存数量来替换这些缺失值。告诉我如何完成这个任务。*'
- en: '![](../Images/5d4b2e71dabef0f409234e2b3fff1795.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5d4b2e71dabef0f409234e2b3fff1795.png)'
- en: (image by author)
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: (图片由作者提供)
- en: '[PRE2]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: There are other ways to solve this task but using the transform function is
    one of the efficient ways. At least, this is how I would do it.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 解决这个任务还有其他方法，但使用transform函数是高效的方法之一。至少，这就是我会做到的方式。
- en: 'I recently wrote an [article](https://medium.com/@sonery/5-python-pandas-functions-you-should-not-forget-about-91a0acc8e718)
    that mentions the importance of the transform function. Here is a short snippet
    from the article that explains why I would do this task using the transform function:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我最近写了一篇[文章](https://medium.com/@sonery/5-python-pandas-functions-you-should-not-forget-about-91a0acc8e718)，提到了transform函数的重要性。以下是文章中的一个简短片段，解释了我为何会使用transform函数来完成这个任务：
- en: It sounds similar to the `apply` function but unlike the `apply` function, `transform`
    can return a Series that has the same size as the input, which makes it useful
    in performing vectorized operations and broadcasting, particularly when used with
    groupby objects.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 这听起来类似于`apply`函数，但不同于`apply`函数的是，`transform`可以返回一个与输入具有相同大小的Series，这使得它在执行向量化操作和广播时非常有用，尤其是在与groupby对象一起使用时。
- en: '**Example 4**'
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**示例 4**'
- en: '*Prompt: Tell me how to find the top 3 products with the highest sales in last
    month for each store.*'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：告诉我如何找到上个月每个商店销售额最高的前3个产品。*'
- en: '![](../Images/c885d75b38ed27ee5632858f27587bd3.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c885d75b38ed27ee5632858f27587bd3.png)'
- en: (image by author)
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: (图片由作者提供)
- en: '[PRE3]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: It sorts the entire DataFrame first. We can also do the sorting within each
    group. Let’s see if ChatGPT knows how to do it.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 它首先对整个DataFrame进行排序。我们还可以在每个组内进行排序。让我们看看ChatGPT是否知道如何做到这一点。
- en: '**Example 5**'
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**示例 5**'
- en: '*Prompt: Is there another way of doing this task without sorting the DataFrame
    first?*'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：是否有另一种方法可以在不先对DataFrame进行排序的情况下完成这个任务？*'
- en: '![](../Images/88e97c4e53d16c513c7e952d6df866f9.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/88e97c4e53d16c513c7e952d6df866f9.png)'
- en: (image by author)
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: (图片由作者提供)
- en: '[PRE4]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: It is important to note that sorting the entire DataFrame first might be the
    more performant way. I just wanted to see if ChatGPT provides different solutions.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的是，首先对整个 DataFrame 进行排序可能是更高效的方法。我只是想看看 ChatGPT 是否提供了不同的解决方案。
- en: '**Example 6**'
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**示例 6**'
- en: '*Prompt: I want to see the last week performance of each stores compared to
    their last month performance.*'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：我想查看每家商店上周的表现与上个月的表现比较。*'
- en: This is a simple task but the prompt does not directly tells ChatGPT how to
    do it. Let’s see how it will perform.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个简单的任务，但提示没有直接告诉 ChatGPT 怎么做。让我们看看它的表现如何。
- en: '![](../Images/7a8ce1a79293b040c0a0260039ebe987.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7a8ce1a79293b040c0a0260039ebe987.png)'
- en: (image by author)
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: (图片由作者提供)
- en: '[PRE5]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: As a response to the performance in the last week compared to the last month,
    it finds the difference between the last week sales and one fourth of the last
    month sales, which makes sense.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 作为对上周表现与上个月相比的回应，它计算了上周销售额与上个月销售额的四分之一之间的差异，这很有意义。
- en: 'The DataFrame it creates looks like this:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 它创建的 DataFrame 看起来是这样的：
- en: '![](../Images/a42aaa52a4d7ce600d46d53a37064e39.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a42aaa52a4d7ce600d46d53a37064e39.png)'
- en: Example 7
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 示例 7
- en: '*Prompt: Create a new column called `critical_stock`, which takes the value
    of 1 if the `stock_qty` is less than 500, 0 otherwise.*'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：创建一个名为 `critical_stock` 的新列，如果 `stock_qty` 小于 500，则值为 1，否则为 0。*'
- en: 'ChatGPT gives me 3 options for this task. Here are the two of them I liked
    better:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: ChatGPT 为这个任务提供了 3 个选项。这是我比较喜欢的两个：
- en: '![](../Images/9ddd6f4c1b4027af78fa5c385fd55b3d.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9ddd6f4c1b4027af78fa5c385fd55b3d.png)'
- en: (image by author)
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: (图片由作者提供)
- en: '[PRE6]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Example 8
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 示例 8
- en: '*Prompt: Create a summary of the DataFrame in terms of the size, missing values,
    data types, and column statistics.*'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '*提示：创建一个 DataFrame 的摘要，包括大小、缺失值、数据类型和列统计信息。*'
- en: The functions and methods used for summarizing a DataFrame is quite simple but
    ChatGPT did a great job at organizing them in a nice and clean way.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 用于总结 DataFrame 的函数和方法相当简单，但 ChatGPT 做得很好，将它们整理得非常整洁。
- en: 'I’m just copy-pasting the code it generated:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 我只是复制粘贴了它生成的代码：
- en: '[PRE7]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Final words
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 最后的话
- en: The examples we covered did a small demonstration of how ChatGPT is revolutionizing
    the way we perform common tasks in data analysis, specifically with Pandas. It
    is not only increasing our efficiency in completing tasks but also enriching our
    understanding of the complex operations that can be done with Pandas.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 我们讨论的示例简要展示了 ChatGPT 如何彻底改变我们在数据分析中执行常见任务的方式，特别是在 Pandas 上。它不仅提高了我们完成任务的效率，还丰富了我们对
    Pandas 复杂操作的理解。
- en: I will be exploring even more ways to employ ChatGPT in my data analytics toolkit
    and get more complicated tasks done. It is important to note that as the complexity
    of tasks increases, the way you write prompts start to matter a lot. This is the
    reason why there is a new discipline emerging, called prompt engineering.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 我将探索更多利用 ChatGPT 的方法来完成更复杂的任务。需要注意的是，随着任务复杂性的增加，你编写提示的方式变得尤为重要。这就是为什么有一个新的学科正在出现，叫做提示工程。
- en: '*You can become a* [*Medium member*](https://sonery.medium.com/membership)
    *to unlock full access to my writing, plus the rest of Medium. If you already
    are, don’t forget to* [*subscribe*](https://sonery.medium.com/subscribe) *if you’d
    like to get an email whenever I publish a new article.*'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '*你可以成为* [*Medium 会员*](https://sonery.medium.com/membership) *来解锁对我写作的完整访问权限，以及
    Medium 其余的内容。如果你已经是会员，别忘了* [*订阅*](https://sonery.medium.com/subscribe) *以便每当我发布新文章时能收到电子邮件。*'
- en: Thank you for reading. Please let me know if you have any feedback.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢阅读。如果你有任何反馈，请告诉我。
