- en: How to Create a Data-Driven Elo Rating System for 2v2 Games
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何为2v2游戏创建基于数据的Elo评级系统
- en: 原文：[https://towardsdatascience.com/developing-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53?source=collection_archive---------0-----------------------#2023-09-06](https://towardsdatascience.com/developing-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53?source=collection_archive---------0-----------------------#2023-09-06)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/developing-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53?source=collection_archive---------0-----------------------#2023-09-06](https://towardsdatascience.com/developing-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53?source=collection_archive---------0-----------------------#2023-09-06)
- en: 'Putting the math on the table: from algorithms to foosball madness, the quest
    for the ultimate office champion.'
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将数学放在桌面上：从算法到桌上足球的疯狂，寻找终极办公室冠军。
- en: '[](https://medium.com/@lazarekolebka?source=post_page-----7689f7d42a53--------------------------------)[![Lazare
    Kolebka](../Images/c3697b77f6275d40d65e488faf9c01dd.png)](https://medium.com/@lazarekolebka?source=post_page-----7689f7d42a53--------------------------------)[](https://towardsdatascience.com/?source=post_page-----7689f7d42a53--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----7689f7d42a53--------------------------------)
    [Lazare Kolebka](https://medium.com/@lazarekolebka?source=post_page-----7689f7d42a53--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@lazarekolebka?source=post_page-----7689f7d42a53--------------------------------)[![Lazare
    Kolebka](../Images/c3697b77f6275d40d65e488faf9c01dd.png)](https://medium.com/@lazarekolebka?source=post_page-----7689f7d42a53--------------------------------)[](https://towardsdatascience.com/?source=post_page-----7689f7d42a53--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----7689f7d42a53--------------------------------)
    [Lazare Kolebka](https://medium.com/@lazarekolebka?source=post_page-----7689f7d42a53--------------------------------)'
- en: ·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff1c1df53dff1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeveloping-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53&user=Lazare+Kolebka&userId=f1c1df53dff1&source=post_page-f1c1df53dff1----7689f7d42a53---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----7689f7d42a53--------------------------------)
    ·19 min read·Sep 6, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7689f7d42a53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeveloping-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53&user=Lazare+Kolebka&userId=f1c1df53dff1&source=-----7689f7d42a53---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff1c1df53dff1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeveloping-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53&user=Lazare+Kolebka&userId=f1c1df53dff1&source=post_page-f1c1df53dff1----7689f7d42a53---------------------post_header-----------)
    发布于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----7689f7d42a53--------------------------------)
    ·19 分钟阅读·2023年9月6日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7689f7d42a53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeveloping-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53&user=Lazare+Kolebka&userId=f1c1df53dff1&source=-----7689f7d42a53---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7689f7d42a53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeveloping-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53&source=-----7689f7d42a53---------------------bookmark_footer-----------)![](../Images/2300eec4a055e10f90e34464ff111ace.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7689f7d42a53&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fdeveloping-an-elo-based-data-driven-ranking-system-for-2v2-multiplayer-games-7689f7d42a53&source=-----7689f7d42a53---------------------bookmark_footer-----------)![](../Images/2300eec4a055e10f90e34464ff111ace.png)'
- en: Photo by [Pascal Swier](https://unsplash.com/@pascalswier?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由 [Pascal Swier](https://unsplash.com/@pascalswier?utm_source=medium&utm_medium=referral)
    提供，发布在 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: '*Hi and welcome!*'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '*你好，欢迎！*'
- en: '*My name is Lazare and I just finished my second bachelor degree in Business
    Data Analysis. This article is based on the work I did for my bachelor thesis.*'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '*我的名字是 Lazare，我刚完成了我的第二个学士学位，专业是商业数据分析。本文基于我为学士论文所做的工作。*'
- en: From friendly matches to intense competition, foosball has found its niche in
    corporate culture, providing a unique way for teams to connect and compete.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 从友谊赛到激烈的竞争，桌上足球在企业文化中找到了自己的位置，为团队提供了一种独特的连接和竞争方式。
- en: This article explores the math behind a 2v2 Elo-based scoring system that can
    be applied to foosball or any other 2v2 game. It also examines the architecture
    that supports data processing, and presents the creation of a web application
    that provides real-time ranking and data analysis using Python.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本文探讨了基于Elo的2v2评分系统的数学原理，该系统可以应用于桌上足球或任何其他2v2游戏。它还考察了支持数据处理的架构，并展示了创建一个实时排名和数据分析的网络应用程序，使用Python编写。
- en: The Elo Ranking
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Elo排名
- en: The Elo rating system is a method used to determine the relative skill level
    of a player in a [zero-sum games](https://en.wikipedia.org/wiki/Zero-sum_game).
    It was first developed for chess but is now being applied as a rating system in
    a variety of other sports such as baseball, basketball, various board games and
    e-sports.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Elo评级系统是一种用于确定玩家在[零和游戏](https://en.wikipedia.org/wiki/Zero-sum_game)中相对技能水平的方法。最初为国际象棋开发，但现在已被应用于各种其他体育项目，如棒球、篮球、各种棋盘游戏和电子竞技。
- en: '*One well-known example of this system is in chess, where the Elo rating system
    is employed to rank players worldwide. Magnus Carlsen, also known as the “Mozart
    of Chess”, holds the highest Elo rating in the world with a rating of 2,853 in
    2023, demonstrating his extraordinary skills in the game.*'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '*这个系统的一个著名例子是国际象棋，其中Elo评级系统用于排名全球玩家。Magnus Carlsen，亦称为“国际象棋的莫扎特”，在2023年以2,853的评级保持全球最高Elo评级，展示了他在比赛中的非凡技能。*'
- en: 'The Elo rating formula is a two-part formula: first, it calculates the **expected
    outcome** for a given group of players, and then it determines the **rating adjustment**
    based on the outcome of the match and the expected outcome.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Elo评级公式分为两部分：首先，它计算给定玩家组的**预期结果**，然后根据比赛结果和预期结果确定**评级调整**。
- en: Expected Outcome Calculation
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 预期结果计算
- en: 'Consider the following example in chess with Player A and Player B with ratings
    R𝖠 and *R*𝖡 respectively. The equation for the expected score of Player A against
    Player B is the following:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下国际象棋中的例子，其中玩家A和玩家B的评级分别为R𝖠和*R*𝖡。玩家A对阵玩家B的预期得分方程如下：
- en: '![](../Images/a2395428427ef51203c05b739866b740.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a2395428427ef51203c05b739866b740.png)'
- en: The Elo algorithm uses a variable that can be adjusted to control how the winning
    probability is influenced by the players’ ratings. In this example, it is set
    to 400, which is typical for most sports, including chess.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: Elo算法使用一个变量，可以调整以控制胜利概率如何受到玩家评级的影响。在这个例子中，设定为400，这在大多数体育项目中，包括国际象棋，是典型的。
- en: Now let’s take a look at a more realistic example, where player A has a rating
    of 1,500 and Player B, 1,200.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们来看一个更实际的例子，其中玩家A的评级为1,500，而玩家B的评级为1,200。
- en: 'The same equation seen above can calculate Player A’s expected score against
    Player B:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 上述相同的方程可以计算玩家A对阵玩家B的期望得分：
- en: '![](../Images/b09dece89f1cc0c9afca9bf759b0bacc.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b09dece89f1cc0c9afca9bf759b0bacc.png)'
- en: With this calculation, we know that Player A has a 84.9% chance of winning against
    Player B.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这个计算，我们知道玩家A对阵玩家B的胜率为84.9%。
- en: 'To find the estimated probability of Player B winning against Player A, the
    same formula is used, but the order of ratings is reversed:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 要找到玩家B对阵玩家A的估计胜率，使用相同的公式，但评级顺序会被颠倒：
- en: '![](../Images/1513d50bc356fa331e79e359b7746508.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1513d50bc356fa331e79e359b7746508.png)'
- en: The sum of the probabilities of Player A winning and Player B winning equals
    1 (0.849 + 0.151 = 1). In this scenario, Player A therefore has an 84.9% chance
    of winning, leaving Player B with only a 15.1% chance.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 玩家A获胜的概率与玩家B获胜的概率之和等于1（0.849 + 0.151 = 1）。在这种情况下，玩家A的胜率为84.9%，而玩家B的胜率仅为15.1%。
- en: '*Rating Calculation*'
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '*评级计算*'
- en: The difference in rating between the winner and the loser determines the total
    number of points won or lost after each game.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 胜者和败者之间的评级差异决定了每场比赛后赢得或失去的总积分。
- en: If a player with a much higher Elo rating wins, they will receive fewer points
    for their victory, and their opponent will lose only a few points for their defeat.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果一名具有更高Elo评级的玩家获胜，他们将为胜利获得更少的积分，而对手将因失败而损失少量积分。
- en: By contrast, if the lower-ranked player wins, this achievement is considered
    much more significant, thus the reward is greater and the higher-ranked opponent
    is penalized accordingly.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相比之下，如果低排名玩家获胜，这一成就被认为更为重要，因此奖励也更大，而高排名对手会因此受到相应的惩罚。
- en: 'The formula to calculate the new rating of Player A playing against Player
    B is the following:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 计算玩家A与玩家B对战的新评级的公式如下：
- en: '![](../Images/854d6ef9f2d62f5f132505e09fab6bc8.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/854d6ef9f2d62f5f132505e09fab6bc8.png)'
- en: In this formula, ( *S*𝖠 — *E*𝖠 ) represents the difference between Player A’s
    actual score and the expected score. The additional variable *K* determines approximately
    how much a player’s rating can change after a single match. In chess, this variable
    is set to 32.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个公式中，（*S*𝖠 — *E*𝖠）代表玩家A实际得分与预期得分之间的差异。附加变量*K*大致确定了单场比赛后玩家评级可以变化的程度。在象棋中，这个变量设为32。
- en: If Player A wins, the actual score, which is 1 in this case, will be greater
    than the expected score of 0.849, creating a positive variance.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 如果玩家A获胜，则实际得分为1，在这种情况下，将高于预期得分0.849，从而产生正差异。
- en: 'This indicates that Player A performed better than initially expected. As a
    result, the Elo rating system recalibrates the ratings for both players:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 这表明玩家A的表现比最初预期的要好。因此，Elo评级系统会重新校准两位玩家的评级：
- en: Player A’s rating will increase because of the win
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 玩家A的评级将因胜利而增加
- en: Player B’s rating will decrease because of the loss
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 玩家B的评级将因失败而减少
- en: 'Once again, this same equation can calculate the new rating of Player A and
    Player B:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 再次地，这个相同的公式可以计算玩家A和玩家B的新评级：
- en: '![](../Images/45beac5691a17bfb831c6fbb863b675c.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/45beac5691a17bfb831c6fbb863b675c.png)'
- en: In summary, the Elo rating system offers a robust and efficient method for evaluating
    and comparing players’ skills dynamically and fairly. It continually updates a
    player’s rating after each match, considering the skill difference between the
    two opponents.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，Elo评级系统提供了一种强大且高效的方法来动态而公平地评估和比较玩家的技能。它在每场比赛后持续更新玩家的评级，考虑到两位对手之间的技能差异。
- en: 'This approach rewards risk-taking, as winning against a higher-rated player
    results in a more significant increase in a player’s rating, as shown in the table
    below:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法奖励冒险，因为与高评级玩家对战获胜会显著提高玩家的评级，如下表所示：
- en: '![](../Images/07f27d4e9eee766fe835c73a1b7f71bd.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/07f27d4e9eee766fe835c73a1b7f71bd.png)'
- en: 'FIGURE I : Example of the Elo System in Chess | Table by the author'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 I ：象棋中的Elo系统示例 | 作者提供的表格
- en: 'On the other hand, if a higher-rated player goes against their winning probability
    and loses against a lower-rated player, their rating will be significantly impacted:
    they will lose more points, and their opponent will gain more points.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，如果一名高评级玩家违背了他们的胜率，与低评级玩家对战并输掉比赛，他们的评级将受到显著影响：他们将失去更多积分，而对手将获得更多积分。
- en: '*In summary, when a player wins a match, the lower their winning probability
    is, the higher the amount of points they can win.*'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '*总之，当一名玩家赢得比赛时，他们的获胜概率越低，他们能够赢得的积分就越高。*'
- en: In its current state, this rating formula, originally designed for chess, is
    not fully adapted to foosball.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在当前状态下，这个最初为象棋设计的评级公式尚未完全适应桌上足球。
- en: 'In fact, foosball does have more variables than chess such as:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，桌上足球比象棋有更多变量，例如：
- en: It is a **four-player game** with teams of two (2v2)
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它是一个**四人游戏**，由两个队伍组成（2v2）
- en: Each team member **can positively or negatively influence their teammate**
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个队员**可以对他们的队友产生积极或消极的影响**
- en: Unlike the binary outcome in chess, the scale of victory or defeat in foosball
    can vary considerably depending on the teams’ scores
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与棋类游戏中的二元结果不同，桌上足球中胜利或失败的规模可以根据队伍的得分有显著变化。
- en: Rating Algorithm Exploration
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评级算法探索
- en: '*The focus here is on adapting the Elo rating system to the unique requirements
    of foosball games, involving four players divided into two teams.*'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '*这里的重点是将Elo评级系统调整为满足桌上足球比赛的独特要求，这涉及四名玩家分成两个队伍。*'
- en: Winning Probability
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 胜率
- en: To begin calculating new player ratings, a refined formula needs to be established
    to determine the expected outcome of a game involving four players in two teams.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始计算新的玩家评级，需要建立一个精细的公式来确定涉及四名玩家分成两队的比赛的预期结果。
- en: 'To demonstrate this, consider a hypothetical four-player foosball game scenario:
    Player 1, Player 2, Player 3, and Player 4, each with a different rating that
    represents their skill level.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明这一点，考虑一个假设的四人桌上足球比赛情境：玩家1、玩家2、玩家3和玩家4，每个人的评分代表了他们的技能水平。
- en: '![](../Images/6ad3b7d6fe009230c610207152d47238.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6ad3b7d6fe009230c610207152d47238.png)'
- en: 'FIGURE II: Scenario with 4 Players Playing Foosball | Table by the author'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图II：四名玩家进行桌上足球比赛的情境 | 表格由作者提供
- en: To calculate the expected score of Team 1 against Team 2 in the revised Elo
    rating system, the expected score of each player involved in the game needs to
    be determined.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在修订后的Elo评分系统中，计算团队1对抗团队2的预期得分，需要确定游戏中每位玩家的预期得分。
- en: 'Player 1’s expected rating, denoted by *E*𝖯𝟣, can be calculated by averaging
    the sum of each opponent’s rating using the Elo rating formula as follows:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 玩家1的预期评分，记作*E*𝖯𝟣，可以通过使用Elo评分公式计算每个对手评分的平均值来得出：
- en: '![](../Images/4b831135973e20979eff19759b3216ad.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4b831135973e20979eff19759b3216ad.png)'
- en: After extensive testing, it was decided that it would be appropriate for the
    expected score formula to set the variable used to divide the rating difference
    to 500, rather than the traditional value of 400 used in chess. This increased
    value means that a player’s rating will have a smaller impact on their expected
    score.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 经过广泛测试后，决定将预期得分公式中用于除以评分差异的变量设为500，而不是传统的棋类使用的400。这一增加的值意味着玩家的评分对其预期得分的影响会更小。
- en: '*A primary reason for this adjustment is that, unlike chess, there is a slight
    element of chance in foosball. By using a value of 500, the game outcomes can
    be more accurately predicted, and a reliable rating system can be developed.*'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '*这一调整的主要原因在于，与棋类不同，桌上足球中有少许运气成分。通过使用500的值，比赛结果可以更准确地预测，并且可以开发出一个可靠的评分系统。*'
- en: To calculate the expected score of Player 2 denoted by *E*𝖯𝟤, against Player
    3 and Player 4, the same method as utilized for Player 1 can be employed.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 计算玩家2的预期得分，记作*E*𝖯𝟤，对抗玩家3和玩家4，可以采用与玩家1相同的方法。
- en: 'The expected score of the Team denoted *E*𝖳𝟣 can then be calculated by taking
    the average of *E*𝖯𝟣 and *E*𝖯𝟤 :'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，团队的预期得分记作*E*𝖳𝟣，可以通过计算*E*𝖯𝟣和*E*𝖯𝟤的平均值得出：
- en: '![](../Images/55147bbaa288a35cbf6ef7a946e7fa49.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/55147bbaa288a35cbf6ef7a946e7fa49.png)'
- en: Once the expected scores for each player are computed, they can then be used
    to calculate the outcome of the match. The team with the highest expected score
    is more likely to win. By averaging the expected scores for each team member,
    **the issue of skill differences within the team can then be solved !**
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦计算出每位玩家的预期得分，就可以用这些得分来计算比赛结果。预期得分最高的团队更有可能获胜。通过平均每个团队成员的预期得分，**团队内部技能差异的问题可以得到解决！**
- en: The table below shows the expected scores of Player 1 and 2 against Players
    3 and 4.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 下表显示了玩家1和玩家2对抗玩家3和玩家4的预期得分。
- en: P1’s expected scores against P3 and P4 are 0.091 and 0.201, corresponding to
    a 14.6% chance of winning
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: P1对P3和P4的预期得分分别为0.091和0.201，对应14.6%的胜率。
- en: P2’s expected scores against P3 and P4 are 0.201 and 0.387, giving a combined
    winning probability of 29.4%
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: P2对P3和P4的预期得分分别为0.201和0.387，总体获胜概率为29.4%。
- en: For P1, partnering with a stronger player like P2 can increase their overall
    chances of winning, as demonstrated by the 22%
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于P1，与像P2这样更强的玩家搭档可以提高他们的整体获胜机会，如22%所示。
- en: '![](../Images/6637be8017385f184d1e7f091834010e.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6637be8017385f184d1e7f091834010e.png)'
- en: 'FIGURE III : Expected Score Based on the Scenario Shown in Figure II | Table
    by the author'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图III：基于图II所示情境的预期得分 | 表格由作者提供
- en: If the team of P1 and P2 wins, P1 gains fewer points than their individual expected
    score would suggest, as P2, who is higher ranked, also contributes to the win
    and lowers their overall winning probability.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 如果P1和P2的团队获胜，P1获得的积分将低于其个人预期得分，因为排名较高的P2也参与了胜利，降低了P1的总体获胜概率。
- en: On the other hand, P2 gains more points due to having a lower- ranked teammate.
    In case of a win, P2 is rewarded for taking a risk, while P1 earns fewer points,
    as it is assumed P2 contributed more significantly to the victory, and vice versa
    if they lose.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，P2由于有一名排名较低的队友而获得更多积分。如果获胜，P2会因冒险而获得奖励，而P1则获得较少的积分，因为假设P2对胜利的贡献更大，反之亦然，如果他们失败。
- en: Rating Parameters
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 评分参数
- en: Now that the expected outcome of a four-player match has been determined, this
    information can be incorporated into a new formula that considers multiple variables
    that affect the match and player ratings.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 现在已经确定了四人比赛的预期结果，这些信息可以纳入一个新的公式，该公式考虑了影响比赛和球员评分的多个变量。
- en: As discussed earlier, the K-value can be modified to better fit the needs of
    the rating system. This new formula considers the number of games played by each
    player, reflecting their seniority as well as the result of the game.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，K值可以调整以更好地适应评分系统的需要。这个新公式考虑了每个球员参加的比赛数量，反映了他们的资历以及比赛结果。
- en: For example, in the 2014 World Cup semi-final, Germany defeated Brazil by a
    score of 7–1\. This was one of the most shocking and humiliating results in World
    Cup history, as Brazil was the host nation and had never lost a competitive match
    at home since 1975.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在2014年世界杯半决赛中，德国以7–1战胜了巴西。这是世界杯历史上最令人震惊和羞辱的结果之一，因为巴西是东道主，自1975年以来在主场从未输过比赛。
- en: If we were to apply the rating system to this match, we would expect Germany
    to gain a significant amount of points, while Brazil would lose a large amount
    of points, reflecting the difference in their performance and skill level.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如果将评分系统应用于这场比赛，我们预计德国会获得大量积分，而巴西会损失大量积分，反映出两队在表现和技能水平上的差异。
- en: '***K-Value*** The K-rating, denoted as *K*𝟣 for Player 1 in this case, determines
    how much a player’s rating will change after one game. This revised K-value takes
    into account the number of games the player has played to balance the effect of
    each game on their rating. After conducting numerous tests, a formula was developed
    for calculating the K-value for each player.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '***K值*** 在这种情况下，*K*𝟣表示球员1的K评分，决定了球员在一场比赛后评分变化的幅度。这个修正后的K值考虑了球员参与的比赛数量，以平衡每场比赛对其评分的影响。经过多次测试，制定了计算每个球员K值的公式。'
- en: 'For Player 1, this is expressed as:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 对于球员1，这可以表示为：
- en: '![](../Images/2962b144443f39fc46e071a01f749d90.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2962b144443f39fc46e071a01f749d90.png)'
- en: This formula for the K-value is designed to have a greater impact on the rating
    for new players while providing stability and less rating fluctuation for experienced
    players. Specifically, after playing 300 games, a player’s rating becomes more
    representative of their skill level.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 这个K值的公式旨在对新球员的评分产生更大的影响，同时为经验丰富的球员提供稳定性，减少评分波动。具体来说，在进行300场比赛后，球员的评分将更具代表性地反映其技能水平。
- en: '![](../Images/54909432ac4c61ad2a7b03f04e055d04.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/54909432ac4c61ad2a7b03f04e055d04.png)'
- en: 'FIGURE IV: K-value Over Time | Chart by the author'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 IV：K值随时间变化 | 作者绘制的图表
- en: Figure IV shows the effect of the number of games played on the K-value. Starting
    at 50, this graph shows that the K-value decreases as the number of games played
    increases, reaching a halved value of 25 after 300 games. This ensures that the
    impact of each game on a player’s rating decreases as experience increases.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 图 IV 显示了比赛场数对K值的影响。从50场开始，该图显示随着比赛场数的增加，K值逐渐降低，在300场比赛后降至一半的25。这确保了随着经验的增加，每场比赛对球员评分的影响会减少。
- en: '***Point Factor*** To consider the points scored by each team, a new variable,
    called the “point factor”, was introduced into the equation. This factor multiplies
    the *K* parameter of each player and is based on the absolute difference in points
    between the two teams. The impact of a match must be greater when a team wins
    by a large margin, i.e., an overwhelming victory.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '***点因子*** 为了考虑每支球队得分的情况，方程中引入了一个新的变量，称为“点因子”。该因子将每个球员的*K*参数相乘，并基于两队得分的绝对差值。比赛的影响必须更大，当一队以大比分获胜，即取得压倒性胜利时。'
- en: 'To calculate the point factor, the following formula was used:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 计算点因子的公式如下：
- en: '![](../Images/bc213518762f7252f5c8accaf5a272a7.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bc213518762f7252f5c8accaf5a272a7.png)'
- en: This formula takes the absolute difference between the scores of the two teams,
    adds 1, and computes the base-10 logarithm of the result. This value is then cubed
    and 2 is added to the result to obtain the final value of the point factor.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 该公式取两队得分的绝对差值，加1，并计算结果的以10为底的对数。然后将该值立方，并加上2，得到点因子的最终值。
- en: '![](../Images/b85648906b08641f9541561cf6cfc549.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b85648906b08641f9541561cf6cfc549.png)'
- en: 'FIGURE V: Point Factor | Chart by the author'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图 V：点因子 | 作者绘制的图表
- en: Final Rating Calculation
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 最终评分计算
- en: After adjusting all the necessary variables, an improved formula was developed
    to calculate the new ranking of each player involved in a game.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在调整了所有必要的变量之后，开发了一种改进的公式来计算每个参与游戏的玩家的新排名。
- en: Each player’s rating now takes into account their previous rating, the rating
    of their opponents, the impact of their teammates, their playing history, and
    the score of the game. This formula ensures that each player is rewarded according
    to their true performance, taking into account the fairness of each match.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，每个玩家的评级考虑了他们的先前评级、对手的评级、队友的影响、他们的比赛历史和比赛的得分。这个公式确保每个玩家根据他们的真实表现获得奖励，同时考虑了每场比赛的公平性。
- en: 'Going off of the previous example, the new formula for player A’s ranking is
    the following:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 以之前的例子为基础，玩家 A 的新排名公式如下：
- en: '![](../Images/49486b022ecd37996347ca9c017b86e9.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/49486b022ecd37996347ca9c017b86e9.png)'
- en: This improved formula rewards players based on their actual performance, encourages
    risk taking and provides a more balanced rating system for both new and experienced
    players.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 这个改进的公式根据玩家的实际表现给予奖励，鼓励冒险，并为新玩家和经验丰富的玩家提供了一个更平衡的评级系统。
- en: Now that we have an Elo algorithm, we can move on to database modeling.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了 Elo 算法，我们可以继续进行数据库建模。
- en: Database Design and Modeling
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据库设计与建模
- en: The [proposed database](https://github.com/lkolebka/baby-foot-python/blob/7aab1661e9f84e24746c26302fa03818b4834712/create_uppload%20_match/createDB.sql)
    model adopts a relational approach, organizing data into interconnected tables
    through the use of Primary Keys (PKs) and Foreign Keys (FKs). This structured
    organization facilitates data management and analysis, making PostgreSQL an appropriate
    choice as the database management system. PKs and FKs help maintain data consistency
    and minimize redundancy within the database.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '[提议的数据库](https://github.com/lkolebka/baby-foot-python/blob/7aab1661e9f84e24746c26302fa03818b4834712/create_uppload%20_match/createDB.sql)
    模型采用了关系型方法，通过使用主键（PKs）和外键（FKs）将数据组织成相互关联的表。这种结构化的组织有助于数据管理和分析，使 PostgreSQL 成为合适的数据库管理系统选择。PKs
    和 FKs 帮助维护数据一致性并减少数据库中的冗余。'
- en: '![](../Images/0a0200e85067fd74458d2a6ee309ffd5.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0a0200e85067fd74458d2a6ee309ffd5.png)'
- en: 'FIGURE VI: Diagram Model of the Database | Image by the author'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 图 VI：数据库的模型图 | 作者提供的图像
- en: 'Two types of relationships exist between tables in this database model: *one-to-many*
    and *many-to-many*.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个数据库模型中，表之间存在两种关系：*一对多* 和 *多对多*。
- en: 'The relationship between the ‘**Player**’ table and the ‘**Match**’ table is
    many-to-many since a player can participate in numerous matches, and multiple
    players can be involved in a single match. A junction table called ‘**PlayerMatch**’
    bridges this relationship, containing two foreign keys: ‘**player_id**’ (referencing
    the participating player) and ‘**match_id**’ (referencing the corresponding match).'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ‘**Player**’ 表和‘**Match**’ 表之间的关系是多对多的，因为一个玩家可以参与多场比赛，多个玩家可以参与一场比赛。一个名为‘**PlayerMatch**’的连接表桥接了这一关系，包含两个外键：‘**player_id**’（引用参与的玩家）和‘**match_id**’（引用对应的比赛）。
- en: 'This structure ensures the accurate association of players and matches as demonstrated
    in the code below:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 这种结构确保了玩家和比赛的准确关联，如下面的代码所示：
- en: '[PRE0]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A similar logic applies to the ‘**TeamMatch**’ table, which serves as a junction
    between the ‘**Match**’ and ‘**Team**’ tables, allowing multiple teams to play
    one match and one match to involve multiple teams.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 类似的逻辑适用于‘**TeamMatch**’表，该表作为‘**Match**’和‘**Team**’表之间的连接点，允许多个队伍参加一场比赛，并且一场比赛涉及多个队伍。
- en: Separate tables for ‘**PlayerRating**’ and ‘**TeamRating**’ have been designed
    to streamline ranking analysis over time. These tables connect to the ‘**PlayerMatch**’
    and ’**TeamMatch**’ tables respectively through ‘**player_match_id**’ and ‘**team_match_id**’.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简化长期的排名分析，设计了‘**PlayerRating**’和‘**TeamRating**’两个表。这些表分别通过‘**player_match_id**’和‘**team_match_id**’与‘**PlayerMatch**’和‘**TeamMatch**’表连接。
- en: '***Data Integrity***'
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '***数据完整性***'
- en: 'In addition to the use of PKs and FKs, this database model also uses appropriate
    data types and CHECK constraints for data integrity:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用 PKs 和 FKs 之外，这个数据库模型还使用了适当的数据类型和 CHECK 约束以保证数据完整性：
- en: The ‘**winning_team_score**’ and ‘**losing_team_score**’ columns in the ‘**Match**’
    table are integers, preventing non-numeric entries
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ‘**winning_team_score**’ 和 ‘**losing_team_score**’ 列在‘**Match**’表中是整数，防止非数字输入。
- en: CHECK constraints enforce that the ‘**winning_team_score**’ is exactly 11
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CHECK 约束确保‘**winning_team_score**’恰好为 11。
- en: CHECK constraints enforce that the ‘**losing_team_score**’ is between 0 and
    10, adhering to the game rules
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CHECK 约束确保 ‘**losing_team_score**’ 在 0 到 10 之间，符合游戏规则。
- en: As seen in the code chunk below, the use of sequences for each primary key has
    been implemented in the database creation to facilitate data entry. This automation
    simplifies the overall procedure when later using the Python loop for the data
    entry process.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 如下面的代码块所示，为每个主键使用序列已在数据库创建中实现，以便于数据录入。这种自动化简化了后续使用 Python 循环进行数据录入过程的整体流程。
- en: '[PRE1]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Data Processing
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据处理
- en: '*The main challenge was to find a way to process the match data in a sequence
    that would allow for the retrieval of the IDs from the initial data that was being
    processed and inserted into the database.*'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '*主要挑战在于找到一种处理比赛数据的顺序，以便从正在处理并插入数据库的初始数据中检索 ID。*'
- en: These particular IDs could then serve as foreign keys to manage the remaining
    data, creating the necessary relationships in the process. In other words, the
    first step was to identify and store specific data (IDs) from the raw data, and
    then use these IDs as a bridge to link and process the rest of the data.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 这些特定的 ID 随后可以作为外键来管理其余的数据，在过程中创建必要的关系。换句话说，第一步是从原始数据中识别并存储特定数据（ID），然后利用这些 ID
    作为桥梁来连接和处理其余的数据。
- en: The data was processed step by step, using increasingly complex Python loops.
    Each new entry was assigned a unique primary key generated from the table’s sequence.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 数据按步骤处理，使用日益复杂的 Python 循环。每个新条目都被分配一个由表的序列生成的唯一主键。
- en: The first step was to handle the individual players and obtain their IDs.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是处理单个玩家并获取他们的 ID。
- en: Next, teams were processed using the player IDs. For each unique pair of players
    in a match, an entry was created in the ‘**Team**’ table (FK players)
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用玩家 ID 处理团队。对于比赛中的每对独特的玩家，‘**Team**’ 表中创建了一个条目（FK players）。
- en: Following this, matches were handled using the winning and losing team IDs.
    After processing the matches, the ‘**PlayerMatch**’ and ‘**TeamMatch**’ tables
    were addressed by retrieving the corresponding match, player, and team IDs
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 随后，比赛使用胜利和失败的团队 ID 进行处理。处理完比赛后，通过检索相应的比赛、玩家和团队 ID 处理了 ‘**PlayerMatch**’ 和 ‘**TeamMatch**’
    表。
- en: Once all the necessary data had been processed, the ‘**PlayerMatch**’ and ‘**TeamMatch**’
    IDs, along with the ‘**match**’ timestamps, were used in the ‘**PlayerRating**’
    and ’**TeamRating**’ tables to track the evolution of ratings over time.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦所有必要的数据处理完成，‘**PlayerMatch**’ 和 ‘**TeamMatch**’ 的 ID，以及 ‘**match**’ 时间戳被用于
    ‘**PlayerRating**’ 和 ‘**TeamRating**’ 表中，以跟踪评级随时间的变化。
- en: Web Application Development
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Web 应用程序开发
- en: The objective of the web application is to allow users to enter game results,
    verify data, and interact directly with the database. This ensures that the data
    is **up-to-date and offered in real time** so that users are always able to access
    ranking or visualize their metrics.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: Web 应用程序的目标是允许用户输入比赛结果、验证数据，并直接与数据库进行交互。这确保了数据**是最新的并且实时提供**，使用户始终能够访问排名或可视化他们的指标。
- en: Additionally, I wanted to make the web app mobile-friendly, because who would
    want to drag a laptop around to play foosball? That would not be very practical
    or fun.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我还希望使 Web 应用程序适应移动设备，因为谁愿意拖着一台笔记本电脑来玩桌上足球？那既不实用也不有趣。
- en: Technology Stack
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 技术栈
- en: '***Backend***After comparing [Django and Flask](https://testdriven.io/blog/django-vs-flask/),
    two popular web frameworks for building web applications in Python, Flask was
    chosen for its beginner-friendly approach. The Flask web framework is used to
    handle user requests, process data, and interact with the PostgreSQL database.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '***后台*** 在比较了 [Django 和 Flask](https://testdriven.io/blog/django-vs-flask/)
    这两个流行的 Python Web 框架后，选择了 Flask，因为它对初学者更友好。Flask Web 框架用于处理用户请求、处理数据和与 PostgreSQL
    数据库交互。'
- en: '***Frontend*** The frontend consists of static HTML and CSS files, which define
    the structure and styling of the web application. JavaScript is used for form
    validation and handling user interactions. This ensures that the data submitted
    by users is consistent and accurate before being sent to the backend.'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '***前端*** 前端由静态 HTML 和 CSS 文件组成，这些文件定义了 Web 应用程序的结构和样式。JavaScript 用于表单验证和处理用户交互。这确保了用户提交的数据在发送到后台之前是一致和准确的。'
- en: '***Data Visualization*** When it comes to data visualization, the biggest challenge
    is having up-to-date data. To overcome this limitation, the data visualization
    layer uses [Plotly](https://plotly.com), a Python library, to generate interactive
    charts and graphs that visualize player ratings over time. This component receives
    data from the backend, processes it, and presents it to users in a user-friendly
    format.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '***数据可视化*** 在数据可视化方面，最大的挑战是拥有最新的数据。为克服这一限制，数据可视化层使用了[Plotly](https://plotly.com)，这是一个Python库，用于生成互动图表和图形，以可视化玩家的评分变化。此组件从后端接收数据，处理数据，并以用户友好的格式呈现给用户。'
- en: '***Database*** PostgreSQL was used for both the local development environment
    as well as the production environment on AWS, via Heroku. Automatic database backups
    are facilitated by Heroku, ensuring that data is protected and can be easily restored
    if necessary.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '***数据库*** PostgreSQL 被用于本地开发环境以及通过 Heroku 在 AWS 上的生产环境。Heroku 提供自动数据库备份，确保数据得到保护，并且在必要时可以轻松恢复。'
- en: UI/UX Research
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: UI/UX 研究
- en: For the UI/UX design, inspiration was drawn from the modern web designs of Spotify
    and the new Bing search engine. The goal was to create a familiar and intuitive
    user experience.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 对于UI/UX设计，灵感来自于Spotify的现代网页设计和新的Bing搜索引擎。目标是创造一个熟悉且直观的用户体验。
- en: '![](../Images/a6c22777108a8f96b727afe4612f297d.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a6c22777108a8f96b727afe4612f297d.png)'
- en: 'FIGURE VII: Mockup of the Application | Image by the author'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '图 VII: 应用程序的模拟图 | 作者提供的图像'
- en: Application Features
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用程序功能
- en: Let’s dive into the features of the application with a concrete scenario. Team
    1 (Matthieu and Gabriel) wants to play against Team 2 (Wissam and Malik). All
    players have a different rating that is representative of their skill level, shown
    below.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过一个具体的场景来深入了解应用程序的功能。团队1（Matthieu和Gabriel）想与团队2（Wissam和Malik）对战。所有玩家都有不同的评分，代表他们的技能水平，如下所示。
- en: '![](../Images/718fe6e281fd8428954e40a344e564c6.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/718fe6e281fd8428954e40a344e564c6.png)'
- en: Calculate Odds
  id: totrans-141
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 计算概率
- en: The first thing players want to do before any match is to calculate their winning
    probability.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 玩家在任何比赛之前最想做的第一件事是计算他们的获胜概率。
- en: To do so, the “Calculate Odds” view allows users to select four players using
    the drop-down menu and generate the winning probability for the selected teams.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，“计算概率”视图允许用户通过下拉菜单选择四名玩家，并生成所选团队的获胜概率。
- en: '![](../Images/1c411eec63a24dfd4a73462a2d982d4f.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1c411eec63a24dfd4a73462a2d982d4f.png)'
- en: 'FIGURE VIII: Calculate Odds | Image by the author'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '图 VIII: 计算概率 | 作者提供的图像'
- en: This feature is primarily used before a game to verify that a match is balanced
    and to inform players about their winning probability. For example, Team 1 has
    a higher chance of winning (64.19%) than Team 2 who has a 35.81% chance of winning.
    This view informs each player of the stakes and the risk taken.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 这一功能主要在游戏之前使用，以验证比赛是否平衡，并告知玩家他们的获胜概率。例如，团队1的获胜概率为64.19%，而团队2的获胜概率为35.81%。这一视图告知每个玩家赌注和承担的风险。
- en: Once the form is submitted, the application computes only the first part of
    the algorithm, which consists of calculating the expected outcome of a game given
    the four selected players.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦表单提交，应用程序仅计算算法的第一部分，即在给定四个选定玩家的情况下计算游戏的预期结果。
- en: Upload a game
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 上传游戏
- en: The “Upload a Game” view serves the home page of the application. It is designed
    for user convenience, allowing them to upload a game immediately upon opening
    the app.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: “上传游戏”视图作为应用程序的主页。它旨在为用户提供方便，使他们在打开应用程序时能够立即上传游戏。
- en: '![](../Images/512127c1d46a84ea9eb0d7bca7392acf.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/512127c1d46a84ea9eb0d7bca7392acf.png)'
- en: 'FIGURE IX: Upload a Game & Match Uploaded | Image by the author'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '图 IX: 上传游戏 & 匹配上传 | 作者提供的图像'
- en: 'Before the form is submitted, the application performs data validation using
    JavaScript to ensure:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在表单提交之前，应用程序使用JavaScript进行数据验证，以确保：
- en: Four different players are selected
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择了四名不同的玩家
- en: Scores are non-negative integers
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分数为非负整数
- en: There is only one winning team with a score of exactly 11, with no draws allowed
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 只有一个得分恰好为11的获胜团队，不允许平局
- en: When the validation is successful, the application processes the data using
    the full algorithm, updates the corresponding tables in the database, and gives
    users a confirmation of their upload.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 当验证成功时，应用程序使用完整算法处理数据，更新数据库中的相应表，并向用户确认他们的上传。
- en: The “Match Uploaded” view is designed to show users the effect of each match
    on their individual ratings. It calculates the difference between the players’
    ratings before and after the match was uploaded.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: “比赛上传”视图旨在向用户展示每场比赛对其个人评分的影响。它计算了比赛上传前后玩家评分之间的差异。
- en: '*As shown above, the game does not have the same effect on each player’s rating.
    This is because of the individual parameters of the algorithm on each player:
    their expected score, their number of games, their teammate and the opposing team.*'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '*如上所示，每场游戏对每个玩家评分的影响并不相同。这是因为算法对每个玩家的个体参数不同：他们的预期得分、游戏数量、队友和对方队伍。*'
- en: Elo Ranking
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Elo 排名
- en: The “Player Ranking” view allows users to access the real-time monthly ranking
    and compare themselves with other players. Users can see their rating, the number
    of games they played throughout the month, and the last game they played showcasing
    their latest rating.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: “玩家排名”视图允许用户访问实时的月度排名，并与其他玩家进行比较。用户可以看到他们的评分、他们在整个月份中参加的游戏数量以及他们参加的最后一场游戏，展示他们的最新评分。
- en: '![](../Images/d36343a515eb0a860855f525ecd53483.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d36343a515eb0a860855f525ecd53483.png)'
- en: 'FIGURE X: Player Ranking | Image by the author'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '图 X: 玩家排名 | 作者提供的图片'
- en: Once the “Player Ranking” view is accessed or a new period is submitted, the
    application queries the database using a CTE approach.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦访问“玩家排名”视图或提交新时间段，应用程序会使用 CTE 方法查询数据库。
- en: 'This involves joining all necessary tables and displaying the most recent ranking
    update, using the period selector to filter the query:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这涉及到连接所有必要的表格并显示最新的排名更新，使用时间段选择器来筛选查询：
- en: '[PRE2]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Data Visualization
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据可视化
- en: The primary goal in developing this comprehensive solution was to provide users
    with a real-time ranking system that serves as a visual representation of each
    player’s performance.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 开发这个综合解决方案的主要目标是为用户提供一个实时排名系统，作为每位玩家表现的可视化表示。
- en: Although powerful tools like PowerBI and Qlik are available for data visualization,
    a fully mobile-compatible solution was chosen, allowing users to gain real-time
    insights on their devices without incurring licensing fees.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管像 PowerBI 和 Qlik 这样强大的数据可视化工具可供使用，但选择了一个完全兼容移动设备的解决方案，使用户能够在其设备上实时获取洞察，而无需支付许可费用。
- en: 'Two methods were utilized to achieve this:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 实现这一点采用了两种方法：
- en: First, Dash Plotly, a Python framework that enables developers to build interactive,
    data- driven applications on top of Flask applications, was used
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，使用了 Dash Plotly，一个 Python 框架，允许开发者在 Flask 应用程序的基础上构建互动的、数据驱动的应用程序。
- en: Second, various SQL queries and static HTML pages were employed to pull information
    from the database and display it, ensuring that users always have access to real-time
    data
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其次，使用了各种 SQL 查询和静态 HTML 页面来从数据库中提取信息并显示，确保用户始终可以访问实时数据。
- en: Rating Evolution
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 排名演变
- en: This visualization allows players to observe the impact of each game on their
    ranking and to identify broader trends. For example, they can see exactly when
    someone overtakes them or see the impact of consecutive wins or losses.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 这种可视化方式让玩家能够观察每场比赛对其排名的影响，并识别出更广泛的趋势。例如，他们可以准确地看到何时被其他人超越，或者连续的胜利或失败的影响。
- en: '![](../Images/dcd44b67119ab453525c58d4122c9543.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dcd44b67119ab453525c58d4122c9543.png)'
- en: 'FIGURE XI: Rating Evolution | Image by the author'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '图 XI: 排名演变 | 作者提供的图片'
- en: 'When accessing the “Rating Evolution” view, the application performs a query
    on the database for each selected player, retrieving the most recent ranking update
    for each day a game was played:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 当访问“排名演变”视图时，应用程序会对每个选定的玩家在数据库中进行查询，检索每场比赛日的最新排名更新：
- en: '[PRE3]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The retrieved data table is then transformed into a line chart, with the columns
    converted into axes using Dash.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 检索到的数据表会被转换成折线图，列会被转换为轴，使用 Dash 进行展示。
- en: To reduce the database load and simplify the data presentation in the chart,
    only the latest rating update is displayed for each day.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减少数据库负载并简化图表中的数据展示，每天只显示最新的评分更新。
- en: Player Metrics
  id: totrans-180
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 玩家指标
- en: Inspired by Spotify Wrapped, the idea is to provide insights derived from constant
    data collection. While there is immense potential to visualize player insights,
    the focus is on metrics that highlight individual performance and connections
    between players.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 受到 Spotify Wrapped 的启发，目的是提供来自持续数据收集的洞察。虽然有巨大的潜力可视化玩家洞察，但重点是突出个体表现和玩家之间的联系的指标。
- en: '![](../Images/b6886075a078b6595eaaf377ace3928a.png)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b6886075a078b6595eaaf377ace3928a.png)'
- en: 'FIGURE XII: Player Metrics | Image by the author'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 图 XII：玩家指标 | 图片来源于作者
- en: 'These metrics are organized into three color-coded categories: partner, games,
    and rivals, with each metric accompanied by a title, a value, and a sub-measure
    for more detail.'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 这些指标分为三类颜色编码的类别：搭档、比赛和对手，每个指标都附有标题、值和详细的子测量。
- en: '***Game Metrics*** These metrics are centered on the screen and displayed in
    blue for neutrality. They include the total number of games played since data
    collection began.'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '***游戏指标*** 这些指标集中在屏幕中央，以蓝色显示以保持中立。它们包括自数据收集开始以来的总比赛数量。'
- en: '***Partner Metrics*** The partner metrics appear on the left side of the screen.
    They are displayed in green because of their positive connotation.'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '***搭档指标*** 搭档指标显示在屏幕左侧。由于其积极的含义，它们以绿色显示。'
- en: The top box highlights the primary partner with whom the selected player has
    played the most games
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部的框突出了所选玩家最常一起打比赛的主要搭档。
- en: The second metric identifies the player’s best partner. This is defined by the
    highest winning percentage
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二个指标确定了玩家的最佳搭档。这是由最高的胜率定义的。
- en: The third metric in this category is the selected player’s worst partner This
    is calculated based on the lowest win percentage (or highest loss percentage)
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此类别中的第三个指标是所选玩家最差的搭档。这是根据最低的胜率（或最高的败率）计算的。
- en: '***Rival Metrics*** Rival metrics are displayed in red to indicate opposition.
    Rival metrics represent the competitive relationship between players.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '***对手指标*** 对手指标以红色显示以表示对抗。对手指标代表了玩家之间的竞争关系。'
- en: The top box shows the most common opponent, with a sub-metric indicating the
    number of games played together, similar to the partner metrics
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部的框显示了最常见的对手，附有一个子指标，指示一起打过的比赛数量，类似于搭档指标。
- en: The second metric, “Easiest Rival”, represents the opponent against whom the
    player has the highest win rate. This indicates a weaker opponent
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二个指标，“最容易的对手”，表示玩家胜率最高的对手。这表明对手较弱。
- en: The final metric is the player against whom the selected player has the lowest
    win rate. This metric indicates the most difficult opponent
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最终指标是所选玩家胜率最低的对手。此指标表示最困难的对手。
- en: Conclusion
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: 'As I write this, it’s been 6 months that the application has been in use, and
    these are the results so far:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在写这篇文章时，应用程序已经使用了 6 个月，这些是迄今为止的结果：
- en: This ranking system based on the Elo system predicts match results and accurately
    ranks players based on their actual performance
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这个基于 Elo 系统的排名系统可以预测比赛结果，并根据玩家的实际表现准确地排名。
- en: Players have become more competitive, as they are now increasingly aware of
    their performance due to data visualization
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 玩家变得更加竞争激烈，因为他们通过数据可视化越来越了解自己的表现。
- en: Players have become more inclusive thanks to an improved formula that rewards
    players who take risks. Players who wouldn’t normally play together now have the
    incentive to pair up
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于改进的公式奖励冒险的玩家，玩家变得更加包容。那些通常不会一起打球的玩家现在有了配对的动力。
- en: By adopting a data-driven strategy, this project has highlighted the profound
    influence and importance of data.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 通过采用数据驱动的策略，本项目突显了数据的深远影响和重要性。
- en: Going beyond simple analysis of player performance, this project has initiated
    a transformation in the way players approach foosball games and interact with
    other players as well as newcomers. The power of data has truly cultivated a more
    inclusive and competitive environment.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 超越简单的玩家表现分析，本项目发起了玩家在踢足球游戏中与其他玩家及新手互动方式的变革。数据的力量真正培养了一个更具包容性和竞争性的环境。
- en: Thank you for reading this far! I hope you found this article useful. If you
    are interested in reading the full paper, it is available [here](https://www.academia.edu/104818976/CREATING_CONNECTION_THROUGH_COMPETITION_THE_DEVELOPMENT_OF_AN_ELO_BASED_DATA_DRIVEN_RANKING_SYSTEM_FOR_BABY_FOOT).
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢你读到这里！希望你觉得这篇文章有用。如果你有兴趣阅读完整的论文，可以在 [这里](https://www.academia.edu/104818976/CREATING_CONNECTION_THROUGH_COMPETITION_THE_DEVELOPMENT_OF_AN_ELO_BASED_DATA_DRIVEN_RANKING_SYSTEM_FOR_BABY_FOOT)
    找到。
- en: Also, all the code is available on [Github](https://github.com/lkolebka/baby-foot-python.git).
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，所有代码都可以在 [Github](https://github.com/lkolebka/baby-foot-python.git) 上找到。
- en: Feel free to share your thoughts in the comments :)
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎在评论中分享你的想法 :)
