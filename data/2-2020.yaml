- en: The Guide to Recommender Metrics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ¨èç³»ç»ŸæŒ‡æ ‡æŒ‡å—
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/the-guide-to-recommender-metrics-c5d72193ea2b](https://towardsdatascience.com/the-guide-to-recommender-metrics-c5d72193ea2b)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/the-guide-to-recommender-metrics-c5d72193ea2b](https://towardsdatascience.com/the-guide-to-recommender-metrics-c5d72193ea2b)
- en: Evaluating a recommender system offline can be tricky
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¦»çº¿è¯„ä¼°æ¨èç³»ç»Ÿå¯èƒ½æ˜¯æ£˜æ‰‹çš„
- en: '[](https://dr-robert-kuebler.medium.com/?source=post_page-----c5d72193ea2b--------------------------------)[![Dr.
    Robert KÃ¼bler](../Images/3b8d8b88f76c0c43d9c305e3885e7ab9.png)](https://dr-robert-kuebler.medium.com/?source=post_page-----c5d72193ea2b--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c5d72193ea2b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c5d72193ea2b--------------------------------)
    [Dr. Robert KÃ¼bler](https://dr-robert-kuebler.medium.com/?source=post_page-----c5d72193ea2b--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://dr-robert-kuebler.medium.com/?source=post_page-----c5d72193ea2b--------------------------------)[![Dr.
    Robert KÃ¼bler](../Images/3b8d8b88f76c0c43d9c305e3885e7ab9.png)](https://dr-robert-kuebler.medium.com/?source=post_page-----c5d72193ea2b--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c5d72193ea2b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c5d72193ea2b--------------------------------)
    [Dr. Robert KÃ¼bler](https://dr-robert-kuebler.medium.com/?source=post_page-----c5d72193ea2b--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c5d72193ea2b--------------------------------)
    Â·10 min readÂ·Nov 12, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c5d72193ea2b--------------------------------)
    Â·é˜…è¯»æ—¶é—´ 10 åˆ†é’ŸÂ·2023å¹´11æœˆ12æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/a0e23c68bcbb7f9ec133307392f474e1.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a0e23c68bcbb7f9ec133307392f474e1.png)'
- en: Photo by [Darius Cotoi](https://unsplash.com/@dariuscotoi?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Darius Cotoi](https://unsplash.com/@dariuscotoi?utm_source=medium&utm_medium=referral)
    æä¾›ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Think of the YouTube main page, which displays videos that you might like, or
    Amazon which suggests you buy more of the products they sell. These are examples
    of **recommender systems** that try to show the things, you most likely want to
    interact with.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ YouTube ä¸»é¡µé¢ï¼Œå®ƒå±•ç¤ºä½ å¯èƒ½å–œæ¬¢çš„è§†é¢‘ï¼Œæˆ–è€… Amazon æ¨èä½ è´­ä¹°æ›´å¤šä»–ä»¬é”€å”®çš„äº§å“ã€‚è¿™äº›éƒ½æ˜¯**æ¨èç³»ç»Ÿ**çš„ä¾‹å­ï¼Œå®ƒä»¬è¯•å›¾å±•ç¤ºä½ æœ€å¯èƒ½æƒ³è¦äº’åŠ¨çš„å†…å®¹ã€‚
- en: 'Let us assume that you have built a recommender system with a method of your
    choice as well. The question is: how do you evaluate it **offline**, **before
    you put it in production** and let it serve recommendations on a website?'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ä½ ä¹Ÿç”¨ä½ é€‰æ‹©çš„æ–¹æ³•æ„å»ºäº†ä¸€ä¸ªæ¨èç³»ç»Ÿã€‚é—®é¢˜æ˜¯ï¼šå¦‚ä½•**ç¦»çº¿è¯„ä¼°**å®ƒï¼Œ**åœ¨æŠ•å…¥ç”Ÿäº§ä¹‹å‰**å¹¶è®©å®ƒåœ¨ç½‘ç«™ä¸Šæä¾›æ¨èæœåŠ¡ï¼Ÿ
- en: In this article, you will learn exactly that! Additionally, I will tell you
    **why you should be careful** with these metrics.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†ç¡®åˆ‡å­¦åˆ°è¿™äº›ï¼æ­¤å¤–ï¼Œæˆ‘è¿˜ä¼šå‘Šè¯‰ä½ **ä¸ºä»€ä¹ˆä½ éœ€è¦å°å¿ƒ**è¿™äº›æŒ‡æ ‡ã€‚
- en: For a more thorough introduction, please refer to my other article which also
    shows you how to build a recommender system from scratch using TensorFlow.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚éœ€æ›´è¯¦ç»†çš„ä»‹ç»ï¼Œè¯·å‚é˜…æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼Œè¯¥æ–‡ç« è¿˜å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ TensorFlow ä»å¤´æ„å»ºæ¨èç³»ç»Ÿã€‚
- en: '[](/introduction-to-embedding-based-recommender-systems-956faceb1919?source=post_page-----c5d72193ea2b--------------------------------)
    [## Introduction to Embedding-Based Recommender Systems'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/introduction-to-embedding-based-recommender-systems-956faceb1919?source=post_page-----c5d72193ea2b--------------------------------)
    [## åµŒå…¥å¼æ¨èç³»ç»Ÿç®€ä»‹'
- en: Learn to build a simple matrix factorization recommender in TensorFlow
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å­¦ä¹ å¦‚ä½•åœ¨ TensorFlow ä¸­æ„å»ºä¸€ä¸ªç®€å•çš„çŸ©é˜µåˆ†è§£æ¨èç³»ç»Ÿ
- en: towardsdatascience.com](/introduction-to-embedding-based-recommender-systems-956faceb1919?source=post_page-----c5d72193ea2b--------------------------------)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/introduction-to-embedding-based-recommender-systems-956faceb1919?source=post_page-----c5d72193ea2b--------------------------------)
- en: Offline Evaluation of a Recommender
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ¨èç³»ç»Ÿçš„ç¦»çº¿è¯„ä¼°
- en: Let us find a definition for a recommender first that encompasses most systems
    you might design or find in the wild.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¸ºæ¨èç³»ç»Ÿæ‰¾åˆ°ä¸€ä¸ªå®šä¹‰ï¼Œä»¥æ¶µç›–ä½ å¯èƒ½è®¾è®¡æˆ–åœ¨å®é™…ä¸­æ‰¾åˆ°çš„å¤§å¤šæ•°ç³»ç»Ÿã€‚
- en: For us, a recommender is an algorithm that takes at least a user as an input
    and outputs an ordered list of items to recommend to this user.
  id: totrans-17
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¯¹æˆ‘ä»¬è€Œè¨€ï¼Œæ¨èç³»ç»Ÿæ˜¯ä¸€ä¸ªç®—æ³•ï¼Œå®ƒè‡³å°‘ä»¥ç”¨æˆ·ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªæœ‰åºçš„æ¨èé¡¹åˆ—è¡¨ç»™è¯¥ç”¨æˆ·ã€‚
- en: '![](../Images/3acf18e0094ba1625ed777809df9ec49.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3acf18e0094ba1625ed777809df9ec49.png)'
- en: Image by the author.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚
- en: Why *at least* a user? There could be more inputs such as the time of year that
    can help the model learn not to recommend Chocolate Santas in summer.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºä»€ä¹ˆ*è‡³å°‘*è¦æœ‰ä¸€ä¸ªç”¨æˆ·ï¼Ÿå¯èƒ½è¿˜æœ‰æ›´å¤šçš„è¾“å…¥ï¼Œæ¯”å¦‚å­£èŠ‚æ—¶é—´ï¼Œè¿™å¯ä»¥å¸®åŠ©æ¨¡å‹å­¦ä¹ ä¸è¦åœ¨å¤å¤©æ¨èå·§å…‹åŠ›åœ£è¯è€äººã€‚
- en: As an example, a fruit recommender *R* that we have built can do things like
    *R*(Alice) = [apple, orange, cherry].
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ„å»ºçš„æ°´æœæ¨èå™¨*R*å¯ä»¥åšè¯¸å¦‚ *R*(Alice) = [è‹¹æœã€æ©™å­ã€æ¨±æ¡ƒ] è¿™æ ·çš„äº‹æƒ…ã€‚
- en: '***Note:*** *The user could be something else, maybe even another article.
    This could be relevant if you want to build a recommender for* ***alternatives***
    *when some article in your shop is out of stock. So, your recommender takes an
    article as an input and outputs its alternatives. Let us stick with classical
    user-item recommendations, though.*'
  id: totrans-22
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***æ³¨æ„ï¼š*** *ç”¨æˆ·å¯èƒ½æ˜¯å…¶ä»–çš„ä¸œè¥¿ï¼Œç”šè‡³å¯èƒ½æ˜¯å¦ä¸€ç¯‡æ–‡ç« ã€‚å¦‚æœä½ æƒ³ä¸ºå•†åº—é‡Œç¼ºè´§çš„æ–‡ç« æ„å»ºä¸€ä¸ªæ¨èå™¨ï¼Œè¿™å¯èƒ½æ˜¯ç›¸å…³çš„ã€‚æ‰€ä»¥ï¼Œä½ çš„æ¨èå™¨å°†ä¸€ç¯‡æ–‡ç« ä½œä¸ºè¾“å…¥å¹¶è¾“å‡ºå…¶æ›¿ä»£å“ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬è¿˜æ˜¯åšæŒç»å…¸çš„ç”¨æˆ·-ç‰©å“æ¨èã€‚*'
- en: What follows now is a list of offline recommender metrics that you can use to
    assess the quality of your recommender system. I will show you how they are defined,
    and which details to pay attention to when using them.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥æ˜¯ä½ å¯ä»¥ç”¨æ¥è¯„ä¼°æ¨èç³»ç»Ÿè´¨é‡çš„ç¦»çº¿æ¨èæŒ‡æ ‡åˆ—è¡¨ã€‚æˆ‘å°†å‘ä½ å±•ç¤ºå®ƒä»¬çš„å®šä¹‰ä»¥åŠä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çš„ç»†èŠ‚ã€‚
- en: '*Train-test splitting*'
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '*è®­ç»ƒ-æµ‹è¯•åˆ†å‰²*'
- en: 'We will assume that we have done some form of train-test splitting to get meaningful
    metrics. Otherwise, we will only measure the ability of our recommender system
    to overfit. Assume that we have data like this:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†å‡è®¾å·²ç»è¿›è¡Œäº†ä¸€äº›å½¢å¼çš„è®­ç»ƒ-æµ‹è¯•åˆ†å‰²ï¼Œä»¥è·å¾—æœ‰æ„ä¹‰çš„æŒ‡æ ‡ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°†ä»…è¡¡é‡æ¨èç³»ç»Ÿçš„è¿‡æ‹Ÿåˆèƒ½åŠ›ã€‚å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹æ•°æ®ï¼š
- en: '![](../Images/1084ebf74e2131efa5c2916e32ce0d35.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1084ebf74e2131efa5c2916e32ce0d35.png)'
- en: Image by the author.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾åƒã€‚
- en: '**Read:** User **A** bought/watched/listened to item **X** (e.g. movie or song).
    I will go with â€œboughtâ€ for the rest of the article.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '**é˜…è¯»ï¼š** ç”¨æˆ·**A**è´­ä¹°/è§‚çœ‹/æ”¶å¬äº†ç‰©å“**X**ï¼ˆä¾‹å¦‚ç”µå½±æˆ–æ­Œæ›²ï¼‰ã€‚æˆ‘å°†åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ä½¿ç”¨â€œè´­ä¹°â€ã€‚'
- en: There are many options to split, and you should choose one or the other depending
    on the application.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰è®¸å¤šåˆ†å‰²é€‰é¡¹ï¼Œä½ åº”æ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©å…¶ä¸€ã€‚
- en: '**Random split:** You take all rows and randomly split them into train and
    test.'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**éšæœºåˆ†å‰²ï¼š** ä½ å°†æ‰€æœ‰è¡Œéšæœºåˆ†å‰²ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚'
- en: '**Temporal split:** You select a threshold date and put all entries before
    this date into train, and the rest into test.'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**æ—¶é—´åˆ†å‰²ï¼š** ä½ é€‰æ‹©ä¸€ä¸ªé˜ˆå€¼æ—¥æœŸï¼Œå°†æ‰€æœ‰åœ¨æ­¤æ—¥æœŸä¹‹å‰çš„æ¡ç›®æ”¾å…¥è®­ç»ƒé›†ä¸­ï¼Œå…¶ä½™çš„æ”¾å…¥æµ‹è¯•é›†ä¸­ã€‚'
- en: â€¦
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: â€¦
- en: 'Usually, I go for a temporal split, whenever I have a date column because it
    behaves exactly as the model is intended to be used: we **train** a model on **past
    data**, and we want it to **perform well** in the **future**. But think if this
    makes sense in your case as well.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œå½“æˆ‘æœ‰æ—¥æœŸåˆ—æ—¶ï¼Œæˆ‘ä¼šé€‰æ‹©æ—¶é—´åˆ†å‰²ï¼Œå› ä¸ºå®ƒå®Œå…¨ç¬¦åˆæ¨¡å‹çš„é¢„æœŸç”¨é€”ï¼šæˆ‘ä»¬åœ¨**è¿‡å»çš„æ•°æ®**ä¸Š**è®­ç»ƒ**ä¸€ä¸ªæ¨¡å‹ï¼Œå¹¶å¸Œæœ›å®ƒåœ¨**æœªæ¥**è¡¨ç°è‰¯å¥½ã€‚ä¸è¿‡ï¼Œæ€è€ƒä¸€ä¸‹è¿™æ˜¯å¦é€‚åˆä½ çš„æƒ…å†µã€‚
- en: Alright, after we have defined some split let us proceed to the metrics!
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½å§ï¼Œåœ¨å®šä¹‰äº†ä¸€äº›åˆ†å‰²ä¹‹åï¼Œè®©æˆ‘ä»¬ç»§ç»­è¿›è¡ŒæŒ‡æ ‡çš„éƒ¨åˆ†ï¼
- en: Regression Metrics
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å›å½’æŒ‡æ ‡
- en: In the best case, you donâ€™t only have transactional data Ã  la user **A** bought
    item **X**, but even some kind of **explicit** feedback, such as a user rating
    (1â€“5 stars). In this case, you can also let your model **output** not only a list
    of items but also their **predicted rating**. Then you can take any regression
    metric you like, such as the mean squared error or the mean absolute error to
    measure how far your predicted ratings are from the actual ones. This is nothing
    new, hence we leave it at that.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ€ä½³æƒ…å†µä¸‹ï¼Œä½ ä¸ä»…ä¼šæœ‰ç±»ä¼¼äºç”¨æˆ·**A**è´­ä¹°äº†ç‰©å“**X**çš„äº¤æ˜“æ•°æ®ï¼Œè¿˜å¯èƒ½ä¼šæœ‰æŸç§**æ˜ç¡®**çš„åé¦ˆï¼Œä¾‹å¦‚ç”¨æˆ·è¯„åˆ†ï¼ˆ1â€“5æ˜Ÿï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸ä»…å¯ä»¥è®©ä½ çš„æ¨¡å‹**è¾“å‡º**ä¸€ä¸ªç‰©å“åˆ—è¡¨ï¼Œè¿˜å¯ä»¥è¾“å‡ºå®ƒä»¬çš„**é¢„æµ‹è¯„åˆ†**ã€‚ç„¶åï¼Œä½ å¯ä»¥é€‰æ‹©ä»»ä½•å›å½’æŒ‡æ ‡ï¼Œæ¯”å¦‚å‡æ–¹è¯¯å·®æˆ–å¹³å‡ç»å¯¹è¯¯å·®æ¥è¡¡é‡é¢„æµ‹è¯„åˆ†ä¸å®é™…è¯„åˆ†ä¹‹é—´çš„å·®è·ã€‚è¿™æ²¡æœ‰ä»€ä¹ˆæ–°æ„ï¼Œå› æ­¤æˆ‘ä»¬å°±æ­¤æ‰“ä½ã€‚
- en: Alignment Metrics for Recommender Systems From Implicit Feedback
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä»éšå«åé¦ˆä¸­è·å¾—çš„æ¨èç³»ç»Ÿå¯¹é½æŒ‡æ ‡
- en: 'We will assume that we do **not** have any explicit feedback such as a star
    rating, but only implicit feedback such as â€œuser **A** bought item **X**â€ from
    now on. For more information about implicit feedback, check out at least the introduction
    of my other article:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬å°†å‡è®¾æ²¡æœ‰ä»»ä½•æ˜ç¡®çš„åé¦ˆï¼Œä¾‹å¦‚æ˜Ÿçº§è¯„åˆ†ï¼Œåªæœ‰éšå«åé¦ˆï¼Œæ¯”å¦‚â€œç”¨æˆ·**A**è´­ä¹°äº†ç‰©å“**X**â€ã€‚æœ‰å…³éšå«åé¦ˆçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« çš„ä»‹ç»éƒ¨åˆ†ï¼š
- en: '[](/recommender-systems-from-implicit-feedback-using-tensorflow-recommenders-8ba36a976c57?source=post_page-----c5d72193ea2b--------------------------------)
    [## Recommender Systems From Implicit Feedback Using TensorFlow Recommenders'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/recommender-systems-from-implicit-feedback-using-tensorflow-recommenders-8ba36a976c57?source=post_page-----c5d72193ea2b--------------------------------)
    [## ä½¿ç”¨ TensorFlow æ¨èç³»ç»Ÿè¿›è¡Œéšå¼åé¦ˆçš„æ¨èç³»ç»Ÿ'
- en: When customers donâ€™t explicitly tell you what they want
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å½“å®¢æˆ·æ²¡æœ‰æ˜ç¡®å‘Šè¯‰ä½ ä»–ä»¬æƒ³è¦ä»€ä¹ˆæ—¶
- en: towardsdatascience.com](/recommender-systems-from-implicit-feedback-using-tensorflow-recommenders-8ba36a976c57?source=post_page-----c5d72193ea2b--------------------------------)
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '[towardsdatascience.com](/recommender-systems-from-implicit-feedback-using-tensorflow-recommenders-8ba36a976c57?source=post_page-----c5d72193ea2b--------------------------------)'
- en: Preparation
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å‡†å¤‡å·¥ä½œ
- en: 'All the metrics that we will cover work with two ingredients:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†è®¨è®ºçš„æ‰€æœ‰æŒ‡æ ‡éƒ½éœ€è¦ä¸¤ä¸ªè¦ç´ ï¼š
- en: a list of items that a user bought in the **test set**
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç”¨æˆ·åœ¨**æµ‹è¯•é›†**ä¸­è´­ä¹°çš„é¡¹ç›®åˆ—è¡¨
- en: the recommendation list (this is the prediction!) for the same user after training
    the model on the **training set**.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¯¹äºåŒä¸€ç”¨æˆ·ï¼Œåœ¨è®­ç»ƒæ¨¡å‹åï¼Œæ¨èåˆ—è¡¨ï¼ˆè¿™æ˜¯é¢„æµ‹ç»“æœï¼ï¼‰æ˜¯åŸºäº**è®­ç»ƒé›†**çš„ã€‚
- en: The following metrics measure how well these two lists are aligned. Let us see
    how in detail.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æŒ‡æ ‡ç”¨äºè¡¡é‡è¿™ä¸¤ä¸ªåˆ—è¡¨çš„å¯¹é½ç¨‹åº¦ã€‚è®©æˆ‘ä»¬è¯¦ç»†çœ‹çœ‹ã€‚
- en: 'Let us assume that we have only a single user **Alice** for now:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬ç°åœ¨åªæœ‰ä¸€ä¸ªç”¨æˆ·**Alice**ï¼š
- en: 'in the test set, Alice bought the following items: ğŸğŸğŸ‰ğŸŒğŸ’'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨æµ‹è¯•é›†ä¸­ï¼ŒAlice è´­ä¹°äº†ä»¥ä¸‹é¡¹ç›®ï¼šğŸğŸğŸ‰ğŸŒğŸ’
- en: 'The recommender outputs the following: ğŸŒğŸğŸ’ğŸˆğŸ‡ (in this order)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ¨èç³»ç»Ÿè¾“å‡ºå¦‚ä¸‹ï¼šğŸŒğŸğŸ’ğŸˆğŸ‡ï¼ˆæŒ‰ç…§è¿™ä¸ªé¡ºåºï¼‰
- en: 'We call the items that Alice got recommended **and** were bought by her in
    the test set **relevant**. In our case: ğŸŒ and ğŸ’. Items that were suggested but
    not bought by Alice are irrelevant, namely ğŸ, ğŸˆ and ğŸ‡.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°† Alice åœ¨æµ‹è¯•é›†ä¸­è·å¾—æ¨èå¹¶å®é™…è´­ä¹°çš„é¡¹ç›®ç§°ä¸º**ç›¸å…³**ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ï¼šğŸŒ å’Œ ğŸ’ã€‚é‚£äº›è¢«æ¨èä½† Alice æ²¡æœ‰è´­ä¹°çš„é¡¹ç›®æ˜¯ä¸ç›¸å…³çš„ï¼Œå³
    ğŸã€ğŸˆ å’Œ ğŸ‡ã€‚
- en: '*If we have several users, we just compute the following metrics for each single
    user and take the average over all users. Also, we will define a lot of metrics
    with an* ***@*k** *suffix. This only means that we* ***truncate the recommended
    list to* k *articles*** *and then compute the metric.*'
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*å¦‚æœæˆ‘ä»¬æœ‰å¤šä¸ªç”¨æˆ·ï¼Œæˆ‘ä»¬åªéœ€è®¡ç®—æ¯ä¸ªç”¨æˆ·çš„ä»¥ä¸‹æŒ‡æ ‡ï¼Œå¹¶å¯¹æ‰€æœ‰ç”¨æˆ·å–å¹³å‡å€¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†å®šä¹‰è®¸å¤šå¸¦æœ‰* ***@*k** *åç¼€çš„æŒ‡æ ‡ã€‚è¿™ä»…æ„å‘³ç€æˆ‘ä»¬*
    ***å°†æ¨èåˆ—è¡¨æˆªæ–­ä¸º* k *é¡¹*** *ï¼Œç„¶åè®¡ç®—æŒ‡æ ‡ã€‚*'
- en: Precision@k
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Precision@k
- en: 'In words:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æ–‡å­—è¡¨è¿°ï¼š
- en: Out of the top (first) k recommended items, how many % are relevant to Alice?
  id: totrans-54
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åœ¨å‰ (å‰é¢) çš„ k ä¸ªæ¨èé¡¹ç›®ä¸­ï¼Œæœ‰å¤šå°‘ % å¯¹ Alice æ˜¯ç›¸å…³çš„ï¼Ÿ
- en: Let us calculate the precision@3\. In reality, Alice bought ğŸğŸğŸ‰ğŸŒğŸ’, but got suggested
    ğŸŒğŸğŸ’ by the recommender system as the first 3 items. How many of these 3 items
    were relevant? Well, only ğŸŒ and ğŸ’ appeared in the test set, so this makes **precision@3
    = 2/3 â‰ˆ 66,7%**.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬è®¡ç®— precision@3ã€‚å®é™…ä¸Šï¼ŒAlice è´­ä¹°äº† ğŸğŸğŸ‰ğŸŒğŸ’ï¼Œä½†æ¨èç³»ç»Ÿå»ºè®®äº†ğŸŒğŸğŸ’ ä½œä¸ºå‰ä¸‰ä¸ªé¡¹ç›®ã€‚è¿™ä¸‰ä¸ªé¡¹ç›®ä¸­æœ‰å¤šå°‘æ˜¯ç›¸å…³çš„ï¼Ÿå¥½å§ï¼Œåªæœ‰
    ğŸŒ å’Œ ğŸ’ å‡ºç°åœ¨æµ‹è¯•é›†ä¸­ï¼Œå› æ­¤**precision@3 = 2/3 â‰ˆ 66.7%**ã€‚
- en: '**Reminder:** Our recommender suggests Alice ğŸŒğŸğŸ’ğŸˆğŸ‡.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**æé†’ï¼š**æˆ‘ä»¬çš„æ¨èç³»ç»Ÿå‘ Alice æ¨èäº† ğŸŒğŸğŸ’ğŸˆğŸ‡ã€‚'
- en: 'You can calculate precision@*k* for all other *k*â€™s that way: precision@1 =
    1/1, precision@2 = 1/2, precision@4 = 2/4, precision@5 = 2/5\. As a general formula:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥ç”¨è¿™ç§æ–¹å¼è®¡ç®—æ‰€æœ‰å…¶ä»– *k* çš„ precision@*k*ï¼šprecision@1 = 1/1ï¼Œprecision@2 = 1/2ï¼Œprecision@4
    = 2/4ï¼Œprecision@5 = 2/5ã€‚ä¸€èˆ¬å…¬å¼ä¸ºï¼š
- en: '![](../Images/112734e2fa634c6e03508962744f8158.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/112734e2fa634c6e03508962744f8158.png)'
- en: Image by the author.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚
- en: Here, rel*áµ¢* is either 0 or 1, depending on whether the item in position *i*
    of the recommended list is relevant (1) or not (0).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œï¼Œrel*áµ¢* æ˜¯ 0 æˆ– 1ï¼Œå…·ä½“å–å†³äºæ¨èåˆ—è¡¨ä¸­ç¬¬ *i* ä½çš„é¡¹ç›®æ˜¯å¦ç›¸å…³ (1) æˆ–ä¸ç›¸å…³ (0)ã€‚
- en: '*Starting from now, we will work with the reláµ¢ only because then we donâ€™t have
    to keep in mind which of the fruits are relevant and which not. So, we turn ğŸŒğŸğŸ’ğŸˆğŸ‡
    into* ***[1, 0, 1, 0, 0]*** *since ğŸŒ and ğŸ’ are relevant.*'
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬åªå¤„ç† reláµ¢ï¼Œå› ä¸ºè¿™æ ·æˆ‘ä»¬ä¸éœ€è¦è®°ä½å“ªäº›æ°´æœæ˜¯ç›¸å…³çš„ï¼Œå“ªäº›ä¸æ˜¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†ğŸŒğŸğŸ’ğŸˆğŸ‡ è½¬æ¢ä¸º* ***[1, 0, 1, 0,
    0]*** *ï¼Œå› ä¸ºğŸŒ å’Œ ğŸ’ æ˜¯ç›¸å…³çš„ã€‚*'
- en: This metric is straightforward because you only have to count how many items
    were relevant. Still, this metric comes in some flavors. For example, if our recommender
    shows 5 items, but Alice only ever bought 3 in the test set. Then it is impossible
    for the recommender to score 100%, the maximum would be 3/5 = 60%. If you think
    this is unfair, you can adjust the metric by not dividing the sum *k*, but by
    **either *k* or the** **total number of items that Alice bought in the test set**,
    whatever is smaller.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæŒ‡æ ‡å¾ˆç›´æ¥ï¼Œå› ä¸ºä½ åªéœ€è¦è®¡ç®—å¤šå°‘é¡¹ç›®æ˜¯ç›¸å…³çš„ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæŒ‡æ ‡æœ‰ä¸€äº›å˜ä½“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„æ¨èç³»ç»Ÿæ˜¾ç¤ºäº† 5 ä¸ªé¡¹ç›®ï¼Œä½† Alice åœ¨æµ‹è¯•é›†ä¸­åªè´­ä¹°äº†
    3 ä¸ªã€‚ç„¶åæ¨èç³»ç»Ÿæ— æ³•è·å¾— 100% çš„åˆ†æ•°ï¼Œæœ€å¤§å€¼å°†æ˜¯ 3/5 = 60%ã€‚å¦‚æœä½ è§‰å¾—è¿™ä¸å…¬å¹³ï¼Œä½ å¯ä»¥é€šè¿‡ä¸å°†æ€»å’Œé™¤ä»¥ *k*ï¼Œè€Œæ˜¯ **é™¤ä»¥ *k*
    æˆ– Alice åœ¨æµ‹è¯•é›†ä¸­è´­ä¹°çš„æ€»é¡¹ç›®æ•°**ï¼ˆå–è¾ƒå°è€…ï¼‰æ¥è°ƒæ•´æŒ‡æ ‡ã€‚
- en: '![](../Images/a17204ed35b0d6ec2a74b826c2a9c678.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a17204ed35b0d6ec2a74b826c2a9c678.png)'
- en: total = total number of items that Alice bought in the test set.Image by the
    author.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: total = Alice åœ¨æµ‹è¯•é›†ä¸­è´­ä¹°çš„æ€»é¡¹ç›®æ•°ã€‚å›¾åƒç”±ä½œè€…æä¾›ã€‚
- en: '**The disadvantage of precision@*k***: The order of the recommendations is
    ignored. The precision@5 for the recommendations with relevance scores [1, 0,
    1, 0, 0] is the same as for [0, 0, 0, 1, 1], although having the relevant items
    higher in the list is preferable. You also want your relevant search engine result
    to be in the first place and not in the 7th.'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '**precision@*k*** çš„ç¼ºç‚¹ï¼šæ¨èçš„é¡ºåºè¢«å¿½ç•¥ã€‚å¯¹äºç›¸å…³æ€§è¯„åˆ†ä¸º [1, 0, 1, 0, 0] çš„æ¨èï¼Œprecision@5 ä¸ [0,
    0, 0, 1, 1] æ˜¯ä¸€æ ·çš„ï¼Œå°½ç®¡å°†ç›¸å…³é¡¹ç›®æ’åœ¨åˆ—è¡¨å‰é¢æ›´ä¸ºç†æƒ³ã€‚ä½ è¿˜å¸Œæœ›ä½ çš„ç›¸å…³æœç´¢å¼•æ“ç»“æœæ’åœ¨ç¬¬ä¸€ä½ï¼Œè€Œä¸æ˜¯ç¬¬ä¸ƒä½ã€‚'
- en: Recall@*k*
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Recall@*k*
- en: This one is similar to the precision@*k*.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé—®é¢˜ç±»ä¼¼äº precision@*k*ã€‚
- en: Out of all relevant items, how many % were recommended to Alice?
  id: totrans-68
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åœ¨æ‰€æœ‰ç›¸å…³çš„é¡¹ç›®ä¸­ï¼Œæœ‰å¤šå°‘ % è¢«æ¨èç»™äº† Aliceï¼Ÿ
- en: 'Let us compute the recall@2: Alice bought **in total** the 5 items ğŸğŸğŸ‰ğŸŒğŸ’ and
    got recommended *ğŸŒğŸ i*n the first two places*.* Only the single item ğŸŒ was covered
    by our recommender, so recall@2 = 1/5.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬è®¡ç®— recall@2ï¼šAlice **æ€»å…±**è´­ä¹°äº† 5 ä¸ªé¡¹ç›® ğŸğŸğŸ‰ğŸŒğŸ’ï¼Œåœ¨å‰ä¸¤ä¸ªä½ç½®ä¸Šå¾—åˆ°äº†æ¨è *ğŸŒğŸ*ã€‚* åªæœ‰å•ä¸€çš„é¡¹ç›® ğŸŒ è¢«æˆ‘ä»¬çš„æ¨èç³»ç»Ÿè¦†ç›–ï¼Œæ‰€ä»¥
    recall@2 = 1/5ã€‚
- en: 'You can also compute: recall@1 = 1/5, recall@3 = 2/5, recall@4 = 2/5, recall@5
    = 2/5\. In general:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ è¿˜å¯ä»¥è®¡ç®—ï¼šrecall@1 = 1/5ï¼Œrecall@3 = 2/5ï¼Œrecall@4 = 2/5ï¼Œrecall@5 = 2/5ã€‚ä¸€èˆ¬æ¥è¯´ï¼š
- en: '![](../Images/e7c07c03035256d991c1bd513eeb840c.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e7c07c03035256d991c1bd513eeb840c.png)'
- en: total = total number of items that Alice bought in the test set.Image by the
    author.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: total = Alice åœ¨æµ‹è¯•é›†ä¸­è´­ä¹°çš„æ€»é¡¹ç›®æ•°ã€‚å›¾åƒç”±ä½œè€…æä¾›ã€‚
- en: Again, you can argue that this is sometimes unfair. Even a perfect recommender
    cannot cover all of the **total** items if *k* < **total**. For example, the maximum
    value for recall@2 is 2/5, if the first two items are relevant. You can adjust
    it as well, and it turns out that you end up with the same formula as for the
    adjusted precision@*k*.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡ï¼Œä½ å¯ä»¥äº‰è®ºè¿™æœ‰æ—¶æ˜¯ä¸å…¬å¹³çš„ã€‚å³ä½¿æ˜¯å®Œç¾çš„æ¨èç³»ç»Ÿä¹Ÿæ— æ³•è¦†ç›–æ‰€æœ‰çš„ **æ€»å…±** é¡¹ç›®ï¼Œå¦‚æœ *k* < **æ€»æ•°**ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‰ä¸¤ä¸ªé¡¹ç›®æ˜¯ç›¸å…³çš„ï¼Œåˆ™
    recall@2 çš„æœ€å¤§å€¼ä¸º 2/5ã€‚ä½ ä¹Ÿå¯ä»¥è°ƒæ•´å®ƒï¼Œç»“æœå‘ç°ä½ ä¼šå¾—åˆ°ä¸è°ƒæ•´åçš„ precision@*k* ç›¸åŒçš„å…¬å¼ã€‚
- en: '![](../Images/065286e705f662bc6df681de5d0d4213.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/065286e705f662bc6df681de5d0d4213.png)'
- en: Image by the author.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾åƒç”±ä½œè€…æä¾›ã€‚
- en: '**The disadvantage of recall@*k***: The same as before. The order of the recommendations
    is ignored.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '**recall@*k*** çš„ç¼ºç‚¹ï¼šä¸ä¹‹å‰ç›¸åŒã€‚æ¨èçš„é¡ºåºè¢«å¿½ç•¥ã€‚'
- en: NDCG@k
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: NDCG@k
- en: 'This one is a bit tougher because it consists of two parts: **DCG** and **IDCG**.
    But before we start, one piece of information in advance: this one cares about
    the recommendation order! So, let us see how this works:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé—®é¢˜æœ‰ç‚¹å¤æ‚ï¼Œå› ä¸ºå®ƒåŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼š**DCG** å’Œ **IDCG**ã€‚ä½†åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå…ˆæä¾›ä¸€ä¸ªä¿¡æ¯ï¼šè¿™ä¸ªæŒ‡æ ‡å…³æ³¨æ¨èçš„é¡ºåºï¼æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š
- en: '**DCG**: This is short for discounted cumulative gain. It has the formula'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '**DCG**ï¼šè¿™æ˜¯æŠ˜æ‰£ç´¯è®¡å¢ç›Šçš„ç¼©å†™ã€‚å®ƒçš„å…¬å¼æ˜¯'
- en: '![](../Images/6b1a1ad40cc3fd354e87ec8bf0c70d00.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6b1a1ad40cc3fd354e87ec8bf0c70d00.png)'
- en: Image by the author.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾åƒç”±ä½œè€…æä¾›ã€‚
- en: Here, you can see why the recommendation order matters â€” each relevancy term
    rel*áµ¢* gets punished for being further down the list. relâ‚ gets divided by logâ‚‚(2)
    = 1, relâ‚‚ gets divided by logâ‚‚(3) â‰ˆ 1.585, relâ‚ƒ gets divided by logâ‚‚(4) = 2, and
    so on.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆæ¨èé¡ºåºå¾ˆé‡è¦â€”â€”æ¯ä¸ªç›¸å…³æ€§é¡¹ rel*áµ¢* éƒ½å› ä¸ºåœ¨åˆ—è¡¨ä¸­é åè€Œå—åˆ°æƒ©ç½šã€‚relâ‚ è¢«é™¤ä»¥ logâ‚‚(2) = 1ï¼Œrelâ‚‚
    è¢«é™¤ä»¥ logâ‚‚(3) â‰ˆ 1.585ï¼Œrelâ‚ƒ è¢«é™¤ä»¥ logâ‚‚(4) = 2ï¼Œä¾æ­¤ç±»æ¨ã€‚
- en: So the relevant items should better be positioned at the top of the list, where
    the **discounting** (punishment) terms are still low.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œç›¸å…³é¡¹ç›®æœ€å¥½ä½äºåˆ—è¡¨çš„é¡¶éƒ¨ï¼Œé‚£é‡Œçš„ **æŠ˜æ‰£**ï¼ˆæƒ©ç½šï¼‰é¡¹ä»ç„¶è¾ƒä½ã€‚
- en: The problem with this metric alone is that it is unbounded. In our example [1,
    0, 1, 0, 0], the DCG@3 is 1/logâ‚‚(2) + 0/logâ‚‚(3) + 1/logâ‚‚(4) = 1 + 0.5 = 1.5\.
    Thatâ€™s why we will now compute an **upper bound for the DCG** by checking how
    well a perfect recommender would perform.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæŒ‡æ ‡æœ¬èº«çš„é—®é¢˜åœ¨äºå®ƒæ˜¯æ— ç•Œçš„ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­[1, 0, 1, 0, 0]ä¸­ï¼ŒDCG@3æ˜¯1/logâ‚‚(2) + 0/logâ‚‚(3) + 1/logâ‚‚(4)
    = 1 + 0.5 = 1.5ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ç°åœ¨å°†é€šè¿‡æ£€æŸ¥ä¸€ä¸ªå®Œç¾æ¨èç³»ç»Ÿçš„è¡¨ç°æ¥è®¡ç®—**DCGçš„ä¸Šé™**ã€‚
- en: '**IDCG:** This is short for **ideal** discounted cumulative gain. Our recommender
    that outputs a relevancy pattern of [1, 0, 1, 0, 0] is not perfect. A truly **perfect
    recommender** would place all the items that Alice bought in the test set at the
    top of the list, i.e. the relevancy pattern would be [1, 1, 1, 1, 1] since Alice
    bought 5 items.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '**IDCG:** è¿™æ˜¯**ç†æƒ³**æŠ˜æ‰£ç´¯è®¡å¢ç›Šçš„ç¼©å†™ã€‚æˆ‘ä»¬è¾“å‡ºçš„ç›¸å…³æ€§æ¨¡å¼ä¸º[1, 0, 1, 0, 0]çš„æ¨èç³»ç»Ÿå¹¶ä¸å®Œç¾ã€‚ä¸€ä¸ªçœŸæ­£çš„**å®Œç¾æ¨èç³»ç»Ÿ**ä¼šå°†Aliceåœ¨æµ‹è¯•é›†ä¸­è´­ä¹°çš„æ‰€æœ‰é¡¹ç›®æ”¾åœ¨åˆ—è¡¨çš„æœ€ä¸Šé¢ï¼Œå³ç›¸å…³æ€§æ¨¡å¼å°†æ˜¯[1,
    1, 1, 1, 1]ï¼Œå› ä¸ºAliceè´­ä¹°äº†5ä»¶å•†å“ã€‚'
- en: '***Note:*** *If Alice would have bought only 2 items in the test set, a perfect
    recommender would output [1, 1, 0, 0, 0] instead because there are no more relevant
    items to fill the recommendation list.*'
  id: totrans-86
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***å¤‡æ³¨:*** *å¦‚æœAliceåœ¨æµ‹è¯•é›†ä¸­åªè´­ä¹°äº†2ä»¶å•†å“ï¼Œä¸€ä¸ªå®Œç¾çš„æ¨èç³»ç»Ÿå°†è¾“å‡º[1, 1, 0, 0, 0]ï¼Œå› ä¸ºæ²¡æœ‰æ›´å¤šç›¸å…³çš„é¡¹ç›®å¯ä»¥å¡«å……æ¨èåˆ—è¡¨ã€‚*'
- en: So, the DCG cannot be higher than if all 5 recommended items would be relevant
    in our case. We can compute IDCG@3 = 1/logâ‚‚(2) + 1/logâ‚‚(3) + 1/logâ‚‚(4) â‰ˆ 2.131.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼ŒDCGä¸èƒ½é«˜äºæ‰€æœ‰5ä¸ªæ¨èé¡¹ç›®éƒ½ç›¸å…³çš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥è®¡ç®—IDCG@3 = 1/logâ‚‚(2) + 1/logâ‚‚(3) + 1/logâ‚‚(4) â‰ˆ
    2.131ã€‚
- en: '![](../Images/868f4dbe9a58437bc2b2a6979e82c2ce.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/868f4dbe9a58437bc2b2a6979e82c2ce.png)'
- en: Image by the author.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚
- en: '**NDCG**: Finally, we can define the **normalized** discounted cumulative gain
    NDCG@*k* as'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '**NDCG**: æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰**æ ‡å‡†åŒ–**æŠ˜æ‰£ç´¯è®¡å¢ç›ŠNDCG@*k*ä¸º'
- en: '![](../Images/cd33b1c0af482fe870a947eb4a39b630.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cd33b1c0af482fe870a947eb4a39b630.png)'
- en: So, in our case, NDCG@3 = DCG@3 / IDCG@3 â‰ˆ 1.5 / 2.131 â‰ˆ **0.704**.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼ŒNDCG@3 = DCG@3 / IDCG@3 â‰ˆ 1.5 / 2.131 â‰ˆ **0.704**ã€‚
- en: We can test what happens if we make our recommender worse, for example, if the
    relevancy pattern would be [0, 1, 1] . Then the DCG@3 is 0/logâ‚‚(2) + 1/logâ‚‚(3)
    + 1/logâ‚‚(4) â‰ˆ 1.131 and the NDCG@3 â‰ˆ 1.131 / 2.131 â‰ˆ 0.531 < 0.704.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹å¦‚æœæˆ‘ä»¬çš„æ¨èç³»ç»Ÿå˜å¾—æ›´å·®ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œä¾‹å¦‚ï¼Œå¦‚æœç›¸å…³æ€§æ¨¡å¼ä¸º[0, 1, 1]ã€‚é‚£ä¹ˆDCG@3æ˜¯0/logâ‚‚(2) + 1/logâ‚‚(3)
    + 1/logâ‚‚(4) â‰ˆ 1.131ï¼ŒNDCG@3 â‰ˆ 1.131 / 2.131 â‰ˆ 0.531 < 0.704ã€‚
- en: Discussion & Conclusion
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è®¨è®ºä¸ç»“è®º
- en: '![](../Images/9bd83022523ae67ab5860803d147b8a2.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9bd83022523ae67ab5860803d147b8a2.png)'
- en: Photo by [ANIRUDH](https://unsplash.com/@lanirudhreddy?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ANIRUDH](https://unsplash.com/@lanirudhreddy?utm_source=medium&utm_medium=referral)æä¾›ï¼Œæ¥æºäº[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: 'Okay, great, we have discussed some common metrics. We have also seen how these
    metrics measure how good a ranking output by a recommender matches items that
    a user bought. However, please ask yourself:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½çš„ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºäº†ä¸€äº›å¸¸è§çš„æŒ‡æ ‡ã€‚æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†è¿™äº›æŒ‡æ ‡å¦‚ä½•è¡¡é‡æ¨èç³»ç»Ÿè¾“å‡ºçš„æ’åä¸ç”¨æˆ·è´­ä¹°çš„é¡¹ç›®çš„åŒ¹é…ç¨‹åº¦ã€‚ç„¶è€Œï¼Œè¯·ä½ æ€è€ƒä¸€ä¸‹ï¼š
- en: Is this really what we want?
  id: totrans-98
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è¿™çœŸçš„æ˜¯æˆ‘ä»¬æƒ³è¦çš„å—ï¼Ÿ
- en: After all, the users have bought these items already, even **without the help
    of our recommender** (since we are developing it right now!). So, we basically
    measure how well our recommender can show the things that the customers would
    buy anyway.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯•ç«Ÿï¼Œç”¨æˆ·å·²ç»è´­ä¹°äº†è¿™äº›é¡¹ç›®ï¼Œå³ä½¿**æ²¡æœ‰æˆ‘ä»¬æ¨èç³»ç»Ÿçš„å¸®åŠ©**ï¼ˆå› ä¸ºæˆ‘ä»¬ç°åœ¨æ‰åœ¨å¼€å‘å®ƒï¼ï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è¡¡é‡æˆ‘ä»¬çš„æ¨èç³»ç»Ÿèƒ½å¤Ÿå±•ç¤ºå®¢æˆ·æœ¬æ¥ä¼šè´­ä¹°çš„å•†å“çš„èƒ½åŠ›ã€‚
- en: It might be that the *interaction rate* (share of people who click on it) of
    our recommender increases when we use it in production. But I am not sure if this
    is a win since chances are that they would have bought a lot of these items anyway.
    Maybe we just provided them with a shortcut on a start page. This is not a bad
    thing because it might translate into higher customer satisfaction, which can
    be good for other goals. But it might not have the big impact on revenue that
    you want it to have.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: å¯èƒ½æˆ‘ä»¬çš„æ¨èç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶*äº’åŠ¨ç‡*ï¼ˆç‚¹å‡»å®ƒçš„äººçš„æ¯”ä¾‹ï¼‰ä¼šå¢åŠ ã€‚ä½†æˆ‘ä¸ç¡®å®šè¿™æ˜¯å¦æ˜¯ä¸€ä¸ªæˆåŠŸçš„æ ‡å¿—ï¼Œå› ä¸ºä»–ä»¬å¯èƒ½æœ¬æ¥å°±ä¼šè´­ä¹°å¾ˆå¤šè¿™äº›å•†å“ã€‚ä¹Ÿè®¸æˆ‘ä»¬åªæ˜¯ç»™ä»–ä»¬æä¾›äº†ä¸€ä¸ªåœ¨å¼€å§‹é¡µé¢ä¸Šçš„å¿«æ·æ–¹å¼ã€‚è¿™å¹¶ä¸æ˜¯åäº‹ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šè½¬åŒ–ä¸ºæ›´é«˜çš„å®¢æˆ·æ»¡æ„åº¦ï¼Œè¿™å¯¹å…¶ä»–ç›®æ ‡å¯èƒ½æœ‰å¥½å¤„ã€‚ä½†å®ƒå¯èƒ½ä¸ä¼šå¯¹æ”¶å…¥äº§ç”Ÿä½ å¸Œæœ›çš„é‡å¤§å½±å“ã€‚
- en: To increase revenue â€” which is often your ultimate goal â€” maybe it makes more
    sense to show items to the users that they would not buy on their own. But this
    is hard to measure offline. You have to implement a recommender and then test
    it **online**, so you can see what your customers really want.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å¢åŠ æ”¶å…¥â€”â€”è¿™é€šå¸¸æ˜¯ä½ çš„**ç»ˆæç›®æ ‡**â€”â€”ä¹Ÿè®¸è®©ç”¨æˆ·çœ‹åˆ°ä»–ä»¬è‡ªå·±ä¸ä¼šè´­ä¹°çš„å•†å“æ›´æœ‰æ„ä¹‰ã€‚ä½†è¿™åœ¨ç¦»çº¿ç¯å¢ƒä¸­å¾ˆéš¾è¡¡é‡ã€‚ä½ éœ€è¦å®ç°ä¸€ä¸ªæ¨èç³»ç»Ÿï¼Œç„¶ååœ¨**åœ¨çº¿**ç¯å¢ƒä¸­æµ‹è¯•å®ƒï¼Œè¿™æ ·ä½ æ‰èƒ½çœ‹åˆ°ä½ çš„å®¢æˆ·çœŸæ­£æƒ³è¦ä»€ä¹ˆã€‚
- en: As an example, you could test a recommender with a **high diversity**, i.e.,
    a recommender that shows items from different categories. Or do you think it is
    always wise to show 100% comedies to someone on Netflix, even if this person likes
    comedies? Maybe it makes sense to show different genres as well.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥æµ‹è¯•ä¸€ä¸ª**é«˜å¤šæ ·æ€§**çš„æ¨èç³»ç»Ÿï¼Œå³ä¸€ä¸ªæ˜¾ç¤ºæ¥è‡ªä¸åŒç±»åˆ«å•†å“çš„æ¨èç³»ç»Ÿã€‚æˆ–è€…ï¼Œä½ è®¤ä¸ºæ€»æ˜¯æ˜æ™ºçš„åœ¨Netflixä¸Šå‘å–œæ¬¢å–œå‰§çš„äººæ¨è100%çš„å–œå‰§å—ï¼Ÿä¹Ÿè®¸æ¨èä¸åŒçš„ç±»å‹ä¹Ÿæœ‰æ„ä¹‰ã€‚
- en: But, as I said, that is what you have to test online using **A/B tests**. Maybe
    your users like to be recommended the things that they buy anyway, but maybe not.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£å¦‚æˆ‘æ‰€è¯´çš„ï¼Œä½ å¿…é¡»ä½¿ç”¨**A/B æµ‹è¯•**åœ¨åœ¨çº¿ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•ã€‚ä¹Ÿè®¸ä½ çš„ç”¨æˆ·å–œæ¬¢è¢«æ¨èä»–ä»¬æœ¬æ¥ä¼šè´­ä¹°çš„ä¸œè¥¿ï¼Œä½†ä¹Ÿå¯èƒ½ä¸æ˜¯è¿™æ ·ã€‚
- en: Donâ€™t guess, just test.
  id: totrans-104
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä¸è¦çŒœæµ‹ï¼Œåªè¦æµ‹è¯•ã€‚
- en: '**In the best case, you can observe a correlation between one of your offline
    metrics with the online KPI you care about. Then it makes sense to optimize for
    this offline metric. But if you donâ€™t have this correlation, be careful when throwing
    away a model just because its NDCG is lower than another modelâ€™s NDCG.**'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '**åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥è§‚å¯Ÿåˆ°ä½ çš„æŸä¸€ä¸ªç¦»çº¿æŒ‡æ ‡ä¸åœ¨çº¿KPIä¹‹é—´çš„ç›¸å…³æ€§ã€‚ç„¶åä¼˜åŒ–è¿™ä¸ªç¦»çº¿æŒ‡æ ‡æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æ²¡æœ‰è¿™ç§ç›¸å…³æ€§ï¼Œä¸¢å¼ƒä¸€ä¸ªæ¨¡å‹åªæ˜¯å› ä¸ºå®ƒçš„NDCGä½äºå¦ä¸€ä¸ªæ¨¡å‹çš„NDCGæ—¶è¦å°å¿ƒã€‚**'
- en: I hope that you learned something new, interesting, and valuable today. Thanks
    for reading!
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å¸Œæœ›ä½ ä»Šå¤©å­¦åˆ°äº†ä¸€äº›æ–°çš„ã€æœ‰è¶£çš„ã€æœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚æ„Ÿè°¢é˜…è¯»ï¼
- en: '*If you have any questions, write me on* [*LinkedIn*](https://www.linkedin.com/in/dr-robert-k%C3%BCbler-983859150/)*!*'
  id: totrans-107
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥åœ¨* [*LinkedIn*](https://www.linkedin.com/in/dr-robert-k%C3%BCbler-983859150/)*ä¸Šè”ç³»æˆ‘ï¼*'
- en: And if you want to dive deeper into the world of algorithms, give my new publication
    **All About Algorithms** a try! Iâ€™m still searching for writers!
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°äº†è§£ç®—æ³•çš„ä¸–ç•Œï¼Œå¯ä»¥è¯•è¯•æˆ‘çš„æ–°å‡ºç‰ˆç‰©**å…³äºç®—æ³•çš„ä¸€åˆ‡**ï¼æˆ‘ä»åœ¨å¯»æ‰¾ä½œè€…ï¼
- en: '[](https://medium.com/all-about-algorithms?source=post_page-----c5d72193ea2b--------------------------------)
    [## All About Algorithms'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/all-about-algorithms?source=post_page-----c5d72193ea2b--------------------------------)
    [## å…³äºç®—æ³•çš„ä¸€åˆ‡'
- en: From intuitive explanations to in-depth analysis, algorithms come to life with
    examples, code, and awesomeâ€¦
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ä»ç›´è§‚çš„è§£é‡Šåˆ°æ·±å…¥çš„åˆ†æï¼Œç®—æ³•é€šè¿‡ç¤ºä¾‹ã€ä»£ç å’Œç²¾å½©çš„å†…å®¹å˜å¾—ç”ŸåŠ¨ã€‚
- en: medium.com](https://medium.com/all-about-algorithms?source=post_page-----c5d72193ea2b--------------------------------)
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: medium.com](https://medium.com/all-about-algorithms?source=post_page-----c5d72193ea2b--------------------------------)
