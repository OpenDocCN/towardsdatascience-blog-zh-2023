- en: Compute the Distance Matrix of a Set of Sites from Their Coordinates in Python
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è®¡ç®—ä¸€ç»„åœ°ç‚¹åæ ‡çš„è·ç¦»çŸ©é˜µï¼ˆPythonå®ç°ï¼‰
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=collection_archive---------0-----------------------#2023-07-16](https://towardsdatascience.com/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=collection_archive---------0-----------------------#2023-07-16)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=collection_archive---------0-----------------------#2023-07-16](https://towardsdatascience.com/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=collection_archive---------0-----------------------#2023-07-16)
- en: Easily estimate the distance between any pair of sites from their geographical
    coordinates as a stepping stone to solving general routing problems
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è½»æ¾ä¼°ç®—ä»»æ„ä¸€å¯¹åœ°ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œä½œä¸ºè§£å†³ä¸€èˆ¬è·¯ç”±é—®é¢˜çš„èµ·ç‚¹
- en: '[](https://medium.com/@carlosjuribe?source=post_page-----d5fc92a0ba9e--------------------------------)[![Carlos
    J. Uribe](../Images/902c5f4ac5d404dd99916f145be6756c.png)](https://medium.com/@carlosjuribe?source=post_page-----d5fc92a0ba9e--------------------------------)[](https://towardsdatascience.com/?source=post_page-----d5fc92a0ba9e--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----d5fc92a0ba9e--------------------------------)
    [Carlos J. Uribe](https://medium.com/@carlosjuribe?source=post_page-----d5fc92a0ba9e--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@carlosjuribe?source=post_page-----d5fc92a0ba9e--------------------------------)[![Carlos
    J. Uribe](../Images/902c5f4ac5d404dd99916f145be6756c.png)](https://medium.com/@carlosjuribe?source=post_page-----d5fc92a0ba9e--------------------------------)[](https://towardsdatascience.com/?source=post_page-----d5fc92a0ba9e--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----d5fc92a0ba9e--------------------------------)
    [Carlos J. Uribe](https://medium.com/@carlosjuribe?source=post_page-----d5fc92a0ba9e--------------------------------)'
- en: Â·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4337eddb94ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcompute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e&user=Carlos+J.+Uribe&userId=4337eddb94ed&source=post_page-4337eddb94ed----d5fc92a0ba9e---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----d5fc92a0ba9e--------------------------------)
    Â·13 min readÂ·Jul 16, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd5fc92a0ba9e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcompute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e&user=Carlos+J.+Uribe&userId=4337eddb94ed&source=-----d5fc92a0ba9e---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[å…³æ³¨](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4337eddb94ed&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcompute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e&user=Carlos+J.+Uribe&userId=4337eddb94ed&source=post_page-4337eddb94ed----d5fc92a0ba9e---------------------post_header-----------)
    å‘è¡¨åœ¨ [Towards Data Science](https://towardsdatascience.com/?source=post_page-----d5fc92a0ba9e--------------------------------)
    Â·13åˆ†é’Ÿé˜…è¯»Â·2023å¹´7æœˆ16æ—¥[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fd5fc92a0ba9e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcompute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e&user=Carlos+J.+Uribe&userId=4337eddb94ed&source=-----d5fc92a0ba9e---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd5fc92a0ba9e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcompute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e&source=-----d5fc92a0ba9e---------------------bookmark_footer-----------)![](../Images/871f751c51440a309a64ceac1dc53e26.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fd5fc92a0ba9e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcompute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e&source=-----d5fc92a0ba9e---------------------bookmark_footer-----------)![](../Images/871f751c51440a309a64ceac1dc53e26.png)'
- en: 'Image generated by DALLÂ·E 3 with authorâ€™s prompt: â€œan image of a network of
    cities on top of a map where each city is connected to all other citiesâ€'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±DALLÂ·E 3ç”Ÿæˆçš„å›¾åƒï¼Œä½œè€…çš„æç¤ºï¼šâ€œä¸€å¼ åŸå¸‚ç½‘ç»œçš„åœ°å›¾ï¼Œæ¯ä¸ªåŸå¸‚éƒ½è¿æ¥åˆ°å…¶ä»–æ‰€æœ‰åŸå¸‚â€
- en: '*ğŸ‘ï¸* **This is article #4 of the series covering the project â€œ**[**An Intelligent
    Decision Support System for Tourism in Python**](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236)**â€,**
    I encourage you to check it out to get a general overview of the whole project.
    If youâ€™re only interested in creating distance matrices, this article is all you
    need, itâ€™s self-contained. If you also want to apply the distance matrix to practical
    problems, the series will be of interest to you.'
  id: totrans-9
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ‘ï¸* **è¿™æ˜¯å…³äºâ€œ**[**Pythonä¸­çš„æ™ºèƒ½å†³ç­–æ”¯æŒç³»ç»Ÿ**](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236)**â€é¡¹ç›®çš„ç¬¬4ç¯‡æ–‡ç« ï¼Œ**
    æˆ‘é¼“åŠ±ä½ æŸ¥çœ‹ä¸€ä¸‹ï¼Œä»¥è·å–æ•´ä¸ªé¡¹ç›®çš„ä¸€èˆ¬æ¦‚è¿°ã€‚å¦‚æœä½ åªå¯¹åˆ›å»ºè·ç¦»çŸ©é˜µæ„Ÿå…´è¶£ï¼Œè¿™ç¯‡æ–‡ç« å·²ç»è¶³å¤Ÿï¼Œå®ƒæ˜¯è‡ªåŒ…å«çš„ã€‚å¦‚æœä½ è¿˜æƒ³å°†è·ç¦»çŸ©é˜µåº”ç”¨äºå®é™…é—®é¢˜ï¼Œè¿™ä¸ªç³»åˆ—å°†å¯¹ä½ æœ‰å…´è¶£ã€‚'
- en: 'The present article continues our journey right where [sprint 3](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c)
    left off: the building of an optimization model for the Traveling Salesman Problem,
    *given a fixed set of places to visit* and their pair-wise distances. In sprint
    4, we take a brief detour from modeling and **develop a class with geospatial
    functionality** that will be very handy when we attempt to solve **general** Traveling
    Salesman Problems, *i.e.,* problemsfor arbitrary sites for which we may not have
    distance data readily available. We stated this â€œrequirementâ€ in the previous
    sprint, and weâ€™ll build a subsystem to satisfy it in this one.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡å°†ç»§ç»­ä»[sprint 3](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c)çš„æœ€åä¸€ä¸ªåœ°æ–¹å¼€å§‹ï¼šä¸ºæ—…è¡Œå•†é—®é¢˜æ„å»ºä¼˜åŒ–æ¨¡å‹ï¼Œ*åœ¨ç»™å®šå›ºå®šè®¿é—®åœ°ç‚¹*åŠå…¶å¯¹ä¹‹é—´çš„è·ç¦»çš„æƒ…å†µä¸‹ã€‚åœ¨ç¬¬4è½®ä¸­ï¼Œæˆ‘ä»¬å°†æš‚æ—¶ä»å»ºæ¨¡ä¸­ç»•å¼€ï¼Œ**å¼€å‘ä¸€ä¸ªå…·æœ‰åœ°ç†ç©ºé—´åŠŸèƒ½çš„ç±»**ï¼Œè¿™å°†åœ¨æˆ‘ä»¬å°è¯•è§£å†³**ä¸€èˆ¬æ€§**æ—…è¡Œå•†é—®é¢˜æ—¶éå¸¸æœ‰ç”¨ï¼Œå³å¯¹äºä»»æ„ä½ç½®æˆ‘ä»¬å¯èƒ½æ²¡æœ‰ç°æˆçš„è·ç¦»æ•°æ®çš„é—®é¢˜ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€è½®ä¸­æå‡ºäº†è¿™ä¸ªâ€œéœ€æ±‚â€ï¼Œå°†åœ¨è¿™ä¸€è½®ä¸­æ„å»ºä¸€ä¸ªå­ç³»ç»Ÿæ¥æ»¡è¶³å®ƒã€‚
- en: Table of contents
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç›®å½•
- en: '[1\. Previous sprint recap](#3457)'
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[1. ä¸Šä¸€è½®è¿­ä»£å›é¡¾](#3457)'
- en: '[2\. Reading the input data](#d4c6)'
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[2. è¯»å–è¾“å…¥æ•°æ®](#d4c6)'
- en: '[3\. Creating a distance matrix from location data](#4a0e)'
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[3. ä»ä½ç½®æ•°æ®åˆ›å»ºè·ç¦»çŸ©é˜µ](#4a0e)'
- en: '[3.1\. Should I go the extra mile to gain an extra yard?](#4a07)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.1. æˆ‘æ˜¯å¦éœ€è¦ä»˜å‡ºé¢å¤–çš„åŠªåŠ›æ¥è·å¾—é¢å¤–çš„è¿›å±•ï¼Ÿ](#4a07)'
- en: '[3.2\. Geolocation utilities with](#8bc3) `[geopy](#8bc3)`'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.2. å¸¦æœ‰çš„åœ°ç†å®šä½å·¥å…·](#8bc3) `[geopy](#8bc3)`'
- en: '[3.3\. Getting to the points](#f713)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.3. åˆ°è¾¾è¦ç‚¹](#f713)'
- en: '[3.4\. From coordinates to distance matrix](#6590)'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.4. ä»åæ ‡åˆ°è·ç¦»çŸ©é˜µ](#6590)'
- en: '[4\. Wrap it up! (inside a class)](#8f29)'
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[4. å®Œæˆï¼ï¼ˆç±»å†…éƒ¨ï¼‰](#8f29)'
- en: '[4.1\.](#a881) `[GeoAnalyzer](#a881)` [class design](#a881)'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[4.1.](#a881) `[GeoAnalyzer](#a881)` [ç±»è®¾è®¡](#a881)'
- en: '[4.2\. Class usage demo](#8c36)'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[4.2. ç±»ä½¿ç”¨æ¼”ç¤º](#8c36)'
- en: '[5\. Conclusion (or planning for next sprint)](#ef0c)'
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[5. ç»“è®ºï¼ˆæˆ–è§„åˆ’ä¸‹ä¸€è½®è¿­ä»£ï¼‰](#ef0c)'
- en: 1\. Previous sprint recap
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1. ä¸Šä¸€è½®è¿­ä»£å›é¡¾
- en: 'In the previous article, the one of [sprint 3](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c),
    we carried out a proof-of-concept whereby we demonstrated that we can solve the
    [Traveling Salesman Problem](https://en.wikipedia.org/wiki/Travelling_salesman_problem)
    (TSP) for a list of sites, *provided we had the distances between each possible
    pair of sites*, as a distance matrix:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œå³[sprint 3](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c)ï¼Œæˆ‘ä»¬è¿›è¡Œäº†æ¦‚å¿µéªŒè¯ï¼Œå±•ç¤ºäº†æˆ‘ä»¬å¯ä»¥è§£å†³[æ—…è¡Œå•†é—®é¢˜](https://en.wikipedia.org/wiki/Travelling_salesman_problem)ï¼ˆTSPï¼‰å¯¹äºä¸€ç»„ç«™ç‚¹ï¼Œ*å‰ææ˜¯æˆ‘ä»¬æ‹¥æœ‰æ¯ä¸€å¯¹ç«™ç‚¹ä¹‹é—´çš„è·ç¦»*ï¼Œä½œä¸ºè·ç¦»çŸ©é˜µï¼š
- en: '[](/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c?source=post_page-----d5fc92a0ba9e--------------------------------)
    [## Implementing, solving and visualizing the Traveling Salesman Problem with
    Python'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c?source=post_page-----d5fc92a0ba9e--------------------------------)
    [## ç”¨Pythonå®ç°ã€è§£å†³å’Œå¯è§†åŒ–æ—…è¡Œå•†é—®é¢˜'
- en: Learn how to translate an optimization model from Math to Python, optimize it,
    and visualize the solution to gain quickâ€¦
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å­¦ä¹ å¦‚ä½•å°†ä¼˜åŒ–æ¨¡å‹ä»æ•°å­¦ç¿»è¯‘åˆ°Pythonï¼Œä¼˜åŒ–å®ƒï¼Œå¹¶å¯è§†åŒ–è§£å†³æ–¹æ¡ˆä»¥å¿«é€Ÿè·å¾—ç»“æœâ€¦
- en: towardsdatascience.com](/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c?source=post_page-----d5fc92a0ba9e--------------------------------)
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c?source=post_page-----d5fc92a0ba9e--------------------------------)
- en: We considered the distance matrix as given because, at that stage of development,
    the focus was on *model building*, not *data acquisition*. But once the model
    was ready and worked fine for our fixed set of locations, we quickly realized
    **we needed a way to** **solve general TSP problems** (problems for arbitrary
    sets of sites). This generalization is required to create a truly useful MVP.
    As such, we concluded the natural next step is to find a way to **automatically
    obtain a distance matrix from the coordinates of our sites of interest**, a step
    that weâ€™ll cover in this article.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†è·ç¦»çŸ©é˜µè§†ä¸ºå·²ç»™å®šï¼Œå› ä¸ºåœ¨é‚£ä¸ªå¼€å‘é˜¶æ®µï¼Œé‡ç‚¹æ˜¯*æ¨¡å‹æ„å»º*ï¼Œè€Œä¸æ˜¯*æ•°æ®è·å–*ã€‚ä½†æ˜¯ä¸€æ—¦æ¨¡å‹å‡†å¤‡å¥½å¹¶ä¸”åœ¨æˆ‘ä»¬çš„å›ºå®šåœ°ç‚¹é›†ä¸Šè¿è¡Œè‰¯å¥½ï¼Œæˆ‘ä»¬å¾ˆå¿«æ„è¯†åˆ°**æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥**
    **è§£å†³ä¸€èˆ¬çš„TSPé—®é¢˜**ï¼ˆä»»æ„åœ°ç‚¹é›†çš„é—®é¢˜ï¼‰ã€‚è¿™ç§æ³›åŒ–æ˜¯åˆ›å»ºçœŸæ­£æœ‰ç”¨çš„MVPæ‰€å¿…éœ€çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾—å‡ºçš„è‡ªç„¶ä¸‹ä¸€æ­¥æ˜¯æ‰¾åˆ°ä¸€ç§**è‡ªåŠ¨ä»æˆ‘ä»¬å…´è¶£ç‚¹çš„åæ ‡ä¸­è·å–è·ç¦»çŸ©é˜µ**çš„æ–¹æ³•ï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­è®¨è®ºã€‚
- en: 'In doing so, our **new basic input** will be much simpler and natural, just
    the geographical coordinates of the sites we want to visit:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ ·åšï¼Œæˆ‘ä»¬çš„**æ–°åŸºæœ¬è¾“å…¥**å°†ä¼šç®€å•è‡ªç„¶å¾—å¤šï¼Œåªéœ€æä¾›æˆ‘ä»¬æƒ³è¦è®¿é—®åœ°ç‚¹çš„åœ°ç†åæ ‡ï¼š
- en: '![](../Images/59ec3de04074a9813170b50ccf7fed83.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/59ec3de04074a9813170b50ccf7fed83.png)'
- en: '**Figure 1.** Coordinates of the sites of interest. (Image by author)'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 1.** å…´è¶£ç‚¹çš„åæ ‡ã€‚ ï¼ˆå›¾åƒç”±ä½œè€…æä¾›ï¼‰'
- en: 'and the output will be the dataframe we used as input for the TSP model, the
    distance matrix for the input sites:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: è¾“å‡ºå°†æ˜¯æˆ‘ä»¬ç”¨ä½œTSPæ¨¡å‹è¾“å…¥çš„æ•°æ®æ¡†ï¼Œå³è¾“å…¥åœ°ç‚¹çš„è·ç¦»çŸ©é˜µï¼š
- en: '![](../Images/18f610b518e1fed4161c761c29896bb7.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/18f610b518e1fed4161c761c29896bb7.png)'
- en: '**Figure 2.** Desired distance matrix for a given set of sites. (Image by author)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 2.** ç»™å®šä¸€ç»„åœ°ç‚¹çš„æœŸæœ›è·ç¦»çŸ©é˜µã€‚ ï¼ˆå›¾åƒç”±ä½œè€…æä¾›ï¼‰'
- en: For consistency, weâ€™ll use the same Paris sites we have considered so far. In
    the [next article](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9),
    weâ€™ll integrate this functionality with the optimization model of the Traveling
    Salesman Problem, arriving at a more versatile MVP.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åˆ°ç›®å‰ä¸ºæ­¢è€ƒè™‘çš„ç›¸åŒå·´é»åœ°ç‚¹ã€‚åœ¨[ä¸‹ä¸€ç¯‡æ–‡ç« ](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9)ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠè¿™ä¸ªåŠŸèƒ½ä¸æ—…è¡Œé”€å”®å‘˜é—®é¢˜çš„ä¼˜åŒ–æ¨¡å‹é›†æˆï¼Œå¾—åˆ°ä¸€ä¸ªæ›´å…·å¤šåŠŸèƒ½æ€§çš„MVPã€‚
- en: '***ğŸ¯******Keeping the final goal in mind***'
  id: totrans-36
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***ğŸ¯******ç‰¢è®°æœ€ç»ˆç›®æ ‡***'
- en: ''
  id: totrans-37
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*Letâ€™s take a step back and briefly recapitulate why weâ€™re doing this. The
    original real-life problem we are aspiring to solve is what we can call the* ***Traveling
    Tourist Problem*** *(TTP), that is, the problem of creating* ***optimal trip plans***
    *for the general tourist,* ***given both her â€œpersonalâ€ data*** *(preferences,
    budgets, etc.)* ***and the trip â€œenvironmentâ€ data*** *(distances, prices, modes
    of transport, etc.).*'
  id: totrans-38
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*è®©æˆ‘ä»¬ç¨å¾®å›é¡¾ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªã€‚æˆ‘ä»¬æœŸæœ›è§£å†³çš„åŸå§‹å®é™…é—®é¢˜æ˜¯æˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºçš„* ***æ—…è¡Œæ¸¸å®¢é—®é¢˜*** *(TTP)ï¼Œå³ä¸ºä¸€èˆ¬æ¸¸å®¢åˆ¶å®š* ***æœ€ä½³æ—…è¡Œè®¡åˆ’***
    *çš„é—®é¢˜ï¼Œ* ***ç»™å®šå¥¹çš„â€œä¸ªäººâ€æ•°æ®*** *(å¦‚åå¥½ã€é¢„ç®—ç­‰)* ***ä»¥åŠæ—…è¡Œâ€œç¯å¢ƒâ€æ•°æ®*** *(å¦‚è·ç¦»ã€ä»·æ ¼ã€äº¤é€šæ–¹å¼ç­‰)ã€‚*'
- en: ''
  id: totrans-39
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*Since this real-life problem was deemed too complex, we simplified it to its
    essentialist version in* [*sprint 1*](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef)*,
    to bootstrap the design of a solution. This â€œessentialist problemâ€ turned out
    to be the* [*Traveling Salesman Problem*](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07)
    *(TSP), where we considered the points to visit to be the â€œsites of interestâ€
    for the tourist in a city. With the functionality developed in this article, we
    are one step closer to a general solution of the TTP, with the TSP as the core
    of the solution.*'
  id: totrans-40
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ç”±äºè¿™ä¸ªå®é™…é—®é¢˜è¢«è®¤ä¸ºè¿‡äºå¤æ‚ï¼Œæˆ‘ä»¬åœ¨* [*ç¬¬ä¸€ä¸ªå†²åˆº*](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef)*ä¸­å°†å…¶ç®€åŒ–ä¸ºå…¶æœ¬è´¨ç‰ˆï¼Œä»¥å¯åŠ¨è§£å†³æ–¹æ¡ˆçš„è®¾è®¡ã€‚è¿™ä¸ªâ€œæœ¬è´¨é—®é¢˜â€è¢«è¯æ˜æ˜¯*
    [*æ—…è¡Œé”€å”®å‘˜é—®é¢˜*](/modeling-the-traveling-salesman-problem-from-first-principles-bd6530c9c07)
    *(TSP)ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å°†è¦è®¿é—®çš„ç‚¹è§†ä¸ºåŸå¸‚ä¸­æ¸¸å®¢çš„â€œå…´è¶£ç‚¹â€ã€‚é€šè¿‡æœ¬æ–‡å¼€å‘çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬æ›´æ¥è¿‘äºTTPçš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼Œä»¥TSPä½œä¸ºè§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚*'
- en: 2\. Reading the input data
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2\. è¯»å–è¾“å…¥æ•°æ®
- en: Our basic input is now the geographical coordinates of the sites we want to
    visit on the trip. We will treat the â€˜hotelâ€™ as a different kind of site, since
    the hotel is not, in itself, a â€œsite of interestâ€, but a place we must visit to
    get some sleep on multi-day trips. Our choice of hotel could be different on a
    different trip, or under different circumstances, while the sites of interest
    in a city are more or less â€œconstantâ€ places that many travel guides agree on.
    The usefulness of this distinction will become more apparent when weâ€™re ready
    to explore more advanced applications.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„åŸºæœ¬è¾“å…¥ç°åœ¨æ˜¯æˆ‘ä»¬æ—…è¡Œä¸­æƒ³è¦è®¿é—®çš„åœ°ç‚¹çš„åœ°ç†åæ ‡ã€‚æˆ‘ä»¬å°†â€œé…’åº—â€è§†ä¸ºä¸€ç§ä¸åŒçš„åœ°ç‚¹ï¼Œå› ä¸ºé…’åº—æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªâ€œæ„Ÿå…´è¶£çš„åœ°ç‚¹â€ï¼Œè€Œæ˜¯æˆ‘ä»¬å¿…é¡»åœ¨å¤šæ—¥æ—…è¡Œä¸­åœç•™çš„åœ°æ–¹ã€‚æˆ‘ä»¬çš„é…’åº—é€‰æ‹©å¯èƒ½ä¼šå› ä¸åŒçš„æ—…è¡Œæˆ–ä¸åŒçš„æƒ…å†µè€Œæœ‰æ‰€ä¸åŒï¼Œè€Œä¸€ä¸ªåŸå¸‚ä¸­çš„æ„Ÿå…´è¶£çš„åœ°ç‚¹åˆ™æ˜¯ç›¸å¯¹â€œå›ºå®šâ€çš„åœ°æ–¹ï¼Œè®¸å¤šæ—…è¡ŒæŒ‡å—å¯¹æ­¤æ„è§ä¸€è‡´ã€‚å½“æˆ‘ä»¬å‡†å¤‡æ¢ç´¢æ›´é«˜çº§çš„åº”ç”¨æ—¶ï¼Œè¿™ç§åŒºåˆ†çš„æœ‰ç”¨æ€§å°†å˜å¾—æ›´åŠ æ˜æ˜¾ã€‚
- en: 'Hence, Iâ€™ve stored the coordinates of our hotel in a CSV file, `location_hotel.csv`,
    and the coordinates for the "sites of interest" in a separate CSV file, `sites_coordinates.csv`.
    Both CSVs have the same structure, so we read and combine them into one dataframe
    containing all our sites:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘å°†æˆ‘ä»¬é…’åº—çš„åæ ‡å­˜å‚¨åœ¨ä¸€ä¸ªCSVæ–‡ä»¶ `location_hotel.csv` ä¸­ï¼Œå°†â€œæ„Ÿå…´è¶£åœ°ç‚¹â€çš„åæ ‡å­˜å‚¨åœ¨å¦ä¸€ä¸ªCSVæ–‡ä»¶ `sites_coordinates.csv`
    ä¸­ã€‚è¿™ä¸¤ä¸ªCSVæ–‡ä»¶å…·æœ‰ç›¸åŒçš„ç»“æ„ï¼Œå› æ­¤æˆ‘ä»¬å°†å®ƒä»¬è¯»å–å¹¶åˆå¹¶æˆä¸€ä¸ªåŒ…å«æ‰€æœ‰åœ°ç‚¹çš„æ•°æ®æ¡†ï¼š
- en: '[PRE0]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![](../Images/b01c96cdeebff5b18e72e0b390391c18.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b01c96cdeebff5b18e72e0b390391c18.png)'
- en: '***â„¹ï¸ How to quickly prepare your own location data***'
  id: totrans-46
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***â„¹ï¸ å¦‚ä½•å¿«é€Ÿå‡†å¤‡è‡ªå·±çš„ä½ç½®æ•°æ®***'
- en: ''
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'If you want to follow along this article using your own list of sites, you
    have to replicate the steps I took to obtain the coordinates:'
  id: totrans-48
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æƒ³ä½¿ç”¨è‡ªå·±çš„ç½‘ç«™åˆ—è¡¨æ¥è·Ÿéšæœ¬æ–‡ï¼Œä½ éœ€è¦å¤åˆ¶æˆ‘è·å–åæ ‡çš„æ­¥éª¤ï¼š
- en: ''
  id: totrans-49
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 1\. Go to [Google Maps](https://www.google.com/maps/) and search for each site
    in your list.
  id: totrans-50
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 1\. å‰å¾€ [Google Maps](https://www.google.com/maps/) å¹¶æœç´¢ä½ åˆ—è¡¨ä¸­çš„æ¯ä¸ªåœ°ç‚¹ã€‚
- en: ''
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '2\. Each site will appear as a point on the map. Right-click on each one. The
    first element that appears is a pair of numbers: the latitude and longitude of
    the point you clicked on.'
  id: totrans-52
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 2\. æ¯ä¸ªåœ°ç‚¹å°†åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºä¸ºä¸€ä¸ªç‚¹ã€‚å³å‡»æ¯ä¸ªç‚¹ã€‚å‡ºç°çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€å¯¹æ•°å­—ï¼šä½ ç‚¹å‡»çš„ç‚¹çš„çº¬åº¦å’Œç»åº¦ã€‚
- en: ''
  id: totrans-53
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 3\. Click on those numbers, they will be saved in your clipboard, ready to be
    pasted in a file together with the name you choose for that point.
  id: totrans-54
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 3\. ç‚¹å‡»è¿™äº›æ•°å­—ï¼Œå®ƒä»¬å°†è¢«ä¿å­˜åˆ°ä½ çš„å‰ªè´´æ¿ä¸­ï¼Œå‡†å¤‡ç²˜è´´åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿åŒä½ ä¸ºè¯¥ç‚¹é€‰æ‹©çš„åç§°ä¸€èµ·ã€‚
- en: ''
  id: totrans-55
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 4\. Repeat 1 to 3 for all your sites and youâ€™ll have a file equivalent to `sites_coordinates.csv`.
  id: totrans-56
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 4\. å¯¹æ‰€æœ‰åœ°ç‚¹é‡å¤æ­¥éª¤1åˆ°3ï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªç­‰æ•ˆäº `sites_coordinates.csv` çš„æ–‡ä»¶ã€‚
- en: ''
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This process works fine for a small set of sites, but if you have hundreds,
    or even tens, of sites, it becomes very tedious. In [a future article] weâ€™ll create
    a way to automate this manual work, which is called *geolocation*.
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè¿‡ç¨‹å¯¹äºå°è§„æ¨¡çš„ç½‘ç«™é›†éå¸¸æœ‰æ•ˆï¼Œä½†å¦‚æœä½ æœ‰æ•°ç™¾ä¸ªï¼Œç”šè‡³å‡ åä¸ªåœ°ç‚¹ï¼Œå®ƒä¼šå˜å¾—éå¸¸ç¹çã€‚åœ¨ [æœªæ¥çš„ä¸€ç¯‡æ–‡ç« ](https://example.org)
    ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ç§è‡ªåŠ¨åŒ–è¿™ä¸ªæ‰‹åŠ¨å·¥ä½œçš„æ–¹å¼ï¼Œè¿™å«åš*åœ°ç†å®šä½*ã€‚
- en: 3\. Creating a distance matrix from location data
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3\. ä»ä½ç½®æ•°æ®åˆ›å»ºè·ç¦»çŸ©é˜µ
- en: 'To build a distance matrix, we need to obtain the distance between any pair
    of locations. Sounds simple, but â€œdistanceâ€ really depends on the context. Do
    we consider the number reported by mapping applications, like Google Maps, that
    take into account the streets network, bridges, parks, *etc*.? If so, do we take
    the distance that a pedestrian would walk, or that a car would drive? Or maybe
    just the good old length of a straight line connecting the two points? Clearly,
    we have many possible distances to choose from, with varying degrees of accuracy.
    *The first question we have to answer is*: **how should we define â€œdistanceâ€**
    in the particular context of *our problem*, and at *this stage*?'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: è¦æ„å»ºè·ç¦»çŸ©é˜µï¼Œæˆ‘ä»¬éœ€è¦è·å¾—ä»»ä½•ä¸€å¯¹åœ°ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚è¿™å¬èµ·æ¥å¾ˆç®€å•ï¼Œä½†â€œè·ç¦»â€å®é™…ä¸Šå–å†³äºä¸Šä¸‹æ–‡ã€‚æˆ‘ä»¬æ˜¯å¦è€ƒè™‘ç”±å¦‚è°·æ­Œåœ°å›¾è¿™æ ·çš„åœ°å›¾åº”ç”¨ç¨‹åºæŠ¥å‘Šçš„æ•°å­—ï¼Œè¿™äº›åº”ç”¨ç¨‹åºè€ƒè™‘äº†è¡—é“ç½‘ç»œã€æ¡¥æ¢ã€å…¬å›­ï¼Œ*ç­‰ç­‰*ï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬è€ƒè™‘æ­¥è¡Œè€…è¡Œèµ°çš„è·ç¦»ï¼Œè¿˜æ˜¯æ±½è½¦è¡Œé©¶çš„è·ç¦»ï¼Ÿæˆ–è€…åªæ˜¯è¿æ¥è¿™ä¸¤ä¸ªç‚¹çš„ç›´çº¿é•¿åº¦ï¼Ÿæ˜¾ç„¶ï¼Œæˆ‘ä»¬æœ‰è®¸å¤šå¯èƒ½çš„è·ç¦»é€‰æ‹©ï¼Œæ¯ç§é€‰æ‹©çš„å‡†ç¡®åº¦ä¸åŒã€‚*æˆ‘ä»¬å¿…é¡»å›ç­”çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯*ï¼š**åœ¨*æˆ‘ä»¬çš„å®é™…é—®é¢˜*çš„ç‰¹å®šèƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å®šä¹‰â€œè·ç¦»â€**ï¼Œä»¥åŠåœ¨*è¿™ä¸ªé˜¶æ®µ*ï¼Ÿ
- en: 3.1\. Should I go the extra mile to gain an extra yard?
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.1\. æˆ‘æ˜¯å¦åº”è¯¥å¤šèŠ±ç‚¹æ—¶é—´ä»¥è·å¾—æ›´å¤šçš„å¥½å¤„ï¼Ÿ
- en: Itâ€™s natural to feel tempted to use accurate data. In the end, we all know that
    accuracy is intrinsically valuable, and hence we are inclined to pursue accurate
    data, the more, the better. But we must also remember that more accurate data
    entails more complex code and dependencies, and thus more development time and
    maintenance. As weâ€™re following an **agile approach**, we donâ€™t let the *best*
    be the enemy of the *good*, so **we will start as simple as we can, and then add
    complexity gradually, only if it is justified.**
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: å¾ˆè‡ªç„¶åœ°ï¼Œæˆ‘ä»¬ä¼šè¢«è¯±æƒ‘ä½¿ç”¨å‡†ç¡®çš„æ•°æ®ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬éƒ½çŸ¥é“å‡†ç¡®æ€§æ˜¯å†…åœ¨æœ‰ä»·å€¼çš„ï¼Œå› æ­¤æˆ‘ä»¬å€¾å‘äºè¿½æ±‚æ›´å‡†ç¡®çš„æ•°æ®ï¼Œè¶Šå¤šè¶Šå¥½ã€‚ä½†æˆ‘ä»¬ä¹Ÿå¿…é¡»è®°ä½ï¼Œæ›´å‡†ç¡®çš„æ•°æ®æ„å‘³ç€æ›´å¤æ‚çš„ä»£ç å’Œä¾èµ–ï¼Œå› æ­¤éœ€è¦æ›´å¤šçš„å¼€å‘æ—¶é—´å’Œç»´æŠ¤ã€‚ç”±äºæˆ‘ä»¬éµå¾ª**æ•æ·çš„æ–¹æ³•**ï¼Œæˆ‘ä»¬ä¸è®©*æœ€ä½³*æˆä¸º*è‰¯å¥½*çš„æ•Œäººï¼Œå› æ­¤**æˆ‘ä»¬å°†å°½å¯èƒ½ç®€å•åœ°å¼€å§‹ï¼Œç„¶åé€æ­¥å¢åŠ å¤æ‚æ€§ï¼Œä»…åœ¨å¿…è¦æ—¶**ã€‚
- en: At this point of having to find distances between locations, we could do as
    many do, and jump straight to third-party API-based solutions that require app
    keys, credentials, or even credit card numbers for cloud providers. That approach
    is fine, but often times it is inefficient, as we can forget that **accurate information
    brings added value, but also comes with added costs**.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨éœ€è¦æ‰¾åˆ°åœ°ç‚¹ä¹‹é—´çš„è·ç¦»æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åƒå¾ˆå¤šäººä¸€æ ·ï¼Œç›´æ¥è·³åˆ°åŸºäºç¬¬ä¸‰æ–¹ API çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆéœ€è¦åº”ç”¨å¯†é’¥ã€å‡­æ®ï¼Œç”šè‡³äº‘æœåŠ¡æä¾›å•†çš„ä¿¡ç”¨å¡å·ç ã€‚è¿™ç§æ–¹æ³•æ˜¯å¯ä»¥çš„ï¼Œä½†å¾€å¾€æ•ˆç‡ä¸é«˜ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½ä¼šå¿˜è®°**å‡†ç¡®çš„ä¿¡æ¯å¸¦æ¥é™„åŠ ä»·å€¼ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥é™„åŠ æˆæœ¬**ã€‚
- en: '*ğŸ‘ï¸* ***There ainâ€™t no such thing as â€œfree accuracyâ€***'
  id: totrans-64
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ğŸ‘ï¸* ***æ²¡æœ‰â€œå…è´¹å‡†ç¡®æ€§â€è¿™ç§äº‹***'
- en: ''
  id: totrans-65
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*Remembering that in general we always â€œpay a priceâ€ for accessing accurate
    data (which is closely related to the concept of* [***Value of Information***](https://en.wikipedia.org/wiki/Value_of_information)*)
    is another reason why taking an agile approach to the problem is a leaner course
    of action. By* ***starting with simple assumptions*** *on the â€œ*required level
    of accuracy*â€, and verifying their validity* ***on our own problem data****, we
    are ensuring that, if we eventually need to increase the accuracy of our data,
    we will be â€œpaying a priceâ€ that is* ***worth the*** *(expected)* ***improved
    results****.*'
  id: totrans-66
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*è®°ä½é€šå¸¸æˆ‘ä»¬æ€»æ˜¯â€œä»˜å‡ºä»£ä»·â€æ¥è·å–å‡†ç¡®çš„æ•°æ®ï¼ˆè¿™ä¸* [***ä¿¡æ¯çš„ä»·å€¼***](https://en.wikipedia.org/wiki/Value_of_information)*)
    ç´§å¯†ç›¸å…³ï¼‰æ˜¯å¦ä¸€ä¸ªåŸå› ï¼Œä¸ºä»€ä¹ˆé‡‡å–æ•æ·çš„æ–¹æ³•æ¥è§£å†³é—®é¢˜æ˜¯æ›´ç²¾ç®€çš„åšæ³•ã€‚é€šè¿‡* ***ä»ç®€å•å‡è®¾å¼€å§‹*** *å…³äºâ€œ*æ‰€éœ€çš„å‡†ç¡®åº¦*â€ï¼Œå¹¶åœ¨æˆ‘ä»¬è‡ªå·±çš„é—®é¢˜æ•°æ®ä¸ŠéªŒè¯å…¶æœ‰æ•ˆæ€§*
    ***ï¼Œæˆ‘ä»¬ç¡®ä¿ï¼Œå¦‚æœæˆ‘ä»¬æœ€ç»ˆéœ€è¦æé«˜æ•°æ®çš„å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬å°†â€œä»˜å‡ºä»£ä»·â€ï¼Œè¿™ç§ä»£ä»·æ˜¯* ***å€¼å¾—çš„*** *(é¢„æœŸçš„)* ***æ”¹è¿›ç»“æœ****ã€‚'
- en: So letâ€™s start very simple. We have coordinates. **First idea:** these coordinates
    are spread over parcels of the Earth *very small* compared to the radius of the
    Earth, so we could treat the latitudes as Y coordinates and the longitudes as
    X coordinates on a 2D plane, and then just compute the Euclidean distance (fancy
    term for the usual â€œstraight lineâ€).
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥æˆ‘ä»¬ä»éå¸¸ç®€å•çš„å¼€å§‹ã€‚æˆ‘ä»¬æœ‰åæ ‡ã€‚**ç¬¬ä¸€ä¸ªæƒ³æ³•**ï¼šè¿™äº›åæ ‡åˆ†å¸ƒåœ¨ç›¸å¯¹äºåœ°çƒåŠå¾„*éå¸¸å°*çš„åœ°çƒçš„åœ°å—ä¸Šï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†çº¬åº¦è§†ä¸º Y åæ ‡ï¼Œå°†ç»åº¦è§†ä¸º
    X åæ ‡ï¼Œåœ¨äºŒç»´å¹³é¢ä¸Šè¿›è¡Œè®¡ç®—ï¼Œç„¶åè®¡ç®—æ¬§å‡ é‡Œå¾—è·ç¦»ï¼ˆå³é€šå¸¸æ‰€è¯´çš„â€œç›´çº¿â€ï¼‰ã€‚
- en: 'Pros: a simple formula for distance, no new dependencies or data, spatial relationships
    between locations are conserved.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¼˜ç‚¹ï¼šç®€å•çš„è·ç¦»å…¬å¼ï¼Œæ²¡æœ‰æ–°çš„ä¾èµ–æˆ–æ•°æ®ï¼Œåœ°ç‚¹ä¹‹é—´çš„ç©ºé—´å…³ç³»è¢«ä¿ç•™ã€‚
- en: 'Cons: latitudes and longitudes are dimensionless numbers, so the numbers weâ€™d
    get when solving the problem would not be actual distances. This means that some
    info we care about, like total distance traveled, would not be available, even
    if we can obtain the optimal tour.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¼ºç‚¹ï¼šçº¬åº¦å’Œç»åº¦æ˜¯æ— é‡çº²çš„æ•°å­—ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è§£å†³é—®é¢˜æ—¶å¾—åˆ°çš„æ•°å­—å°†ä¸æ˜¯å®é™…çš„è·ç¦»ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å…³å¿ƒçš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚æ€»æ—…è¡Œè·ç¦»ï¼Œå³ä½¿æˆ‘ä»¬å¯ä»¥è·å¾—æœ€ä½³è·¯çº¿ï¼Œä¹Ÿä¸ä¼šæä¾›ã€‚
- en: 'The cons trump the pros, so we need a more complex approach (**but still simple**).
    **Second idea**: treat the coordinates as what they are, points on the Earth,
    but approximate the Earth as a sphere. A sphere does not have the familiar Euclidean
    geometry, so we will need a non-trivial formula that considers this spherical
    geometry when calculating the â€œstraight lineâ€ distance between two points. So
    now itâ€™s just a matter of implementing that formula using the radius of the Earth.
    We could do that, but weâ€™ll instead rely on a famous library that already does
    that, and even better.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ç¼ºç‚¹èƒœè¿‡ä¼˜ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ç§æ›´å¤æ‚çš„æ–¹æ³•ï¼ˆ**ä½†ä»ç„¶ç®€å•**ï¼‰ã€‚**ç¬¬äºŒä¸ªæƒ³æ³•**ï¼šå°†åæ ‡è§†ä¸ºå®ƒä»¬æœ¬èº«ï¼Œå³åœ°çƒä¸Šçš„ç‚¹ï¼Œä½†å°†åœ°çƒè¿‘ä¼¼ä¸ºä¸€ä¸ªçƒä½“ã€‚ä¸€ä¸ªçƒä½“æ²¡æœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„æ¬§å‡ é‡Œå¾—å‡ ä½•ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªéå¹³å‡¡çš„å…¬å¼ï¼Œåœ¨è®¡ç®—ä¸¤ä¸ªç‚¹ä¹‹é—´çš„â€œç›´çº¿â€è·ç¦»æ—¶è€ƒè™‘è¿™ç§çƒé¢å‡ ä½•ã€‚æ‰€ä»¥ç°åœ¨åªéœ€ä½¿ç”¨åœ°çƒçš„åŠå¾„æ¥å®ç°è¿™ä¸ªå…¬å¼ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼Œä½†æˆ‘ä»¬ä¼šä¾èµ–ä¸€ä¸ªå·²ç»åšäº†è¿™ä»¶äº‹çš„è‘—ååº“ï¼Œè€Œä¸”æ•ˆæœæ›´å¥½ã€‚
- en: 3.2\. Geolocation utilities with `**geopy**`
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.2. ä½¿ç”¨ `**geopy**` çš„åœ°ç†ä½ç½®å·¥å…·
- en: If this article series were especially focused on geospatial data science, it
    would be valuable to take the time to explain and implement the formula for the
    [great-circle distance](https://en.wikipedia.org/wiki/Great-circle_distance),
    a nice baseline option to compute â€œstraight-lineâ€ distances between points on
    a sphere. However, this article series is about the creation of an **optimization-based
    tourism planning system**, so instead of crafting our own formulas for geospatial
    utilities, we will rely on [Geopy](https://geopy.readthedocs.io/en/stable/) to
    do the heavy lifting for us. That way, we maintain focus on reaching a solution
    quickly.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœè¿™ç¯‡æ–‡ç« ç³»åˆ—ç‰¹åˆ«å…³æ³¨åœ°ç†ç©ºé—´æ•°æ®ç§‘å­¦ï¼Œé‚£ä¹ˆèŠ±æ—¶é—´è§£é‡Šå’Œå®ç°[å¤§åœ†è·ç¦»](https://en.wikipedia.org/wiki/Great-circle_distance)çš„å…¬å¼å°†æ˜¯æœ‰ä»·å€¼çš„ï¼Œè¿™æ˜¯ä¸€ç§è®¡ç®—çƒé¢ä¸Šä¸¤ç‚¹â€œç›´çº¿â€è·ç¦»çš„è‰¯å¥½åŸºå‡†é€‰é¡¹ã€‚ç„¶è€Œï¼Œè¿™ç¯‡æ–‡ç« ç³»åˆ—å…³äº**åŸºäºä¼˜åŒ–çš„æ—…æ¸¸è§„åˆ’ç³»ç»Ÿ**ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å°†ä¾èµ–äº[Geopy](https://geopy.readthedocs.io/en/stable/)æ¥å®Œæˆç¹é‡çš„å·¥ä½œï¼Œè€Œä¸æ˜¯è‡ªåˆ¶åœ°ç†ç©ºé—´å·¥å…·çš„å…¬å¼ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸“æ³¨äºå¿«é€Ÿæ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚
- en: 'Install it by running in an Anaconda prompt (or inside the conda environment
    we created in the [first article](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c#:~:text=For%20organized%20people,in%20this%20series),
    if you created it) the following:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡åœ¨ Anaconda æç¤ºç¬¦ï¼ˆæˆ–åœ¨æˆ‘ä»¬åœ¨[ç¬¬ä¸€ç¯‡æ–‡ç« ](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c#:~:text=For%20organized%20people,in%20this%20series)ä¸­åˆ›å»ºçš„
    conda ç¯å¢ƒå†…ï¼‰è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…å®ƒï¼š
- en: '[PRE1]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Now, letâ€™s do a demonstration with `geopy` for just two locations.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ `geopy` å¯¹ä¸¤ä¸ªä½ç½®è¿›è¡Œæ¼”ç¤ºã€‚
- en: 3.3\. Getting to the points
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.3\. åˆ°è¾¾è¦ç‚¹
- en: Given the coordinates of two points, the `[geodesic](https://geopy.readthedocs.io/en/stable/#geopy.distance.geodesic)`
    function of `geopy` computes the distance of the geodesic connecting them across
    the Earth's surface. In Geometry, the [*geodesic*](https://en.wikipedia.org/wiki/Geodesic)
    is the path of minimal distance between points on a given [metric space](https://en.wikipedia.org/wiki/Metric_space).
    In our familiar Euclidean space, **straight lines** are the geodesics. In a spherical
    space, **great-circles** are. The underlying "space" that Geopy's `geodesic` function
    considers is an **accurate ellipsoid model of the Earth**.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™å®šä¸¤ç‚¹çš„åæ ‡ï¼Œ`[geodesic](https://geopy.readthedocs.io/en/stable/#geopy.distance.geodesic)`
    å‡½æ•°å¯ä»¥è®¡ç®—å®ƒä»¬ä¹‹é—´çš„åœ°çƒè¡¨é¢æœ€çŸ­è·ç¦»ã€‚åœ¨å‡ ä½•å­¦ä¸­ï¼Œ[*æµ‹åœ°çº¿*](https://en.wikipedia.org/wiki/Geodesic) æ˜¯åœ¨ç»™å®š[åº¦é‡ç©ºé—´](https://en.wikipedia.org/wiki/Metric_space)ä¸Šä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚åœ¨æˆ‘ä»¬ç†Ÿæ‚‰çš„æ¬§å‡ é‡Œå¾—ç©ºé—´ä¸­ï¼Œ**ç›´çº¿**å°±æ˜¯æµ‹åœ°çº¿ã€‚åœ¨çƒé¢ç©ºé—´ä¸­ï¼Œ**å¤§åœ†**æ˜¯æµ‹åœ°çº¿ã€‚Geopy
    çš„ `geodesic` å‡½æ•°æ‰€è€ƒè™‘çš„åŸºç¡€â€œç©ºé—´â€æ˜¯**åœ°çƒçš„ç²¾ç¡®æ¤­çƒæ¨¡å‹**ã€‚
- en: '***ğŸ‘ A great-circle is great, but an ellipse is even greater***'
  id: totrans-78
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***ğŸ‘ å¤§åœ†å¾ˆæ£’ï¼Œä½†æ¤­åœ†æ›´æ£’***'
- en: ''
  id: totrans-79
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*Earlier I said we would consider the Earth to be a sphere, because it was
    the simplest workable approximation. In reality, the Earth isnâ€™t a sphere, but
    an ellipsoid, a solid with a more complex geometry. Now that* `*geopy*` *will
    spare us from coding our own functions for non-Euclidean geometries, we can upgrade
    our approximation of the Earth and employ the more accurate* ***ellipsoidal distance***
    *between two points, instead of the great-circle distance. A better Earth model
    for the same lines of code. This indeed is free accuracy, so why not take it?*'
  id: totrans-80
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*ä¹‹å‰æˆ‘è¯´è¿‡ï¼Œæˆ‘ä»¬å°†åœ°çƒè§†ä¸ºä¸€ä¸ªçƒä½“ï¼Œå› ä¸ºè¿™æ˜¯æœ€ç®€å•çš„å¯è¡Œè¿‘ä¼¼ã€‚å®é™…ä¸Šï¼Œåœ°çƒå¹¶ä¸æ˜¯ä¸€ä¸ªçƒä½“ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¤­çƒä½“ï¼Œæ˜¯ä¸€ç§å…·æœ‰æ›´å¤æ‚å‡ ä½•å½¢çŠ¶çš„å›ºä½“ã€‚ç°åœ¨`*geopy*`*å°†å…äºæˆ‘ä»¬ä¸ºéæ¬§å‡ é‡Œå¾—å‡ ä½•ç¼–å†™è‡ªå·±çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å‡çº§å¯¹åœ°çƒçš„è¿‘ä¼¼ï¼Œå¹¶ä½¿ç”¨æ›´ç²¾ç¡®çš„*
    ***æ¤­çƒè·ç¦»*** *æ¥ä»£æ›¿å¤§åœ†è·ç¦»ã€‚å¯¹äºç›¸åŒçš„ä»£ç è¡Œï¼Œè¿™ç¡®å®æ˜¯å…è´¹çš„ç²¾ç¡®åº¦ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸ä½¿ç”¨å‘¢ï¼Ÿ*'
- en: 'Hereâ€™s a function that computes the ellipsoidal distance between point 1 and
    point 2, in meters:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªè®¡ç®—ç‚¹ 1 å’Œç‚¹ 2 ä¹‹é—´æ¤­çƒè·ç¦»çš„å‡½æ•°ï¼Œå•ä½ä¸ºç±³ï¼š
- en: '[PRE2]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: What is the distance between the Eiffel Tour and the Louvre?
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: åŸƒè²å°”é“å¡”å’Œå¢æµ®å®«ä¹‹é—´çš„è·ç¦»æ˜¯å¤šå°‘ï¼Ÿ
- en: '[PRE3]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 3173 meters, around 3.2 km. Google Maps says itâ€™s 3.5 km. The **computed** distance
    is 8.6 % lower than the â€œ**real**â€ distance. Our legs only care about *absolute
    errors* in distance, though, which in this case amounts to just 330 extra meters
    to walk, compared to the estimated distance. Doesnâ€™t seem like a significant error
    for a tourist who expects to be walking around all day in a big city.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 3173 ç±³ï¼Œå¤§çº¦ 3.2 å…¬é‡Œã€‚è°·æ­Œåœ°å›¾æ˜¾ç¤ºä¸º 3.5 å…¬é‡Œã€‚**è®¡ç®—**çš„è·ç¦»æ¯”â€œ**çœŸå®**â€è·ç¦»ä½ 8.6%ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬çš„è…¿åªå…³å¿ƒè·ç¦»çš„*ç»å¯¹è¯¯å·®*ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªæ¯”ä¼°ç®—è·ç¦»å¤šèµ°äº†
    330 ç±³ï¼Œå¯¹æœŸæœ›å…¨å¤©åœ¨å¤§åŸå¸‚æ­¥è¡Œçš„æ¸¸å®¢æ¥è¯´ï¼Œè¿™ä¼¼ä¹ä¸æ˜¯ä¸€ä¸ªæ˜¾è‘—çš„è¯¯å·®ã€‚
- en: And between the Eiffel Tour and Port de Suffren?
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆåŸƒè²å°”é“å¡”å’Œè‹å¼—ä¼¦æ¸¯ä¹‹é—´å‘¢ï¼Ÿ
- en: '[PRE4]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 328 meters, this time 6% lower (just 22 meters shorter) than the 350 meters
    Google Maps provides. Not that bad for applying a formula. As we would expect,
    the closer the points are, the less chance there is for streets to zigzag and
    turns to appear, and hence the lower the error incurred by the ellipsoid model.
    Looks **good enough** for our present purposes.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 328ç±³ï¼Œè¿™æ¬¡æ¯”Google Mapsæä¾›çš„350ç±³ä½6%ï¼ˆä»…22ç±³çŸ­ï¼‰ã€‚å¯¹äºåº”ç”¨ä¸€ä¸ªå…¬å¼æ¥è¯´ï¼Œè¿™è¿˜ä¸é”™ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€é¢„æœŸçš„ï¼Œç‚¹è¶Šè¿‘ï¼Œè¡—é“å‡ºç°ä¹‹ç±»çš„æ›²æŠ˜è½¬å¼¯çš„æœºä¼šè¶Šå°ï¼Œå› æ­¤æ¤­çƒæ¨¡å‹äº§ç”Ÿçš„è¯¯å·®ä¹Ÿè¶Šå°ã€‚å¯¹äºæˆ‘ä»¬ç›®å‰çš„ç›®çš„æ¥çœ‹ï¼Œæ˜¾å¾—**è¶³å¤Ÿå¥½**ã€‚
- en: Now we must apply this function to all pairs of locations, thus getting the
    distance matrix the TSP model needs.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¿…é¡»å°†è¿™ä¸ªå‡½æ•°åº”ç”¨äºæ‰€æœ‰ä½ç½®å¯¹ï¼Œä»è€Œå¾—åˆ°TSPæ¨¡å‹æ‰€éœ€çš„è·ç¦»çŸ©é˜µã€‚
- en: 3.4\. From coordinates to distance matrix
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.4\. ä»åæ ‡åˆ°è·ç¦»çŸ©é˜µ
- en: This is the easy part, where we just have to loop over all the sites twice and
    compute and store the distance between each pair. The below function does that.
    Note that the distance metric is passed as an optional argument, being the ellipsoidal
    distance we used before the default. We leave the door open to better distance
    metrics to be passed in the future.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™éƒ¨åˆ†å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€å¯¹æ‰€æœ‰ç«™ç‚¹è¿›è¡Œä¸¤æ¬¡å¾ªç¯ï¼Œè®¡ç®—å¹¶å­˜å‚¨æ¯å¯¹ä¹‹é—´çš„è·ç¦»ã€‚ä¸‹é¢çš„å‡½æ•°å°±æ˜¯è¿™æ ·åšçš„ã€‚æ³¨æ„ï¼Œè·ç¦»åº¦é‡ä½œä¸ºå¯é€‰å‚æ•°ä¼ é€’ï¼Œé»˜è®¤æ˜¯æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„æ¤­çƒè·ç¦»ã€‚æˆ‘ä»¬ç•™ç€ä»¥åä¼ é€’æ›´å¥½çš„è·ç¦»åº¦é‡çš„å¯èƒ½æ€§ã€‚
- en: '[PRE5]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/dc8c5a88bbc2fe418177b846e152407c.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dc8c5a88bbc2fe418177b846e152407c.png)'
- en: '**Figure 3.** Distance matrix resulting from using the ellipsoidal model of
    the Earth. (Image by author)'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 3.** ä½¿ç”¨åœ°çƒæ¤­çƒæ¨¡å‹å¾—åˆ°çš„è·ç¦»çŸ©é˜µã€‚ï¼ˆå›¾åƒæ¥æºï¼šä½œè€…ï¼‰'
- en: And there we have it! As expected, the diagonal of the matrix is zero, and the
    matrix is symmetric. The index and columns of the output dataframe contain the
    names of the input sites.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: å°±è¿™æ ·ï¼æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼ŒçŸ©é˜µçš„å¯¹è§’çº¿ä¸ºé›¶ï¼ŒçŸ©é˜µæ˜¯å¯¹ç§°çš„ã€‚è¾“å‡ºæ•°æ®æ¡†çš„ç´¢å¼•å’Œåˆ—åŒ…å«è¾“å…¥ç«™ç‚¹çš„åç§°ã€‚
- en: Functionality demonstrated. Now we can do better to facilitate the use of this
    function. Letâ€™s wrap up this functionality inside a class in a convenient manner,
    **for easy re-use**, and more importantly, for **easier integration with the optimization
    model** of the TSP we built in the previous sprint.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: åŠŸèƒ½æ¼”ç¤ºå®Œæ¯•ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°æ–¹ä¾¿ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚è®©æˆ‘ä»¬ä»¥ä¸€ç§ä¾¿æ·çš„æ–¹å¼å°†è¿™ä¸ªåŠŸèƒ½å°è£…åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œ**ä»¥ä¾¿äºé‡å¤ä½¿ç”¨**ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œ**ä¸ºäº†æ›´å®¹æ˜“ä¸æˆ‘ä»¬åœ¨ä¸Šä¸€ä¸ªå†²åˆºä¸­æ„å»ºçš„TSPä¼˜åŒ–æ¨¡å‹é›†æˆ**ã€‚
- en: 4\. Wrap it up! (inside a class)
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4\. æ€»ç»“ï¼(åœ¨ç±»å†…éƒ¨)
- en: 4.1\. `GeoAnalyzer` class design
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1\. `GeoAnalyzer` ç±»è®¾è®¡
- en: 'Letâ€™s create a new class, `GeoAnalyzer`, dedicated to the geospatial utilities
    that may arise in routing problems. As such, our function `compute_distance_matrix`
    fits in naturally as a method. The main parts of this class will be, for now:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œ`GeoAnalyzer`ï¼Œä¸“é—¨ç”¨äºå¤„ç†å¯èƒ½å‡ºç°åœ¨è·¯ç”±é—®é¢˜ä¸­çš„åœ°ç†ç©ºé—´å·¥å…·ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„å‡½æ•°`compute_distance_matrix`è‡ªç„¶åœ°ä½œä¸ºä¸€ä¸ªæ–¹æ³•åµŒå…¥å…¶ä¸­ã€‚è¿™ä¸ªç±»çš„ä¸»è¦éƒ¨åˆ†ç›®å‰å°†åŒ…æ‹¬ï¼š
- en: A dataframe having site locations, the attribute `_df_locations`.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ…å«ç«™ç‚¹ä½ç½®çš„æ•°æ®æ¡†ï¼Œå±æ€§ä¸º`_df_locations`ã€‚
- en: The pure function `ellipsoidal_distance`.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: çº¯å‡½æ•°`ellipsoidal_distance`ã€‚
- en: The method `get_distance_matrix`, being equivalent to the previous function
    `compute_distance_matrix`, but using the instance attribute `_df_locations` to
    compute the distances.
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ–¹æ³•`get_distance_matrix`ï¼Œç­‰åŒäºä¹‹å‰çš„å‡½æ•°`compute_distance_matrix`ï¼Œä½†ä½¿ç”¨å®ä¾‹å±æ€§`_df_locations`æ¥è®¡ç®—è·ç¦»ã€‚
- en: Since the user may want to add new locations to the list of locations at any
    point in his analysis, we include the method `add_locations` that accepts a dataframe
    of geographical coordinates and appends it to the previously existing one.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºç”¨æˆ·å¯èƒ½å¸Œæœ›åœ¨åˆ†æçš„ä»»ä½•æ—¶åˆ»æ·»åŠ æ–°ä½ç½®ï¼Œæˆ‘ä»¬åŒ…æ‹¬äº†ä¸€ä¸ªåä¸º`add_locations`çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªåœ°ç†åæ ‡çš„æ•°æ®æ¡†ï¼Œå¹¶å°†å…¶é™„åŠ åˆ°å…ˆå‰å­˜åœ¨çš„æ•°æ®æ¡†ä¸­ã€‚
- en: Below you can find the definition of `GeoAnalyzer`. Note there are other convenience
    methods and properties not mentioned here.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹é¢å¯ä»¥æ‰¾åˆ°`GeoAnalyzer`çš„å®šä¹‰ã€‚æ³¨æ„è¿™é‡Œè¿˜æœ‰å…¶ä»–ä¾¿åˆ©çš„æ–¹æ³•å’Œå±æ€§æœªæåŠã€‚
- en: '[PRE6]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 4.2\. Class usage demo
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.2\. ç±»ä½¿ç”¨æ¼”ç¤º
- en: 'Letâ€™s explore a bit the main functionality of the class. We create an instance
    and add our sites of interest from Paris:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ç¨å¾®æ¢ç´¢ä¸€ä¸‹è¿™ä¸ªç±»çš„ä¸»è¦åŠŸèƒ½ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ä¾‹å¹¶ä»å·´é»æ·»åŠ æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç«™ç‚¹ï¼š
- en: '[PRE7]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'We check the representation of our instance at this point, which informs us
    that weâ€™ve provided 9 locations, which we can check the details of with the attribute
    `locations`:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ£€æŸ¥æ­¤æ—¶å®ä¾‹çš„è¡¨ç¤ºï¼Œå‘ŠçŸ¥æˆ‘ä»¬å·²ç»æä¾›äº†9ä¸ªä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å±æ€§`locations`æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼š
- en: '[PRE8]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](../Images/eeb4a74be1a03f64e941620e2256c7c0.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/eeb4a74be1a03f64e941620e2256c7c0.png)'
- en: 'Of course, we can extract the distance matrix from the object, which by now
    itâ€™s quite familiar:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¯¹è±¡ä¸­æå–è·ç¦»çŸ©é˜µï¼Œåˆ°ç›®å‰ä¸ºæ­¢è¿™å·²ç»ç›¸å½“ç†Ÿæ‚‰äº†ï¼š
- en: '[PRE9]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](../Images/dc8c5a88bbc2fe418177b846e152407c.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dc8c5a88bbc2fe418177b846e152407c.png)'
- en: 'And lastly, in case weâ€™re curious about where these values come from, we can
    check it from the dataframe itself:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œå¦‚æœæˆ‘ä»¬å¯¹è¿™äº›å€¼çš„æ¥æºæ„Ÿåˆ°å¥½å¥‡ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ•°æ®æ¡†æœ¬èº«è¿›è¡Œæ£€æŸ¥ï¼š
- en: '[PRE10]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: This would be more valuable if more distance metrics were available, something
    that we will see in future sprints.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæœ‰æ›´å¤šçš„è·ç¦»åº¦é‡å¯ç”¨ï¼Œè¿™å°†æ›´åŠ æœ‰ä»·å€¼ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨æœªæ¥å†²åˆºä¸­å°†çœ‹åˆ°çš„å†…å®¹ã€‚
- en: 5\. Conclusion (or planning for next sprint)
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5\. ç»“è®ºï¼ˆæˆ–ä¸ºä¸‹ä¸€ä¸ªå†²åˆºåšè®¡åˆ’ï¼‰
- en: 'The end result of our work has been a class, `GeoAnalyzer`, with convenient
    methods that will help us generalize the Traveling Salesman Problem to arbitrary
    sets of sites. That generalization will be the precise goal of our [next sprint](https://medium.com/@carlosjuribe/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9),
    in which **we will create an estimator-like class for the TSP** that hides away
    the model-building steps covered in [sprint 2](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c)
    and takes as input the geo-coordinates of the sites to be visited. The `GeoAnalyzer`
    class will be a key component of this new estimator class, **enabling a true general
    use of the TSP optimization model** we have built. This new estimator-like class,
    combining the generality of both the `GeoAnalyzer` and the TSP model, will become
    the core of our solution to the more general **Traveling Tourist Problem** we
    aspire to solve. Continue to the [next sprint](https://medium.com/@carlosjuribe/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9)
    for the real deal:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å·¥ä½œçš„æœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªåä¸º `GeoAnalyzer` çš„ç±»ï¼Œå…·æœ‰ä¾¿æ·çš„æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬å°†æ—…è¡Œæ¨é”€å‘˜é—®é¢˜æ¨å¹¿åˆ°ä»»æ„çš„ç«™ç‚¹é›†åˆã€‚è¿™ä¸ªæ¨å¹¿å°†æ˜¯æˆ‘ä»¬[ä¸‹ä¸€ä¸ªå†²åˆº](https://medium.com/@carlosjuribe/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9)çš„å…·ä½“ç›®æ ‡ï¼Œ**æˆ‘ä»¬å°†ä¸º
    TSP åˆ›å»ºä¸€ä¸ªç±»ä¼¼ä¼°ç®—å™¨çš„ç±»**ï¼Œå®ƒéšè—äº†åœ¨[sprint 2](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c)ä¸­æ¶‰åŠçš„æ¨¡å‹æ„å»ºæ­¥éª¤ï¼Œå¹¶ä»¥å¾…è®¿é—®ç«™ç‚¹çš„åœ°ç†åæ ‡ä½œä¸ºè¾“å…¥ã€‚`GeoAnalyzer`
    ç±»å°†æ˜¯è¿™ä¸ªæ–°ä¼°ç®—å™¨ç±»çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œ**å®ç°æˆ‘ä»¬æ‰€æ„å»ºçš„ TSP ä¼˜åŒ–æ¨¡å‹çš„çœŸæ­£é€šç”¨åº”ç”¨**ã€‚è¿™ä¸ªæ–°çš„ç±»ä¼¼ä¼°ç®—å™¨çš„ç±»ï¼Œå°†ç»“åˆ `GeoAnalyzer` å’Œ
    TSP æ¨¡å‹çš„é€šç”¨æ€§ï¼Œå°†æˆä¸ºæˆ‘ä»¬è§£å†³æ›´ä¸€èˆ¬çš„**æ—…è¡Œæ¸¸å®¢é—®é¢˜**çš„æ ¸å¿ƒã€‚ç»§ç»­é˜…è¯»[ä¸‹ä¸€ä¸ªå†²åˆº](https://medium.com/@carlosjuribe/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9)ï¼Œäº†è§£çœŸæ­£çš„å†…å®¹ï¼š
- en: '[](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9?source=post_page-----d5fc92a0ba9e--------------------------------)
    [## A classy approach to solving Traveling Salesman Problems effectively with
    Python'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9?source=post_page-----d5fc92a0ba9e--------------------------------)
    [## ä¸€ç§ä¼˜é›…çš„æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³æ—…è¡Œæ¨é”€å‘˜é—®é¢˜ï¼Œä½¿ç”¨ Python'
- en: Implementing the TSP model in a scikit-learn-like fashion to ease the building
    and solving of routing optimizationâ€¦
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ä»¥ç±»ä¼¼ scikit-learn çš„æ–¹å¼å®ç° TSP æ¨¡å‹ï¼Œä»¥ç®€åŒ–è·¯ç”±ä¼˜åŒ–çš„æ„å»ºå’Œè§£å†³è¿‡ç¨‹â€¦
- en: towardsdatascience.com](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9?source=post_page-----d5fc92a0ba9e--------------------------------)
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9?source=post_page-----d5fc92a0ba9e--------------------------------)
- en: Feel free to follow me, ask me questions, **give me feedback**, or contact me
    on [LinkedIn](https://www.linkedin.com/in/carlosjuribe/). Thanks for reading!
    ğŸ“ˆğŸ˜Š
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: éšæ—¶å…³æ³¨æˆ‘ï¼Œå‘æˆ‘æé—®ï¼Œ**ç»™æˆ‘åé¦ˆ**ï¼Œæˆ–é€šè¿‡[LinkedIn](https://www.linkedin.com/in/carlosjuribe/)ä¸æˆ‘è”ç³»ã€‚æ„Ÿè°¢é˜…è¯»ï¼ğŸ“ˆğŸ˜Š
