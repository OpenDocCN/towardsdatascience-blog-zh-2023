- en: Understanding Instrumental Variables
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç†è§£å·¥å…·å˜é‡
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/understanding-instrumental-variables-0ce5d3d6ba20](https://towardsdatascience.com/understanding-instrumental-variables-0ce5d3d6ba20)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/understanding-instrumental-variables-0ce5d3d6ba20](https://towardsdatascience.com/understanding-instrumental-variables-0ce5d3d6ba20)
- en: '[CAUSAL DATA SCIENCE](https://towardsdatascience.com/tagged/causal-data-science)'
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[å› æœæ•°æ®ç§‘å­¦](https://towardsdatascience.com/tagged/causal-data-science)'
- en: '*How to estimate causal effects when you cannot randomize treatment*'
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '*å¦‚ä½•åœ¨æ— æ³•éšæœºåŒ–æ²»ç–—æ—¶ä¼°è®¡å› æœæ•ˆæœ*'
- en: '[](https://medium.com/@matteo.courthoud?source=post_page-----0ce5d3d6ba20--------------------------------)[![Matteo
    Courthoud](../Images/d873eab35a0cf9fc696658c0bee16b33.png)](https://medium.com/@matteo.courthoud?source=post_page-----0ce5d3d6ba20--------------------------------)[](https://towardsdatascience.com/?source=post_page-----0ce5d3d6ba20--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----0ce5d3d6ba20--------------------------------)
    [Matteo Courthoud](https://medium.com/@matteo.courthoud?source=post_page-----0ce5d3d6ba20--------------------------------)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@matteo.courthoud?source=post_page-----0ce5d3d6ba20--------------------------------)[![Matteo
    Courthoud](../Images/d873eab35a0cf9fc696658c0bee16b33.png)](https://medium.com/@matteo.courthoud?source=post_page-----0ce5d3d6ba20--------------------------------)[](https://towardsdatascience.com/?source=post_page-----0ce5d3d6ba20--------------------------------)[![æ•°æ®ç§‘å­¦å‰æ²¿](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----0ce5d3d6ba20--------------------------------)
    [Matteo Courthoud](https://medium.com/@matteo.courthoud?source=post_page-----0ce5d3d6ba20--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----0ce5d3d6ba20--------------------------------)
    Â·12 min readÂ·Nov 13, 2023
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº[æ•°æ®ç§‘å­¦å‰æ²¿](https://towardsdatascience.com/?source=post_page-----0ce5d3d6ba20--------------------------------)
    Â·é˜…è¯»æ—¶é—´12åˆ†é’ŸÂ·2023å¹´11æœˆ13æ—¥
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/9caba9cc613fed76bb306ba2e72466d9.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9caba9cc613fed76bb306ba2e72466d9.png)'
- en: Cover, image by Author
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: å°é¢ï¼Œå›¾ç‰‡ä½œè€…æä¾›
- en: A/B tests are the golden standard of causal inference because they allow us
    to make valid causal statements under minimal assumptions, thanks to **randomization**.
    In fact, by randomly assigning a **treatment** (a drug, ad, product, â€¦), we are
    able to compare the **outcome** of interest (a disease, firm revenue, customer
    satisfaction, â€¦) across **subjects** (patients, users, customers, â€¦) and attribute
    the average difference in outcomes to the causal effect of the treatment.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: A/B æµ‹è¯•æ˜¯å› æœæ¨æ–­çš„é»„é‡‘æ ‡å‡†ï¼Œå› ä¸ºå®ƒä»¬å…è®¸æˆ‘ä»¬åœ¨æœ€å°‘å‡è®¾ä¸‹åšå‡ºæœ‰æ•ˆçš„å› æœå£°æ˜ï¼Œè¿™è¦å½’åŠŸäº**éšæœºåŒ–**ã€‚å®é™…ä¸Šï¼Œé€šè¿‡éšæœºåˆ†é…**æ²»ç–—**ï¼ˆè¯ç‰©ã€å¹¿å‘Šã€äº§å“ç­‰ï¼‰ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ¯”è¾ƒ**ç»“æœ**ï¼ˆç–¾ç—…ã€å…¬å¸æ”¶å…¥ã€å®¢æˆ·æ»¡æ„åº¦ç­‰ï¼‰åœ¨**å—è¯•è€…**ï¼ˆæ‚£è€…ã€ç”¨æˆ·ã€å®¢æˆ·ç­‰ï¼‰ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶å°†ç»“æœçš„å¹³å‡å·®å¼‚å½’å› äºæ²»ç–—çš„å› æœæ•ˆæœã€‚
- en: However, in many settings, it is **not possible to randomize** the treatment,
    for either ethical, legal, or practical reasons. One common online setting is
    on-demand features, such as subscriptions or premium memberships. Other settings
    include features for which we cannot discriminate customers, like insurance contracts,
    or features that are so deeply hard-coded that an experiment might not be worth
    the effort. Can we still do valid causal inference in those settings?
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œç”±äºä¼¦ç†ã€æ³•å¾‹æˆ–å®é™…åŸå› ï¼Œ**æ— æ³•éšæœºåŒ–**æ²»ç–—ã€‚ä¸€ç§å¸¸è§çš„åœ¨çº¿ç¯å¢ƒæ˜¯æŒ‰éœ€åŠŸèƒ½ï¼Œä¾‹å¦‚è®¢é˜…æˆ–é«˜çº§ä¼šå‘˜ã€‚å…¶ä»–è®¾ç½®åŒ…æ‹¬æˆ‘ä»¬æ— æ³•åŒºåˆ†å®¢æˆ·çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä¿é™©åˆåŒï¼Œæˆ–è€…é‚£äº›æ·±åº¦ç¡¬ç¼–ç åˆ°ç³»ç»Ÿä¸­çš„åŠŸèƒ½ï¼Œå®éªŒå¯èƒ½ä¸å€¼å¾—ä»˜å‡ºåŠªåŠ›ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è¿›è¡Œæœ‰æ•ˆçš„å› æœæ¨æ–­å—ï¼Ÿ
- en: The answer is yes, thanks to **instrumental variables** and the corresponding
    experimental design called **encouragement design**. In many of the settings mentioned
    above, we cannot randomly *assign* treatment, but we can *encourage* customers
    to take it. For example, we can offer a subscription discount or we can change
    the order in which options are presented. While customers retain the ultimate
    word on taking the treatment, we are still able to estimate a causal treatment
    effect. Letâ€™s see how.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¿™è¦å½’åŠŸäº**å·¥å…·å˜é‡**å’Œå¯¹åº”çš„å®éªŒè®¾è®¡ï¼Œå³**é¼“åŠ±è®¾è®¡**ã€‚åœ¨ä¸Šè¿°è®¸å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ— æ³•éšæœº*åˆ†é…*æ²»ç–—ï¼Œä½†æˆ‘ä»¬å¯ä»¥*é¼“åŠ±*å®¢æˆ·æ¥å—æ²»ç–—ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›è®¢é˜…æŠ˜æ‰£ï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥æ›´æ”¹é€‰é¡¹å‘ˆç°çš„é¡ºåºã€‚è™½ç„¶å®¢æˆ·å¯¹æ¥å—æ²»ç–—æ‹¥æœ‰æœ€ç»ˆå†³å®šæƒï¼Œä½†æˆ‘ä»¬ä»ç„¶èƒ½å¤Ÿä¼°è®¡å› æœæ²»ç–—æ•ˆæœã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚
- en: Evaluating Subscription Programs
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è¯„ä¼°è®¢é˜…è®¡åˆ’
- en: In the rest of the article, we are going to use a toy example. Suppose we were
    a product company starting a weekly **newsletter** to promote product and feature
    updates. We would like to understand whether the newsletter is worth the effort
    and whether it is ultimately successful in increasing **sales**. Unfortunately,
    we cannot run a standard A/B test since we cannot force customers to **subscribe**
    to the newsletter. Does it mean we cannot evaluate the newsletter? Not exactly.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªç¤ºä¾‹ã€‚å‡è®¾æˆ‘ä»¬æ˜¯ä¸€å®¶äº§å“å…¬å¸ï¼Œå¯åŠ¨äº†ä¸€ä»½æ¯å‘¨çš„**é€šè®¯**ä»¥æ¨å¹¿äº§å“å’ŒåŠŸèƒ½æ›´æ–°ã€‚æˆ‘ä»¬æƒ³äº†è§£é€šè®¯æ˜¯å¦å€¼å¾—æŠ•å…¥ï¼Œä»¥åŠå®ƒæ˜¯å¦æœ€ç»ˆæˆåŠŸåœ°å¢åŠ äº†**é”€å”®é¢**ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½è¿›è¡Œæ ‡å‡†çš„A/Bæµ‹è¯•ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½å¼ºè¿«å®¢æˆ·**è®¢é˜…**é€šè®¯ã€‚è¿™æ˜¯å¦æ„å‘³ç€æˆ‘ä»¬æ— æ³•è¯„ä¼°é€šè®¯ï¼Ÿä¸å®Œå…¨æ˜¯ã€‚
- en: Letâ€™s assume we have also run an A/B test on a new **notification** on our mobile
    app that promotes the newsletter. A random sample of our customers has received
    the notification, while a random sample has not. Perhaps this A/B test was not
    related to the evaluation of the causal effect of the **newsletter** at all, as
    it sometimes happens in large companies. However, this is a great opportunity
    for a data scientist interested in understanding the impact of the newsletter
    on **sales**.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬è¿˜åœ¨ç§»åŠ¨åº”ç”¨ä¸Šè¿›è¡Œäº†ä¸€æ¬¡å…³äºæ–°**é€šçŸ¥**çš„A/Bæµ‹è¯•ï¼Œä»¥æ¨å¹¿é€šè®¯ã€‚éšæœºçš„ä¸€éƒ¨åˆ†å®¢æˆ·æ”¶åˆ°äº†é€šçŸ¥ï¼Œè€Œå¦ä¸€éƒ¨åˆ†å®¢æˆ·æ²¡æœ‰ã€‚ä¹Ÿè®¸è¿™ä¸ªA/Bæµ‹è¯•ä¸**é€šè®¯**çš„å› æœæ•ˆåº”è¯„ä¼°æ¯«æ— å…³ç³»ï¼Œè¿™åœ¨å¤§å…¬å¸ä¸­æœ‰æ—¶ä¼šå‘ç”Ÿã€‚ç„¶è€Œï¼Œè¿™å¯¹æ•°æ®ç§‘å­¦å®¶æ¥è¯´æ˜¯ä¸€ä¸ªç»ä½³çš„æœºä¼šï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›æœ‰å…´è¶£äº†è§£é€šè®¯å¯¹**é”€å”®**å½±å“çš„äººã€‚
- en: Letâ€™s first have a look at the data. I import the data-generating process from
    [src.dgp](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/src/dgp.py)
    and some plotting utilities from [src.utils](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/src/utils.py).
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ•°æ®ã€‚æˆ‘ä»[src.dgp](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/src/dgp.py)ä¸­å¯¼å…¥äº†æ•°æ®ç”Ÿæˆè¿‡ç¨‹ï¼Œå¹¶ä»[src.utils](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/src/utils.py)ä¸­å¯¼å…¥äº†ä¸€äº›ç»˜å›¾å·¥å…·ã€‚
- en: '[PRE0]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![](../Images/3b39d0b9b730ab4c6c6b8c010055b58a.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3b39d0b9b730ab4c6c6b8c010055b58a.png)'
- en: Data snapshot, image by Author
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®å¿«ç…§ï¼Œå›¾æºä½œè€…
- en: 'We have information on *10,000* customers, for whom we observe whether or not
    they received the `notification`, whether they `subscribed` to the newsletter,
    and how much they `spent`. Moreover, we also observe how much they spent before
    the introduction of the subscription program (`spent_old`). For the rest of the
    article, we will label these variables as follows:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æœ‰å…³äº*10,000*åå®¢æˆ·çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬è§‚å¯Ÿäº†ä»–ä»¬æ˜¯å¦æ”¶åˆ°äº†`notification`ï¼Œæ˜¯å¦`subscribed`äº†é€šè®¯ï¼Œä»¥åŠä»–ä»¬`spent`äº†å¤šå°‘ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜è§‚å¯Ÿäº†ä»–ä»¬åœ¨è®¢é˜…ç¨‹åºæ¨å‡ºå‰çš„èŠ±è´¹æƒ…å†µï¼ˆ`spent_old`ï¼‰ã€‚åœ¨æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è¿™äº›å˜é‡æ ‡è®°å¦‚ä¸‹ï¼š
- en: '`notification`, the **treatment assignment**, *Z*'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`notification`ï¼Œ**å¤„ç†åˆ†é…**ï¼Œ*Z*'
- en: '`subscription`, the **treatment status**, *W*'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`subscription`ï¼Œ**å¤„ç†çŠ¶æ€**ï¼Œ*W*'
- en: '`spend_old`, a **feature** or control variable, *X*'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`spend_old`ï¼Œ**ç‰¹å¾**æˆ–æ§åˆ¶å˜é‡ï¼Œ*X*'
- en: '`spend`, the **outcome**, *Y*'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`spend`ï¼Œ**ç»“æœ**ï¼Œ*Y*'
- en: A **naive approach** would be to compare the difference in `spend` between customers
    that `subscribed` and those who didn't. The corresponding causal object or *estimand*
    is
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ç§**å¤©çœŸçš„æ–¹æ³•**æ˜¯æ¯”è¾ƒ`subscribed`å’Œæœª`subscribed`å®¢æˆ·ä¹‹é—´çš„`spend`å·®å¼‚ã€‚ç›¸åº”çš„å› æœå¯¹è±¡æˆ–*ä¼°è®¡é‡*æ˜¯
- en: '![](../Images/c8882007f3d588ef1c6025a86b990ab8.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c8882007f3d588ef1c6025a86b990ab8.png)'
- en: Effect of subscription on spend, image by Author
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: è®¢é˜…å¯¹èŠ±è´¹çš„å½±å“ï¼Œå›¾æºä½œè€…
- en: Letâ€™s visualize the average `spend` for the two groups.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å¯è§†åŒ–ä¸¤ä¸ªç»„çš„å¹³å‡`spend`ã€‚
- en: '[PRE1]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](../Images/87f98297db0a7ee15d89ceccefc4a77e.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/87f98297db0a7ee15d89ceccefc4a77e.png)'
- en: Spend difference between subscribers and non-subscribers, image by Author
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: è®¢é˜…è€…ä¸éè®¢é˜…è€…ä¹‹é—´çš„èŠ±è´¹å·®å¼‚ï¼Œå›¾æºä½œè€…
- en: Subscribers spend on average *11.5$* more than non-subscribers. But is it a
    **causal** effect?
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: è®¢é˜…è€…å¹³å‡èŠ±è´¹æ¯”éè®¢é˜…è€…å¤š*11.5$*ã€‚ä½†è¿™æ˜¯å¦æ˜¯**å› æœ**æ•ˆåº”ï¼Ÿ
- en: We can imagine that customers who are more active and more interested in our
    product will also be more interested in hearing news about it. For example, we
    can imagine that customers who have more **budget** to spend will also want to
    spend it better and subscribe to the newsletter.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œé‚£äº›æ›´æ´»è·ƒã€å¯¹æˆ‘ä»¬äº§å“æ›´æ„Ÿå…´è¶£çš„å®¢æˆ·ä¹Ÿä¼šå¯¹æ”¶åˆ°æœ‰å…³å®ƒçš„æ–°é—»æ›´æ„Ÿå…´è¶£ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡é‚£äº›æœ‰æ›´å¤š**é¢„ç®—**çš„å®¢æˆ·ï¼Œä¹Ÿä¼šå¸Œæœ›æ›´å¥½åœ°èŠ±è´¹è¿™äº›é¢„ç®—å¹¶è®¢é˜…é€šè®¯ã€‚
- en: We can represent the relationship between the variables in the following Directed
    Acyclic Graph (DAG). If you never heard of DAGs, I recommend reading my [introductory
    article](/b63dc69e3d8c) first.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹çš„æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰æ¥è¡¨ç¤ºå˜é‡ä¹‹é—´çš„å…³ç³»ã€‚å¦‚æœä½ ä»æœªå¬è¯´è¿‡DAGï¼Œæˆ‘å»ºè®®ä½ å…ˆé˜…è¯»æˆ‘çš„[å…¥é—¨æ–‡ç« ](/b63dc69e3d8c)ã€‚
- en: '[](/controls-b63dc69e3d8c?source=post_page-----0ce5d3d6ba20--------------------------------)
    [## DAGs and Control Variables'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/controls-b63dc69e3d8c?source=post_page-----0ce5d3d6ba20--------------------------------)
    [## DAGs å’Œæ§åˆ¶å˜é‡'
- en: Edit description
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ç¼–è¾‘æè¿°
- en: towardsdatascience.com](/controls-b63dc69e3d8c?source=post_page-----0ce5d3d6ba20--------------------------------)
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/controls-b63dc69e3d8c?source=post_page-----0ce5d3d6ba20--------------------------------)
- en: In the plot, we represent variables with circles and causal relationships with
    arrows.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å›¾ä¸­ï¼Œæˆ‘ä»¬ç”¨åœ†åœˆè¡¨ç¤ºå˜é‡ï¼Œç”¨ç®­å¤´è¡¨ç¤ºå› æœå…³ç³»ã€‚
- en: '![](../Images/f822b1f2ae8bfcfef35a526f0eaef3d4.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f822b1f2ae8bfcfef35a526f0eaef3d4.png)'
- en: DAG data-generating process, image by Author
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: DAGæ•°æ®ç”Ÿæˆè¿‡ç¨‹ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: Technically speaking, customerâ€™s **budget** is an unobservable confounder that
    opens a spurious path between our treatment, the `subscription`, and the outcome,
    customers' `spend`. Because of this, we cannot interpret the difference-in-means
    estimate of *11.5$* as causal.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: ä»æŠ€æœ¯ä¸Šè®²ï¼Œå®¢æˆ·çš„**é¢„ç®—**æ˜¯ä¸€ä¸ªä¸å¯è§‚å¯Ÿçš„æ··æ‚å› ç´ ï¼Œå®ƒåœ¨æˆ‘ä»¬çš„å¤„ç†å˜é‡`subscription`å’Œç»“æœå˜é‡å®¢æˆ·çš„`spend`ä¹‹é—´æ‰“å¼€äº†ä¸€ä¸ªè™šå‡çš„è·¯å¾„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½å°†*11.5$*çš„å‡å€¼å·®å¼‚ä¼°è®¡è§£é‡Šä¸ºå› æœå…³ç³»ã€‚
- en: What can we do?
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬èƒ½åšä»€ä¹ˆï¼Ÿ
- en: Encouragement Design
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é¼“åŠ±è®¾è®¡
- en: Unfortunately, we cannot run an A/B test because we cannot force people to subscribe
    to the newsletter. However, we can *encourage* people to subscribe. For example,
    we can send them a mobile **notification** to advertise the newsletter. This setting
    is called an **encouragement design** since we do not randomize the treatment,
    but the encouragement. The encouragement, the `notification` in our setting, is
    also called **instrumental variable**.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½è¿›è¡ŒA/Bæµ‹è¯•ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½å¼ºåˆ¶äººä»¬è®¢é˜…æ–°é—»é€šè®¯ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥*é¼“åŠ±*äººä»¬è®¢é˜…ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å‘é€ç§»åŠ¨**é€šçŸ¥**æ¥å®£ä¼ æ–°é—»é€šè®¯ã€‚è¿™ç§è®¾ç½®ç§°ä¸º**é¼“åŠ±è®¾è®¡**ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éšæœºåŒ–å¤„ç†ï¼Œè€Œæ˜¯éšæœºåŒ–é¼“åŠ±æªæ–½ã€‚åœ¨æˆ‘ä»¬çš„è®¾ç½®ä¸­ï¼Œé¼“åŠ±æªæ–½`notification`ä¹Ÿè¢«ç§°ä¸º**å·¥å…·å˜é‡**ã€‚
- en: Itâ€™s important to stress that, while being randomly assigned, the encouragement
    does *not* correspond with the treatment of interest. In fact, some people will
    *not* subscribe despite receiving the notification, and some people will subscribe
    despite *not* receiving the notification.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¦çš„æ˜¯è¦å¼ºè°ƒï¼Œè™½ç„¶è¢«éšæœºåˆ†é…ï¼Œä½†é¼“åŠ±æªæ–½*ä¸*ä¸æ„Ÿå…´è¶£çš„å¤„ç†ç›¸ç¬¦ã€‚äº‹å®ä¸Šï¼Œå°½ç®¡æ”¶åˆ°é€šçŸ¥ï¼Œæœ‰äº›äººä»ç„¶*ä¸ä¼š*è®¢é˜…ï¼Œæœ‰äº›äººåˆ™ä¼šåœ¨*æœª*æ”¶åˆ°é€šçŸ¥çš„æƒ…å†µä¸‹è®¢é˜…ã€‚
- en: '![](../Images/e85a9af44e957585d113dfcfd5dc15ad.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e85a9af44e957585d113dfcfd5dc15ad.png)'
- en: Treatment assignment and treatment status, image by Author
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å¤„ç†åˆ†é…å’Œå¤„ç†çŠ¶æ€ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: After adding the encouragement, the `notification`, the data-generating process
    can be represented with the following DAG.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: æ·»åŠ é¼“åŠ±æªæ–½`notification`åï¼Œæ•°æ®ç”Ÿæˆè¿‡ç¨‹å¯ä»¥ç”¨ä»¥ä¸‹DAGè¡¨ç¤ºã€‚
- en: '![](../Images/915f3abc0b17caafd39cb041abc62634.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/915f3abc0b17caafd39cb041abc62634.png)'
- en: DAG data-generating process, image by Author
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: DAGæ•°æ®ç”Ÿæˆè¿‡ç¨‹ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: Note that now we have closed the open path between `subscription` and `spend`.
    Therefore, we can estimate the causal effect of the subscription on the probability
    of making a sale. Let's see how.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å…³é—­äº†`subscription`å’Œ`spend`ä¹‹é—´çš„å¼€æ”¾è·¯å¾„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¼°è®¡è®¢é˜…å¯¹é”€å”®æ¦‚ç‡çš„å› æœæ•ˆåº”ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚
- en: First, we would like to understand whether the `notification` is effective or
    not. This is often referred to as the **strength** of the instrument. Thanks to
    randomization, we can attribute the average difference in `spend` between people
    who received the `notification` and people who did not, to the treatment itself.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬æƒ³äº†è§£`notification`æ˜¯å¦æœ‰æ•ˆã€‚è¿™é€šå¸¸è¢«ç§°ä¸º**å·¥å…·çš„å¼ºåº¦**ã€‚ç”±äºéšæœºåŒ–ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ”¶åˆ°`notification`çš„äººä¸æœªæ”¶åˆ°é€šçŸ¥çš„äººä¹‹é—´çš„`spend`å¹³å‡å·®å¼‚å½’å› äºå¤„ç†æœ¬èº«ã€‚
- en: '![](../Images/d1e0310144d735bca58900b40f70cba2.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d1e0310144d735bca58900b40f70cba2.png)'
- en: Effect of notification on spend, image by Author
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: é€šçŸ¥å¯¹æ¶ˆè´¹çš„å½±å“ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: Letâ€™s visualize the corresponding difference-in-means estimate.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å¯è§†åŒ–ç›¸åº”çš„å‡å€¼å·®å¼‚ä¼°è®¡ã€‚
- en: '[PRE2]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/a1fa7c89e05832b2ca528e471a9b5f02.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a1fa7c89e05832b2ca528e471a9b5f02.png)'
- en: Spend difference with and without the notification, image by Author
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: å¸¦æœ‰å’Œä¸å¸¦æœ‰é€šçŸ¥çš„æ¶ˆè´¹å·®å¼‚ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: It seems that customers who received the `notification` spend on average *1$*
    more than customers who didn't receive it. This is a sensibly lower number than
    the *11.5$* we estimated before.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: çœ‹èµ·æ¥ï¼Œæ”¶åˆ°`notification`çš„å®¢æˆ·å¹³å‡æ¯”æœªæ”¶åˆ°é€šçŸ¥çš„å®¢æˆ·å¤šèŠ±è´¹*1$*ã€‚è¿™æ¯”æˆ‘ä»¬ä¹‹å‰ä¼°è®¡çš„*11.5$*ä½å¾—å¤šã€‚
- en: However, the effect of the `notification` on `spend` is not what we are interested
    in. We would rather know the effect of the `subscription` on `spend`. In fact,
    not all customers who receive the email subscribe to the newsletter. And vice-versa,
    some people subscribe to the newsletter even without the notification.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œ`notification`å¯¹`spend`çš„å½±å“ä¸æ˜¯æˆ‘ä»¬å…³æ³¨çš„é‡ç‚¹ã€‚æˆ‘ä»¬æ›´æƒ³çŸ¥é“`subscription`å¯¹`spend`çš„å½±å“ã€‚å®é™…ä¸Šï¼Œå¹¶éæ‰€æœ‰æ”¶åˆ°é‚®ä»¶çš„å®¢æˆ·éƒ½ä¼šè®¢é˜…æ–°é—»ç®€æŠ¥ã€‚åä¹‹ï¼Œä¸€äº›äººå³ä½¿æ²¡æœ‰é€šçŸ¥ä¹Ÿä¼šè®¢é˜…æ–°é—»ç®€æŠ¥ã€‚
- en: This means that the effect that we have just computed is **diluted** by the
    fact that some people do not comply with our incentive, the `notification`. We
    have to attribute it *only* to the customers who changed their minds because of
    the newsletter. How many are these customers?
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ„å‘³ç€æˆ‘ä»¬åˆšåˆšè®¡ç®—å‡ºçš„æ•ˆæœè¢«**ç¨€é‡Š**äº†ï¼Œå› ä¸ºæœ‰äº›äººä¸éµå®ˆæˆ‘ä»¬çš„æ¿€åŠ±æªæ–½ï¼Œå³`notification`ã€‚æˆ‘ä»¬å¿…é¡»å°†å…¶*ä»…*å½’å› äºå› æ–°é—»ç®€æŠ¥è€Œæ”¹å˜ä¸»æ„çš„å®¢æˆ·ã€‚è¿™äº›å®¢æˆ·æœ‰å¤šå°‘ï¼Ÿ
- en: Letâ€™s compute the probability of `subscription`, by treatment group.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬è®¡ç®—æ¯ä¸ªå¤„ç†ç»„çš„`subscription`æ¦‚ç‡ã€‚
- en: '![](../Images/bbf16d619002efd206f4f9d55a93d3b5.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bbf16d619002efd206f4f9d55a93d3b5.png)'
- en: Effect of notification on subscription probability, image by Author
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: é€šçŸ¥å¯¹è®¢é˜…æ¦‚ç‡çš„å½±å“ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: '[PRE3]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](../Images/f3d284eb81b0eee9a4b8d8fe562ebf28.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f3d284eb81b0eee9a4b8d8fe562ebf28.png)'
- en: Subscription probability with and without the notification, image by Author
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: å¸¦æœ‰å’Œæ²¡æœ‰é€šçŸ¥çš„è®¢é˜…æ¦‚ç‡ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: Customers that received the `notification` have a *17%* higher `subscription`
    probability. In other words, it seems that the `notification` is able to make
    *17%* of our customers change their minds. From the control group, we learned
    that *28%* of them would have subscribed anyway, while we were unable to convince
    the remaining *55%*.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: æ”¶åˆ°`notification`çš„å®¢æˆ·çš„`subscription`æ¦‚ç‡é«˜å‡º*17%*ã€‚æ¢å¥è¯è¯´ï¼Œä¼¼ä¹`notification`èƒ½å¤Ÿè®©*17%*çš„å®¢æˆ·æ”¹å˜ä¸»æ„ã€‚ä»å¯¹ç…§ç»„ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°*28%*çš„äººæ— è®ºå¦‚ä½•ä¼šè®¢é˜…ï¼Œè€Œæˆ‘ä»¬æ— æ³•è¯´æœå‰©ä¸‹çš„*55%*ã€‚
- en: We now have all the ingredients we need for our main analysis
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨æ‹¥æœ‰è¿›è¡Œä¸»è¦åˆ†ææ‰€éœ€çš„æ‰€æœ‰è¦ç´ 
- en: Instrumental Variables (IV)
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å·¥å…·å˜é‡ï¼ˆIVï¼‰
- en: In this case, with a binary instrument, the `notification`, a binary treatment,
    the `subscription` decision, and a 50-50 treatment assignment probability, we
    can get a very simple **intuition** of how instrumental variables work.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šè¿‡ä¸€ä¸ªäºŒå…ƒå·¥å…·å˜é‡ï¼Œå³`notification`ï¼Œä¸€ä¸ªäºŒå…ƒå¤„ç†ï¼Œå³`subscription`å†³ç­–ï¼Œä»¥åŠ50-50çš„å¤„ç†åˆ†é…æ¦‚ç‡ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—å¯¹å·¥å…·å˜é‡å·¥ä½œåŸç†çš„éå¸¸ç®€å•çš„**ç›´è§‚**ç†è§£ã€‚
- en: We have four groups of customers, depending on whether they received the notification
    or not, and whether they subscribed or not.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æœ‰å››ç»„å®¢æˆ·ï¼Œå–å†³äºä»–ä»¬æ˜¯å¦æ”¶åˆ°äº†é€šçŸ¥ï¼Œä»¥åŠä»–ä»¬æ˜¯å¦è®¢é˜…äº†ã€‚
- en: '[PRE4]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![](../Images/0a6ea808dc6c5470f3852eb45103363d.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0a6ea808dc6c5470f3852eb45103363d.png)'
- en: Spend and number of customers by segment, image by Author
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç»†åˆ†çš„æ¶ˆè´¹å’Œå®¢æˆ·æ•°é‡ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: Letâ€™s visualize the total spend and the total number of customers within each
    bucket.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å¯è§†åŒ–æ¯ä¸ªç»„åˆ«çš„æ€»æ¶ˆè´¹å’Œæ€»å®¢æˆ·æ•°é‡ã€‚
- en: '![](../Images/ce6ce1cc64d907eac5c50286942f41bf.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ce6ce1cc64d907eac5c50286942f41bf.png)'
- en: Spend and number of customers by segment, image by Author
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç»†åˆ†çš„æ¶ˆè´¹å’Œå®¢æˆ·æ•°é‡ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: Comparing treatment (`notification`) and control group, we see that the notification
    has generated an increase in `spend` of *5kâ‚¬* (*43 + 20 - 28 - 30*). In order
    to recover the causal effect of interest, we just need to attribute the *5kâ‚¬*
    incremental `spend` to the *800* (*2200 - 1400*) customers that decided to `subscribe`
    because of the `notification`. The result is exactly *5kâ‚¬ / 800 = 6â‚¬* per customer!
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯”è¾ƒå¤„ç†ç»„ï¼ˆ`notification`ï¼‰å’Œå¯¹ç…§ç»„ï¼Œæˆ‘ä»¬çœ‹åˆ°é€šçŸ¥å¯¼è‡´äº†`spend`çš„*5kâ‚¬*çš„å¢åŠ ï¼ˆ*43 + 20 - 28 - 30*ï¼‰ã€‚ä¸ºäº†æ¢å¤æ„Ÿå…´è¶£çš„å› æœæ•ˆåº”ï¼Œæˆ‘ä»¬åªéœ€å°†*5kâ‚¬*çš„é¢å¤–`spend`å½’å› äº*800*ï¼ˆ*2200
    - 1400*ï¼‰ä¸ªå› `notification`è€Œå†³å®šè®¢é˜…çš„å®¢æˆ·ã€‚ç»“æœæ­£æ˜¯*5kâ‚¬ / 800 = 6â‚¬*æ¯ä¸ªå®¢æˆ·ï¼
- en: '![](../Images/fbc304cd1290335b37f1e52e3f9ef4eb.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fbc304cd1290335b37f1e52e3f9ef4eb.png)'
- en: Spend and number of customers by segment, image by Author
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç»†åˆ†çš„æ¶ˆè´¹å’Œå®¢æˆ·æ•°é‡ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: 'More generally, the IV estimand is given by the **ratio of two causal effects**:
    the effect of the instrument (or encouragement, or assignment) *Z*, on the outcome
    *Y*, over the effect of the instrument *Z* on the treatment (or endogenous variable)
    *W*.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´ä¸€èˆ¬åœ°ï¼ŒIVä¼°è®¡é‡ç”±**ä¸¤ä¸ªå› æœæ•ˆåº”çš„æ¯”ç‡**ç»™å‡ºï¼šå·¥å…·å˜é‡ï¼ˆæˆ–é¼“åŠ±ï¼Œæˆ–åˆ†é…ï¼‰*Z*å¯¹ç»“æœ*Y*çš„å½±å“ï¼Œé™¤ä»¥å·¥å…·å˜é‡*Z*å¯¹å¤„ç†ï¼ˆæˆ–å†…ç”Ÿå˜é‡ï¼‰*W*çš„å½±å“ã€‚
- en: '![](../Images/0dff9c46e31335614585511a727e5c17.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0dff9c46e31335614585511a727e5c17.png)'
- en: Instrumental variable estimator, image by Author
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: å·¥å…·å˜é‡ä¼°è®¡å™¨ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: To compute the IV estimate we replace the expected values with the empirical
    averages. In practice, in our case, we just divide the two difference-in-means
    estimates we computed in the plots in the previous section.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è®¡ç®— IV ä¼°è®¡é‡ï¼Œæˆ‘ä»¬å°†æœŸæœ›å€¼æ›¿æ¢ä¸ºç»éªŒå¹³å‡å€¼ã€‚å®é™…ä¸Šï¼Œåœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯å°†å‰ä¸€éƒ¨åˆ†å›¾è¡¨ä¸­è®¡ç®—çš„ä¸¤ä¸ªå‡å€¼å·®å¼‚ä¼°è®¡å€¼è¿›è¡Œé™¤æ³•ã€‚
- en: '[PRE5]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Our instrumental variable estimate of the effect of the `subscription` program
    on `spend` is *6$*, as anticipated in the illustrations above! Note that the math
    in the illustration works *only* in the special case of an exact 50-50 assignment.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯¹ `subscription` è®¡åˆ’å¯¹ `spend` å½±å“çš„å·¥å…·å˜é‡ä¼°è®¡å€¼æ˜¯ *6$*ï¼Œè¿™åœ¨ä¸Šé¢çš„å›¾ç¤ºä¸­å·²ç»é¢„æœŸåˆ°ï¼è¯·æ³¨æ„ï¼Œå›¾ç¤ºä¸­çš„æ•°å­¦ä»…åœ¨å®Œå…¨
    50-50 åˆ†é…çš„ç‰¹æ®Šæƒ…å†µä¸‹æœ‰æ•ˆã€‚
- en: More generally, it can be shown that the formula of the IV estimator is given
    by a ratio of covariances,
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´ä¸€èˆ¬åœ°ï¼Œå¯ä»¥è¯æ˜ IV ä¼°è®¡é‡çš„å…¬å¼ç”±åæ–¹å·®æ¯”ç‡ç»™å‡ºï¼Œ
- en: '![](../Images/b9a11b905e4a2cdcf206533c6057b23c.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b9a11b905e4a2cdcf206533c6057b23c.png)'
- en: IV estimator as ratio of covariances, image by Author
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: IV ä¼°è®¡é‡ä½œä¸ºåæ–¹å·®æ¯”ç‡ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: or, in matrix notation,
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ–è€…ï¼Œä½¿ç”¨çŸ©é˜µç¬¦å·è¡¨ç¤ºï¼Œ
- en: '![](../Images/1b170149643db64825cdab10bbbfe5fe.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1b170149643db64825cdab10bbbfe5fe.png)'
- en: IV estimator in matrix notation, image by Author
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: IV ä¼°è®¡é‡çš„çŸ©é˜µç¬¦å·è¡¨ç¤ºï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: IV Extensions
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: IV æ‰©å±•
- en: What would happen if we had more instruments or other control variables? For
    example, we could have run other experiments to encourage customers to `subscribe`.
    Or, as in our case, we could have other variables that we can add to the model
    in order to increase prediction accuracy, such as previous spend levels, `spend_old`.
    How do we include them in the model?
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æœ‰æ›´å¤šçš„å·¥å…·å˜é‡æˆ–å…¶ä»–æ§åˆ¶å˜é‡ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå…¶ä»–å®éªŒä»¥é¼“åŠ±å®¢æˆ· `subscribe`ã€‚æˆ–è€…ï¼Œå¦‚æˆ‘ä»¬çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ å…¶ä»–å˜é‡åˆ°æ¨¡å‹ä¸­ä»¥æé«˜é¢„æµ‹å‡†ç¡®æ€§ï¼Œå¦‚å…ˆå‰çš„æ¶ˆè´¹æ°´å¹³
    `spend_old`ã€‚æˆ‘ä»¬å¦‚ä½•å°†å®ƒä»¬åŒ…å«åœ¨æ¨¡å‹ä¸­ï¼Ÿ
- en: The long-story-short is that when we have multiple instruments, the instrumental
    variable formula can be rewritten as
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: é•¿è¯çŸ­è¯´ï¼Œå½“æˆ‘ä»¬æœ‰å¤šä¸ªå·¥å…·å˜é‡æ—¶ï¼Œå·¥å…·å˜é‡å…¬å¼å¯ä»¥é‡å†™ä¸º
- en: '![](../Images/3094eff0394ce1f00e82100acb60b21d.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3094eff0394ce1f00e82100acb60b21d.png)'
- en: Two Stage Least Squares estimator, image by Author
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤é˜¶æ®µæœ€å°äºŒä¹˜ä¼°è®¡é‡ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: where *WÌ‚* is the projection of *W* onto *Z*, i.e. in practice the predicted
    treatment status, given the treatment assignment. This prediction step is called
    the **first stage**. This formula should remind you of the OLS estimator formula.
    Indeed, this is equivalent to a linear regression of our outcome *Y* on the predicted
    treatment *W*, given the assignment *Z*. This step is called the **second stage**.
    Overall, since the estimation procedure can be split into two separate stages,
    this is referred to as the **Two-Stage Least Squares (2SLS) Estimator**.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ *WÌ‚* æ˜¯ *W* åœ¨ *Z* ä¸Šçš„æŠ•å½±ï¼Œå³åœ¨å®è·µä¸­æ˜¯ç»™å®šå¤„ç†åˆ†é…çš„é¢„æµ‹å¤„ç†çŠ¶æ€ã€‚è¿™ä¸ªé¢„æµ‹æ­¥éª¤ç§°ä¸º**ç¬¬ä¸€é˜¶æ®µ**ã€‚è¿™ä¸ªå…¬å¼åº”è¯¥è®©ä½ æƒ³åˆ° OLS
    ä¼°è®¡é‡å…¬å¼ã€‚å®é™…ä¸Šï¼Œè¿™ç›¸å½“äºå°†æˆ‘ä»¬çš„ç»“æœ *Y* å¯¹é¢„æµ‹å¤„ç† *W* è¿›è¡Œçº¿æ€§å›å½’ï¼Œç»™å®šåˆ†é… *Z*ã€‚è¿™ä¸ªæ­¥éª¤ç§°ä¸º**ç¬¬äºŒé˜¶æ®µ**ã€‚æ€»ä½“æ¥è¯´ï¼Œç”±äºä¼°è®¡è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„é˜¶æ®µï¼Œå› æ­¤ç§°ä¸º**ä¸¤é˜¶æ®µæœ€å°äºŒä¹˜ï¼ˆ2SLSï¼‰ä¼°è®¡é‡**ã€‚
- en: The two-stage formulation is particularly evident in the implementation of most
    IV packages, where we express the treatment as the result of a regression on the
    instrument. In the `[IV2SLS](https://bashtage.github.io/linearmodels/iv/iv/linearmodels.iv.model.IV2SLS.html)`
    package this is done by using square brackets.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤é˜¶æ®µå…¬å¼åœ¨å¤§å¤šæ•° IV åŒ…çš„å®ç°ä¸­å°¤ä¸ºæ˜æ˜¾ï¼Œåœ¨è¿™äº›åŒ…ä¸­ï¼Œæˆ‘ä»¬å°†å¤„ç†è¡¨ç¤ºä¸ºå¯¹å·¥å…·å˜é‡çš„å›å½’ç»“æœã€‚åœ¨ `[IV2SLS](https://bashtage.github.io/linearmodels/iv/iv/linearmodels.iv.model.IV2SLS.html)`
    åŒ…ä¸­ï¼Œè¿™é€šè¿‡ä½¿ç”¨æ–¹æ‹¬å·æ¥å®Œæˆã€‚
- en: '[PRE7]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![](../Images/4181238d9c17e68fa7fb91c9d9c13c00.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4181238d9c17e68fa7fb91c9d9c13c00.png)'
- en: IV estimates, image by Author
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: IV ä¼°è®¡é‡ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: We can verify that this is algebraically equivalent to first regressing `subscription`
    on `notification` and then regressing `spend` on the predicted `subscription`
    probability. Below we run the two regressions and report the estimates from the
    second stage.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥éªŒè¯è¿™åœ¨ä»£æ•°ä¸Šç­‰åŒäºé¦–å…ˆå¯¹ `subscription` å’Œ `notification` è¿›è¡Œå›å½’ï¼Œç„¶åå¯¹é¢„æµ‹çš„ `subscription`
    æ¦‚ç‡è¿›è¡Œ `spend` å›å½’ã€‚ä¸‹é¢æˆ‘ä»¬è¿è¡Œè¿™ä¸¤ä¸ªå›å½’å¹¶æŠ¥å‘Šç¬¬äºŒé˜¶æ®µçš„ä¼°è®¡å€¼ã€‚
- en: '[PRE8]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](../Images/09996b31dbe5c970f38959f648b899f5.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/09996b31dbe5c970f38959f648b899f5.png)'
- en: 2SLS estimates, image by Author
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 2SLS ä¼°è®¡é‡ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: The coefficients are indeed identical!
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: ç³»æ•°ç¡®å®æ˜¯ç›¸åŒçš„ï¼
- en: Lastly, the two-stage formulation above should also make the inclusion of additional
    **covariates** quite intuitive. We just add the covariates to both stages.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œä¸Šè¿°ä¸¤é˜¶æ®µçš„å…¬å¼ä¹Ÿä½¿å¾—åŒ…å«é¢å¤–çš„**åå˜é‡**å˜å¾—ç›¸å½“ç›´è§‚ã€‚æˆ‘ä»¬åªéœ€å°†åå˜é‡æ·»åŠ åˆ°ä¸¤ä¸ªé˜¶æ®µã€‚
- en: '[PRE9]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](../Images/35da75c1b352a4e879d06291bf4b2949.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/35da75c1b352a4e879d06291bf4b2949.png)'
- en: 2SLS estimates, image by Author
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 2SLS ä¼°è®¡é‡ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: We can again verify that the estimated coefficients are identical.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥å†æ¬¡éªŒè¯ï¼Œä¼°è®¡çš„ç³»æ•°æ˜¯ç›¸åŒçš„ã€‚
- en: '[PRE10]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](../Images/183282a1aa626a2d9bc2960b53fb3056.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/183282a1aa626a2d9bc2960b53fb3056.png)'
- en: 2SLS estimates, image by Author
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 2SLSä¼°è®¡ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: Including previous spend levels in the regression has indeed decreased the standard
    errors from *0.5* to *0.1*.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: å°†ä¹‹å‰çš„æ¶ˆè´¹æ°´å¹³çº³å…¥å›å½’ç¡®å®å°†æ ‡å‡†è¯¯å·®ä»*0.5*é™ä½åˆ°äº†*0.1*ã€‚
- en: The Limits of IV
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: IVçš„é™åˆ¶
- en: The main limit of instrumental variables in an experimental setting, as analyzed
    in this article, is that they estimate a very â€œspecialâ€ causal effect. As we have
    seen in the previous section, we have to re-scale the total effect by the number
    of customers who decided to `subscribe` *because of* the `newsletter`. This means
    that we can estimate the effect only for those customers who *complied* with our
    intervention. This set of customers is usually called **compliers** and the corresponding
    causal effect is called the **Local Average Treatment Effect (LATE)** or **Compliers
    Average Causal Effect (CACE)**.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å®éªŒè®¾ç½®ä¸­ï¼Œå·¥å…·å˜é‡çš„ä¸»è¦é™åˆ¶ï¼Œå¦‚æœ¬æ–‡åˆ†ææ‰€ç¤ºï¼Œæ˜¯å®ƒä»¬ä¼°è®¡çš„æ˜¯ä¸€ç§éå¸¸â€œç‰¹æ®Šâ€çš„å› æœæ•ˆåº”ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨å‰ä¸€èŠ‚ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡å†³å®š`è®¢é˜…`*å› ä¸º*`é€šè®¯`çš„å®¢æˆ·æ•°é‡æ¥é‡æ–°ç¼©æ”¾æ€»ä½“æ•ˆåº”ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬åªèƒ½ä¼°è®¡é‚£äº›*éµå®ˆ*æˆ‘ä»¬å¹²é¢„çš„å®¢æˆ·çš„æ•ˆæœã€‚è¿™ä¸€ç±»å®¢æˆ·é€šå¸¸è¢«ç§°ä¸º**åˆè§„è€…**ï¼Œç›¸åº”çš„å› æœæ•ˆåº”è¢«ç§°ä¸º**å±€éƒ¨å¹³å‡å¤„ç†æ•ˆåº”ï¼ˆLATEï¼‰**æˆ–**åˆè§„è€…å¹³å‡å› æœæ•ˆåº”ï¼ˆCACEï¼‰**ã€‚
- en: We are unfortunately unable to say anything about customers who subscribed to
    the `newsletter` even without the `notification`, called the **always-takers**,
    and those that we couldn't convince with the `notification`, the **never-takers**.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•å¯¹é‚£äº›å³ä½¿æ²¡æœ‰`é€šçŸ¥`ä¹Ÿè®¢é˜…äº†`é€šè®¯`çš„å®¢æˆ·ï¼ˆå³**æ€»æ˜¯æ¥å—è€…**ï¼‰ä»¥åŠé‚£äº›æˆ‘ä»¬æ— æ³•é€šè¿‡`é€šçŸ¥`è¯´æœçš„å®¢æˆ·ï¼ˆå³**ä»ä¸æ¥å—è€…**ï¼‰åšå‡ºä»»ä½•åˆ¤æ–­ã€‚
- en: 'Another limit of IV concerns its **assumptions**. In the last paragraph, we
    talked about three groups of customers, the compliers (our favorite one), always-takers,
    and never-takers. You might have noticed that this characterization implies the
    existence of a fourth group: the **defiers**. Those are the customers that would
    have `subscribed` to the newsletter if we had not received the `notification`.
    However, because of the notification, they changed their mind, *defying* the intent
    of the instrument.'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: IVçš„å¦ä¸€ä¸ªé™åˆ¶æ¶‰åŠå…¶**å‡è®¾**ã€‚åœ¨ä¸Šä¸€æ®µä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä¸‰ç±»å®¢æˆ·ï¼šåˆè§„è€…ï¼ˆæˆ‘ä»¬æœ€å–œæ¬¢çš„ï¼‰ã€æ€»æ˜¯æ¥å—è€…å’Œä»ä¸æ¥å—è€…ã€‚ä½ å¯èƒ½æ³¨æ„åˆ°è¿™ç§åˆ†ç±»éšå«ç€ç¬¬å››ç±»ç¾¤ä½“çš„å­˜åœ¨ï¼š**è¿æŠ—è€…**ã€‚è¿™äº›å®¢æˆ·å¦‚æœæˆ‘ä»¬æ²¡æœ‰æ”¶åˆ°`é€šçŸ¥`çš„è¯ï¼Œæœ¬æ¥ä¼š`è®¢é˜…`é€šè®¯ã€‚ç„¶è€Œï¼Œç”±äºæ”¶åˆ°é€šçŸ¥ï¼Œä»–ä»¬æ”¹å˜äº†ä¸»æ„ï¼Œ*è¿èƒŒäº†*å·¥å…·å˜é‡çš„æ„å›¾ã€‚
- en: '![](../Images/0d790a0bb8228934c1f0284c41211662.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0d790a0bb8228934c1f0284c41211662.png)'
- en: Groups by treatment assignment and treatment status, image by Author
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®å¤„ç†åˆ†é…å’Œå¤„ç†çŠ¶æ€åˆ†ç»„ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: In order to be able to draw causal conclusions, we have to assume that there
    are **no defiers** in the experiment, otherwise our re-scaling would be wrong
    and our estimates biased.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†èƒ½å¤Ÿå¾—å‡ºå› æœç»“è®ºï¼Œæˆ‘ä»¬å¿…é¡»å‡è®¾å®éªŒä¸­**æ²¡æœ‰è¿æŠ—è€…**ï¼Œå¦åˆ™æˆ‘ä»¬çš„é‡æ–°ç¼©æ”¾å°†ä¼šé”™è¯¯ï¼Œæˆ‘ä»¬çš„ä¼°è®¡ä¹Ÿä¼šæœ‰åå·®ã€‚
- en: Another crucial assumption lurking in the background is what is usually called
    the **exclusion restriction**. This assumption states that the instrument, the
    `notification`, only affects the outcome, `spend`, through the treatment, the
    `subscription`. A potential violation in our setting could be if the notification
    was *waking up* sleeping users. Imagine a customer who wanted to make a sale and
    already added items to the basket, but forgot to checkout. The subscription notification
    might remind the users to checkout and therefore directly impact `spend`. As you
    can imagine, the IV estimate would be biased because we are wrongly attributing
    some sales to the `subscription`, while they were a *direct* effect of the `notification`
    itself.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€ä¸ªåœ¨èƒŒæ™¯ä¸­æ½œåœ¨çš„é‡è¦å‡è®¾æ˜¯é€šå¸¸æ‰€è¯´çš„**æ’é™¤é™åˆ¶**ã€‚è¿™ä¸ªå‡è®¾æŒ‡å‡ºï¼Œå·¥å…·å˜é‡`é€šçŸ¥`åªé€šè¿‡å¤„ç†å˜é‡`è®¢é˜…`å½±å“ç»“æœ`æ¶ˆè´¹`ã€‚åœ¨æˆ‘ä»¬çš„è®¾ç½®ä¸­ï¼Œä¸€ä¸ªæ½œåœ¨çš„è¿èƒŒæƒ…å†µæ˜¯é€šçŸ¥å¯èƒ½ä¼š*å”¤é†’*å¤„äºä¼‘çœ çŠ¶æ€çš„ç”¨æˆ·ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªå®¢æˆ·æƒ³è¦å®Œæˆä¸€ç¬”äº¤æ˜“ï¼Œå¹¶ä¸”å·²ç»å°†ç‰©å“æ·»åŠ åˆ°è´­ç‰©è½¦ä¸­ï¼Œä½†å¿˜è®°äº†ç»“è´¦ã€‚è®¢é˜…é€šçŸ¥å¯èƒ½ä¼šæé†’ç”¨æˆ·ç»“è´¦ï¼Œä»è€Œç›´æ¥å½±å“`æ¶ˆè´¹`ã€‚å¦‚ä½ æ‰€æƒ³ï¼ŒIVä¼°è®¡ä¼šæœ‰åå·®ï¼Œå› ä¸ºæˆ‘ä»¬é”™è¯¯åœ°å°†ä¸€äº›é”€å”®å½’å› äº`è®¢é˜…`ï¼Œè€Œè¿™äº›é”€å”®å®é™…ä¸Šæ˜¯`é€šçŸ¥`æœ¬èº«çš„*ç›´æ¥*æ•ˆæœã€‚
- en: Conclusion
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: In this article, we have introduced **instrumental variables** in an experimental
    setting. When we cannot randomize the treatment because of ethical, legal, or
    technical constraints, we might still consider randomizing an **incentive** to
    take up the treatment. This allows us to make causal statements, but only for
    a subset of the overall population, the **compliers**, i.e. the customers that
    comply with our incentive and take up the treatment *because of* the incentive.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†**å·¥å…·å˜é‡**åœ¨å®éªŒç¯å¢ƒä¸­çš„åº”ç”¨ã€‚å½“æˆ‘ä»¬å› ä¸ºä¼¦ç†ã€æ³•å¾‹æˆ–æŠ€æœ¯é™åˆ¶è€Œä¸èƒ½éšæœºåŒ–å¤„ç†æ—¶ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è€ƒè™‘éšæœºåŒ–**æ¿€åŠ±**æ¥æ¥å—å¤„ç†ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåšå‡ºå› æœé™ˆè¿°ï¼Œä½†ä»…é’ˆå¯¹æ•´ä½“äººç¾¤ä¸­çš„ä¸€ä¸ªå­é›†ï¼Œå³**åˆè§„è€…**ï¼Œå³å› æ¿€åŠ±è€Œæ¥å—å¤„ç†çš„å®¢æˆ·ã€‚
- en: Itâ€™s important to note that instrumental variables can be also used in **observational
    settings**. However, in that case, the **exclusion restriction** assumption that
    we mentioned in the previous section becomes harder to justify. In fact, we need
    a setting in which our instrument does not affect the outcome through *any other*
    channel besides the treatment. Technically, the exclusion restriction assumption
    is
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œå·¥å…·å˜é‡ä¹Ÿå¯ä»¥åœ¨**è§‚å¯Ÿè®¾ç½®**ä¸­ä½¿ç”¨ã€‚ç„¶è€Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹‹å‰æåˆ°çš„**æ’é™¤é™åˆ¶**å‡è®¾å˜å¾—æ›´éš¾ä»¥è¯æ˜ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬çš„å·¥å…·å˜é‡ä¸ä¼šé€šè¿‡*ä»»ä½•å…¶ä»–*é€”å¾„å½±å“ç»“æœã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œæ’é™¤é™åˆ¶å‡è®¾æ˜¯
- en: '![](../Images/cc648c7a6f632de7f29a0bf1e315aa06.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cc648c7a6f632de7f29a0bf1e315aa06.png)'
- en: Exclusion restriction, image by Author
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: æ’é™¤é™åˆ¶ï¼Œä½œè€…å›¾ç‰‡
- en: This assumption is harder to justify when we do not control the design of the
    encouragement assignment. However, if satisfied, it opens the door to causal inference
    in completely new settings.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æˆ‘ä»¬æ— æ³•æ§åˆ¶é¼“åŠ±åˆ†é…çš„è®¾è®¡æ—¶ï¼Œè¿™ä¸€å‡è®¾æ›´éš¾ä»¥è¯æ˜ã€‚ç„¶è€Œï¼Œå¦‚æœå‡è®¾æˆç«‹ï¼Œå®ƒä¸ºåœ¨å…¨æ–°ç¯å¢ƒä¸‹è¿›è¡Œå› æœæ¨æ–­æ‰“å¼€äº†å¤§é—¨ã€‚
- en: References
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å‚è€ƒæ–‡çŒ®
- en: Spotify (2023), [Encouragement Designs and Instrumental Variables for A/B Testing](https://engineering.atspotify.com/2023/08/encouragement-designs-and-instrumental-variables-for-a-b-testing/)
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Spotify (2023), [A/B æµ‹è¯•ä¸­çš„é¼“åŠ±è®¾è®¡å’Œå·¥å…·å˜é‡](https://engineering.atspotify.com/2023/08/encouragement-designs-and-instrumental-variables-for-a-b-testing/)
- en: Goldsmith-Pinkham (2021), [Instrumental Variables](https://www.youtube.com/watch?v=LEAx0He_KBI)
    video lecture
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Goldsmith-Pinkham (2021), [å·¥å…·å˜é‡](https://www.youtube.com/watch?v=LEAx0He_KBI)
    è§†é¢‘è®²åº§
- en: Ding (2023), [A First Course in Causal Inference](https://arxiv.org/abs/2305.18793)
    notes
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ding (2023), [å› æœæ¨æ–­çš„ç¬¬ä¸€è¯¾ç¨‹](https://arxiv.org/abs/2305.18793) æ³¨é‡Š
- en: Related Articles
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç›¸å…³æ–‡ç« 
- en: '[DAGs and Control Variables](/b63dc69e3d8c)'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[DAGs å’Œæ§åˆ¶å˜é‡](/b63dc69e3d8c)'
- en: '[Understanding Omitted Variable Bias](/344ac1477699)'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[ç†è§£é—æ¼å˜é‡åå·®](/344ac1477699)'
- en: '[Understanding The Frisch-Waugh-Lovell Theorem](/59f801eb3299)'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[ç†è§£ Frisch-Waugh-Lovell å®šç†](/59f801eb3299)'
- en: Code
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä»£ç 
- en: 'You can find the original Jupyter Notebook here:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°åŸå§‹çš„ Jupyter Notebookï¼š
- en: '[](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/instrumental_variables.ipynb?source=post_page-----0ce5d3d6ba20--------------------------------)
    [## Blog-Posts/notebooks/instrumental_variables.ipynb at main Â· matteocourthoud/Blog-Posts'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/instrumental_variables.ipynb?source=post_page-----0ce5d3d6ba20--------------------------------)
    [## Blog-Posts/notebooks/instrumental_variables.ipynb at main Â· matteocourthoud/Blog-Posts'
- en: Code and notebooks for my Medium blog posts. Contribute to matteocourthoud/Blog-Posts
    development by creating anâ€¦
  id: totrans-143
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ä»£ç å’Œç¬”è®°æœ¬ç”¨äºæˆ‘çš„ Medium åšå®¢æ–‡ç« ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ª...
- en: github.com](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/instrumental_variables.ipynb?source=post_page-----0ce5d3d6ba20--------------------------------)
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '[github.com](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/instrumental_variables.ipynb?source=post_page-----0ce5d3d6ba20--------------------------------)'
- en: Thank you for reading!
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ„Ÿè°¢é˜…è¯»ï¼
- en: '*I really appreciate it!* ğŸ¤— *If you liked the post and want to see more, consider*
    [***following me***](https://medium.com/@matteo.courthoud)*. I post once a week
    on topics related to causal inference and data analysis. I try to keep my posts
    simple but precise, always providing code, examples, and simulations.*'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '*æˆ‘éå¸¸æ„Ÿæ¿€ï¼* ğŸ¤— *å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« å¹¶å¸Œæœ›çœ‹åˆ°æ›´å¤šå†…å®¹ï¼Œè¯·è€ƒè™‘* [***å…³æ³¨æˆ‘***](https://medium.com/@matteo.courthoud)*ã€‚æˆ‘æ¯å‘¨å‘å¸ƒä¸€æ¬¡ä¸å› æœæ¨æ–­å’Œæ•°æ®åˆ†æç›¸å…³çš„ä¸»é¢˜ã€‚æˆ‘å°½é‡ä¿æŒå¸–å­ç®€æ´ä½†å‡†ç¡®ï¼Œæ€»æ˜¯æä¾›ä»£ç ã€ç¤ºä¾‹å’Œæ¨¡æ‹Ÿã€‚*'
- en: '*Also, a small* ***disclaimer****: I write to learn, so mistakes are the norm,
    even though I try my best. Please, when you spot them, let me know. I also appreciate
    suggestions on new topics!*'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '*æ­¤å¤–ï¼Œç®€å•çš„* ***å…è´£å£°æ˜***ï¼šæˆ‘å†™ä½œæ˜¯ä¸ºäº†å­¦ä¹ ï¼Œæ‰€ä»¥é”™è¯¯æ˜¯å¸¸è§çš„ï¼Œå°½ç®¡æˆ‘å°½åŠ›è€Œä¸ºã€‚è¯·åœ¨å‘ç°é”™è¯¯æ—¶å‘Šè¯‰æˆ‘ã€‚æˆ‘ä¹Ÿæ¬¢è¿å¯¹æ–°ä¸»é¢˜çš„å»ºè®®ï¼*'
