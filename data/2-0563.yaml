- en: Converting a Flat Table to a Good Data Model in Power Query
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将平坦表格转换为 Power Query 中的良好数据模型
- en: 原文：[https://towardsdatascience.com/converting-a-flat-table-to-a-good-data-model-in-power-query-46208215f17a](https://towardsdatascience.com/converting-a-flat-table-to-a-good-data-model-in-power-query-46208215f17a)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/converting-a-flat-table-to-a-good-data-model-in-power-query-46208215f17a](https://towardsdatascience.com/converting-a-flat-table-to-a-good-data-model-in-power-query-46208215f17a)
- en: '*When loading a wide Excel table into Power BI, we end up with a suboptimal
    data model. What can we do to create a good data model? What even is a “good”
    data model? Let’s dig into it.*'
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '*当将一个宽 Excel 表格加载到 Power BI 中时，我们最终会得到一个次优的数据模型。我们可以做什么来创建一个好的数据模型？什么才算是“好的”数据模型？让我们深入了解一下。*'
- en: '[](https://medium.com/@salvatorecagliari?source=post_page-----46208215f17a--------------------------------)[![Salvatore
    Cagliari](../Images/a24b0cefab6e707cfee06cde9e857559.png)](https://medium.com/@salvatorecagliari?source=post_page-----46208215f17a--------------------------------)[](https://towardsdatascience.com/?source=post_page-----46208215f17a--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----46208215f17a--------------------------------)
    [Salvatore Cagliari](https://medium.com/@salvatorecagliari?source=post_page-----46208215f17a--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@salvatorecagliari?source=post_page-----46208215f17a--------------------------------)[![Salvatore
    Cagliari](../Images/a24b0cefab6e707cfee06cde9e857559.png)](https://medium.com/@salvatorecagliari?source=post_page-----46208215f17a--------------------------------)[](https://towardsdatascience.com/?source=post_page-----46208215f17a--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----46208215f17a--------------------------------)
    [Salvatore Cagliari](https://medium.com/@salvatorecagliari?source=post_page-----46208215f17a--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----46208215f17a--------------------------------)
    ·12 min read·Dec 22, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发布在 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----46208215f17a--------------------------------)
    ·12 分钟阅读·2023 年 12 月 22 日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/d7991f273e6117d3d4ccf54cabef8548.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d7991f273e6117d3d4ccf54cabef8548.png)'
- en: Photo by [Kaleidico](https://unsplash.com/@kaleidico?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由 [Kaleidico](https://unsplash.com/@kaleidico?utm_source=medium&utm_medium=referral)
    提供，发布在 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Introduction
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 引言
- en: 'Just another day at the Office: A Client called me to fix something on his
    Power BI report. I looked at the data and found one wide table with 30, 40, or
    more columns.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 只是办公室里的另一天：一个客户打电话让我修复他 Power BI 报告中的某些内容。我查看了数据，发现有一个宽表，包含 30、40 或更多列。
- en: 'I asked the natural question: “What is the source for this table?”'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我问了一个自然的问题：“这个表格的来源是什么？”
- en: The Answer was “Excel; what else?”
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 答案是“Excel，还能有什么？”
- en: “Of course”, I think.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: “当然，”我想。
- en: 'My next question: “Can we build a good Data model out of it?”'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我的下一个问题：“我们能从中建立一个好的数据模型吗？”
- en: 'My client: “Why?”'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我的客户：“为什么？”
- en: And here we are.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是我们现在的状况。
- en: Ideally, I would import the source file into a relational database and convert
    the data into a nice Data model.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，我会将源文件导入到关系数据库中，并将数据转换为一个不错的数据模型。
- en: Unfortunately, it is the exception that my clients want to pay for something
    that, at first glance, doesn’t benefit them.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，我的客户通常不愿意为那些初看上去对他们没有好处的东西付费。
- en: But why do I want to have a good data model? A flat table works well, isn’t
    it?
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 但是为什么我想要一个好的数据模型？一个平坦的表格不是也很好吗？
- en: Again, at first glance, yes.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 再看一眼，确实如此。
- en: There is no problem with a few thousand rows.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 几千行的数据没有问题。
- en: But as soon as the amount of data increases, problems can build up.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 但一旦数据量增加，问题可能会积累。
- en: 'Here is the short version of an answer to the “Why?” question:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这是对“为什么？”问题的简短回答：
- en: So, why a good Data model?
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 那么，为什么需要一个好的数据模型？
- en: There are a lot of reasons why I want to have a “Good data model”.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 有很多原因让我想要一个“好的数据模型”。
- en: The two short reasons are Efficiency and Usability.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 两个简短的原因是效率和可用性。
- en: When separating the types of data into separate tables and connecting them with
    Relationships, Power BI can work in a more efficient way.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 当将数据类型分隔到不同的表中，并通过关系将它们连接起来时，Power BI 可以以更高效的方式工作。
- en: Moreover, it is possible to reduce the size of the Power BI file by removing
    redundancies.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，通过去除冗余，可以减少 Power BI 文件的大小。
- en: I strongly recommend reading the SQLBI article on this topic. You can find the
    link in the References section below to get a thorough answer to this question.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我强烈推荐阅读 SQLBI 上的相关文章。你可以在下方的参考文献部分找到链接，以获取这个问题的详细答案。
- en: Second, someone who wants to consume the data model can find all columns (a.k.a.
    attributes) grouped in separate tables instead of searching them within a long,
    alphabetically sorted list.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，想要使用数据模型的人可以在单独的表中找到所有列（即属性），而不是在一个长的按字母排序的列表中搜索。
- en: So, now that we know why, the next question is, what is a good Data model?
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道了为什么，接下来的问题是，什么是一个好的数据模型？
- en: 'The answer is: A Star Schema.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 答案是：一个星型模式。
- en: What the heck is a Star Schema?
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么鬼是星型模式？
- en: You can jump to the next section if you already know what a Star Schema is.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经知道什么是星型模式，可以跳到下一节。
- en: 'My original Data model is the following:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我的原始数据模型如下：
- en: '![](../Images/f36c5e3c746952786885fa044e383a92.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f36c5e3c746952786885fa044e383a92.png)'
- en: Figure 1 — Original Data model with one table with 27 (!) columns (Figure by
    the Author)
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1 — 原始数据模型，包含一个有 27 (!) 列的表（图由作者提供）
- en: The central table is the large one in the middle of the Diagram named “Azure_UsageDetails”.
    Let’s call it the “original table”.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 中心表是图中间的那个大表，名为“Azure_UsageDetails”。我们称之为“原始表”。
- en: The other two tables are the Date table used for the reporting over time.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 其他两个表是用于时间报告的日期表。
- en: 'When you look closely at the original table, you can find some interesting
    columns, like:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 当你仔细查看原始表时，你可以找到一些有趣的列，例如：
- en: BillingProfile
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BillingProfile
- en: MeterName
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MeterName
- en: SubscriptionName
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SubscriptionName
- en: The common thing with these columns is that while I have around 55’000 rows
    in the table, these columns have only a small number of different values.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 这些列的共同点是，虽然表中有大约 55,000 行，这些列只有少量不同的值。
- en: This means that the Cardinality is low.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着基数是低的。
- en: Moreover, these columns describe my data. They do not contain any value, like
    “Quantity” or “UnitPrice”.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，这些列描述了我的数据。它们不包含任何值，例如“Quantity”或“UnitPrice”。
- en: The target is to move these columns into separate tables, called Dimensions,
    to get shorter tables containing only the distinct values, or combination of values,
    from these columns.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 目标是将这些列移动到单独的表中，称为维度表，以获得只包含这些列中的唯一值或值组合的较短表。
- en: 'Look at the following diagram:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 看一下下面的图示：
- en: '![](../Images/7fb5572a2f6882c3c5ba05ff58b08f43.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7fb5572a2f6882c3c5ba05ff58b08f43.png)'
- en: Figure 2 — Target Data model as a Start Schema (Figure by the Author)
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2 — 作为星型模式的目标数据模型（图由作者提供）
- en: Now, you can understand why it is called a Star Schema.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以理解为什么它被称为星型模式。
- en: We can call it a Squid Schema, but nobody will understand us.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以称之为鱿鱼模式，但没有人会理解我们。
- en: As you can see, each Dimension table has an ID column connected to the corresponding
    ID column in the central table.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所见，每个维度表都有一个ID列与中心表中的相应ID列相连。
- en: The ID columns should always be of Data type integer. **Never** Text columns.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ID 列应始终是整数数据类型。**绝不要**文本列。
- en: The table at the center of the star schema is called a “Fact”-table. It only
    contains values for each event, transaction, or data point.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 星型模型中心的表称为“事实”表。它仅包含每个事件、交易或数据点的值。
- en: Let’s start
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 让我们开始吧
- en: 'OK, now we need to perform some preparation steps:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，现在我们需要执行一些准备步骤：
- en: Find columns with a low cardinality.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查找低基数的列。
- en: Find columns that should be grouped.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查找需要分组的列。
- en: Define names for each Dimension table.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为每个维度表定义名称。
- en: Replace all empty cells.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 替换所有空单元格。
- en: Duplicate the table with the data.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制包含数据的表。
- en: First, open Power Query.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，打开 Power Query。
- en: 'Second, we enable the profiling of the data:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，我们启用数据分析：
- en: '![](../Images/dd9e6d9cef5d7f4e370b3b8278fee58d.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dd9e6d9cef5d7f4e370b3b8278fee58d.png)'
- en: Figure 3 — Enabling Data Profiling in Power Query (Figure by the Author)
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3 — 在 Power Query 中启用数据分析（图由作者提供）
- en: Power Query shows the Profiling only for the first 1000 rows. It can be a good
    idea to enable the profiling of the entire data set.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: Power Query 仅显示前 1000 行的分析结果。启用整个数据集的分析可能是个好主意。
- en: 'On the bottom left corner, click on the text “Column profiling based on top
    1000 rows” and switch to the option “Column profiling based on entire data set”:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在左下角，点击文本“基于前 1000 行的列分析”，然后切换到“基于整个数据集的列分析”选项：
- en: '![](../Images/a67404f72cf0133623fc5f4e65b6b318.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a67404f72cf0133623fc5f4e65b6b318.png)'
- en: Figure 4 — Switch Profiling on the entire data set (Figure by the Author)
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4 — 在整个数据集上开启分析（图由作者提供）
- en: Depending on the amount of data, it will need some time to load the whole data
    set and calculate the profiling.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 根据数据量，加载整个数据集并计算分析可能需要一些时间。
- en: 'When I look at my data, I find the first three candidates here:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 当我查看我的数据时，我发现这里有前三个候选项：
- en: '![](../Images/e191d4006f354c28a93c949d4887687d.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e191d4006f354c28a93c949d4887687d.png)'
- en: Figure 5 — First three Candidates for Dimensions (Figure by the Author)
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图5 — 维度的前三个候选（作者制作的图）
- en: 'Out of these, I can create three Dimensions:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些中，我可以创建三个维度：
- en: BillingProfiles
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计费配置文件
- en: Subscriptions
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 订阅
- en: Meters
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计量器
- en: As you can see, I give plural names to the Dimension tables, each containing
    one or more instances of that entity.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，我为维度表赋予了复数名称，每个表包含一个或多个该实体的实例。
- en: 'Now, look at the columns starting with “Meter”:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，查看以“Meter”开头的列：
- en: '![](../Images/936033396b4debca4d6090af8eab2da7.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/936033396b4debca4d6090af8eab2da7.png)'
- en: Figure 6 — All four Meter columns (Figure by the Author)
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图6 — 所有四个计量器列（作者制作的图）
- en: 'I can notice two crucial details:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 我注意到两个关键细节：
- en: The Cardinality of the four columns is different.
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这四列的基数不同。
- en: I have a lot of empty rows for the MeterRegion column (76 %).
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我有很多空行在MeterRegion列中（76%）。
- en: Based on the Cardinality (Number of distinct values), I reckon I can build a
    Hierarchy for the Meters.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 根据基数（不同值的数量），我认为我可以为计量器构建一个层次结构。
- en: 'Top-Level: Meter Region'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一级：计量器区域
- en: 'Second-Level: Meter Category'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二级：计量器类别
- en: 'Third-Level: Meter Subcategory'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三级：计量器子类别
- en: 'Leaf: Meter Name'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 叶级：计量器名称
- en: The data from the Fact table will have a Relationship to the Meter Name column.
    To say it more correctly, the ID column will be created based on the Leaf Level
    but from the Distinct combination of all four columns.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 来自Fact表的数据将与Meter Name列建立关系。更准确地说，ID列将基于叶级别但从所有四列的不同组合中创建。
- en: The reason for the combination is that there is a probability that a Meter Name
    appears multiple times and is assigned to different Meter Subcategories.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 组合的原因是计量器名称可能会多次出现，并分配给不同的计量器子类别。
- en: Second, we must replace the empty rows in the Meter Region column with something
    meaningful to avoid having a hierarchy node at the top level called (Null).
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 第二步，我们必须用有意义的内容替换Meter Region列中的空行，以避免在顶级层次上出现名为（Null）的层次节点。
- en: To achieve this, I right-click on the column name and click on “Replace Value”.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现这一点，我右键点击列名，然后点击“替换值”。
- en: 'In the dialog for this function, I enter *null* as the Value to find and “Empty”
    as the value to replace:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在此功能的对话框中，我输入*null*作为要查找的值，并输入“空”作为要替换的值：
- en: '![](../Images/5457137a17e585dc4101c8f85ac05dea.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5457137a17e585dc4101c8f85ac05dea.png)'
- en: Figure 7 — Replace empty rows with the Text “Empty” (Figure by the Author)
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图7 — 使用文本“空”替换空行（作者制作的图）
- en: 'The result is the following, with no empty rows for the MeterName column:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下，MeterName列中没有空行：
- en: '![](../Images/215bfa6bd2b675f5bfef02ea2a7c78b6.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/215bfa6bd2b675f5bfef02ea2a7c78b6.png)'
- en: Figure 8 — MeterRegion without Empty rows. But other columns still have blank
    rows. (Figure by the Author)
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图8 — MeterRegion没有空行。但其他列仍有空白行。（作者制作的图）
- en: Next, I have to go through all columns intended to be Dimension columns and
    replace the blank values.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我必须检查所有打算作为维度列的列，并替换空值。
- en: I find these columns by examining the “Empty” line in the Profiling Area (See
    the red marked lines).
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我通过检查Profiling区域中的“空”行找到了这些列（见红色标记的行）。
- en: You might use another word instead of “Empty” as the replacement text for the
    empty rows. For example, “None”.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用另一个词代替“空”作为空行的替换文本。例如，“无”。
- en: 'The next step is needed to avoid duplicate column names when building the Dimension
    tables:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是为了避免在构建维度表时出现重复的列名：
- en: I rename all columns ending with “Id” to “GUID” (Except the InvoiceID, as this
    column will stay where it is).
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我将所有以“Id”结尾的列重命名为“GUID”（除了InvoiceID，这列将保持不变）。
- en: Next, as my data is cleaned up, I can Duplicate my table and start building
    my Dimension tables.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，随着数据的清理，我可以复制我的表并开始构建维度表。
- en: 'I right-click on the Azure_UsageDetail table and click on Duplicate:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 我右键点击Azure_UsageDetail表，点击“复制”：
- en: '![](../Images/7708db1948da4cd0396b1b1398e9f277.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7708db1948da4cd0396b1b1398e9f277.png)'
- en: Figure 9 — Duplicate the table (Figure by the Author)
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图9 — 复制表（作者制作的图）
- en: Now, I rename the table to Azure_UsageDetail_Copy.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我将表重命名为Azure_UsageDetail_Copy。
- en: But I don’t need this copy of the data in our Data model.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 但我不需要在我们的数据模型中复制这些数据。
- en: 'So, I turn off the loading of the table:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，我关闭了该表的加载：
- en: '![](../Images/c19877dc5833f92c0ce7580c66f4039e.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c19877dc5833f92c0ce7580c66f4039e.png)'
- en: Figure 10 — Disabling the load of the table into the Power BI data model (Figure
    by the Author)
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10 — 禁用将表加载到 Power BI 数据模型中的功能（图由作者提供）
- en: This option has the effect that I can use this table as the source for all subsequent
    operations without having this table in Power BI.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 这个选项的效果是，我可以将此表作为所有后续操作的源，而无需在 Power BI 中存在此表。
- en: Now, I can use the Copy of the original table to build my Dimension tables.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我可以使用原始表的副本来构建我的维度表。
- en: A simple Dimension table
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 一个简单的维度表
- en: The first Dimension will be for the Subscriptions.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个维度将用于订阅。
- en: 'I need the following steps:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我需要以下步骤：
- en: Create the Table referencing the copied table.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个引用复制表的表。
- en: Remove all other columns.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移除所有其他列。
- en: Remove all Duplicates.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移除所有重复项。
- en: Add an ID column.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个 ID 列。
- en: 'After these steps, I must add the column to the original table:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些步骤后，我必须将列添加到原始表中：
- en: Merge both tables.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 合并两个表。
- en: Expand the ID column.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开 ID 列。
- en: Remove the column for the Subscription from the original table.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从原始表中移除订阅列。
- en: Right-click on the copied table and click on Reference (See in the Reference
    section below for the difference between “Duplicate” and “Reference” a table).
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 右键点击复制的表，点击“引用”（参见下文“重复”和“引用”表的区别）。
- en: Now, I must rename the table to Subscriptions (Double-Click on the table).
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我必须将表重命名为 Subscriptions（双击表）。
- en: I can use either the “Choose columns” or the “Remove other Columns” feature
    to remove all but the two Subscription columns.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 我可以使用“选择列”或“移除其他列”功能，去除除了两个订阅列之外的所有列。
- en: 'I select both columns (with Shift-click) and right-click:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 我选择两个列（使用 Shift 点击）并右键点击：
- en: '![](../Images/a6fc09107d2abbe7559739a68781ba14.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a6fc09107d2abbe7559739a68781ba14.png)'
- en: Figure 11 — Remove all other columns after selecting both “Subscription” columns
    (Figure by the Author)
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11 — 在选择了两个“订阅”列后，删除所有其他列（图由作者提供）
- en: 'The next step is to remove all duplicates:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是移除所有重复项：
- en: '![](../Images/55a91bf976052847c488fe6eb8511e74.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/55a91bf976052847c488fe6eb8511e74.png)'
- en: Figure 12 — Remove the Duplicates from the table (Figure by the Author)
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12 — 从表中移除重复项（图由作者提供）
- en: Now, I have a small table with two columns and two rows.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我有一个包含两列和两行的小表。
- en: 'To add an ID column, I use the Index feature:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 为了添加一个 ID 列，我使用索引功能：
- en: '![](../Images/006629ac065e81a537a75f9ca9785643.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/006629ac065e81a537a75f9ca9785643.png)'
- en: Figure 13 — Add an Index column (Figure by the Author)
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13 — 添加一个索引列（图由作者提供）
- en: Then, I renamed the newly created “Index” column to “SubscriptionId”.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我将新创建的“索引”列重命名为“SubscriptionId”。
- en: Now, the Subscriptions Dimension table is completed.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，订阅维度表已经完成。
- en: '![](../Images/91ddd7ec4ffc8466ec576be1e338d234.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/91ddd7ec4ffc8466ec576be1e338d234.png)'
- en: Figure 14 — The finished Subscription Dimension table (Figure by the Author)
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14 — 完成的订阅维度表（图由作者提供）
- en: 'After this, I must replace the existing “Subscription” columns in the original
    table with the new ID column:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在此之后，我必须用新的 ID 列替换原始表中的现有“订阅”列：
- en: 'I use the “Merge Queries“ feature to join the two tables together:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 我使用“合并查询”功能将两个表连接在一起：
- en: '![](../Images/27581f83939fe041629db133d65ceb64.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/27581f83939fe041629db133d65ceb64.png)'
- en: Figure 15 — Merge the new Dimension table with the original table (Figure by
    the Author)
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 图 15 — 将新的维度表与原始表合并（图由作者提供）
- en: It is essential to select both columns to ensure that the correct rows are assigned.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 选择两个列至关重要，以确保正确的行被分配。
- en: 'You can check the proper assignment in the information line at the bottom:
    When both numbers are identical, all is OK.'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以检查底部信息行中的正确分配：当两个数字相同时，一切正常。
- en: 'To get the Id column, I must expand the merged table:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获取 Id 列，我必须展开合并的表：
- en: '![](../Images/2a9e78c8a4c15766a854659431f78c33.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2a9e78c8a4c15766a854659431f78c33.png)'
- en: Figure 16 — Expand the merged table and include the Id column only without the
    original column name a s prefix (Figure by the Author)
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 图 16 — 展开合并的表，只包括 Id 列，不带原始列名称作为前缀（图由作者提供）
- en: As a result, I get an additional column with the matching SubscriptionId.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 结果，我得到一个附加的列，其匹配的 SubscriptionId。
- en: I repeat the same steps for all “simple” Dimension tables.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 我对所有“简单”维度表重复相同的步骤。
- en: But sometimes, I need to add more steps when building a Dimension table.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 但有时，我需要在构建维度表时添加更多步骤。
- en: Something more complex
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更复杂的内容
- en: 'During the conversion of the Data model, I noticed that a bunch of columns
    belong together:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在转换数据模型的过程中，我注意到一组列是相关的：
- en: All “Billing” columns
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有“账单”列
- en: ChargeType
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ChargeType
- en: Frequency
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Frequency
- en: PublisherType
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PublisherType
- en: PricingModel
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PricingModel
- en: InvoiceNo
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: InvoiceNo
- en: All these columns are tied to the invoicing topic.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些列都与发票主题相关联。
- en: Therefore, I decided to group them into one Dimension table.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我决定将它们分组到一个维度表中。
- en: 'The first steps are the same as above:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步与上述相同：
- en: 1\. Create a referenced table.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 1\. 创建一个引用表。
- en: 2\. Remove all unneeded columns.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 2\. 删除所有不需要的列。
- en: 3\. Add the Index column for the ID.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 3\. 为 ID 添加索引列。
- en: 4\. Rename the columns to be more user-friendly.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 4\. 将列重命名为更具用户友好的名称。
- en: But then I noticed that I can use the Billing Period column to extract the Billing
    Month and then remove this column. This will have benefits for my reporting.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 但后来我注意到，我可以使用 Billing Period 列来提取 Billing Month，然后删除这个列。这对我的报告将带来好处。
- en: 'So, I added a Custom column with the following formula:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我添加了一个自定义列，公式如下：
- en: '[PRE0]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'This is the result:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 这是结果：
- en: '![](../Images/3223cfb4e2f75a934564661a5e0188d0.png)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3223cfb4e2f75a934564661a5e0188d0.png)'
- en: Figure 17 — Result for Billing Month (Figure by the Author)
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 图 17 — Billing Month 的结果（图由作者提供）
- en: 'To ensure that this column can be sorted according to the month number, I added
    one further Custom column:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 为确保该列可以根据月份编号进行排序，我添加了一个额外的自定义列：
- en: '[PRE1]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: I can use the Sort by Column feature in Power BI to sort the Billing Month column
    by this new BillingMonthNum column.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 我可以使用 Power BI 中的按列排序功能，根据这个新的 BillingMonthNum 列对 Billing Month 列进行排序。
- en: The next step is to set the correct Data type (Text for the Billing Month and
    “Whole Number” for BillingMonthNum column).
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是设置正确的数据类型（Billing Month 列的文本类型和 BillingMonthNum 列的“整数”类型）。
- en: Another way to add a sorting column is through Ranking.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种添加排序列的方法是通过排名。
- en: 'For example, look at the Invoice No column:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，看看 Invoice No 列：
- en: '![](../Images/7d39f6987a63adebb0d4cad16972c7e7.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7d39f6987a63adebb0d4cad16972c7e7.png)'
- en: Figure 18 — Extract from the “Invoice No” column (Figure by the Author)
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 图 18 — 从“Invoice No”列提取（图由作者提供）
- en: Imagine that we want to add a sorting mechanism to this column.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，我们想要为这个列添加一个排序机制。
- en: An Index column will not work, as we would get a continuous number regardless
    of the content.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 索引列将不起作用，因为我们会得到一个连续的数字，而无论内容如何。
- en: But, as you can see, we have several rows with null as Invoice No.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，正如你所见，我们有几行的 Invoice No 为 null。
- en: Therefore, using the Index to sort this column in Power BI is impossible, as
    we would have the same content but with different numbers.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，使用索引在 Power BI 中对该列进行排序是不可能的，因为我们会有相同的内容但数字不同。
- en: 'We can solve this by using the following expression for a new Custom column:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过使用以下表达式为新的自定义列解决此问题：
- en: '[PRE2]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '#”Changed Type” is the name of the previous step (Input table).'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '#“Changed Type” 是前一步骤（输入表）的名称。'
- en: “InvoiceNoRank” is the Name of the new column.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “InvoiceNoRank” 是新列的名称。
- en: “Invoice No” is the column over which the Ranking will be calculated.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “Invoice No” 是排名将被计算的列。
- en: The last parameter [RankKind=RankKind.Dense] is the most important.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后一个参数 [RankKind=RankKind.Dense] 是最重要的。
- en: With [RankKind=RankKind.Dense] I tell the function that rows with the same invoice
    Number must receive the same ranking and that the number range must be continuous.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 [RankKind=RankKind.Dense] 我告诉函数，相同发票编号的行必须获得相同的排名，并且数字范围必须连续。
- en: 'You can get more details about this function here:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在这里获取更多关于这个功能的详细信息：
- en: '[](https://radacad.com/adding-pre-calculating-rank-in-power-bi-using-power-query?source=post_page-----46208215f17a--------------------------------)
    [## Adding Pre-Calculated Rank in Power BI Using Power Query'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://radacad.com/adding-pre-calculating-rank-in-power-bi-using-power-query?source=post_page-----46208215f17a--------------------------------)
    [## 使用 Power Query 在 Power BI 中添加预计算的排名'
- en: How to add Rank in Power Query and Power BI There are multiple ways that you
    can add a RANK column to your table, You…
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何在 Power Query 和 Power BI 中添加排名，有多种方法可以将排名列添加到表格中，你…
- en: radacad.com](https://radacad.com/adding-pre-calculating-rank-in-power-bi-using-power-query?source=post_page-----46208215f17a--------------------------------)
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '[radacad.com](https://radacad.com/adding-pre-calculating-rank-in-power-bi-using-power-query?source=post_page-----46208215f17a--------------------------------)'
- en: 'The resulting column looks like this:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 结果列如下所示：
- en: '![](../Images/73428f205b0dedae7758f69c7cc5198c.png)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/73428f205b0dedae7758f69c7cc5198c.png)'
- en: Figure 19 — Result with Ranking column (Figure by the Author)
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 图 19 — 排名列的结果（图由作者提供）
- en: You can see that all rows with an empty Invoice No get the Ranking 1\. The subsequent
    invoice numbers are 2, 3, 4, etc.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到所有空的 Invoice No 行都得到排名 1。随后的发票编号为 2、3、4 等等。
- en: When merging this table to the fact table, I select all columns that can be
    used to identify each row uniquely.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 合并此表到事实表时，我选择所有可以唯一标识每一行的列。
- en: In this case, using the columns BillingPeriods and Invoice No is enough.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，使用列 BillingPeriods 和 Invoice No 就足够了。
- en: Last Steps — Complete the Data model
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 最后步骤——完成数据模型
- en: Finally, I can complete the Data model.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我可以完成数据模型。
- en: But before I jump to Power BI, I remove all the obsolete columns from the Original
    table in Power Query and rename the Table to “FactAzureUsageDetails”.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 但在我跳到 Power BI 之前，我会在 Power Query 中移除原始表中的所有过时列，并将表重命名为“FactAzureUsageDetails”。
- en: After loading the data into Power BI, I must check the automatically created
    Relationships to ensure all Relationships are between the ID columns.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 将数据加载到 Power BI 后，我必须检查自动创建的关系，以确保所有关系都在 ID 列之间。
- en: Sometimes, Power BI creates Relationships between the Name column, which is
    suboptimal.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，Power BI 会在名称列之间创建关系，这并不理想。
- en: As I already created a report based on the old data model, I must fix all the
    visuals and measures, which used the columns now moved to the dimension tables.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我已经基于旧的数据模型创建了一个报告，我必须修复所有使用了现在已移动到维度表中的列的可视化和度量值。
- en: Final Result
  id: totrans-212
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 最终结果
- en: 'This is the final Data model:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 这是最终的数据模型：
- en: '![](../Images/d1d4e65e84ad4ec9ed6fb445dd25437b.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d1d4e65e84ad4ec9ed6fb445dd25437b.png)'
- en: Figure 20 — Final Data model as a clean Star Schema (Figure by the Author)
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 图 20——作为干净的星型模式的最终数据模型（图示由作者提供）
- en: This is precisely what I wanted to achieve.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 这正是我想要实现的目标。
- en: Interestingly, the new pbix file is now larger than the original file.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 有趣的是，新生成的 pbix 文件现在比原始文件大。
- en: But I talk about 800 kB vs 750 kB before. The raw data is around 20 MB in size.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 不过，我之前谈论的是 800 kB 对 750 kB。原始数据的大小约为 20 MB。
- en: I already made such a change, and the resulting pbix file was way smaller than
    before.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经进行了这样的更改，结果是 pbix 文件比之前小了很多。
- en: I think I have such a small volume of data that the additional complexity causes
    the pbix file to grow.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 我认为我的数据量如此之小，以至于额外的复杂性导致 pbix 文件变大。
- en: Conclusion
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: The effort to modify my Data model was not small. But it was not nightmarishly
    high. In any case, it is worth exploring this approach to have a better solution
    in Power BI instead of having a table with dozens of columns, which are very hard
    to navigate.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 修改数据模型的工作量不小。但也不至于高得令人恐惧。无论如何，探索这种方法是值得的，以便在 Power BI 中获得更好的解决方案，而不是拥有一个列数众多、难以导航的表。
- en: Imagine you can group all columns for one topic into one Dimension table. Even
    when these columns are sorted alphabetically, you can easily find them. Compare
    this to when those columns are all in the original table.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，你可以将一个主题的所有列分组到一个维度表中。即使这些列按字母顺序排序，你也可以很容易找到它们。与这些列都在原始表中的情况相比，这种方式更为高效。
- en: In my opinion, this topic should deserve more attention. I even see solutions
    in Power BI built by colleagues of mine using very wide tables. My first comment
    is, “Why do you work with such a table? Why don’t you have a Star Schema in your
    Data model?”.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 在我看来，这个话题应该得到更多的关注。我甚至看到我的同事在 Power BI 中使用非常宽的表来构建解决方案。我的第一个评论是，“你为什么要使用这样一张表？为什么你的数据模型中没有星型模式？”。
- en: 'And the answer is always: “Because the data comes in this form and I don’t
    have time to modify the structure”.'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 回答总是：“因为数据以这种形式出现，我没有时间修改结构”。
- en: But as soon as performance issues start to appear, my first step is to analyze
    and optimize the Data model.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 但只要性能问题开始出现，我的第一步是分析和优化数据模型。
- en: I recommend using DAX Studio with VertiPaq Analyzer ([SQLBI Tools Page](https://www.sqlbi.com/tools/))
    to get Statistics about the Data model and find potential issues.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 我推荐使用 DAX Studio 和 VertiPaq Analyzer ([SQLBI Tools Page](https://www.sqlbi.com/tools/))
    来获取数据模型的统计信息并发现潜在的问题。
- en: 'You can get a short introduction on how to use this combination here:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在这里获得关于如何使用这个组合的简要介绍：
- en: '[](https://www.fourmoo.com/2020/11/11/how-to-use-vertipaq-analyzer-with-dax-studio-for-power-bi-model-analysis/?source=post_page-----46208215f17a--------------------------------)
    [## How to use Vertipaq Analyzer with DAX Studio for Power BI Model analysis -
    FourMoo | Power BI |…'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://www.fourmoo.com/2020/11/11/how-to-use-vertipaq-analyzer-with-dax-studio-for-power-bi-model-analysis/?source=post_page-----46208215f17a--------------------------------)
    [## 如何使用 Vertipaq Analyzer 和 DAX Studio 进行 Power BI 模型分析 - FourMoo | Power BI
    |…'
- en: I show how you can use Vertipaq Analyzer with your Power BI Model to understand
    what is consuming memory and how to…
  id: totrans-230
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 我展示了如何将 Vertipaq Analyzer 与你的 Power BI 模型配合使用，以理解什么在消耗内存以及如何……
- en: www.fourmoo.com](https://www.fourmoo.com/2020/11/11/how-to-use-vertipaq-analyzer-with-dax-studio-for-power-bi-model-analysis/?source=post_page-----46208215f17a--------------------------------)
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: www.fourmoo.com](https://www.fourmoo.com/2020/11/11/how-to-use-vertipaq-analyzer-with-dax-studio-for-power-bi-model-analysis/?source=post_page-----46208215f17a--------------------------------)
- en: Or search for “How to use VertiPaq Analyzer” in your favorite search engine.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 或在您最喜欢的搜索引擎中搜索“如何使用 VertiPaq Analyzer”。
- en: I’m thinking about writing an article on this topic soon.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 我正在考虑很快就这个主题写一篇文章。
- en: Please let me know in the comments if you are interested in such a piece.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您对这样的内容感兴趣，请在评论中告诉我。
- en: '![](../Images/081054715dfe8f5820e00a80cd97dae6.png)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/081054715dfe8f5820e00a80cd97dae6.png)'
- en: Photo by [Denys Nevozhai](https://unsplash.com/@dnevozhai?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由 [Denys Nevozhai](https://unsplash.com/@dnevozhai?utm_source=medium&utm_medium=referral)
    提供，来源于 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: References
  id: totrans-237
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: The Data is from my private Azure Subscription. I download the monthly consumption
    from the Azure Portal and import the data into an Azure SQL database.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 数据来自我的私人 Azure 订阅。我从 Azure 门户下载每月消耗量，并将数据导入到 Azure SQL 数据库中。
- en: 'An SQLBI article on why we should have a Star Schema as a Data model:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 一篇关于为什么我们应该将星型架构作为数据模型的 SQLBI 文章：
- en: '[](https://www.sqlbi.com/articles/power-bi-star-schema-or-single-table/?source=post_page-----46208215f17a--------------------------------)
    [## Power BI - Star schema or single table - SQLBI'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://www.sqlbi.com/articles/power-bi-star-schema-or-single-table/?source=post_page-----46208215f17a--------------------------------)
    [## Power BI - 星型架构还是单表 - SQLBI'
- en: 'This article analyzes a classic modeling question: is it better to build a
    model as a regular star schema or as a…'
  id: totrans-241
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本文分析了一个经典建模问题：构建模型时，使用常规的星型架构还是…
- en: www.sqlbi.com](https://www.sqlbi.com/articles/power-bi-star-schema-or-single-table/?source=post_page-----46208215f17a--------------------------------)
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: www.sqlbi.com](https://www.sqlbi.com/articles/power-bi-star-schema-or-single-table/?source=post_page-----46208215f17a--------------------------------)
- en: 'See here for the difference between the Duplicate and Reference feature in
    Power Query:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 请参见这里以了解 Power Query 中 Duplicate 和 Reference 功能的区别：
- en: '[](https://radacad.com/reference-vs-duplicate-in-power-bi-power-query-back-to-basics?source=post_page-----46208215f17a--------------------------------)
    [## Reference vs Duplicate in Power BI; Power Query Back to Basics'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://radacad.com/reference-vs-duplicate-in-power-bi-power-query-back-to-basics?source=post_page-----46208215f17a--------------------------------)
    [## Power BI 中的 Reference 与 Duplicate；Power Query 基础回顾'
- en: When you work with tables and queries in Power Query and Power BI, you get the
    option to copy them through these…
  id: totrans-245
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 当您在 Power Query 和 Power BI 中处理表格和查询时，您可以通过这些选项将它们复制…
- en: radacad.com](https://radacad.com/reference-vs-duplicate-in-power-bi-power-query-back-to-basics?source=post_page-----46208215f17a--------------------------------)
    [](https://medium.com/@salvatorecagliari/subscribe?source=post_page-----46208215f17a--------------------------------)
    [## Get an email whenever Salvatore Cagliari publishes.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: radacad.com](https://radacad.com/reference-vs-duplicate-in-power-bi-power-query-back-to-basics?source=post_page-----46208215f17a--------------------------------)
    [](https://medium.com/@salvatorecagliari/subscribe?source=post_page-----46208215f17a--------------------------------)
    [## 订阅 Salvatore Cagliari 的更新。
- en: Get an email whenever Salvatore Cagliari publishes. By signing up, you will
    create a Medium account if you don't…
  id: totrans-247
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 订阅后，Salvatore Cagliari 发布文章时会收到电子邮件。通过注册，您将创建一个 Medium 帐户，如果您还没有的话…
- en: medium.com](https://medium.com/@salvatorecagliari/subscribe?source=post_page-----46208215f17a--------------------------------)
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: medium.com](https://medium.com/@salvatorecagliari/subscribe?source=post_page-----46208215f17a--------------------------------)
