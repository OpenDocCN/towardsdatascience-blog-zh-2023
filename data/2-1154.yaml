- en: How to Create Interpolation Videos with Stable Diffusion and Deform
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何使用稳定扩散和Deform创建插值视频
- en: 原文：[https://towardsdatascience.com/how-to-create-videos-with-stable-diffusion-1c9c3b34be84](https://towardsdatascience.com/how-to-create-videos-with-stable-diffusion-1c9c3b34be84)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/how-to-create-videos-with-stable-diffusion-1c9c3b34be84](https://towardsdatascience.com/how-to-create-videos-with-stable-diffusion-1c9c3b34be84)
- en: Generative AI
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 生成式人工智能
- en: Using frame interpolation to create videos with Stable Diffusion and Deforum
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用帧插值通过稳定扩散和Deforum创建视频
- en: '[](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)[![Oscar
    Leo](../Images/7733c9147bad2875a35155fca3903aa8.png)](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)[](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)
    [Oscar Leo](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)[![Oscar
    Leo](../Images/7733c9147bad2875a35155fca3903aa8.png)](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)[](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)
    [Oscar Leo](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)
    ·6 min read·Feb 17, 2023
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: ·发布在[Towards Data Science](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)
    ·6分钟阅读·2023年2月17日
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/10a84d5f8ec2a71a26f5a620cabc9241.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/10a84d5f8ec2a71a26f5a620cabc9241.png)'
- en: Image generated by the author using [DeForum](https://github.com/deforum-art/deforum-stable-diffusion)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 由作者使用[DeForum](https://github.com/deforum-art/deforum-stable-diffusion)生成的图像
- en: Introduction
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: Everywhere you look, you see images generated by algorithms such as Stable Diffusion
    and Midjourney. Video, however, is a far more challenging prospect.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你走到哪里，你都会看到由稳定扩散和Midjourney等算法生成的图像。然而，视频却是一个更加具有挑战性的前景。
- en: I work with a media production company, and AI videos have a long way to go
    before they become widely used within the industry. The quality is not there yet,
    by a mile.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我与一家媒体制作公司合作，人工智能视频在成为行业广泛使用的工具之前还有很长的路要走。质量尚远未达到要求。
- en: Challenges
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 挑战
- en: There are several challenges, such as flickering between frames, resolution,
    and computation, to name a few.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 存在一些挑战，比如帧之间的闪烁、分辨率和计算等。
- en: I should also mention the ongoing debate about copyright issues for algorithms
    trained on content from the internet. It’s clear that the current approach is
    too liberal. I’ll follow this development with great interest.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我还应该提到有关使用互联网内容训练算法的版权问题的持续争论。很明显，目前的做法过于宽松。我将非常关注这一进展。
- en: Current use-cases
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 当前使用案例
- en: However, media production is all about creating engaging and unique content,
    and AI can certainly be a component of that already.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，媒体制作完全是关于创造引人入胜和独特的内容，而人工智能无疑可以成为其中的一部分。
- en: One use case is to add a different style to an original video, as they did in
    [the crow](https://www.youtube.com/watch?v=5dvxY6vXHsA), where they first recorded
    a dancer and then had an algorithm adjust each frame.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 一个使用案例是给原始视频添加不同的风格，就像他们在[乌鸦](https://www.youtube.com/watch?v=5dvxY6vXHsA)中做的那样，他们首先录制了一位舞者，然后让算法调整每一帧。
- en: We will see progress on that topic constantly going forward, but in this post,
    I’ll show you a simple approach to get you started. We will create a short video
    by transforming images through interpolation using [DeForum](https://github.com/deforum-art/deforum-stable-diffusion).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将不断看到这一主题的进展，但在这篇文章中，我会展示一种简单的方法来让你入门。我们将通过使用[DeForum](https://github.com/deforum-art/deforum-stable-diffusion)对图像进行插值来创建一个短视频。
- en: Let’s get started! :)
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始吧！:)
- en: 'Step 1: Setting up VastAI'
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 步骤1：设置VastAI
- en: To use Deforum, you need a GPU. If you don’t have one on your computer, the
    easiest and cheapest alternative is [vast.ai](https://vast.ai/).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Deforum，你需要一个GPU。如果你的计算机上没有GPU，最简单且最便宜的替代方案是[vast.ai](https://vast.ai/)。
- en: Instance Configuration
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实例配置
- en: First, you need to select which image to use. I’ll go for pytorch/pytorch version
    “1.13.1-cuda11.6-cudnn8-devel” It’s not the only correct option, but it works.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，你需要选择使用哪个图像。我会选择pytorch/pytorch版本“1.13.1-cuda11.6-cudnn8-devel”。这不是唯一正确的选择，但它有效。
- en: '![](../Images/17372a05e72c7d9ef587a1b2e5b1b0bd.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/17372a05e72c7d9ef587a1b2e5b1b0bd.png)'
- en: 'For launch mode, I’ll go for the most straightforward option: a standard Jupyter
    notebook.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 对于启动模式，我选择最简单的选项：标准Jupyter笔记本。
- en: '![](../Images/1a6e331741dbdfd171454fcd03854e0a.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1a6e331741dbdfd171454fcd03854e0a.png)'
- en: The last configuration you need to change is to increase the disk space since
    the models are massive.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个需要更改的配置是增加磁盘空间，因为模型非常庞大。
- en: Selecting a GPU
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择一个GPU
- en: Next, it’s time to select a GPU. There are thousands of options, but a standard
    3090 will work fine. Make sure that the upload and download speeds are decent.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，选择一个GPU。虽然有成千上万的选项，但标准的3090就很好。确保上传和下载速度都不错。
- en: '![](../Images/a6039087b76c5121dac399762e26d1c6.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a6039087b76c5121dac399762e26d1c6.png)'
- en: The price should be around $0.4 per hour, but feel free to pay more if you want
    a better GPU.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 价格应该在每小时$0.4左右，但如果你想要更好的GPU，可以多花点钱。
- en: 'Step 2: Install Deforum'
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 步骤2：安装Deforum
- en: Deforum explains the installation process on their GitHub, but I’ll also write
    it here to make this tutorial easier to follow.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: Deforum在他们的GitHub上解释了安装过程，但我也会在这里写下来，以使本教程更易于跟随。
- en: '2.1: Open instance'
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.1：打开实例
- en: To open your instance, go to “Instances” in the menu to the left and click the
    blue “Open button” to the right.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 要打开你的实例，请前往左侧菜单中的“实例”，然后点击右侧的蓝色“打开按钮”。
- en: '![](../Images/e20274fb75bc0965c908b87fde9014a4.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e20274fb75bc0965c908b87fde9014a4.png)'
- en: '2.2: Open terminal'
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.2：打开终端
- en: Once inside, open a terminal by clicking “New” and selecting the terminal option.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 进入后，点击“新建”并选择终端选项以打开一个终端。
- en: '![](../Images/9c9dbf9c3df85a38a14f3c4992491941.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9c9dbf9c3df85a38a14f3c4992491941.png)'
- en: Run the following two commands to install conda and close the terminal for the
    changes to take effect.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下两个命令以安装conda，并关闭终端以使更改生效。
- en: '[PRE0]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Open a new terminal just like before and activate the conda environment.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 打开一个新的终端，就像之前一样，并激活conda环境。
- en: '[PRE1]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '2.3: Install everything'
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.3：安装所有内容
- en: 'Install everything by running the following commands:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 通过运行以下命令安装所有内容：
- en: '[PRE2]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'After a few minutes, you can test if everything is working correctly by running
    the following:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 几分钟后，你可以通过运行以下命令测试一切是否正常：
- en: '[PRE3]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Step 3: Create a video'
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 步骤3：创建视频
- en: 3.1 Open notebook
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.1 打开笔记本
- en: When everything is installed and working, close the terminal, and open “Deforum_Stable_Diffusion.ipynb”
    inside the deforum-stable-diffusion folder.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 当一切安装完毕并正常工作后，关闭终端，然后打开deforum-stable-diffusion文件夹中的“Deforum_Stable_Diffusion.ipynb”。
- en: '![](../Images/d9b3fbc64b012cdc98120857f405f233.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d9b3fbc64b012cdc98120857f405f233.png)'
- en: Change the kernel to dsd and run the first three cells. It can take a little
    time for the third cell to finish.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 将内核更改为dsd并运行前三个单元。第三个单元可能需要一点时间来完成。
- en: '![](../Images/32ede2f8c1bfdb9eddb29a5011e2d75f.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/32ede2f8c1bfdb9eddb29a5011e2d75f.png)'
- en: 3.2 Select a starting image [optional]
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.2 选择一个起始图像 [可选]
- en: If you want to, you can start from an original image. I’m going to use the following
    image from [Pexels](https://www.pexels.com/).
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你愿意，可以从原始图像开始。我将使用以下来自[Pexels](https://www.pexels.com/)的图像。
- en: '![](../Images/444df0de9a45529c29099c2fc1d4b907.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/444df0de9a45529c29099c2fc1d4b907.png)'
- en: 'Photo by Nout Gons: [https://www.pexels.com/photo/city-street-photo-378570/](https://www.pexels.com/photo/city-street-photo-378570/)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 照片由Nout Gons拍摄：[https://www.pexels.com/photo/city-street-photo-378570/](https://www.pexels.com/photo/city-street-photo-378570/)
- en: You need to make sure that the image is of a reasonable size. Otherwise, it
    won’t fit into RAM. So I resized this image to 801x512 (Deforum will cut the sides
    to 768x512).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要确保图像的大小合适。否则，它将无法适应RAM。因此，我将此图像的大小调整为801x512（Deforum会将边缘裁剪为768x512）。
- en: To upload the image, click upload, and place it somewhere reasonable. For example,
    I put it under /deforum-stable-diffusion.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 要上传图像，点击上传，并将其放置在合适的位置。例如，我将其放在/deforum-stable-diffusion下。
- en: '![](../Images/2ba45648d68e246a783e95b8c641e41d.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2ba45648d68e246a783e95b8c641e41d.png)'
- en: 3.3 Deforum settings
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.3 Deforum设置
- en: As soon as you open the Notebook, you’ll see hundreds of settings you can adjust.
    Unfortunately, it’s not a perfect interface because many settings are only relevant
    based on previous choices.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你打开Notebook，你会看到可以调整的设置有很多。遗憾的是，由于许多设置仅与之前的选择相关，这个界面并不完美。
- en: '**Note:** The individual settings can be hard to find and don’t come in the
    order that I write them. It’s best to search for the location using ctrl+F or
    cmd+F.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意：** 单独的设置可能很难找到，并且它们的顺序可能与我写的不一致。最好使用ctrl+F或cmd+F搜索位置。'
- en: First, we change the **animation_mode** to **Interpolation** and **interpolate_x_frames**
    to some reasonable value. **interpolate_x_frames** decides how many frames the
    algorithm should generate between your keyframes.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将**animation_mode**更改为**Interpolation**，并将**interpolate_x_frames**设置为一些合理的值。**interpolate_x_frames**决定算法应在你的关键帧之间生成多少帧。
- en: '[PRE4]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Next, we create our prompts by changing **animation_prompts**. The numbers you
    see to the left don’t matter for **Interpolation**.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们通过更改**animation_prompts**来创建我们的提示。你看到的左边的数字对于**Interpolation**并不重要。
- en: For other use cases, that number decides when to start using a specific prompt,
    but for Interpolation, these become our keyframes, and we generate **interpolate_x_frames**
    frames between each.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 对于其他使用场景，这个数字决定何时开始使用特定的提示，但对于插值（Interpolation），这些数字成为我们的关键帧，并且我们在每两个关键帧之间生成**interpolate_x_frames**帧。
- en: Here are my prompts, but you can write whatever you want.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我的提示，但你可以写你想要的任何内容。
- en: '[PRE5]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: If you don’t use an original image, continue to **3.4**; otherwise, follow the
    instructions below.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不使用原始图像，继续进行**3.4**；否则，请按照下面的说明操作。
- en: Now, we change **W** and **H** to the dimensions of our selected image. In my
    case, that’s 801x512.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将**W**和**H**更改为我们选择的图像的尺寸。在我的例子中，这是801x512。
- en: '[PRE6]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'To use the image, we need to change the following settings as well:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用图像，我们还需要更改以下设置：
- en: '[PRE7]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '**Strength** decides how much of the original image to keep. A number close
    to 1 means we will save much of the original image. **Init_image** should, of
    course, point to the location of your image.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '**Strength**决定保留原始图像的程度。接近1的数字意味着我们将保留大部分原始图像。**Init_image**当然应该指向你的图像的位置。'
- en: '**3.4 Generate images**'
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**3.4 生成图像**'
- en: Run cells 3, 4, and 5\. First, the algorithm will generate keyframes based on
    your prompts in **animation_prompts**.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 运行单元格3、4和5。首先，算法将根据你在**animation_prompts**中的提示生成关键帧。
- en: When the keyframes are done, it will continue to create the intermediate frames.
    This can take some time if you have many prompts in **animation_prompts** and
    a large **interpolate_x_frames**.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 当关键帧完成后，它将继续创建中间帧。如果你的**animation_prompts**中有很多提示和一个大的**interpolate_x_frames**，这可能需要一些时间。
- en: '**3.5 Create video**'
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**3.5 创建视频**'
- en: Create a new cell at the bottom of your Notebook, and paste the following code.
    Then run the cell to create your video.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的笔记本底部创建一个新单元，并粘贴以下代码。然后运行该单元以创建你的视频。
- en: '[PRE8]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Here’s what my video looks like:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我的视频的样子：
- en: 'And here’s one more example:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 这是另一个例子：
- en: That’s it for my tutorial; happy hacking! If you create something cool, please
    share.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是我的教程；祝你编码愉快！如果你创建了有趣的内容，请分享。
- en: Thank you for reading! :)
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢阅读！:)
