- en: A Data Science Course Project About Crop Yield and Price Prediction I’m Still
    Not Ashamed Of
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/a-data-science-course-project-about-crop-yield-and-price-prediction-im-still-not-ashamed-of-75712dc8696f?source=collection_archive---------0-----------------------#2023-12-28](https://towardsdatascience.com/a-data-science-course-project-about-crop-yield-and-price-prediction-im-still-not-ashamed-of-75712dc8696f?source=collection_archive---------0-----------------------#2023-12-28)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Even from the perspective of an experienced Data Scientist
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@mik.sarafanov?source=post_page-----75712dc8696f--------------------------------)[![Mikhail
    Sarafanov](../Images/88869a3c6f664785c90539dd7aab6d74.png)](https://medium.com/@mik.sarafanov?source=post_page-----75712dc8696f--------------------------------)[](https://towardsdatascience.com/?source=post_page-----75712dc8696f--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----75712dc8696f--------------------------------)
    [Mikhail Sarafanov](https://medium.com/@mik.sarafanov?source=post_page-----75712dc8696f--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F209c78c40898&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-course-project-about-crop-yield-and-price-prediction-im-still-not-ashamed-of-75712dc8696f&user=Mikhail+Sarafanov&userId=209c78c40898&source=post_page-209c78c40898----75712dc8696f---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----75712dc8696f--------------------------------)
    ·12 min read·Dec 28, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F75712dc8696f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-course-project-about-crop-yield-and-price-prediction-im-still-not-ashamed-of-75712dc8696f&user=Mikhail+Sarafanov&userId=209c78c40898&source=-----75712dc8696f---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F75712dc8696f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-data-science-course-project-about-crop-yield-and-price-prediction-im-still-not-ashamed-of-75712dc8696f&source=-----75712dc8696f---------------------bookmark_footer-----------)![](../Images/2e1fd0b88e4ca36f4be5449c8d94b4fd.png)'
  prefs: []
  type: TYPE_NORMAL
- en: Preview image (by author)
  prefs: []
  type: TYPE_NORMAL
- en: Hello, dear reader! During these Christmas holidays, I experienced a feeling
    of nostalgia for the past student years. That’s why I decided to write a post
    about a student project that was done almost four years ago as a project on the
    course “*Methods and models for Multivariate data analysis*” during my Master’s
    degree in ITMO University.
  prefs: []
  type: TYPE_NORMAL
- en: '**Disclaimer:** I decided to write this post for two reasons:'
  prefs: []
  type: TYPE_NORMAL
- en: to share an approach to organizing university studies that has proven to be
    very effective (at least for me);
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: to inspire people who are just starting to study programming and/or statistics
    to try and experiment with their pet or course projects, because sometimes such
    projects are memorable for many years and surprisingly enjoyable
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The article mentions, in tips format, good practices that I’ve been able to
    apply during course project.
  prefs: []
  type: TYPE_NORMAL
- en: Beginning of the story
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: So, at the beginning of the course, we were informed that students could form
    teams of 2–3 people on our own and propose a course project that we would present
    at the end of the course. During the learning process (about 5 months), we will
    make intermediate presentations to our lecturers. This way, the professors can
    see how the progress is (or is not) going on.
  prefs: []
  type: TYPE_NORMAL
- en: 'After that, I immediately teamed up with my dudes: **Egor** and **Camilo**
    (just because we knew how to have fun together), and we started thinking about
    the topic…'
  prefs: []
  type: TYPE_NORMAL
- en: '**Choosing the topic**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: I suggested choosing
  prefs: []
  type: TYPE_NORMAL
- en: a theme that was big enough that we could work independently on different parts
    of it
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: the domain which was close to our interests (geographic information analysis
    for me and economics for my colleagues)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: So, it was…
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/637f15e1a14e5c8d00178473639821da.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1\. Chosen topic (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: Camilo also wanted to try to make dashboards with visualisations (using PowerBI),
    but pretty much any task would be suitable for this desire.
  prefs: []
  type: TYPE_NORMAL
- en: 'Tip 1: Choose a topic that you (and your colleagues) will be passionate about.
    It may not be the coolest project on a topic that is not very popular, but you
    will enjoy spending your “evenings” working on it'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: What was the main idea
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The course consisted of a big number of topics each of which is a set of methods
    for statistical analysis. We decided that we would try to forecast **yield and
    crop price** in as many different ways as possible and then ensemble the forecasts
    using some statistical method. This allowed us to try most of the methods discussed
    in the course in practice.
  prefs: []
  type: TYPE_NORMAL
- en: Also, the spatio-temporal data was truly multidimensional — this related pretty
    well to the main theme of the course.
  prefs: []
  type: TYPE_NORMAL
- en: 'Spoiler: we all got a score 5 out of 5'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Research (& data sources)
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We started with a literature review to understand exactly how crop yield and
    crop price are predicted. We also wanted to understand what kind of forecast error
    could be considered satisfactory.
  prefs: []
  type: TYPE_NORMAL
- en: 'I will not cite in this post the thesis resulting from this review. I will
    simply mention that we decided to use the following metric and threshold to evaluate
    the quality of the solution (for both crop yield and crop price):'
  prefs: []
  type: TYPE_NORMAL
- en: 'Acceptable performance: [Mean absolute percentage error (MAPE)](https://en.wikipedia.org/wiki/Mean_absolute_percentage_error)
    for a reasonably good forecast should not exceed 10%'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '2 tip: Start your project (no matter at work or during your studies) with a
    review of contemporary solutions. Maybe the problem you are looking at now has
    already been solved.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '3 tip: Before starting a development, determine what metric you will use to
    evaluate the solution. Remember, you can’t improve what you can’t measure.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Going back to the research, we have identified the following data sources (Links
    are up to date at 28th of December 2023):'
  prefs: []
  type: TYPE_NORMAL
- en: Climate data — [E-OBS daily gridded meteorological data for Europe from 1950
    to present derived from in-situ observations](https://cds.climate.copernicus.eu/cdsapp#!/dataset/insitu-gridded-observations-europe?tab=overview).
    **Licence** — [Licence Agreement](https://cds.climate.copernicus.eu/api/v2/terms/static/licence-to-use-copernicus-products.pdf);
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matrix of landscape types — [LandMatrix](https://landmatrix.org/). **Licence
    —** [Creative Commons CC BY 4.0 International](https://creativecommons.org/licenses/by/4.0/).
    Data Policy —[Data Policy | Land Matrix](https://landmatrix.org/about/data-policy/);
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Vector layers with countries borders — [GIS-Lab](https://gis-lab.info/qa/vmap0-eng.html).
    **Licence** — [GNU Lesser General Public License](https://www.gnu.org/licenses/lgpl-3.0.html);
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Crop yield data by countries — [Crop Yields](https://ourworldindata.org/crop-yields).
    **Licence** — [Creative Commons BY license](https://creativecommons.org/licenses/by/4.0/);
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Crop yields Futures price (EU market) —[Barchart](https://www.barchart.com/eu).
    **Licence** — [License to use barchart.com](https://www.barchart.com/terms).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Why these sources? — We have assumed that the price of a crop will depend on
    the amount of product produced. And in agriculture, the quantity produced depends
    on weather conditions.
  prefs: []
  type: TYPE_NORMAL
- en: 'The model was implemented for:'
  prefs: []
  type: TYPE_NORMAL
- en: Yield of wheat, rice, maize, and barley;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Countries: Germany, France, Italy, Romania, Poland, Austria, the Netherlands,
    Switzerland, Spain and the Czech Republic.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Climate data preprocessing
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'So, we have started with an assumption: “Wheat, rice, maize, and barley yields
    depend on weather conditions in the first half of the year (until 30 June)” (Figure
    2)'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/7402cecfc40a3e5724688b69b9bbdc5e.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 2\. Generation of traits for yield prediction (using the sum of active
    temperatures as an example) (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'The source archives obtained from the European space Agency website contain
    netCDF files. The files have daily fields for the following parameters:'
  prefs: []
  type: TYPE_NORMAL
- en: Mean daily air temperature, ℃
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Minimum daily air temperature, ℃
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Maximum daily air temperature, ℃
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pressure, HPa
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Precipitation, mm
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Based on the initial fields, the following parameters for the first half of
    each year were calculated:'
  prefs: []
  type: TYPE_NORMAL
- en: Total rainfall for the first half of the year, mm (see Animation);
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The number of days with precipitation for the first half of the year, days;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Average pressure, hpa;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Maximum average daily air temperature for the first six months, ℃;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Minimum average daily temperature for the first six months, ℃;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The sum of active temperatures above 10 degrees Celsius, ℃ (see Figure 3).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](../Images/37d57db19b47b755dcb2d456ce93346c.png)'
  prefs: []
  type: TYPE_IMG
- en: Animation. Rainfall for the first half of the year, mm. The year is listed at
    the top of the chart (by author)
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/cf1f37a909453b1dc73eeda24aa30414.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 3\. Sum of active temperatures for the first half of the year 1950, °C
    (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: Thus we obtained matrices for the whole territory of Europe with calculated
    features for the future model(s). The reader may notice that I calculate such
    a parameter as “The sum of active temperatures above 10 degrees Celsius”. This
    is such a popular parameter in ecology and botany that helps to determine the
    temperature optimums for different species of organisms (mainly plants, for example
    “[The sum of active temperatures as a method of determining the optimum harvest
    date of ‘S̆ampion’ and ‘Ligol’ apple cultivars](https://www.semanticscholar.org/paper/The-sum-of-active-temperatures-as-a-method-of-the-%C5%81ysiak/764cd7d6aa55469a78dbd073d7c3805e8e2025fd)”)
  prefs: []
  type: TYPE_NORMAL
- en: '4 tip: If you have expertise in the domain (which is not related to Data Science),
    make sure you use it in the project — show that you are not only making a “fit-predict”
    but also adapting and improving domain-specific approaches'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The next step is Aggregation of information by country. For values from the
    meteorological parameter matrices were extracted for each country separately (Figure
    4).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/af5cf9e09a047190139314542f8174ce.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4\. Matrix with the boundaries of countries (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'I would note that this strategy made sense (Figure 5): For example, the picture
    shows that for Spain, wheat yields are almost unaffected by the sum of active
    temperatures. However, for the Czech Republic, a hotter first half of the year
    is more likely to result in lower yields. It is therefore a good idea to model
    yields separately for each country.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/3d02419656beac96d46ffc65d9972b01.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5\. Dependence of **wheat** yield (tonnes per hectare) on the sum of
    active temperatures (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: Not all of the country’s territory is suitable for agriculture. Therefore, it
    was necessary to aggregate information only from certain pixels. In order to account
    for the location of agricultural land, the following matrix was prepared (Figure
    6).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a79c9301560e5dabab2dde9c13600673.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 6\. Land use matrix (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '1\. The topic of the lecture is: univariate statistical testing'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'So, we’ve got the data ready. However, agriculture is a very complex industry
    that has improved markedly year by year, decade by decade. It may make sense to
    limit the training sample for the model. For this purpose, we used the cumulative
    sum method (Figure 7):'
  prefs: []
  type: TYPE_NORMAL
- en: '**Cumulative sum method:** To each number from the sample, successive numbers
    are added sequentially to the following. That is, if the sample includes only
    three years: 1950, 1951, and 1952, the number for 1950 will be plotted on the
    Y-axis for 1950, and 1951 will show the sum of 1950 and 1951, etc.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '- If the shape of the line is close to a straight line and there are no fractures,
    the sample is homogeneous'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '- If the shape of the line has fractures the sample is divided into 2 parts
    based on this fracture'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![](../Images/7fcf1f5bf0af1dc5153249a3b8db7e1a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 7\. France. Comparison of target variable across years: Wheat (tonnes
    per hectare) (image by author)'
  prefs: []
  type: TYPE_NORMAL
- en: If a fracture was detected, we compared the two samples for belonging to the
    general population (Kolmogorov-Smirnov statistic). If the samples were statistically
    significantly different, we used the second part to train the model for prediction.
    If not, we used the entire sample.
  prefs: []
  type: TYPE_NORMAL
- en: '5 tip: Don’t be afraid to combine approaches to statistical analysis (it is
    a course project!). For example, in the lecture we were not told about the cumulative
    sums method — the topic was about comparing distributions. However, I have previously
    used this approach to compare trends in ice conditions during the processing of
    ice maps. It seemed to me that it could be useful here as well'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: I should note here that we have assumed that the process is ergodic, so we decided
    to compare in this way.
  prefs: []
  type: TYPE_NORMAL
- en: So, after the preparation, we are ready to start building statistical models
    — let’s take a look at the most interesting part!
  prefs: []
  type: TYPE_NORMAL
- en: '2\. The topic of the lecture is: multivariate regression'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The following features was included in the model:'
  prefs: []
  type: TYPE_NORMAL
- en: Total rainfall;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The number of days with precipitation;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The sum of active temperatures above 10 ℃;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mean pressure;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Minimum air temperature ℃.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Target variables: Yield of **wheat**, **rice**, **maize**, and **barley**'
  prefs: []
  type: TYPE_NORMAL
- en: 'Validation years: 2008–2018 for each country'
  prefs: []
  type: TYPE_NORMAL
- en: Let’s move on to the visualisations to make it a little clearer.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/aee7f7385343192cb31f088ed6878314.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 8\. Generated surfaces with predictions for each country for a specific
    year based on initialized models (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'And here is Figure 9 showing the [residuals](https://en.wikipedia.org/wiki/Errors_and_residuals)
    (*residual = observed value -estimated (predicted) value*) from the linear model
    for France and Italy:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/77a1058752a8925cdeec1e9327597791.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9\. Visualisation of residuals and metrics for linear regression on the
    validation sample (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: It can be seen from the graphs that the metric is satisfactory, but the error
    distribution is biased from zero — this means that the model has systematic error.
    We tried to correct in the new models below
  prefs: []
  type: TYPE_NORMAL
- en: 'Validation sample MAPE metric value: 10.42%'
  prefs: []
  type: TYPE_NORMAL
- en: '6 tip: Start with the simplest models (e.g. linear regression). This will give
    you a baseline against which you can compare improved versions of the model. The
    simpler the model, the better it is, as long as it shows a satisfactory metric'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '3\. The topic of the lecture is: multivariate distributions analysis'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We’ve turned the material from this lecture into a model “Distribution analysis”.
    The assumption was simple — we analysed the distributions of climatic parameters
    for each year and for the current year and found an analogue year of the current
    one to predict the value of yield exactly the same as that of the known in the
    past (Figure 10).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/fdbef4dbf54d56a5f462e36969ed1d08.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 10\. The concept of pairwise comparison for the purpose of selecting
    a year-analogue (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '**Idea:** Yields for years with similar weather conditions will be similar'
  prefs: []
  type: TYPE_NORMAL
- en: '**The approach:** Pairwise comparison of temperature, precipitation, and pressure
    distributions. Prediction-yield for the year that is most similar to the considered
    one'
  prefs: []
  type: TYPE_NORMAL
- en: '**Distributions used:**'
  prefs: []
  type: TYPE_NORMAL
- en: 'Temperature for the first half of the year, temperature for the months: February,
    April, June;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Precipitation for the first half of the year, precipitation for the months:
    February, April, June;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Pressure for the first half of the year, pressure for the months: February,
    April, June.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For comparison of distributions we used Kruskal-Wallis test. To adjust p-value,
    a multiple testing correction is introduced — the Bonferroni correction.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/deaedddb9152f759111c5ec07b640afd.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 11\. Obtained distributions for 2000 and 2018 years for air temperature
    (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'Validation sample MAPE metric value: 13.80%'
  prefs: []
  type: TYPE_NORMAL
- en: '7 tip: If you are doing multiple statistical testing, don’t forget to include
    the correction (for example, Bonferroni correction)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '4\. The topic of the lecture is: Bayesian network'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'One of the lectures was focused on the [Bayesian networks](https://en.wikipedia.org/wiki/Bayesian_network).
    Therefore, we decided to adapt the approach for yield prediction. We considered
    that each year is described by a set of group of variables A, B, C etc. where
    A is a set of categories describing crop yields, B is, for example, the Sum of
    active temperatures conditions and so on. A, for example, could take only three
    values: “High crop yield”, “Medium crop yield”, “Low crop yield”. The same for
    B and C and others. Thus, if we categorise the conditions and the target variable,
    we obtain the following description of each year:'
  prefs: []
  type: TYPE_NORMAL
- en: 1950 — “High heat supply”, “Low rainfall supply”, “High atmospheric pressure”—
    “High crop yield”
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1951 — “Low heat supply”, “High rainfall supply”, “High atmospheric pressure”
    — “Medium crop yield”
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1952 — “Low heat supply”, “Low rainfall supply”, “High atmospheric pressure”
    — Which crop yeild?
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The algorithm was designed to predict a yield category based on a combination
    of three other categories:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Crop yield (3 categories) — hidden state — target variable**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Sum of active temperatures (3 categories)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Rainfall (3 categories)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mean pressure (3 categories)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How can we define these categories? — by using a clustering algorithm! For example,
    the following 3 clusters were identified for wheat yields
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5ee06d8833c9ef3432e1d621b23e81bc.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12\. Wheat yield clusters for Bayesian network analisys (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: The final forecast of this model — the average yield of the predicted cluster.
  prefs: []
  type: TYPE_NORMAL
- en: 'Validation sample MAPE metric value: 14.55%'
  prefs: []
  type: TYPE_NORMAL
- en: '8 tip: Do experiment! Bayesian networks with clustering for time series forecasting?
    — Sure! Pairwise analysis of distributions — Why not? Sometimes the boldest approaches
    lead to significant improvements'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '5\. The topic of the lecture is: Time series forecasting'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Of course, we can forecast the target variable as a time series. Our task here
    was to understand how classical forecasting methods work in theory and practice.
  prefs: []
  type: TYPE_NORMAL
- en: Putting this method into practice proved to be the easiest. For example, in
    Python there are several libraries that allow to customise and apply the ARIMA
    model, for example [pmdarima](https://pypi.org/project/pmdarima/).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/34acfa1bc3f2df10a1610ec135630d05.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 13\. Application of ARIMA model to predict yield time series. X-axis:
    time index, Y-axis: Barley yield (image by author)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Validation sample MAPE metric value: 10.41%'
  prefs: []
  type: TYPE_NORMAL
- en: '9 tip: Don’t forget the comparison with classical approaches. An abstract metric
    will not tell your colleague much about how good your model is, but a comparison
    with well-known standards will show the true level of performance'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '6\. The topic of the lecture is: Ensembling'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'After all the models were built, we explored exactly how each model is “mistaken”
    (remember residual plots for linear regression model — see Figure 9):'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/6d840923a9161e6204ba5e1b28334ffe.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 14\. Residuals plot for different crop yield forecasting models (image
    by author)
  prefs: []
  type: TYPE_NORMAL
- en: '**None of the presented algorithms allowed to overcome the 10% threshold (according
    to MAPE).**'
  prefs: []
  type: TYPE_NORMAL
- en: The Kalman filter was used to improve the quality of the forecast (to ensemble
    it). Satisfactory results have been achieved for some countries (Figure 15)
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/f13cba38fe76a6fdd10ab3d9964d3ffe.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15\. Crop yield predictions for different countries using ensemble (image
    by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'Validation sample MAPE metric value: 9.89%'
  prefs: []
  type: TYPE_NORMAL
- en: '10 tip: If I were asked to integrate the developed model into Production service,
    I would integrate either ARIMA or linear regression, even though the ensemble
    metric is better. However, metrics in business problems are sometimes not the
    key. A standalone model is sometimes better than an ensemble because it is simpler
    and more reliable (even if the error metric is slightly higher)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Futures price prediction
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'And the final part: model (lasso regression), which used predicted yield values
    and Futures features to estimate possible price values (Figure 16):'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/ae3965f57d53e3ec35942d3c3a96133c.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 16\. Wheat Futures prices prediction (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'Mape on validation sample: 6.61%'
  prefs: []
  type: TYPE_NORMAL
- en: Why I still think this project is a good one
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'So that’s the end of the story. Above there were posted some of tips. And in
    the last paragraph, I want to summarise the final point and say why I am satisfied
    with that project. Here are three main items:'
  prefs: []
  type: TYPE_NORMAL
- en: Organisation of work and choice of topic — we combined our strengths and best
    qualities very well, planned the work stack nicely and managed as a team to prepare
    a good project and deliver it on time. **So, I have improved my soft skills;**
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Meaningful theme — I was passionate about what we were doing. Even if I had
    a few weeks free now for a pet project, I would happily apply my current experience
    and skills to such a case study again. **So, I was satisfied with the work we
    had done;**
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Hard skills — During our work we **have tried new statistical methods, improved
    our understanding of already familiar ones, and enhanced our programming skills**.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Well, we also got great marks on the exam XD
  prefs: []
  type: TYPE_NORMAL
- en: I hope your projects at university and elsewhere will be as exciting for you.
    Happy New Year!
  prefs: []
  type: TYPE_NORMAL
- en: Sincerely yours, [Mikhail Sarafanov](https://github.com/Dreamlone)
  prefs: []
  type: TYPE_NORMAL
