# ä½¿ç”¨ SHAP è¿›è¡Œç‰¹å¾é‡è¦æ€§åˆ†æï¼šæˆ‘åœ¨ Spotify å­¦åˆ°çš„ï¼ˆåœ¨å¤ä»‡è€…çš„å¸®åŠ©ä¸‹ï¼‰

> åŸæ–‡ï¼š[`towardsdatascience.com/feature-importance-analysis-with-shap-i-learned-at-spotify-aacd769831b4`](https://towardsdatascience.com/feature-importance-analysis-with-shap-i-learned-at-spotify-aacd769831b4)

## ç¡®å®šä¸»è¦ç‰¹å¾å¹¶ç†è§£å®ƒä»¬å¦‚ä½•å½±å“æœºå™¨å­¦ä¹ æ¨¡å‹çš„é¢„æµ‹ç»“æœ

[](https://medium.com/@elalamik?source=post_page-----aacd769831b4--------------------------------)![Khouloud El Alami](https://medium.com/@elalamik?source=post_page-----aacd769831b4--------------------------------)[](https://towardsdatascience.com/?source=post_page-----aacd769831b4--------------------------------)![Towards Data Science](https://towardsdatascience.com/?source=post_page-----aacd769831b4--------------------------------) [Khouloud El Alami](https://medium.com/@elalamik?source=post_page-----aacd769831b4--------------------------------)

Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----aacd769831b4--------------------------------) Â·13 åˆ†é’Ÿé˜…è¯»Â·2023 å¹´ 8 æœˆ 23 æ—¥

--

*è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨ Spotify æœºå™¨å­¦ä¹ è®ºæ–‡ä¸­å­¦ä¹ å†…å®¹çš„ä¸¤ç¯‡æ–‡ç« ä¹‹ä¸€ã€‚è¯·åŠ¡å¿…æŸ¥çœ‹ç¬¬äºŒç¯‡æ–‡ç« ï¼Œäº†è§£æˆ‘å¦‚ä½•æˆåŠŸæ˜¾è‘—ä¼˜åŒ–æˆ‘çš„æ¨¡å‹ã€‚*

[](/boosting-model-accuracy-techniques-i-learned-during-my-machine-learning-thesis-at-spotify-code-8027f9c11e57?source=post_page-----aacd769831b4--------------------------------) ## æé«˜æ¨¡å‹å‡†ç¡®æ€§ï¼šæˆ‘åœ¨ Spotify æœºå™¨å­¦ä¹ è®ºæ–‡ä¸­å­¦åˆ°çš„æŠ€å·§ï¼ˆ+ä»£ç â€¦

### ä¸€ä¸ªæŠ€æœ¯æ•°æ®ç§‘å­¦å®¶çš„å·¥å…·æ ˆï¼Œç”¨äºæ”¹å–„é¡½å›ºçš„æœºå™¨å­¦ä¹ æ¨¡å‹

towardsdatascience.com

ä¸¤å¹´å‰ï¼Œæˆ‘åœ¨ Spotify è¿›è¡Œäº†ä¸€é¡¹æœ‰è¶£çš„ç ”ç©¶é¡¹ç›®ï¼Œä½œä¸ºæˆ‘çš„ç¡•å£«è®ºæ–‡çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘å­¦ä¹ äº†å‡ ç§æœ‰ç”¨çš„æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œæˆ‘ç›¸ä¿¡ä»»ä½•æ•°æ®ç§‘å­¦å®¶éƒ½åº”è¯¥æŒæ¡è¿™äº›æŠ€å·§ã€‚ä»Šå¤©ï¼Œæˆ‘åœ¨è¿™é‡Œä¸ºä½ ä»¬è®²è§£å…¶ä¸­ä¹‹ä¸€ã€‚

åœ¨é‚£æ®µæ—¶é—´é‡Œï¼Œæˆ‘èŠ±äº† 6 ä¸ªæœˆå°è¯•å»ºç«‹ä¸€ä¸ªé¢„æµ‹æ¨¡å‹ï¼Œå¹¶è§£æå…¶å†…éƒ¨å·¥ä½œåŸç†ã€‚*æˆ‘çš„ç›®æ ‡æ˜¯äº†è§£æ˜¯ä»€ä¹ˆè®©ç”¨æˆ·å¯¹ä»–ä»¬çš„éŸ³ä¹ä½“éªŒæ„Ÿåˆ°æ»¡æ„ã€‚*

è¿™ä¸ä»…ä»…æ˜¯é¢„æµ‹ç”¨æˆ·æ˜¯å¦å¿«ä¹ï¼ˆæˆ–ä¸å¿«ä¹ï¼‰ï¼Œè€Œæ˜¯ç†è§£å¯¼è‡´ä»–ä»¬å¿«ä¹ï¼ˆæˆ–ä¸å¿«ä¹ï¼‰çš„*æ½œåœ¨*å› ç´ ã€‚

å¬èµ·æ¥å¾ˆä»¤äººå…´å¥‹ï¼Œå¯¹å§ï¼Ÿç¡®å®å¦‚æ­¤ï¼æˆ‘å–œæ¬¢æ¯ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºæˆ‘å­¦åˆ°äº†å¾ˆå¤šå…³äºå¦‚ä½•åœ¨éŸ³ä¹å’Œç”¨æˆ·è¡Œä¸ºèƒŒæ™¯ä¸‹åº”ç”¨æœºå™¨å­¦ä¹ çš„çŸ¥è¯†ã€‚

*(å¦‚æœä½ å¯¹æœºå™¨å­¦ä¹ åœ¨éŸ³ä¹è¡Œä¸šçš„åº”ç”¨æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆæˆ‘å¼ºçƒˆæ¨èä½ æŸ¥çœ‹è¿™ç¯‡æœ‰è¶£çš„* [*ç ”ç©¶*](https://research.atspotify.com/2018/07/understanding-and-evaluating-user-satisfaction-with-music-discovery/) *ï¼Œç”± Spotify é¡¶çº§ä¸“å®¶ä¸»å¯¼ã€‚è¿™æ˜¯å¿…è¯»çš„ï¼)*

# æœºå™¨å­¦ä¹ ä¸è¡Œä¸ºå¿ƒç†å­¦åœ¨ç§‘æŠ€ä¸­çš„åº”ç”¨

![](img/3cabf23560f84b106fbe91baa1e6a217.png)

ä½œè€…å›¾ç‰‡ï¼ˆMidjourneyï¼‰

åœ¨ç§‘æŠ€é¢†åŸŸï¼Œåƒæˆ‘çš„ç ”ç©¶é¡¹ç›®éå¸¸å¸¸è§ï¼Œå› ä¸ºå¾ˆå¤šå·¥ä½œéƒ½å›´ç»•ç€ä¸ºç”¨æˆ·/å®¢æˆ·æä¾›æœ€ä½³ä¸ªæ€§åŒ–ä½“éªŒã€‚

è¿™é€šå¸¸æ„å‘³ç€è¦æ·±å…¥äº†è§£äººç±»å¿ƒç†ï¼Œè€Œæœºå™¨å­¦ä¹ å¯ä»¥æ˜¯å®ç°è¿™ä¸€ä¸å¯èƒ½ç›®æ ‡çš„å¼ºå¤§å·¥å…·â€”â€”*ç†è§£äººç±»*ã€‚

> å½“æˆ‘ä»¬å°†æœºå™¨å­¦ä¹ ä¸å¿ƒç†å­¦å’Œè¡Œä¸ºç§‘å­¦ç»“åˆæ—¶ï¼Œæˆ‘ä»¬æ›´æ¥è¿‘äºäº†è§£äººç±»è¡Œä¸ºçš„å®Œæ•´ç”»é¢ã€‚

## æ€ä¹ˆåšï¼Ÿ

æˆ‘ä»¬å»ºç«‹æ¨¡å‹æ¥é¢„æµ‹äººä»¬çš„ååº”ã€‚

æœ‰æ—¶æˆ‘ä»¬å°è¯•ç†è§£*ä¸ºä»€ä¹ˆ*æ¨¡å‹ä¼šé¢„æµ‹é‚£ç§ååº”ã€‚è¿™å°±åƒæ˜¯åœ¨é—®æ¨¡å‹â€”â€”*â€œå˜¿ï¼Œä½ è®¤ä¸ºæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´ç”¨æˆ·æœ‰è¿™æ ·çš„è¡Œä¸ºï¼Ÿâ€*

ç­”æ¡ˆåœ¨äºæ‰¾åˆ°æ¨¡å‹ä¸­**æœ€é‡è¦çš„å˜é‡**ï¼Œå¹¶ç†è§£**å®ƒä»¬å¯¹é¢„æµ‹ç»“æœçš„å•ç‹¬å½±å“**ã€‚

åœ¨æˆ‘çš„ç ”ç©¶ä¸­ï¼Œæˆ‘åšäº†æˆ‘ä»¬ç§°ä¹‹ä¸º**ç‰¹å¾é‡è¦æ€§**çš„åˆ†æï¼Œå¹¶ä½¿ç”¨äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·å«åš**SHAP**ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ è§£é‡Šï¼š

1.  *ä»€ä¹ˆ*æ˜¯ Shapley å€¼ï¼Œå³ SHAP

1.  *ä¸ºä»€ä¹ˆ*ä½ éœ€è¦çŸ¥é“å¦‚ä½•ä½¿ç”¨ SHAP

1.  *å¦‚ä½•*ä½¿ç”¨ SHAP

æ¬¢è¿æ¥è§£è¯»æœºå™¨å­¦ä¹ æ¨¡å‹ï¼

# æ•°æ®ç§‘å­¦å®¶æ— æ³•é€ƒé¿çš„å›°å¢ƒ

å½“ä½ å¤„ç†åƒ LightGBM è¿™æ ·çš„æ¨¡å‹æ—¶ï¼Œè¿™å°±æ˜¯æˆ‘åœ¨ç ”ç©¶ä¸­ä½¿ç”¨çš„æ¨¡å‹ï¼Œä½ éœ€è¦çŸ¥é“ä½ æ­£åœ¨å¤„ç†çš„æ˜¯ä¸€ç§ç‰¹å®šç±»å‹çš„æ¨¡å‹â€”â€”ä¸€ä¸ªâ€˜é»‘ç®±â€™ã€‚

åƒ DC æ¼«ç”»ä¸­çš„åæ´¾ä¸€æ ·ï¼Œé»‘ç®±æ¨¡å‹æ˜¯ä½ åº”è¯¥å®³æ€•çš„ä¸œè¥¿ã€‚

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè§£è¯»è¿™äº›å°±åƒæ˜¯åœ¨æ‰“å‡»å°ä¸‘ï¼Œè€Œä»–åœ¨ä½ é¢å‰å’¯å’¯ç¬‘ã€‚ä¸€å®šè¦ç¡®ä¿ä»–ä¸ä¼šè½»æ˜“æ³„éœ²ç§˜å¯†ã€‚

åœ¨è®¸å¤šè¡Œä¸šä¸­ï¼Œæ³•è§„å’Œæµç¨‹è¦æ±‚ä½ è§£é‡Šä½ æ˜¯å¦‚ä½•å¾—å‡ºç»“æœçš„ã€‚

> *åœ¨ç§‘æŠ€é¢†åŸŸï¼ŒçŸ¥é“å¦‚ä½•è§£é‡Šä½ çš„é¢„æµ‹ç»“æœå¯¹äº* è·å¾—ä¿¡ä»» *æˆ–* äº†è§£æ¨¡å‹çš„å†…éƒ¨è¿ä½œ* æ˜¯å¾ˆé‡è¦çš„ã€‚åè€…å°±æ˜¯æˆ‘ç ”ç©¶ä¸­çš„æƒ…å†µã€‚*

## å¯è§£é‡Šæ€§ä¸å¤æ‚æ€§

åœ¨ä¸ºä½ çš„é¡¹ç›®é€‰æ‹©åˆé€‚çš„æ¨¡å‹æ—¶ï¼Œä½ å¿…é¡»è€ƒè™‘è®¸å¤šå› ç´ ï¼ŒåŒ…æ‹¬ï¼š

+   **å¯è§£é‡Šæ€§**â€”â€”*ä½ èƒ½è§£é‡Šä¸€ä¸‹ä½ çš„æ¨¡å‹æ˜¯å¦‚ä½•åšåˆ°è¿™äº›çš„å—ï¼Ÿå®ƒæ˜¯å¦‚ä½•åšå‡ºå†³ç­–çš„ï¼Ÿ* ä¾‹å¦‚ï¼Œçº¿æ€§å›å½’æ¨¡å‹å°±æ˜¯é€æ˜æ€§çš„å®šä¹‰ã€‚ä½ å¯ä»¥è½»æ¾è¿½æº¯æ¯ä¸ªç‰¹å¾å¯¹æ¨¡å‹è¾“å‡ºçš„å½±å“ã€‚å¯è§£é‡Šæ€§ä¹Ÿå¸¸è¢«ç§°ä¸ºå¯è§£é‡Šæ€§ã€‚

+   **å¤æ‚æ€§** â€” *ä½ çš„æ¨¡å‹çš„æ¶æ„æˆ–è¡¨ç¤ºæœ‰å¤šå¤æ‚ï¼Ÿ* ç¥ç»ç½‘ç»œå¯ä»¥é¢„æµ‹å¥‡è¿¹ï¼Œä½†äº†è§£å®ƒä»¬å¦‚ä½•æ•æ‰ç‰¹å¾ä¹‹é—´çš„å…³ç³»å°†è®©ä½ æ„Ÿåˆ°å¤´ç–¼ã€‚å¤æ‚æ€§é€šå¸¸ä¹Ÿä¸é«˜é¢„æµ‹èƒ½åŠ›ç›¸å…³ã€‚

## ç™½ç›’è¿˜æ˜¯é»‘ç›’ï¼Ÿ

å¦‚ä½ æ‰€è§ï¼Œè¿™ä¸¤ä¸ªæŒ‡æ ‡å®Œå…¨ä¸ä¸€è‡´ã€‚å¤æ‚çš„æ¨¡å‹é€šå¸¸ä¼šç‰ºç‰²å¯è§£é‡Šæ€§ã€‚å› æ­¤ï¼Œä½ éœ€è¦æ ¹æ®ä½ çš„ç›®æ ‡å°å¿ƒé€‰æ‹©æ¨¡å‹ç±»å‹ï¼š

![](img/3e6eb9b68311db3c8256d4af04e3c936.png)

ä½œè€…æä¾›çš„å›¾ç‰‡ï¼ˆMidjourneyï¼‰

+   **ç™½ç›’æ¨¡å‹** â€” è¿™äº›æ¨¡å‹æ˜“äºè§£é‡Š/è¯´æ˜ï¼Œå› ä¸ºå®ƒä»¬æ¸…æ™°åœ°å±•ç¤ºäº†ç‰¹å¾ä¹‹é—´çš„å…³ç³»ã€‚

    ä½ å¯ä»¥æ·±å…¥äº†è§£æ¨¡å‹å¦‚ä½•åšå‡ºé¢„æµ‹ã€‚

+   **é»‘ç›’æ¨¡å‹** â€” è¿™äº›æ¨¡å‹å¯ä»¥äº§ç”Ÿå‡†ç¡®çš„ç»“æœï¼Œä½†é«˜åº¦å¤æ‚ï¼Œéš¾ä»¥è§£é‡Šã€‚å°±åƒé»‘æ´ä¸€æ ·ï¼Œæˆ‘ä»¬å®Œå…¨ä¸çŸ¥é“é‡Œé¢å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ‰€ä»¥æˆ‘ä»¬å°±å«å®ƒä»¬ BBï¼Œè¿™æ ·å¬èµ·æ¥ä¸é‚£ä¹ˆå¯æ€•ã€‚

> *é»‘ç›’æ¨¡å‹é€šå¸¸æ˜¯æˆ‘ä»¬åœ¨æŠ€æœ¯ä¸­ç”¨æ¥è·å¾—å¼ºå¤§è€Œå‡†ç¡®ç»“æœçš„æ¨¡å‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç†è§£å®ƒä»¬å¯¹ä½ ä½œä¸ºæ•°æ®ç§‘å­¦å®¶çš„èŒä¸šç”Ÿæ¶¯è‡³å…³é‡è¦ã€‚*

# æ­¥éª¤ 1 â€” è‰¯å¥½çš„é¢„æµ‹ç»“æœ

## ä¸ºäº†è¯„ä¼°å“ªäº›å› ç´ æ¨åŠ¨äº†æ»¡æ„åº¦ï¼Œæˆ‘å¿…é¡»ï¼š

1.  é€‰æ‹©ä¸€ä¸ªå¯ä»¥ç”¨æ¥æè¿°ç”¨æˆ·æ»¡æ„åº¦çš„æŒ‡æ ‡ã€‚

1.  é€‰æ‹©æ­£ç¡®çš„æœºå™¨å­¦ä¹ æ¨¡å‹â€”â€”åœ¨æˆ‘çš„æ¡ˆä¾‹ä¸­æ˜¯ LightGBM*ã€‚

1.  ä¸ºæˆ‘çš„æ¨¡å‹å¯»æ‰¾å¹¶åˆ›å»ºå°½å¯èƒ½å¤šçš„ç›¸å…³ç‰¹å¾ã€‚

1.  é€‰æ‹©ä¸€ä¸ªå‡†ç¡®æ€§æŒ‡æ ‡æ¥è¯„ä¼°æˆ‘çš„æ¨¡å‹æ€§èƒ½â€”â€”åœ¨æˆ‘çš„æ¡ˆä¾‹ä¸­æ˜¯ ROC AUC åˆ†æ•°ã€‚

1.  ä¼˜åŒ–æˆ‘çš„æ¨¡å‹æ€§èƒ½ï¼Œä»¥ç¡®ä¿å®ƒå¯¹è¯¥æŒ‡æ ‡çš„é¢„æµ‹ç›¸å¯¹å‡†ç¡®ã€‚

**LightGBM æ˜¯ä¸€ä¸ªåŸºäºå†³ç­–æ ‘çš„æ¡†æ¶ï¼Œå®ƒç»“åˆäº†æ¢¯åº¦æå‡å’Œé›†æˆæ–¹æ³•æ¥è§£å†³å¤æ‚é—®é¢˜ã€‚é›†æˆæ–¹æ³•é€šè¿‡æ¯æ£µæ ‘å¯¹æ•°æ®æœ‰ä¸åŒçš„çŸ¥è¯†å¹¶é‡‡ç”¨ä¸åŒçš„å†³ç­–æ–¹æ³•æ¥æé«˜å‡†ç¡®æ€§ã€‚æ¢¯åº¦æå‡é€šè¿‡é¡ºåºæ„å»ºå¼±å†³ç­–æ ‘å·¥ä½œï¼Œæ¯æ£µæ ‘ä»å‰ä¸€ä¸ªæ¨¡å‹é‡åˆ°å›°éš¾çš„åœ°æ–¹å­¦ä¹ å¹¶ä¿®æ­£é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ï¼Œç§°ä¸ºâ€œæ®‹å·®â€ã€‚è¿™äº›æ ‘ä¼ æ’­é”™è¯¯çš„æ¢¯åº¦ã€‚*

![](img/14fc52c23c0a8c263af1952a4adf77e4.png)

æˆ‘çš„æœºå™¨å­¦ä¹ æµç¨‹æ˜¯è¿™æ ·çš„

*ç”±äºæœ¬ç ”ç©¶çš„ä¿å¯†æ€§ï¼Œæˆ‘ä¸èƒ½åˆ†äº«å…·ä½“ä¿¡æ¯ï¼Œä½†æˆ‘ä¼šå°½åŠ›è®©å®ƒå¬èµ·æ¥ä¸åƒæ˜¯ä½ éœ€è¦è§£è¯»çš„ä¸œè¥¿ã€‚è®© SHAP æ¥å¤„ç†å§ã€‚*

åœ¨æˆ‘çš„ç ”ç©¶ä¸­ï¼Œæˆ‘æ„å»ºäº†ä¸€ä¸ª LightGBM åˆ†ç±»å™¨ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª BB æ¨¡å‹ï¼Œå®ƒè¾“å‡ºä¸€ä¸ªäºŒè¿›åˆ¶ç»“æœï¼š

y = 1 â†’ ç”¨æˆ·ä¼¼ä¹æ»¡æ„

y = 0 â†’ ä¸å¤ªæ»¡æ„

æˆ‘çš„ç›®æ ‡æ˜¯ç†è§£**ä¸ºä»€ä¹ˆ**å¬ä¼—æœ‰è¿™æ ·çš„æ„Ÿå—ï¼Œè€Œä¸ä»…ä»…æ˜¯ææ¸…æ¥š**ä»–ä»¬çš„æ„Ÿå—å¦‚ä½•**ã€‚

èµ·åˆï¼Œæˆ‘çš„ ROC AUC åˆ†æ•°åœ¨ 0.5 å·¦å³ï¼Œè¿™æ˜¯åˆ†ç±»å™¨èƒ½å¾—åˆ°çš„æœ€å·®åˆ†æ•°ã€‚è¿™æ„å‘³ç€ç®—æ³•æœ‰ 50% çš„æ¦‚ç‡é¢„æµ‹æ˜¯æˆ–å¦ã€‚è¿™å’Œäººç±»çš„éšæœºè¡Œä¸ºä¸€æ ·ã€‚

å› æ­¤ï¼Œåœ¨èŠ±äº† 2 ä¸ªæœˆå°è¯•æé«˜æˆ‘çš„æ¨¡å‹é¢„æµ‹æ•ˆæœä¹‹åï¼Œæˆ‘ç»ˆäºè¾¾åˆ°äº†ä¸€ä¸ªä»¤äººæ»¡æ„çš„ç»“æœã€‚

*å†ä¸€æ¬¡ï¼Œç¡®ä¿æŸ¥çœ‹ä¸‹é¢æ–‡ç« ä¸­æˆ‘æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼*

[](/boosting-model-accuracy-techniques-i-learned-during-my-machine-learning-thesis-at-spotify-code-8027f9c11e57?source=post_page-----aacd769831b4--------------------------------) ## æé«˜æ¨¡å‹å‡†ç¡®æ€§ï¼šæˆ‘åœ¨ Spotify çš„æœºå™¨å­¦ä¹ è®ºæ–‡ä¸­å­¦åˆ°çš„æŠ€æœ¯ (+Codeâ€¦

### ä¸€ä¸ªæŠ€æœ¯æ•°æ®ç§‘å­¦å®¶æ”¹å–„é¡½å›º ML æ¨¡å‹çš„æŠ€æœ¯æ ˆ

towardsdatascience.com

åªæœ‰åœ¨é‚£æ—¶ï¼Œæˆ‘æ‰èƒ½çœŸæ­£å¼€å§‹æ·±å…¥ç ”ç©¶æˆ‘çš„æ¨¡å‹å¦‚ä½•é€šè¿‡ç‰¹å¾é‡è¦æ€§è¿›è¡Œé¢„æµ‹ã€‚æ‰€ä»¥è®©æˆ‘ä»¬ç«‹å³å¼€å§‹å§ï¼

# ç¬¬ 2 æ­¥ â€” ç‰¹å¾é‡è¦æ€§

## SH-å¤ä»‡è€…ä»¬æ¥æ‹¯æ•‘

*é‚£ä¹ˆè®©æˆ‘ä»¬å€’å¸¦ã€‚*

*åœ¨æˆ‘çš„ç ”ç©¶ä¸­ï¼Œæˆ‘æƒ³è¯„ä¼°é©±åŠ¨ç”¨æˆ·æ»¡æ„åº¦çš„å…³é”®å› ç´ æ˜¯ä»€ä¹ˆã€‚ç”±äºæˆ‘çš„æ¨¡å‹æ˜¯ä¸€ä¸ª BBï¼Œå”¯ä¸€çš„æ–¹æ³•å°±æ˜¯è¿›è¡Œç‰¹å¾é‡è¦æ€§åˆ†æã€‚*

æƒ³è±¡ä¸€ä¸‹â€”â€”å¤ä»‡è€…ä»¬ä¸€èµ·æˆ˜æ–—ä»¥æ‹¯æ•‘ä¸–ç•Œã€‚ä½ æ€ä¹ˆçŸ¥é“è°åœ¨æ‹¯æ•‘ä¸­æœ€å¼ºå¤§ï¼Ÿ

*(æˆ‘ä»¬éƒ½çŸ¥é“æ˜¯é’¢é“ä¾ ï¼Œä½†è®©æˆ‘ä»¬å‡è£…ä¸çŸ¥é“ï¼)*

è¿™å°±æ˜¯ SHapley Additive exPlanationsï¼Œæˆ– SHAP å€¼ï¼Œåœ¨æœºå™¨å­¦ä¹ çš„è™šæ‹Ÿä¸–ç•Œä¸­æ‰€åšçš„äº‹æƒ…ã€‚

![](img/ac6002efb06dca11a53799e72d8ca8a2.png)

å›¾ç‰‡ç”± [Mateusz WacÅ‚awek](https://unsplash.com/@wacalke?utm_source=medium&utm_medium=referral) æä¾›ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

## SHAP å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

SHAP æˆ– Shapley å€¼æ˜¯åŸºäºåˆä½œåšå¼ˆç†è®ºçš„ã€‚

> å®ƒä»¬æµ‹é‡æ¯ä¸ªç‰¹å¾â€”â€”å¤ä»‡è€…ä»¬â€”â€”å¦‚ä½•å¯¹æ¨¡å‹çš„æœ€ç»ˆå†³ç­–â€”â€”æ‹¯æ•‘ä¸–ç•Œæˆ–æ‘§æ¯ä¸–ç•Œâ€”â€”ä½œå‡ºè´¡çŒ®ã€‚

åœ¨ç‰¹å¾é‡è¦æ€§çš„èƒŒæ™¯ä¸‹ï¼Œ*å¤ä»‡è€…ä»¬* æ˜¯å•ä¸ª *ç‰¹å¾*ï¼Œè€Œ *æ‹¯æ•‘ä¸–ç•Œ* æ˜¯æ¨¡å‹åšå‡ºçš„ *é¢„æµ‹*ã€‚

## å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

> è¿™ä¸ªæ–¹æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„ç‰¹å¾ç»„åˆï¼Œå¹¶**æµ‹é‡å½“ç‰¹å®šç‰¹å¾è¢«åŒ…å«æˆ–æ’é™¤æ—¶æ¨¡å‹é¢„æµ‹çš„å˜åŒ–ã€‚**

é€šè¿‡æ¯”è¾ƒè¿™äº›ä¸åŒçš„ç»„åˆï¼ŒShapley å€¼ä¸ºæ¯ä¸ªç‰¹å¾åˆ†é…ä¸€ä¸ªå€¼ï¼Œä»£è¡¨å…¶å¯¹é¢„æµ‹çš„è´¡çŒ®ã€‚

å…³é”®çš„æ•°å­¦æ¦‚å¿µæ˜¯ *æ’åˆ—*ã€‚æˆ‘ä»¬è€ƒè™‘ä¸åŒçš„ç‰¹å¾æ’åˆ—å¹¶è®¡ç®—å®ƒä»¬çš„è¾¹é™…è´¡çŒ®ã€‚é€šè¿‡è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„æ’åˆ—å¹¶å¹³å‡è¿™äº›è´¡çŒ®ï¼Œæˆ‘ä»¬å¾—å‡ºæ¯ä¸ªç‰¹å¾çš„ Shapley å€¼ã€‚

é€šè¿‡è¿™æ ·åšï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£æˆ‘ä»¬çš„æ¨¡å‹æ˜¯å¦‚ä½•â€œæ‹¯æ•‘ä¸–ç•Œâ€â€”â€”æˆ–è€…è¯´å®ƒæ˜¯å¦‚ä½•è¿›è¡Œé¢„æµ‹çš„ï¼

## æ›´å…·ä½“åœ°è¯´ï¼ŒSHAP å€¼å¸®åŠ©æˆ‘ä»¬ç†è§£ï¼š

1.  *å½±å“é¢„æµ‹ç»“æœçš„ä¸»è¦ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿ*

    åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œ**æ¯ä¸ªå¤ä»‡è€…åœ¨æ‹¯æ•‘ä¸–ç•Œä¸­çš„åŠ›é‡æœ‰å¤šå¼º**ã€‚æƒ³è±¡ä¸€ä¸‹ç»¿å·¨äººçš„æ‹³å¤´æ‰“åˆ°ä½ è„¸ä¸Šï¼Œé‚£ä¸œè¥¿ä¼šæŠŠä½ æ‰“é£åˆ°å¤šå…ƒå®‡å®™ä¸­ã€‚

1.  *è¿™äº›ä¸åŒç‰¹å¾å¦‚ä½•å½±å“é¢„æµ‹ç»“æœï¼Ÿ* å³**æ¯ä¸ªå¤ä»‡è€…åœ¨æ‹¯æ•‘ä¸–ç•Œä¸­çš„åŠ›é‡çš„å½±å“**ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œçœ‹çœ‹çŒ©çº¢å¥³å·«æ—ºè¾¾æœ‰å¤šå¼ºï¼Œä½†å¥¹åœ¨ï¼šæ‘§æ¯äº†åŠä¸ªä¸–ç•Œï¼ï¼ï¼æœ‰æ—¶å€™è‹±é›„æ˜¯åæ´¾ï¼ˆæˆ–è€…åªæ˜¯ä¸€ä¸ªåè‹±é›„ï¼‰ï¼Œæ‰€ä»¥é‡è¦çš„æ˜¯ä½ è¦æ‰¾å‡ºä»–ä»¬ç«™åœ¨å“ªä¸€è¾¹ã€‚

## åŒé‡è§£é‡Šæ€§

Shapley å€¼ç‰¹åˆ«å¼ºå¤§ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº† BB æ¨¡å‹è§£é‡Šæ€§çš„åŒé‡è§†è§’ï¼š

1.  **æ€»ä½“ä¸Šã€‚** é€šè¿‡æä¾›æ¯ä¸ªç‰¹å¾çš„é¢„æµ‹èƒ½åŠ›çš„æ€»ä½“æ¦‚è¿°ï¼Œæ±‡æ€»æ‰€æœ‰ç”¨æˆ·ã€‚

1.  **å±€éƒ¨ä¸Šã€‚** å¯ä»¥ä¸ºæ¯ä¸ªç”¨æˆ·è®¡ç®— SHAP å€¼ï¼Œä»¥æ¢ç´¢ç‰¹å¾å¦‚ä½•å½±å“è¯¥ç‰¹å®šç”¨æˆ·çš„é¢„æµ‹ç»“æœã€‚

# åŠ å…¥å¤ä»‡è€…è”ç›Ÿæ€ä¹ˆæ ·ï¼Ÿæ¥å§ï¼

![](img/447c1b770210502d10a09225a0d96846.png)

ä½œè€…æä¾›çš„å›¾ç‰‡

è¯·è®°ä½ï¼Œä¸‹é¢ä½¿ç”¨çš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯çº¯ç²¹çš„ç¤ºä¾‹ï¼Œä»¥ä¿å¯†æ­¤ç ”ç©¶çš„æœºå¯†æ€§ã€‚

## **1\. ç¼–ç ä½ çš„å˜é‡**

ç¡®ä¿ä½ çš„å˜é‡å·²ç»ç¼–ç ï¼š

+   *åºæ•°ç‰¹å¾*ï¼Œä»¥ä¾¿æ¨¡å‹ä¿ç•™åºæ•°ä¿¡æ¯

+   *åˆ†ç±»ç‰¹å¾*ï¼Œä»¥ä¾¿æ¨¡å‹å¯ä»¥è§£é‡Šåä¹‰æ•°æ®

æ‰€ä»¥é¦–å…ˆï¼Œè®©æˆ‘ä»¬æŠŠæˆ‘ä»¬çš„å˜é‡å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ã€‚ç”±äºç ”ç©¶æ˜¯ä¿å¯†çš„ï¼Œæˆ‘ä¸èƒ½å…¬å¼€æˆ‘ä½¿ç”¨çš„æ•°æ®ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä½¿ç”¨è¿™äº›ä»£æ›¿ï¼š

```py
region = ['APAC', 'EU', 'NORTHAM', 'MENA', 'AFRICA']
user_type = ['premium', 'free']

ordinal_list = ['region', 'user_type']
```

ç„¶åï¼Œç¡®ä¿æ„å»ºç¼–ç å˜é‡çš„å‡½æ•°ï¼š

```py
from sklearn.preprocessing import OneHotEncoder, OrdinalEncoder

def var_encoding(X, cols, ordinal_list, encoding):

    #Function to encode ordinal variables
    if encoding == 'ordinal_ordered': 
        encoder = OrdinalEncoder(categories=ordinal_list) 
        encoder.fit(X.loc[:, cols])
        X.loc[:, cols] = encoder.transform(X.loc[:, cols])

    #Function to encode categorical variables    
    elif encoding == 'ordinal_unordered':
        encoder = OrdinalEncoder()
        encoder.fit(X.loc[:, cols])
        X.loc[:, cols] = encoder.transform(X.loc[:, cols])

    else:     
        encoder = OneHotEncoder(handle_unknown='ignore')
        encoder.fit(df.loc[:, cols])
        df.loc[:, cols] = encoder.transform(df.loc[:, cols])

    return X 
```

ç„¶åå°†è¯¥å‡½æ•°åº”ç”¨äºä½ çš„å˜é‡åˆ—è¡¨ã€‚è¿™æ„å‘³ç€ä½ éœ€è¦åˆ›å»ºåŒ…å«å˜é‡åç§°çš„å­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œå³ä¸€ä¸ªåˆ—è¡¨ç”¨äºä½ çš„*åºæ•°*å˜é‡ï¼Œä¸€ä¸ªç”¨äº*åˆ†ç±»*å˜é‡ï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨äº*æ•°å€¼*å˜é‡ã€‚

```py
def encoding_vars(X, ordinal_cols, ordinal_list, preprocessing_categoricals=False):

    #Encode ordinal variables
    df = var_encoding(df, ordinal_cols, ordinal_list, 'ordinal_ordered')

    #Encode categorical variables
    if preprocessing_categoricals: 
       df = var_encoding(df, categorical_cols, 'ordinal_unordered')    

    #Else set your categorical variables as 'category' if needed
    else:
        for cat in categorical_cols: 
            X[cat] = X[cat].astype('category')

    #Rename your variables as such if needed to keep track of the order
    #An encoded feature such as region will no longer show female or male, but 0 or 1
    df.rename(columns={'user_type': 'free_0_premium_1'},   
    df.reset_index(drop=True, inplace=True)   

    return df
```

## 2\. å‡†å¤‡æ•°æ®

å°†ä½ çš„æ•°æ®æ¡†æ‹†åˆ†ï¼Œä»¥è·å–ä½ çš„*è®­ç»ƒ*ã€*éªŒè¯*å’Œ*æµ‹è¯•*é›†ï¼š

+   **è®­ç»ƒé›†** â€” ç”¨äºè®­ç»ƒä½ é€‰æ‹©çš„ç®—æ³•æ¨¡å‹ï¼Œä¾‹å¦‚ LightGBM

+   **éªŒè¯é›†** â€” ç”¨äºè°ƒæ•´ä½ çš„å‚æ•°å¹¶ä¼˜åŒ–é¢„æµ‹ç»“æœ

+   **æµ‹è¯•é›†** â€” ç”¨äºåšå‡ºæœ€ç»ˆé¢„æµ‹

åœ¨æˆ‘çš„ç ”ç©¶ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†`GroupShuffleSplit`ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·å®šä¹‰æ•°é‡çš„ç‹¬ç«‹è®­ç»ƒ-éªŒè¯åˆ†å‰²ã€‚å®ƒé€šè¿‡å°†æ•´ä¸ªç»„éšæœºåˆ†é…åˆ°è®­ç»ƒé›†æˆ–éªŒè¯é›†æ¥å·¥ä½œã€‚

```py
def split_df(df, ordinal_cols, ordinal_list, target):

    #Splitting train and test
    splitter = GroupShuffleSplit(test_size=.13, n_splits=2, random_state=7)

    #If you're dealing with many rows belonging to the same id then make sure to split based on the same id
    split = splitter.split(df, groups=df['user_id'])
    train_inds, test_inds = next(split)

    train = df.iloc[train_inds]
    test = df.iloc[test_inds]

    #Splitting val and test data
    splitter2 = GroupShuffleSplit(test_size=.5, n_splits=2, random_state=7)
    split = splitter2.split(test, groups=test['user_id'])
    val_inds, test_inds = next(split)

    val = test.iloc[val_inds]
    test = test.iloc[test_inds]

    #Defining your X (predictive features) and y (target_feature)
    X_train = train.drop(['target_feature'], axis=1)
    y_train = train.target_feature

    X_val = val.drop(['target_feature'], axis=1)
    y_val = val.target_feature

    X_test = test.drop(['target_feature'], axis=1)
    y_test = test.target_feature

    #Encoding the variables in the sets
    X_train = encoding_vars(X_train, ordinal_cols, ordinal_list)
    X_val = encoding_vars(X_val, ordinal_cols, ordinal_list)
    X_test = encoding_vars(X_test, ordinal_cols, ordinal_list)

    return X_train, y_train, X_val, y_val, X_test, y_test
```

ç„¶åå°†è¯¥å‡½æ•°åº”ç”¨äºä½ çš„æ•°æ®æ¡†ï¼Œä»¥è·å–ä½ çš„è®­ç»ƒã€éªŒè¯å’Œæµ‹è¯•é›†ï¼š

```py
X_train, y_train, X_val, y_val, X_test, y_test = split_df(df, ordinal_cols, ordinal_list, target='target_feature')
```

## 3\. è®­ç»ƒä½ çš„*æ¨¡å‹*

åœ¨è¿™é‡Œï¼Œæˆ‘å‡è®¾ä½ å·²ç»ï¼š

+   æ¸…ç†å¹¶é¢„å¤„ç†ä½ çš„æ•°æ®

+   è°ƒæ•´äº†ä½ çš„å‚æ•°

+   ä¼˜åŒ–äº†ä½ çš„æ¨¡å‹

```py
import lightgbm as lgb
#Build your model
clf =  lgb.LGBMClassifier(objective='binary', max_depth=-1, random_state=314, metric='roc_auc', n_estimators=5000, num_threads=16, verbose=-1,
                           **best_hyperparameters)

#Fit your model
clf.fit(X_train, y_train, eval_set=(X_val, y_val), eval_metric='roc_auc')

#Make the predictions
roc_auc_score(y_test, clf.predict(X_test)) 
```

## 4\. ä½¿ç”¨ SHAP è¿›è¡Œç‰¹å¾é‡è¦æ€§åˆ†æ

ç°åœ¨æ˜¯ä½ æœŸå¾…å·²ä¹…çš„æ—¶åˆ»ï¼

SHAP åŒ…æœ‰è®¸å¤šä¸åŒç±»å‹çš„å¯è§†åŒ–ï¼Œå…·ä½“å–å†³äºä½ æ˜¯å¦æƒ³è¦å…¨çƒè§£é‡Šï¼ˆæ‰€æœ‰ç”¨æˆ·æ±‡æ€»ï¼‰è¿˜æ˜¯å±€éƒ¨è§£é‡Šï¼ˆæ¯ä¸ªç”¨æˆ·ï¼‰ã€‚åœ¨æˆ‘çš„ç ”ç©¶ä¸­ï¼Œæˆ‘ä¸“æ³¨äºç»“æœçš„å…¨çƒè§£é‡Šï¼Œå› ä¸ºæˆ‘ä¸å…³å¿ƒç‰¹å®šç”¨æˆ·ã€‚

æˆ‘ä½¿ç”¨äº†ä¸€ç§ç‰¹å®šç±»å‹çš„å›¾è¡¨ï¼Œæˆ‘è®¤ä¸ºè¿™ç§å›¾è¡¨è¶³å¤Ÿæœ‰æ•ˆåœ°å¯è§†åŒ–ä½ çš„ç‰¹å¾å½±å“â€”â€”**æ±‡æ€»å›¾**ã€‚ä½ å°†å¾—åˆ°ï¼š

+   æ ¹æ®é¢„æµ‹æƒé‡å¯¹ç‰¹å¾è¿›è¡Œ **æ’å**ã€‚

![](img/73723d38af47d0b3fc70e4942883f688.png)

**S1** â€” ä½œè€…æä¾›çš„å›¾ç‰‡

+   æ¯ä¸ªç‰¹å¾çš„ **æ–¹å‘æ€§å½±å“**ï¼Œå³ç‰¹å¾æ˜¯å¦å¯¹é¢„æµ‹ç»“æœäº§ç”Ÿæ­£å‘æˆ–è´Ÿå‘å½±å“ã€‚

![](img/b63c53769d9c8bdfcdaaf90c55d36940.png)

**S2** â€” ä½œè€…æä¾›çš„å›¾ç‰‡

**æ³¨æ„ï¼š** é¢œè‰²ä¸ºç°è‰²çš„ç‰¹å¾æ˜¯åä¹‰ç‰¹å¾ï¼Œæ— æ³•ç¼–ç ï¼Œå› æ­¤å¦‚æœä½ å…³å¿ƒè¿™äº›ç‰¹å¾ï¼Œä¹Ÿè¦å¯¹å®ƒä»¬è¿›è¡Œç¼–ç ï¼

ğŸš¨**è®°ä½**ğŸš¨

ç¡®ä¿åˆ›å»ºä¸€ä¸ªç‰¹å¾åˆ—è¡¨ï¼Œä½ æƒ³è¯„ä¼°å…¶å¯¹é¢„æµ‹ç»“æœçš„å½±å“ï¼šä½ å°†æŠŠå®ƒä»¬æ’å…¥ä¸‹é¢çš„â€˜my_featuresâ€™ä»£ç è¡Œä¸­ã€‚

è¿™ä¸ªå‡½æ•°å°†äº§ç”Ÿæ±‡æ€»å›¾ï¼ˆè§ S1ï¼ŒS2ï¼‰

```py
def shap_viz(model, X_val, title, target):

    #Prepare the features you want to evaluate
    my_features= [**List of features you want to evaluate**]
    my_features_idx = list(np.flatnonzero(X_val.columns.isin(my_features)))

    #Define your metric
    class_names = ['happy_:)', 'not_happy_:(']

    #Load the SHAP explainer, since LightGBM is a decision tree, I used TreeExplainer
    explainer = shap.TreeExplainer(model)
    #We train the SHAP values on the features based on the validation set
    shap_values = explainer.shap_values(X_val) 

    plt.figure(figsize=(18, 6))
    plt.subplot(1,2,1)
    shap.summary_plot(shap_values, X_val.values, plot_type='bar', class_names=class_names, feature_names=X_val.columns, max_display=20, show=False, plot_size=None)
    plt.title(f'{title} â€“ Weight of the impact of each feature')

    plt.subplot(1,2,2)
    #shap_values[n] evaluates the impact of features for predicting satisfaction
    #n = 0 -- not happy, n = 1 -- happy
    shap.summary_plot(shap_values[1], X_val.values, feature_names=X_val.columns, max_display=20, show=False,  plot_size=None)
    plt.title(f'{title} â€“ Directional impact of each feature')
    plt.tight_layout()

    #To save a picture of your SHAP viz
    plt.savefig(f'{title}.png', bbox_inches='tight', dpi=100)

    plt.show()

    #To print a list of the top 10 most impactful features
    vals = np.abs(shap_values[0]).mean(0)
    feature_importance = pd.DataFrame(list(zip(X_val.columns, vals)), columns=['col_name', 'feature_importance_vals'])
    feature_importance.sort_values(by=['feature_importance_vals'], ascending=False, inplace=True)
    for i in list(feature_importance.col_name.head(10)):
            print(i)
    return shap_values
```

ç„¶åè¿è¡Œå‡½æ•°æ¥è·å– SHAP å¯è§†åŒ–ï¼Œç§ï¼

```py
your_shap = shap_viz(clf, X_val, title='insert_title', target='target_feature')
```

ä½ åˆšåˆšè®©å°ä¸‘æ³„å¯†ï¼›è¿è™è ä¾ ä¹Ÿåšä¸åˆ°ã€‚

ä½ ä¹ŸçŸ¥é“å“ªä¸ªå¤ä»‡è€…æ‹¯æ•‘äº†ä¸–ç•Œï¼å¦‚æœä½ æ²¡ç†è§£è¿™ä¸ªç¬‘è¯ï¼Œé‚£å°±å¯¹ä¸èµ·ä½ æ²¡èŠ±æ—¶é—´è®¤çœŸé˜…è¯»æˆ‘çš„æ–‡ç«  ğŸ˜¡

*(ç°åœ¨æˆ‘æ‰æ„è¯†åˆ°æˆ‘æŠŠ Marvel å®‡å®™å’Œ DC å®‡å®™æ··åˆäº†ï¼Œè¿™çœŸæ˜¯ç¬¬ä¸€æ¬¡)*

# æœ€é‡è¦çš„éƒ¨åˆ†â€”â€”è§£é‡Š SHAP å€¼

è§£é‡Šè¿™äº›å›¾å½¢å¹¶ä¸ç®€å•ã€‚èŠ±äº†æˆ‘ä¸€äº›æ—¶é—´æ‰å­¦ä¼šå¦‚ä½•æ­£ç¡®è¿›è¡Œã€‚

åœ¨è§£é‡Šè¿™äº›å›¾å½¢æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘å›¾ä¸­è¡¨ç¤ºçš„ä¸¤ä¸ªå…ƒç´ ï¼š

+   *SHAP å€¼æ˜¯æ­£è¿˜æ˜¯è´Ÿï¼Ÿ* å®ƒåœ¨æ±‡æ€»å›¾çš„å·¦ä¾§è¿˜æ˜¯å³ä¾§ï¼Ÿ

+   *ç‰¹å¾å€¼æ˜¯é«˜è¿˜æ˜¯ä½ï¼Ÿ* çœ‹çœ‹å›¾å³ä¾§ä»ä½åˆ°é«˜çš„å½©è‰²æ¡ã€‚

## è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­

å‡è®¾æˆ‘ä»¬åœ¨åˆ†æç”¨æˆ·åœ¨ Spotify ä¸Šçš„æµåª’ä½“æ—¶é—´ `streaming_time` ä¸ä»–ä»¬çš„æ»¡æ„åº¦ï¼ˆç¬¬ 1 æ­¥ä¸­çš„ `y = 1`ï¼‰ä¹‹é—´çš„å…³ç³»ã€‚ä½¿ç”¨ SHAP å€¼ï¼š

1.  **æ­£** SHAP å€¼ï¼ˆå›¾çš„å³ä¾§ï¼‰+ **é«˜** `streaming_time`ï¼ˆçº¢è‰²ï¼‰â†’ æ›´å¤šçš„æµåª’ä½“å¯¹åº”æ›´é«˜çš„æ»¡æ„åº¦ã€‚

1.  **è´Ÿ** SHAP å€¼ï¼ˆå›¾çš„å·¦ä¾§ï¼‰+ **é«˜** `streaming_time`ï¼ˆçº¢è‰²ï¼‰â†’ æ›´å¤šçš„æµåª’ä½“è¡¨æ˜å¯¹ä½“éªŒçš„æ»¡æ„åº¦è¾ƒä½ã€‚

# å›é¡¾

1.  **ä»€ä¹ˆæ˜¯ Shapley å€¼ï¼Ÿ** ä¸€ç§ç‰¹å¾é‡è¦æ€§æ–¹æ³•ï¼Œç”¨äºè¡¡é‡æ¯ä¸ªç‰¹å¾å¯¹æ¨¡å‹æœ€ç»ˆå†³ç­–çš„è´¡çŒ®ã€‚

1.  **ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ SHAPï¼Ÿ** å½“ä½ éœ€è¦è§£é‡Šæ¨¡å‹å¦‚ä½•åšå‡ºé¢„æµ‹ï¼Œæˆ–å½“ä½ æƒ³äº†è§£åœ¨å¤„ç†éš¾ä»¥è§£é‡Šçš„æ¨¡å‹ï¼ˆå¦‚é»‘ç®±æ¨¡å‹ï¼‰æ—¶ï¼Œå“ªäº›å…³é”®ç‰¹å¾å½±å“äº†æ¨¡å‹è¾“å‡ºã€‚

1.  **å¦‚ä½•ä½¿ç”¨ SHAPï¼Ÿ** æŸ¥çœ‹é€æ­¥è¿‡ç¨‹ã€‚æˆ‘æ— æ³•æ€»ç»“è¿™ä¸€éƒ¨åˆ†ã€‚

# æˆ‘ä¸ºä½ å‡†å¤‡äº†ç¤¼ç‰© ğŸï¼

è®¢é˜…æˆ‘çš„ [**é€šè®¯**](https://levelupwithk.substack.com/) **K çš„ DataLadder**ï¼Œä½ å°†è‡ªåŠ¨è·å¾—æˆ‘çš„ **ç»ˆæ SQL å¤‡å¿˜å•**ï¼ŒåŒ…å«æˆ‘åœ¨å¤§ç§‘æŠ€å…¬å¸æ—¥å¸¸å·¥ä½œä¸­ä½¿ç”¨çš„æ‰€æœ‰æŸ¥è¯¢ + å¦ä¸€ä¸ªç§˜å¯†ç¤¼ç‰©ï¼

æˆ‘æ¯å‘¨åˆ†äº«åœ¨ç§‘æŠ€é¢†åŸŸæ‹…ä»»æ•°æ®ç§‘å­¦å®¶çš„ç»å†ï¼Œæä¾›å®ç”¨çš„æŠ€å·§ã€æŠ€èƒ½å’Œæ•…äº‹ï¼Œæ—¨åœ¨å¸®åŠ©ä½ æå‡èƒ½åŠ›â€”â€”å› ä¸ºæ²¡æœ‰äººçœŸæ­£äº†è§£ï¼Œç›´åˆ°ä»–ä»¬äº²èº«ä½“éªŒï¼

## å¦‚æœä½ è¿˜æ²¡æœ‰åšè¿‡è¿™ä¸ª

+   è®¢é˜…æˆ‘çš„[**YouTube**](https://rebrand.ly/tdf62uv)é¢‘é“ã€‚æ–°è§†é¢‘å³å°†ä¸Šçº¿ï¼

+   åœ¨[**Instagram**](https://www.instagram.com/elalamikhouloud/)ã€[**LinkedIn**](https://www.linkedin.com/in/elalamik/)ã€[**X**](https://twitter.com/elalamik)ä¸Šå…³æ³¨æˆ‘ï¼Œæˆ–è€…é€‰æ‹©å…¶ä»–é€‚åˆä½ çš„æ–¹å¼

ä¸ä¹…è§ï¼
