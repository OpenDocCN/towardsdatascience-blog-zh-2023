- en: Exploring TensorFlow Model Prediction Issues
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ¢ç´¢TensorFlowæ¨¡å‹é¢„æµ‹é—®é¢˜
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/exploring-tensorflow-model-prediction-issues-38092d0cdcc3?source=collection_archive---------15-----------------------#2023-02-02](https://towardsdatascience.com/exploring-tensorflow-model-prediction-issues-38092d0cdcc3?source=collection_archive---------15-----------------------#2023-02-02)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/exploring-tensorflow-model-prediction-issues-38092d0cdcc3?source=collection_archive---------15-----------------------#2023-02-02](https://towardsdatascience.com/exploring-tensorflow-model-prediction-issues-38092d0cdcc3?source=collection_archive---------15-----------------------#2023-02-02)
- en: Steps to debug BERTâ€™s (and other LLMsâ€™) slow prediction times on a personal
    computer
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è°ƒè¯•BERTï¼ˆå’Œå…¶ä»–å¤§è¯­è¨€æ¨¡å‹ï¼‰åœ¨ä¸ªäººè®¡ç®—æœºä¸Šæ…¢é€Ÿé¢„æµ‹æ—¶é—´çš„æ­¥éª¤
- en: '[](https://adam1brownell.medium.com/?source=post_page-----38092d0cdcc3--------------------------------)[![Adam
    Brownell](../Images/49b224e4c9f838e907af6c139d666ee3.png)](https://adam1brownell.medium.com/?source=post_page-----38092d0cdcc3--------------------------------)[](https://towardsdatascience.com/?source=post_page-----38092d0cdcc3--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----38092d0cdcc3--------------------------------)
    [Adam Brownell](https://adam1brownell.medium.com/?source=post_page-----38092d0cdcc3--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://adam1brownell.medium.com/?source=post_page-----38092d0cdcc3--------------------------------)[![Adam
    Brownell](../Images/49b224e4c9f838e907af6c139d666ee3.png)](https://adam1brownell.medium.com/?source=post_page-----38092d0cdcc3--------------------------------)[](https://towardsdatascience.com/?source=post_page-----38092d0cdcc3--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----38092d0cdcc3--------------------------------)
    [Adam Brownell](https://adam1brownell.medium.com/?source=post_page-----38092d0cdcc3--------------------------------)'
- en: Â·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2479b1fc8999&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-tensorflow-model-prediction-issues-38092d0cdcc3&user=Adam+Brownell&userId=2479b1fc8999&source=post_page-2479b1fc8999----38092d0cdcc3---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----38092d0cdcc3--------------------------------)
    Â·7 min readÂ·Feb 2, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F38092d0cdcc3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-tensorflow-model-prediction-issues-38092d0cdcc3&user=Adam+Brownell&userId=2479b1fc8999&source=-----38092d0cdcc3---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[å…³æ³¨](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2479b1fc8999&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-tensorflow-model-prediction-issues-38092d0cdcc3&user=Adam+Brownell&userId=2479b1fc8999&source=post_page-2479b1fc8999----38092d0cdcc3---------------------post_header-----------)
    å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----38092d0cdcc3--------------------------------)
    Â·7åˆ†é’Ÿé˜…è¯»Â·2023å¹´2æœˆ2æ—¥[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F38092d0cdcc3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-tensorflow-model-prediction-issues-38092d0cdcc3&user=Adam+Brownell&userId=2479b1fc8999&source=-----38092d0cdcc3---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F38092d0cdcc3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-tensorflow-model-prediction-issues-38092d0cdcc3&source=-----38092d0cdcc3---------------------bookmark_footer-----------)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F38092d0cdcc3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-tensorflow-model-prediction-issues-38092d0cdcc3&source=-----38092d0cdcc3---------------------bookmark_footer-----------)'
- en: 'This all started when I was playing around with BERT models, and I got the
    ominous message all Data Scientists hope to avoid:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸€åˆ‡å§‹äºæˆ‘åœ¨ç©BERTæ¨¡å‹æ—¶ï¼Œæˆ‘æ”¶åˆ°äº†æ‰€æœ‰æ•°æ®ç§‘å­¦å®¶éƒ½å¸Œæœ›é¿å…çš„å¯æ€•æ¶ˆæ¯ï¼š
- en: The dreaded â€œKernel Diedâ€ message ğŸ’€
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¤äººææƒ§çš„â€œKernel Diedâ€æ¶ˆæ¯ ğŸ’€
- en: This happened to me while I was running my TensorFlow BERT model on my Jupyter
    Notebook. Training large language models (LLMs) notoriously takes a large amount
    of data and compute, so it could make sense for my comparably puny laptop to crash
    hereâ€¦
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å‘ç”Ÿåœ¨æˆ‘è¿è¡ŒTensorFlow BERTæ¨¡å‹æ—¶ï¼Œåœ¨æˆ‘çš„Jupyter Notebookä¸Šã€‚è®­ç»ƒå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰é€šå¸¸éœ€è¦å¤§é‡æ•°æ®å’Œè®¡ç®—ï¼Œå› æ­¤æˆ‘çš„ç›¸å¯¹å¼±å°çš„ç¬”è®°æœ¬ç”µè„‘åœ¨è¿™é‡Œå´©æºƒä¹Ÿè®¸å¯ä»¥ç†è§£â€¦â€¦
- en: â€¦ except this crash occurred during *prediction*, rather than *training*, which
    was strange given my assumption that more memory was used during training than
    prediction.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦ é™¤äº†è¿™ä¸ªå´©æºƒå‘ç”Ÿåœ¨*é¢„æµ‹*è¿‡ç¨‹ä¸­ï¼Œè€Œä¸æ˜¯*è®­ç»ƒ*è¿‡ç¨‹ä¸­ï¼Œè¿™å¾ˆå¥‡æ€ªï¼Œå› ä¸ºæˆ‘åŸä»¥ä¸ºè®­ç»ƒè¿‡ç¨‹æ¯”é¢„æµ‹è¿‡ç¨‹ä½¿ç”¨æ›´å¤šå†…å­˜ã€‚
- en: The â€œKernel Diedâ€ error provided is unfortunately not very descriptive, and
    debugging line-by-line through the TensorFlow sounded like a daunting exercise.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: â€œKernel Diedâ€ é”™è¯¯æä¾›çš„ä¿¡æ¯ä¸å¤Ÿè¯¦ç»†ï¼Œé€è¡Œè°ƒè¯• TensorFlow ä¼¼ä¹æ˜¯ä¸€ä¸ªä»¤äººç•æƒ§çš„ä»»åŠ¡ã€‚
- en: A few quick searches around Stack Overflow did not completely answer my outstanding
    questions either. But I still needed a path forward.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Stack Overflow ä¸Šåšäº†ä¸€äº›å¿«é€Ÿæœç´¢ï¼Œä¹Ÿæ²¡æœ‰å®Œå…¨è§£ç­”æˆ‘çš„æ‚¬è€Œæœªå†³çš„é—®é¢˜ã€‚ä½†æˆ‘ä»ç„¶éœ€è¦ä¸€ä¸ªå‰è¿›çš„æ–¹å‘ã€‚
- en: This is my exploration of the Kernel dying problem and how I found a solution.
    ğŸš€
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æˆ‘å¯¹ Kernel æ­»äº¡é—®é¢˜çš„æ¢ç´¢ä»¥åŠå¦‚ä½•æ‰¾åˆ°è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹ã€‚ğŸš€
- en: Digging Deeper
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ·±å…¥æ¢ç´¢
- en: Given the only thing I knew about my issue was that the kernel died, I had to
    gather more context. From a [few other threads](https://stackoverflow.com/questions/39328658/how-to-debug-dying-jupyter-python3-kernel),
    it seemed clear that the reason for the kernel dying was the my model prediction
    required more RAM than my CPUâ€¦
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: é‰´äºæˆ‘å¯¹é—®é¢˜çš„äº†è§£ä»…é™äºå†…æ ¸å´©æºƒï¼Œæˆ‘å¿…é¡»æ”¶é›†æ›´å¤šèƒŒæ™¯ä¿¡æ¯ã€‚ä»[ä¸€äº›å…¶ä»–çº¿ç¨‹](https://stackoverflow.com/questions/39328658/how-to-debug-dying-jupyter-python3-kernel)æ¥çœ‹ï¼Œå†…æ ¸å´©æºƒçš„åŸå› ä¼¼ä¹æ˜¯æˆ‘çš„æ¨¡å‹é¢„æµ‹éœ€è¦æ¯”æˆ‘çš„
    CPU æ›´å¤šçš„ RAMâ€¦
