- en: 'PyrOSM: working with Open Street Map data'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: ÂéüÊñáÔºö[https://towardsdatascience.com/pyrosm-working-with-open-street-map-data-e3ac80922044?source=collection_archive---------4-----------------------#2023-10-21](https://towardsdatascience.com/pyrosm-working-with-open-street-map-data-e3ac80922044?source=collection_archive---------4-----------------------#2023-10-21)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Efficient geospatial manipulations for OSM map data
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://deabardhoshi.medium.com/?source=post_page-----e3ac80922044--------------------------------)[![Dea
    Bardhoshi](../Images/14ce0986fc2a4a192797a52ed9908d1e.png)](https://deabardhoshi.medium.com/?source=post_page-----e3ac80922044--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e3ac80922044--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e3ac80922044--------------------------------)
    [Dea Bardhoshi](https://deabardhoshi.medium.com/?source=post_page-----e3ac80922044--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ¬∑
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd61c58ba988e&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpyrosm-working-with-open-street-map-data-e3ac80922044&user=Dea+Bardhoshi&userId=d61c58ba988e&source=post_page-d61c58ba988e----e3ac80922044---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e3ac80922044--------------------------------)
    ¬∑4 min read¬∑Oct 21, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe3ac80922044&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpyrosm-working-with-open-street-map-data-e3ac80922044&user=Dea+Bardhoshi&userId=d61c58ba988e&source=-----e3ac80922044---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe3ac80922044&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpyrosm-working-with-open-street-map-data-e3ac80922044&source=-----e3ac80922044---------------------bookmark_footer-----------)![](../Images/8a3a66110df17612b904c2434650013f.png)'
  prefs: []
  type: TYPE_NORMAL
- en: Photo by [Tabea Schimpf](https://unsplash.com/@tabeaschimpf?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  prefs: []
  type: TYPE_NORMAL
- en: If you‚Äôve worked with OSM data before, you know it‚Äôs not the easiest to extract.
    OSM data can be huge, and finding performant solutions for what you want to analyze
    is often a challenge. PyrOSM is a package that makes the process of reading in
    and working with OSM data much more efficient. How? Well, PyrOSM is build on Cython
    (C Python) and it uses faster libraries for deserializing OSM data as well as
    smaller optimizations like numpy arrays which allows it to process data fast.
    Especially if you‚Äôve used OSMnx before (for very similar usecases), you know that
    large datasets take a very long time to load into memory, which is where PyrOSM
    can help you work with them. Let‚Äôs get into what this library can do!
  prefs: []
  type: TYPE_NORMAL
- en: üåé PBF Data
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let‚Äôs talk a bit about the specific file format that OSM data comes in. PBF
    stands for ‚ÄúProtocolbuffer Binary Format‚Äù and it is very efficient for working
    with OSM data is stored. OSM data is organized in ‚Äú**fileblocks**‚Äù, which are
    groups of data that can be independently encoded or decoded. Fileblocks contain
    **PrimitiveGroups**, which in turn include thousands of OSM entities, like nodes,
    ways and relations.
  prefs: []
  type: TYPE_NORMAL
- en: The data can be scaled according to the user‚Äôs desired level of granularity.
    For instance, the current OSM database‚Äôs resolution is around ~1 cm. In fact,
    if you wanted, you could download the entirety of Open Street Maps data into one
    file, known as Planet (around 1000 Gb of data)!
  prefs: []
  type: TYPE_NORMAL
- en: 'üë©‚Äçüíª PyrOSM Basics: reading in datasets'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'PyrOSM is a package that reads in Open Street Map‚Äôs PBF data based on two main
    data distributors: Geofabrik (world and country-level data) and BBBike (city-level
    data). The package allows the user to access many types of features:'
  prefs: []
  type: TYPE_NORMAL
- en: Buildings, POIs (points of interest), Land Use
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Street Networks
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Custom Filters
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: exporting as networks
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: and more!
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'There are 235 cities across the world currently supported by BBBike, and you
    can get access to the full list easily by calling the **‚Äúsources.cities.available‚Äù**
    method. Getting started is easy enough, you simply initialize an OSM reader object
    and load in the data you want:'
  prefs: []
  type: TYPE_NORMAL
- en: 'From this point, you would need to be using the OSM object to interact with
    the Berkeley data. Now let‚Äôs get the Berkeley street network for driving:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/080e775dbd2e52d1353ef015180ad933.png)'
  prefs: []
  type: TYPE_IMG
- en: Dataframe for Berkeley‚Äôs OSM street network
  prefs: []
  type: TYPE_NORMAL
- en: Printing out the actual street_network object shows it is stored in a GeoPandas
    GeoDataFrame with all the OSM attributes like length, highway, maxspeed etc.,
    which can be very handy for further analysis.
  prefs: []
  type: TYPE_NORMAL
- en: '**Side Note:** BBBikes (the source provider of this data) has many more data
    formats of different sizes, including Organic Maps OSM, Garmin OSM or SVG Mapnik
    depending on what your use case is.'
  prefs: []
  type: TYPE_NORMAL
- en: üîç Better Filtering
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The results of the data loading above include all of Berkeley‚Äôs data and in
    fact even data from the cities neighboring it, which is not ideal. What if you
    want a much smaller or more specific area? That‚Äôs where using a bounding box comes
    in. To make a bounding box you can either:'
  prefs: []
  type: TYPE_NORMAL
- en: Manually specify a list of 4 coordinates in the format of **[minx, miny, maxx,
    maxy]**
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: pass in Shapely geometries (e.g a LineString or Multipolygon)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To find bounding box coordinates, I typically use this [bbox finder](http://bboxfinder.com/#0.000000,0.000000,0.000000,0.000000)
    website that lets you make rectangles and then copy the coordinates. Here‚Äôs how
    to bound the area around UC Berkeley‚Äôs campus and get its walking network:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/94c7482901919addf2468d153ea4af40.png)'
  prefs: []
  type: TYPE_IMG
- en: Street network using a bounding box
  prefs: []
  type: TYPE_NORMAL
- en: üéØ Exporting and Working with Graphs
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Another good thing about PyrOSM is how it allows for network processing and
    connecting to other network analysis libraries. In addition to saving street networks
    as geodataframes, PyrOSM lets you extract nodes and edges by storing them in 2
    separate dataframes. Here‚Äôs the nodes one:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/818743f62ad37e355a502bc406ae2009.png)'
  prefs: []
  type: TYPE_IMG
- en: Dataframe of nodes from the street network
  prefs: []
  type: TYPE_NORMAL
- en: 'If you have these graph representations, it‚Äôs very easy to save them in various
    formats: OSMnx, igraph and Pandana and work with them there.'
  prefs: []
  type: TYPE_NORMAL
- en: üí≠ Parting Thoughts
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'This was a short summary of what pyrosm can do for you in your geospatial work!
    I touched on some methods that can be very useful, like downloading specific datasets
    from an area, or through bounding the area of interest and also how this relates
    to other libraries. I think the best things about pyrosm is exactly this: the
    fact it bridges the gap between huge OSM datasets and the engineering or analytics
    questions you can answer with it.'
  prefs: []
  type: TYPE_NORMAL
- en: Thanks for reading!
  prefs: []
  type: TYPE_NORMAL
