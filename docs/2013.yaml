- en: 5 Signs That Your Data is Modeled Poorly
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**5 个迹象显示你的数据建模不佳**'
- en: 原文：[https://towardsdatascience.com/5-signs-that-your-data-is-modeled-poorly-a646e8d33be0?source=collection_archive---------7-----------------------#2023-06-20](https://towardsdatascience.com/5-signs-that-your-data-is-modeled-poorly-a646e8d33be0?source=collection_archive---------7-----------------------#2023-06-20)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/5-signs-that-your-data-is-modeled-poorly-a646e8d33be0?source=collection_archive---------7-----------------------#2023-06-20](https://towardsdatascience.com/5-signs-that-your-data-is-modeled-poorly-a646e8d33be0?source=collection_archive---------7-----------------------#2023-06-20)
- en: Common Challenges In The Cloud era
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 云时代的常见挑战
- en: '[](https://medium.com/@mattgazzano?source=post_page-----a646e8d33be0--------------------------------)[![Matthew
    Gazzano](../Images/23f154b154d05847c2c13ea17ceb7a57.png)](https://medium.com/@mattgazzano?source=post_page-----a646e8d33be0--------------------------------)[](https://towardsdatascience.com/?source=post_page-----a646e8d33be0--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----a646e8d33be0--------------------------------)
    [Matthew Gazzano](https://medium.com/@mattgazzano?source=post_page-----a646e8d33be0--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@mattgazzano?source=post_page-----a646e8d33be0--------------------------------)[![Matthew
    Gazzano](../Images/23f154b154d05847c2c13ea17ceb7a57.png)](https://medium.com/@mattgazzano?source=post_page-----a646e8d33be0--------------------------------)[](https://towardsdatascience.com/?source=post_page-----a646e8d33be0--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----a646e8d33be0--------------------------------)
    [Matthew Gazzano](https://medium.com/@mattgazzano?source=post_page-----a646e8d33be0--------------------------------)'
- en: ·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F626000912ce9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-signs-that-your-data-is-modeled-poorly-a646e8d33be0&user=Matthew+Gazzano&userId=626000912ce9&source=post_page-626000912ce9----a646e8d33be0---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----a646e8d33be0--------------------------------)
    ·7 min read·Jun 20, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa646e8d33be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-signs-that-your-data-is-modeled-poorly-a646e8d33be0&user=Matthew+Gazzano&userId=626000912ce9&source=-----a646e8d33be0---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F626000912ce9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-signs-that-your-data-is-modeled-poorly-a646e8d33be0&user=Matthew+Gazzano&userId=626000912ce9&source=post_page-626000912ce9----a646e8d33be0---------------------post_header-----------)
    发表在 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----a646e8d33be0--------------------------------)
    · 7分钟阅读 · 2023年6月20日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fa646e8d33be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-signs-that-your-data-is-modeled-poorly-a646e8d33be0&user=Matthew+Gazzano&userId=626000912ce9&source=-----a646e8d33be0---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa646e8d33be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-signs-that-your-data-is-modeled-poorly-a646e8d33be0&source=-----a646e8d33be0---------------------bookmark_footer-----------)![](../Images/6ab63520d19e990128b66de3607dc34e.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fa646e8d33be0&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2F5-signs-that-your-data-is-modeled-poorly-a646e8d33be0&source=-----a646e8d33be0---------------------bookmark_footer-----------)![](../Images/6ab63520d19e990128b66de3607dc34e.png)'
- en: '[Photo](https://unsplash.com/photos/lRoX0shwjUQ) by [Jan Antonin Kolar](https://unsplash.com/@jankolar)
    on [Unsplash](https://unsplash.com/)'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[照片](https://unsplash.com/photos/lRoX0shwjUQ) 由 [Jan Antonin Kolar](https://unsplash.com/@jankolar)
    在 [Unsplash](https://unsplash.com/)'
- en: With the expansion of cloud technology and cheap storage costs in the past decade,
    many organizations have amassed significantly larger volumes of data than previously
    imaginable. The pay-as-you go model offered by many cloud data warehouse providers
    ([AWS](https://aws.amazon.com/), [GCP](https://cloud.google.com/gcp?utm_source=google&utm_medium=cpc&utm_campaign=na-US-all-en-dr-bkws-all-all-trial-e-dr-1605212&utm_content=text-ad-none-any-DEV_c-CRE_491349594127-ADGP_Desk+%7C+BKWS+-+EXA+%7C+Txt+_+Google+Cloud+Platform+Core-KWID_43700064423315751-aud-1436107373682%3Akwd-26415313501&utm_term=KW_google+cloud+platform-ST_google+cloud+platform&gclid=CjwKCAjw-b-kBhB-EiwA4fvKrCt5QBXsaaB2cBQvmRsEyXEsswdmkhHXOP3PQtEGbPxx07cD1S5cABoCFJcQAvD_BwE&gclsrc=aw.ds&hl=en),
    [Azure](https://azure.microsoft.com/en-us)) has decreased the need for up-front
    capital resources and consideration of digital infrastructure.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 随着过去十年云技术的扩展和廉价存储成本的降低，许多组织积累的数据量比以前想象的要大得多。许多云数据仓库提供商提供的按需付费模式（[AWS](https://aws.amazon.com/)，[GCP](https://cloud.google.com/gcp?utm_source=google&utm_medium=cpc&utm_campaign=na-US-all-en-dr-bkws-all-all-trial-e-dr-1605212&utm_content=text-ad-none-any-DEV_c-CRE_491349594127-ADGP_Desk+%7C+BKWS+-+EXA+%7C+Txt+_+Google+Cloud+Platform+Core-KWID_43700064423315751-aud-1436107373682%3Akwd-26415313501&utm_term=KW_google+cloud+platform-ST_google+cloud+platform&gclid=CjwKCAjw-b-kBhB-EiwA4fvKrCt5QBXsaaB2cBQvmRsEyXEsswdmkhHXOP3PQtEGbPxx07cD1S5cABoCFJcQAvD_BwE&gclsrc=aw.ds&hl=en)，[Azure](https://azure.microsoft.com/en-us))减少了前期资本资源的需求和数字基础设施的考虑。
- en: The good news is that this ultimately makes data science efforts more accessible
    for most organizations.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 好消息是，这最终使得数据科学工作对大多数组织来说更加可及。
- en: The bad news is that Data Lakes are turning into more like Data Swamps.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 坏消息是数据湖正变得越来越像数据沼泽。
- en: What is Data Modeling? And What Challenges Surround it?
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 什么是数据建模？它面临哪些挑战？
- en: It's often difficult for Data Engineers to communicate the value of a well-modeled
    ecosystem to upper management. This is because all that is visible to stakeholders
    are the BI tools and predictive models that get presented. However, poorly modeled
    data causes major setbacks to analytics teams from a data governance perspective.
    This inevitably slows down workflow, introduces repetitive tasks, decreases reporting
    accuracy, as well as many other negative side effects.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 对数据工程师来说，向高层管理人员传达一个良好建模生态系统的价值往往是困难的。这是因为利益相关者能看到的只是展示出的BI工具和预测模型。然而，建模不良的数据从数据治理的角度来看会给分析团队带来重大挫折。这不可避免地会拖慢工作流程，引入重复任务，降低报告准确性，以及产生许多其他负面副作用。
- en: 'Defining “Well-Modeled” data is a topic of its own. But you can think of it
    by the following concepts in your Data Warehouse:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 定义“良好建模”数据是一个独立的话题。但你可以通过以下概念在你的数据仓库中考虑它：
- en: A clear pattern exists on how to find data tables that relate to business entities.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存在一个清晰的模式来查找与业务实体相关的数据表。
- en: An intentional / known modeling technique is used, such as a dimensional model,
    entity relationship model, data vault, etc.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用了一个有意的/已知的建模技术，例如维度模型、实体关系模型、数据保险库等。
- en: Table and field naming conventions are consistent, well documented, and hold
    business value.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表格和字段命名约定是一致的，文档化良好，并且具有业务价值。
- en: 'It should also be noted that there is a holistic and multi-system approach
    to data modeling. It starts in your OLTP (Online Transaction Processing) system,
    which is where data gets initially recorded. Here are some examples:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 还应注意到，数据建模采用的是一种整体性和多系统的方法。它从你的OLTP（在线事务处理）系统开始，这是数据最初被记录的地方。以下是一些例子：
- en: CRM systems like [Salesforce](https://www.salesforce.com/)
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CRM系统如[Salesforce](https://www.salesforce.com/)
- en: Point-of-sale systems like [Stripe](https://stripe.com/)
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 销售点系统如[Stripe](https://stripe.com/)
- en: Ecommerce platforms like [Amazon](https://www.amazon.com/)
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电子商务平台如[亚马逊](https://www.amazon.com/)
- en: Ideally, your data should be normalized in [3rd normal form](https://www.geeksforgeeks.org/third-normal-form-3nf/)
    when collected through a source system. Then it should be ingested into an analytics
    environment, otherwise known as an OLAP (Online Analytical Processing) system
    where an analytical modeling technique is applied. In the context of this article,
    the OLAP system is synonymous with a cloud data warehouse. But OLAP systems can
    also include independently hosted tools like SQL Server, MySQL, or PostgreSQL.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，你的数据在通过源系统收集时应该被规范化到[第三范式](https://www.geeksforgeeks.org/third-normal-form-3nf/)。然后，它应该被摄取到分析环境中，也就是一个OLAP（在线分析处理）系统，在这里应用了分析建模技术。在本文的背景下，OLAP系统与云数据仓库同义。但OLAP系统也可以包括像SQL
    Server、MySQL或PostgreSQL这样的独立托管工具。
- en: While data analysts and data scientists only interact with the OLAP system,
    an organization’s data modeling strategy needs to factor in both OLTP and OLAP
    to be sustainable.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: Here are 5 key signs that illustrate your analytics environment is poorly modeled.
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 1.) Tribal Knowledge is Required to Understand Where to Find Data
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In order for a new analyst to be successful when hired, they need a clear roadmap
    as to what data is available in the Data Warehouse, where it is sourced, and what
    its business context is. However, teams with poorly modeled data often struggle
    to onboard new candidates, not understanding why it is taking new hires so long
    to answer basic business questions. Without the proper mentorship, analytics teams
    can experience high churn rates because new members are not given the tools they
    need to succeed.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: Data Analysts and Data Scientists should be focused on answering business problems
    and not wasting time to find where business entities live. The faster teams can
    become familiar with what data is available, the quicker that dashboards and predictive
    models can be completed. This ultimately boosts the team’s productivity.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: If there are only a handful of analysts who know how to answer basic business
    questions, that is a problem. Working in such a siloed approach isn't scalable
    and will only limit the number of problems that the team is able to solve.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/ba6eb54e39b719cb755fb9048b9fbe69.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
- en: '[Photo](https://unsplash.com/photos/IgUR1iX0mqM) by [Desola Lanre-Ologun](https://unsplash.com/@disruptxn)
    on [Unsplash](https://unsplash.com/)'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: 2.) Different Analysts are Producing Different Results For The Same Metrics
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If there is no single source of truth, it can be easy for different team members
    to calculate the same metric in different ways. For example, how is Revenue defined?
    And what tables are used to calculate this? There needs to be a clear path to
    define business logic, which all starts with an intentional data model.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: I’ve worked in environments where there were 3 different tables that have represented
    the same business entity, which all utilized different SQL logic to arrive at
    a similar, but not the same record output. Couple this scenario with a poorly
    managed reporting request queue, and you have two different analysts answering
    the same question with different results. This not only causes stakeholders to
    lose trust in the data, but also requires tedious and unneeded reconciling work
    across teams.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: 3.) Teams Need to Reuse Redundant Code Blocks for Business Logic
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: I’ve seen teams have a google sheet of SQL CASE statements which outline specific
    business metrics. These were long in nature & difficult to read through. While
    it attempts to offer consistency across teams, the problem with this is that it
    violates DRY (Don't Repeat Yourself) principles within the organization.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: For many teams with this type of issue, using a transformation tool such as
    DBT allows Analytics Engineers to define business logic in one place and then
    have analysts reference it in many places.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: Think about the following example— if you're an ecommerce company and there
    is a complex way to calculate page views (which is okay), why would you be distributing
    & duplicating that business logic to happen in your BI tool? Not only is this
    risky in case logic isn't copied and pasted in the exact same way every time,
    but it is a waste of compute, which is the largest expense from most cloud providers.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: To solve for this, consider mapping out common aggregations and business logic
    that needs to take place, run a transformation job daily (or as frequently as
    needed) and write it to a table. Then have your BI layer sit on top of that.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: 4.) Your Data Warehouse Performs Poorly
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As pointed out above, poorly modeled data introduces redundancy. But it also
    creates unnecessary complexity. Excess computing resources is a biproduct of this,
    and all cloud data warehouses have limits up to a certain pricing threshold. Once
    that limit is reached, executing new queries may become extremely slow and not
    even feasible in some cases.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: Any Data Engineer will tell you that just purchasing additional resources is
    not a sustainable solution to this problem.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: Long and complex queries not only take long to execute on their own, but will
    diminish the available resources in your environment. Consider an example where
    you need to run a query that involves 20 joins. There are very few scenarios where
    this is an ideal solution, as it illustrates that the data needed to answer a
    business problem is not stored in a format that is easily accessible. This many
    joins can be computationally expensive, especially when the related tables are
    large in volume or if the ON clause involves multiple columns. If you are implementing
    a dimensional model, your team might want to consider creating a new fact table
    in your database in these scenarios.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: Resources are measured in different ways depending on what cloud provider you’re
    using, but they all follow the same concept of using a dedicated number of virtual
    CPUs. For example, BigQuery uses the concept of [slots](https://cloud.google.com/bigquery/docs/slots),
    which effectively is the number of available computing resources used to execute
    a query. Organizations with on demand pricing receive 2,000 slots to be used at
    any given point in time. So, if one query is highly complex & takes up more than
    the available number of slots, other queries will sit in the queue before they
    can even be executed.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: 5.) You Often Have to Hard Code Values in SQL
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Hard coded values are often a tell-tale sign that there is required data missing
    in your Data Warehouse. In the context of a dimensional model, this usually means
    that a new dimension table needs to be created to source additional columns.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '[Zach Quinn](https://zachl-quinn.medium.com/) wrote an [article](https://medium.com/learning-sql/sql-users-reduce-your-case-statements-with-a-lookup-table-d09da47bf65)
    which outlines this concept really well, demonstrating how to eliminate long CASE
    statements with a lookup table. Putting this example in the context of a dimensional
    model — suppose your organization needs to do a lot of geospatial analysis. You
    have a *customer_dimension* table that gives the state abbreviation, but you want
    to display it as a full state name. You could write something like this:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '[扎克·奎因](https://zachl-quinn.medium.com/) 写了一篇 [文章](https://medium.com/learning-sql/sql-users-reduce-your-case-statements-with-a-lookup-table-d09da47bf65)，很好地阐述了这个概念，演示了如何通过查找表消除冗长的CASE语句。将这个示例放在维度模型的背景下——假设你的组织需要进行大量的地理空间分析。你有一个*customer_dimension*表，它提供了州的缩写，但你想将其显示为完整的州名。你可以写这样的代码：'
- en: '[PRE0]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'But this type of CASE statement isn''t sustainable. If we want to improve upon
    this solution in greater detail, we need to join a *zip_code_dimension* tableto
    the *customer_dimension* table. You’ll see below that a *zip_code_dimension* will
    give us even greater granularity in an analysis. The table might look something
    like this:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 但这种CASE语句并不可持续。如果我们想更详细地改进这个解决方案，我们需要将*zip_code_dimension*表连接到*customer_dimension*表。你会看到下面的*zip_code_dimension*表将为我们的分析提供更大的粒度。这个表可能看起来像这样：
- en: '![](../Images/80b22cf424ec049028ea0f961df9694a.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/80b22cf424ec049028ea0f961df9694a.png)'
- en: Photo by Author
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 作者拍摄
- en: 'So with that new table, imagine being able to run *this* query instead:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 所以有了那个新表，想象一下能够运行*这个*查询：
- en: '[PRE1]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Not only is this a more elegant and readable query to produce the full state
    name, but it lets us answer more questions. With the *zip_code_dimension*, we
    can now append the latitude and longitude of that zip code to create map visualizations
    in a cleaner format. Additionally, there are a handful of other dimensional fields
    that could have taken hundreds of lines to hard code in if we wanted to include
    them in the output (country, timezone etc).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 这不仅是一种更优雅和可读的查询方式来生成完整的州名，而且让我们能够回答更多的问题。通过*zip_code_dimension*，我们现在可以将该邮政编码的纬度和经度附加到地图可视化中，以更清晰的格式呈现。此外，还有一些其他维度字段，如果我们想在输出中包含它们（如国家、时区等），则需要数百行硬编码。
- en: Conclusion
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: If you found any of the above points to be relevant in your environment, it
    may be time to holistically look at your data pipelines and understand where analytics
    teams need to fill in the gap. To be able to model your teams data properly, you
    need to be able to conceptualize relevant business entities and organize them
    in a way that is conducive to common questions asked within your organization.
    There is no one size fits all approach, but it needs to be clear to all team members
    and created in a consistent way.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你发现上述任何要点与你的环境相关，那么现在可能是时候全面审视你的数据管道，并了解分析团队在哪些方面需要填补空白。为了能够正确建模你的团队数据，你需要能够概念化相关的业务实体，并将其组织成有利于组织内常见问题的方式。没有一种通用的方法，但它需要对所有团队成员明确，并以一致的方式创建。
