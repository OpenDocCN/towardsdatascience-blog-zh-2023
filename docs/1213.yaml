- en: How to connect Streamlit to Snowflake
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/how-to-connect-streamlit-to-snowflake-b93256d80a40?source=collection_archive---------5-----------------------#2023-04-06](https://towardsdatascience.com/how-to-connect-streamlit-to-snowflake-b93256d80a40?source=collection_archive---------5-----------------------#2023-04-06)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[HANDS ON TUTORIALS](https://towardsdatascience.com/tagged/hands-on-tutorials)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A step-by-step practical tutorial
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://data-professor.medium.com/?source=post_page-----b93256d80a40--------------------------------)[![Chanin
    Nantasenamat](../Images/db835baa5f00e4b006ebd43724367136.png)](https://data-professor.medium.com/?source=post_page-----b93256d80a40--------------------------------)[](https://towardsdatascience.com/?source=post_page-----b93256d80a40--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----b93256d80a40--------------------------------)
    [Chanin Nantasenamat](https://data-professor.medium.com/?source=post_page-----b93256d80a40--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff94b47c3cfca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-connect-streamlit-to-snowflake-b93256d80a40&user=Chanin+Nantasenamat&userId=f94b47c3cfca&source=post_page-f94b47c3cfca----b93256d80a40---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----b93256d80a40--------------------------------)
    ·10 min read·Apr 6, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fb93256d80a40&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-connect-streamlit-to-snowflake-b93256d80a40&user=Chanin+Nantasenamat&userId=f94b47c3cfca&source=-----b93256d80a40---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb93256d80a40&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-connect-streamlit-to-snowflake-b93256d80a40&source=-----b93256d80a40---------------------bookmark_footer-----------)![](../Images/6978541f4e294838bdf609b39dc53a0a.png)'
  prefs: []
  type: TYPE_NORMAL
- en: Image generated by Chanin Nantasenamat on [BlueWillow](https://www.bluewillow.ai/).
  prefs: []
  type: TYPE_NORMAL
- en: 1\. Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Streamlit is a low-code web framework for the Python programming language. It
    allows you to build an interactive web application with minimal coding.
  prefs: []
  type: TYPE_NORMAL
- en: In this tutorial, I’ll show you how to use Streamlit to create a simple web
    app that connects to a cloud-based Snowflake database, loads data from a database
    table, and write out the data.
  prefs: []
  type: TYPE_NORMAL
- en: Whether you’re a data analyst, software developer, or someone interested in
    building web applications with Python, this tutorial will guide you step-by-step
    on how to get started with Streamlit and Snowflake.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s take a preview of the Streamlit app that we’re building:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d1fbbe9e2240072ea65a67078bcef703.png)'
  prefs: []
  type: TYPE_IMG
- en: 2\. Creating a Snowflake database
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this tutorial, we’re going to create a Snowflake database that will be connected
    to in the Streamlit app we’re building.
  prefs: []
  type: TYPE_NORMAL
- en: 1\. Sign up for a Snowflake account at [https://signup.snowflake.com](https://signup.snowflake.com)
  prefs: []
  type: TYPE_NORMAL
- en: 2\. Check your *“Welcome to Snowflake!”* email for the account URL in order
    to access your Snowflake account. Go ahead and click on the **LOG IN TO SNOWFLAKE**
    button or copy/paste the account URL `https://<your-unique-account-id>.snowflakecomputing.com`)
    into an internet browser.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/54c50d21cba56e4e780745c96ecda66b.png)'
  prefs: []
  type: TYPE_IMG
- en: 3\. Go ahead and enter your Snowflake credentials.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5f32be364585d3778bd803d6f9bc9d50.png)'
  prefs: []
  type: TYPE_IMG
- en: 4\. Once logged in, you’ll see the Worksheets panel by default.
  prefs: []
  type: TYPE_NORMAL
- en: '5\. Create a new SQL Worksheet by following the following instructions:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1a41f8272f9df6d65d18301abef4ac25.png)'
  prefs: []
  type: TYPE_IMG
- en: '6\. Enter the following SQL query into the query box (see screenshot under
    the code box below):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/34c34d827873c811f09c0d093eebb475.png)'
  prefs: []
  type: TYPE_IMG
- en: 7\. The PETS database is now created. Next, click on the top-left link to return
    to the main page.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/2330fe9f2ba4871dc00336b561b39869.png)'
  prefs: []
  type: TYPE_IMG
- en: 8\. From the main page, click on the “Data” tab to see our databases.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/df7add397266db2543c3c994bb2efa32.png)'
  prefs: []
  type: TYPE_IMG
- en: 9\. Here, we can see our newly created PETS database.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/25e5eabfa274b44692a6929446b7d2bd.png)'
  prefs: []
  type: TYPE_IMG
- en: Now that our database is ready, let’s proceed to setting up our coding environment.
  prefs: []
  type: TYPE_NORMAL
- en: 3\. Setting up a coding environment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Creating a conda environment
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Firstly, let’s create a conda environment called `snowpark` by entering the
    following into a terminal (also referred to as the *command line*) window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: In a few moments, you will see conda asking you to confirm that it will install
    the following new packages. To confirm enter `Y`
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/ded689f80d5c80e57531f5b4aea8d8ce.png)'
  prefs: []
  type: TYPE_IMG
- en: Give it a few moments for the various Python libraries to be installed.
  prefs: []
  type: TYPE_NORMAL
- en: Once everything is all setup and ready to go, there will be a message at the
    bottom with instructions on how to activate and deactivate the environment.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/8969b209e593b3c08627e2013df12121.png)'
  prefs: []
  type: TYPE_IMG
- en: Activating the conda environment
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'As instructed above, we can activate the conda environment called `snowpark`
    by entering the following into a terminal window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Once the conda environment has been activated, you’ll notice the name of the
    conda environment will be shown in parenthesis to the left of the terminal prompt.
  prefs: []
  type: TYPE_NORMAL
- en: Particularly, in the first screenshot below, we’re using the base environment
    (note the `(base)` to the left of the username) whereas the second screenshot
    shows the activated `snowpark` conda environment (note `(snowpark)`to the left
    of the username).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/41d0093e0a79061b3c2074078917d4d9.png)![](../Images/33d2a4963c4325ab29296cbfc20fe529.png)'
  prefs: []
  type: TYPE_IMG
- en: Next, we’ll want to install some prerequisite Python libraries so that we can
    build a Streamlit app that can connect with a Snowflake database.
  prefs: []
  type: TYPE_NORMAL
- en: 'To a terminal prompt, enter the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'This will install the above 2 Python libraries:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4494a2f1f2c6aa08fdfb69d82fed67b1.png)'
  prefs: []
  type: TYPE_IMG
- en: Congratulations, your coding environment is now ready for us to play with!
  prefs: []
  type: TYPE_NORMAL
- en: Deactivating the conda environment
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Finally, when we’re finished with our coding session, we can exit the conda
    environment by entering the following into a terminal window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: As soon as the conda environment is deactivated, you’ll notice that we will
    exit to the `(base)` environment.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/43bd2c60b52dda02f5bcb4e7de3fa955.png)'
  prefs: []
  type: TYPE_IMG
- en: 4\. Setting up directories and files
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Navigating directories
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Firstly, you’ll want to figure out where you are in terms of the current directory
    path.
  prefs: []
  type: TYPE_NORMAL
- en: To do this, enter `pwd` into the terminal prompt.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/c939e4dc35bbf3310cb34eb73bcf2eba.png)'
  prefs: []
  type: TYPE_IMG
- en: You’ll see that on my computer, I’m at `/Users/chanin`. Let’s say I want to
    navigate to my working directory at `/Users/chanin/Documents/sandbox` then I’ll
    want to change directory via the `cd` command followed by the 2 sub-folders `Documents/sandbox`.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/8cc341240c9dbe414a06d092585d7614.png)'
  prefs: []
  type: TYPE_IMG
- en: Creating directories
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Go ahead and create the `snowflake-first-app` directory via the `mkdir` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Next, let’s change into the newly created directory:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Creating files
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Finally, let’s create 2 empty files for our Streamlit app that we will cover
    in more depth in the next section:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: Listing directory content
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To see the content of the current directory that we’re in, we can use the `ls`
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e92857b2a7b2ac8586fc52f560629ec8.png)'
  prefs: []
  type: TYPE_IMG
- en: Wait a minute, why are we seeing only 1 file when we had already created 2 files.
    The missing file is the `secrets.toml` file that resides in a hidden `.streamlit`
    directory.
  prefs: []
  type: TYPE_NORMAL
- en: 'To see the hidden directory, we’re going to need to add an additional parameter
    `-a` as shown below:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/3bfc32dc234a2d72c377fd54d6674836.png)'
  prefs: []
  type: TYPE_IMG
- en: Now we can see the hidden directory!
  prefs: []
  type: TYPE_NORMAL
- en: 'Here, we can notice that the contents are listed horizontally, what if we want
    to list the contents vertically? Then we are going to need an additional parameter
    `-l` as shown below:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/6e7d5ae129fe8c8272b8f0dab5a429d1.png)'
  prefs: []
  type: TYPE_IMG
- en: Not only can we see the content list as a vertical list, we can also see other
    information about the contents such as it’s read/write permission, file size,
    file creation/modification date, etc.
  prefs: []
  type: TYPE_NORMAL
- en: 5\. Building the Streamlit app
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now that the conda environment is ready, let’s proceed to building the app.
  prefs: []
  type: TYPE_NORMAL
- en: 'Firstly, let’s populate your `streamlit_app.py` file with the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: To do this in the terminal, great going to use the Vim text editor, which can
    be called via the `vi` command followed by the file name.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: This will launch your Vim text editor for editing the file content of streamlit_app.py
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a36a309485c31c013d5e24089f2f7bfe.png)'
  prefs: []
  type: TYPE_IMG
- en: Then, hit on the `i` key and you should see at the bottom of the terminal window
    that the editor is in **INSERT** mode.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/bfbc97ed10c4c259bc3525bbfcb7df97.png)'
  prefs: []
  type: TYPE_IMG
- en: Next, paste the copied contents into the file by pressing **Ctrl+V** in Windows
    or **CMD+V** in Mac OSX.
  prefs: []
  type: TYPE_NORMAL
- en: 'Afterwards, hit on the **Esc** button and enter the following followed by hitting
    the **Enter** key:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: which literally means to write the contents to file and quit the text editor.
  prefs: []
  type: TYPE_NORMAL
- en: 'To ensure that the content has been pasted in properly, let’s view the file
    content by using the `cat` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/d303174bde0ffc806a17996afe74fbd3.png)'
  prefs: []
  type: TYPE_IMG
- en: Now that the streamlit_app.py file is ready, let’s proceed to our Snowflake
    access credential.
  prefs: []
  type: TYPE_NORMAL
- en: 6\. Adding access credentials via secrets management
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Remember the `.streamlit/secrets.toml` file that we created earlier, we’re
    now going to populate that file with the following content:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/5d59f746284aba42835cf9c26a44ac69.png)'
  prefs: []
  type: TYPE_IMG
- en: Save and exit (refer to earlier for instructions on how) the editor.
  prefs: []
  type: TYPE_NORMAL
- en: Congratulations, you’re app is now complete and is now ready to be launched!
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 7\. Launching the Streamlit app
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now that our `streamlit_app.py` and `.streamlit/secrets.toml` files are ready,
    let’s head back to the terminal and let’s launch the Streamlit app.
  prefs: []
  type: TYPE_NORMAL
- en: 'Go ahead and enter the following to the terminal window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: In a few moments, you’ll notice the following messages in the terminal window
    that provides instructions on accessing the Streamlit app.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1a041beab6dfae22cdfb9c50ea2db908.png)'
  prefs: []
  type: TYPE_IMG
- en: At the same time, you should be able to see a new internet browser launching
    with the Streamlit app that is located locally at `http://localhost:8503`
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/716414a61f49e4dbd8d4bd0aec74e8df.png)'
  prefs: []
  type: TYPE_IMG
- en: 8\. Line-by-line code explanation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: At a conceptual level, the Streamlit Python library was used to connect to a
    Snowflake database, loads data from a database table and displays the data in
    the app.
  prefs: []
  type: TYPE_NORMAL
- en: 1\. Import required Python libraries (namely `streamlit` and `snowpark`).
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 2\. Sets the title of the Streamlit app to `"❄️ How to connect Streamlit to
    a Snowflake database"`
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: 3\. Defines a custom function to create a Snowflake session and caches the session
    using Streamlit’s caching mechanism.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 4\. Loads data from a table in the Snowflake database using a function that
    caches the result.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: 5\. Displays the loaded data in a Streamlit app, inside a collapsible expander.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: 6\. Writes out the loaded data via `st.write` by iterating over the rows in
    the data table.
  prefs: []
  type: TYPE_NORMAL
- en: In conjunction with `st.write`, f-string is used to combine static text with
    dynamic values from the first column (`row[0]`) and second column (`row[1]`) of
    each row from the data table.
  prefs: []
  type: TYPE_NORMAL
- en: Emojis are displayed with the help of colons before and after the `row[1]` value.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: 9\. Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In summary, this tutorial has shown you how to create a web app using Streamlit
    that connects to a Snowflake database. This represents an essential starter template
    that you can extend to build even more complex data-driven web apps.
  prefs: []
  type: TYPE_NORMAL
- en: If you have any questions, please leave them in the comments below or contact
    me on Twitter at [@thedataprof](https://twitter.com/thedataprof) or on [LinkedIn](https://www.linkedin.com/in/chanin-nantasenamat/).
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://data-professor.medium.com/membership?source=post_page-----b93256d80a40--------------------------------)
    [## Join Medium with my referral link - Chanin Nantasenamat'
  prefs: []
  type: TYPE_NORMAL
- en: If you've found this article helpful, become a Medium member to support me as
    a writer. It costs $5 per month and gives…
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: data-professor.medium.com](https://data-professor.medium.com/membership?source=post_page-----b93256d80a40--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: Read these Next …
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[](/streamlit-quests-getting-started-with-streamlit-42fa6f11c2a8?source=post_page-----b93256d80a40--------------------------------)
    [## Streamlit Quests: Getting Started with Streamlit'
  prefs: []
  type: TYPE_NORMAL
- en: The guided path for learning Streamlit
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/streamlit-quests-getting-started-with-streamlit-42fa6f11c2a8?source=post_page-----b93256d80a40--------------------------------)
    [](/how-to-master-scikit-learn-for-data-science-c29214ec25b0?source=post_page-----b93256d80a40--------------------------------)
    [## How to Master Scikit-learn for Data Science
  prefs: []
  type: TYPE_NORMAL
- en: Here’s the Essential Scikit-learn you Need for Data Science
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/how-to-master-scikit-learn-for-data-science-c29214ec25b0?source=post_page-----b93256d80a40--------------------------------)
    [](/how-to-master-python-for-data-science-1fb8353718bf?source=post_page-----b93256d80a40--------------------------------)
    [## How to Master Python for Data Science
  prefs: []
  type: TYPE_NORMAL
- en: Here’s the Essential Python you Need for Data Science
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/how-to-master-python-for-data-science-1fb8353718bf?source=post_page-----b93256d80a40--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: Watch this Next …
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Streamlit YouTube playlist](https://www.youtube.com/watch?v=ZZ4B0QUHuNc&list=PLtqF5YXg7GLmCvTswG32NqQypOuYkPRUE)
    — A growing collection of 52 Streamlit tutorial videos that I’ve created on my
    YouTube channel [*Data Professor*](https://www.youtube.com/@DataProfessor).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
