["```py\ntime susceptible infectious removed city\n0 2018-01-01 8639 8639 0 city0\n1 2018-01-02 3857 12338 1081 city0\n2 2018-01-03 1458 13414 2405 city0\n3 2018-01-04 545 12983 3749 city0\n4 2018-01-05 214 12046 5017 city0\n```", "```py\n# load data fron local path \nloader = CSVLoader(file_path=LOCAL_PATH)\ndata = loader.load()\n\n# Create embedding\nembeddings = OpenAIEmbeddings()\nvectorstore = Chroma.from_documents(data, embeddings)\n\n# Create retriever \nretriever=vectorstore.as_retriever(search_kwargs={\"k\": 20})\n```", "```py\nllm=ChatOpenAI(model_name=\"gpt-4\",temperature=0)\n\n# Define the system message template\nsystem_template = \"\"\"The provided {context} is a tabular dataset containing Suspectible, infectious and removed population during 90 days in 10 cities.\nThe dataset includes the following columns:\n'time': time the population was meseaured,\n'city': city in which the popoluation was measured,\n\"susceptible\": the susceptible population of the disease, \n\"infectious\": the infectious population of the disease, \n\"removed\": the removed popolation of the disease. \n----------------\n{context}\"\"\"\n\n# Create the chat prompt templates\nmessages = [\n    SystemMessagePromptTemplate.from_template(system_template),\n    HumanMessagePromptTemplate.from_template(\"{question}\")\n]\nqa_prompt = ChatPromptTemplate.from_messages(messages)\nmemory = ConversationBufferMemory(memory_key=\"chat_history\", return_messages=True)\nqa = ConversationalRetrievalChain.from_llm(llm=llm, retriever=vectorstore.as_retriever(), return_source_documents=False,combine_docs_chain_kwargs={\"prompt\": qa_prompt},memory=memory,verbose=True)\n```", "```py\n[Document(page_content=': 31\\ntime: 2018-02-01\\nsusceptible: 0\\ninfectious: 1729\\nremoved: 35608\\ncity: city3', metadata={'source': 'sir.csv', 'row': 301}),\n Document(page_content=': 1\\ntime: 2018-01-02\\nsusceptible: 3109\\ninfectious: 9118\\nremoved: 804\\ncity: city8', metadata={'source': 'sir.csv', 'row': 721}),\n Document(page_content=': 15\\ntime: 2018-01-16\\nsusceptible: 1\\ninfectious: 2035\\nremoved: 6507\\ncity: city7', metadata={'source': 'sir.csv', 'row': 645}),\n Document(page_content=': 1\\ntime: 2018-01-02\\nsusceptible: 3481\\ninfectious: 10873\\nremoved: 954\\ncity: city5', metadata={'source': 'sir.csv', 'row': 451}),\n Document(page_content=': 23\\ntime: 2018-01-24\\nsusceptible: 0\\ninfectious: 2828\\nremoved: 24231\\ncity: city9', metadata={'source': 'sir.csv', 'row': 833}),\n Document(page_content=': 1\\ntime: 2018-01-02\\nsusceptible: 8081\\ninfectious: 25424\\nremoved: 2231\\ncity: city6', metadata={'source': 'sir.csv', 'row': 541}),\n Document(page_content=': 3\\ntime: 2018-01-04\\nsusceptible: 511\\ninfectious: 9733\\nremoved: 2787\\ncity: city8', metadata={'source': 'sir.csv', 'row': 723}),\n Document(page_content=': 24\\ntime: 2018-01-25\\nsusceptible: 0\\ninfectious: 3510\\nremoved: 33826\\ncity: city3', metadata={'source': 'sir.csv', 'row': 294}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 1413\\nremoved: 35924\\ncity: city3', metadata={'source': 'sir.csv', 'row': 303}),\n Document(page_content=': 25\\ntime: 2018-01-26\\nsusceptible: 0\\ninfectious: 3173\\nremoved: 34164\\ncity: city3', metadata={'source': 'sir.csv', 'row': 295}),\n Document(page_content=': 1\\ntime: 2018-01-02\\nsusceptible: 3857\\ninfectious: 12338\\nremoved: 1081\\ncity: city0', metadata={'source': 'sir.csv', 'row': 1}),\n Document(page_content=': 23\\ntime: 2018-01-24\\nsusceptible: 0\\ninfectious: 1365\\nremoved: 11666\\ncity: city8', metadata={'source': 'sir.csv', 'row': 743}),\n Document(page_content=': 16\\ntime: 2018-01-17\\nsusceptible: 0\\ninfectious: 2770\\nremoved: 10260\\ncity: city8', metadata={'source': 'sir.csv', 'row': 736}),\n Document(page_content=': 3\\ntime: 2018-01-04\\nsusceptible: 487\\ninfectious: 6280\\nremoved: 1775\\ncity: city7', metadata={'source': 'sir.csv', 'row': 633}),\n Document(page_content=': 14\\ntime: 2018-01-15\\nsusceptible: 0\\ninfectious: 3391\\nremoved: 9639\\ncity: city8', metadata={'source': 'sir.csv', 'row': 734}),\n Document(page_content=': 20\\ntime: 2018-01-21\\nsusceptible: 0\\ninfectious: 1849\\nremoved: 11182\\ncity: city8', metadata={'source': 'sir.csv', 'row': 740}),\n Document(page_content=': 28\\ntime: 2018-01-29\\nsusceptible: 0\\ninfectious: 1705\\nremoved: 25353\\ncity: city9', metadata={'source': 'sir.csv', 'row': 838}),\n Document(page_content=': 23\\ntime: 2018-01-24\\nsusceptible: 0\\ninfectious: 3884\\nremoved: 33453\\ncity: city3', metadata={'source': 'sir.csv', 'row': 293}),\n Document(page_content=': 16\\ntime: 2018-01-17\\nsusceptible: 1\\ninfectious: 1839\\nremoved: 6703\\ncity: city7', metadata={'source': 'sir.csv', 'row': 646}),\n Document(page_content=': 15\\ntime: 2018-01-16\\nsusceptible: 1\\ninfectious: 6350\\nremoved: 20708\\ncity: city9', metadata={'source': 'sir.csv', 'row': 825})]\n```", "```py\nclass MetaDataCSVLoader(BaseLoader):\n    \"\"\"Loads a CSV file into a list of documents.\n\n    Each document represents one row of the CSV file. Every row is converted into a\n    key/value pair and outputted to a new line in the document's page_content.\n\n    The source for each document loaded from csv is set to the value of the\n    `file_path` argument for all doucments by default.\n    You can override this by setting the `source_column` argument to the\n    name of a column in the CSV file.\n    The source of each document will then be set to the value of the column\n    with the name specified in `source_column`.\n\n    Output Example:\n        .. code-block:: txt\n\n            column1: value1\n            column2: value2\n            column3: value3\n    \"\"\"\n\n    def __init__(\n        self,\n        file_path: str,\n        source_column: Optional[str] = None,\n        metadata_columns: Optional[List[str]] = None,   \n        content_columns: Optional[List[str]] =None ,  \n        csv_args: Optional[Dict] = None,\n        encoding: Optional[str] = None,\n    ):\n        #  omitted (save as original code)\n        self.metadata_columns = metadata_columns        # < ADDED\n\n    def load(self) -> List[Document]:\n        \"\"\"Load data into document objects.\"\"\"\n\n        docs = []\n        with open(self.file_path, newline=\"\", encoding=self.encoding) as csvfile:\n           #  omitted (save as original code)\n                # ADDED CODE \n                if self.metadata_columns:\n                    for k, v in row.items():\n                        if k in self.metadata_columns:\n                            metadata[k] = v\n                # END OF ADDED CODE\n                doc = Document(page_content=content, metadata=metadata)\n                docs.append(doc)\n        return docs\n```", "```py\n# Load data and set embeddings \nloader = MetaDataCSVLoader(file_path=\"sir.csv\",metadata_columns=['time','city']) #<= modified \ndata = loader.load()\n```", "```py\nllm=ChatOpenAI(model_name=\"gpt-4\",temperature=0)\nmetadata_field_info=[\n     AttributeInfo(\n        name=\"time\",\n        description=\"time the population was meseaured\", \n        type=\"datetime\", \n    ),\n    AttributeInfo(\n        name=\"city\",\n        description=\"city in which the popoluation was measured\", \n        type=\"string\", \n    ),\n]\ndocument_content_description = \"Suspectible, infectious and removed population during 90 days in 10 cities \"\nretriever = SelfQueryRetriever.from_llm(\n    llm, vectorstore, document_content_description, metadata_field_info, search_kwargs={\"k\": 20},verbose=True\n)\n```", "```py\n[Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 1413\\nremoved: 35924\\ncity: city3', metadata={'source': 'sir.csv', 'row': 303, 'time': '2018-02-03', 'city': 'city3'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 822\\nremoved: 20895\\ncity: city4', metadata={'source': 'sir.csv', 'row': 393, 'time': '2018-02-03', 'city': 'city4'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 581\\nremoved: 14728\\ncity: city5', metadata={'source': 'sir.csv', 'row': 483, 'time': '2018-02-03', 'city': 'city5'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 1355\\nremoved: 34382\\ncity: city6', metadata={'source': 'sir.csv', 'row': 573, 'time': '2018-02-03', 'city': 'city6'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 496\\nremoved: 12535\\ncity: city8', metadata={'source': 'sir.csv', 'row': 753, 'time': '2018-02-03', 'city': 'city8'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 1028\\nremoved: 26030\\ncity: city9', metadata={'source': 'sir.csv', 'row': 843, 'time': '2018-02-03', 'city': 'city9'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 330\\nremoved: 8213\\ncity: city7', metadata={'source': 'sir.csv', 'row': 663, 'time': '2018-02-03', 'city': 'city7'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 1320\\nremoved: 33505\\ncity: city2', metadata={'source': 'sir.csv', 'row': 213, 'time': '2018-02-03', 'city': 'city2'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 776\\nremoved: 19753\\ncity: city1', metadata={'source': 'sir.csv', 'row': 123, 'time': '2018-02-03', 'city': 'city1'}),\n Document(page_content=': 33\\ntime: 2018-02-03\\nsusceptible: 0\\ninfectious: 654\\nremoved: 16623\\ncity: city0', metadata={'source': 'sir.csv', 'row': 33, 'time': '2018-02-03', 'city': 'city0'})]\n```"]