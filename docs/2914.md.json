["```py\nimport openai\n\nrecipe = 'Fish and chips'\nquery = f\"\"\"What is the recipe for {recipe}? \nReturn the ingredients list and steps separately.\"\"\"\n\nresponse = openai.ChatCompletion.create(\n    model=\"gpt-3.5-turbo-0613\",\n    messages=[{\"role\": \"user\", \"content\": query}])\n\nresponse_message = response[\"choices\"][0][\"message\"]\nprint(response_message['content'])\n```", "```py\nIngredients for fish and chips:\n- 1 pound white fish fillets (such as cod or haddock)\n- 1 cup all-purpose flour\n- 1 teaspoon baking powder\n- 1 teaspoon salt\n- 1/2 teaspoon black pepper\n- 1 cup cold beer\n- Vegetable oil, for frying\n- 4 large russet potatoes\n- Salt, to taste\n\nSteps to make fish and chips:\n\n1\\. Preheat the oven to 200째C (400째F).\n2\\. Peel the potatoes and cut them into thick, uniform strips. Rinse the potato strips in cold water to remove excess starch. Pat them dry using a clean kitchen towel.\n3\\. In a large pot or deep fryer, heat vegetable oil to 175째C (350째F). Ensure there is enough oil to completely submerge the potatoes and fish.\n4\\. In a mixing bowl, combine the flour, baking powder, salt, and black pepper. Whisk in the cold beer gradually until a smooth batter forms. Set the batter aside.\n5\\. Take the dried potato strips and fry them in batches for about 5-6 minutes or until golden brown. Remove the fries using a slotted spoon and place them on a paper towel-lined dish to drain excess oil. Keep them warm in the preheated oven.\n6\\. Dip each fish fillet into the prepared batter, ensuring it is well coated. Let any excess batter drip off before carefully placing the fillet into the hot oil.\n7\\. Fry the fish fillets for 4-5 minutes on each side or until they turn golden brown and become crispy. Remove them from the oil using a slotted spoon and place them on a paper towel-lined dish to drain excess oil.\n8\\. Season the fish and chips with salt while they are still hot.\n9\\. Serve the fish and chips hot with tartar sauce, malt vinegar, or ketchup as desired.\n\nEnjoy your homemade fish and chips!\n```", "```py\nfunctions = [\n    {\n        \"name\": \"return_recipe\",\n        \"description\": \"Return the recipe asked\",\n        \"parameters\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"ingredients\": {\n                    \"type\": \"string\",\n                    \"description\": \"The ingredients list.\"\n                },\n                \"steps\": {\n                    \"type\": \"string\",\n                    \"description\": \"The recipe steps.\"\n                },\n            },\n            },\n            \"required\": [\"ingredients\",\"steps\"],\n        }\n]\n```", "```py\nimport openai\n\nrecipe = 'Fish and chips'\nquery = f\"What is the recipe for {recipe}? Return the ingredients list and steps separately.\"\n\nresponse = openai.ChatCompletion.create(\n    model=\"gpt-3.5-turbo-0613\",\n    messages=[{\"role\": \"user\", \"content\": query}],\n    functions=functions,\n    function_call={'name':'return_recipe'}\n)\nresponse_message = response[\"choices\"][0][\"message\"]\n\nprint(response_message)\nprint(response_message['function_call']['arguments'])\n```", "```py\nfunction_call={'name':'return_recipe'}\n```", "```py\n{\n  \"role\": \"assistant\",\n  \"content\": null,\n  \"function_call\": {\n    \"name\": \"return_recipe\",\n    \"arguments\": \"{\\n  \\\"ingredients\\\": \\\"For the fish:\\\\n- 1 lb white fish fillets\\\\n- 1 cup all-purpose flour\\\\n- 1 tsp baking powder\\\\n- 1 tsp salt\\\\n- 1/2 tsp black pepper\\\\n- 1 cup cold water\\\\n- Vegetable oil, for frying\\\\nFor the chips:\\\\n- 4 large potatoes\\\\n- Vegetable oil, for frying\\\\n- Salt, to taste\\\",\\n  \\\"steps\\\": \\\"1\\. Start by preparing the fish. In a shallow dish, combine the flour, baking powder, salt, and black pepper.\\\\n2\\. Gradually whisk in the cold water until the batter is smooth.\\\\n3\\. Heat vegetable oil in a large frying pan or deep fryer.\\\\n4\\. Dip the fish fillets into the batter, coating them evenly.\\\\n5\\. Gently place the coated fillets into the hot oil and fry for 4-5 minutes on each side, or until golden brown and crispy.\\\\n6\\. Remove the fried fish from the oil and place them on a paper towel-lined plate to drain any excess oil.\\\\n7\\. For the chips, peel the potatoes and cut them into thick chips.\\\\n8\\. Heat vegetable oil in a deep fryer or large pan.\\\\n9\\. Fry the chips in batches until golden and crisp.\\\\n10\\. Remove the chips from the oil and place them on a paper towel-lined plate to drain any excess oil.\\\\n11\\. Season the chips with salt.\\\\n12\\. Serve the fish and chips together, and enjoy!\\\"\\n}\"\n  }\n}\n```", "```py\n{\n  \"ingredients\": \"For the fish:\\n- 1 lb white fish fillets\\n- 1 cup all-purpose flour\\n- 1 tsp baking powder\\n- 1 tsp salt\\n- 1/2 tsp black pepper\\n- 1 cup cold water\\n- Vegetable oil, for frying\\nFor the chips:\\n- 4 large potatoes\\n- Vegetable oil, for frying\\n- Salt, to taste\",\n  \"steps\": \"1\\. Start by preparing the fish. In a shallow dish, combine the flour, baking powder, salt, and black pepper.\\n2\\. Gradually whisk in the cold water until the batter is smooth.\\n3\\. Heat vegetable oil in a large frying pan or deep fryer.\\n4\\. Dip the fish fillets into the batter, coating them evenly.\\n5\\. Gently place the coated fillets into the hot oil and fry for 4-5 minutes on each side, or until golden brown and crispy.\\n6\\. Remove the fried fish from the oil and place them on a paper towel-lined plate to drain any excess oil.\\n7\\. For the chips, peel the potatoes and cut them into thick chips.\\n8\\. Heat vegetable oil in a deep fryer or large pan.\\n9\\. Fry the chips in batches until golden and crisp.\\n10\\. Remove the chips from the oil and place them on a paper towel-lined plate to drain any excess oil.\\n11\\. Season the chips with salt.\\n12\\. Serve the fish and chips together, and enjoy!\"\n}\n```", "```py\nfrom langchain.prompts import ChatPromptTemplate\nfrom langchain.output_parsers import ResponseSchema, StructuredOutputParser\nfrom langchain.llms import GooglePalm, OpenAI\n\ningredients = ResponseSchema(\n        name=\"ingredients\",\n        description=\"The ingredients from recipe, as a unique string.\",\n    )\nsteps = ResponseSchema(\n        name=\"steps\",\n        description=\"The steps to prepare the recipe, as a unique string.\",\n    )\n\noutput_parser = StructuredOutputParser.from_response_schemas(\n    [ingredients, steps]\n)\n\nresponse_format = output_parser.get_format_instructions()\nprint(response_format)\n\nprompt = ChatPromptTemplate.from_template(\"What is the recipe for {recipe}? Return the ingredients list and steps separately. \\n {format_instructions}\")\n```", "```py\n\"\"\"\nThe output should be a markdown code snippet formatted in the following schema, including the leading and trailing \"```", "```py\":\n\n```", "```py\n\nNow what we have left is just calling the API. Here I will demonstrate both the Open AI API and with Google PaLM API.\n\n```", "```py\n\nAs you can see it is really easy to change between models. The whole structure defined before can be used in the exact same way for any models supported by LangChain. We used also the same parser for both models.\n\nThis generated the following output:\n\n```"]