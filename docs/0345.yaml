- en: Variance Reduction with Importance Sampling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/variance-reduction-with-importance-sampling-4e5ca4b1c5a7?source=collection_archive---------17-----------------------#2023-01-23](https://towardsdatascience.com/variance-reduction-with-importance-sampling-4e5ca4b1c5a7?source=collection_archive---------17-----------------------#2023-01-23)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Mathematical explanation and Python implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@hrmnmichaels?source=post_page-----4e5ca4b1c5a7--------------------------------)[![Oliver
    S](../Images/b5ee0fa2d5fb115f62e2e9dfcb92afdd.png)](https://medium.com/@hrmnmichaels?source=post_page-----4e5ca4b1c5a7--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4e5ca4b1c5a7--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----4e5ca4b1c5a7--------------------------------)
    [Oliver S](https://medium.com/@hrmnmichaels?source=post_page-----4e5ca4b1c5a7--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Ff2daf6260cca&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvariance-reduction-with-importance-sampling-4e5ca4b1c5a7&user=Oliver+S&userId=f2daf6260cca&source=post_page-f2daf6260cca----4e5ca4b1c5a7---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4e5ca4b1c5a7--------------------------------)
    ·6 min read·Jan 23, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F4e5ca4b1c5a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvariance-reduction-with-importance-sampling-4e5ca4b1c5a7&user=Oliver+S&userId=f2daf6260cca&source=-----4e5ca4b1c5a7---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F4e5ca4b1c5a7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fvariance-reduction-with-importance-sampling-4e5ca4b1c5a7&source=-----4e5ca4b1c5a7---------------------bookmark_footer-----------)![](../Images/08c4a7efaed06bcd1a42a2a74b87d3d5.png)'
  prefs: []
  type: TYPE_NORMAL
- en: Photo by [Edge2Edge Media](https://unsplash.com/@edge2edgemedia?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/uKlneQRwaxY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  prefs: []
  type: TYPE_NORMAL
- en: 'In a previous post I introduced [different numerical sampling techniques](https://medium.com/towards-data-science/introduction-to-sampling-methods-c934b64b6b08),
    one of them being importance sampling. In that post we used this technique to
    allow sampling from complex distributions, sampling from which would otherwise
    be infeasible. However, importance sampling is frequently used for another reason,
    namely variance reduction: that is, by choosing a suited proposal distribution
    we can reduce the variance of our estimator — which we will cover here.'
  prefs: []
  type: TYPE_NORMAL
- en: Recap of Importance Sampling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Assume we don’t just want to calculate the expectation `E[X]` of a random variable
    `X`, but instead the expectation of a function of that variable, `f[X]`. In a
    continuous setting this is calculated as:'
  prefs: []
  type: TYPE_NORMAL
- en: 'We can approximate this expectation using numerical approximation, also known
    as Monte Carlo methods, by sampling `n` random values from the distribution `p`
    and then calculate the sample mean:'
  prefs: []
  type: TYPE_NORMAL
- en: The idea behind importance sampling now is to use a simple re-formulation trick
    and write the expectation as
  prefs: []
  type: TYPE_NORMAL
- en: '— giving the expectation of `f(x)p(x)/q(x)` over the distribution `q`! And
    with that, allowing us to calculate the sample mean by sampling from q:'
  prefs: []
  type: TYPE_NORMAL
