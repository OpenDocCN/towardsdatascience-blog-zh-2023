- en: Exploring Different Approaches to Generate Response Curves in Marketing Mix
    Modeling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/exploring-different-approaches-to-generate-response-curves-in-marketing-mix-modeling-ff6dcc7927f7?source=collection_archive---------2-----------------------#2023-06-14](https://towardsdatascience.com/exploring-different-approaches-to-generate-response-curves-in-marketing-mix-modeling-ff6dcc7927f7?source=collection_archive---------2-----------------------#2023-06-14)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Comparing Saturation Function and Partial Dependence for Response Curve Generation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@slavax?source=post_page-----ff6dcc7927f7--------------------------------)[![Slava
    Kisilevich](../Images/5a2a00fb7a9d4c33868d071b6cc1a009.png)](https://medium.com/@slavax?source=post_page-----ff6dcc7927f7--------------------------------)[](https://towardsdatascience.com/?source=post_page-----ff6dcc7927f7--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----ff6dcc7927f7--------------------------------)
    [Slava Kisilevich](https://medium.com/@slavax?source=post_page-----ff6dcc7927f7--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fba0d56f8b910&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-different-approaches-to-generate-response-curves-in-marketing-mix-modeling-ff6dcc7927f7&user=Slava+Kisilevich&userId=ba0d56f8b910&source=post_page-ba0d56f8b910----ff6dcc7927f7---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----ff6dcc7927f7--------------------------------)
    ·6 min read·Jun 14, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fff6dcc7927f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-different-approaches-to-generate-response-curves-in-marketing-mix-modeling-ff6dcc7927f7&user=Slava+Kisilevich&userId=ba0d56f8b910&source=-----ff6dcc7927f7---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff6dcc7927f7&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fexploring-different-approaches-to-generate-response-curves-in-marketing-mix-modeling-ff6dcc7927f7&source=-----ff6dcc7927f7---------------------bookmark_footer-----------)![](../Images/c5688f8eb203cf429f5760f1961c49c8.png)'
  prefs: []
  type: TYPE_NORMAL
- en: Photo by [Alexander Grey](https://unsplash.com/@sharonmccutcheon?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  prefs: []
  type: TYPE_NORMAL
- en: Response curves are an essential component of marketing mix modeling, which
    is a statistical technique used to analyze the impact of various marketing strategies
    and tactics on sales or other business outcomes. Response curves represent the
    relationship between a marketing variable (e.g., advertising spend, price, promotion,
    etc.) and the sales or revenue generated by a product or service.
  prefs: []
  type: TYPE_NORMAL
- en: The importance of response curves lies in their ability to reveal the effectiveness
    of each marketing variable and how it contributes to overall response. By analyzing
    response curves, marketers can gain valuable insights into which marketing tactics
    are driving the most sales and which are not delivering the desired results.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are different approaches to building response curves, and in this article,
    I explore two prominent methods: the straightforward approach using saturation
    transformation and the approach based on partial dependence. I evaluate these
    approaches using two different families of algorithms: linear regression and gradient
    boosting. Moreover, I show that the partial dependence approach can be used in
    conjunction with response curves generated by SHAP values when using complex machine
    learning algorithms.'
  prefs: []
  type: TYPE_NORMAL
- en: Saturation Functions / Transformations
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The straightforward approach to building response curves involves using saturation
    functions (transformations) such as [Logistic, Negative Exponential](https://analyticsartist.wordpress.com/2015/03/08/advertising-diminishing-returns-saturation/)
    or [Hill](https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/46001.pdf).
    A saturation function is a mathematical function that captures the diminishing
    returns effect, where the impact of a marketing variable saturates as its value
    increases. By using a saturation function, the relationship between the marketing
    variable and the response variable can be transformed into a non-linear form.
    This enables the model to capture the saturation effect and more accurately represent
    the true relationship between marketing efforts and the response (sales or revenue).
  prefs: []
  type: TYPE_NORMAL
- en: '[](/modeling-marketing-mix-using-pymc3-ba18dd9e6e68?source=post_page-----ff6dcc7927f7--------------------------------)
    [## Modeling Marketing Mix using PyMC3'
  prefs: []
  type: TYPE_NORMAL
- en: Experimenting with priors, data normalization, and comparing Bayesian modeling
    with Robyn, Facebook’s open-source MMM…
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/modeling-marketing-mix-using-pymc3-ba18dd9e6e68?source=post_page-----ff6dcc7927f7--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: One advantage of using a saturation transformation is its simplicity and interpretability.
    The response curve is defined by a mathematical function with fixed parameters
    resulting in a smooth curve that can be easily visualized. However, the choice
    of the saturation function is an important consideration prior to modeling. Different
    functions may yield different results, and the selection should be based on the
    characteristics of the data and the underlying assumptions of the model.
  prefs: []
  type: TYPE_NORMAL
- en: Linear Regression and the Need for Non-Linearity
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In marketing mix modeling, linear regression is a commonly used technique to
    analyze the relationship between marketing variables and the response variable.
    However, linear regression assumes a linear relationship between the predictor
    variables and the response variable. This can pose a limitation when trying to
    capture non-linear relationships that often exist in marketing data.
  prefs: []
  type: TYPE_NORMAL
- en: To overcome this limitation and introduce non-linearity into the modeling process,
    it becomes necessary to apply a saturation function or transformation to the marketing
    variables. This transformation allows for the generation of a non-linear relationship
    that would otherwise be linear due to the nature of linear regression.
  prefs: []
  type: TYPE_NORMAL
- en: '[](/modeling-marketing-mix-using-smoothing-splines-98dc8e84c367?source=post_page-----ff6dcc7927f7--------------------------------)
    [## Modeling Marketing Mix Using Smoothing Splines'
  prefs: []
  type: TYPE_NORMAL
- en: Capturing non-linear advertising saturation and diminishing returns without
    explicitly transforming media variables
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/modeling-marketing-mix-using-smoothing-splines-98dc8e84c367?source=post_page-----ff6dcc7927f7--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: Partial Dependence Approach
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The partial dependence approach is a more general method that can be used to
    model the relationship between any marketing variable and the response. This approach
    involves isolating the effect of one variable while holding all other variables
    constant. By varying the value of the marketing variable of interest and observing
    the corresponding response, a plot of the partial dependence can be created.
  prefs: []
  type: TYPE_NORMAL
- en: Unlike the smooth response curve generated by saturation transformations, the
    resulting plot from the partial dependence approach may not necessarily be smooth.
    Its shape depends on the underlying modeling algorithm, and relationship between
    a media variable and the response. The partial dependence approach can be useful
    when the relationship is complex and non-linear, and it can be applied in cases
    when a saturation transformation is explicitly used or when algorithms handle
    non-linearity naturally without the need for additional saturation transformation.
  prefs: []
  type: TYPE_NORMAL
- en: '[](/improving-marketing-mix-modeling-using-machine-learning-approaches-25ea4cd6994b?source=post_page-----ff6dcc7927f7--------------------------------)
    [## Improving Marketing Mix Modeling Using Machine Learning Approaches'
  prefs: []
  type: TYPE_NORMAL
- en: Building MMM models using tree-based ensembles and explaining media channel
    performance using SHAP (Shapley Additive…
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/improving-marketing-mix-modeling-using-machine-learning-approaches-25ea4cd6994b?source=post_page-----ff6dcc7927f7--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: Data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I continue using the dataset made available by [Robyn](https://github.com/facebookexperimental/Robyn)
    under MIT Licence as in my previous articles for practical examples, and follow
    the same data preparation steps by applying Prophet to decompose trends, seasonality,
    and holidays.
  prefs: []
  type: TYPE_NORMAL
- en: 'The dataset consists of 208 weeks of revenue (from 2015–11–23 to 2019–11–11)
    having:'
  prefs: []
  type: TYPE_NORMAL
- en: '5 media spend channels: **tv_S, ooh_S, print_S, facebook_S, search_S**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '2 media channels that have also the exposure information (Impression, Clicks):
    facebook_I, search_clicks_P (not used in this article)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Organic media without spend: **newsletter**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Control variables: **events, holidays**, competitor sales (**competitor_sales_B)**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Modeling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'I built a complete working MMM pipeline that can be applied in a real-life
    scenario for analyzing media spend on the response variable, consisting of the
    following components:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Adstock Transformation](https://medium.com/towards-data-science/modeling-marketing-mix-using-pymc3-ba18dd9e6e68)
    with infinite decay rate (0 < α < 1)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Saturation Hill Transformation](https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/46001.pdf)
    with two parameters: slope / shape parameter, controlling the steepness of the
    curve (s > 0) and half saturation point (0 < k ≤ 1)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Ridge Regression from [scikit-learn](https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.Ridge.html)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[LightGBM Regression with monotonic constraints](https://lightgbm.readthedocs.io/en/latest/Parameters.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Time-based cross-validation](https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.TimeSeriesSplit.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Optuna hyperparameter tuning](https://optuna.org/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**A note on coefficients**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In scikit-learn, Ridge Regression does not provide a built-in option to enforce
    positive coefficients for a subset of variables. However, a potential workaround
    involves rejecting the optuna solution if any of the media coefficients are found
    to be negative. This can be accomplished by returning an exceptionally large value,
    signaling that the negative coefficients are unacceptable and should be excluded
    from the model. An alternative approach could be to refer to [my article on how
    to wrap an R glmnet in Python](/modeling-marketing-mix-with-constrained-coefficients-234b23190ee2),
    which enables the constraint of coefficients for a subset of variables.
  prefs: []
  type: TYPE_NORMAL
- en: For ridge regression, I apply a saturation transformation and generate response
    curves using both the saturation function and partial dependence approaches. With
    LightGBM, I allow the model to naturally capture non-linearities and generate
    response curves using the partial dependence approach. Additionally, I overlay
    SHAP values on the response curve to provide further insights.
  prefs: []
  type: TYPE_NORMAL
- en: Results
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Ridge Regression with saturation transformation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As can be observed, both response curves generated using the saturation function
    and partial dependence exhibit overlapping patterns, indicating that the two methods
    capture similar relationships between the marketing variable and the response.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/c4b55d0e6fe0c2f0f26a52be90c4d3e0.png)'
  prefs: []
  type: TYPE_IMG
- en: LightGBM
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As mentioned previously, the resulting response curve generated by the partial
    dependence may not necessarily be smooth. One reason for this can be attributed
    to the nature of gradient boosting algorithms, which involve splitting the feature
    space into regions and incorporating interactions among multiple decision trees.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1fc8b66a758afb99b34d4bd270a3553e.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by the author
  prefs: []
  type: TYPE_NORMAL
- en: The plots below depict the response curves for Ridge Regression and LightGBM,
    highlighting the disparities between the two algorithms in capturing diminishing
    returns. Furthermore, we observe that the SHAP values offer a reliable approximation
    of the response curves generated by the partial dependence approach.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/c9fc2a84374e53791b4c234926cea56e.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by the author
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/11a5101ebf043c76a783fa3a9095fe5b.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by the author
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/dcc171e3c0b8619c5bcc9da73ac22ac2.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by the author
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/43f2065bf05edf17c67bf0440f7cc023.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by the author
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/06cc4f639c46c3d8d28fbc3b939048a3.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by the author
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Response curves play a crucial role in marketing mix modeling by providing
    insights into the effectiveness of different marketing variables and their contribution
    to overall response. In this article, I explored two prominent methods for generating
    response curves: the straightforward approach using saturation transformations
    and the partial dependence approach. I evaluated these approaches using two families
    of algorithms, linear regression and gradient boosting, and demonstrated the contrasting
    ways in which different algorithms capture non-linear response. Additionally,
    I compared the responses generated using SHAP values to the results obtained through
    the partial dependence approach'
  prefs: []
  type: TYPE_NORMAL
- en: The complete code can be downloaded from my [Github repo](https://github.com/slavakx/medium_posts)
  prefs: []
  type: TYPE_NORMAL
- en: Thanks for reading!
  prefs: []
  type: TYPE_NORMAL
