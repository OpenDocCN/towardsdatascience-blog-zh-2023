- en: Grouped Barplot With Error Bars in R
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/grouped-barplot-with-error-bars-in-r-ee87b112204d?source=collection_archive---------4-----------------------#2023-11-01](https://towardsdatascience.com/grouped-barplot-with-error-bars-in-r-ee87b112204d?source=collection_archive---------4-----------------------#2023-11-01)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A comprehensive guide to data preparation and visualization
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@bhaskartigp?source=post_page-----ee87b112204d--------------------------------)[![Bhaskara
    Govinal Badiger](../Images/7c14288687e96546a7a5a3974c110dc8.png)](https://medium.com/@bhaskartigp?source=post_page-----ee87b112204d--------------------------------)[](https://towardsdatascience.com/?source=post_page-----ee87b112204d--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----ee87b112204d--------------------------------)
    [Bhaskara Govinal Badiger](https://medium.com/@bhaskartigp?source=post_page-----ee87b112204d--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: Â·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc2084c3fd87&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouped-barplot-with-error-bars-in-r-ee87b112204d&user=Bhaskara+Govinal+Badiger&userId=c2084c3fd87&source=post_page-c2084c3fd87----ee87b112204d---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----ee87b112204d--------------------------------)
    Â·10 min readÂ·Nov 1, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fee87b112204d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouped-barplot-with-error-bars-in-r-ee87b112204d&user=Bhaskara+Govinal+Badiger&userId=c2084c3fd87&source=-----ee87b112204d---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fee87b112204d&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fgrouped-barplot-with-error-bars-in-r-ee87b112204d&source=-----ee87b112204d---------------------bookmark_footer-----------)![](../Images/79cc7d6144d1b3e1aba099cd52a6b3ce.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: Photo by [Paulius Dragunas](https://unsplash.com/@paulius005?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: Barplots are an essential and widely used visualization tool for several reasons.
    They are excellent choices for visualizing the relationship between *numeric*
    and *categorical* variables, making it easy to understand the differences between
    categories or groups. They can represent counts, frequencies, proportions, and
    percentages, making them versatile for various data types.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: In R, we have the ability to analyze categorical data and represent it through
    barplots. Nevertheless, beginners venturing into R programming often encounter
    challenges when it comes to estimating means, standard errors, and creating grouped
    barplots with error bars. To counter these challenges one must have a basic understanding
    of data types, data structures, and the operations required for data analysis.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: In this tutorial, we start by creating a simple dataset to understand different
    kinds of data types and how to convert them into suitable formats for data analysis.
    Then, we will delve into the process of estimating means and standard errors.
    Subsequently, we will proceed to create a grouped barplot with error bars. To
    assist beginners, I will meticulously dissect the code, step by step, to ensure
    a thorough understanding of the programming process.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: I assume our readers are familiar with the process of installing and loading
    R packages. If not, please refer to [**STHDA**](http://www.sthda.com/english/wiki/installing-and-using-r-packages)for
    guidance.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s jump right into creating the dataset, modifying it, and visualizing it.
    Begin by loading the necessary libraries as demonstrated below.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The [**tidyverse**](https://brianward1428.medium.com/introduction-to-tidyverse-7b3dbf2337d5)
    is a core collection of R packages, which includes `[**dplyr**](https://r4ds.hadley.nz/data-transform.html)`
    for data manipulation and analysis, and`[**ggplot2**](https://r4ds.hadley.nz/data-visualize)`
    for data visualization. The [**ggthemes**](https://ggplot2.tidyverse.org/reference/ggtheme.html)provides
    alternative themes and theme components to style ggplot2 plots. The [**ggpubr**](https://rpkgs.datanovia.com/ggpubr/)
    offers `**ggsave()**` to save plots with customizable dimensions, resolution,
    and file formats. To explore these packages further, simply click on the hyperlinks
    provided.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: Creating a D**ataframe:**
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the code below `**data.frame()**` function initiates a dataframe named `**df**`
    with three columns: `**Animals**`, `**Category**`, and `**Counts**`.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: ğŸ’¡ *Alternatively create the dataframe in Excel and import the file to R.*
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s view the dataframe `**df**` using `**view(**`) function.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/91bfb3b436eacb1b445e852b6dbe356b.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
- en: 'The `**Animals**` column contains names of different kinds of animals. There
    are three unique animals in this column: â€œcatsâ€, â€œdogsâ€, and â€œcowsâ€. We sampled
    each kind of animal four times, resulting in a total of 12 rows. The `**Category**`
    column classifies the animals as either â€œDomesticâ€ or â€œStrayâ€. There are six â€œDomesticâ€
    and six â€œStraysâ€. The `**Counts**`column represents the counts of each animal
    in the given â€˜Categoryâ€™ and â€˜Animalsâ€™ columns.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: Data types and data manipulation
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In R, itâ€™s crucial to understand the [**data type**](https://rpubs.com/STEMResearch/data-types-in-r)of
    the columns (variables) in the dataframe, because different operations and functions
    may be applied to different kinds of data types. In the `**df**` dataframe, `**Animals**`
    and`**Category**` columns have a **Character** data type and the `**Counts**`column
    has a **numeric** data type. Character data types are essential for working with
    text data, such as names, labels, descriptions, and textual information. Numeric
    data types represent numeric values, including integers and real numbers (floating-point
    values).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨Rä¸­ï¼Œäº†è§£æ•°æ®æ¡†ä¸­åˆ—ï¼ˆå˜é‡ï¼‰çš„[**æ•°æ®ç±»å‹**](https://rpubs.com/STEMResearch/data-types-in-r)è‡³å…³é‡è¦ï¼Œå› ä¸ºä¸åŒçš„æ•°æ®ç±»å‹å¯èƒ½é€‚ç”¨äºä¸åŒçš„æ“ä½œå’Œå‡½æ•°ã€‚åœ¨`**df**`æ•°æ®æ¡†ä¸­ï¼Œ`**Animals**`å’Œ`**Category**`åˆ—å…·æœ‰**å­—ç¬¦**æ•°æ®ç±»å‹ï¼Œè€Œ`**Counts**`åˆ—å…·æœ‰**æ•°å€¼**æ•°æ®ç±»å‹ã€‚å­—ç¬¦æ•°æ®ç±»å‹å¯¹äºå¤„ç†æ–‡æœ¬æ•°æ®ï¼ˆå¦‚åç§°ã€æ ‡ç­¾ã€æè¿°å’Œæ–‡æœ¬ä¿¡æ¯ï¼‰éå¸¸é‡è¦ã€‚æ•°å€¼æ•°æ®ç±»å‹è¡¨ç¤ºæ•°å€¼ï¼ŒåŒ…æ‹¬æ•´æ•°å’Œå®æ•°ï¼ˆæµ®ç‚¹å€¼ï¼‰ã€‚
- en: Let's get the summary of the dataframe using `**glimpse()**` function to know
    the data type of the variables in the dataframe `**df**`.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨`**glimpse()**`å‡½æ•°è·å–æ•°æ®æ¡†çš„æ‘˜è¦ï¼Œä»¥äº†è§£æ•°æ®æ¡†`**df**`ä¸­å˜é‡çš„æ•°æ®ç±»å‹ã€‚
- en: '[PRE3]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: We can observe that the `**df**` dataframe consists of 12 rows (observations),
    and 3 columns (variables). Notably, the `**Animals**` and `**Category**` variables
    are identified as character data type, denoted as `**<chr>**.` The values within
    these variables are enclosed in double quotes, rendering them as character strings.
    However, it is interesting to note that the `**Counts**` variable is also identified
    as a character data type. This is unexpected since the values within this variable
    are, in fact, numerical, not character strings. This misclassification of data
    types could potentially lead to complications when conducting numerical operations.
    To address this issue and facilitate numerical operations, we must take the necessary
    step of converting the `**Counts**` variable into a numeric data type.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°`**df**`æ•°æ®æ¡†åŒ…å«12è¡Œï¼ˆè§‚æµ‹å€¼ï¼‰å’Œ3åˆ—ï¼ˆå˜é‡ï¼‰ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`**Animals**`å’Œ`**Category**`å˜é‡è¢«è¯†åˆ«ä¸ºå­—ç¬¦æ•°æ®ç±»å‹ï¼Œæ ‡è®°ä¸º`**<chr>**`ã€‚è¿™äº›å˜é‡ä¸­çš„å€¼è¢«åŒå¼•å·æ‹¬èµ·æ¥ï¼Œä½¿å…¶æˆä¸ºå­—ç¬¦å­—ç¬¦ä¸²ã€‚ç„¶è€Œï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`**Counts**`å˜é‡ä¹Ÿè¢«è¯†åˆ«ä¸ºå­—ç¬¦æ•°æ®ç±»å‹ã€‚è¿™æ˜¯æ„å¤–çš„ï¼Œå› ä¸ºè¯¥å˜é‡ä¸­çš„å€¼å®é™…ä¸Šæ˜¯æ•°å­—ï¼Œè€Œä¸æ˜¯å­—ç¬¦å­—ç¬¦ä¸²ã€‚è¿™ç§æ•°æ®ç±»å‹çš„è¯¯åˆ†ç±»å¯èƒ½ä¼šåœ¨è¿›è¡Œæ•°å€¼æ“ä½œæ—¶å¼•å‘é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¹¶ä¾¿äºæ•°å€¼æ“ä½œï¼Œæˆ‘ä»¬å¿…é¡»é‡‡å–å¿…è¦æ­¥éª¤å°†`**Counts**`å˜é‡è½¬æ¢ä¸ºæ•°å­—æ•°æ®ç±»å‹ã€‚
- en: You may have noticed that when I initially created the dataframe `**df**`, I
    intentionally enclosed the numeric values in double quotes, rendering the `**Counts**`
    variable as a character data type. Now that we have a clear understanding of the
    dataframeâ€™s structure, letâ€™s move forward and resolve this issue. We will do so
    by converting the `**Counts**` variable within the `**df**` dataframe from its
    current character data type to a numeric data type.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œå½“æˆ‘æœ€åˆåˆ›å»ºæ•°æ®æ¡†`**df**`æ—¶ï¼Œæˆ‘æ•…æ„å°†æ•°å€¼ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼Œä»è€Œå°†`**Counts**`å˜é‡è®¾ä¸ºå­—ç¬¦æ•°æ®ç±»å‹ã€‚ç°åœ¨æˆ‘ä»¬å·²ç»æ¸…æ¥šäº†è§£æ•°æ®æ¡†çš„ç»“æ„ï¼Œè®©æˆ‘ä»¬ç»§ç»­è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å°†é€šè¿‡å°†`**df**`æ•°æ®æ¡†ä¸­çš„`**Counts**`å˜é‡ä»å½“å‰çš„å­—ç¬¦æ•°æ®ç±»å‹è½¬æ¢ä¸ºæ•°å­—æ•°æ®ç±»å‹æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚
- en: '[PRE5]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '`**df$Counts**` selects the `**Counts**`column in the `**df**` data frame.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '`**df$Counts**`é€‰æ‹©`**df**`æ•°æ®æ¡†ä¸­çš„`**Counts**`åˆ—ã€‚'
- en: '`**as.numeric()**` converts the input to a numeric data type.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '`**as.numeric()**`å°†è¾“å…¥è½¬æ¢ä¸ºæ•°å­—æ•°æ®ç±»å‹ã€‚'
- en: '[PRE6]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Now the `**Counts**` variable is identified as numeric data type, denoted by
    `**<dbl>**` , often referred to simply as a â€œdoubleâ€. The values within this variable
    are not enclosed in quotes indicating they are numerical, not character strings.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨`**Counts**`å˜é‡è¢«è¯†åˆ«ä¸ºæ•°å€¼æ•°æ®ç±»å‹ï¼Œæ ‡è®°ä¸º`**<dbl>**`ï¼Œé€šå¸¸ç®€ç§°ä¸ºâ€œåŒç²¾åº¦â€ã€‚è¯¥å˜é‡ä¸­çš„å€¼æ²¡æœ‰ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œè¡¨æ˜å®ƒä»¬æ˜¯æ•°å€¼ï¼Œè€Œéå­—ç¬¦å­—ç¬¦ä¸²ã€‚
- en: '`**<dbl>**` *stands for a "double-precision floating-point number. It is a
    numerical data type used to store real numbers and perform arithmetic operations
    on real numbers, including decimals.*'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '`**<dbl>**` *ä»£è¡¨â€œåŒç²¾åº¦æµ®ç‚¹æ•°â€ã€‚è¿™æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨å®æ•°å¹¶å¯¹å®æ•°ï¼ˆåŒ…æ‹¬å°æ•°ï¼‰æ‰§è¡Œç®—æœ¯è¿ç®—çš„æ•°å€¼æ•°æ®ç±»å‹ã€‚*'
- en: Estimating mean and standard error
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¼°ç®—å‡å€¼å’Œæ ‡å‡†è¯¯å·®
- en: The code below creates a new dataframe named `**mean_df**` by performing data
    summarization and aggregation on an existing dataframe `**df**`.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ä»£ç é€šè¿‡å¯¹ç°æœ‰æ•°æ®æ¡†`**df**`æ‰§è¡Œæ•°æ®æ±‡æ€»å’Œèšåˆï¼Œåˆ›å»ºäº†ä¸€ä¸ªåä¸º`**mean_df**`çš„æ–°æ•°æ®æ¡†ã€‚
- en: '[PRE8]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Letâ€™s break down the code step by step:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä¸€æ­¥æ­¥è§£æä»£ç ï¼š
- en: The pipe (`**%>%**`) operator takes the existing dataframe `**df**` and passes
    it to the next part of the code. It sets `**df**` as the input for subsequent
    operations. *In R, the* `**%>%**` *operator takes the result of one function on
    the left and passes it as the first argument to the next function on the right,
    allowing us to chain together a series of operations in a clear and sequential
    manner.*
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The `**group_by()**` function groups the dataframe by the `**Animals**` and
    `**Category**` columns, creating subgroups within the dataframe based on the unique
    combinations of these two variables.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The `**summarise()**` function estimates the mean and standard error and assigns
    them to new variables :`**mean**` and `**se**` respectively.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The `**mean()**` function computes the mean (average) of the `**Counts**` column
    for each subgroup created by the `**group_by()**` operation.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The `**sd()**` function calculates the standard error (se) of the `**Counts**`
    column for each subgroup. The standard error is calculated by dividing the standard
    deviation (`**sd()**`) of the `Counts` column by the square root of the sample
    size (`**sqrt(n())**`).
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Letâ€™s take a look at the summary of the data frame `**mean_df**`
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: All set! we now have four columns or variables, including two new variables,
    `**mean**` and `**se**` calculated for the `**Counts**` column based on our grouping
    criteria. Letâ€™s proceed with data visualization using this new dataframe `**mean_df**`.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: Visualizing the data
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The code below takes the data frame `**mean_df**` and passes it to `**ggplot2**`
    using `**%>%**` operator to create a grouped barplot assigned to the object â€œ**barplot**â€
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: ğŸ’¡*Note that while the pipe operator (****%>%****) is useful for chaining together
    multiple operations in data manipulation and analysis, it cannot be used for adding
    layers within the ggplot2 function during the data visualization process. Instead,
    we use the* ***â€˜+â€™*** *symbol as demonstrated above.*
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s break down the code step by step:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: The `**aes()**` function, short for *â€˜aestheticâ€™* is to specify how the variables
    in the dataset are mapped to visual aesthetics in the plot. In this case, it specifies
    that the x-axis should represent the `**Animals**` variable, the y-axis should
    represent the `**mean**` variable, and fill bar colors based on the `**Category**`
    variable.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The `**geom_col()**`calculates the height of each bar based on the values in
    the `**mean**` column.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Here is the breakdown of the parameters used in the `**geom_col()**` function:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: '`**position = "dodge"**`: It specifies that the bars should be grouped side
    by side (dodged) based on the `**Category**` variable. This is what creates a
    grouped barplot.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`**width = 0.5**`: It determines the width of the bars. In this case, the bars
    have a width of 0.5.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`**alpha = 0.5**`: It controls the transparency of the bars. An alpha value
    of 0.5 makes the bars somewhat transparent.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`**color = "black"**`: It sets the border color of the bars to black.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`**size = 0.1**`: It specifies the size of the border around the bars. In this
    case, the borders will be relatively thin.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The combination of these parameters customizes the appearance of the bars in
    the barplot, making them thinner, somewhat transparent, with black borders, and
    arranged side by side for different categories, which can enhance the visual representation
    of the data.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s look at the plot:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![](../Images/1b2f9e27c78e668980507a77b0e47f06.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
- en: Great! Weâ€™ve successfully created a barplot, but the bars currently lack standard
    errors. Letâ€™s incorporate standard errors into the plot.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: '**Adding standard errors to the bars and customizing bar colors**'
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: First copy and paste the above code and then add `**geom_errorbar()**` function
    to it using â€˜**+**â€™ symbol as shown below.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Letâ€™s break down the components used in the `**geom_errorbar()**` function:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: '`**ymin**` and `**ymax**` defines the lower and upper values of the error bars
    based on the calculated mean and standard error.'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`**position**` argument is set to `**position_dodge()**` for placing error
    bars side by side (dodged) and `**width = 0.5**` to set the dodge width. Play
    around with the width parameter to notice the changes in the bar position.'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`**width = 0.2**` sets the width of the error bars. In this case, the error
    bars will have a width of 0.2'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Let''s look at the plot:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '![](../Images/2a40329b930210349e1dfdcc06e3e564.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
- en: Great! We now created a grouped barplot with errorbars. This graph is nearly
    publication-ready, but a few minor adjustments can greatly enhance its appearance.
    For instance, you may have noticed a gap between the bars and the x-axis labels.
    Letâ€™s remove it. Additionally, changing the bar colors, placing the figure legend
    inside the graph, and providing a predefined theme for clean and simple visuals
    will improve its overall presentation.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: Creating publication-quality graph
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Letâ€™s start by copying the above code and then adding additional layers to it
    using â€˜**+**â€™ as shown below.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Here we incorporated `**scale_y_continuous()**` **,** `**scale_fill_manual()**`
    **,** `**theme_par()**` **,** `**theme()**`functions that are part of the `**ggplot2**`
    package to the existing code.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: Here is the breakdown of the parameters used within these functions.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: The `scale_y_continuous` allows us to modify various aspects of the y-axis,
    such as the range, breaks, labels, and more. In the above code the `**expand**`
    argument of `**scale_y_continuous()**` is set to expansion(0) to remove any padding
    around the y-axis limits, and the `**limits**` argument is set to `**c(0,100)**`
    to set the y-axis limits from 0 to 100.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The `**scale_fill_manual()**` allows us to manually specify the colors we want
    to use for filling different categories or levels of variables. Note that the
    fill aesthetic in the 2nd line of the code was set to `**fill = Category**`**.**
    Therefore, in this case, the argument`**values = c("blue", "gray")**`fills the
    colors of the bars based on the values within the `**Category**` **:** blue for
    `**"Domestic"**` and gray for `**"Strayâ€**`.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The `**theme_par()**` allows us to customize the theme for the plot, which provides
    a clean white background and compact graphics. It has its own pros and cons.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The `**legend.position**` argument `**theme()**` was set to `**c(0.2, 0.80)**`
    to specify the position of the legend within the plot. Play with these values
    to understand this argument better.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ğŸ’¡ *The predefined themes such as* `**theme_par()**` *will override theme components
    applied afterward. We have added* `**theme(legend.position)**` *after the* `**theme_par()**`
    *function to address this issue.*
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s look at the plot:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '![](../Images/bf6f3406a8e29a9853798f51fc52f15f.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
- en: Here is a visually appealing and publication-ready barplot with error bars.
    The graph effectively illustrates the variations in animal populations. In the
    â€˜Strayâ€™ category, dogs outnumber cats and cows, while in the â€˜Domesticâ€™ category,
    cows clearly outnumber cats and dogs.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: Saving plot for publication
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The code below utilizes the `**ggsave()**` function from the `**ggpubr**` library.
    To save a plot as an image, we need to specify the object to be saved (in this
    case, â€œ**barplot**â€) and define the desired filename with the chosen graphic format.
    In this case, we have selected the filename â€œ**barplot_animals.tiffâ€,** which
    will save the plot as a TIFF image. Additionally, we have set the dimensions for
    `**width**` and `**height**` in inches, along with the resolution specified as
    `**dpi**` (dots per inch).
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Now you are all set to create publication-ready barplots with standard error
    bars. Enjoy the creative process and have a blast plotting your data! ğŸ‰âœ¨
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
