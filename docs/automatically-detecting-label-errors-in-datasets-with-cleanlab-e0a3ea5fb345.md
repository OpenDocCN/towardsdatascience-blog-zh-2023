# ä½¿ç”¨ CleanLab è‡ªåŠ¨æ£€æµ‹æ•°æ®é›†ä¸­çš„æ ‡ç­¾é”™è¯¯

> åŸæ–‡ï¼š[https://towardsdatascience.com/automatically-detecting-label-errors-in-datasets-with-cleanlab-e0a3ea5fb345?source=collection_archive---------3-----------------------#2023-07-22](https://towardsdatascience.com/automatically-detecting-label-errors-in-datasets-with-cleanlab-e0a3ea5fb345?source=collection_archive---------3-----------------------#2023-07-22)

## ä¸€åˆ™å…³äºäººå·¥æ™ºèƒ½å’Œé”™è¯¯åˆ†ç±»çš„å·´è¥¿è”é‚¦æ³•å¾‹çš„æ•…äº‹

[](https://joaopedro214.medium.com/?source=post_page-----e0a3ea5fb345--------------------------------)[![JoÃ£o Pedro](../Images/64a0e14527be213e5fde0a02439fbfa7.png)](https://joaopedro214.medium.com/?source=post_page-----e0a3ea5fb345--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e0a3ea5fb345--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e0a3ea5fb345--------------------------------) [JoÃ£o Pedro](https://joaopedro214.medium.com/?source=post_page-----e0a3ea5fb345--------------------------------)

Â·

[å…³æ³¨](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb111eee95c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-detecting-label-errors-in-datasets-with-cleanlab-e0a3ea5fb345&user=Jo%C3%A3o+Pedro&userId=b111eee95c&source=post_page-b111eee95c----e0a3ea5fb345---------------------post_header-----------) å‘è¡¨åœ¨ [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e0a3ea5fb345--------------------------------) Â·10 åˆ†é’Ÿé˜…è¯»Â·2023å¹´7æœˆ22æ—¥[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fe0a3ea5fb345&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-detecting-label-errors-in-datasets-with-cleanlab-e0a3ea5fb345&user=Jo%C3%A3o+Pedro&userId=b111eee95c&source=-----e0a3ea5fb345---------------------clap_footer-----------)

--

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe0a3ea5fb345&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fautomatically-detecting-label-errors-in-datasets-with-cleanlab-e0a3ea5fb345&source=-----e0a3ea5fb345---------------------bookmark_footer-----------)![](../Images/36477c5670bfa2ec58e04ee972390139.png)

ç…§ç‰‡ç”± [Gustavo Leighton](https://unsplash.com/@g_leighton?utm_source=medium&utm_medium=referral) æä¾›ï¼Œæ¥è‡ª [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

# å¼•è¨€

å‡ å‘¨å‰ï¼Œå½“æˆ‘åœ¨è¿›è¡Œä¸ªäººé¡¹ç›®çš„æ•°æ®é›†æœç´¢æ—¶ï¼Œæˆ‘å¶ç„¶å‘ç°äº†å·´è¥¿ä¼—è®®é™¢å¼€æ”¾æ•°æ®é—¨æˆ·ç½‘ç«™ï¼Œè¿™é‡ŒåŒ…å«äº†å¤§é‡çš„æ•°æ®â€”â€”åŒ…æ‹¬è®®å‘˜çš„è´¹ç”¨ã€æ”¿å…šå…ƒæ•°æ®ç­‰â€”â€”æ‰€æœ‰è¿™äº›æ•°æ®éƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªä¸é”™çš„ [API](https://dadosabertos.camara.leg.br/swagger/api.html#staticfile) è·å–ã€‚

å‡ å°æ—¶çš„æœç´¢å’Œæ£€æŸ¥åï¼Œæœ‰ä¸€äº›éå¸¸æœ‰è¶£çš„äº‹æƒ…å¼•èµ·äº†æˆ‘çš„æ³¨æ„ï¼šæ‰€æœ‰ç”±è®®å‘˜æå‡ºçš„æ³•å¾‹çš„æ±‡ç¼–ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„â€˜*ementas*â€™ï¼ˆç®€è¦æ‘˜è¦ï¼‰ã€ä½œè€…ã€å¹´ä»½ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä»¬çš„**ä¸»é¢˜**ï¼ˆå¥åº·ã€å®‰å…¨ã€é‡‘èç­‰ï¼‰â€”â€”ç”±è®®ä¼šæ–‡çŒ®å’Œä¿¡æ¯ä¸­å¿ƒï¼ˆCentro de DocumentaÃ§Ã£o e InformaÃ§Ã£o da CÃ¢maraï¼‰åˆ†ç±»ã€‚

æˆ‘çš„è„‘æµ·ä¸­é—ªç°å‡ºä¸€ä¸ªçµå…‰â€”â€”â€œ*æˆ‘å°†åˆ›å»ºä¸€ä¸ªç›‘ç£åˆ†ç±»ç®¡é“æ¥* ***é¢„æµ‹æ³•å¾‹çš„ä¸»é¢˜******ä½¿ç”¨å…¶æ‘˜è¦****ï¼Œæ¢ç´¢æœºå™¨å­¦ä¹ çš„ä¸€äº›åŸºç¡€è®¾æ–½æ–¹é¢ï¼Œå¦‚ä½¿ç”¨DVCçš„æ•°æ®ç‰ˆæœ¬æ§åˆ¶æˆ–ç±»ä¼¼çš„ä¸œè¥¿*ã€‚â€æˆ‘è¿…é€Ÿç¼–å†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œæ”¶é›†äº†ä¸€ä¸ªåŒ…å«è¶…è¿‡60,000æ¡æ³•å¾‹çš„å¤§å‹æ•°æ®é›†ï¼Œæ—¶é—´è·¨åº¦ä»1990å¹´åˆ°2022å¹´ã€‚

æˆ‘å·²ç»ç¨å¾®æ¶‰çŒè¿‡å¸æ³•å’Œç«‹æ³•æ•°æ®ï¼Œæ‰€ä»¥æˆ‘æœ‰ä¸€ç§æ„Ÿè§‰è¿™ä¸ªä»»åŠ¡ä¸ä¼šå¾ˆéš¾ã€‚ä½†æ˜¯ï¼Œä¸ºäº†æ›´è½»æ¾äº›ï¼Œæˆ‘é€‰æ‹©ä»…åˆ†ç±»æ³•å¾‹ææ¡ˆï¼ˆLPï¼‰æ˜¯å¦æ¶‰åŠâ€œ*çºªå¿µå’Œçºªå¿µæ—¥æœŸ*â€ï¼ˆäºŒåˆ†ç±»ï¼‰ã€‚ç†è®ºä¸Šï¼Œè¿™åº”è¯¥å¾ˆç®€å•ï¼Œå› ä¸ºæ–‡æœ¬éå¸¸ç®€å•ï¼š

![](../Images/a26315bf71eaec67b082f036007bfbbb.png)

åŸå§‹æ‘˜è¦å’ŒChatGPTçš„å­—é¢ç¿»è¯‘ - Iã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚

ä½†æ˜¯ï¼Œæ— è®ºæˆ‘å°è¯•äº†ä»€ä¹ˆï¼Œæˆ‘çš„æ€§èƒ½åœ¨f1åˆ†æ•°ä¸Šå§‹ç»ˆæœªèƒ½è¶…è¿‡~0.80ï¼Œä¸”ï¼ˆæ­£ç±»çš„ï¼‰å¬å›ç‡ç›¸å¯¹è¾ƒä½ï¼Œä¸º0.5â€“0.7ã€‚

å½“ç„¶ï¼Œæˆ‘çš„æ•°æ®é›†é«˜åº¦ä¸å¹³è¡¡ï¼Œè¿™ä¸€ç±»åˆ«å æ•°æ®é›†æ€»é‡çš„ä¸åˆ°5%ï¼Œä½†è¿˜æœ‰æ›´å¤šå› ç´ ã€‚

ç»è¿‡ä¸€äº›è°ƒæŸ¥ï¼Œä½¿ç”¨åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„æŸ¥è¯¢æ£€æŸ¥æ•°æ®ï¼ŒæŸ¥çœ‹é”™è¯¯åˆ†ç±»è®°å½•åï¼Œæˆ‘å‘ç°äº†å‡ ä¸ªé”™è¯¯æ ‡è®°çš„ä¾‹å­ã€‚é€šè¿‡æˆ‘ç²—ç•¥çš„æ–¹æ³•ï¼Œæˆ‘å‘ç°äº†~200ä¸ªå‡é˜´æ€§ï¼Œå â€œçœŸå®â€æ­£ä¾‹çš„~7.5%å’Œæˆ‘æ•°æ®é›†çš„0.33%ï¼Œè¿˜æ²¡æœ‰æåˆ°å‡é˜³æ€§ã€‚è§ä¸‹å›¾ï¼š

![](../Images/86340626c166a22cac095a5946da6dbd.png)

é”™è¯¯åˆ†ç±»çš„ä¾‹å­ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚

è¿™äº›ä¾‹å­å½±å“äº†æˆ‘çš„éªŒè¯æŒ‡æ ‡â€”â€”â€œ*å®ƒä»¬å¯èƒ½æœ‰å¤šå°‘ä¸ªï¼Ÿæˆ‘éœ€è¦æ‰‹åŠ¨æœç´¢é”™è¯¯å—ï¼Ÿ*â€

ç„¶è€Œï¼Œ**Confident Learning** ä½œä¸º**Clean Lab** PythonåŒ…çš„å½¢å¼å‡ºç°ï¼Œæ¥æ‹¯æ•‘æˆ‘äº†ã€‚

![](../Images/1e88f7af7141237d5d19f6b5f3c4f018.png)

Clean Labæ ‡å¿—ã€‚å›¾ç‰‡æ¥è‡ª[GitHub](https://github.com/cleanlab/cleanlab)ã€‚

# ä»€ä¹ˆæ˜¯Confident Learningï¼Ÿ

æ­£ç¡®æ ‡è®°æ•°æ®æ˜¯ä»»ä½•ç›‘ç£æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­æœ€è€—æ—¶ä¸”æœ€æ˜‚è´µçš„æ­¥éª¤ä¹‹ä¸€ã€‚åƒä¼—åŒ…ã€åŠç›‘ç£å­¦ä¹ ã€å¾®è°ƒç­‰æŠ€æœ¯å°è¯•å‡å°‘æ”¶é›†æ ‡ç­¾çš„æˆæœ¬æˆ–å‡å°‘æ¨¡å‹è®­ç»ƒä¸­å¯¹è¿™äº›æ ‡ç­¾çš„éœ€æ±‚ã€‚

å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å·²ç»åœ¨è¿™ä¸ªé—®é¢˜ä¸Šé¢†å…ˆä¸€æ­¥ã€‚æˆ‘ä»¬æœ‰ä¸“ä¸šäººå£«æä¾›çš„æ ‡ç­¾ï¼Œå¯èƒ½æ˜¯å…·å¤‡è¶³å¤Ÿ*ä¸“ä¸šçŸ¥è¯†*çš„æ”¿åºœå·¥ä½œäººå‘˜ã€‚ä½†æˆ‘ä»¥ç²—ç•¥æ­£åˆ™è¡¨è¾¾å¼å¤„ç†çš„éä¸“ä¸šè§†è§’ä¸€æ—¦è¶…å‡ºæˆ‘çš„æ€§èƒ½é¢„æœŸï¼Œå°±èƒ½å‘ç°é”™è¯¯ã€‚

å…³é”®ç‚¹æ˜¯ï¼šæ•°æ®ä¸­è¿˜æœ‰å¤šå°‘é”™è¯¯ï¼Ÿ

æ£€æŸ¥æ¯ä¸€æ¡æ³•å¾‹æ˜¯ä¸ç°å®çš„â€”â€”éœ€è¦ä¸€ç§ **è‡ªåŠ¨** æ£€æµ‹ **é”™è¯¯æ ‡ç­¾** çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯ Confident Learning çš„ä½œç”¨ã€‚

æ€»ç»“ä¸€ä¸‹ï¼Œå®ƒä½¿ç”¨ä»æ¨¡å‹æ¦‚ç‡é¢„æµ‹ä¸­æ”¶é›†çš„ç»Ÿè®¡æ•°æ®æ¥ä¼°è®¡æ•°æ®é›†ä¸­çš„é”™è¯¯ã€‚å®ƒå¯ä»¥æ£€æµ‹å™ªå£°ã€ç¦»ç¾¤å€¼ï¼Œä»¥åŠâ€”â€”æœ¬ç¯‡æ–‡ç« çš„ä¸»è¦å†…å®¹â€”â€”**æ ‡ç­¾é”™è¯¯**ã€‚

æˆ‘ä¸ä¼šè¯¦ç»†ä»‹ç» CLï¼Œä½†æœ‰ä¸€ç¯‡[å¾ˆå¥½çš„æ–‡ç« ](/confident-learning-err-did-you-say-your-data-is-clean-ef2597903328)æ¶µç›–äº†å®ƒçš„ä¸»è¦è¦ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¥è‡ª **CleanLab** åˆ›å§‹äººçš„[YT è§†é¢‘](https://youtu.be/BnOTv0f9Msk)è°ˆè®ºå®ƒåœ¨è¯¥é¢†åŸŸçš„ç ”ç©¶ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹å®ƒåœ¨å®è·µä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

# æ•°æ®

æ•°æ®æ¥è‡ªå·´è¥¿ä¼—è®®é™¢å¼€æ”¾æ•°æ®é—¨æˆ·ï¼ŒåŒ…å« 1990 å¹´è‡³ 2022 å¹´çš„æ³•å¾‹ææ¡ˆï¼ˆLPï¼‰ã€‚æœ€ç»ˆçš„æ•°æ®é›†åŒ…å«çº¦ 60K LPsã€‚

å•ä¸ª LP å¯èƒ½ä¸å¤šä¸ªä¸»é¢˜ç›¸å…³ï¼Œä¾‹å¦‚å¥åº·å’Œé‡‘èï¼Œè¿™äº›ä¿¡æ¯ä¹Ÿå¯ä»¥åœ¨å¼€æ”¾æ•°æ®é—¨æˆ·ä¸­æ‰¾åˆ°ã€‚ä¸ºäº†æ›´æ–¹ä¾¿å¤„ç†ï¼Œæˆ‘é€šè¿‡å°†æ¯ä¸ªå•ç‹¬çš„ä¸»é¢˜äºŒå€¼åŒ–åˆ°å•ç‹¬çš„åˆ—ä¸­æ¥ç¼–ç ä¸»é¢˜ä¿¡æ¯ã€‚

å¦‚å‰æ‰€è¿°ï¼Œæœ¬ç¯‡æ–‡ç« ä½¿ç”¨çš„ä¸»é¢˜æ˜¯â€œ*è‡´æ•¬å’Œçºªå¿µæ—¥æœŸ*â€ã€‚æˆ‘é€‰æ‹©å®ƒæ˜¯å› ä¸ºå®ƒçš„ *ementas* éå¸¸ç®€çŸ­ä¸”ç®€å•ï¼Œå› æ­¤æ ‡ç­¾é”™è¯¯å¾ˆå®¹æ˜“è¯†åˆ«ã€‚

æ•°æ®å’Œä»£ç å¯ä»¥åœ¨[é¡¹ç›®çš„ GitHub ä»“åº“](https://github.com/jaumpedro214/data-analysis-camara-federal-pls)ä¸­æ‰¾åˆ°ã€‚

# å®ç°

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è‡ªåŠ¨ä¿®å¤â€œ*è‡´æ•¬å’Œçºªå¿µæ—¥æœŸ*â€ä¸­çš„æ¯ä¸€ä¸ªæ ‡ç­¾é”™è¯¯ï¼Œå¹¶ä½¿è¿™ä¸ªå¸–å­ä»¥ä¸€ä¸ªå¹²å‡€ã€æ•´æ´çš„æ•°æ®é›†ä½œä¸ºç»“æŸï¼Œå‡†å¤‡å¥½ç”¨äºæœºå™¨å­¦ä¹ é—®é¢˜ã€‚

## è®¾ç½®ç¯å¢ƒ

è¿è¡Œè¿™ä¸ªé¡¹ç›®æ‰€éœ€çš„æ˜¯ç»å…¸çš„ ML/Data Science Python åŒ…ï¼ˆPandas, Numpy å’Œ Scikit-Learnï¼‰+ CleanLab åŒ…ã€‚

```py
cleanlab==2.4.0
scikit-learn==1.2.2
pandas>=2.0.1
numpy>=1.20.3
```

åªéœ€å®‰è£…è¿™äº›è¦æ±‚ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹äº†ã€‚

## ä½¿ç”¨ CL æ£€æµ‹æ ‡ç­¾é”™è¯¯

CleanLab åŒ…è‡ªå¸¦è¯†åˆ«è®¸å¤šæ•°æ®é›†é—®é¢˜çš„èƒ½åŠ›ï¼Œå¦‚ç¦»ç¾¤å€¼å’Œé‡å¤/æ¥è¿‘é‡å¤çš„æ¡ç›®ï¼Œä½†æˆ‘ä»¬åªå¯¹ **æ ‡ç­¾é”™è¯¯** æ„Ÿå…´è¶£ã€‚

**CleanLab** ä½¿ç”¨ç”±æœºå™¨å­¦ä¹ æ¨¡å‹ç”Ÿæˆçš„æ¦‚ç‡ï¼Œè¿™äº›æ¦‚ç‡ä»£è¡¨äº†æ¡ç›®è¢«æ ‡è®°ä¸ºæŸä¸ªæ ‡ç­¾çš„ä¿¡å¿ƒã€‚å¦‚æœæ•°æ®é›†æœ‰ *n* ä¸ªæ¡ç›®å’Œ *m* ä¸ªç±»åˆ«ï¼Œé‚£ä¹ˆè¿™å°†ç”±ä¸€ä¸ª *n* x *m* çš„çŸ©é˜µ P è¡¨ç¤ºï¼Œå…¶ä¸­ P[i, j] ä»£è¡¨ç¬¬ *i* è¡Œå±äºç±»åˆ« *j* çš„æ¦‚ç‡ã€‚

è¿™äº›æ¦‚ç‡å’Œâ€œçœŸå®â€æ ‡ç­¾è¢«ç”¨åœ¨ CleanLab çš„å†…éƒ¨ä»¥ä¼°è®¡é”™è¯¯ã€‚

è®©æˆ‘ä»¬ç»ƒä¹ ä¸€ä¸‹ï¼š

*å¯¼å…¥åŒ…*

```py
import numpy as np
import pandas as pd

from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.ensemble import RandomForestClassifier

from sklearn.model_selection import train_test_split, cross_val_score, cross_val_predict
from sklearn.model_selection import GridSearchCV, StratifiedKFold
from sklearn.pipeline import Pipeline

from sklearn.metrics import accuracy_score, precision_score, recall_score, f1_score
from sklearn.metrics import confusion_matrix, classification_report

from cleanlab import Datalab

RANDOM_SEED = 214
np.random.seed(RANDOM_SEED)
```

*åŠ è½½æ•°æ®ä¸­â€¦*

```py
df_pls_theme = pd.read_parquet(
    '../../data/proposicoes_temas_one_hot_encoding.parquet'
)

#              "Tributes and commemorative dates"
BINARY_CLASS = "Homenagens e Datas Comemorativas"
IN_BINARY_CLASS = "in_" + BINARY_CLASS.lower().replace(" ", "_")

df_pls_theme = df_pls_theme.drop_duplicates(subset=["ementa"])
df_pls_theme = df_pls_theme[["ementa", BINARY_CLASS]]
df_pls_theme = df_pls_theme.rename(
    columns={BINARY_CLASS: IN_BINARY_CLASS}
)
```

é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç”Ÿæˆæ¦‚ç‡ã€‚

æ­£å¦‚ CleanLab æ–‡æ¡£ä¸­æåˆ°çš„ï¼Œä¸ºäº†å®ç°æ›´å¥½çš„æ€§èƒ½ï¼Œç”Ÿæˆçš„æ¦‚ç‡å¿…é¡» [åŸºäºæ ·æœ¬å¤–è®°å½•](https://docs.cleanlab.ai/stable/tutorials/pred_probs_cross_val.html#pred-probs-cross-val)ï¼ˆâ€˜éè®­ç»ƒâ€™æ•°æ®ï¼‰ã€‚è¿™æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºæ¨¡å‹åœ¨é¢„æµ‹è®­ç»ƒæ•°æ®ä¸Šçš„æ¦‚ç‡æ—¶ï¼Œé€šå¸¸ä¼šè¿‡äºè‡ªä¿¡ã€‚ç”Ÿæˆæ ·æœ¬å¤–æ¦‚ç‡çš„æœ€å¸¸ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨ K-Fold ç­–ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```py
y_proba = cross_val_predict(
    clean_pipeline, 
    df_pls_theme['ementa'], 
    df_pls_theme[IN_BINARY_CLASS],
    cv=StratifiedKFold(n_splits=5, shuffle=True, random_state=RANDOM_SEED), 
    method='predict_proba', 
    verbose=2,
    n_jobs=-1
)
```

> æ³¨æ„ï¼šé‡è¦çš„æ˜¯è¦äº†è§£ç±»åˆ«åˆ†å¸ƒ â€”â€” å› æ­¤ä½¿ç”¨äº† StratifiedKFold å¯¹è±¡ã€‚æ‰€é€‰ç±»åˆ«åœ¨æ•°æ®é›†ä¸­æ‰€å æ¯”ä¾‹ä¸è¶³ 5%ï¼Œä¸€ç§å¤©çœŸçš„é‡‡æ ·æ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹åœ¨ä¸æ­£ç¡®å¹³è¡¡çš„æ•°æ®é›†ä¸Šç”Ÿæˆä½è´¨é‡çš„æ¦‚ç‡ã€‚

CleanLab ä½¿ç”¨ä¸€ä¸ªåä¸º Datalab çš„ç±»æ¥å¤„ç†å…¶é”™è¯¯æ£€æµ‹ä»»åŠ¡ã€‚å®ƒæ¥æ”¶åŒ…å«æˆ‘ä»¬æ•°æ®çš„ DataFrame å’Œæ ‡ç­¾åˆ—çš„åç§°ã€‚

```py
lab = Datalab(
    data=df_pls_theme,
    label_name=IN_BINARY_CLASS,
)
```

ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€å°†å…ˆå‰è®¡ç®—çš„æ¦‚ç‡ä¼ é€’ç»™å®ƒâ€¦â€¦

```py
lab.find_issues(pred_probs=y_proba)
```

â€¦â€¦å¼€å§‹æŸ¥æ‰¾é—®é¢˜

```py
lab.get_issue_summary("label")
```

![](../Images/18b86c0c2d30b30543c431a2c24802a7.png)

å°±è¿™ä¹ˆç®€å•ã€‚

*get_issues*(â€labelâ€) å‡½æ•°è¿”å›ä¸€ä¸ª DataFrameï¼ŒåŒ…å« CleanLab ä¸ºæ¯æ¡è®°å½•è®¡ç®—çš„æŒ‡æ ‡å’ŒæŒ‡æ ‡ã€‚æœ€é‡è¦çš„åˆ—æ˜¯ â€˜*is_label_issue*â€™ å’Œ â€˜*predicted_label*â€™ï¼Œåˆ†åˆ«è¡¨ç¤ºè®°å½•æ˜¯å¦å­˜åœ¨æ ‡ç­¾é—®é¢˜ä»¥åŠå¯èƒ½çš„æ­£ç¡®æ ‡ç­¾ã€‚

```py
lab.get_issues("label")
```

æˆ‘ä»¬å¯ä»¥å°†è¿™äº›ä¿¡æ¯åˆå¹¶åˆ°åŸå§‹ DataFrame ä¸­ï¼Œä»¥æ£€æŸ¥å“ªäº›ç¤ºä¾‹æ˜¯æœ‰é—®é¢˜çš„ã€‚

```py
# Getting the predicted errors
y_clean_labels = lab.get_issues("label")[['predicted_label', 'is_label_issue']]

# adding them to the original dataset
df_ples_theme_clean = df_pls_theme.copy().reset_index(drop=True)
df_ples_theme_clean['predicted_label'] = y_clean_labels['predicted_label']
df_ples_theme_clean['is_label_issue'] = y_clean_labels['is_label_issue']
```

æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªä¾‹å­ï¼š

![](../Images/3860e3258b8a00fd1fdbe455d23c18ab.png)![](../Images/78d445cc8ecdad5f1e1925259f2b4547.png)

å¯¹æˆ‘æ¥è¯´ï¼Œè¿™äº›æ³•å¾‹æ˜¾ç„¶ä¸*è‡´æ•¬å’Œçºªå¿µæ—¥æœŸ*ç›¸å…³ï¼›ç„¶è€Œï¼Œå®ƒä»¬å¹¶æ²¡æœ‰è¢«é€‚å½“åœ°åˆ†ç±»ä¸ºè¿™äº›ã€‚

å¾ˆå¥½ï¼â€”â€” CleanLab èƒ½å¤Ÿåœ¨æˆ‘ä»¬çš„æ•°æ®é›†ä¸­æ‰¾åˆ° 312 ä¸ªæ ‡ç­¾é”™è¯¯ï¼Œä½†ç°åœ¨è¯¥æ€ä¹ˆåŠï¼Ÿ

è¿™äº›é”™è¯¯å¯ä»¥æ˜¯æ‰‹åŠ¨æ£€æŸ¥ä»¥è¿›è¡Œä¿®æ­£çš„å¯¹è±¡ï¼ˆä»¥ä¸»åŠ¨å­¦ä¹ çš„æ–¹å¼ï¼‰æˆ–ç«‹å³ä¿®æ­£ï¼ˆå‡è®¾ CleanLab åšå¾—å¯¹ï¼‰ã€‚å‰è€…æ›´è€—æ—¶ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´æ›´å¥½çš„ç»“æœï¼Œè€Œåè€…æ›´å¿«ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´æ›´å¤šé”™è¯¯ã€‚

æ— è®ºé€‰æ‹©å“ªæ¡è·¯å¾„ï¼ŒCleanLab éƒ½å°†è®°å½•çš„åŠ³åŠ¨é‡ä» 60K å‡å°‘åˆ°å‡ ç™¾æ¡ â€”â€” åœ¨æœ€åçš„æƒ…å†µä¸‹ã€‚

*ä½†æœ‰ä¸€ä¸ªé™·é˜±ã€‚*

æˆ‘ä»¬æ€ä¹ˆèƒ½ç¡®ä¿ CleanLab æ‰¾åˆ°äº†æ•°æ®é›†ä¸­çš„**æ‰€æœ‰**é”™è¯¯ï¼Ÿ

å®é™…ä¸Šï¼Œå¦‚æœæˆ‘ä»¬è¿è¡Œä¸Šè¿°ç®¡é“ï¼Œä½†å°†é”™è¯¯ä¿®æ­£ä¸ºçœŸå®æ ‡ç­¾ï¼ŒCleanLab å°†ä¼šå‘ç°æ›´å¤šé”™è¯¯â€¦â€¦

é”™è¯¯æ›´å¤šï¼Œä½†*å¸Œæœ›*æ¯”ç¬¬ä¸€æ¬¡è¿è¡Œçš„é”™è¯¯å°‘ã€‚

æˆ‘ä»¬å¯ä»¥é‡å¤è¿™ä¸ªé€»è¾‘ä»»æ„æ¬¡æ•°ï¼šæ‰¾å‡ºé”™è¯¯ï¼Œä¿®æ­£é”™è¯¯ï¼Œç”¨æ–°å‡å®šçš„æ›´é«˜è´¨é‡æ ‡ç­¾é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œå†æ¬¡æ‰¾å‡ºé”™è¯¯â€¦â€¦

![](../Images/10bf4f2f521ce9afa9cba9dd8aabecb2.png)

è¿­ä»£ä¿®æ­£é”™è¯¯ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚

å¸Œæœ›åœ¨ä¸€äº›äº¤äº’ä¹‹åï¼Œé”™è¯¯çš„æ•°é‡å°†ä¼šæ˜¯é›¶ã€‚

## ä½¿ç”¨ CleanLab è¿­ä»£ä¿®æ­£é”™è¯¯

è¦å®ç°è¿™ä¸ªæƒ³æ³•ï¼Œæˆ‘ä»¬åªéœ€åœ¨å¾ªç¯ä¸­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œä¸‹é¢çš„ä»£ç æ­£æ˜¯è¿™æ ·åšçš„ï¼š

è®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ã€‚

åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼ŒOOS æ¦‚ç‡æ˜¯æŒ‰ç…§ä¹‹å‰å±•ç¤ºçš„æ–¹å¼ç”Ÿæˆçš„ï¼šä½¿ç”¨*cross_val_predict*æ–¹æ³•å’ŒStratifiedKFoldã€‚å½“å‰çš„æ¦‚ç‡é›†ï¼ˆæ¯æ¬¡è¿­ä»£ä¸­ï¼‰ç”¨äºæ„å»ºä¸€ä¸ªæ–°çš„Datalabå¯¹è±¡å¹¶å‘ç°æ–°çš„æ ‡ç­¾é—®é¢˜ã€‚

å‘ç°çš„é—®é¢˜ä¸å½“å‰æ•°æ®é›†åˆå¹¶å¹¶ä¿®å¤ã€‚

æˆ‘é€‰æ‹©äº†å°†ä¿®å¤åçš„æ ‡ç­¾ä½œä¸ºæ–°åˆ—é™„åŠ çš„ç­–ç•¥ï¼Œè€Œä¸æ˜¯æ›¿æ¢åŸå§‹åˆ—ã€‚

![](../Images/8de06e839952d37d0a01ab1a3d2f79db.png)

é™„åŠ ä¿®å¤åçš„æ ‡ç­¾ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚

> LABEL_COLUMN_0 æ˜¯åŸå§‹æ ‡ç­¾ï¼ŒLABEL_COLUMN_1 æ˜¯ä¿®å¤1æ¬¡çš„æ ‡ç­¾åˆ—ï¼ŒLABEL_COLUMN_2 æ˜¯ä¿®å¤2æ¬¡çš„æ ‡ç­¾åˆ—ï¼Œä»¥æ­¤ç±»æ¨â€¦â€¦

é™¤äº†è¿™ä¸ªè¿‡ç¨‹ä¹‹å¤–ï¼Œè¿˜è®¡ç®—å¹¶å­˜å‚¨äº†å¸¸è§„åˆ†ç±»æŒ‡æ ‡ï¼Œä»¥å¤‡åç»­æ£€æŸ¥ã€‚

ç»è¿‡8æ¬¡äº’åŠ¨ï¼ˆçº¦16åˆ†é’Ÿï¼‰ï¼Œè¿‡ç¨‹å®Œæˆäº†ã€‚

# ç»“æœ

ä¸‹è¡¨æ˜¾ç¤ºäº†åœ¨è¿‡ç¨‹ä¸­çš„æ€§èƒ½æŒ‡æ ‡ã€‚

![](../Images/4703adfb83c3b6e815df7719203e2aef.png)

åœ¨8æ¬¡è¿­ä»£ä¸­ï¼Œæ•°æ®é›†ä¸­å‘ç°äº†æ€»è®¡**393ä¸ªæ ‡ç­¾é”™è¯¯**ã€‚æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œå‘ç°çš„é”™è¯¯æ•°é‡éšç€æ¯æ¬¡è¿­ä»£çš„å¢åŠ è€Œå‡å°‘ã€‚

æœ‰è¶£çš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹åœ¨ä»…ä»…6æ¬¡è¿­ä»£ä¸­å°±èƒ½å¤Ÿâ€œæ”¶æ•›â€åˆ°ä¸€ä¸ªâ€œè§£å†³æ–¹æ¡ˆâ€â€”â€”åœ¨æœ€å2æ¬¡è¿­ä»£ä¸­é”™è¯¯æ•°ä¿æŒä¸º0ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¿¹è±¡ï¼Œè¯´æ˜åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒCleanLabçš„å®ç°æ˜¯ç¨³å¥çš„ï¼Œå¹¶ä¸”æ²¡æœ‰å‘ç°ä»»ä½•å¯èƒ½å¯¼è‡´æŒ¯è¡çš„â€˜å¶ç„¶â€™é”™è¯¯ã€‚

å°½ç®¡é”™è¯¯çš„æ•°é‡ä»…å æ•°æ®é›†çš„0.6%ï¼Œf1åˆ†æ•°ä»0.81æé«˜åˆ°äº†0.90ï¼Œçº¦11%ã€‚è¿™å¯èƒ½æ˜¯ç”±äºç±»åˆ«é«˜åº¦ä¸å¹³è¡¡ï¼Œå› ä¸ºæ–°çš„322ä¸ªæ­£æ ‡ç­¾æ€»å…±å åŸå§‹æ­£æ ·æœ¬çš„çº¦12%ã€‚

ä½†CleanLabçœŸçš„èƒ½å¤Ÿå‘ç°æœ‰æ„ä¹‰çš„é”™è¯¯å—ï¼Ÿè®©æˆ‘ä»¬æ£€æŸ¥å‡ ä¸ªä¾‹å­çœ‹çœ‹å®ƒä»¬æ˜¯å¦æœ‰æ„ä¹‰ã€‚

**å‡é˜´æ€§å·²ä¿®å¤**

![](../Images/3cd56b85d5a050f44f03bbfaa5af56e4.png)

åŸå§‹æ€»ç»“å’ŒChatGPTçš„é€å­—ç¿»è¯‘ â€” II. å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚

ä¸Šè¿°æ–‡æœ¬ç¡®å®ç±»ä¼¼äºâ€œè‡´æ•¬å’Œçºªå¿µæ—¥æœŸâ€ï¼Œè¿™è¡¨æ˜å®ƒä»¬åº”è¯¥è¢«é€‚å½“åœ°åˆ†ç±»ä¸ºæ­¤ç±» â€” æŒ‡å‘CleanLab

**å‡é˜³æ€§å·²ä¿®å¤**

![](../Images/b6e491d0925dc75bee1219f14afc62bb.png)

åŸå§‹æ€»ç»“å’ŒChatGPTçš„é€å­—ç¿»è¯‘ â€” III. å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬æœ‰ä¸€äº›é”™è¯¯ï¼Œç¬¬2å’Œç¬¬4æ¡è§„åˆ™ä¸æ˜¯å‡é˜³æ€§ã€‚è™½ç„¶ä¸æ˜¯å¾ˆå¥½ï¼Œä½†è¿˜ç®—å¯ä»¥ã€‚

æˆ‘é‡å¤è¿›è¡Œäº†è¿™ä¸ªæ£€æŸ¥é‡‡æ ·æ–°â€˜å›ºå®šâ€™è§„åˆ™çš„æ“ä½œå‡ æ¬¡ï¼Œæ€»çš„æ¥è¯´ï¼ŒCleanLabåœ¨æ£€æµ‹å‡é˜´æ€§æ–¹é¢è¡¨ç°å‡ ä¹å®Œç¾ï¼Œä½†å¯¹å‡é˜³æ€§æœ‰ç‚¹å›°æƒ‘ã€‚

ç°åœ¨ï¼Œå³ä½¿æˆ‘ä»¬å¯èƒ½æ²¡æœ‰ä¸€ä¸ª*å®Œç¾*æ ‡è®°çš„æ•°æ®é›†ï¼Œæˆ‘ä¹Ÿæ›´**è‡ªä¿¡**ç°åœ¨ç”¨å®ƒæ¥è®­ç»ƒæœºå™¨**å­¦ä¹ **æ¨¡å‹äº†ã€‚

# ç»“è®º

æœºå™¨å­¦ä¹ é¢†åŸŸé•¿æœŸä»¥æ¥å—å›°äºæ¨¡å‹è´¨é‡å·®å’Œè®¡ç®—èƒ½åŠ›ä¸è¶³ï¼Œä½†è¿™ç§æƒ…å†µå·²ç»è¿‡å»ã€‚ç°åœ¨ï¼Œå¤§å¤šæ•°æœºå™¨å­¦ä¹ åº”ç”¨çš„çœŸæ­£ç“¶é¢ˆæ˜¯æ•°æ®ã€‚ä¸æ˜¯åŸå§‹æ•°æ®ï¼Œè€Œæ˜¯ç»è¿‡ç²¾ç‚¼çš„æ•°æ®â€”â€”å…·æœ‰è‰¯å¥½æ ‡ç­¾ã€æ ¼å¼è§„èŒƒã€å™ªéŸ³æˆ–å¼‚å¸¸å€¼è¾ƒå°‘çš„æ•°æ®ã€‚

å› ä¸ºæ— è®ºæ¨¡å‹å¤šä¹ˆåºå¤§å’Œå¼ºå¤§ï¼Œæ— è®ºä½ åœ¨ç®¡é“ä¸­æ··å…¥å¤šå°‘ç»Ÿè®¡å’Œæ•°å­¦ï¼Œè¿™äº›éƒ½æ— æ³•æ‹¯æ•‘ä½ å…äºè®¡ç®—æœºç§‘å­¦çš„æœ€åŸºæœ¬æ³•åˆ™ï¼šåƒåœ¾è¿›ï¼Œåƒåœ¾å‡ºã€‚

è¿™ä¸ªé¡¹ç›®è§è¯äº†è¿™ä¸€åŸåˆ™â€”â€”æˆ‘æµ‹è¯•äº†å‡ ä¸ªæ¨¡å‹ã€æ·±åº¦å­¦ä¹ æ¶æ„ã€é‡‡æ ·æŠ€æœ¯å’Œå‘é‡åŒ–æ–¹æ³•ï¼Œæœ€ç»ˆå‘ç°é—®é¢˜å‡ºåœ¨åŸºç¡€ä¸Šï¼šæˆ‘çš„æ•°æ®æ˜¯é”™è¯¯çš„ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŠ•èµ„äºæ•°æ®è´¨é‡æŠ€æœ¯æˆä¸ºåˆ›å»ºæˆåŠŸæœºå™¨å­¦ä¹ é¡¹ç›®çš„å…³é”®æ–¹é¢ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº† CleanLabï¼Œè¿™ä¸ªåŒ…å¸®åŠ©æˆ‘ä»¬æ£€æµ‹å’Œä¿®å¤æ•°æ®é›†ä¸­çš„é”™è¯¯æ ‡ç­¾ã€‚å®ƒä¸ä»…æ˜¾è‘—æé«˜äº†æ•°æ®é›†çš„è´¨é‡ï¼Œè€Œä¸”ä»¥è‡ªåŠ¨ã€å¯é‡å¤ä¸”å»‰ä»·çš„æ–¹å¼å®Œæˆâ€”â€”æ— éœ€äººå·¥å¹²é¢„ã€‚

æˆ‘å¸Œæœ›è¿™ä¸ªé¡¹ç›®èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è‡ªä¿¡å­¦ä¹ å’Œ CleanLab åŒ…ã€‚æ­£å¦‚å¾€å¸¸ä¸€æ ·ï¼Œæˆ‘å¹¶ä¸æ˜¯è¿™äº›ä¸»é¢˜çš„ä¸“å®¶ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ è¿›ä¸€æ­¥é˜…è¯»ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å‚è€ƒæ–‡çŒ®ã€‚

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼ğŸ˜‰

# å‚è€ƒæ–‡çŒ®

> æ‰€æœ‰ä»£ç éƒ½å¯ä»¥åœ¨[è¿™ä¸ª GitHub ä»“åº“](https://github.com/jaumpedro214/data-analysis-camara-federal-pls)ä¸­æ‰¾åˆ°ã€‚
> 
> ä½¿ç”¨çš„æ•°æ® â€” [å¼€æ”¾æ•°æ®é—¨æˆ·è”é‚¦è®®ä¼š](https://dadosabertos.camara.leg.br/faq/faq-home.html#r14). [å¼€æ”¾æ•°æ® â€” æ³•å¾‹ nÂº 12.527]
> 
> é™¤éå¦æœ‰è¯´æ˜ï¼Œæ‰€æœ‰å›¾åƒå‡ç”±ä½œè€…åˆ›å»ºã€‚

[1] Cleanlab. (æ— æ—¥æœŸ). *GitHub â€” cleanlab/cleanlab: æ ‡å‡†çš„æ•°æ®ä¸­å¿ƒ AI åŒ…ï¼Œç”¨äºå¤„ç†æ··ä¹±çš„çœŸå®ä¸–ç•Œæ•°æ®å’Œæ ‡ç­¾çš„æ•°æ®è´¨é‡å’Œæœºå™¨å­¦ä¹ ã€‚* [GitHub](https://github.com/cleanlab/cleanlab).

[2][*è®¡ç®—æ ·æœ¬å¤–é¢„æµ‹æ¦‚ç‡çš„äº¤å‰éªŒè¯*](https://docs.cleanlab.ai/stable/tutorials/pred_probs_cross_val.html#pred-probs-cross-val) *â€” cleanlab*. (æ— æ—¥æœŸ).

[3] Databricks. (2022å¹´7æœˆ19æ—¥). *CleanLab: ç”¨äºå‘ç°å’Œä¿®å¤ ML æ•°æ®é›†ä¸­çš„é”™è¯¯çš„ AI* [è§†é¢‘]. [YouTube](https://www.youtube.com/watch?v=BnOTv0f9Msk).

[4][*å¸¸è§é—®é¢˜*](https://docs.cleanlab.ai/stable/tutorials/faq.html) *â€” cleanlab*. (æ— æ—¥æœŸ).

[5] Mall, S. (2023å¹´5æœˆ25æ—¥). æ ‡ç­¾é”™è¯¯æ˜¯å¦ä¸å¯é¿å…ï¼Ÿè‡ªä¿¡å­¦ä¹ æ˜¯å¦æœ‰ç”¨ï¼Ÿ[*Medium*](/confident-learning-err-did-you-say-your-data-is-clean-ef2597903328).

[6] Northcutt, C. G. (2021). *è‡ªä¿¡å­¦ä¹ ï¼šä¼°è®¡æ•°æ®é›†æ ‡ç­¾çš„ä¸ç¡®å®šæ€§*. [arXiv.org](https://arxiv.org/abs/1911.00068).
