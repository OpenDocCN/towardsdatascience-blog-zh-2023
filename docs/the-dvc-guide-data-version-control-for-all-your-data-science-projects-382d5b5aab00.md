# DVC æŒ‡å—ï¼šæ‰€æœ‰æ•°æ®ç§‘å­¦é¡¹ç›®çš„æ•°æ®ç‰ˆæœ¬æ§åˆ¶

> åŸæ–‡ï¼š[`towardsdatascience.com/the-dvc-guide-data-version-control-for-all-your-data-science-projects-382d5b5aab00`](https://towardsdatascience.com/the-dvc-guide-data-version-control-for-all-your-data-science-projects-382d5b5aab00)

## ä½¿æ•°æ®ç‰ˆæœ¬æ§åˆ¶ä¸ä»£ç ç‰ˆæœ¬æ§åˆ¶ä¸€æ ·ç†Ÿæ‚‰

[](https://ipom.medium.com/?source=post_page-----382d5b5aab00--------------------------------)![Yash Prakash](https://ipom.medium.com/?source=post_page-----382d5b5aab00--------------------------------)[](https://towardsdatascience.com/?source=post_page-----382d5b5aab00--------------------------------)![Towards Data Science](https://towardsdatascience.com/?source=post_page-----382d5b5aab00--------------------------------) [Yash Prakash](https://ipom.medium.com/?source=post_page-----382d5b5aab00--------------------------------)

Â·å‘è¡¨äº[Towards Data Science](https://towardsdatascience.com/?source=post_page-----382d5b5aab00--------------------------------) Â·6 åˆ†é’Ÿé˜…è¯»Â·2023 å¹´ 2 æœˆ 17 æ—¥

--

![](img/aa7bec53d0532117c63382ccdc27c733.png)

å›¾ç‰‡ç”±[Dmitri Sobolevski](https://unsplash.com/@dbrenan?utm_source=medium&utm_medium=referral)æä¾›ï¼Œæ¥æºäº[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

ä½œä¸ºæ•°æ®ç§‘å­¦å®¶ï¼Œæˆ‘ä»¬å¯¹ä¸åŒç‰ˆæœ¬çš„ä»£ç ã€æ¨¡å‹å’Œæ•°æ®è¿›è¡Œå®éªŒã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ç”šè‡³ä½¿ç”¨åƒ Git è¿™æ ·çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ¥ç®¡ç†æˆ‘ä»¬çš„ä»£ç ã€è·Ÿè¸ªç‰ˆæœ¬ã€å‰è¿›å’Œåé€€ï¼Œå¹¶ä¸å›¢é˜Ÿåˆ†äº«æˆ‘ä»¬çš„ä»£ç ã€‚

ä»£ç çš„ç‰ˆæœ¬æ§åˆ¶å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºåœ¨æ›´å¤§è§„æ¨¡ä¸Šé‡ç°è½¯ä»¶ã€‚æ•°æ®çš„ç‰ˆæœ¬æ§åˆ¶ä¹‹æ‰€ä»¥é‡è¦ï¼Œæ˜¯å› ä¸ºå®ƒæœ‰åŠ©äºåœ¨ä»»ä½•æ—¶é—´ç‚¹ç”±å›¢é˜Ÿæˆ–ç»„ç»‡ä¸­çš„ä»»ä½•å¼€å‘äººå‘˜ä½¿ç”¨ç›¸ä¼¼çš„æŒ‡æ ‡å¼€å‘æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚

å› æ­¤ï¼Œç‰ˆæœ¬æ§åˆ¶ä½ çš„æ¨¡å‹å’Œæ•°æ®è‡³å…³é‡è¦ã€‚ä½†ç»éªŒä¸°å¯Œçš„è½¯ä»¶å·¥ç¨‹å¸ˆä¼šçŸ¥é“ï¼Œä½¿ç”¨ Git æ¥å­˜å‚¨å¤§æ–‡ä»¶æ˜¯ä¸€ä¸ªå¤§å¿Œã€‚

Git ä¸ä»…åœ¨å¤„ç†å¤§æ–‡ä»¶æ—¶æ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”ä¹Ÿä¸æ˜¯å­˜å‚¨å¤§æ•°æ®æ–‡ä»¶çš„æ ‡å‡†åŒ–ç¯å¢ƒã€‚å¤§å¤šæ•°æ•°æ®å­˜å‚¨åœ¨ AWS S3 æ¡¶ã€Google Cloud Storage æˆ–ä»»ä½•æœºæ„çš„è¿œç¨‹å­˜å‚¨æœåŠ¡å™¨ä¸Šã€‚

é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å¯¹æ•°æ®è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å‘¢ï¼Ÿè¿™å°±å¼•å‡ºäº† DVCã€‚

# ä»‹ç» DVC

[DVC](https://dvc.org)æ˜¯ä¸€ä¸ªæ•°æ®ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¸ Git å¯†åˆ‡é…åˆä»¥è·Ÿè¸ªæˆ‘ä»¬çš„æ•°æ®æ–‡ä»¶ã€‚å®ƒç”šè‡³æœ‰ç±»ä¼¼äº Git çš„è¯­æ³•ï¼Œæ‰€ä»¥å­¦ä¹ èµ·æ¥ç›¸å½“å®¹æ˜“ã€‚

è®©æˆ‘ä»¬åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ·±å…¥äº†è§£ DVC çš„ä¸€äº›ä¼˜ç§€æ•°æ®ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ã€‚ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æ–‡ä»¶å¤¹å’Œè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶å°†å…¶ä½œä¸º Python åŒ…è¿›è¡Œå®‰è£…ï¼š

```py
$ pip install "dvc[all]"
```

æˆ–è€…å¦‚æœä½ ä½¿ç”¨*Pipenv*ï¼š

```py
$ pipenv shell
$ pipenv install "dvc[all]"
```

ä½ åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š

![](img/b9b8b57ca2672a94e65aa4b85cf865d9.png)

å®‰è£… DVCï¼šå›¾ç‰‡æ¥è‡ªä½œè€…

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ª git ä»“åº“ã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

![](img/c96c7a9a88bfe91f4d0a1c51fd61c5ba.png)

dvc initï¼šä½œè€…æä¾›çš„å›¾åƒ

å®Œç¾ï¼æˆ‘ä»¬ç°åœ¨å¯ä»¥ç»§ç»­å°†æ•°æ®æ·»åŠ åˆ° DVC ä¸­ã€‚

# å°†æ•°æ®æ·»åŠ  + æäº¤åˆ° DVC

æˆ‘åœ¨é¡¹ç›®çš„æ•°æ®æ–‡ä»¶å¤¹ä¸­æœ‰ä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](img/e838e5531e935e153da30b8420c41afd.png)

æ–‡ä»¶å¤¹ç»“æ„ï¼šä½œè€…æä¾›çš„å›¾åƒ

è¦ä»ç»ˆç«¯è¿è¡Œå¤§å°æ£€æŸ¥ï¼Œè¯·ä½¿ç”¨ï¼š

```py
$ ls -lh data
```

ä½ å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œæ•°æ®æ–‡ä»¶æ˜¾ç¤ºä¸º 5.2 MBã€‚

![](img/05bbd67a72b64ed0d2c0653052293422.png)

æ•°æ®æ–‡ä»¶æ£€æŸ¥ï¼šä½œè€…æä¾›çš„å›¾åƒ

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ•°æ®æ–‡ä»¶æ·»åŠ åˆ° DVCã€‚è¿è¡Œï¼š

```py
$ dvc add data/train_shakespeare.txt
```

ä½ å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œæç¤ºæˆ‘ä»¬è¿è¡Œ git add å‘½ä»¤ï¼š

![](img/f437384afb28e9508876ad1da4377750.png)

dvc æ·»åŠ çš„æ•°æ®ï¼šä½œè€…æä¾›çš„å›¾åƒ

æˆ‘ä»¬ç°åœ¨å°†è¿è¡Œ git add å‘½ä»¤ï¼š

```py
$ git add data/train_shakespeare.txt.dvc data/.gitignore
```

ç°åœ¨æˆ‘ä»¬å·²ç»å°†æ–°çš„ **.dvc** æ–‡ä»¶æ·»åŠ åˆ°æˆ‘ä»¬çš„ git è·Ÿè¸ªä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æäº¤å®ƒåˆ°æˆ‘ä»¬çš„ gitï¼š

```py
$ git commit -m "added data."
```

# ä¸ºæˆ‘ä»¬çš„æ•°æ®è®¾ç½®è¿œç¨‹å­˜å‚¨

æˆ‘ä»¬å¯ä»¥ç®€å•åœ°åˆ©ç”¨ Google Drive å­˜å‚¨æˆ‘ä»¬çš„ç‰ˆæœ¬åŒ–æ•°æ®é›†ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­æˆ‘ä»¬å°†æ­£æ˜¯è¿™æ ·åšã€‚

è®©æˆ‘ä»¬åœ¨ Google Drive ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œå¹¶æŸ¥çœ‹å…¶ URLï¼š

https://drive.google.com/drive/u/0/folders/**cVtFRMoZKxe5iNMd-K_T50Ie**

ç²—ä½“çªå‡ºæ˜¾ç¤ºçš„æ˜¯æˆ‘ä»¬æƒ³è¦å¤åˆ¶åˆ°ç»ˆç«¯çš„æ–‡ä»¶å¤¹ IDï¼Œä»¥ä¾¿ DVC å¯ä»¥åœ¨æ–°åˆ›å»ºçš„ Drive æ–‡ä»¶å¤¹ä¸­è·Ÿè¸ªæˆ‘ä»¬çš„æ•°æ®ã€‚

è®©æˆ‘ä»¬æ¥åšï¼š

```py
$ dvc remote add -d storage gdrive://cVtFRMoZKxe5iNMd-K_T50Ie
```

ç°åœ¨æ˜¯å°†æˆ‘ä»¬çš„æ›´æ”¹æäº¤åˆ° git çš„æ—¶å€™äº†ï¼š

```py
$ git commit .dvc/config -m "Configured remote storage."
```

å®Œç¾ï¼ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†æ•°æ®æ¨é€åˆ°è¿œç¨‹å­˜å‚¨ã€‚

```py
$ dvc push 
```

å®ƒä¼šè¦æ±‚è¾“å…¥è®¤è¯ä»£ç ï¼Œæˆ–ç›´æ¥å¸¦ä½ åˆ°æµè§ˆå™¨è¿›è¡Œè®¤è¯ï¼Œåªéœ€æŒ‰ç…§æŒ‡ç¤ºæ“ä½œå³å¯ã€‚

![](img/fff1a9ef0fec6025ca9d27e0aaa87659.png)

Google Drive ä¸­çš„è¿œç¨‹æ•°æ®ï¼šä½œè€…æä¾›çš„å›¾åƒ

# æ‹‰å–è¿œç¨‹æ•°æ®

å¦‚æœä½ æˆ–ä½ çš„åŒäº‹æƒ³è¦è®¿é—®è¿œç¨‹å­˜å‚¨çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ **pull** å‘½ä»¤å®Œæˆã€‚

ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ é™¤æœ¬åœ°å­˜å‚¨çš„æ•°æ®åŠå…¶ç¼“å­˜ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä»è¿œç¨‹æ‹‰å–ï¼š

```py
$ rm -f data/train_shakespeare.txt
$ rm -rf .dvc/cache
```

ç°åœ¨ï¼Œæ‹‰å–ï¼š

```py
$ dvc pull
```

ä½ ä¼šçœ‹åˆ°æ‹‰å–æ–‡ä»¶æ—¶çš„ä»¥ä¸‹è¾“å‡ºï¼š

![](img/d17d702a154b18599c940c5ae5b805fb.png)

ä»è¿œç¨‹æ‹‰å–æ–‡ä»¶ï¼šä½œè€…æä¾›çš„å›¾åƒ

å¦‚ä½ æ‰€è§ï¼Œä¸€æ—¦ dvc è¿½è¸ªä½ çš„æ•°æ®æ–‡ä»¶ï¼Œä»è¿œç¨‹å­˜å‚¨æ‹‰å–å®ƒå°±å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚

# è·Ÿè¸ªæ•°æ®çš„ä¸åŒç‰ˆæœ¬

æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è·Ÿè¸ªåŒä¸€ä¸ªæ•°æ®æ–‡ä»¶çš„æ–°ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å°†å…¶æ·»åŠ åˆ° dvcï¼Œç„¶åå†æ¬¡æ·»åŠ åˆ° gitï¼š

```py
$ dvc add data/train_shakespeare.txt
$ git add data/train_shakespeare.txt.dvc
```

ç°åœ¨ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°çš„ .dvc æ–‡ä»¶ç‰ˆæœ¬å‡†å¤‡æäº¤åˆ°æˆ‘ä»¬çš„ gitï¼š

![](img/37ec787d81997a55690f131ce9f9c40d.png)

æäº¤æ–°çš„ .dvc æ–‡ä»¶æ›´æ”¹ï¼šä½œè€…æä¾›çš„å›¾åƒ

æäº¤æ–‡ä»¶ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ€æ–°çš„æ•°æ®é›†æ¨é€åˆ°è¿œç¨‹å­˜å‚¨ï¼š

```py
$ dvc push
```

æŸ¥çœ‹æˆ‘ä»¬çš„ Google Driveï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ‰ä¸¤ä¸ªç‰ˆæœ¬çš„æ•°æ®å­˜å‚¨ï¼š

![](img/749828eabe216a3fc9d8c3d32981bace.png)

Google Drive æ•°æ®ç‰ˆæœ¬ï¼šä½œè€…æä¾›çš„å›¾åƒ

# è¿”å›åˆ°ä¸åŒçš„æ•°æ®é›†ç‰ˆæœ¬

ä½¿ç”¨ DVCï¼Œå›åˆ°æ•°æ®é›†çš„æ—§ç‰ˆæœ¬å˜å¾—å®¹æ˜“ã€‚

å¦‚æœæˆ‘ä»¬æŸ¥çœ‹åˆ°ç›®å‰ä¸ºæ­¢é¡¹ç›®çš„ git logï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æˆ‘ä»¬å·²ç»å°†ä¸¤ä¸ª **.dvc** æ–‡ä»¶ç‰ˆæœ¬æäº¤åˆ° gitï¼š

![](img/5b94cc24b8689d288570d1a91dd95968.png)

å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»è¿”å›åˆ°ä¹‹å‰çš„**.dvc**æ–‡ä»¶ç‰ˆæœ¬ï¼Œå› ä¸ºè¿™æ˜¯ git æ­£åœ¨è·Ÿè¸ªçš„ç‰ˆæœ¬ã€‚

é¦–å…ˆï¼Œç®€å•åœ°æ‰§è¡Œ Git checkout åˆ°è¾ƒæ—§çš„æäº¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```py
$ git checkout HEATÂ¹ data/train_shakespeare.txt.dvc 
```

ç¬¬äºŒæ­¥ï¼Œè¿›è¡Œ dvc çš„ checkoutï¼š

```py
$ dvc checkout
```

ä½ ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºã€‚æˆ‘ä»¬ç°åœ¨å·²ç»å°†æ•°æ®æ–‡ä»¶æ¢å¤åˆ°ä¹‹å‰çš„ç‰ˆæœ¬äº†ï¼

![](img/02287fd41f79a4b4cc1f503f2fbd0857.png)

æ¢å¤æ•°æ®åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼šæ¥è‡ªä½œè€…çš„å›¾åƒ

æ­¤å¤–ï¼Œå¦‚æœä½ æƒ³ä¿ç•™è¿™äº›æ•°æ®é›†æ›´æ”¹ï¼Œåªéœ€å†æ¬¡æäº¤åˆ° gitï¼š

```py
$ git commit data/train_shakespeare.txt.dvc -m "reverted data changes."
```

å®Œç¾ï¼åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å­¦ä¹ äº† DVC çš„å¤§éƒ¨åˆ†åŸºæœ¬æ•°æ®ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ã€‚å¹²å¾—å¥½ï¼

# æœ€åçš„è¯â€¦

DVC åœ¨æ•°æ®ç§‘å­¦é¡¹ç›®çš„æ•°æ®ç‰ˆæœ¬æ§åˆ¶ä¸­æä¾›äº†å·¨å¤§çš„å¸®åŠ©ï¼Œå¸Œæœ›ä½ åœ¨é˜…è¯»å®Œè¿™ç¯‡æ–‡ç« åï¼Œèƒ½å¯¹å¦‚ä½•å¼€å§‹ä½¿ç”¨ DVC æœ‰ä¸€äº›æœ‰ç”¨çš„äº†è§£ã€‚

åœ¨ä¸€äº›ç¤ºä¾‹é¡¹ç›®ä¸­è¿›è¡Œå®è·µï¼Œå¹¶æ¢ç´¢ DVC æ–‡æ¡£ï¼Œå°†æ˜¯æå‡ä½ ä½¿ç”¨è¿™ä¸ªæƒŠäººå·¥å…·çš„æŠ€èƒ½çš„æœ€ä½³æ–¹æ³•ã€‚

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæ¯å‘¨æˆ‘éƒ½ä¼šå‘å¸ƒä¸€ç¯‡æ•…äº‹ï¼Œåœ¨å…¶ä¸­åˆ†äº«æ¥è‡ªæ•°æ®ç§‘å­¦å’Œç¼–ç¨‹é¢†åŸŸçš„å°çŸ¥è¯†ã€‚[å…³æ³¨æˆ‘ï¼Œç»ä¸é”™è¿‡ï¼](https://ipom.medium.com) ğŸ˜„

ä½ ä¹Ÿå¯ä»¥åœ¨[LinkedIn](https://www.linkedin.com/in/yashprakash13/)å’Œ[Twitter](https://twitter.com/csandyash)ä¸Šä¸æˆ‘è”ç³»ã€‚

ä½ å¯èƒ½ä¼šå–œæ¬¢çš„å¦å¤–å‡ ç¯‡æ–‡ç« ï¼š

[## å¯é‡ç”¨çš„ Python æ—¥å¿—æ¨¡æ¿ï¼Œé€‚ç”¨äºæ‰€æœ‰æ•°æ®ç§‘å­¦åº”ç”¨](https://towardsdatascience.com/the-reusable-python-logging-template-for-all-your-data-science-apps-551697c8540?source=post_page-----382d5b5aab00--------------------------------) [## ä½¿ç”¨ Docker Compose å’Œ GitHub Actions çš„ç®€å• Python CI/CD ç®¡é“](https://towardsdatascience.com/the-easy-python-ci-cd-pipeline-using-docker-compose-and-github-actions-80498f47b341?source=post_page-----382d5b5aab00--------------------------------)

[## ä½¿ç”¨ Docker Compose å’Œ GitHub Actions çš„ç®€å• Python CI/CD ç®¡é“](https://towardsdatascience.com/the-easy-python-ci-cd-pipeline-using-docker-compose-and-github-actions-80498f47b341?source=post_page-----382d5b5aab00--------------------------------) [## å¯é‡ç”¨çš„ Python æ—¥å¿—æ¨¡æ¿ï¼Œé€‚ç”¨äºæ‰€æœ‰æ•°æ®ç§‘å­¦åº”ç”¨](https://towardsdatascience.com/the-reusable-python-logging-template-for-all-your-data-science-apps-551697c8540?source=post_page-----382d5b5aab00--------------------------------)

### åœ¨ VPS ä¸ŠæŒç»­éƒ¨ç½²ä¸€ä¸ªå®é™…é¡¹ç›®

[## ä½¿ç”¨ Docker Compose å’Œ GitHub Actions çš„ç®€å• Python CI/CD ç®¡é“](https://towardsdatascience.com/the-easy-python-ci-cd-pipeline-using-docker-compose-and-github-actions-80498f47b341?source=post_page-----382d5b5aab00--------------------------------)
