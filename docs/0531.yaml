- en: 'Monitoring Machine Learning Models: A fundamental practice for data scientists
    and machine learning engineers'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控机器学习模型：数据科学家和机器学习工程师的基础实践
- en: 原文：[https://towardsdatascience.com/monitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878?source=collection_archive---------10-----------------------#2023-02-06](https://towardsdatascience.com/monitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878?source=collection_archive---------10-----------------------#2023-02-06)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/monitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878?source=collection_archive---------10-----------------------#2023-02-06](https://towardsdatascience.com/monitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878?source=collection_archive---------10-----------------------#2023-02-06)
- en: A beginner’s guide on monitoring machine learning models
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 初学者监控机器学习模型指南
- en: '[](https://pawarsaurav842.medium.com/?source=post_page-----c45b0979a878--------------------------------)[![Saurav
    Pawar](../Images/7f1e9ff4cbc01ea22879e86b0444f1b8.png)](https://pawarsaurav842.medium.com/?source=post_page-----c45b0979a878--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c45b0979a878--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c45b0979a878--------------------------------)
    [Saurav Pawar](https://pawarsaurav842.medium.com/?source=post_page-----c45b0979a878--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://pawarsaurav842.medium.com/?source=post_page-----c45b0979a878--------------------------------)[![Saurav
    Pawar](../Images/7f1e9ff4cbc01ea22879e86b0444f1b8.png)](https://pawarsaurav842.medium.com/?source=post_page-----c45b0979a878--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c45b0979a878--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c45b0979a878--------------------------------)
    [Saurav Pawar](https://pawarsaurav842.medium.com/?source=post_page-----c45b0979a878--------------------------------)'
- en: ·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F23bab6a33c37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878&user=Saurav+Pawar&userId=23bab6a33c37&source=post_page-23bab6a33c37----c45b0979a878---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c45b0979a878--------------------------------)
    ·15 min read·Feb 6, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc45b0979a878&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878&user=Saurav+Pawar&userId=23bab6a33c37&source=-----c45b0979a878---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F23bab6a33c37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878&user=Saurav+Pawar&userId=23bab6a33c37&source=post_page-23bab6a33c37----c45b0979a878---------------------post_header-----------)
    发表在 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c45b0979a878--------------------------------)
    ·15 分钟阅读·2023年2月6日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fc45b0979a878&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878&user=Saurav+Pawar&userId=23bab6a33c37&source=-----c45b0979a878---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc45b0979a878&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878&source=-----c45b0979a878---------------------bookmark_footer-----------)![](../Images/b724235039409778bca1ea4be9266e03.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc45b0979a878&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-machine-learning-models-a-tried-and-true-cure-for-a-data-scientists-insomnia-c45b0979a878&source=-----c45b0979a878---------------------bookmark_footer-----------)![](../Images/b724235039409778bca1ea4be9266e03.png)'
- en: Photo by [Nathan Dumlao](https://unsplash.com/@nate_dumlao?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由 [Nathan Dumlao](https://unsplash.com/@nate_dumlao?utm_source=medium&utm_medium=referral)
    提供，来源于 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Machine learning falls under the umbrella of artificial intelligence. It focuses
    on creating and developing algorithms that can analyze data, draw conclusions,
    and make predictions. Organizations in the banking and financial services industries
    can use the many insights obtained by machine learning technology to assist them
    make decisions in the future. An illustration of this may be a machine learning
    model that assigns risk scores to vehicle loan applicants by utilising various
    data sources for client applications. In order to assist banks in rethinking or
    adjusting terms for each consumer, these algorithms may then readily forecast
    the clients who are at risk of defaulting on their vehicle loans.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习属于人工智能的范畴。它专注于创建和开发能够分析数据、得出结论和进行预测的算法。银行和金融服务行业的组织可以利用机器学习技术获得的各种见解来帮助它们在未来做出决策。例如，一种机器学习模型可以通过利用各种数据源对车贷申请者进行风险评分。这些算法然后可以轻松预测哪些客户有违约风险，从而帮助银行重新考虑或调整每个客户的贷款条款。
- en: Why is it vital to monitor loan defaulters?
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为什么监控贷款违约者至关重要？
- en: When the borrower fails to make payments in accordance with the loan’s terms,
    the phrase “bad loan” is used. This has a detrimental effect on the bank’s profitability
    and may also cause the lender to incur credit losses. Large numbers of subprime
    loans can negatively impact bank’s capital adequacy and, in the worst case scenario,
    result in default. Bad loans also run the danger of hindering long-term economic
    growth and increasing banking system uncertainty, both of which increases the
    risks to financial instability.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 当借款人未按贷款条款进行还款时，称之为“坏账”。这会对银行的盈利能力产生不利影响，并可能导致贷款人承担信用损失。大量次级贷款可能会对银行的资本充足率产生负面影响，最坏的情况下可能导致违约。坏账还可能阻碍长期经济增长，并增加银行系统的不确定性，这些都会增加金融稳定性的风险。
- en: Why is machine learning model monitoring crucial for these use cases?
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为什么机器学习模型监控对这些用例至关重要？
- en: Let’s imagine you have a machine learning model to determine whether or not
    a candidate is qualified for a loan, and you believe you can rely on your model
    to forecast correctly nearly all of the time. Due to this, you may avoid dealing
    with a lot of guessing by using the predictions from this model for your firm,
    and luckily it succeeds. It’s simple to believe that the model will continue to
    function properly, yet this is untrue.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 设想你有一个机器学习模型来确定候选人是否符合贷款条件，你相信你的模型几乎可以正确预测所有情况。这样，你可以利用模型的预测避免很多猜测，并且幸运的是，它成功了。人们容易相信模型将继续正常运作，但这并不一定正确。
- en: Because the world surrounding machine learning models is always changing, these
    models can and will worsen with time. Your model will produce a lot of incorrect
    predictions if you don’t frequently feed it relevant and updated data, and you
    won’t even be aware of it. Over time, these mistakes can easily accumulate, costing
    your bank incur heavy losses. It’s crucial to start and keep checking on your
    machine learning models if you want to safeguard your company and yourself from
    these issues.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 由于机器学习模型周围的世界不断变化，这些模型会随着时间的推移而恶化。如果你不经常向模型提供相关和更新的数据，它将产生大量错误的预测，而你甚至不会意识到这些问题。随着时间的推移，这些错误可能会迅速累积，给你的银行带来重大损失。如果你想保护公司和自己免受这些问题的影响，关键是开始并持续检查你的机器学习模型。
- en: The majority of models use a dataset to generate predictions, and the environment
    of the model changes with time. Your model won’t produce accurate predictions
    if the data you used to train it is out-of-date. In addition to system bugs and
    technical issues these problems go beyond what you would typically expect from
    a machine.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数模型使用数据集来生成预测，模型的环境随时间变化。如果用于训练模型的数据过时，你的模型将无法产生准确的预测。除了系统漏洞和技术问题，这些问题超出了你通常对机器的期望。
- en: What are the many ways that machine learning models could fail?
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 机器学习模型可能会以哪些方式失败？
- en: Although model failure can have many causes, the most frequent one is **model
    drift**.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管模型失败可能有多种原因，但最常见的原因是**模型漂移**。
- en: What is model drift?
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 什么是模型漂移？
- en: Model drift is the term used to describe how a model’s accuracy degrades as
    a result of changing data and relationships between its input and output variables.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 模型漂移是指由于数据和输入输出变量之间关系的变化，模型的准确性逐渐下降的现象。
- en: '![](../Images/4338b7de44bf9f4871e8d6a3c3bd22eb.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4338b7de44bf9f4871e8d6a3c3bd22eb.png)'
- en: Image created by author
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 作者创作的图像
- en: What causes model drift?
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 造成模型漂移的原因是什么？
- en: 'Although there are several causes for model drift, they can be divided into
    two basic groups:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管模型漂移有多种原因，但它们可以分为两大基本类别：
- en: '**Poor training data:**'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '**训练数据不良：**'
- en: '**Biased sample selection** — This happens when a biased or ineffective strategy
    was used to gather or prepare the training data. The operational environment in
    which the model will be used is not accurately represented.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**样本选择偏倚**——当使用偏倚或无效的策略来收集或准备训练数据时，就会发生这种情况。模型将使用的操作环境没有得到准确的表示。'
- en: '**Alterations in hidden variables** — Although hidden variables cannot be directly
    measured, they have a significant impact on some of the observed variables. In
    essence, if hidden factors change, so will the data we can see. For example: We
    might consider the car’s value, the borrower’s income, their history with past
    car loans, the size of the down payment, etc. A person’s overall circumstance,
    however, may have an even greater impact, say, his/her family member is battling
    with a disease and needs an emergency fund for the treatment. Although these factors
    cannot be measured directly, they have a crucial impact on the number of loan
    defaulters (our target).'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**隐变量的变化**——虽然隐变量不能直接测量，但它们对一些观察到的变量有显著影响。从本质上讲，如果隐性因素发生变化，那么我们可以看到的数据也会发生变化。例如：我们可能考虑汽车的价值、借款人的收入、他们以往的汽车贷款记录、首付的金额等。然而，一个人的整体情况可能有更大的影响，比如，他/她的家庭成员正在与疾病作斗争，需要紧急资金用于治疗。虽然这些因素无法直接测量，但它们对贷款违约者（我们的目标）数量有着至关重要的影响。'
- en: '**Environmental changes:**'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '**环境变化：**'
- en: '**Dynamic environment** — This is the most straightforward and obvious instance
    of instability, where the change in the data and relations is beyond our control.
    For instance, rules and regulations may change, user interests may change, better
    rivals may emerge, etc.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**动态环境**——这是不稳定性的最直接和明显的例子，其中数据和关系的变化超出了我们的控制。例如，规则和法规可能会发生变化，用户兴趣可能会发生变化，更好的竞争者可能会出现等等。'
- en: '**Technical issues —** A malfunctioning data pipeline, a change in the value
    of one of the feature’s parameters, or even a bug could be to blame for these
    problems.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**技术问题**——故障的数据管道、特征参数值的变化，甚至是一个漏洞都可能是这些问题的原因。'
- en: '**Shift in domain —** This refers to modifications in the significance of concepts
    or values. For instance, as money loses value due to inflation, the price of an
    item or a person’s salary will have varying consequences over time.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**领域的变化**——这指的是概念或价值的意义发生了修改。例如，随着通货膨胀使货币贬值，一件物品的价格或一个人的工资会随着时间而产生不同的后果。'
- en: Drift patterns
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 变化模式
- en: 'If we consider the word’s definition, “drift” essentially refers to a progressive
    shift through time. Similarly, drift in machine learning also occurs at varying
    rates. Following are the different types of drift:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们考虑一下“漂移”这个词的定义，它本质上指的是随时间推移的渐进性变化。同样，机器学习中的漂移也会以不同的速度发生。以下是漂移的不同类型：
- en: '**Gradual** — Over time, when new ideas are implemented, a gradual transformation
    will take place. For instance, consider a car price prediction model that was
    developed in 2015 and had a high accuracy level at the time. Due to the rise in
    car prices over time, after a few years, the predictions’ validity and accuracy
    starts to decline. This makes sense because, as we are all aware, car prices generally
    rise over time. However, if it is not taken into account, it can negatively affect
    a model’s accuracy.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渐进性变化**——随着时间的推移，当新的想法被实施时，会发生渐进的变化。例如，考虑一个在2015年开发的汽车价格预测模型，当时的准确度很高。由于汽车价格随时间上升，几年后，预测的有效性和准确性开始下降。这是有道理的，因为正如我们所知道的，汽车价格一般是逐渐上升的。然而，如果没有考虑到这一点，它可能会对模型的准确性产生负面影响。'
- en: '![](../Images/698775c89c05a6ab893b01404ab202ee.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/698775c89c05a6ab893b01404ab202ee.png)'
- en: Gradual drift (Image created by author)
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 渐进性变化（作者创作的图像）
- en: '**Sudden —** A drift may occur suddenly. For instance: Abrupt adjustments in
    purchasing patterns and consumer behaviour during and after a pandemic.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**突发的变化**——变化可能会突然发生。例如：在疫情期间及之后，购买模式和消费者行为的突然调整。'
- en: '![](../Images/54dabd51b8a85443a86b35eb3ec6dd33.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/54dabd51b8a85443a86b35eb3ec6dd33.png)'
- en: Sudden drift (Image created by author)
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 突发变化（作者创作的图像）
- en: '**Recurrent** — In this, the changes recur after the initial observation, or
    we might say that it occurs periodically. Take winter clothing shopping as an
    example.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重复出现**——在这种情况下，变化在初始观察后会重新出现，或者我们可以说它会周期性地发生。以冬季服装购物为例。'
- en: '![](../Images/7947844ff585d74ad96ebd081c898a19.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7947844ff585d74ad96ebd081c898a19.png)'
- en: Recurrent drift (Image created by author)
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 递归漂移（图像由作者创建）
- en: '**Spike —** These are exceptional occurrences that could have an impact on
    the model. For instance: Alterations brought on by a war, pandemic, recession,
    etc.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**峰值—** 这些是可能对模型产生影响的特殊情况。例如：战争、疫情、经济衰退等引起的变化'
- en: '![](../Images/2b0e234ba7142c589b852537c22dc31d.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2b0e234ba7142c589b852537c22dc31d.png)'
- en: Spike drift (Image created by author)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 峰值漂移（图像由作者创建）
- en: 'Model drift can be further classified into two main categories:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 模型漂移可以进一步分为两个主要类别：
- en: Data drift
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据漂移
- en: 'Data drift is characterized as a shift in the data’s distribution. This is
    the difference between the real-time production data and a baseline or reference
    data set (usually the training set) that is indicative of the task the model is
    designed to carry out in the case of production machine learning models. Due to
    changes in the real world, production data may depart from the baseline data over
    time. Data drift can be further classified into two categories:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 数据漂移的特征是数据分布的变化。这是指实时生产数据与基准或参考数据集（通常是训练集）之间的差异，在生产机器学习模型的情况下，这些数据集代表了模型设计要执行的任务。由于现实世界的变化，生产数据可能会随着时间的推移偏离基准数据。数据漂移可以进一步分为两个类别：
- en: '**Covariate/feature drift**'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**协变量/特征漂移**'
- en: Covariate drift happens when the data used to train an algorithm diverges from
    the data used to use it. This indicates that while the distribution of the feature
    has not changed, the relationship between the feature and the target variable
    has itself changed. When statistical properties of this input data change, the
    same model which has been built before will not provide unbiased results and therefore
    leads to inaccurate predictions. For instance, a manufacturer of medical devices
    might use information from sizable urban hospitals to create its machine learning
    based system. However, once the product is in the market, the medical data entered
    into the system by healthcare professionals in rural areas might not resemble
    the development data. In some sociodemographic groups, patients from urban hospitals
    may be more likely to have underlying medical issues than those from rural hospitals.
    These discrepancies won’t be noticed until after the product has been released
    to the market and starts to malfunction more frequently than it did during testing.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 协变量漂移发生在用于训练算法的数据与用于应用算法的数据之间发生分歧时。这表明尽管特征的分布没有变化，但特征与目标变量之间的关系发生了变化。当这种输入数据的统计属性发生变化时，之前构建的模型将不能提供无偏结果，从而导致不准确的预测。例如，医疗设备制造商可能会使用来自大型城市医院的信息来创建基于机器学习的系统。然而，一旦产品进入市场，由医疗专业人员在农村地区输入到系统中的医疗数据可能与开发数据不相符。在某些社会人口群体中，城市医院的患者可能比农村医院的患者更有可能存在潜在的医疗问题。这些差异可能直到产品发布市场后并开始比测试期间更频繁地发生故障时才会被注意到。
- en: '**Label drift**'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标签漂移**'
- en: This sort of drift happens when the distribution of the class variable (y),
    the model’s output, or the label distribution changes. For instance, the pandemic
    has resulted in a considerable increase in automobile costs, which has caused
    the distribution of car prices to shift towards a higher default value. The ML
    model developed for car price prediction before pandemic won’t be able to predict
    input values with sufficient accuracy after pandemic.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 这种漂移发生在类变量（y）、模型输出或标签分布的分布发生变化时。例如，疫情导致汽车成本大幅上升，这使得汽车价格分布向更高的默认值偏移。疫情前开发的汽车价格预测模型在疫情后无法以足够的准确性预测输入值。
- en: '![](../Images/6755b1c5acbed6a3ab3a8405fbe26014.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6755b1c5acbed6a3ab3a8405fbe26014.png)'
- en: Label drift (Image by author)
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 标签漂移（图像由作者创建）
- en: Concept drift
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概念漂移
- en: When p(y|X) changes but p(X) stays the same, concept drift has occurred. Here,
    p(X) and p(y) represent the probability of observing automobile features X and
    car prices y, respectively, and p(y|X) represents the conditional distribution
    of car prices given car features. The conditional probability of car pricing given
    automobile attributes p(y|X) could fluctuate in the example of car price prediction.
    Consider that the distribution of the car’s seating capacity doesn’t change. Nowadays,
    customers want larger cars, thus their prices has increased. Particularly for
    larger cars, the conditional probability of the price of the car given the seating
    capacity may alter.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 当 p(y|X) 发生变化而 p(X) 保持不变时，就发生了概念漂移。在这里，p(X) 和 p(y) 分别表示观察到的汽车特征 X 和汽车价格 y 的概率，而
    p(y|X) 表示给定汽车特征的价格的条件分布。在汽车价格预测的例子中，给定汽车属性的价格的条件概率 p(y|X) 可能会发生波动。考虑到汽车的座位容量分布没有变化。如今，客户想要更大的汽车，因此其价格上涨了。特别是对于较大的汽车，给定座位容量的汽车价格的条件概率可能会发生变化。
- en: '![](../Images/508963a5fb53638dcb60550be185c0de.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/508963a5fb53638dcb60550be185c0de.png)'
- en: Concept drift (Image created by author)
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 概念漂移（图像由作者创建）
- en: How to detect drift?
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何检测漂移？
- en: 'There are several ways to detect drift out of which the most common ways are:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 检测漂移的方法有几种，其中最常见的方法是：
- en: '**Tracking model performance:**'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '**跟踪模型性能：**'
- en: Tracking model performance metrics is the simplest method for spotting drift.
    Confusion matrix, accuracy, recall, F1 score, and ROC-AUC are some of the most
    popular performance indicators for ML models. Other model behavior measure metrics
    may also be crucial, depending on how we use the model.
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跟踪模型性能指标是检测漂移的最简单方法。混淆矩阵、准确率、召回率、F1 分数和 ROC-AUC 是一些最受欢迎的机器学习模型性能指标。其他模型行为测量指标也可能至关重要，这取决于我们如何使用模型。
- en: '**Tracking descriptive statistics:**'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '**跟踪描述性统计数据：**'
- en: Numerous statistical tests or hypothesis tests can be used to identify statistical
    distribution changes, including [Population Stability Index](https://mwburke.github.io/data%20science/2018/04/29/population-stability-index.html),
    [Kullback-Leibler (KL) divergence](https://en.wikipedia.org/wiki/Kullback%E2%80%93Leibler_divergence),
    [Jensen-Shannon divergence](https://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence),
    [Kolmogorov-Smirnov test](https://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test),
    [Cramér-von Mises test](https://en.wikipedia.org/wiki/Cram%C3%A9r%E2%80%93von_Mises_criterion),
    [Fisher’s Exact Test](https://en.wikipedia.org/wiki/Fisher%27s_exact_test), and
    [Maximum Mean Discrepancy (MMD)](https://www.onurtunali.com/ml/2019/03/08/maximum-mean-discrepancy-in-machine-learning.html).
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有许多统计测试或假设检验可以用来识别统计分布变化，包括 [人口稳定性指数](https://mwburke.github.io/data%20science/2018/04/29/population-stability-index.html)、[Kullback-Leibler
    (KL) 散度](https://en.wikipedia.org/wiki/Kullback%E2%80%93Leibler_divergence)、[Jensen-Shannon
    散度](https://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence)、[Kolmogorov-Smirnov
    检验](https://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test)、[Cramér-von
    Mises 检验](https://en.wikipedia.org/wiki/Cram%C3%A9r%E2%80%93von_Mises_criterion)、[Fisher
    精确检验](https://en.wikipedia.org/wiki/Fisher%27s_exact_test)和 [最大均值差异 (MMD)](https://www.onurtunali.com/ml/2019/03/08/maximum-mean-discrepancy-in-machine-learning.html)。
- en: Now that we’ve seen some potential machine learning model failure modes and
    how to spot them, let’s look at how we can prevent them using NannyML!
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们已经了解了一些潜在的机器学习模型失败模式及其识别方法，让我们来看看如何使用 NannyML 来预防这些问题！
- en: How to avoid model failure using NannyML?
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何使用 NannyML 避免模型失败？
- en: What is NannyML?
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 什么是 NannyML？
- en: '[NannyML](https://github.com/NannyML/nannyml) is an open-source python library
    that allows you to **estimate post-deployment model performance** (without access
    to targets), detect data drift, and intelligently link data drift alerts back
    to changes in model performance.'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '[NannyML](https://github.com/NannyML/nannyml) 是一个开源的 Python 库，它允许你**估算部署后模型性能**（无需访问目标），检测数据漂移，并智能地将数据漂移警报与模型性能变化关联起来。'
- en: In the example that follows, we will demonstrate how to use NannyML and the
    necessary code to prevent model failure.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的示例中，我们将演示如何使用 NannyML 以及必要的代码来防止模型失败。
- en: 'Let’s install and import the necessary packages:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们安装和导入必要的包：
- en: Let’s load the data now that we have all the essential packages. This is the
    [dataset](https://drive.google.com/file/d/1c5qI3gSp_cbjVfHs76fFAnkklaqNjx99/view)
    I’ll be working with.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们已经有了所有必要的包，现在让我们加载数据。这是我将使用的 [数据集](https://drive.google.com/file/d/1c5qI3gSp_cbjVfHs76fFAnkklaqNjx99/view)。
- en: Let’s look at the use case before continuing!
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，让我们先看看这个用例！
- en: This dataset focuses on car loans, and our goal here is to determine whether
    or not the borrowers will be able to repay their debt. Every row in the dataset
    represents a customer, and we have details on each one’s loan application, like
    the value of the car, their expected monthly income, if they’ve paid off the loan
    on a previous car, etc. Most significantly, a portion of this dataset (data with
    0s and 1s in the “repaid” column) contains information about whether the customer
    was able to repay their car loan, and as a result it was used to train the machine
    learning model. We can also assess the performance of this model as along with
    the predicted output (”y_pred_proba” column) we also have the actual output (”repaid”
    column). We also have a column called “partition” that distinguishes between “reference”
    and “analysis” data. The data that has been extracted following the deployment
    of the machine learning model is referred to as the “analysis” data. The actual
    date and time that the forecast was made are listed in the “timestamp” column.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 这个数据集集中于汽车贷款，我们的目标是确定借款人是否能够偿还他们的债务。数据集中的每一行代表一个客户，我们有关于每个客户贷款申请的详细信息，比如汽车的价值、预期月收入、是否还清了之前的贷款等。最重要的是，这个数据集的一部分（“repaid”列中有0和1的数据）包含了客户是否能够偿还汽车贷款的信息，因此这些数据被用来训练机器学习模型。我们还可以评估这个模型的性能，因为除了预测输出（“y_pred_proba”列），我们还有实际输出（“repaid”列）。我们还有一个名为“partition”的列，用于区分“reference”和“analysis”数据。机器学习模型部署后提取的数据被称为“analysis”数据。实际进行预测的日期和时间列在“timestamp”列中。
- en: As we can see, in this particular use case, we can only obtain the target/predicted
    data after a particular amount of time, therefore we can only determine whether
    the customers were able to repay their debts after a year or a few months, say.
    This makes evaluating the effectiveness of the machine learning model quite challenging.
    And that’s what we’re going to utilize NannyML for, to see how well our model
    performs after deployment without the target data.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所见，在这种特定的使用案例中，我们只能在特定时间后获得目标/预测数据，因此我们只能在一年或几个月后确定客户是否能够偿还债务。这使得评估机器学习模型的有效性相当具有挑战性。而这正是我们将利用NannyML来做的，以查看我们的模型在部署后没有目标数据的情况下表现如何。
- en: 'Let’s divide our data into “**reference**” and “**analysis**” since NannyML
    needs to learn about a model from a reference dataset before it can monitor the
    data that is actually being analyzed, which is provided as the analysis (post-deployment)
    dataset:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将数据划分为“**reference**”和“**analysis**”，因为NannyML需要先从参考数据集中学习模型，然后才能监控实际分析的数据，这些数据被提供为分析（部署后）数据：
- en: Using the training (“reference”) data, we will now estimate performance for
    our post-deployment data (“analysis”).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 使用训练（“reference”）数据，我们将现在估计部署后数据（“analysis”）的性能。
- en: In the code above, we initialized our estimator with a variety of required parameters,
    fitted it to our reference data, and then used it to calculate an estimate of
    the performance for our analysis (post-deployment) data.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的代码中，我们用各种必要的参数初始化了估计器，将其拟合到参考数据中，然后用它来计算分析（部署后）数据的性能估计。
- en: 'Output:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 输出：
- en: '![](../Images/be76a543c072c1c7d92c81c65932204c.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/be76a543c072c1c7d92c81c65932204c.png)'
- en: Performance estimation (Image created by author)
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 性能估计（图片由作者创建）
- en: Without having access to the target data, NannyML employs a technique known
    as CBPE (Confidence-Based Performance Estimation) to calculate the performance
    of a machine learning model in use. Here is a fantastic [explanation](https://nannyml.readthedocs.io/en/stable/how_it_works/performance_estimation.html#performance-estimation-deep-dive)
    of the algorithm in their official documentation if you wish to fully comprehend
    it.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在没有目标数据的情况下，NannyML使用一种称为CBPE（基于置信度的性能估计）的方法来计算正在使用的机器学习模型的性能。如果您希望完全理解这种算法，这里有一个精彩的[解释](https://nannyml.readthedocs.io/en/stable/how_it_works/performance_estimation.html#performance-estimation-deep-dive)在他们的官方文档中。
- en: CBPE basically leverages the test data (data denoted by blue dotted line from
    Jan 2018 to July 2018) as the model output or the probability scores to come up
    with the performance for the analysis data (purple shaded region). We can see
    that there is a noticeable decrease in the model’s performance after deployment,
    which is why we have it in a slightly red shaded area. This is the primary indication
    that our model is not operating as planned, thus further investigation is necessary
    to identify the problems.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: CBPE基本上利用测试数据（2018年1月至2018年7月用蓝色虚线表示的数据）作为模型输出或概率分数，以便得出分析数据（紫色阴影区域）的性能。我们可以看到，模型部署后性能显著下降，因此我们将其标记为稍微红色阴影区域。这是模型未按计划运行的主要指示，因此需要进一步调查以识别问题。
- en: '**Note:**'
  id: totrans-82
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：**'
- en: ''
  id: totrans-83
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Because we don’t yet know the target data, this performance is not accurate,
    and the real-world estimated performance may be lower than what NannyML predicted
    using CBPE.
  id: totrans-84
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 因为我们还不知道目标数据，这个性能是不准确的，实际的估计性能可能低于NannyML使用CBPE预测的性能。
- en: As was previously discussed, model drift is the most frequent reason for an
    ML model to fail, so let’s estimate the **univariate** and **multivariate** drift.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，模型漂移是ML模型失败的最常见原因，因此让我们估计**单变量**和**多变量**漂移。
- en: 'When a variable detects a sizable variation in distribution, univariate drift
    occurs. The univariate strategy used by NannyML to detect data drift examines
    each variable separately and contrasts the chunks produced by the analysis data
    period with the reference period. To identify drift, NannyML provides statistical
    tests in addition to distance measurements. They are referred to as methods. Some
    methods can only be used with categorical data, others can only be used with continuous
    data, whereas some might be used on both. We may select which methods to apply
    using NannyML. Following is the code to estimate the univariate drift using NannyML:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 当变量检测到分布中的显著变化时，就会发生单变量漂移。NannyML用于检测数据漂移的单变量策略分别检查每个变量，并将分析数据期间产生的块与参考期间进行对比。为了识别漂移，NannyML除了距离测量之外，还提供了统计测试。这些方法被称为方法。一些方法只能用于分类数据，其他只能用于连续数据，而一些方法可以同时用于两者。我们可以使用NannyML选择应用哪些方法。以下是使用NannyML估计单变量漂移的代码：
- en: 'Now let’s fit the “reference” data and estimate the univarate drift for “analysis”
    data:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们拟合“参考”数据并估计“分析”数据的单变量漂移：
- en: '**Note:**'
  id: totrans-88
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：**'
- en: ''
  id: totrans-89
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: By using the to_df() method we can transform the results into a DataFrame.
  id: totrans-90
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 通过使用`to_df()`方法，我们可以将结果转换为DataFrame。
- en: The reference data, which serves as the standard against which the analysis
    data will be measured, must be given to the `fit()` method. Then, using the provided
    data, the `calculate()` method will calculate the outcomes of the drift.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 参考数据作为衡量分析数据的标准，必须提供给`fit()`方法。然后，使用提供的数据，`calculate()`方法将计算漂移的结果。
- en: '**Note:**'
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：**'
- en: ''
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Due to space constraints, I won’t be able to display the output here, but you
    can refer [this](https://github.com/saurav935/NannyML) for the same.
  id: totrans-94
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 由于空间限制，我无法在此显示输出，但你可以参考[这个](https://github.com/saurav935/NannyML)。
- en: 'The next step is visualizing the results. For a given column, NannyML may plot
    both the drift and distribution. The results of the `jensen-shannon` approach
    for each continuous column will be plotted first, followed by the `chi2` for each
    categorical column:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是可视化结果。对于给定的列，NannyML可能会同时绘制漂移和分布。`jensen-shannon`方法对每个连续列的结果将首先被绘制，然后是每个分类列的`chi2`：
- en: '**Note:**'
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：**'
- en: ''
  id: totrans-97
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: To keep the article short, I won’t display the visualization of every feature,
    but you may access it using [this](https://github.com/saurav935/NannyML) if you
    wish to view them all.
  id: totrans-98
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 为了保持文章简短，我不会显示每个特征的可视化，但你可以通过[这个](https://github.com/saurav935/NannyML)访问它们。
- en: '![](../Images/be76a543c072c1c7d92c81c65932204c.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/be76a543c072c1c7d92c81c65932204c.png)'
- en: Jensen-Shannon distance for car_value (Image created by author)
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: loan_length的Jensen-Shannon距离（图像由作者创建）
- en: '![](../Images/bd784ac6bce659363ffbe53554f8e101.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bd784ac6bce659363ffbe53554f8e101.png)'
- en: Jensen-Shannon distance for loan_length (Image created by author)
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: car_value的Jensen-Shannon距离（图像由作者创建）
- en: '![](../Images/3ffb91c40327b56022a044f1e6add535.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3ffb91c40327b56022a044f1e6add535.png)'
- en: Jensen-Shannon distance for y_pred_proba (Image created by author)
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: y_pred_proba的Jensen-Shannon距离（图像由作者创建）
- en: '`chi2`results for categorical columns:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '`chi2`结果用于分类列：'
- en: '![](../Images/f77f7c785bb966015617cf18ac4ad36b.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f77f7c785bb966015617cf18ac4ad36b.png)'
- en: Chi2 statistics for salary_range (Image created by author)
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: salary_range的Chi2统计量（图像由作者创建）
- en: '![](../Images/db95f421aa5542e136b1ec625990da33.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/db95f421aa5542e136b1ec625990da33.png)'
- en: Chi2 statistics for repaid_loan_on_prev_car (Image created by author)
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: repaid_loan_on_prev_car的Chi2统计量（图像由作者创建）
- en: '![](../Images/bc43532a1a9ce385cb5ac86f4e82bbcb.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bc43532a1a9ce385cb5ac86f4e82bbcb.png)'
- en: Chi2 statistic for size_of_downpayment (Image created by author)
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: size_of_downpayment的Chi2统计量（图像由作者创建）
- en: Distribution of continuous variables
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连续变量的分布
- en: 'Using NannyML we can also get details about the distributions of continuous
    and categorical variables. When dealing with continuous variables, NannyML creates
    a graphic called a joyplot that displays the estimated probability distribution
    of the variable for each chunk. The portions where drift was found are highlighted:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 使用NannyML，我们还可以获得连续变量和类别变量的分布详情。在处理连续变量时，NannyML创建了一个名为joyplot的图形，显示了每个区块中变量的估计概率分布。发现漂移的部分被高亮显示：
- en: '![](../Images/05be75102e56dce8d3467a155a5b23c0.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/05be75102e56dce8d3467a155a5b23c0.png)'
- en: Distribution over time for car_value (Image created by author)
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: car_value随时间的分布（图像由作者创建）
- en: As we move from the time period of January 2019 to July 2019, we can see that
    there is a shift in the first quartile.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们从2019年1月到2019年7月时，可以看到第一四分位数发生了变化。
- en: '![](../Images/4d5f6a58f466880692c8dbf87daf1351.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4d5f6a58f466880692c8dbf87daf1351.png)'
- en: Distribution over time for loan_length (Image created by author)
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: loan_length随时间的分布（图像由作者创建）
- en: As we move from January 2019 to July 2019, we can see in the plot above that
    the loans for the cars that have received some requests have also increased.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 随着我们从2019年1月移动到2019年7月，我们可以从上图中看到，接到一些请求的汽车贷款也有所增加。
- en: '![](../Images/67dfccd93ae8e4c9a03bc65959fc11fc.png)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/67dfccd93ae8e4c9a03bc65959fc11fc.png)'
- en: Distribution over time for y_pred_proba (Image created by author)
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: y_pred_proba随时间的分布（图像由作者创建）
- en: The greatest anticipated probability has been slightly shifted down in the above
    plot, and the lowest level has slightly shifted up. This is an apparent sign that
    the data is approaching the decision boundary. This is also known as the **model
    output drift**.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在上图中，最大预期概率略微向下移动，最低水平略微向上移动。这是数据接近决策边界的明显迹象。这也被称为**模型输出漂移**。
- en: Distribution of categorical variables
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 类别变量的分布
- en: 'NannyML creates stacked bar charts to display the distribution of categorical
    variables for each chunk. In order to make the plots easier to examine, if a variable
    has more than five categories, only the top four are shown. Using the code below,
    we can create bar charts for the categorical variables in the model:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: NannyML创建堆叠条形图，以显示每个区块中类别变量的分布。为了使图表更易于检查，如果一个变量有超过五个类别，只显示前四个。使用下面的代码，我们可以为模型中的类别变量创建条形图：
- en: '![](../Images/8b4b5f68a20fefff6d7eda3f8bef3618.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8b4b5f68a20fefff6d7eda3f8bef3618.png)'
- en: Distribution over time for salary_range (Image created by author)
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: salary_range随时间的分布（图像由作者创建）
- en: The lowest income range has marginally migrated upward, as seen in the plot
    above (area highlighted in white circle). Additionally, the highest pay scale
    has been lowered (area highlighted in purple circle).
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 最低收入范围在上图中略微上移（白色圆圈高亮区域）。此外，最高薪资范围有所降低（紫色圆圈高亮区域）。
- en: '![](../Images/b63813b2628f2f1f9d5ba908b6c0abc8.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b63813b2628f2f1f9d5ba908b6c0abc8.png)'
- en: Distribution over time for repaid_loan_on_prev_car (Image created by author)
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: repaid_loan_on_prev_car随时间的分布（图像由作者创建）
- en: 'All of the aforementioned charts have one thing in common: Each of them includes
    a **time** parameter. So, it makes sense to wonder whether or not we can perform
    equivalent analytics without having temporal characteristics of features in our
    dataset?'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 上述所有图表有一个共同点：每个图表都包括一个**时间**参数。因此，值得考虑是否可以在没有数据集中的时间特征的情况下执行等效的分析？
- en: The machine learning model monitoring service from NannyML focuses on how things
    actually evolve over time, which makes it one of its **unique** features. However,
    by simply partitioning the data in the **reference** and **analysis** sets, NannyML
    can also be used for non-temporal analysis.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: NannyML的机器学习模型监控服务关注实际随时间的演变，这使其成为其**独特**的功能之一。然而，通过简单地将数据划分为**参考**集和**分析**集，NannyML也可以用于非时间序列分析。
- en: '**Note:** The inclusion of the time factor in the analysis is advised because
    it can produce more accurate results than non-temporal analysis.'
  id: totrans-132
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：** 建议在分析中包含时间因素，因为它可以产生比非时间分析更准确的结果。'
- en: Multivariate drift
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 多变量漂移
- en: Multivariate drift occurs when the relationships between the input data is altered.
    The interpretation of multivariate change detection may be challenging, yet it
    is necessary to overcome the limitations of univariate change detection.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 当输入数据之间的关系发生变化时，会出现多变量漂移。多变量变化检测的解释可能具有挑战性，但它是克服单变量变化检测限制的必要手段。
- en: Why is it necessary to examine multivariate drift?
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为什么有必要检查多变量漂移？
- en: The [drawbacks](https://nannyml.readthedocs.io/en/stable/how_it_works/data_reconstruction.html#limitations-of-univariate-drift-detection)
    of univariate data detection techniques are addressed by multivariate data drift
    detection. The risk of false alerts is reduced, and it finds subtler changes in
    the data structure that univariate techniques miss. It also delivers a single
    summary value.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 多变量数据漂移检测解决了 [单变量数据检测技术的缺陷](https://nannyml.readthedocs.io/en/stable/how_it_works/data_reconstruction.html#limitations-of-univariate-drift-detection)。减少了误警报的风险，发现了单变量技术遗漏的数据结构中更细微的变化。它还提供了一个单一的总结值。
- en: 'To find such modifications, NannyML employs [Data Reconstruction with PCA](https://nannyml.readthedocs.io/en/stable/how_it_works/data_reconstruction.html#id1).
    The Reconstruction Error is measured by the technique and is returned as a single
    value. The changes in this value reflect a change in the structure of the model
    inputs. The reconstruction error for the monitored model is calculated over time
    by NannyML, and if the results deviate from a range established by the variance
    in the reference data period, an alert is raised. Following is the code to estimate
    multivariate drift using NannyML:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 为了发现这种变化，NannyML 使用了 [主成分分析数据重建](https://nannyml.readthedocs.io/en/stable/how_it_works/data_reconstruction.html#id1)。该技术测量重建误差，并返回一个单一值。这个值的变化反映了模型输入结构的变化。NannyML
    会随时间计算监控模型的重建误差，如果结果偏离了参考数据期的方差设定范围，则会触发警报。以下是使用 NannyML 估计多变量漂移的代码：
- en: In the above code, we have initialized the `DataReconstructionDriftCalculator`
    module with appropriate parameters. The reference data must then be passed to
    the `fit()` method, where the findings will be examined for future use. The `calculate()`
    method will then use the supplied data to determine the multivariate drift findings.
    The missing data is a crucial issue that needs to be addressed. NannyML's default
    imputation method assigns the mean value for continuous features and the most
    common value for categorical features.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述代码中，我们已使用适当的参数初始化了 `DataReconstructionDriftCalculator` 模块。参考数据必须传递给 `fit()`
    方法，其中的发现将用于未来的分析。然后，`calculate()` 方法将使用提供的数据来确定多变量漂移的结果。缺失数据是一个需要解决的关键问题。NannyML
    的默认插补方法为连续特征分配均值，为分类特征分配最常见值。
- en: '**Note:** Instances of the SimpleImputer class can override these defaults,
    in which case NannyML will carry out the imputation as directed.'
  id: totrans-139
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：** SimpleImputer 类的实例可以覆盖这些默认设置，此时 NannyML 将按照指示执行插补。'
- en: 'Let’s visualize our multivariate drift results using the following code:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用以下代码可视化我们的多变量漂移结果：
- en: '![](../Images/73011e0522760bc22658b911be25067e.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/73011e0522760bc22658b911be25067e.png)'
- en: Data Reconstruction Drift (Image created by author)
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 数据重建漂移（图片由作者创建）
- en: 'Following is the analysis of the above plot:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是对上述图表的分析：
- en: The reference area is shown using a step plot in blue. The midpoint of the chunks
    is shown by thick square point markers on the plot.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 参考区域使用蓝色阶梯图显示。图上的厚方块点标记显示了块的中点。
- en: The purple step plot depicts the reconstruction error for each interval of the
    analysis period.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 紫色阶梯图描绘了分析期间每个区间的重建误差。
- en: The sampling error can be seen as a low-saturated purple shaded region surrounding
    the reconstruction error.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 采样误差可见为围绕重建误差的低饱和紫色阴影区域。
- en: The top and lower alerting thresholds are indicated by the horizontal red dashed
    lines.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 上限和下限警报阈值由水平红色虚线指示。
- en: A warning is triggered and shown with a red, low-saturated backdrop that spans
    the entire width of the relevant chunk if the reconstruction error exceeds either
    the upper or lower threshold. A red pointer in the form of a diamond in the middle
    of the chunk also serves as a further indication of this.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果重建误差超过了上限或下限阈值，就会触发警告，并显示在整个相关块的宽度上带有红色低饱和度背景。块中间的红色钻石形指针也进一步表示这一点。
- en: Ranking
  id: totrans-149
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 排名
- en: Features are ranked by NannyML based on the total number of alerts they have
    received across all methods. The estimated performance and univariate feature
    drift are related by this.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 特征是由 NannyML 根据它们在所有方法中收到的警报总数进行排名的。预计的性能和单变量特征漂移与此相关。
- en: '![](../Images/971b1578b83c08a6ff2db2f91ceb35b3.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/971b1578b83c08a6ff2db2f91ceb35b3.png)'
- en: Ranking (Image created by author)
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 排名（图片由作者创建）
- en: I hope you learned a few helpful tidbits on how to monitor your machine learning
    models while they are in use and that you now know why deployment is never the
    last step. I also hope that you now have sufficient clarity to know where to begin
    monitoring your models when they are in production!
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望你能学到一些有用的技巧，了解如何在机器学习模型运行时进行监控，并且现在你知道为什么部署绝不是最后一步。我也希望你现在对如何开始监控生产中的模型有足够的清晰认识！
- en: '*Thank you for reading till here. Please let me know if you have any questions.
    I would be happy to help!* 🙂'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '*感谢你阅读到这里。如果你有任何问题，请告诉我。我很乐意帮助你！* 🙂'
