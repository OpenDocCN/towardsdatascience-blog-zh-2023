- en: Build Your Own ChatGPT-Like App with Streamlit
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: åŽŸæ–‡ï¼š[https://towardsdatascience.com/build-your-own-chatgpt-like-app-with-streamlit-20d940417389?source=collection_archive---------1-----------------------#2023-04-03](https://towardsdatascience.com/build-your-own-chatgpt-like-app-with-streamlit-20d940417389?source=collection_archive---------1-----------------------#2023-04-03)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Leverage OpenAIâ€™s APIs to bypass the official ChatGPT app
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://heiko-hotz.medium.com/?source=post_page-----20d940417389--------------------------------)[![Heiko
    Hotz](../Images/d08394d46d41d5cd9e76557a463be95e.png)](https://heiko-hotz.medium.com/?source=post_page-----20d940417389--------------------------------)[](https://towardsdatascience.com/?source=post_page-----20d940417389--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----20d940417389--------------------------------)
    [Heiko Hotz](https://heiko-hotz.medium.com/?source=post_page-----20d940417389--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: Â·
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F993c21f1b30f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-your-own-chatgpt-like-app-with-streamlit-20d940417389&user=Heiko+Hotz&userId=993c21f1b30f&source=post_page-993c21f1b30f----20d940417389---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----20d940417389--------------------------------)
    Â·6 min readÂ·Apr 3, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F20d940417389&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-your-own-chatgpt-like-app-with-streamlit-20d940417389&user=Heiko+Hotz&userId=993c21f1b30f&source=-----20d940417389---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F20d940417389&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbuild-your-own-chatgpt-like-app-with-streamlit-20d940417389&source=-----20d940417389---------------------bookmark_footer-----------)![](../Images/adee84dceeb9417da8d9a13df56a585d.png)'
  prefs: []
  type: TYPE_NORMAL
- en: Image by author â€” created with Stable Diffusion
  prefs: []
  type: TYPE_NORMAL
- en: What is this about?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'When GPT-4 was announced on 14 March 2023, I immediately signed up for ChatGPT
    Plus â€” a paid tier within the ChatGPT application that offered access to the new
    model right away. It cost $20 per month and was well worth it in the beginning.
    However, after a few days, my usage decreased â€” donâ€™t get me wrong: I still use
    it regularly, I just wasnâ€™t sure if I would use it to the extent that it justified
    the cost. Then, a few days ago, I gained access to GPT-4 via OpenAIâ€™s API, and
    while the new model is much more expensive than its predecessor GPT-3.5, I still
    think itâ€™s probably more economical for me to interact with the API rather than
    using the ChatGPT app.'
  prefs: []
  type: TYPE_NORMAL
- en: But I definitely wanted to keep the chat-like experience when interacting with
    the model. While there are already quite a few open-source apps out there that
    provide a slick user experience, I didnâ€™t want anything to do with React or similar
    front-end frameworks â€” they are great for building amazing web apps, but itâ€™s
    just not what I enjoy doing. Instead, I decided to build my own chat interface
    with Streamlit, which offers a much more basic UX and has far fewer features â€”
    but it was much more fun for me to develop my own UI from scratch (and in Python).
    ðŸ˜ƒ
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0ca0ec49a9cbaafc8a14324f4cd19437.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by author
  prefs: []
  type: TYPE_NORMAL
- en: In this tutorial I will walk you through the application â€” all the code is also
    available in this [GitHub repo](https://github.com/marshmellow77/streamlit-chatgpt-ui).
  prefs: []
  type: TYPE_NORMAL
- en: Why is it important?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Learning by doing
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Apart from the cost aspect that I already mentioned, there are a few more advantages
    to building my own chat interface. First off, it forced me to study the Chat API
    more closely, as up until now, I had only worked with the text completion API.
    Using the Chat API is similar, but there are a few key differences to be aware
    of.
  prefs: []
  type: TYPE_NORMAL
- en: Independence
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Second, it makes me completely independent from the ChatGPT app. Whether there
    is a [major outage](https://openai.com/blog/march-20-chatgpt-outage) in the app
    or the app is throttling how many inference requests I can send to the model (currently
    it is throttled at 25 messages every 3 hours), none of these apply when I run
    my own app.
  prefs: []
  type: TYPE_NORMAL
- en: Data privacy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Third, data privacy. By default, ChatGPT collects data and uses it for improving
    the service (although itâ€™s possible to opt out). However, when using the APIs,
    by default, the data is not collected unless we specifically opt in. See more
    information in OpenAIâ€™s [API usage document](https://openai.com/policies/api-data-usage-policies).
  prefs: []
  type: TYPE_NORMAL
- en: So much more fun!
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Finally, as previously mentioned, it is much more enjoyable to construct something
    like this (at least for geeks like me ðŸ¤“). I have already incorporated a few features
    into my app, such as displaying the number of tokens and the price per conversation.
    Perhaps at some point, I can expand the app to utilise other models (e.g., from
    Hugging Face) as well ðŸ¤—.
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s get this show on the road! ðŸ’ª
  prefs: []
  type: TYPE_NORMAL
- en: Building the app
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Prerequisites
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To develop this app we need to make sure that we have the packages *openai*,
    *streamlit*, and *streamlit-chat* installed:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Keeping track of conversation history
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The [guide for chat completion](https://platform.openai.com/docs/guides/chat/introduction)
    mentions that we need to pass the conversation history to the API, so the model
    understands the context; in other words, we must manage the memory of the chat
    model, as it is not handled for us within the API. To accomplish this, we create
    a session state list where we store a system message at the beginning of a session
    and then append interactions with the model.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Displaying the conversation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To display the conversation we leverage the *message* function from the *streamlit-chat*
    package. We iterate over the stored interactions and show the conversation chronologically,
    starting with the oldest one at the top (just like in ChatGPT).
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Printing additional information
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: An additional feature that I thought could be useful is to print some metadata
    for each interaction. To that end, we can, for example, print the model that was
    used (which can change from one interaction to the next), how many tokens were
    used for this particular interaction, and its cost (according to [OpenAIâ€™s pricing
    page](https://openai.com/pricing#language-models)).
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/62b1004d9127fcbcf230c4a9b9de1e77.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by author
  prefs: []
  type: TYPE_NORMAL
- en: Please note that the number of tokens (and consequently the price) will increase
    as the conversation gets longer. This is because we need to submit all previous
    questions and answers so that the model understands the context of the interaction.
  prefs: []
  type: TYPE_NORMAL
- en: '**To save money, it is therefore advisable to clear the conversation when starting
    a new topic with the chatbot.**'
  prefs: []
  type: TYPE_NORMAL
- en: Sidebar
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In the sidebar, we offer the option to switch models and clear the conversation
    history. Additionally, we can display the accumulated costs of the current conversation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0ce1e9f10bf9e0dfc0a7e72c293bf947.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by author
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'By following these steps, we have successfully developed an easy-to-use and
    customisable chat interface that allows us to interact with GPT-based models without
    relying on apps like ChatGPT. We can now run the application with the following
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: How this changed my workflow
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: I have now actually canceled my subscription to ChatGPT Plus, and Iâ€™m exclusively
    using my app to interact with the GPT models. By default, I use the GPT-3.5 model,
    which makes it really affordable to use these models. Only for more sophisticated
    tasks or when Iâ€™m not completely satisfied with the results of GPT-3.5 will I
    switch to GPT-4\. Most likely, I will continue adding features to the app over
    time, as this is what I enjoy doing most â€” so stay tuned for future updates ðŸ˜Š
  prefs: []
  type: TYPE_NORMAL
- en: Further improvement ideas
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'I hope this was helpful â€” please go ahead and build your own chat UI using
    this tutorial as a starting point. Iâ€™m curious to learn what you are building,
    so please reach out in the comments. Here are some ideas on how this app could
    be improved, to get you started:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Implementing token streaming](https://platform.openai.com/docs/api-reference/chat/create#chat/create-stream)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Saving and displaying previous conversations
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Showing usage and costs on a per day basis
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Implementing more [control parameters](https://platform.openai.com/docs/api-reference/chat/create)
    such as temperature, repetition penalty, etc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Happy coding!
  prefs: []
  type: TYPE_NORMAL
- en: Heiko Hotz
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: ðŸ‘‹ Follow me on [Medium](https://heiko-hotz.medium.com/) and [LinkedIn](https://www.linkedin.com/in/heikohotz/)
    to read more about Generative AI, Machine Learning, and Natural Language Processing.
  prefs: []
  type: TYPE_NORMAL
- en: ðŸ‘¥ If youâ€™re based in London join one of our [NLP London Meetups](https://www.meetup.com/nlp_london/).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/10586d6826b8bfe25e40077e6c397425.png)'
  prefs: []
  type: TYPE_IMG
