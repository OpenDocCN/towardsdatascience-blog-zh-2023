- en: Higher Precision Imaging of Espresso Baskets
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/higher-precision-imaging-of-espresso-982270300b80?source=collection_archive---------12-----------------------#2023-02-28](https://towardsdatascience.com/higher-precision-imaging-of-espresso-982270300b80?source=collection_archive---------12-----------------------#2023-02-28)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Coffee Data Science
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To better measure the difference between the top and bottom of each hole
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://rmckeon.medium.com/?source=post_page-----982270300b80--------------------------------)[![Robert
    McKeon Aloe](../Images/ab747f7e39f9f4fdf10d92041d4dc37c.png)](https://rmckeon.medium.com/?source=post_page-----982270300b80--------------------------------)[](https://towardsdatascience.com/?source=post_page-----982270300b80--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----982270300b80--------------------------------)
    [Robert McKeon Aloe](https://rmckeon.medium.com/?source=post_page-----982270300b80--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fae592466d35f&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhigher-precision-imaging-of-espresso-982270300b80&user=Robert+McKeon+Aloe&userId=ae592466d35f&source=post_page-ae592466d35f----982270300b80---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----982270300b80--------------------------------)
    ·4 min read·Feb 28, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F982270300b80&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhigher-precision-imaging-of-espresso-982270300b80&user=Robert+McKeon+Aloe&userId=ae592466d35f&source=-----982270300b80---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F982270300b80&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhigher-precision-imaging-of-espresso-982270300b80&source=-----982270300b80---------------------bookmark_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: Cameras have greatly advanced over the years allowing people to take high quality
    images. While this can be useful for computer vision applications, often simple
    changes in design of experiment can greatly improve the quality of these images
    for specific applications. Enter coffee!
  prefs: []
  type: TYPE_NORMAL
- en: For a few years, I have been applying my image processing skills to [image espresso
    filter baskets](https://rmckeon.medium.com/espresso-baskets-and-related-topics-splash-page-ff10f690a738).
    Two years ago, I looked at trying to image the top and bottom to measure per hole
    shapes. However, this investigation halted when I had some trouble aligning the
    images automatically. Recently, I have been at it again, but I used manual alignment
    to improve the process.
  prefs: []
  type: TYPE_NORMAL
- en: While collecting some data, I realized my imaging setup could also be better,
    so let’s discuss them here.
  prefs: []
  type: TYPE_NORMAL
- en: Challenges
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Imaging espresso baskets is challenging for a few reasons:'
  prefs: []
  type: TYPE_NORMAL
- en: Metal baskets and reflectivity
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The holes are tiny
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Camera lens have curves
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: I have worked on adjusting for many of these things through data collection
    SOP and post-processing.
  prefs: []
  type: TYPE_NORMAL
- en: '**Data Collection**'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'I use a few standardized tools:'
  prefs: []
  type: TYPE_NORMAL
- en: A tablet screen to illuminate the basket holes
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A dark room to isolate other light sources
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Lower exposure to handle reflections of the tablet screen off of the basket
    back to the camera.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Post-processing**'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'I have a semi-automated process to make processing easier:'
  prefs: []
  type: TYPE_NORMAL
- en: Label basket using a blue circle
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Manually threshold images
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Automatically remove non-holes
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Readjust any ellipse shaped hole to a circle shape.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Adjust illumination across the filter
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How could this process be improved?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: First, the amount of light for the measurement of the top of the filter should
    match the measurement from the bottom.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e80ca11b5181c23617acf88c457943c5.png)'
  prefs: []
  type: TYPE_IMG
- en: All images by author
  prefs: []
  type: TYPE_NORMAL
- en: So I made a collar using a paper cup to hold the filter where the top (the inside
    of the basket) would be at the same height as the bottom of the filter when it
    is flipped over.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/91df198819c7223701afb755841f3398.png)'
  prefs: []
  type: TYPE_IMG
- en: Then I also made an adjustment for lighting. The full screen is needed to calibrate
    the image (# of pixels per millimeter), but any lighting not underneath the filter
    reflects off of the camera (my phone camera) back onto the filter.
  prefs: []
  type: TYPE_NORMAL
- en: To eliminate this, I used the full screen brightness for calibration, and I
    take another image with a white circle in the middle. This eliminates the reflection
    problem.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/345baacfecad403ba4dd5421757809f3.png)'
  prefs: []
  type: TYPE_IMG
- en: But then I need calibration! To make sure the images are aligned given that
    the phone might shift (even in a stand), I manually align the images in the app
    Procreate. I thought this would be more difficult, but it is very straight-forward
    with layers and 50% transparency. I also found fun things like how symmetric VST
    filter baskets are.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5dcf039bacfd2bcb8a857e8d521b841f.png)'
  prefs: []
  type: TYPE_IMG
- en: I use the calibration image to align both the top and bottom images so that
    everything is calibrated to the same scale. This involves linear resizing and
    object rotation until the holes are best or most aligned. I have to mirror the
    bottom image to make sure the holes are correctly aligned with the top image.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4d939f6d6e4b7d941851c8f988f6511a.png)'
  prefs: []
  type: TYPE_IMG
- en: Then I run these images through my algorithm. Below are the top and bottom images
    of the Wafo Classic in false color to depict hole size. There is a splotch of
    blue in the image of the top (on the left), and this is not due to some other
    issue. It is a persistent feature in multiple captures.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/09608664743c6b15e6c1758a401f50b7.png)![](../Images/e46fdd99356855c0b167e163b0cdcb32.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Left: From the top of the filter, Right: From the bottom of the filter (mirrored)'
  prefs: []
  type: TYPE_NORMAL
- en: These distributions can be used to better understand a filter basket.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/6e288cf3dfd54abe2cd60566bfb131a4.png)'
  prefs: []
  type: TYPE_IMG
- en: Fundamentally, this is a tool to help answer questions about filter baskets
    and performance. There are other challenges in connecting this information to
    actual espresso shot performance, but it is still enjoyable to work towards a
    deeper understanding of the key attributes for performance.
  prefs: []
  type: TYPE_NORMAL
- en: If you like, follow me on [Twitter](https://mobile.twitter.com/espressofun),
    [YouTube](https://m.youtube.com/channel/UClgcmAtBMTmVVGANjtntXTw), and [Instagram](https://www.instagram.com/espressofun/)
    where I post videos of espresso shots on different machines and espresso related
    stuff. You can also find me on [LinkedIn](https://www.linkedin.com/in/dr-robert-mckeon-aloe-01581595).
    You can also follow me on [Medium](https://towardsdatascience.com/@rmckeon/follow)
    and [Subscribe](https://rmckeon.medium.com/subscribe).
  prefs: []
  type: TYPE_NORMAL
- en: '[Further readings of mine](https://rmckeon.medium.com/story-collection-splash-page-e15025710347):'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[My Book](https://www.kickstarter.com/projects/espressofun/engineering-better-espresso-data-driven-coffee)'
  prefs: []
  type: TYPE_NORMAL
- en: '[My Links](https://rmckeon.medium.com/my-links-5de9eb69c26b)'
  prefs: []
  type: TYPE_NORMAL
- en: '[Collection of Espresso Articles](https://rmckeon.medium.com/a-collection-of-espresso-articles-de8a3abf9917?postPublishedType=repub)'
  prefs: []
  type: TYPE_NORMAL
- en: '[A Collection of Work and School Stories](https://rmckeon.medium.com/a-collection-of-work-and-school-stories-6b7ca5a58318)'
  prefs: []
  type: TYPE_NORMAL
