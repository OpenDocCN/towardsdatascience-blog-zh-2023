- en: 'Branches Are All You Need: Our Opinionated ML Versioning Framework'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 'Branches Are All You Need: Our Opinionated ML Versioning Framework'
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/branches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9?source=collection_archive---------3-----------------------#2023-10-10](https://towardsdatascience.com/branches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9?source=collection_archive---------3-----------------------#2023-10-10)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/branches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9?source=collection_archive---------3-----------------------#2023-10-10](https://towardsdatascience.com/branches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9?source=collection_archive---------3-----------------------#2023-10-10)
- en: A practical approach to versioning machine learning projects using Git Branches
    that simplifies workflows and organises data and models
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå®ç”¨çš„æœºå™¨å­¦ä¹ é¡¹ç›®ç‰ˆæœ¬æ§åˆ¶æ–¹æ³•ï¼Œä½¿ç”¨Gitåˆ†æ”¯ç®€åŒ–å·¥ä½œæµç¨‹ï¼Œç»„ç»‡æ•°æ®å’Œæ¨¡å‹
- en: '[](https://medium.com/@xdss?source=post_page-----057924a4a3a9--------------------------------)[![Jonathan
    (Yonatan) Alexander](../Images/7b2182b7048b5baffc642f8926d7a11b.png)](https://medium.com/@xdss?source=post_page-----057924a4a3a9--------------------------------)[](https://towardsdatascience.com/?source=post_page-----057924a4a3a9--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----057924a4a3a9--------------------------------)
    [Jonathan (Yonatan) Alexander](https://medium.com/@xdss?source=post_page-----057924a4a3a9--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@xdss?source=post_page-----057924a4a3a9--------------------------------)[![ä¹”çº³æ£®ï¼ˆçº¦çº³å¦ï¼‰Â·äºšå†å±±å¤§](../Images/7b2182b7048b5baffc642f8926d7a11b.png)](https://medium.com/@xdss?source=post_page-----057924a4a3a9--------------------------------)[](https://towardsdatascience.com/?source=post_page-----057924a4a3a9--------------------------------)[![èµ°å‘æ•°æ®ç§‘å­¦](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----057924a4a3a9--------------------------------)
    [ä¹”çº³æ£®ï¼ˆçº¦çº³å¦ï¼‰Â·äºšå†å±±å¤§](https://medium.com/@xdss?source=post_page-----057924a4a3a9--------------------------------)'
- en: Â·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Feba261287b37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbranches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9&user=Jonathan+%28Yonatan%29+Alexander&userId=eba261287b37&source=post_page-eba261287b37----057924a4a3a9---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----057924a4a3a9--------------------------------)
    Â·10 min readÂ·Oct 10, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F057924a4a3a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbranches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9&user=Jonathan+%28Yonatan%29+Alexander&userId=eba261287b37&source=-----057924a4a3a9---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[å…³æ³¨](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Feba261287b37&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbranches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9&user=Jonathan+%28Yonatan%29+Alexander&userId=eba261287b37&source=post_page-eba261287b37----057924a4a3a9---------------------post_header-----------)
    å‘è¡¨åœ¨ [èµ°å‘æ•°æ®ç§‘å­¦](https://towardsdatascience.com/?source=post_page-----057924a4a3a9--------------------------------)
    Â·10 åˆ†é’Ÿé˜…è¯»Â·2023å¹´10æœˆ10æ—¥[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F057924a4a3a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbranches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9&user=Jonathan+%28Yonatan%29+Alexander&userId=eba261287b37&source=-----057924a4a3a9---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F057924a4a3a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbranches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9&source=-----057924a4a3a9---------------------bookmark_footer-----------)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F057924a4a3a9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fbranches-are-all-you-need-our-opinionated-ml-versioning-framework-057924a4a3a9&source=-----057924a4a3a9---------------------bookmark_footer-----------)'
- en: TL;DR
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç®€è€Œè¨€ä¹‹
- en: A simple approach to versioning machine learning projects using Git Branches
    that simplifies workflows, organises data and models, and couples related parts
    of the project together.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªç®€å•çš„æœºå™¨å­¦ä¹ é¡¹ç›®ç‰ˆæœ¬æ§åˆ¶æ–¹æ³•ï¼Œä½¿ç”¨Gitåˆ†æ”¯ç®€åŒ–å·¥ä½œæµç¨‹ï¼Œç»„ç»‡æ•°æ®å’Œæ¨¡å‹ï¼Œå¹¶å°†é¡¹ç›®ç›¸å…³éƒ¨åˆ†ç´§å¯†è”ç³»åœ¨ä¸€èµ·ã€‚
- en: Introduction
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä»‹ç»
- en: When managing machine learning solutions, various aspects of the solutions are
    often distributed across multiple platforms and locations like GitHub for code,
    HuggingFace for models, Weights and Biases for tracking, S3 for a copy of everything,
    etc.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç®¡ç†æœºå™¨å­¦ä¹ è§£å†³æ–¹æ¡ˆæ—¶ï¼Œè§£å†³æ–¹æ¡ˆçš„å„ä¸ªæ–¹é¢é€šå¸¸åˆ†å¸ƒåœ¨å¤šä¸ªå¹³å°å’Œä½ç½®ï¼Œå¦‚GitHubç”¨äºä»£ç ï¼ŒHuggingFaceç”¨äºæ¨¡å‹ï¼ŒWeights and Biasesç”¨äºè¿½è¸ªï¼ŒS3ç”¨äºä¸€åˆ‡çš„å¤‡ä»½ç­‰ç­‰ã€‚
- en: On the data side, we have training data, processed data, training tracking data
    and model monitoring data. We save models for inference, including older versions
    and experimental models for online tests. We also have code for preprocessing,
    training, inference, experimentation, data science analysis, and monitoring alerts.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ•°æ®æ–¹é¢ï¼Œæˆ‘ä»¬æœ‰è®­ç»ƒæ•°æ®ã€å¤„ç†è¿‡çš„æ•°æ®ã€è®­ç»ƒè·Ÿè¸ªæ•°æ®å’Œæ¨¡å‹ç›‘æ§æ•°æ®ã€‚æˆ‘ä»¬ä¿å­˜ç”¨äºæ¨ç†çš„æ¨¡å‹ï¼ŒåŒ…æ‹¬æ—§ç‰ˆæœ¬å’Œç”¨äºåœ¨çº¿æµ‹è¯•çš„å®éªŒæ¨¡å‹ã€‚æˆ‘ä»¬è¿˜æœ‰ç”¨äºé¢„å¤„ç†ã€è®­ç»ƒã€æ¨ç†ã€å®éªŒã€æ•°æ®ç§‘å­¦åˆ†æå’Œç›‘æ§è­¦æŠ¥çš„ä»£ç ã€‚
- en: This can easily get out of hand.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¾ˆå®¹æ˜“å¤±æ§ã€‚
- en: '![](../Images/5b381eb0161c9606fe03f632ac0bde0b.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5b381eb0161c9606fe03f632ac0bde0b.png)'
- en: Image by author
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾åƒ
- en: Using various tools, environments, and asset addresses to track different parts
    of the ML lifecycle can result in scattered and uncoordinated states. This can
    lead to data loss, security breaches, and misconfigurations that need to be carefully
    managed.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨å„ç§å·¥å…·ã€ç¯å¢ƒå’Œèµ„äº§åœ°å€æ¥è·Ÿè¸ª ML ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒéƒ¨åˆ†ï¼Œå¯èƒ½å¯¼è‡´çŠ¶æ€åˆ†æ•£å’Œåè°ƒä¸è¶³ã€‚è¿™å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ã€å®‰å…¨æ¼æ´å’Œéœ€è¦ä»”ç»†ç®¡ç†çš„é…ç½®é”™è¯¯ã€‚
- en: In a previous project, we used SageMaker for daily training in an on-premises
    solution. This required customers to download a model on a daily basis and train
    it using various combinations of clientsâ€™ datasets.
  id: totrans-17
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åœ¨ä¸€ä¸ªä¹‹å‰çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°è§£å†³æ–¹æ¡ˆä¸­ä½¿ç”¨ SageMaker è¿›è¡Œæ—¥å¸¸è®­ç»ƒã€‚è¿™è¦æ±‚å®¢æˆ·æ¯å¤©ä¸‹è½½ä¸€ä¸ªæ¨¡å‹ï¼Œå¹¶ä½¿ç”¨å„ç§å®¢æˆ·æ•°æ®é›†çš„ç»„åˆè¿›è¡Œè®­ç»ƒã€‚
- en: ''
  id: totrans-18
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: We had to manage which binary model was trained with which training code on
    which data of which client, which model runs at which client with which inference
    code, etc.
  id: totrans-19
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¿…é¡»ç®¡ç†å“ªä¸ªäºŒè¿›åˆ¶æ¨¡å‹æ˜¯ç”¨å“ªä¸ªè®­ç»ƒä»£ç åœ¨å“ªä¸ªå®¢æˆ·çš„æ•°æ®ä¸Šè®­ç»ƒçš„ï¼Œå“ªä¸ªæ¨¡å‹åœ¨å“ªä¸ªå®¢æˆ·è¿è¡Œï¼Œä½¿ç”¨å“ªä¸ªæ¨ç†ä»£ç ç­‰ç­‰ã€‚
- en: In this post we will show how to utilize data versioning tools in order to address
    these issues using Git.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•åˆ©ç”¨æ•°æ®ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œé€šè¿‡ Git è§£å†³è¿™äº›é—®é¢˜ã€‚
- en: Data versioning tools allow you to commit data and model files alongside code,
    regardless of their size. By versioning all files in this way, you can bypass
    the inconvenience of managing data and model assets.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®ç‰ˆæœ¬æ§åˆ¶å·¥å…·å…è®¸ä½ ä¸ä»£ç ä¸€èµ·æäº¤æ•°æ®å’Œæ¨¡å‹æ–‡ä»¶ï¼Œæ— è®ºå…¶å¤§å°å¦‚ä½•ã€‚é€šè¿‡è¿™ç§æ–¹å¼å¯¹æ‰€æœ‰æ–‡ä»¶è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œä½ å¯ä»¥ç»•è¿‡ç®¡ç†æ•°æ®å’Œæ¨¡å‹èµ„äº§çš„ä¸ä¾¿ã€‚
- en: In an ideal world, you would only have the relevant code, data, and models for
    the specific task at hand. Whether you are developing or running ML training,
    tracking experiments, monitoring models in production, or conducting online experiments.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œä½ åªä¼šæ‹¥æœ‰ä¸å½“å‰ä»»åŠ¡ç›¸å…³çš„ä»£ç ã€æ•°æ®å’Œæ¨¡å‹ã€‚æ— è®ºä½ æ˜¯åœ¨å¼€å‘è¿˜æ˜¯è¿è¡Œ ML è®­ç»ƒã€è·Ÿè¸ªå®éªŒã€ç›‘æ§ç”Ÿäº§ä¸­çš„æ¨¡å‹ï¼Œè¿˜æ˜¯è¿›è¡Œåœ¨çº¿å®éªŒã€‚
- en: Instead of manually (or even automatically) connecting the right pieces â€” loading
    the right data in the right code, connecting them to the right model in HuggingFace
    in the right environment â€” imagine every time you checked out a branch, all the
    pieces were there.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ï¼Œä¸ç”¨æ‰‹åŠ¨ï¼ˆç”šè‡³è‡ªåŠ¨ï¼‰è¿æ¥æ­£ç¡®çš„éƒ¨åˆ† â€” åœ¨æ­£ç¡®çš„ä»£ç ä¸­åŠ è½½æ­£ç¡®çš„æ•°æ®ï¼Œå°†å®ƒä»¬è¿æ¥åˆ° HuggingFace ä¸­æ­£ç¡®çš„æ¨¡å‹ï¼Œå¹¶åœ¨æ­£ç¡®çš„ç¯å¢ƒä¸­è¿è¡Œ
    â€” æ¯æ¬¡ä½ æ£€å‡ºä¸€ä¸ªåˆ†æ”¯æ—¶ï¼Œæ‰€æœ‰éƒ¨åˆ†éƒ½å·²ç»å°±ä½ã€‚
- en: In this article, I will showcase a framework that replaces the complexity of
    juggling tools with Git, a system that nearly all ML teams are already using.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å±•ç¤ºä¸€ä¸ªæ¡†æ¶ï¼Œåˆ©ç”¨ Git ä»£æ›¿å¤„ç†å·¥å…·å¤æ‚æ€§çš„éš¾é¢˜ï¼ŒGit æ˜¯å‡ ä¹æ‰€æœ‰ ML å›¢é˜Ÿå·²ç»åœ¨ä½¿ç”¨çš„ç³»ç»Ÿã€‚
- en: The goal is to simplify and remove barriers to starting every stage of the ML
    workflow by having everything in a single place, managed by Git.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®æ ‡æ˜¯é€šè¿‡å°†æ‰€æœ‰å†…å®¹é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œç”± Git ç®¡ç†ï¼Œç®€åŒ–å¹¶æ¶ˆé™¤å¯åŠ¨ ML å·¥ä½œæµæ¯ä¸ªé˜¶æ®µçš„éšœç¢ã€‚
- en: '**Our requirements**'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**æˆ‘ä»¬çš„è¦æ±‚**'
- en: '**A simple workflow** that is easy to pause, pick up, and adjust to accommodate
    changing business and development needs. It should also support reproducibility
    and enable post-factual queries, such as â€œWhat data was my model trained on?â€'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**ä¸€ä¸ªç®€å•çš„å·¥ä½œæµ**ï¼Œæ˜“äºæš‚åœã€æ¢å¤å’Œè°ƒæ•´ä»¥é€‚åº”ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡å’Œå¼€å‘éœ€æ±‚ã€‚å®ƒè¿˜åº”æ”¯æŒå¯é‡ç°æ€§ï¼Œå¹¶å…è®¸äº‹åæŸ¥è¯¢ï¼Œä¾‹å¦‚â€œæˆ‘çš„æ¨¡å‹æ˜¯ç”¨ä»€ä¹ˆæ•°æ®è®­ç»ƒçš„ï¼Ÿâ€'
- en: '**Efficient use of data and code**, with a focus on cohesion, governance and
    auditing. â€” Aim to reuse data and code as much as possible, and leverage git features
    like commits, issues, and tags.'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**é«˜æ•ˆä½¿ç”¨æ•°æ®å’Œä»£ç **ï¼Œé‡ç‚¹å…³æ³¨å‡èšåŠ›ã€æ²»ç†å’Œå®¡è®¡ã€‚â€” æ—¨åœ¨å°½å¯èƒ½å¤šåœ°é‡ç”¨æ•°æ®å’Œä»£ç ï¼Œå¹¶åˆ©ç”¨ git çš„åŠŸèƒ½ï¼Œå¦‚æäº¤ã€é—®é¢˜å’Œæ ‡ç­¾ã€‚'
- en: '**Consolidating** all the different aspects of the ML solution is important.
    Often, experiment tracking, model monitoring in production, and online and offline
    experiments are separated from the training and inference sides of the solution.
    Here, we aim to unify them under one umbrella, making it easy to transition between
    them.'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**æ•´åˆ** ML è§£å†³æ–¹æ¡ˆçš„å„ä¸ªæ–¹é¢éå¸¸é‡è¦ã€‚é€šå¸¸ï¼Œå®éªŒè·Ÿè¸ªã€ç”Ÿäº§ä¸­çš„æ¨¡å‹ç›‘æ§ä»¥åŠåœ¨çº¿å’Œç¦»çº¿å®éªŒä¸è®­ç»ƒå’Œæ¨ç†éƒ¨åˆ†æ˜¯åˆ†å¼€çš„ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ—¨åœ¨å°†å®ƒä»¬ç»Ÿä¸€åœ¨ä¸€ä¸ªå¹³å°ä¸‹ï¼Œä½¿å…¶åœ¨å„éƒ¨åˆ†ä¹‹é—´è¿‡æ¸¡å˜å¾—å®¹æ˜“ã€‚'
- en: Follow **Git and ML best practices**, such as early and shareable data splits,
    testing, and simple collaboration, for different ML engineers.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: éµå¾ª**Git å’Œ ML æœ€ä½³å®è·µ**ï¼Œä¾‹å¦‚æ—©æœŸå’Œå¯å…±äº«çš„æ•°æ®æ‹†åˆ†ã€æµ‹è¯•ä»¥åŠç®€å•çš„åä½œï¼Œä»¥é€‚åº”ä¸åŒçš„ ML å·¥ç¨‹å¸ˆã€‚
- en: Key concepts
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å…³é”®æ¦‚å¿µ
- en: '**Every change is a Git** **commit:** This includes data uploads, feature engineering,
    model overriding, merging experiment metrics results, model monitoring, and naturally
    code changes.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ¯ä¸ªæ›´æ”¹éƒ½æ˜¯ä¸€ä¸ª Git** **æäº¤**ï¼šè¿™åŒ…æ‹¬æ•°æ®ä¸Šä¼ ã€ç‰¹å¾å·¥ç¨‹ã€æ¨¡å‹è¦†ç›–ã€åˆå¹¶å®éªŒæŒ‡æ ‡ç»“æœã€æ¨¡å‹ç›‘æ§ï¼Œä»¥åŠè‡ªç„¶çš„ä»£ç æ›´æ”¹ã€‚'
- en: '**Active branches**: It is common practice to use different branches for development
    and production. However, we can take it a step further here. This means that you
    can check out a branch and have all the necessary data, code, models, documents,
    readmes, and model cards with metrics in one place.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ´»åŠ¨åˆ†æ”¯**ï¼šå°†ä¸åŒçš„åˆ†æ”¯ç”¨äºå¼€å‘å’Œç”Ÿäº§æ˜¯å¸¸è§çš„åšæ³•ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ›´è¿›ä¸€æ­¥ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç­¾å‡ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åœ¨ä¸€ä¸ªåœ°æ–¹æ‹¥æœ‰æ‰€æœ‰å¿…è¦çš„æ•°æ®ã€ä»£ç ã€æ¨¡å‹ã€æ–‡æ¡£ã€readmes
    å’Œå¸¦æœ‰æŒ‡æ ‡çš„æ¨¡å‹å¡ã€‚'
- en: ğŸ¤¯ Your repository **is** your blob-store! Your branch functions like a bucket
    within your blob-store, enabling you to upload, download, and store data and models.
  id: totrans-34
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸ¤¯ ä½ çš„ä»£ç åº“**å°±æ˜¯**ä½ çš„ blob å­˜å‚¨ï¼ä½ çš„åˆ†æ”¯åƒä¸€ä¸ªæ¡¶ä¸€æ ·åœ¨ä½ çš„ blob å­˜å‚¨ä¸­è¿è¡Œï¼Œå…è®¸ä½ ä¸Šä¼ ã€ä¸‹è½½å’Œå­˜å‚¨æ•°æ®å’Œæ¨¡å‹ã€‚
- en: This allows you to use different branches for various development, experimentation,
    and production needs, rather than relying on different platforms and tools.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å…è®¸ä½ ä¸ºä¸åŒçš„å¼€å‘ã€å®éªŒå’Œç”Ÿäº§éœ€æ±‚ä½¿ç”¨ä¸åŒçš„åˆ†æ”¯ï¼Œè€Œä¸æ˜¯ä¾èµ–äºä¸åŒçš„å¹³å°å’Œå·¥å…·ã€‚
- en: '**Merges as workflow:** They are used to combine branches. Code is merged normally,
    and a model typically overrides the existing model. When data is merged, it is
    usually appended. To receive new data, it is â€œpulledâ€ from another branch by copy.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**åˆå¹¶ä½œä¸ºå·¥ä½œæµç¨‹**ï¼šå®ƒä»¬ç”¨äºåˆå¹¶åˆ†æ”¯ã€‚ä»£ç é€šå¸¸è¢«åˆå¹¶ï¼Œè€Œæ¨¡å‹é€šå¸¸ä¼šè¦†ç›–ç°æœ‰æ¨¡å‹ã€‚å½“æ•°æ®è¢«åˆå¹¶æ—¶ï¼Œé€šå¸¸æ˜¯è¿½åŠ çš„ã€‚è¦æ¥æ”¶æ–°æ•°æ®ï¼Œå¯ä»¥ä»å¦ä¸€ä¸ªåˆ†æ”¯â€œæ‹‰å–â€æ•°æ®è¿›è¡Œå¤åˆ¶ã€‚'
- en: Merge data can be as simple as a copy of files or appending to a JSON list.
    In more sophisticated cases you can merge sqlite databases.
  id: totrans-37
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åˆå¹¶æ•°æ®å¯ä»¥åƒæ–‡ä»¶å¤åˆ¶æˆ–è¿½åŠ åˆ° JSON åˆ—è¡¨ä¸€æ ·ç®€å•ã€‚åœ¨æ›´å¤æ‚çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥åˆå¹¶ sqlite æ•°æ®åº“ã€‚
- en: '**Deduplication**, a commonly used feature in data versioning tools, prevents
    the creation of multiple copies of files, even when there are multiple branches
    containing the same files.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**å»é‡**ï¼Œè¿™æ˜¯æ•°æ®ç‰ˆæœ¬æ§åˆ¶å·¥å…·ä¸­å¸¸ç”¨çš„åŠŸèƒ½ï¼Œé˜²æ­¢å³ä½¿åœ¨å¤šä¸ªåˆ†æ”¯ä¸­åŒ…å«ç›¸åŒæ–‡ä»¶æ—¶ï¼Œä¹Ÿä¼šåˆ›å»ºå¤šä¸ªæ–‡ä»¶å‰¯æœ¬ã€‚'
- en: Types of Branches
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ†æ”¯ç±»å‹
- en: '![](../Images/3798c98ea6ed53167fd70c7c61003eaa.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3798c98ea6ed53167fd70c7c61003eaa.png)'
- en: Image by author
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥è‡ªä½œè€…
- en: Main Branch
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¸»åˆ†æ”¯
- en: First, we use our projectâ€™s *main* branch to store the problem definition, documentation,
    data description, and project structure. This serves as a space for collaboration
    and discussions.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨é¡¹ç›®çš„*main*åˆ†æ”¯æ¥å­˜å‚¨é—®é¢˜å®šä¹‰ã€æ–‡æ¡£ã€æ•°æ®æè¿°å’Œé¡¹ç›®ç»“æ„ã€‚è¿™ä½œä¸ºåä½œå’Œè®¨è®ºçš„ç©ºé—´ã€‚
- en: '**TIP**: Beginning with clearly defining the business problem, determining
    the desired outcome, identifying target values or labels and how they are obtained,
    and establishing evaluation metrics and requirements, we can ensure a successful
    start to our project and provide a place for onboarding and collaboration.'
  id: totrans-44
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**æç¤º**ï¼šé€šè¿‡æ˜ç¡®å®šä¹‰ä¸šåŠ¡é—®é¢˜ã€ç¡®å®šæœŸæœ›çš„ç»“æœã€è¯†åˆ«ç›®æ ‡å€¼æˆ–æ ‡ç­¾åŠå…¶è·å–æ–¹å¼ï¼Œå¹¶å»ºç«‹è¯„ä¼°æŒ‡æ ‡å’Œè¦æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿é¡¹ç›®çš„æˆåŠŸå¯åŠ¨ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¥é—¨å’Œåä½œçš„åœ°æ–¹ã€‚'
- en: We can also use it for **tracking** experiments, where your experimentsâ€™ results
    are combined. For example, [MLflowâ€™s](http://mlflow.org/) mlruns folder can be
    merged there for this purpose. Any collaborator can checkout this branch and run
    the UI.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥**è·Ÿè¸ª**å®éªŒï¼Œå°†å®éªŒç»“æœè¿›è¡Œåˆå¹¶ã€‚ä¾‹å¦‚ï¼Œ[MLflow](http://mlflow.org/)çš„ mlruns æ–‡ä»¶å¤¹å¯ä»¥åœ¨æ­¤å¤„è¿›è¡Œåˆå¹¶ã€‚ä»»ä½•åä½œè€…éƒ½å¯ä»¥ç­¾å‡ºè¿™ä¸ªåˆ†æ”¯å¹¶è¿è¡Œ
    UIã€‚
- en: Alternatively, the tracking can be done in another branch.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å¦å¤–ï¼Œè·Ÿè¸ªå¯ä»¥åœ¨å¦ä¸€ä¸ªåˆ†æ”¯ä¸­å®Œæˆã€‚
- en: Starting this way is very simple, and as needs change over time, it is possible
    to upgrade to an MLflow server or a tracking platform like Weights and Biases
    with minimal changes.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥è¿™ç§æ–¹å¼å¼€å§‹éå¸¸ç®€å•ï¼Œéšç€éœ€æ±‚çš„å˜åŒ–ï¼Œå¯ä»¥ä»¥æœ€å°‘çš„æ›´æ”¹å‡çº§åˆ° MLflow æœåŠ¡å™¨æˆ–ç±»ä¼¼ Weights and Biases çš„è·Ÿè¸ªå¹³å°ã€‚
- en: Data Branches
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ•°æ®åˆ†æ”¯
- en: These are branches of the project, which mainly include data files, documentation,
    and transformation scripts, and they **remain active**. You can think of them
    like S3 buckets, but instead of uploading and downloading, you checkout a branch,
    and your files are there.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›æ˜¯é¡¹ç›®çš„åˆ†æ”¯ï¼Œä¸»è¦åŒ…æ‹¬æ•°æ®æ–‡ä»¶ã€æ–‡æ¡£å’Œè½¬æ¢è„šæœ¬ï¼Œå¹¶ä¸”å®ƒä»¬**ä¿æŒæ´»åŠ¨çŠ¶æ€**ã€‚ä½ å¯ä»¥æŠŠå®ƒä»¬æƒ³è±¡æˆ S3 æ¡¶ï¼Œä½†ä¸æ˜¯ä¸Šä¼ å’Œä¸‹è½½ï¼Œè€Œæ˜¯ç­¾å‡ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½ çš„æ–‡ä»¶å°±åœ¨é‚£é‡Œã€‚
- en: It is recommended to always commit (upload) to the ***raw*** branch. These create
    a source of truth, a place never edited or deleted, so we can always track where
    data is coming from and passing. It also enables creating new flows easily, auditing
    and governess.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨èå§‹ç»ˆæäº¤ï¼ˆä¸Šä¼ ï¼‰åˆ°***åŸå§‹***åˆ†æ”¯ã€‚è¿™äº›åˆ†æ”¯åˆ›å»ºäº†ä¸€ä¸ªçœŸå®çš„æ¥æºï¼Œä¸€ä¸ªä»ä¸è¢«ç¼–è¾‘æˆ–åˆ é™¤çš„åœ°æ–¹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å§‹ç»ˆè¿½è¸ªæ•°æ®çš„æ¥æºå’Œç»è¿‡è¿‡ç¨‹ã€‚å®ƒè¿˜ä½¿å¾—åˆ›å»ºæ–°æµç¨‹ã€å®¡æ ¸å’Œæ²»ç†å˜å¾—å®¹æ˜“ã€‚
- en: ğŸ’¡ If you add a commit message of where the data is coming from, you can get
    even more granular observability over your data.
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸ’¡ å¦‚æœä½ æ·»åŠ ä¸€ä¸ªå…³äºæ•°æ®æ¥æºçš„æäº¤ä¿¡æ¯ï¼Œä½ å¯ä»¥è·å¾—å¯¹æ•°æ®æ›´ç»†è‡´çš„è§‚å¯Ÿã€‚
- en: You can use another *clean* branch where only clean data exists. For example,
    broken images or empty text files that were uploaded to the *raw branch* do not
    appear in the *clean* branch.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªä»…åŒ…å«å¹²å‡€æ•°æ®çš„*æ¸…ç†*åˆ†æ”¯ã€‚ä¾‹å¦‚ï¼Œä¸Šä¼ åˆ°*åŸå§‹åˆ†æ”¯*çš„æŸåå›¾ç‰‡æˆ–ç©ºæ–‡æœ¬æ–‡ä»¶ä¸ä¼šå‡ºç°åœ¨*æ¸…ç†*åˆ†æ”¯ä¸­ã€‚
- en: A *split* branch where the data is divided for training, validation, and testing
    can ensure that all teams and collaborators work on the same playing field.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ª*åˆ†å‰²*åˆ†æ”¯ï¼Œå…¶ä¸­æ•°æ®è¢«åˆ’åˆ†ç”¨äºè®­ç»ƒã€éªŒè¯å’Œæµ‹è¯•ï¼Œå¯ä»¥ç¡®ä¿æ‰€æœ‰å›¢é˜Ÿå’Œåä½œè€…åœ¨ç›¸åŒçš„æ¡ä»¶ä¸‹å·¥ä½œã€‚
- en: This approach helps prevent data leakage and enables more robust feature engineering
    and collaboration. Minimizing the chance of examples from the test set being included
    in the training stages reduces the risk of introducing bias. Additionally, having
    all collaborators on the same split ensures consistent and unbiased results in
    an experiment.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§æ–¹æ³•æœ‰åŠ©äºé˜²æ­¢æ•°æ®æ³„æ¼ï¼Œå¹¶å®ç°æ›´ç¨³å¥çš„ç‰¹å¾å·¥ç¨‹å’Œåä½œã€‚æœ€å°åŒ–æµ‹è¯•é›†æ ·æœ¬è¢«åŒ…å«åœ¨è®­ç»ƒé˜¶æ®µçš„æœºä¼šå‡å°‘äº†å¼•å…¥åå·®çš„é£é™©ã€‚æ­¤å¤–ï¼Œæ‰€æœ‰åä½œè€…ä½¿ç”¨ç›¸åŒçš„åˆ†å‰²å¯ä»¥ç¡®ä¿å®éªŒç»“æœçš„ä¸€è‡´æ€§å’Œæ— åã€‚
- en: In a former classification project, I was part of a team of individual contributors
    where each person ran the whole pipeline from scratch; each of us had used different
    data splitting percentages and seeds, which led to weaker models in production
    based on bugs and data biases.
  id: totrans-55
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åœ¨ä¹‹å‰çš„åˆ†ç±»é¡¹ç›®ä¸­ï¼Œæˆ‘æ˜¯ä¸€ä¸ªç”±ä¸ªä½“è´¡çŒ®è€…ç»„æˆçš„å›¢é˜Ÿçš„ä¸€å‘˜ï¼Œæ¯ä¸ªäººä»å¤´å¼€å§‹è¿è¡Œæ•´ä¸ªç®¡é“ï¼›æˆ‘ä»¬æ¯ä¸ªäººä½¿ç”¨äº†ä¸åŒçš„æ•°æ®æ‹†åˆ†ç™¾åˆ†æ¯”å’Œç§å­ï¼Œè¿™å¯¼è‡´äº†åœ¨ç”Ÿäº§ä¸­å› é”™è¯¯å’Œæ•°æ®åè§è€Œäº§ç”Ÿè¾ƒå¼±çš„æ¨¡å‹ã€‚
- en: '![](../Images/9e919b0d26f2d300c17892580d9ba93d.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9e919b0d26f2d300c17892580d9ba93d.png)'
- en: Image by author
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡
- en: 'ğŸ’¡ **ML tip: The three phases model development best practice** We use the â€œtrainâ€
    and â€œvalidationâ€ datasets to train and optimize the modelâ€™s hyperparameters. We
    then use the train plus validation as training set to train our tuned model and
    evaluate with the test dataset **only once**. Lastly, we train the model on all
    the data and save it as our model.'
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸ’¡ **æœºå™¨å­¦ä¹ æç¤ºï¼šä¸‰é˜¶æ®µæ¨¡å‹å¼€å‘æœ€ä½³å®è·µ** æˆ‘ä»¬ä½¿ç”¨â€œè®­ç»ƒâ€å’Œâ€œéªŒè¯â€æ•°æ®é›†æ¥è®­ç»ƒå’Œä¼˜åŒ–æ¨¡å‹çš„è¶…å‚æ•°ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è®­ç»ƒåŠ éªŒè¯æ•°æ®é›†ä½œä¸ºè®­ç»ƒé›†æ¥è®­ç»ƒè°ƒæ•´åçš„æ¨¡å‹ï¼Œå¹¶**ä»…ä¸€æ¬¡**ä½¿ç”¨æµ‹è¯•æ•°æ®é›†è¿›è¡Œè¯„ä¼°ã€‚æœ€åï¼Œæˆ‘ä»¬åœ¨æ‰€æœ‰æ•°æ®ä¸Šè®­ç»ƒæ¨¡å‹å¹¶å°†å…¶ä¿å­˜ä¸ºæˆ‘ä»¬çš„æ¨¡å‹ã€‚
- en: Stable Branches
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¨³å®šåˆ†æ”¯
- en: These branches are **active** branches for **training and inference**. Here,
    you can run your training, save your model, checkpoints, and model card, run tests,
    build and test the Docker image, commit everything at the end of a training cycle,
    and then **Tag**. They should be capable of handling the retrieval of new data
    and re-training. This is where the automation takes place.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›åˆ†æ”¯æ˜¯**æ´»è·ƒçš„**åˆ†æ”¯ï¼Œç”¨äº**è®­ç»ƒå’Œæ¨æ–­**ã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥è¿è¡Œè®­ç»ƒï¼Œä¿å­˜æ¨¡å‹ã€æ£€æŸ¥ç‚¹å’Œæ¨¡å‹å¡ï¼Œè¿è¡Œæµ‹è¯•ï¼Œæ„å»ºå’Œæµ‹è¯•Dockeré•œåƒï¼Œåœ¨è®­ç»ƒå‘¨æœŸç»“æŸæ—¶æäº¤æ‰€æœ‰å†…å®¹ï¼Œç„¶å**æ ‡è®°**ã€‚å®ƒä»¬åº”èƒ½å¤„ç†æ–°æ•°æ®çš„æ£€ç´¢å’Œé‡æ–°è®­ç»ƒã€‚è¿™æ˜¯è‡ªåŠ¨åŒ–å‘ç”Ÿçš„åœ°æ–¹ã€‚
- en: âš ï¸ **No code is written in these branches.**
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: âš ï¸ **è¿™äº›åˆ†æ”¯ä¸­ä¸ç¼–å†™ä»£ç ã€‚**
- en: This ensures that a model is coupled with the data it was trained on, the code
    used to train and run it in production (including feature engineering), and the
    result metrics. All of these components are combined into a single unified â€œsnapshotâ€.
    Whenever you check out a tag, all the necessary pieces for that model are present.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç¡®ä¿æ¨¡å‹ä¸å…¶è®­ç»ƒæ‰€ç”¨çš„æ•°æ®ã€ç”¨äºè®­ç»ƒå’Œåœ¨ç”Ÿäº§ä¸­è¿è¡Œçš„ä»£ç ï¼ˆåŒ…æ‹¬ç‰¹å¾å·¥ç¨‹ï¼‰ä»¥åŠç»“æœæŒ‡æ ‡ç›¸å…³è”ã€‚æ‰€æœ‰è¿™äº›ç»„ä»¶è¢«åˆå¹¶æˆä¸€ä¸ªç»Ÿä¸€çš„â€œå¿«ç…§â€ã€‚æ¯å½“ä½ æ£€å‡ºä¸€ä¸ªæ ‡ç­¾æ—¶ï¼Œæ‰€æœ‰å¿…è¦çš„æ¨¡å‹ç»„ä»¶éƒ½å­˜åœ¨ã€‚
- en: 'ğŸ’¡ **Tip**: By choosing the tag name ahead of time, you can add to the tracking
    info during training as a parameter. This ensures you can always retrieve the
    model-data-code â€œsnapshotâ€ given the tracking data using any tracking tool.'
  id: totrans-63
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸ’¡ **æç¤º**ï¼šé€šè¿‡æå‰é€‰æ‹©æ ‡ç­¾åç§°ï¼Œä½ å¯ä»¥åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å°†å…¶ä½œä¸ºå‚æ•°æ·»åŠ åˆ°è·Ÿè¸ªä¿¡æ¯ä¸­ã€‚è¿™ç¡®ä¿ä½ å¯ä»¥é€šè¿‡ä»»ä½•è·Ÿè¸ªå·¥å…·æ ¹æ®è·Ÿè¸ªæ•°æ®éšæ—¶æ£€ç´¢æ¨¡å‹-æ•°æ®-ä»£ç çš„â€œå¿«ç…§â€ã€‚
- en: After training, only the tracking data is merged (copied) to your *main* branch
    for tracking.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: è®­ç»ƒåï¼Œåªæœ‰è·Ÿè¸ªæ•°æ®è¢«åˆå¹¶ï¼ˆå¤åˆ¶ï¼‰åˆ°ä½ çš„*ä¸»*åˆ†æ”¯ç”¨äºè·Ÿè¸ªã€‚
- en: In the simplest case, it can be a JSON text file that contains the hyperparameters
    and evaluation results. This file is then appended to a list in the *main* branch.
    In the case of MLflow, it involve copying the experiments from the [mlruns folder](https://mlflow.org/docs/latest/tracking.html#where-runs-are-recorded)
    to the *main* branch.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«è¶…å‚æ•°å’Œè¯„ä¼°ç»“æœçš„ JSON æ–‡æœ¬æ–‡ä»¶ã€‚ç„¶åå°†è¯¥æ–‡ä»¶é™„åŠ åˆ° *main* åˆ†æ”¯ä¸­çš„åˆ—è¡¨ä¸­ã€‚åœ¨ MLflow çš„æƒ…å†µä¸‹ï¼Œå®ƒæ¶‰åŠå°†å®éªŒä»
    [mlruns æ–‡ä»¶å¤¹](https://mlflow.org/docs/latest/tracking.html#where-runs-are-recorded)
    å¤åˆ¶åˆ° *main* åˆ†æ”¯ã€‚
- en: Coding Branches
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä»£ç åˆ†æ”¯
- en: These branches are for **code development &** **data exploration**, training
    on sampled or small data until you have a working program. While developing, you
    are welcome to use all Git best practices. However, only branch out to a *stable*branch
    when **no further changes to the code are required,** even if additional data
    is pulled in. These branches **should include** the inference code, the server,
    the Dockerfile, and tests.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›åˆ†æ”¯ç”¨äº **ä»£ç å¼€å‘å’Œ** **æ•°æ®æ¢ç´¢**ï¼Œåœ¨æŠ½æ ·æˆ–å°æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œç›´åˆ°ä½ æ‹¥æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ç¨‹åºã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¬¢è¿ä½¿ç”¨æ‰€æœ‰ Git æœ€ä½³å®è·µã€‚ç„¶è€Œï¼Œåªæœ‰åœ¨
    **ä¸å†éœ€è¦è¿›ä¸€æ­¥æ›´æ”¹ä»£ç ** çš„æƒ…å†µä¸‹æ‰åˆ›å»º *stable* åˆ†æ”¯ï¼Œå³ä½¿é¢å¤–çš„æ•°æ®è¢«æ‹‰å–ã€‚è¿™äº›åˆ†æ”¯ **åº”è¯¥åŒ…æ‹¬** æ¨æ–­ä»£ç ã€æœåŠ¡å™¨ã€Dockerfile
    å’Œæµ‹è¯•ã€‚
- en: '**There is always at least one development branch that remains active**, where
    all new features, bug fixes, and other changes are merged.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '**å§‹ç»ˆè‡³å°‘æœ‰ä¸€ä¸ªå¼€å‘åˆ†æ”¯ä¿æŒæ´»åŠ¨çŠ¶æ€**ï¼Œæ‰€æœ‰æ–°åŠŸèƒ½ã€é”™è¯¯ä¿®å¤å’Œå…¶ä»–æ›´æ”¹éƒ½åœ¨æ­¤åˆ†æ”¯ä¸­åˆå¹¶ã€‚'
- en: ğŸ’¡ ML and MLOps engineers can collaborate on the training and inference sides.
  id: totrans-69
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸ’¡ ML å’Œ MLOps å·¥ç¨‹å¸ˆå¯ä»¥åœ¨è®­ç»ƒå’Œæ¨æ–­æ–¹é¢è¿›è¡Œåä½œã€‚
- en: For example, you can create a ***dev/model*** branch where you develop a **baseline**
    model. This can be the most popular class for classification or the mean/median
    for regression. The focus is on setting up the code while thoroughly understanding
    your data.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª ***dev/model*** åˆ†æ”¯ï¼Œåœ¨å…¶ä¸­å¼€å‘ä¸€ä¸ª **åŸºçº¿** æ¨¡å‹ã€‚è¿™å¯ä»¥æ˜¯åˆ†ç±»ä¸­æœ€æµè¡Œçš„ç±»åˆ«æˆ–å›å½’ä¸­çš„å‡å€¼/ä¸­ä½æ•°ã€‚é‡ç‚¹æ˜¯è®¾ç½®ä»£ç ï¼ŒåŒæ—¶å½»åº•ç†è§£ä½ çš„æ•°æ®ã€‚
- en: When itâ€™s stable, and tests pass, we branch out to ***stable/model*** where
    we train and commit the model, code and data together to remote and **tag** that
    commit. That is fast and easy to share and will enable the DevOps, backend, and
    frontend teams to initiate development and exchange feedback. It will also facilitate
    validating of newly discovered requirements in a real-world environment as early
    as possible.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: å½“å®ƒç¨³å®šå¹¶ä¸”æµ‹è¯•é€šè¿‡åï¼Œæˆ‘ä»¬ä¼šåˆ†æ”¯åˆ° ***stable/model***ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è®­ç»ƒå¹¶æäº¤æ¨¡å‹ã€ä»£ç å’Œæ•°æ®åˆ°è¿œç¨‹ï¼Œå¹¶ **æ ‡è®°** è¯¥æäº¤ã€‚è¿™ç§æ–¹å¼å¿«é€Ÿä¸”æ˜“äºåˆ†äº«ï¼Œèƒ½å¤Ÿä½¿
    DevOpsã€åå°å’Œå‰ç«¯å›¢é˜Ÿå¯åŠ¨å¼€å‘å¹¶äº¤æ¢åé¦ˆã€‚å®ƒè¿˜å°†ä¿ƒè¿›å°½æ—©åœ¨çœŸå®ç¯å¢ƒä¸­éªŒè¯æ–°å‘ç°çš„éœ€æ±‚ã€‚
- en: Next, we develop the model on the *dev/model* branch to a **simple model** like
    linear regression, and when itâ€™s ready, and tests pass, we can merge it to *stable/model*
    where we train, commit, and tag a release to *prod.*
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ *dev/model* åˆ†æ”¯ä¸Šå¼€å‘ä¸€ä¸ª **ç®€å•æ¨¡å‹**ï¼Œæ¯”å¦‚çº¿æ€§å›å½’ï¼Œå½“å®ƒå‡†å¤‡å¥½å¹¶ä¸”æµ‹è¯•é€šè¿‡åï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆå¹¶åˆ° *stable/model*
    åˆ†æ”¯ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬è®­ç»ƒã€æäº¤ï¼Œå¹¶ä¸º *prod* æ‰“ä¸Šæ ‡ç­¾ã€‚
- en: This approach gives you the freedom to incrementally improve your model while
    preserving the full context of previous models in the stable branch.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§æ–¹æ³•è®©ä½ å¯ä»¥é€æ­¥æ”¹è¿›æ¨¡å‹ï¼ŒåŒæ—¶ä¿ç•™ç¨³å®šåˆ†æ”¯ä¸­ä¹‹å‰æ¨¡å‹çš„å®Œæ•´ä¸Šä¸‹æ–‡ã€‚
- en: '![](../Images/849e4c8126f79385b6641dc638a6e122.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/849e4c8126f79385b6641dc638a6e122.png)'
- en: Image by author
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±ä½œè€…æä¾›
- en: 'From this point, we have three options:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è¿™ä¸€ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬æœ‰ä¸‰ç§é€‰æ‹©ï¼š
- en: We can **re-train** when more data arrives by pulling data to the stable branch.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å½“æ›´å¤šæ•°æ®åˆ°è¾¾æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ•°æ®æ‹‰å–åˆ°ç¨³å®šåˆ†æ”¯æ¥ **é‡æ–°è®­ç»ƒ** æ¨¡å‹ã€‚
- en: We can start **experimentation** using feature engineering on the *dev/linear-regression*
    branch.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥å¼€å§‹åœ¨ *dev/linear-regression* åˆ†æ”¯ä¸Šä½¿ç”¨ç‰¹å¾å·¥ç¨‹è¿›è¡Œ **å®éªŒ**ã€‚
- en: We can create a **new** *dev/new-approach* branch for more sophisticated models.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä¸ºæ›´å¤æ‚çš„æ¨¡å‹åˆ›å»ºä¸€ä¸ª **æ–°çš„** *dev/new-approach* åˆ†æ”¯ã€‚
- en: Monitoring Branch
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç›‘æ§åˆ†æ”¯
- en: In model monitoring we care about the data distribution, outliers, and prediction
    distributions.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ¨¡å‹ç›‘æ§ä¸­ï¼Œæˆ‘ä»¬å…³æ³¨æ•°æ®åˆ†å¸ƒã€å¼‚å¸¸å€¼å’Œé¢„æµ‹åˆ†å¸ƒã€‚
- en: In the *monitoring* branch, we save the queried data, commit tag and model prediction
    from prod as files.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ *monitoring* åˆ†æ”¯ä¸­ï¼Œæˆ‘ä»¬å°†æŸ¥è¯¢åˆ°çš„æ•°æ®ã€æäº¤æ ‡ç­¾å’Œæ¥è‡ª prod çš„æ¨¡å‹é¢„æµ‹ä¿å­˜ä¸ºæ–‡ä»¶ã€‚
- en: ğŸ’¡ You can use multiple monitoring branches for each environment â€” dev, stable,
    and prod.
  id: totrans-83
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸ’¡ ä½ å¯ä»¥ä¸ºæ¯ä¸ªç¯å¢ƒï¼ˆå¼€å‘ã€ç¨³å®šå’Œç”Ÿäº§ï¼‰ä½¿ç”¨å¤šä¸ªç›‘æ§åˆ†æ”¯ã€‚
- en: We can set alerts on data commits to test for [drift](/drift-in-machine-learning-e49df46803a)
    in any feature distributions, outlier values, [calibration](https://machinelearningmastery.com/probability-calibration-for-imbalanced-classification/)
    sanity test, and save the alerts code; this enables more advanced solutions like
    an outlier detection model as we can save the model in this branch too.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®æäº¤ä¸Šè®¾ç½®è­¦æŠ¥ï¼Œä»¥æµ‹è¯•ä»»ä½•ç‰¹å¾åˆ†å¸ƒçš„[æ¼‚ç§»](/drift-in-machine-learning-e49df46803a)ã€å¼‚å¸¸å€¼ã€[æ ¡å‡†](https://machinelearningmastery.com/probability-calibration-for-imbalanced-classification/)çš„åˆç†æ€§æµ‹è¯•ï¼Œå¹¶ä¿å­˜è­¦æŠ¥ä»£ç ï¼›è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å®ç°æ›´é«˜çº§çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚å¼‚å¸¸å€¼æ£€æµ‹æ¨¡å‹ï¼Œå› ä¸ºæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªåˆ†æ”¯ä¸­ä¿å­˜æ¨¡å‹ã€‚
- en: '![](../Images/5a51b65d89c5a4d83317f23c3ad83ba9.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5a51b65d89c5a4d83317f23c3ad83ba9.png)'
- en: Image by author
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡
- en: This branch could typically belong to another project that is decoupled from
    the code responsible for creating the monitoring logs, as well as the data and
    model that generated them.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªåˆ†æ”¯é€šå¸¸å¯ä»¥å±äºä¸€ä¸ªä¸ç”Ÿæˆç›‘æ§æ—¥å¿—çš„ä»£ç ã€æ•°æ®å’Œæ¨¡å‹è§£è€¦çš„å…¶ä»–é¡¹ç›®ã€‚
- en: Analysis Branch
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ†æåˆ†æ”¯
- en: Data science and analysis is another aspect of the project that is often separated
    into a different project. This is where the analysis code and non-training data
    of the data scientists are gathered.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®ç§‘å­¦å’Œåˆ†ææ˜¯é¡¹ç›®çš„å¦ä¸€ä¸ªæ–¹é¢ï¼Œé€šå¸¸è¢«åˆ†ç¦»åˆ°ä¸åŒçš„é¡¹ç›®ä¸­ã€‚è¿™æ˜¯æ•°æ®ç§‘å­¦å®¶çš„åˆ†æä»£ç å’Œéè®­ç»ƒæ•°æ®æ±‡èšçš„åœ°æ–¹ã€‚
- en: A data scientist can check out and pull data from the *monitoring* branch to
    run analysis, A/B tests, and other online and offline experiments. They can also
    use data from the *raw* branch for these purposes.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®ç§‘å­¦å®¶å¯ä»¥ä»*monitoring*åˆ†æ”¯ä¸­æ£€æŸ¥å’Œæå–æ•°æ®ï¼Œä»¥è¿›è¡Œåˆ†æã€A/Bæµ‹è¯•å’Œå…¶ä»–åœ¨çº¿ä¸ç¦»çº¿å®éªŒã€‚ä»–ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨*raw*åˆ†æ”¯ä¸­çš„æ•°æ®è¿›è¡Œè¿™äº›ç›®çš„ã€‚
- en: Online examples are simpler, as each experiment group corresponds to a branch.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨çº¿ç¤ºä¾‹æ›´ç®€å•ï¼Œå› ä¸ºæ¯ä¸ªå®éªŒç»„å¯¹åº”ä¸€ä¸ªåˆ†æ”¯ã€‚
- en: 'ğŸ’¡ **Tip: Common online experiments:**'
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸ’¡ **æç¤ºï¼šå¸¸è§çš„åœ¨çº¿å®éªŒï¼š**
- en: ''
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**Forward test**- Comparing the current model 99% vs. a candidate model 1%.'
  id: totrans-94
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**å‰å‘æµ‹è¯•** - æ¯”è¾ƒå½“å‰æ¨¡å‹çš„99%ä¸å€™é€‰æ¨¡å‹çš„1%ã€‚'
- en: ''
  id: totrans-95
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**Backtest** â€” after merging a new model, keep 1% on the former model to validate
    expected effect in reverse.'
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**å›æµ‹** - åœ¨åˆå¹¶æ–°æ¨¡å‹åï¼Œä¿ç•™1%åœ¨æ—§æ¨¡å‹ä¸Šä»¥éªŒè¯é¢„æœŸæ•ˆæœçš„åå‘ã€‚'
- en: Having the model tag as a parameter in the monitoring data helps you pinpoint
    every change in the metric potential cause.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: å°†æ¨¡å‹æ ‡ç­¾ä½œä¸ºç›‘æ§æ•°æ®ä¸­çš„å‚æ•°ï¼Œæœ‰åŠ©äºä½ ç²¾ç¡®å®šä½åº¦é‡æ½œåœ¨åŸå› çš„æ¯ä¸€å˜åŒ–ã€‚
- en: Summary
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ€»ç»“
- en: '![](../Images/d22900bc55d5305f480797d7cc00fed0.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d22900bc55d5305f480797d7cc00fed0.png)'
- en: Image by author
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡
- en: This article introduces a framework for versioning machine learning projects
    using Git branches. The framework simplifies workflows, organizes data and models,
    and couples related parts of the project together. It emphasizes the use of branches
    as environments, where each branch contains the necessary data, code, models,
    and documentation for a specific task. The article also discusses key concepts
    such as using different active branches categories. Overall, the framework aims
    to improve workflow efficiency, governance, and collaboration in machine learning
    projects.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡ä»‹ç»äº†ä½¿ç”¨Gitåˆ†æ”¯å¯¹æœºå™¨å­¦ä¹ é¡¹ç›®è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„æ¡†æ¶ã€‚è¯¥æ¡†æ¶ç®€åŒ–äº†å·¥ä½œæµç¨‹ï¼Œç»„ç»‡äº†æ•°æ®å’Œæ¨¡å‹ï¼Œå¹¶å°†é¡¹ç›®çš„ç›¸å…³éƒ¨åˆ†è€¦åˆåœ¨ä¸€èµ·ã€‚å®ƒå¼ºè°ƒäº†å°†åˆ†æ”¯ç”¨ä½œç¯å¢ƒçš„ä½¿ç”¨ï¼Œæ¯ä¸ªåˆ†æ”¯åŒ…å«ç‰¹å®šä»»åŠ¡æ‰€éœ€çš„æ•°æ®ã€ä»£ç ã€æ¨¡å‹å’Œæ–‡æ¡£ã€‚æ–‡ç« è¿˜è®¨è®ºäº†å¦‚ä½¿ç”¨ä¸åŒçš„æ´»è·ƒåˆ†æ”¯ç±»åˆ«ç­‰å…³é”®æ¦‚å¿µã€‚æ€»ä½“è€Œè¨€ï¼Œè¯¥æ¡†æ¶æ—¨åœ¨æé«˜æœºå™¨å­¦ä¹ é¡¹ç›®çš„å·¥ä½œæµç¨‹æ•ˆç‡ã€æ²»ç†å’Œåä½œã€‚
- en: If you want to chat or learn more, join us on our [discord](https://discord.gg/KCzmjDaDdC)
    or follow our [blog](https://about.xethub.com/blog).
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æƒ³èŠå¤©æˆ–äº†è§£æ›´å¤šä¿¡æ¯ï¼ŒåŠ å…¥æˆ‘ä»¬çš„[discord](https://discord.gg/KCzmjDaDdC)æˆ–å…³æ³¨æˆ‘ä»¬çš„[åšå®¢](https://about.xethub.com/blog)ã€‚
- en: Epilogue
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è¯­
- en: Regarding my on-premise challenge, we maintained a â€œstableâ€ branch for each
    relevant training code and dataset combination. After completing the training,
    we would tag the commit with an appropriate tag (<*client-id>-<incremental version*>).
    Clients can pull the most recent tag, just like any other release.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºæˆ‘çš„æœ¬åœ°æŒ‘æˆ˜ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç›¸å…³çš„è®­ç»ƒä»£ç å’Œæ•°æ®é›†ç»„åˆç»´æŠ¤äº†ä¸€ä¸ªâ€œç¨³å®šâ€çš„åˆ†æ”¯ã€‚è®­ç»ƒå®Œæˆåï¼Œæˆ‘ä»¬ä¼šç”¨ä¸€ä¸ªåˆé€‚çš„æ ‡ç­¾ï¼ˆ<*client-id>-<incremental
    version*>ï¼‰æ ‡è®°æäº¤ã€‚å®¢æˆ·å¯ä»¥åƒå…¶ä»–å‘å¸ƒç‰ˆæœ¬ä¸€æ ·æ‹‰å–æœ€æ–°çš„æ ‡ç­¾ã€‚
- en: '![](../Images/3a43492def7f6cbed15d8d3ef8520784.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3a43492def7f6cbed15d8d3ef8520784.png)'
- en: When â€œdebuggingâ€ a client, we would refer to the tag at a specific moment to
    review the code and corresponding data. We could also match the monitoring data
    using the same tag, which was added to the monitoring data. The analysis notebooks
    can be found on our *ds/client-id* branches.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨â€œè°ƒè¯•â€å®¢æˆ·ç«¯æ—¶ï¼Œæˆ‘ä»¬ä¼šå‚è€ƒç‰¹å®šæ—¶åˆ»çš„æ ‡ç­¾æ¥å®¡æŸ¥ä»£ç å’Œç›¸åº”çš„æ•°æ®ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ ‡ç­¾åŒ¹é…ç›‘æ§æ•°æ®ï¼Œè¿™ä¸ªæ ‡ç­¾ä¹Ÿæ·»åŠ åˆ°ç›‘æ§æ•°æ®ä¸­ã€‚åˆ†æç¬”è®°æœ¬å¯ä»¥åœ¨æˆ‘ä»¬çš„*ds/client-id*åˆ†æ”¯ä¸­æ‰¾åˆ°ã€‚
