- en: Monitoring unstructured data for LLM and NLP
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/monitoring-unstructured-data-for-llm-and-nlp-efff42704e5b?source=collection_archive---------10-----------------------#2023-06-27](https://towardsdatascience.com/monitoring-unstructured-data-for-llm-and-nlp-efff42704e5b?source=collection_archive---------10-----------------------#2023-06-27)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A code tutorial on using text descriptors
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)[![Elena
    Samuylova](../Images/bc3024500f8b90a97f13d82ecaa1c9e7.png)](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)[](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)
    [Elena Samuylova](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: Â·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9621354b583a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&user=Elena+Samuylova&userId=9621354b583a&source=post_page-9621354b583a----efff42704e5b---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)
    Â·14 min readÂ·Jun 27, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fefff42704e5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&user=Elena+Samuylova&userId=9621354b583a&source=-----efff42704e5b---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fefff42704e5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&source=-----efff42704e5b---------------------bookmark_footer-----------)![](../Images/9449b853160c4015be247a0c901aee69.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: Image by Author.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: Once you deploy an NLP or LLM-based solution, you need a way to keep tabs on
    it. But how do you monitor unstructured data to make sense of the pile of texts?
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: There are a few approaches here, from [detecting drift in raw text data](https://www.evidentlyai.com/blog/tutorial-detecting-drift-in-text-data)
    and [embedding drift](https://www.evidentlyai.com/blog/embedding-drift-detection)
    to using regular expressions to run rule-based checks.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: In this tutorial, weâ€™ll dive into one particular approach â€” tracking interpretable
    text descriptors that help assign specific properties to every text.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: '**First, weâ€™ll cover some theory:**'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: What is a text descriptor, and when to use them.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Examples of text descriptors.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to select custom descriptors.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Next, get to code!** You will work with e-commerce review data and go through
    the following steps:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: Get an overview of the text data.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Evaluate text data drift using standard descriptors.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Add a custom text descriptor using an external pre-trained model.
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Implement pipeline tests to monitor data changes.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We will use the [Evidently open-source Python library](https://github.com/evidentlyai/evidently)
    to generate text descriptors and evaluate changes in the data.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: '***Code example:*** *If you prefer to go straight to the code, here is the*
    [*example notebook*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb)*.*'
  id: totrans-22
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: What is a text descriptor?
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A text descriptor is any feature or property that describes objects in the text
    dataset. For example, the length of texts or the number of symbols in them.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: You might already have helpful metadata to accompany your texts that will serve
    as descriptors. For example, e-commerce user reviews might come with user-assigned
    ratings or topic labels.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: Otherwise, you can generate your own descriptors! You do this by adding â€œvirtual
    featuresâ€ to your text data. Each helps describe or classify your texts using
    some meaningful criteria.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4d3ad2d6d7d7d91249e42b8d12b13dec.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
- en: Image by Author.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: By creating these descriptors, you basically come up with your own simple â€œembeddingâ€
    and map each text to several interpretable dimensions. This helps make sense of
    the otherwise unstructured data.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: 'You can then use these text descriptors:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: '**To monitor production NLP models.** You can track the properties of your
    data in time and detect when they change. For example, descriptors help detect
    text length spikes or drift in sentiment.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**To test models during updates.** When you iterate on models, you can compare
    the properties of the evaluation datasets and model responses. For example, you
    can check that the lengths of the LLM-generated answers remain similar, and they
    consistently include words you expect to see.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**To debug data drift or model decay.** If you detect [embedding drift](https://www.evidentlyai.com/blog/embedding-drift-detection)
    or directly observe a drop in the model quality, you can use text descriptors
    to explore where it comes from.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Examples of text descriptors
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Here are a few text descriptors we consider good defaults:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: Text length
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/184e6533f48040200fe1378cad612a11.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
- en: '*Image by Author. Text overview metric visualization using the* [*Evidently
    Python library*](https://github.com/evidentlyai/evidently)*.*'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: An excellent place to start is simple text statistics. For example, you can
    look at the **length of texts** measured in words, symbols, or sentences. You
    can evaluate average and min-max length and look at distributions.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: You can set expectations based on your use case. Say, product reviews tend to
    be between 5 and 100 words. If they are shorter or longer, this might signal a
    change in context. If there is a spike in fixed-length reviews, this might signal
    a spam attack. If you know that negative reviews are often longer, you can track
    the share of reviews above a certain length.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: 'There are also quick sanity checks: if you run a chatbot, you might expect
    non-zero responses or that there is some minimum length for the meaningful output.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: Out-of-vocabulary words
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/a65c56974f1b1f3ae2d41514a07315b3.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
- en: Image by Author. *The mean OOV share in the example reference dataset is 5.378%.*
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: Evaluating the share of words outside the defined vocabulary is a good â€œcrudeâ€
    measure of data quality. Did your users start writing reviews in a new language?
    Are users talking to your chatbot in Python, not English? Are users filling the
    responses with â€œgggâ€ instead of actual words?
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: This is a single practical measure to detect all sorts of changes. Once you
    catch a shift, you can then debug deeper.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
- en: You can shape expectations about the share of OOV words based on the examples
    from â€œgoodâ€ production data accumulated over time. For example, if you look at
    the corpus of previous product reviews, you might expect OOV to be under 10% and
    monitor if the value goes above this threshold.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: Non-letter characters
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Related, but with a twist: this descriptor will count all sorts of special
    symbols that are not letters or numbers, including commas, brackets, hashes, etc.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: 'Sometimes you expect a fair share of special symbols: your texts might contain
    code or be structured as a JSON. Sometimes, you only expect punctuation marks
    in human-readable text.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: Detecting a shift in non-letter characters can expose data quality issues, like
    HTML codes leaking into the texts of the reviews, spam attacks, unexpected use
    cases, etc.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: Sentiment
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0b6feb7078990f2fd42ebf4054b2cb2b.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
- en: Image by Author. *Baseline â€œsentimentâ€ distribution in the example e-commerce
    reviews dataset.*
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: 'Text sentiment is another indicator. It is helpful in various scenarios: from
    chatbot conversations to user reviews and writing marketing copy. You can typically
    set an expectation about the sentiment of the texts you deal with.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: 'Even if the sentiment â€œdoes not apply,â€ this might translate to the expectation
    of a primarily neutral tone. The potential appearance of either a negative or
    positive tone is worth tracking and looking into. It might indicate unexpected
    usage scenarios: is the user using your virtual mortgage advisor as a complaint
    channel?'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: 'You might also expect a certain balance: for example, there is always a share
    of conversations or reviews with a negative tone, but youâ€™d expect it not to exceed
    a certain threshold or the overall distribution of review sentiment to remain
    stable.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: Trigger words
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/b8cb44f8a4202672b43ca925422086b8.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
- en: 'Image by Author. *Reviews consistently mention dresses: no distribution drift
    is detected.*'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚*è¯„è®ºä¸€è‡´æåˆ°è¿è¡£è£™ï¼šæœªæ£€æµ‹åˆ°åˆ†å¸ƒæ¼‚ç§»ã€‚*
- en: You can also check whether the texts contain words from a specific list or lists
    and treat this as a binary feature.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ è¿˜å¯ä»¥æ£€æŸ¥æ–‡æœ¬æ˜¯å¦åŒ…å«ç‰¹å®šåˆ—è¡¨ä¸­çš„å•è¯ï¼Œå¹¶å°†å…¶è§†ä¸ºäºŒè¿›åˆ¶ç‰¹å¾ã€‚
- en: 'This is a powerful way to encode multiple expectations about your texts. You
    need some effort to curate lists manually, but you can design many handy checks
    this way. For example, you can create lists of trigger words like:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥ç¼–ç å¯¹ä½ æ–‡æœ¬çš„å¤šä¸ªæœŸæœ›ã€‚ä½ éœ€è¦ä¸€äº›åŠªåŠ›æ¥æ‰‹åŠ¨ç­–åˆ’åˆ—è¡¨ï¼Œä½†ä½ å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è®¾è®¡è®¸å¤šæœ‰ç”¨çš„æ£€æŸ¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºè§¦å‘è¯åˆ—è¡¨ï¼Œå¦‚ï¼š
- en: Mentions of products or brands.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æåŠäº§å“æˆ–å“ç‰Œã€‚
- en: Mentions of competitors.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æåŠç«äº‰å¯¹æ‰‹ã€‚
- en: Mentions of locations, cities, places, etc.
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æåŠåœ°ç‚¹ã€åŸå¸‚ã€åœ°æ–¹ç­‰ã€‚
- en: Mentions of words that represent particular topics.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æåŠä»£è¡¨ç‰¹å®šä¸»é¢˜çš„å•è¯ã€‚
- en: You can curate (and continuously extend) lists like this that are specific to
    your use case.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥ç­–åˆ’ï¼ˆå¹¶ä¸æ–­æ‰©å±•ï¼‰ç±»ä¼¼çš„åˆ—è¡¨ï¼Œè¿™äº›åˆ—è¡¨æ˜¯ç‰¹å®šäºä½ çš„ç”¨ä¾‹çš„ã€‚
- en: For example, if an advisor chatbot helps choose between products offered by
    the company, you might expect most of the responses to contain the names of one
    of the products from the list.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªé¡¾é—®èŠå¤©æœºå™¨äººå¸®åŠ©é€‰æ‹©å…¬å¸æä¾›çš„äº§å“ä¹‹ä¸€ï¼Œä½ å¯èƒ½ä¼šæœŸæœ›å¤§å¤šæ•°å“åº”ä¸­åŒ…å«è¯¥åˆ—è¡¨ä¸­æŸä¸ªäº§å“çš„åç§°ã€‚
- en: RegExp matches
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: RegExp åŒ¹é…
- en: 'The inclusion of specific words from the list is one example of a pattern you
    can formulate as a regular expression. You can come up with others: do you expect
    your texts to start with â€œhelloâ€ and end with â€œthank youâ€? Include emails? Contain
    known named elements?'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: åŒ…å«ç‰¹å®šå•è¯çš„ä¾‹å­æ˜¯ä½ å¯ä»¥åˆ¶å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¹‹ä¸€ã€‚ä½ å¯ä»¥æƒ³å‡ºå…¶ä»–æ¨¡å¼ï¼šä½ æ˜¯å¦æœŸæœ›ä½ çš„æ–‡æœ¬ä»¥â€œhelloâ€å¼€å¤´å¹¶ä»¥â€œthank youâ€ç»“å°¾ï¼ŸåŒ…å«ç”µå­é‚®ä»¶ï¼ŸåŒ…å«å·²çŸ¥çš„å‘½åå…ƒç´ ï¼Ÿ
- en: If you expect the model inputs or outputs to match a specific format, you can
    use regular expression match as another descriptor.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æœŸæœ›æ¨¡å‹è¾“å…¥æˆ–è¾“å‡ºç¬¦åˆç‰¹å®šæ ¼å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä½œä¸ºå¦ä¸€ç§æè¿°ç¬¦ã€‚
- en: Custom descriptors
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è‡ªå®šä¹‰æè¿°ç¬¦
- en: 'You can extend this idea further. For example:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•è¿™ä¸ªæƒ³æ³•ã€‚ä¾‹å¦‚ï¼š
- en: '**Evaluate other text properties**: toxicity, subjectivity, the formality of
    the tone, readability score, etc. You can often find open pre-trained models to
    do the trick.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è¯„ä¼°å…¶ä»–æ–‡æœ¬å±æ€§**ï¼šæ¯’æ€§ã€ä¸»è§‚æ€§ã€è¯­æ°”çš„æ­£å¼ç¨‹åº¦ã€å¯è¯»æ€§è¯„åˆ†ç­‰ã€‚ä½ é€šå¸¸å¯ä»¥æ‰¾åˆ°å¼€æ”¾çš„é¢„è®­ç»ƒæ¨¡å‹æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚'
- en: '**Count specific components:** emails, URLs, emojis, dates, and parts of speech.
    You can use external models or even simple regular expressions.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è®¡æ•°ç‰¹å®šç»„ä»¶ï¼š** ç”µå­é‚®ä»¶ã€URLã€è¡¨æƒ…ç¬¦å·ã€æ—¥æœŸå’Œè¯æ€§ã€‚ä½ å¯ä»¥ä½¿ç”¨å¤–éƒ¨æ¨¡å‹æˆ–ç”šè‡³ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚'
- en: '**Get granular with stats:** you can track very detailed text statistics if
    they are meaningful to your use case, e.g., track average lengths of words, whether
    they are upper or lower case, the ratio of unique words, etc.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ·±å…¥ç»Ÿè®¡æ•°æ®ï¼š** å¦‚æœè¿™äº›æ•°æ®å¯¹ä½ çš„ç”¨ä¾‹æœ‰æ„ä¹‰ï¼Œä½ å¯ä»¥è¿½è¸ªéå¸¸è¯¦ç»†çš„æ–‡æœ¬ç»Ÿè®¡æ•°æ®ï¼Œä¾‹å¦‚ï¼Œè¿½è¸ªå•è¯çš„å¹³å‡é•¿åº¦ï¼Œå®ƒä»¬æ˜¯å¤§å†™è¿˜æ˜¯å°å†™ï¼Œå”¯ä¸€å•è¯çš„æ¯”ä¾‹ç­‰ã€‚'
- en: '**Monitor personally identifiable information**: for example, when you do not
    expect it to come up in chatbot conversations.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ç›‘æ§ä¸ªäººå¯è¯†åˆ«ä¿¡æ¯**ï¼šä¾‹å¦‚ï¼Œå½“ä½ ä¸æœŸæœ›å®ƒå‡ºç°åœ¨èŠå¤©æœºå™¨äººå¯¹è¯ä¸­æ—¶ã€‚'
- en: '**Use named entity recognition:** to extract specific entities and treat them
    as tags. **â€**'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ä½¿ç”¨å‘½åå®ä½“è¯†åˆ«ï¼š** æå–ç‰¹å®šå®ä½“å¹¶å°†å…¶è§†ä¸ºæ ‡ç­¾ã€‚**â€**'
- en: '**Use topic modeling** to build a topic monitoring system. This is the most
    laborious approach but powerful when done right. It is useful when you expect
    the texts to stay mostly on-topic and have the corpus of previous examples to
    train the model. You can use unsupervised topic clustering and create a model
    to assign new texts to known clusters. You can then treat assigned classes as
    descriptors to monitor the changes in the distribution of topics in the new data.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ä½¿ç”¨ä¸»é¢˜å»ºæ¨¡** æ¥å»ºç«‹ä¸»é¢˜ç›‘æ§ç³»ç»Ÿã€‚è¿™æ˜¯æœ€ç¹ççš„æ–¹æ³•ï¼Œä½†åšå¾—å¥½æ—¶éå¸¸å¼ºå¤§ã€‚å½“ä½ æœŸæœ›æ–‡æœ¬ä¿æŒåœ¨ä¸»è¦è¯é¢˜ä¸Šå¹¶ä¸”æ‹¥æœ‰ä¹‹å‰çš„ç¤ºä¾‹è¯­æ–™åº“æ¥è®­ç»ƒæ¨¡å‹æ—¶ï¼Œå®ƒéå¸¸æœ‰ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨æ— ç›‘ç£ä¸»é¢˜èšç±»å¹¶åˆ›å»ºä¸€ä¸ªæ¨¡å‹æ¥å°†æ–°æ–‡æœ¬åˆ†é…åˆ°å·²çŸ¥çš„ç°‡ä¸­ã€‚ç„¶åï¼Œä½ å¯ä»¥å°†åˆ†é…çš„ç±»åˆ«ä½œä¸ºæè¿°ç¬¦æ¥ç›‘æ§æ–°æ•°æ®ä¸­ä¸»é¢˜åˆ†å¸ƒçš„å˜åŒ–ã€‚'
- en: '![](../Images/56ae75356635ea5aebe10c8b079438e6.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/56ae75356635ea5aebe10c8b079438e6.png)'
- en: Image by Author. *Example of a summary drift report for multiple descriptors.*
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚*å¤šä¸ªæè¿°ç¬¦çš„æ€»ç»“æ¼‚ç§»æŠ¥å‘Šç¤ºä¾‹ã€‚*
- en: 'Here are a few things to keep in mind when designing descriptors to monitor:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡æè¿°ç¬¦æ—¶è¦è®°ä½çš„å‡ ç‚¹ï¼š
- en: '**It is best to stay focused** and try to find a small number of suitable quality
    indicators that match the use case rather than monitor all possible dimensions.
    Think of descriptors as model features. You want to find a few strong ones rather
    than generate a lot of weak or unhelpful features. Many of them are bound to be
    correlated: language and share of OOV words, length in sentences and symbols,
    etc. Pick your favorite!'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æœ€å¥½ä¿æŒä¸“æ³¨**ï¼Œå°½é‡æ‰¾å‡ºå°‘é‡é€‚åˆçš„è´¨é‡æŒ‡æ ‡ï¼Œè¿™äº›æŒ‡æ ‡ä¸ç”¨ä¾‹åŒ¹é…ï¼Œè€Œä¸æ˜¯ç›‘æ§æ‰€æœ‰å¯èƒ½çš„ç»´åº¦ã€‚å°†æè¿°ç¬¦è§†ä¸ºæ¨¡å‹ç‰¹å¾ã€‚ä½ å¸Œæœ›æ‰¾åˆ°ä¸€äº›å¼ºå¤§çš„ç‰¹å¾ï¼Œè€Œä¸æ˜¯ç”Ÿæˆå¤§é‡å¼±çš„æˆ–æ— ç”¨çš„ç‰¹å¾ã€‚è®¸å¤šç‰¹å¾å¾€å¾€æ˜¯ç›¸å…³çš„ï¼šè¯­è¨€å’Œ
    OOV å•è¯çš„æ¯”ä¾‹ã€å¥å­å’Œç¬¦å·çš„é•¿åº¦ç­‰ã€‚é€‰æ‹©ä½ æœ€å–œæ¬¢çš„ï¼'
- en: '**Use exploratory data analysis** to evaluate text properties in existing data
    (for example, logs of previous conversations) to test your assumptions before
    adding them to model monitoring.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ä½¿ç”¨æ¢ç´¢æ€§æ•°æ®åˆ†æ** è¯„ä¼°ç°æœ‰æ•°æ®ä¸­çš„æ–‡æœ¬å±æ€§ï¼ˆä¾‹å¦‚ï¼Œä»¥å‰å¯¹è¯çš„æ—¥å¿—ï¼‰ï¼Œä»¥æµ‹è¯•ä½ çš„å‡è®¾ï¼Œç„¶åå†å°†å®ƒä»¬æ·»åŠ åˆ°æ¨¡å‹ç›‘æ§ä¸­ã€‚'
- en: '**Learn from model failures**. Whenever you face an issue with production model
    quality that you expect to reappear (e.g., texts in a foreign language), consider
    how to develop a test case or a descriptor to add to detect it in the future.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ä»æ¨¡å‹å¤±è´¥ä¸­å­¦ä¹ **ã€‚æ¯å½“ä½ é‡åˆ°ä¸€ä¸ªä½ æœŸæœ›å†æ¬¡å‡ºç°çš„ç”Ÿäº§æ¨¡å‹è´¨é‡é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œå¤–è¯­æ–‡æœ¬ï¼‰ï¼Œè€ƒè™‘å¦‚ä½•å¼€å‘ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æˆ–æè¿°ç¬¦ï¼Œä»¥ä¾¿åœ¨æœªæ¥æ£€æµ‹åˆ°å®ƒã€‚'
- en: '**Mind the computation cost.** Using external models to score your texts by
    every possible dimension is tempting, but this comes at a cost. Consider it when
    working with larger datasets: every external classifier is an extra model to run.
    You can often get away with fewer or simpler checks.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ³¨æ„è®¡ç®—æˆæœ¬ã€‚** ä½¿ç”¨å¤–éƒ¨æ¨¡å‹æŒ‰æ¯ä¸ªå¯èƒ½çš„ç»´åº¦è¯„åˆ†æ–‡æœ¬æ˜¯å¾ˆè¯±äººçš„ï¼Œä½†è¿™ä¼šå¸¦æ¥é¢å¤–çš„æˆæœ¬ã€‚è€ƒè™‘ä¸€ä¸‹åœ¨å¤„ç†è¾ƒå¤§çš„æ•°æ®é›†æ—¶ï¼šæ¯ä¸ªå¤–éƒ¨åˆ†ç±»å™¨éƒ½æ˜¯ä¸€ä¸ªé¢å¤–çš„æ¨¡å‹ã€‚é€šå¸¸å¯ä»¥é€šè¿‡æ›´å°‘æˆ–æ›´ç®€å•çš„æ£€æŸ¥æ¥è§£å†³é—®é¢˜ã€‚'
- en: Step-by-step tutorial
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ†æ­¥æ•™ç¨‹
- en: 'To illustrate the idea, letâ€™s walk through the following scenario: you are
    building a classifier model to score reviews that users leave on an e-commerce
    website and tag them by topic. Once it is in production, you want to detect changes
    in the data and model environment, but you do not have the true labels. You need
    to run a separate labeling process to get them.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è¯´æ˜è¿™ä¸ªæƒ³æ³•ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹åœºæ™¯æ¥æ¼”ç¤ºï¼šä½ æ­£åœ¨æ„å»ºä¸€ä¸ªåˆ†ç±»å™¨æ¨¡å‹ï¼Œä»¥å¯¹ç”¨æˆ·åœ¨ç”µå­å•†åŠ¡ç½‘ç«™ä¸Šç•™ä¸‹çš„è¯„è®ºè¿›è¡Œè¯„åˆ†å¹¶æŒ‰ä¸»é¢˜æ ‡è®°ã€‚ä¸€æ—¦æ¨¡å‹æŠ•å…¥ç”Ÿäº§ï¼Œä½ å¸Œæœ›æ£€æµ‹æ•°æ®å’Œæ¨¡å‹ç¯å¢ƒçš„å˜åŒ–ï¼Œä½†ä½ æ²¡æœ‰çœŸå®æ ‡ç­¾ã€‚ä½ éœ€è¦è¿è¡Œä¸€ä¸ªå•ç‹¬çš„æ ‡è®°è¿‡ç¨‹æ¥è·å–å®ƒä»¬ã€‚
- en: How can you keep tabs on the changes without the labels?
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰æ ‡ç­¾çš„æƒ…å†µä¸‹ä½ å¦‚ä½•è·Ÿè¸ªå˜åŒ–ï¼Ÿ
- en: 'Letâ€™s take an example dataset and go through the following steps:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªç¤ºä¾‹æ•°æ®é›†ä¸ºä¾‹ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š
- en: '***Code example:*** *head to the* [*example notebook*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb)
    *to follow all the steps.*'
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***ä»£ç ç¤ºä¾‹ï¼š*** *è¯·å‰å¾€* [*ç¤ºä¾‹ç¬”è®°æœ¬*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb)
    *ä»¥æŸ¥çœ‹æ‰€æœ‰æ­¥éª¤ã€‚*'
- en: ğŸ’» 1\. Install Evidently
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ğŸ’» 1\. å®‰è£… Evidently
- en: First, install Evidently. Use the Python package manager to install it in your
    environment. If you are working in Colab, run *!pip install*. In the Jupyter Notebook,
    you should also install nbextension. Check out the [instructions](https://docs.evidentlyai.com/user-guide/install-evidently/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)
    for your environment.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œå®‰è£… Evidentlyã€‚ä½¿ç”¨ Python åŒ…ç®¡ç†å™¨åœ¨ä½ çš„ç¯å¢ƒä¸­å®‰è£…å®ƒã€‚å¦‚æœä½ åœ¨ Colab ä¸­å·¥ä½œï¼Œè¿è¡Œ *!pip install*ã€‚åœ¨ Jupyter
    Notebook ä¸­ï¼Œä½ è¿˜éœ€è¦å®‰è£… nbextensionã€‚æŸ¥çœ‹ [å®‰è£…è¯´æ˜](https://docs.evidentlyai.com/user-guide/install-evidently/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)
    ä»¥è·å–ä½ çš„ç¯å¢ƒä¿¡æ¯ã€‚
- en: You will also need to import a few other libraries like *pandas* and specific
    Evidently components. Follow the instructions in the notebook.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ è¿˜éœ€è¦å¯¼å…¥ä¸€äº›å…¶ä»–åº“ï¼Œå¦‚ *pandas* å’Œç‰¹å®šçš„ Evidently ç»„ä»¶ã€‚æŒ‰ç…§ç¬”è®°æœ¬ä¸­çš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚
- en: ğŸ”¡ 2\. Prepare the data
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ğŸ”¡ 2\. å‡†å¤‡æ•°æ®
- en: Once you have it all set, letâ€™s look at the data! You will work with an open
    dataset from e-commerce reviews.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ è®¾ç½®å¥½äº†æ‰€æœ‰å†…å®¹ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ•°æ®å§ï¼ä½ å°†ä½¿ç”¨ä¸€ä¸ªæ¥è‡ªç”µå­å•†åŠ¡è¯„è®ºçš„å¼€æ”¾æ•°æ®é›†ã€‚
- en: 'Here is how the dataset looks:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å°±æ˜¯æ•°æ®é›†çš„æ ·å­ï¼š
- en: '![](../Images/61dc47d6fb8c0c43b9c82d3180b95766.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/61dc47d6fb8c0c43b9c82d3180b95766.png)'
- en: Image by Author.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚
- en: Weâ€™ll focus on the â€œReview_Textâ€ column for demo purposes. In production, we
    want to monitor changes in the texts of the reviews.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨â€œReview_Textâ€åˆ—è¿›è¡Œæ¼”ç¤ºã€‚åœ¨ç”Ÿäº§ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦ç›‘æ§è¯„è®ºæ–‡æœ¬çš„å˜åŒ–ã€‚
- en: 'You will need to specify the column that contains texts using column mapping:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ éœ€è¦ä½¿ç”¨åˆ—æ˜ å°„æŒ‡å®šåŒ…å«æ–‡æœ¬çš„åˆ—ï¼š
- en: '[PRE0]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'You should also split the data into two: reference and current. Imagine that
    â€œreferenceâ€ data is the data for some representative past period (e.g., previous
    month) and â€œcurrentâ€ is the current production data (e.g., this month). These
    are the two datasets that you will compare using descriptors.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ è¿˜åº”è¯¥å°†æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šå‚è€ƒæ•°æ®å’Œå½“å‰æ•°æ®ã€‚å‡è®¾â€œå‚è€ƒâ€æ•°æ®æ˜¯æŸä¸ªä»£è¡¨æ€§è¿‡å»æ—¶æœŸçš„æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œä¸Šä¸ªæœˆï¼‰ï¼Œè€Œâ€œå½“å‰â€æ˜¯å½“å‰ç”Ÿäº§æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œæœ¬æœˆï¼‰ã€‚è¿™ä¸¤ä¸ªæ•°æ®é›†æ˜¯ä½ å°†ä½¿ç”¨æè¿°ç¬¦è¿›è¡Œæ¯”è¾ƒçš„æ•°æ®é›†ã€‚
- en: '***Note:*** *itâ€™s important to establish a suitable historical baseline. Pick
    the period that reflects your expectations about how the data should look in the
    future.*'
  id: totrans-104
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***æ³¨æ„ï¼š*** *å»ºç«‹åˆé€‚çš„å†å²åŸºçº¿å¾ˆé‡è¦ã€‚é€‰æ‹©ä¸€ä¸ªåæ˜ ä½ å¯¹æœªæ¥æ•°æ®é¢„æœŸçš„æ—¶æœŸã€‚*'
- en: We selected 5000 examples for each sample. To make things interesting, we introduced
    an artificial shift by selecting the negative reviews for our current dataset.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¸ºæ¯ä¸ªæ ·æœ¬é€‰æ‹©äº†5000ä¸ªä¾‹å­ã€‚ä¸ºäº†å¢åŠ è¶£å‘³æ€§ï¼Œæˆ‘ä»¬é€šè¿‡é€‰æ‹©è´Ÿé¢è¯„è®ºæ¥äººä¸ºåœ°å¼•å…¥äº†ä¸€äº›åå·®ã€‚
- en: '[PRE1]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: ğŸ“Š 3\. Exploratory data analysis
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ğŸ“Š 3\. æ¢ç´¢æ€§æ•°æ®åˆ†æ
- en: To better understand the data, you can generate a visual report using Evidently.
    There is a pre-built **Text Overview Preset** that helps quickly compare two text
    datasets. It combines various descriptive checks and evaluates overall data drift
    (in this case, using a [model-based drift detection method](https://www.evidentlyai.com/blog/evidently-data-quality-monitoring-and-drift-detection-for-text-data)).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ›´å¥½åœ°ç†è§£æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨ Evidently ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Šã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé¢„è®¾çš„**æ–‡æœ¬æ¦‚è§ˆé¢„è®¾**ï¼Œå¸®åŠ©å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªæ–‡æœ¬æ•°æ®é›†ã€‚å®ƒç»“åˆäº†å„ç§æè¿°æ€§æ£€æŸ¥ï¼Œå¹¶è¯„ä¼°æ•´ä½“æ•°æ®æ¼‚ç§»ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨[åŸºäºæ¨¡å‹çš„æ¼‚ç§»æ£€æµ‹æ–¹æ³•](https://www.evidentlyai.com/blog/evidently-data-quality-monitoring-and-drift-detection-for-text-data)ï¼‰ã€‚
- en: 'This report also includes a few standard descriptors and allows you to add
    descriptors using lists of Trigger Words. Weâ€™ll look at the following descriptors
    as part of the report:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤æŠ¥å‘Šè¿˜åŒ…æ‹¬ä¸€äº›æ ‡å‡†æè¿°ç¬¦ï¼Œå¹¶å…è®¸ä½ ä½¿ç”¨è§¦å‘è¯åˆ—è¡¨æ·»åŠ æè¿°ç¬¦ã€‚æˆ‘ä»¬å°†åœ¨æŠ¥å‘Šä¸­æŸ¥çœ‹ä»¥ä¸‹æè¿°ç¬¦ï¼š
- en: Length of texts
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ–‡æœ¬é•¿åº¦
- en: Share of OOV words
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OOVè¯æ±‡çš„æ¯”ä¾‹
- en: Share of Non-letter symbols
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: éå­—æ¯ç¬¦å·çš„æ¯”ä¾‹
- en: The sentiment of the reviews
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¯„è®ºçš„æƒ…æ„Ÿ
- en: Reviews that include either words â€œdressâ€ or â€œgownâ€
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ…å«â€œdressâ€æˆ–â€œgownâ€è¿™ä¸¤ä¸ªè¯çš„è¯„è®º
- en: Reviews that include either words â€œblouseâ€ or â€œshirtâ€
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ…å«â€œblouseâ€æˆ–â€œshirtâ€è¿™ä¸¤ä¸ªè¯çš„è¯„è®º
- en: '*Check out the Evidently* [*docs on Descriptors for details*](https://docs.evidentlyai.com/user-guide/customization/text-descriptors-parameters/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*.*'
  id: totrans-116
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*æŸ¥çœ‹ Evidently* [*æœ‰å…³æè¿°ç¬¦çš„æ–‡æ¡£ä»¥è·å–è¯¦ç»†ä¿¡æ¯*](https://docs.evidentlyai.com/user-guide/customization/text-descriptors-parameters/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*ã€‚*'
- en: Here is the code you need to run this report. You can assign custom names to
    each descriptor.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯è¿è¡Œæ­¤æŠ¥å‘Šæ‰€éœ€çš„ä»£ç ã€‚ä½ å¯ä»¥ä¸ºæ¯ä¸ªæè¿°ç¬¦åˆ†é…è‡ªå®šä¹‰åç§°ã€‚
- en: '[PRE2]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Running a report like this helps explore patterns and shape your expectations
    about particular properties, such as text length distribution.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: è¿è¡Œè¿™æ ·çš„æŠ¥å‘Šæœ‰åŠ©äºæ¢ç´¢æ¨¡å¼ï¼Œå¹¶å½¢æˆå¯¹ç‰¹å®šå±æ€§çš„æœŸæœ›ï¼Œä¾‹å¦‚æ–‡æœ¬é•¿åº¦åˆ†å¸ƒã€‚
- en: 'The distribution of the â€œsentimentâ€ descriptor quickly exposes the trick we
    did when splitting the data. We put reviews with a ranking above 3 in â€œreferenceâ€
    and more negative reviews in â€œcurrentâ€ datasets. The results are visible:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: â€œæƒ…æ„Ÿâ€æè¿°ç¬¦çš„åˆ†å¸ƒè¿…é€Ÿæ­ç¤ºäº†æˆ‘ä»¬åœ¨æ‹†åˆ†æ•°æ®æ—¶æ‰€åšçš„æ“ä½œã€‚æˆ‘ä»¬å°†æ’åé«˜äº3çš„è¯„è®ºæ”¾å…¥â€œå‚è€ƒâ€æ•°æ®é›†ä¸­ï¼Œè€Œå°†æ›´å¤šè´Ÿé¢è¯„è®ºæ”¾å…¥â€œå½“å‰â€æ•°æ®é›†ä¸­ã€‚ç»“æœä¸€ç›®äº†ç„¶ï¼š
- en: '![](../Images/f6f0128ec9976fe67cdfb3d79e3cd4b2.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f6f0128ec9976fe67cdfb3d79e3cd4b2.png)'
- en: Image by Author.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚
- en: The default report is very comprehensive and helps look at many text properties
    at once. Up to exploring correlations between descriptors and other columns in
    the dataset!
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: é»˜è®¤æŠ¥å‘Šéå¸¸å…¨é¢ï¼Œå¯ä»¥ä¸€æ¬¡æŸ¥çœ‹å¤šä¸ªæ–‡æœ¬å±æ€§ã€‚å¯ä»¥æ¢ç´¢æè¿°ç¬¦ä¸æ•°æ®é›†ä¸­å…¶ä»–åˆ—ä¹‹é—´çš„ç›¸å…³æ€§ï¼
- en: You can use it during the exploratory phase, but this is probably not something
    youâ€™d need to go through all the time.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥åœ¨æ¢ç´¢é˜¶æ®µä½¿ç”¨å®ƒï¼Œä½†è¿™å¯èƒ½ä¸æ˜¯ä½ éœ€è¦ä¸€ç›´ä½¿ç”¨çš„å·¥å…·ã€‚
- en: Luckily, itâ€™s easy to customize.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¸è¿çš„æ˜¯ï¼Œå®ƒå¾ˆå®¹æ˜“è‡ªå®šä¹‰ã€‚
- en: '***Evidently Presets and Metrics****. Evidently has report presets that quickly
    generate the reports out of the box. However, there are a lot of individual metrics
    to choose from! You can combine them to create a custom report. Browse the* [*presets*](https://docs.evidentlyai.com/presets/all-presets/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)
    *and metrics to understand whatâ€™s there.*'
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ğŸ“ˆ 4\. Monitor descriptors drift
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Letâ€™s say that based on exploratory analysis and your understanding of the
    business problem, you decide only to track a small number of properties:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: 'You want to notice when there is a statistical change: the distributions of
    these properties differ from the reference period. To detect it, you can use drift
    detection methods implemented in Evidently. For example, for numerical features
    like â€œsentiment,â€ it will, by default, monitor the shift using Wasserstein distance.
    You can also choose a different method.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: Here is how you can create a simple drift report to track changes in the three
    descriptors.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Once you run the report, you will get combined visualizations for all chosen
    descriptors. Here is one:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/167750d2843c66fe380500152b7584da.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
- en: Image by Author.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
- en: The dark green line is the mean sentiment in the reference dataset. The green
    area covers one standard deviation from the mean. You can notice that the current
    distribution (in red) is visibly more negative.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: '***Note:*** *In this scenario, it also makes sense to monitor the output drift:
    by tracking shifts in the predicted classes. You can use categorical* [*data drift
    detection methods*](https://docs.evidentlyai.com/reference/data-drift-algorithm/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*,
    like JS divergence. We do not cover this in the tutorial, as we focus only on
    inputs and do not generate predictions. In practice, prediction drift is often
    the first signal to react to.*'
  id: totrans-136
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ğŸ˜ 5\. Add an â€œemotionâ€ descriptor
  id: totrans-137
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Letâ€™s say you decided to track one more meaningful property: the emotion expressed
    in the review. The overall sentiment is one thing, but it also helps distinguish
    between â€œsadâ€ and â€œangryâ€ reviews, for example.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s add this custom descriptor! You can find an appropriate external open-source
    model to score your dataset. Then, you will work with this property as an additional
    column.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
- en: We will take the [Distilbert model](https://huggingface.co/bhadresh-savani/distilbert-base-uncased-emotion)
    from Huggingface, which classifies the text by five emotions.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: You can consider using any other model for your use case, such as named entity
    recognition, language detection, toxicity detection, etc.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
- en: 'You must install transformers to be able to run the model. Check [the instructions](https://huggingface.co/docs/transformers/installation)
    for more details. Then, apply it to the review dataset:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '***Note:*** *this step will score the dataset using the external model. It
    will take some time to execute, depending on your environment. To understand the
    principle without waiting, refer to the â€œSimple Exampleâ€ section in the example
    notebook.*'
  id: totrans-144
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: After you add the new column â€œemotionâ€ to the dataset, you must reflect this
    in Column Mapping. You should specify that it is a new categorical variable in
    the dataset.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Now, you can add the â€œemotionâ€ distribution drift monitoring to the Report.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Here is what you get!
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/8ca2d594a2f48d88dec8b624c5ca703b.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
- en: Image by Author.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
- en: You can see a significant increase in â€œsadâ€ reviews and a decrease in â€œjoy.â€
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
- en: Does it appear helpful to track over time? You can continue running this check
    by scoring new data as it comes.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
- en: ğŸ—ï¸ 6\. Run pipeline tests
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To perform regular analysis of your data inputs, it makes sense to package the
    evaluations as tests. You get a clear â€œpassâ€ or â€œfailâ€ result in this scenario.
    You probably do not need to look at the plots if all tests pass. Youâ€™re only interested
    when things change!
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: Evidently has an alternative interface called Test Suite that works this way.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is how you create a Test Suite to check for statistical distribution in
    the same four descriptors:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '***Note:*** *we go with defaults, but you can also set* [*custom drift methods
    and conditions*](https://docs.evidentlyai.com/user-guide/customization/options-for-statistical-tests/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*.*'
  id: totrans-159
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here is the result. The output is neatly structured so you can see which descriptors
    have drifted.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/77d27b490b8c0aa4b642b8509c854d7e.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
- en: Image by Author.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
- en: Detecting statistical distribution drift is one of the ways to monitor changes
    in the text property. There are others! Sometimes, it is convenient to run rule-based
    expectations on the descriptorâ€™s min, max, or mean values.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s say you want to check that all review texts are longer than two words.
    If at least one review is shorter than two words, you want the test to fail and
    see the number of short texts in the response.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is how you do that! You can pick a **TestNumberOfOutRangeValues()** check.
    This time, you should set a custom boundary: the â€œleftâ€ side of the expected range
    is two words. You must also set a test condition: **eq=0**. This means you expect
    the number of objects outside this range to be 0\. If it is higher, you want the
    test to return a fail.'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Here is the result. You can also see the test details that show the defined
    expectation.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/c7522aa55016dfa55e61e8499366d7d2.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
- en: Image by Author.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
- en: You can follow this principle to design other checks.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: Support Evidently
  id: totrans-171
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '*Enjoyed the tutorial? Star* [*Evidently on GitHub*](https://github.com/evidentlyai/evidently)
    *to contribute back! This helps us continue creating free, open-source tools and
    content for the community.* [*â­ï¸ Star on GitHub âŸ¶*](https://github.com/evidentlyai/evidently)'
  id: totrans-172
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Summing up
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Text descriptors map text data to interpretable dimensions you can express as
    a numerical or a categorical attribute. They help describe, evaluate, and monitor
    unstructured data.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: In this tutorial, you learned how to monitor text data using descriptors.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: You can use this approach to monitor the behavior of NLP and LLM-powered models
    production. You can customize and combine your descriptors with other methods,
    such as [monitoring embedding drift](https://www.evidentlyai.com/blog/embedding-drift-detection).
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: Are there other descriptors you consider universally useful? Let us know! Join
    our [Discord community](https://discord.com/invite/xZjKRaNp8b) to share your thoughts.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: '*Originally published at* [*https://www.evidentlyai.com*](https://www.evidentlyai.com/blog/unstructured-data-monitoring)
    *on June 27, 2023\. Thanks to* [*Olga Filippova*](https://www.evidentlyai.com/author/olga-fillipova)
    *for co-authoring the article.*'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
