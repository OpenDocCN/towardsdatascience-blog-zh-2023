- en: Predicting NBA Salaries with Machine Learning
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: ÂéüÊñáÔºö[https://towardsdatascience.com/predicting-nba-salaries-with-machine-learning-ed68b6f75566?source=collection_archive---------7-----------------------#2023-08-24](https://towardsdatascience.com/predicting-nba-salaries-with-machine-learning-ed68b6f75566?source=collection_archive---------7-----------------------#2023-08-24)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Building a machine learning model with Python to predict NBA salaries and analyze
    the most impactful variables
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@gabriel.pastorello?source=post_page-----ed68b6f75566--------------------------------)[![Gabriel
    Pastorello](../Images/2c997eaad68c4618dd379418e74a36e5.png)](https://medium.com/@gabriel.pastorello?source=post_page-----ed68b6f75566--------------------------------)[](https://towardsdatascience.com/?source=post_page-----ed68b6f75566--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----ed68b6f75566--------------------------------)
    [Gabriel Pastorello](https://medium.com/@gabriel.pastorello?source=post_page-----ed68b6f75566--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ¬∑
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd0fbeabd7791&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-nba-salaries-with-machine-learning-ed68b6f75566&user=Gabriel+Pastorello&userId=d0fbeabd7791&source=post_page-d0fbeabd7791----ed68b6f75566---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----ed68b6f75566--------------------------------)
    ¬∑9 min read¬∑Aug 24, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fed68b6f75566&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-nba-salaries-with-machine-learning-ed68b6f75566&user=Gabriel+Pastorello&userId=d0fbeabd7791&source=-----ed68b6f75566---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fed68b6f75566&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fpredicting-nba-salaries-with-machine-learning-ed68b6f75566&source=-----ed68b6f75566---------------------bookmark_footer-----------)![](../Images/3bd6d6ef1988ffc6f1f4bd3f4b61f8ec.png)'
  prefs: []
  type: TYPE_NORMAL
- en: (Photo by [Emanuel Ekstr√∂m](https://unsplash.com/@emanuelekstrom?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral))
  prefs: []
  type: TYPE_NORMAL
- en: The NBA stands out as one of the most **lucrative** and **competitive** leagues
    in sports. In the last few years, the salaries of NBA players have been on an
    **ascending** trend, but behind every awe-inspiring dunk and three-pointer lies
    a complex web of factors that determine these salaries.
  prefs: []
  type: TYPE_NORMAL
- en: From player performance and team success to market demand and endorsement deals,
    numerous variables come into play. Who never pondered why their team spent so
    much on an underperforming player, or marveled at a successful deal?
  prefs: []
  type: TYPE_NORMAL
- en: In this article, we use the capabilities of machine learning with Python to
    **predict NBA salaries** and uncover the **crucial factors** with most impact
    on players‚Äô earnings.
  prefs: []
  type: TYPE_NORMAL
- en: All the code and data used are available on [**GitHub**](https://github.com/GabrielPastorello/NBASalaryPrediction).
  prefs: []
  type: TYPE_NORMAL
- en: Understanding the problem
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Before diving into the problem, it is essential to grasp the fundamentals of
    the league‚Äôs salary system. When a player is available on the market to sign a
    contract with any team he is known as a **free agent** (FA), a term that will
    be used a lot in this project.
  prefs: []
  type: TYPE_NORMAL
- en: 'The NBA operates under a complex set of rules and regulations that aim to maintain
    competitive balance among teams. Two key concepts are at the core of this system:
    the **salary cap** and the **luxury tax**.'
  prefs: []
  type: TYPE_NORMAL
- en: The **salary cap** serves as a spending limit, restricting how much a team can
    spend on player salaries in a given season. The cap is determined by the league‚Äôs
    revenue, and it is updated every year to ensure that teams operate within a reasonable
    financial framework. It also intends to prevent large-market teams from significantly
    outspending smaller-market counterparts, promoting parity among franchises.
  prefs: []
  type: TYPE_NORMAL
- en: The distribution of the salary cap among players can vary, with maximum salaries
    for top-tier players and minimum salaries for rookies and veterans.
  prefs: []
  type: TYPE_NORMAL
- en: However, **exceeding the salary cap is not uncommon**, especially for teams
    aiming to construct championship-contending rosters. When a team surpasses the
    salary cap, it enters into the realm of the **luxury tax**. The luxury tax imposes
    a penalty on teams that spend above a certain threshold, discouraging teams from
    excessive spending while also providing additional revenue for the league.
  prefs: []
  type: TYPE_NORMAL
- en: There are many other rules that act as exceptions, like the **mid-level exception**
    **(MLE)** and **trade exception** that allows teams to make strategic roster moves,
    but for this project the knowledge of the salary cap and luxury tax is enough.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/7e9fef7750dfb972f7fbdd3ff3e224b2.png)'
  prefs: []
  type: TYPE_IMG
- en: NBA Salary Cap Evolution from 1984 to 2023 (Image by Author)
  prefs: []
  type: TYPE_NORMAL
- en: Due to this continuous ongoing growth of the salary cap, the approach selected
    will be using the **percentage of the cap as the target instead of the salary
    amount itself**. This decision aims to incorporate the cap‚Äôs evolving nature,
    ensuring that the outcome remains unaffected by temporal shifts and remains applicable
    even when evaluating historical seasons. However, it should be noted that this
    is not perfect and only an approximation.
  prefs: []
  type: TYPE_NORMAL
- en: Data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: For this project, the goal is to **predict the salaries for players signing
    a new contract next season** using data **only from the previous season**.
  prefs: []
  type: TYPE_NORMAL
- en: 'The individual statistics used were:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Average** statistics **per game**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Total** statistics'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Advanced** statistics'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Individual variables**: age, position'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Salary-related variables**: salary of the previous season, maximum cap for
    the previous and the current season and the % of the cap of that salary.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](../Images/0502d78a92e8a75b7c7d967639e013e2.png)'
  prefs: []
  type: TYPE_IMG
- en: Salary distribution for the 2022‚Äì23 season (Image by Author)
  prefs: []
  type: TYPE_NORMAL
- en: Since we do not know the team that the player will sign, only individual features
    were included.
  prefs: []
  type: TYPE_NORMAL
- en: In total, this study had **78 features** for each player plus the target.
  prefs: []
  type: TYPE_NORMAL
- en: Mostly all data was obtained using [**BRScraper**](https://github.com/GabrielPastorello/BRScraper),
    a recent **Python package** created by me that allows scraping and easy access
    to basketball data from [Basketball Reference](https://www.basketball-reference.com/),
    including NBA, G League and other international leagues. All guidelines concerning
    causing harm to the website or impeding its performance were followed.
  prefs: []
  type: TYPE_NORMAL
- en: Data Treatment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One interesting aspect to consider is the **selection of players** for the training
    of the models. Initially, I selected all available players, however most of them
    would be already under a contract, and in this case the value of the salary does
    not change drastically.
  prefs: []
  type: TYPE_NORMAL
- en: For example, imagine if a player signs for $20M for 4 years. He receives approximately
    $5M per year (very rarely all years are the same exact value, usually there is
    a certain progression in the salary around $5M). However, when a free agent signs
    a new contract, the value may change much more drastically.
  prefs: []
  type: TYPE_NORMAL
- en: This means that training **a model with all available players may result into
    a better performance** **overall** (after all, most players would have a salary
    very close to the last!), but when evaluating **only free agents, the performance
    would be significantly worse**.
  prefs: []
  type: TYPE_NORMAL
- en: Since the goal is to predict the salary of a **player signing a new contract**,
    only this kind of player should be in the data, so the model can better understand
    what are the patterns between these players.
  prefs: []
  type: TYPE_NORMAL
- en: The season of interest is the 2023‚Äì24 season that is coming up, but data from
    **2020‚Äì21 onwards** will be used to increase the number of samples, which is possible
    due to the choice of the target. Older seasons were not used due to the lack of
    data of the FAs.
  prefs: []
  type: TYPE_NORMAL
- en: This leaves **426 players** in the three seasons selected, 84 being FAs from
    2023‚Äì24.
  prefs: []
  type: TYPE_NORMAL
- en: Modeling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The train-test split was designed so that all free agents from 2023‚Äì24 were
    exclusively included in the test set, maintaining an approximately 70/30 split.
  prefs: []
  type: TYPE_NORMAL
- en: 'Initially, several regression models were used:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Support Vector Machines (SVM)**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Elastic Net**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Random Forest**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**AdaBoost**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Gradient Boosting**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Light Gradient Boosting Machine (LGBM)**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The performance of each one of them was evaluated using the root mean squared
    error (**RMSE**) and the coefficient of determination (**R¬≤**).
  prefs: []
  type: TYPE_NORMAL
- en: You can find the formula and explanation of each metric in my previous article,
    [**Predicting the NBA MVP with Machine Learning**](https://medium.com/towards-data-science/predicting-the-nba-mvp-with-machine-learning-c3e5b755f42e).
  prefs: []
  type: TYPE_NORMAL
- en: '[](/predicting-the-nba-mvp-with-machine-learning-c3e5b755f42e?source=post_page-----ed68b6f75566--------------------------------)
    [## Predicting the NBA MVP with Machine Learning'
  prefs: []
  type: TYPE_NORMAL
- en: Building a machine learning model to predict the NBA MVP and analyze the most
    impactful variables.
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/predicting-the-nba-mvp-with-machine-learning-c3e5b755f42e?source=post_page-----ed68b6f75566--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: Results
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Looking at the whole dataset with all seasons, the following results were obtained:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/01fc05b4e28c2b5270ca44d50156e5d6.png)'
  prefs: []
  type: TYPE_IMG
- en: RMSE and R¬≤ values ‚Äã‚Äãobtained among the different models (Image by Author)
  prefs: []
  type: TYPE_NORMAL
- en: The models had an overall good performance, with **Random Forest** and **Gradient
    Boosting** obtaining the lowest RMSE and highest R¬≤, while **AdaBoost** had the
    worst metrics among the models used.
  prefs: []
  type: TYPE_NORMAL
- en: Variables Analysis
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: An effective approach for visualizing the key variables influencing the model‚Äôs
    predictions is through [**SHAP Values**](https://shap.readthedocs.io/en/latest/index.html),
    atechnique that provides a reasonable explanation of how each feature impacts
    the model‚Äôs predictions.
  prefs: []
  type: TYPE_NORMAL
- en: Again, a deeper explanation about SHAP and how to interpret its chart can be
    found in [**Predicting the NBA MVP with Machine Learning**](https://medium.com/towards-data-science/predicting-the-nba-mvp-with-machine-learning-c3e5b755f42e).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a05f47718e750e38cefa87c456f0b9c4.png)'
  prefs: []
  type: TYPE_IMG
- en: SHAP chart related to the Random Forest model (Image by Author)
  prefs: []
  type: TYPE_NORMAL
- en: 'We can draw some important conclusions from this chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Minutes per game** (MP)and **points** (PTS) **per game** and **total** are
    the three most impactful features.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Salary of the previous season** (Salary S-1) and **% of the Cap of that salary**
    (% Cap S-1) are also very impactful, being 4th and 5th respectively.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Advanced statistics** are not predominant among the most important features,
    with only two appearing on the list, **WS** (*Win Share*) and **VORP** (*Value
    Over Replacement Player*).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: This is a very surprising result, as differently from the [**MVP project**](/predicting-the-nba-mvp-with-machine-learning-c3e5b755f42e),
    where advanced statistics dominated SHAP‚Äôs final result, player salaries appear
    considerably much more related to **common statistics** like minutes, points,
    and games started.
  prefs: []
  type: TYPE_NORMAL
- en: This is surprising because most advanced statistics were designed exactly with
    the objective of better evaluating a player‚Äôs performance. The absence of **PER**
    (*Player Efficiency Rating*) among the top 20 (it appears at 43rd place) is particularly
    striking.
  prefs: []
  type: TYPE_NORMAL
- en: It raises the possibility that during salary negotiations, general managers
    might be adhering to a relatively simpler approach, potentially overlooking the
    broader spectrum of performance evaluation metrics.
  prefs: []
  type: TYPE_NORMAL
- en: '**Maybe the problem is not so complex after all!** Simplifying, theplayerwhoplayesthemostminutesandscoresthemostpointsearnsmore!'
  prefs: []
  type: TYPE_NORMAL
- en: Additional Results
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Focusing in **this years‚Äô free agents** and comparing their predictions with
    the actual salary:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/18378739c9d2d90f0aceac0887e136f7.png)'
  prefs: []
  type: TYPE_IMG
- en: Main results of Random Forest model for 2023‚Äì24 season (values in millions)
    (Image by Author)
  prefs: []
  type: TYPE_NORMAL
- en: In the top we have the five players who appear to be **more undervalued** (receiving
    less than they should), in the middle five players **correctly valued** and at
    the bottom the five players **more overvalued** (receiving more than they should).
    It is important to note that these assessments are solely based on the model‚Äôs
    outputs.
  prefs: []
  type: TYPE_NORMAL
- en: Starting from the top, the former MVP **Russell Westbrook** is the **most undervalued**
    player according to the model, which in my opinion is a fact, having signed a
    ~$4M/year contract with the Clippers. **Eric Gordon**, **Mason Plumlee** and **Malik
    Beasley** are also in a similar situation, earning very small contracts with good
    performance. **D‚ÄôAngelo Russell** also appears in this top five despite earning
    a salary of $17M/year, which indicates that he should be earning even more.
  prefs: []
  type: TYPE_NORMAL
- en: Interesting to note that all of these players signed with **contending** **teams**
    (Clippers, Suns, Bucks and Lakers). This is a known behavior where players choose
    to earn less to have the chance to play for a team that can win the title.
  prefs: []
  type: TYPE_NORMAL
- en: In the middle, **Taurean Prince**, **Orlando Robinson**, **Kevin Knox** and
    **Derrick Rose** all earn small salaries that seem to be adequate. **Caris LeVert**
    wins $15M/year, but also appears to be worth exactly that.
  prefs: []
  type: TYPE_NORMAL
- en: At the bottom, **Fred VanVleet** was appointed as the **most overvalued** player.
    The Rockets, operating as a rebuilding team, made a notable move with his new
    three-year contract valued at $128.5M. They also signed **Dillon Brooks** for
    a value higher than expected.
  prefs: []
  type: TYPE_NORMAL
- en: '**Khris Middleton** signed a big extension this summer. Despite being a contender
    team, the Bucks belong to a non-major market and cannot afford to lose one of
    their best players. **Draymond Green** and **Cameron Johnson** have similar situations
    in their respective teams.'
  prefs: []
  type: TYPE_NORMAL
- en: Conclusions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Predicting outcomes in sports is consistently challenging. From the choice of
    the target to the selection of players, this project proved to be more complex
    than expected. However, the outcome proved to be quite simple and the results
    obtained were very satisfying!
  prefs: []
  type: TYPE_NORMAL
- en: Certainly, there are multiple ways they can be improved, one of them being the
    use of feature selection or dimensionality reduction techniques to reduce the
    feature space and thus the variance.
  prefs: []
  type: TYPE_NORMAL
- en: Moreover, having access to the free agents of previous seasons would also make
    possible to increase the number of samples. However, such data doesn‚Äôt seem to
    be publicly accessible at the moment.
  prefs: []
  type: TYPE_NORMAL
- en: A lot of other external variables also have influence in this matter. For instance,
    there is no question that if somehow theteam was known, variables like **last
    year seed**, **playoff outcome** and **percentage of cap already used** could
    be really informative. However, maintaining the approach that mirrors the circumstances
    of an actual free agent scenario where the team is unknown may potentially yield
    a result that aligns more closely with the player‚Äôs **‚Äúreal value‚Äù**, regardless
    of the signing team‚Äôs context.
  prefs: []
  type: TYPE_NORMAL
- en: One of the main premises of this project was the use of only data from the previous
    season to predict the next salary. Incorporating statistics from older seasons
    could indeed yield improved results, given that a player‚Äôs historical performance
    can offer valuable insights. However, the expansive nature of such data would
    necessitate thoughtful feature selection to manage the complexity and high dimensionality.
  prefs: []
  type: TYPE_NORMAL
- en: Again, all the code and data used are available on [**GitHub**](https://github.com/GabrielPastorello/NBASalaryPrediction).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/f548315e9b57182c3d4de93300a47b06.png)'
  prefs: []
  type: TYPE_IMG
- en: (Photo by [Marius Christensen](https://unsplash.com/@mariuschristensen?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral))
  prefs: []
  type: TYPE_NORMAL
- en: I‚Äôm always available on my channels ([**LinkedIn**](https://www.linkedin.com/in/gabriel-speranza-pastorello/)and
    [**GitHub**](https://github.com/GabrielPastorello)).
  prefs: []
  type: TYPE_NORMAL
- en: Thanks for your attention!üëè
  prefs: []
  type: TYPE_NORMAL
- en: '**Gabriel Speranza Pastorello**'
  prefs: []
  type: TYPE_NORMAL
