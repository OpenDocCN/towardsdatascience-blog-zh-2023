["```py\nlibrary(readxl)\nlibrary(geobr)\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(spData)\nlibrary(ggrepel)\nlibrary(colorspace)\n\ndata(\"world\")\n\n#mapa mundi\n\nworld %>%\n  ggplot() +\n  geom_sf(aes(fill=pop/10^6)) +\n  scale_fill_continuous_sequential(palette= \"Heat 2\" )+\n  theme_void() +\n  theme(\n    panel.background = element_rect(fill=\"#0077be\")\n  ) +\n  labs(\n    fill= str_wrap(\"População em milhões de habitantes\", 10)\n  )\n```", "```py\nworld %>%\n  ggplot() +\n  geom_sf(aes(fill=pop)) +\n  scale_fill_continuous_sequential(palette= \"Heat 2\", trans= \"log2\" )+\n  theme_void() +\n  theme(\n    panel.background = element_rect(fill=\"#0077be\"),\n    legend.position = \"none\"\n  )\n```", "```py\nworld %>%\n  filter(continent == \"South America\") %>%\n  ggplot() +\n  geom_sf(aes(fill=pop/10^6)) +\n  scale_fill_continuous_sequential(palette= \"Heat 2\" )+\n  theme_void() +\n  theme(\n    panel.background = element_rect(fill=\"#0077be\")\n  ) +\n  labs(\n    fill= str_wrap(\"População em milhões de habitantes\", 10)\n  )\n```", "```py\nsouthamerica<-\n  world %>%\n  filter(continent==\"South America\") \n\nsouthamerica$lon<- sf::st_coordinates(sf::st_centroid(southamerica$geom))[,1]   \nsouthamerica$lat<- sf::st_coordinates(sf::st_centroid(southamerica$geom))[,2]\n\nsouthamerica %>%\n  ggplot() +\n  geom_sf(aes(fill=pop/10^6)) +\n  scale_fill_continuous_sequential(palette= \"Heat 2\" )+\n  theme_light() +\n  theme(\n    panel.background = element_rect(fill=\"#0077be\")\n  ) +\n  labs(\n    fill= str_wrap(\"População em milhões de habitantes\", 10)\n  )+\n  geom_text_repel(aes(x=lon, y=lat, label= str_wrap(name_long,20)), \n                  color = \"black\", \n                  fontface = \"bold\", \n                  size = 2.8)\n```", "```py\nfrance<-\n  world %>%\n  filter(iso_a2 == \"FR\")\n\nfrance %>%\n  ggplot() +\n  geom_sf(aes(fill=pop)) +\n  scale_fill_continuous_sequential(palette= \"Heat 2\", trans= \"log2\" )+\n  theme_light() +\n  theme(\n    #panel.background = element_rect(fill=\"#0077be\")\n  ) +\n  labs(\n    fill= str_wrap(\"População\", 30)\n  )\n```", "```py\nsouthamerica %>%\n  bind_rows(france) %>%\n  ggplot() +\n  geom_sf(aes(fill=pop/10^6)) +\n  scale_fill_continuous_sequential(palette= \"Heat 2\" )+\n  theme_light() +\n  theme(\n    panel.background = element_rect(fill=\"#0077be\")\n  ) +\n  labs(\n    fill= str_wrap(\"População em milhões de habitantes\", 10)\n  )+\n  geom_text_repel(aes(x=lon, y=lat, label= str_wrap(name_long,20)), \n                  color = \"black\", \n                  fontface = \"bold\", \n                  size = 2.8)\n```", "```py\ndata_guiana<-\n  insee::get_idbank_list('TCRED-ESTIMATIONS-POPULATION') %>%\n  filter(str_detect(REF_AREA_label_fr,\"Guyane\")) %>%\n  filter(AGE == \"00-\") %>% #all ages\n  filter(SEXE == 0) %>% #men and women\n  pull(idbank) %>%\n  insee::get_insee_idbank() %>%\n  filter(TIME_PERIOD == \"2023\") %>% \n  select(TITLE_EN,OBS_VALUE) %>%\n  mutate(iso_a2 = \"FR\")\n\ndata_guiana <- janitor::clean_names(data_guiana)\n\nsouthamerica %>%\n  bind_rows(france) %>%\n  left_join(data_guiana) %>%\n  mutate(pop=ifelse(iso_a2==\"FR\",obs_value,pop))%>%\n  mutate(lon= ifelse(iso_a2==\"FR\", france[[11]][[1]][[1]][[1]][1,1], lon),\n         lat= ifelse(iso_a2==\"FR\",france[[11]][[1]][[1]][[1]][1,2], lat)) %>%\n  ggplot() +\n  geom_sf(aes(fill=pop/10^6)) +\n  scale_fill_continuous_sequential(palette= \"Heat 2\" )+\n  geom_text_repel(aes(x=lon, y=lat, label= str_wrap(name_long,20)), \n                  color = \"black\", \n                  fontface = \"bold\", \n                  size = 2.8)+\n  coord_sf(xlim = c(-82,-35), ylim=c(-60,15))+\n  theme_light() +\n  theme(\n    panel.background = element_rect(fill=\"#0077be\")\n  ) +\n  labs(\n    fill= str_wrap(\"População em milhões de habitantes\", 10)\n  )\n```", "```py\ncentral_america<-\n  world %>%\n  filter(subregion == \"Central America\")\n\nbrasil<- geobr::read_country()\nestados<- geobr::read_state()\n\n#dados de população\n\nibge2022<-\n  get_municipalies_data()\n\nestados<-\n  estados %>%\n  inner_join(\n    ibge2022 %>%\n      rename(abbrev_state = uf) %>%\n      summarise(.by=abbrev_state,\n                pop = sum(populacao_residente)\n      )\n  )\n\nsouthamerica %>%\n  filter(iso_a2!=\"BR\") %>%\n  bind_rows(france) %>%\n  left_join(data_guiana) %>%\n  mutate(pop=ifelse(iso_a2==\"FR\",obs_value,pop))%>%\n  mutate(lon= ifelse(iso_a2==\"FR\", france[[11]][[1]][[1]][[1]][1,1], lon),\n         lat= ifelse(iso_a2==\"FR\",france[[11]][[1]][[1]][[1]][1,2], lat)) %>%\n  ggplot() +\n  geom_sf(aes(fill=pop/10^6)) +\n  geom_sf(data=estados, aes(fill=pop/10^6)) +\n  geom_sf(data=brasil,fill=NA, color=\"#00A859\", lwd=1.2)+\n  geom_sf(data= central_america,fill= \"#808080\")+\n  scale_fill_continuous_sequential(palette= \"Heat 2\" )+\n  geom_text_repel(aes(x=lon, y=lat, \n                      label= str_wrap(name_long,20)), \n                  color = \"black\", \n                  fontface = \"bold\", \n                  size = 2.8)+\n  coord_sf(xlim = c(-82,-35), ylim=c(-60,15))+\n  theme_void() +\n  theme(\n    panel.background = element_rect(fill=\"#0077be\")\n  ) +\n  labs(\n    fill= str_wrap(\"População em milhões\", 10)\n  )\n```", "```py\nestados$lon<- sf::st_coordinates(sf::st_centroid(estados$geom))[,1]   \nestados$lat<- sf::st_coordinates(sf::st_centroid(estados$geom))[,2]\n\nmost_populated<-\n  southamerica %>%\n  filter(iso_a2 !=\"BR\") %>%\n  rename(name= name_long) %>%\n  as_tibble() %>%\n  select(name, pop, lat, lon) %>%\n\n  bind_rows(\n    estados %>%\n      rename(name= name_state) %>%\n      as_tibble() %>%\n      select(name, pop, lat, lon)\n  ) %>%\n  slice_max(order_by = pop, n=8)\n\nsouthamerica %>%\n  filter(iso_a2!=\"BR\") %>%\n  bind_rows(france) %>%\n  left_join(data_guiana) %>%\n  mutate(pop=ifelse(iso_a2==\"FR\",obs_value,pop))%>%\n  mutate(lon= ifelse(iso_a2==\"FR\", france[[11]][[1]][[1]][[1]][1,1], lon),\n         lat= ifelse(iso_a2==\"FR\",france[[11]][[1]][[1]][[1]][1,2], lat)) %>%\n  ggplot() +\n  geom_sf(aes(fill=pop/10^6)) +\n  geom_sf(data=estados, aes(fill=pop/10^6)) +\n  geom_sf(data=brasil,fill=NA, color=\"#00A859\", lwd=1.2)+\n  geom_sf(data= central_america,fill= \"#808080\")+\n  scale_fill_continuous_sequential(palette= \"Heat 2\" )+\n  geom_text_repel(data= most_populated,\n                  aes(x=lon, y=lat, \n                      label= str_c(str_wrap(name,10),\": \",round(pop/10^6,1))), \n                  color = \"black\", \n                  fontface = \"bold\", \n                  size = 2.9)+\n  coord_sf(xlim = c(-82,-35), ylim=c(-60,15))+\n  theme_void() +\n  theme(\n    panel.background = element_rect(fill=\"#0077be\")\n  ) +\n  labs(\n    fill= str_wrap(\"População em milhões\", 10)\n  ) \n```"]