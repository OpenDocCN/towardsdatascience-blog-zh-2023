# ç›‘æ§æ— ç»“æ„æ•°æ®ä»¥ç”¨äºLLMå’ŒNLP

> åŸæ–‡ï¼š[https://towardsdatascience.com/monitoring-unstructured-data-for-llm-and-nlp-efff42704e5b?source=collection_archive---------10-----------------------#2023-06-27](https://towardsdatascience.com/monitoring-unstructured-data-for-llm-and-nlp-efff42704e5b?source=collection_archive---------10-----------------------#2023-06-27)

## ä½¿ç”¨æ–‡æœ¬æè¿°ç¬¦çš„ä»£ç æ•™ç¨‹

[](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)[![Elena Samuylova](../Images/bc3024500f8b90a97f13d82ecaa1c9e7.png)](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)[](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------)[![æ•°æ®ç§‘å­¦å‰æ²¿](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------) [Elena Samuylova](https://medium.com/@elena.samuylova?source=post_page-----efff42704e5b--------------------------------)

Â·

[å…³æ³¨](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F9621354b583a&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&user=Elena+Samuylova&userId=9621354b583a&source=post_page-9621354b583a----efff42704e5b---------------------post_header-----------) å‘è¡¨åœ¨ [æ•°æ®ç§‘å­¦å‰æ²¿](https://towardsdatascience.com/?source=post_page-----efff42704e5b--------------------------------) Â· 14åˆ†é’Ÿé˜…è¯» Â· 2023å¹´6æœˆ27æ—¥[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2Fefff42704e5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&user=Elena+Samuylova&userId=9621354b583a&source=-----efff42704e5b---------------------clap_footer-----------)

--

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fefff42704e5b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmonitoring-unstructured-data-for-llm-and-nlp-efff42704e5b&source=-----efff42704e5b---------------------bookmark_footer-----------)![](../Images/9449b853160c4015be247a0c901aee69.png)

å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚

ä¸€æ—¦ä½ éƒ¨ç½²äº†åŸºäºNLPæˆ–LLMçš„è§£å†³æ–¹æ¡ˆï¼Œä½ éœ€è¦ä¸€ç§æ–¹æ³•æ¥ç›‘æ§å®ƒã€‚ä½†æ˜¯ä½ å¦‚ä½•ç›‘æ§æ— ç»“æ„æ•°æ®ä»¥ç†è§£å¤§é‡æ–‡æœ¬å‘¢ï¼Ÿ

è¿™é‡Œæœ‰å‡ ç§æ–¹æ³•ï¼Œä» [æ£€æµ‹åŸå§‹æ–‡æœ¬æ•°æ®ä¸­çš„æ¼‚ç§»](https://www.evidentlyai.com/blog/tutorial-detecting-drift-in-text-data) å’Œ [åµŒå…¥æ¼‚ç§»](https://www.evidentlyai.com/blog/embedding-drift-detection) åˆ°ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œè§„åˆ™æ£€æŸ¥ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä¸€ç§ç‰¹å®šçš„æ–¹æ³•â€”â€”è·Ÿè¸ªå¯è§£é‡Šçš„æ–‡æœ¬æè¿°ç¬¦ï¼Œè¿™æœ‰åŠ©äºä¸ºæ¯æ®µæ–‡æœ¬åˆ†é…ç‰¹å®šå±æ€§ã€‚

**é¦–å…ˆï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸€äº›ç†è®ºï¼š**

+   ä»€ä¹ˆæ˜¯æ–‡æœ¬æè¿°ç¬¦ï¼Œä»¥åŠä½•æ—¶ä½¿ç”¨å®ƒä»¬ã€‚

+   æ–‡æœ¬æè¿°ç¬¦ç¤ºä¾‹ã€‚

+   å¦‚ä½•é€‰æ‹©è‡ªå®šä¹‰æè¿°ç¬¦ã€‚

**æ¥ä¸‹æ¥ï¼Œå¼€å§‹ç¼–ç å§ï¼** ä½ å°†ä½¿ç”¨ç”µå­å•†åŠ¡è¯„è®ºæ•°æ®å¹¶å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

+   è·å–æ–‡æœ¬æ•°æ®çš„æ¦‚è§ˆã€‚

+   ä½¿ç”¨æ ‡å‡†æè¿°ç¬¦è¯„ä¼°æ–‡æœ¬æ•°æ®æ¼‚ç§»ã€‚

+   ä½¿ç”¨å¤–éƒ¨é¢„è®­ç»ƒæ¨¡å‹æ·»åŠ è‡ªå®šä¹‰æ–‡æœ¬æè¿°ç¬¦ã€‚

+   å®æ–½ç®¡é“æµ‹è¯•ä»¥ç›‘æ§æ•°æ®å˜åŒ–ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨[Evidentlyå¼€æºPythonåº“](https://github.com/evidentlyai/evidently)æ¥ç”Ÿæˆæ–‡æœ¬æè¿°ç¬¦å¹¶è¯„ä¼°æ•°æ®å˜åŒ–ã€‚

> ***ä»£ç ç¤ºä¾‹ï¼š*** *å¦‚æœä½ æ›´å–œæ¬¢ç›´æ¥æŸ¥çœ‹ä»£ç ï¼Œè¿™é‡Œæ˜¯* [*ç¤ºä¾‹ç¬”è®°æœ¬*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb)*ã€‚*

# ä»€ä¹ˆæ˜¯æ–‡æœ¬æè¿°ç¬¦ï¼Ÿ

æ–‡æœ¬æè¿°ç¬¦æ˜¯æè¿°æ–‡æœ¬æ•°æ®é›†ä¸­å¯¹è±¡çš„ä»»ä½•ç‰¹å¾æˆ–å±æ€§ã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬é•¿åº¦æˆ–å…¶ä¸­çš„ç¬¦å·æ•°é‡ã€‚

ä½ å¯èƒ½å·²ç»æ‹¥æœ‰æœ‰ç”¨çš„å…ƒæ•°æ®æ¥ä¼´éšä½ çš„æ–‡æœ¬ï¼Œä½œä¸ºæè¿°ç¬¦ã€‚ä¾‹å¦‚ï¼Œç”µå­å•†åŠ¡ç”¨æˆ·è¯„è®ºå¯èƒ½ä¼šé™„å¸¦ç”¨æˆ·åˆ†é…çš„è¯„çº§æˆ–ä¸»é¢˜æ ‡ç­¾ã€‚

å¦åˆ™ï¼Œä½ å¯ä»¥ç”Ÿæˆè‡ªå·±çš„æè¿°ç¬¦ï¼ä½ å¯ä»¥é€šè¿‡å‘æ–‡æœ¬æ•°æ®æ·»åŠ â€œè™šæ‹Ÿç‰¹å¾â€æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚æ¯ä¸ªæè¿°ç¬¦éƒ½æœ‰åŠ©äºä½¿ç”¨ä¸€äº›æœ‰æ„ä¹‰çš„æ ‡å‡†æè¿°æˆ–åˆ†ç±»ä½ çš„æ–‡æœ¬ã€‚

![](../Images/4d3ad2d6d7d7d91249e42b8d12b13dec.png)

ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚

é€šè¿‡åˆ›å»ºè¿™äº›æè¿°ç¬¦ï¼Œä½ åŸºæœ¬ä¸Šæå‡ºäº†è‡ªå·±çš„ç®€å•â€œåµŒå…¥â€ï¼Œå¹¶å°†æ¯ä¸ªæ–‡æœ¬æ˜ å°„åˆ°å‡ ä¸ªå¯è§£é‡Šçš„ç»´åº¦ã€‚è¿™æœ‰åŠ©äºç†è§£é‚£äº›åŸæœ¬æ— ç»“æ„çš„æ•°æ®ã€‚

ç„¶åä½ å¯ä»¥ä½¿ç”¨è¿™äº›æ–‡æœ¬æè¿°ç¬¦ï¼š

+   **ç›‘æ§ç”Ÿäº§ NLP æ¨¡å‹ã€‚** ä½ å¯ä»¥è·Ÿè¸ªæ•°æ®çš„å±æ€§ï¼Œå¹¶æ£€æµ‹å®ƒä»¬ä½•æ—¶å‘ç”Ÿå˜åŒ–ã€‚ä¾‹å¦‚ï¼Œæè¿°ç¬¦æœ‰åŠ©äºæ£€æµ‹æ–‡æœ¬é•¿åº¦çš„çªå¢æˆ–æƒ…æ„Ÿçš„æ¼‚ç§»ã€‚

+   **åœ¨æ›´æ–°æœŸé—´æµ‹è¯•æ¨¡å‹ã€‚** å½“ä½ è¿­ä»£æ¨¡å‹æ—¶ï¼Œå¯ä»¥æ¯”è¾ƒè¯„ä¼°æ•°æ®é›†çš„å±æ€§å’Œæ¨¡å‹å“åº”ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ£€æŸ¥LLMç”Ÿæˆçš„ç­”æ¡ˆçš„é•¿åº¦æ˜¯å¦ä¿æŒä¸€è‡´ï¼Œå¹¶ä¸”å®ƒä»¬æ˜¯å¦å§‹ç»ˆåŒ…å«ä½ æœŸæœ›çœ‹åˆ°çš„å•è¯ã€‚

+   **è°ƒè¯•æ•°æ®æ¼‚ç§»æˆ–æ¨¡å‹è¡°é€€ã€‚** å¦‚æœä½ æ£€æµ‹åˆ°[åµŒå…¥æ¼‚ç§»](https://www.evidentlyai.com/blog/embedding-drift-detection)æˆ–ç›´æ¥è§‚å¯Ÿåˆ°æ¨¡å‹è´¨é‡ä¸‹é™ï¼Œä½ å¯ä»¥ä½¿ç”¨æ–‡æœ¬æè¿°ç¬¦æ¥æ¢ç´¢å…¶æ¥æºã€‚

# æ–‡æœ¬æè¿°ç¬¦ç¤ºä¾‹

ä»¥ä¸‹æ˜¯æˆ‘ä»¬è®¤ä¸ºè‰¯å¥½çš„é»˜è®¤æ–‡æœ¬æè¿°ç¬¦ï¼š

## æ–‡æœ¬é•¿åº¦

![](../Images/184e6533f48040200fe1378cad612a11.png)

*ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚ä½¿ç”¨* [*Evidently Python åº“*](https://github.com/evidentlyai/evidently)*çš„æ–‡æœ¬æ¦‚è§ˆåº¦é‡å¯è§†åŒ–ã€‚*

ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹æ˜¯ç®€å•çš„æ–‡æœ¬ç»Ÿè®¡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŸ¥çœ‹**æ–‡æœ¬é•¿åº¦**ï¼ŒæŒ‰å•è¯ã€ç¬¦å·æˆ–å¥å­æ¥åº¦é‡ã€‚ä½ å¯ä»¥è¯„ä¼°å¹³å‡é•¿åº¦ã€æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œå¹¶æŸ¥çœ‹åˆ†å¸ƒæƒ…å†µã€‚

ä½ å¯ä»¥æ ¹æ®ä½ çš„ä½¿ç”¨æ¡ˆä¾‹è®¾å®šæœŸæœ›ã€‚ä¾‹å¦‚ï¼Œäº§å“è¯„è®ºé€šå¸¸åœ¨5åˆ°100ä¸ªå•è¯ä¹‹é—´ã€‚å¦‚æœè¯„è®ºæ›´çŸ­æˆ–æ›´é•¿ï¼Œè¿™å¯èƒ½è¡¨ç¤ºä¸Šä¸‹æ–‡å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚æœå›ºå®šé•¿åº¦è¯„è®ºçš„æ•°é‡æ¿€å¢ï¼Œè¿™å¯èƒ½è¡¨ç¤ºåƒåœ¾é‚®ä»¶æ”»å‡»ã€‚å¦‚æœä½ çŸ¥é“è´Ÿé¢è¯„è®ºé€šå¸¸è¾ƒé•¿ï¼Œä½ å¯ä»¥è·Ÿè¸ªè¶…è¿‡æŸä¸€é•¿åº¦çš„è¯„è®ºæ¯”ä¾‹ã€‚

è¿˜æœ‰ä¸€äº›å¿«é€Ÿçš„åˆç†æ€§æ£€æŸ¥ï¼šå¦‚æœä½ è¿è¡ŒèŠå¤©æœºå™¨äººï¼Œä½ å¯èƒ½æœŸæœ›æœ‰éé›¶å“åº”æˆ–è€…æœ‰ä¸€äº›æœ‰æ„ä¹‰è¾“å‡ºçš„æœ€å°é•¿åº¦ã€‚

## è¯æ±‡è¡¨å¤–çš„å•è¯

![](../Images/a65c56974f1b1f3ae2d41514a07315b3.png)

ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚*ç¤ºä¾‹å‚è€ƒæ•°æ®é›†ä¸­OOVçš„å¹³å‡æ¯”ä¾‹ä¸º5.378%ã€‚*

è¯„ä¼°è¶…å‡ºå®šä¹‰è¯æ±‡èŒƒå›´çš„å•è¯æ¯”ä¾‹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„â€œç²—ç•¥â€æ•°æ®è´¨é‡è¡¡é‡æ ‡å‡†ã€‚ä½ çš„ç”¨æˆ·æ˜¯å¦å¼€å§‹ç”¨æ–°çš„è¯­è¨€æ’°å†™è¯„è®ºï¼Ÿç”¨æˆ·æ˜¯å¦ç”¨Pythonè€Œéè‹±è¯­ä¸èŠå¤©æœºå™¨äººå¯¹è¯ï¼Ÿç”¨æˆ·æ˜¯å¦ç”¨â€œgggâ€ä»£æ›¿å®é™…å•è¯å¡«å†™å“åº”ï¼Ÿ

è¿™æ˜¯æ£€æµ‹å„ç§å˜åŒ–çš„ä¸€ä¸ªå®é™…æªæ–½ã€‚ä¸€æ—¦å‘ç°å˜åŒ–ï¼Œä½ å¯ä»¥è¿›è¡Œæ›´æ·±å…¥çš„è°ƒè¯•ã€‚

ä½ å¯ä»¥æ ¹æ®é•¿æœŸç§¯ç´¯çš„â€œè‰¯å¥½â€ç”Ÿäº§æ•°æ®ç¤ºä¾‹æ¥è®¾å®šå¯¹OOVå•è¯æ¯”ä¾‹çš„æœŸæœ›ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æŸ¥çœ‹ä»¥å¾€äº§å“è¯„è®ºçš„è¯­æ–™åº“ï¼Œä½ å¯èƒ½ä¼šæœŸæœ›OOVåœ¨10%ä»¥ä¸‹ï¼Œå¹¶ç›‘æ§å…¶å€¼æ˜¯å¦è¶…è¿‡è¿™ä¸ªé˜ˆå€¼ã€‚

## éå­—æ¯å­—ç¬¦

ç›¸å…³ï¼Œä½†æœ‰ä¸ªå°å˜åŒ–ï¼šè¿™ä¸ªæè¿°ç¬¦å°†ç»Ÿè®¡æ‰€æœ‰éå­—æ¯æˆ–æ•°å­—çš„ç‰¹æ®Šç¬¦å·ï¼ŒåŒ…æ‹¬é€—å·ã€æ‹¬å·ã€äº•å·ç­‰ã€‚

æœ‰æ—¶ä½ ä¼šæœŸæœ›å‡ºç°ç›¸å½“å¤šçš„ç‰¹æ®Šç¬¦å·ï¼šä½ çš„æ–‡æœ¬å¯èƒ½åŒ…å«ä»£ç æˆ–ä»¥JSONæ ¼å¼ç»“æ„åŒ–ã€‚æœ‰æ—¶ï¼Œä½ åªæœŸæœ›åœ¨äººç±»å¯è¯»çš„æ–‡æœ¬ä¸­å‡ºç°æ ‡ç‚¹ç¬¦å·ã€‚

æ£€æµ‹éå­—æ¯å­—ç¬¦çš„å˜åŒ–å¯ä»¥æ­ç¤ºæ•°æ®è´¨é‡é—®é¢˜ï¼Œæ¯”å¦‚HTMLä»£ç æ³„æ¼åˆ°è¯„è®ºæ–‡æœ¬ä¸­ã€åƒåœ¾é‚®ä»¶æ”»å‡»ã€æ„å¤–çš„ä½¿ç”¨åœºæ™¯ç­‰ã€‚

## æƒ…æ„Ÿ

![](../Images/0b6feb7078990f2fd42ebf4054b2cb2b.png)

ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚*ç¤ºä¾‹ç”µå­å•†åŠ¡è¯„è®ºæ•°æ®é›†ä¸­â€œåŸºå‡†â€æƒ…æ„Ÿåˆ†å¸ƒã€‚*

æ–‡æœ¬æƒ…æ„Ÿæ˜¯å¦ä¸€ä¸ªæŒ‡æ ‡ã€‚å®ƒåœ¨å„ç§åœºæ™¯ä¸­éƒ½å¾ˆæœ‰ç”¨ï¼šä»èŠå¤©æœºå™¨äººå¯¹è¯åˆ°ç”¨æˆ·è¯„è®ºå’Œè¥é”€æ–‡æ¡ˆç¼–å†™ã€‚ä½ é€šå¸¸å¯ä»¥è®¾å®šä½ å¤„ç†çš„æ–‡æœ¬çš„æƒ…æ„Ÿé¢„æœŸã€‚

å³ä½¿æƒ…æ„Ÿâ€œæ— å…³â€ï¼Œè¿™å¯èƒ½æ„å‘³ç€æœŸæœ›çš„ä¸»è¦æ˜¯ä¸­ç«‹çš„è¯­è°ƒã€‚è´Ÿé¢æˆ–æ­£é¢çš„è¯­è°ƒçš„æ½œåœ¨å‡ºç°æ˜¯å€¼å¾—è·Ÿè¸ªå’Œè°ƒæŸ¥çš„ã€‚è¿™å¯èƒ½è¡¨æ˜æ„å¤–çš„ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·æ˜¯å¦å°†ä½ çš„è™šæ‹ŸæŠµæŠ¼è´·æ¬¾é¡¾é—®ç”¨ä½œæŠ•è¯‰æ¸ é“ï¼Ÿ

ä½ ä¹Ÿå¯èƒ½æœŸæœ›æŸç§å¹³è¡¡ï¼šä¾‹å¦‚ï¼Œæ€»ä¼šæœ‰ä¸€éƒ¨åˆ†å¯¹è¯æˆ–è¯„è®ºå¸¦æœ‰è´Ÿé¢è¯­è°ƒï¼Œä½†ä½ ä¼šæœŸæœ›å®ƒä¸ä¼šè¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œæˆ–è€…è¯„è®ºæƒ…æ„Ÿçš„æ•´ä½“åˆ†å¸ƒä¿æŒç¨³å®šã€‚

## è§¦å‘è¯

![](../Images/b8cb44f8a4202672b43ca925422086b8.png)

ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚*è¯„è®ºä¸€è‡´æåˆ°è¿è¡£è£™ï¼šæœªæ£€æµ‹åˆ°åˆ†å¸ƒæ¼‚ç§»ã€‚*

ä½ è¿˜å¯ä»¥æ£€æŸ¥æ–‡æœ¬æ˜¯å¦åŒ…å«ç‰¹å®šåˆ—è¡¨ä¸­çš„å•è¯ï¼Œå¹¶å°†å…¶è§†ä¸ºäºŒè¿›åˆ¶ç‰¹å¾ã€‚

è¿™æ˜¯ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥ç¼–ç å¯¹ä½ æ–‡æœ¬çš„å¤šä¸ªæœŸæœ›ã€‚ä½ éœ€è¦ä¸€äº›åŠªåŠ›æ¥æ‰‹åŠ¨ç­–åˆ’åˆ—è¡¨ï¼Œä½†ä½ å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è®¾è®¡è®¸å¤šæœ‰ç”¨çš„æ£€æŸ¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºè§¦å‘è¯åˆ—è¡¨ï¼Œå¦‚ï¼š

+   æåŠäº§å“æˆ–å“ç‰Œã€‚

+   æåŠç«äº‰å¯¹æ‰‹ã€‚

+   æåŠåœ°ç‚¹ã€åŸå¸‚ã€åœ°æ–¹ç­‰ã€‚

+   æåŠä»£è¡¨ç‰¹å®šä¸»é¢˜çš„å•è¯ã€‚

ä½ å¯ä»¥ç­–åˆ’ï¼ˆå¹¶ä¸æ–­æ‰©å±•ï¼‰ç±»ä¼¼çš„åˆ—è¡¨ï¼Œè¿™äº›åˆ—è¡¨æ˜¯ç‰¹å®šäºä½ çš„ç”¨ä¾‹çš„ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªé¡¾é—®èŠå¤©æœºå™¨äººå¸®åŠ©é€‰æ‹©å…¬å¸æä¾›çš„äº§å“ä¹‹ä¸€ï¼Œä½ å¯èƒ½ä¼šæœŸæœ›å¤§å¤šæ•°å“åº”ä¸­åŒ…å«è¯¥åˆ—è¡¨ä¸­æŸä¸ªäº§å“çš„åç§°ã€‚

## RegExp åŒ¹é…

åŒ…å«ç‰¹å®šå•è¯çš„ä¾‹å­æ˜¯ä½ å¯ä»¥åˆ¶å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¹‹ä¸€ã€‚ä½ å¯ä»¥æƒ³å‡ºå…¶ä»–æ¨¡å¼ï¼šä½ æ˜¯å¦æœŸæœ›ä½ çš„æ–‡æœ¬ä»¥â€œhelloâ€å¼€å¤´å¹¶ä»¥â€œthank youâ€ç»“å°¾ï¼ŸåŒ…å«ç”µå­é‚®ä»¶ï¼ŸåŒ…å«å·²çŸ¥çš„å‘½åå…ƒç´ ï¼Ÿ

å¦‚æœä½ æœŸæœ›æ¨¡å‹è¾“å…¥æˆ–è¾“å‡ºç¬¦åˆç‰¹å®šæ ¼å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä½œä¸ºå¦ä¸€ç§æè¿°ç¬¦ã€‚

## è‡ªå®šä¹‰æè¿°ç¬¦

ä½ å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•è¿™ä¸ªæƒ³æ³•ã€‚ä¾‹å¦‚ï¼š

+   **è¯„ä¼°å…¶ä»–æ–‡æœ¬å±æ€§**ï¼šæ¯’æ€§ã€ä¸»è§‚æ€§ã€è¯­æ°”çš„æ­£å¼ç¨‹åº¦ã€å¯è¯»æ€§è¯„åˆ†ç­‰ã€‚ä½ é€šå¸¸å¯ä»¥æ‰¾åˆ°å¼€æ”¾çš„é¢„è®­ç»ƒæ¨¡å‹æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚

+   **è®¡æ•°ç‰¹å®šç»„ä»¶ï¼š** ç”µå­é‚®ä»¶ã€URLã€è¡¨æƒ…ç¬¦å·ã€æ—¥æœŸå’Œè¯æ€§ã€‚ä½ å¯ä»¥ä½¿ç”¨å¤–éƒ¨æ¨¡å‹æˆ–ç”šè‡³ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

+   **æ·±å…¥ç»Ÿè®¡æ•°æ®ï¼š** å¦‚æœè¿™äº›æ•°æ®å¯¹ä½ çš„ç”¨ä¾‹æœ‰æ„ä¹‰ï¼Œä½ å¯ä»¥è¿½è¸ªéå¸¸è¯¦ç»†çš„æ–‡æœ¬ç»Ÿè®¡æ•°æ®ï¼Œä¾‹å¦‚ï¼Œè¿½è¸ªå•è¯çš„å¹³å‡é•¿åº¦ï¼Œå®ƒä»¬æ˜¯å¤§å†™è¿˜æ˜¯å°å†™ï¼Œå”¯ä¸€å•è¯çš„æ¯”ä¾‹ç­‰ã€‚

+   **ç›‘æ§ä¸ªäººå¯è¯†åˆ«ä¿¡æ¯**ï¼šä¾‹å¦‚ï¼Œå½“ä½ ä¸æœŸæœ›å®ƒå‡ºç°åœ¨èŠå¤©æœºå™¨äººå¯¹è¯ä¸­æ—¶ã€‚

+   **ä½¿ç”¨å‘½åå®ä½“è¯†åˆ«ï¼š** æå–ç‰¹å®šå®ä½“å¹¶å°†å…¶è§†ä¸ºæ ‡ç­¾ã€‚**â€**

+   **ä½¿ç”¨ä¸»é¢˜å»ºæ¨¡** æ¥å»ºç«‹ä¸»é¢˜ç›‘æ§ç³»ç»Ÿã€‚è¿™æ˜¯æœ€ç¹ççš„æ–¹æ³•ï¼Œä½†åšå¾—å¥½æ—¶éå¸¸å¼ºå¤§ã€‚å½“ä½ æœŸæœ›æ–‡æœ¬ä¿æŒåœ¨ä¸»è¦è¯é¢˜ä¸Šå¹¶ä¸”æ‹¥æœ‰ä¹‹å‰çš„ç¤ºä¾‹è¯­æ–™åº“æ¥è®­ç»ƒæ¨¡å‹æ—¶ï¼Œå®ƒéå¸¸æœ‰ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨æ— ç›‘ç£ä¸»é¢˜èšç±»å¹¶åˆ›å»ºä¸€ä¸ªæ¨¡å‹æ¥å°†æ–°æ–‡æœ¬åˆ†é…åˆ°å·²çŸ¥çš„ç°‡ä¸­ã€‚ç„¶åï¼Œä½ å¯ä»¥å°†åˆ†é…çš„ç±»åˆ«ä½œä¸ºæè¿°ç¬¦æ¥ç›‘æ§æ–°æ•°æ®ä¸­ä¸»é¢˜åˆ†å¸ƒçš„å˜åŒ–ã€‚

![](../Images/56ae75356635ea5aebe10c8b079438e6.png)

ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚*å¤šä¸ªæè¿°ç¬¦çš„æ€»ç»“æ¼‚ç§»æŠ¥å‘Šç¤ºä¾‹ã€‚*

è®¾è®¡æè¿°ç¬¦æ—¶è¦è®°ä½çš„å‡ ç‚¹ï¼š

+   **æœ€å¥½ä¿æŒä¸“æ³¨**ï¼Œå°½é‡æ‰¾å‡ºå°‘é‡é€‚åˆçš„è´¨é‡æŒ‡æ ‡ï¼Œè¿™äº›æŒ‡æ ‡ä¸ç”¨ä¾‹åŒ¹é…ï¼Œè€Œä¸æ˜¯ç›‘æ§æ‰€æœ‰å¯èƒ½çš„ç»´åº¦ã€‚å°†æè¿°ç¬¦è§†ä¸ºæ¨¡å‹ç‰¹å¾ã€‚ä½ å¸Œæœ›æ‰¾åˆ°ä¸€äº›å¼ºå¤§çš„ç‰¹å¾ï¼Œè€Œä¸æ˜¯ç”Ÿæˆå¤§é‡å¼±çš„æˆ–æ— ç”¨çš„ç‰¹å¾ã€‚è®¸å¤šç‰¹å¾å¾€å¾€æ˜¯ç›¸å…³çš„ï¼šè¯­è¨€å’Œ OOV å•è¯çš„æ¯”ä¾‹ã€å¥å­å’Œç¬¦å·çš„é•¿åº¦ç­‰ã€‚é€‰æ‹©ä½ æœ€å–œæ¬¢çš„ï¼

+   **ä½¿ç”¨æ¢ç´¢æ€§æ•°æ®åˆ†æ** è¯„ä¼°ç°æœ‰æ•°æ®ä¸­çš„æ–‡æœ¬å±æ€§ï¼ˆä¾‹å¦‚ï¼Œä»¥å‰å¯¹è¯çš„æ—¥å¿—ï¼‰ï¼Œä»¥æµ‹è¯•ä½ çš„å‡è®¾ï¼Œç„¶åå†å°†å®ƒä»¬æ·»åŠ åˆ°æ¨¡å‹ç›‘æ§ä¸­ã€‚

+   **ä»æ¨¡å‹å¤±è´¥ä¸­å­¦ä¹ **ã€‚æ¯å½“ä½ é‡åˆ°ä¸€ä¸ªä½ æœŸæœ›å†æ¬¡å‡ºç°çš„ç”Ÿäº§æ¨¡å‹è´¨é‡é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œå¤–è¯­æ–‡æœ¬ï¼‰ï¼Œè€ƒè™‘å¦‚ä½•å¼€å‘ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æˆ–æè¿°ç¬¦ï¼Œä»¥ä¾¿åœ¨æœªæ¥æ£€æµ‹åˆ°å®ƒã€‚

+   **æ³¨æ„è®¡ç®—æˆæœ¬ã€‚** ä½¿ç”¨å¤–éƒ¨æ¨¡å‹æŒ‰æ¯ä¸ªå¯èƒ½çš„ç»´åº¦è¯„åˆ†æ–‡æœ¬æ˜¯å¾ˆè¯±äººçš„ï¼Œä½†è¿™ä¼šå¸¦æ¥é¢å¤–çš„æˆæœ¬ã€‚è€ƒè™‘ä¸€ä¸‹åœ¨å¤„ç†è¾ƒå¤§çš„æ•°æ®é›†æ—¶ï¼šæ¯ä¸ªå¤–éƒ¨åˆ†ç±»å™¨éƒ½æ˜¯ä¸€ä¸ªé¢å¤–çš„æ¨¡å‹ã€‚é€šå¸¸å¯ä»¥é€šè¿‡æ›´å°‘æˆ–æ›´ç®€å•çš„æ£€æŸ¥æ¥è§£å†³é—®é¢˜ã€‚

# åˆ†æ­¥æ•™ç¨‹

ä¸ºäº†è¯´æ˜è¿™ä¸ªæƒ³æ³•ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹åœºæ™¯æ¥æ¼”ç¤ºï¼šä½ æ­£åœ¨æ„å»ºä¸€ä¸ªåˆ†ç±»å™¨æ¨¡å‹ï¼Œä»¥å¯¹ç”¨æˆ·åœ¨ç”µå­å•†åŠ¡ç½‘ç«™ä¸Šç•™ä¸‹çš„è¯„è®ºè¿›è¡Œè¯„åˆ†å¹¶æŒ‰ä¸»é¢˜æ ‡è®°ã€‚ä¸€æ—¦æ¨¡å‹æŠ•å…¥ç”Ÿäº§ï¼Œä½ å¸Œæœ›æ£€æµ‹æ•°æ®å’Œæ¨¡å‹ç¯å¢ƒçš„å˜åŒ–ï¼Œä½†ä½ æ²¡æœ‰çœŸå®æ ‡ç­¾ã€‚ä½ éœ€è¦è¿è¡Œä¸€ä¸ªå•ç‹¬çš„æ ‡è®°è¿‡ç¨‹æ¥è·å–å®ƒä»¬ã€‚

æ²¡æœ‰æ ‡ç­¾çš„æƒ…å†µä¸‹ä½ å¦‚ä½•è·Ÿè¸ªå˜åŒ–ï¼Ÿ

è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªç¤ºä¾‹æ•°æ®é›†ä¸ºä¾‹ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š

> ***ä»£ç ç¤ºä¾‹ï¼š*** *è¯·å‰å¾€* [*ç¤ºä¾‹ç¬”è®°æœ¬*](https://github.com/evidentlyai/community-examples/blob/main/tutorials/How_to_add_a_custom_text_descriptor.ipynb) *ä»¥æŸ¥çœ‹æ‰€æœ‰æ­¥éª¤ã€‚*

# ğŸ’» 1\. å®‰è£… Evidently

é¦–å…ˆï¼Œå®‰è£… Evidentlyã€‚ä½¿ç”¨ Python åŒ…ç®¡ç†å™¨åœ¨ä½ çš„ç¯å¢ƒä¸­å®‰è£…å®ƒã€‚å¦‚æœä½ åœ¨ Colab ä¸­å·¥ä½œï¼Œè¿è¡Œ *!pip install*ã€‚åœ¨ Jupyter Notebook ä¸­ï¼Œä½ è¿˜éœ€è¦å®‰è£… nbextensionã€‚æŸ¥çœ‹ [å®‰è£…è¯´æ˜](https://docs.evidentlyai.com/user-guide/install-evidently/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring) ä»¥è·å–ä½ çš„ç¯å¢ƒä¿¡æ¯ã€‚

ä½ è¿˜éœ€è¦å¯¼å…¥ä¸€äº›å…¶ä»–åº“ï¼Œå¦‚ *pandas* å’Œç‰¹å®šçš„ Evidently ç»„ä»¶ã€‚æŒ‰ç…§ç¬”è®°æœ¬ä¸­çš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚

# ğŸ”¡ 2\. å‡†å¤‡æ•°æ®

ä¸€æ—¦ä½ è®¾ç½®å¥½äº†æ‰€æœ‰å†…å®¹ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ•°æ®å§ï¼ä½ å°†ä½¿ç”¨ä¸€ä¸ªæ¥è‡ªç”µå­å•†åŠ¡è¯„è®ºçš„å¼€æ”¾æ•°æ®é›†ã€‚

è¿™å°±æ˜¯æ•°æ®é›†çš„æ ·å­ï¼š

![](../Images/61dc47d6fb8c0c43b9c82d3180b95766.png)

å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚

æˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨â€œReview_Textâ€åˆ—è¿›è¡Œæ¼”ç¤ºã€‚åœ¨ç”Ÿäº§ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦ç›‘æ§è¯„è®ºæ–‡æœ¬çš„å˜åŒ–ã€‚

ä½ éœ€è¦ä½¿ç”¨åˆ—æ˜ å°„æŒ‡å®šåŒ…å«æ–‡æœ¬çš„åˆ—ï¼š

```py
column_mapping = ColumnMapping( 
  numerical_features=['Age', 'Positive_Feedback_Count'], 
  categorical_features=['Division_Name', 'Department_Name', 'Class_Name'], 
  text_features=['Review_Text', 'Title']
)
```

ä½ è¿˜åº”è¯¥å°†æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šå‚è€ƒæ•°æ®å’Œå½“å‰æ•°æ®ã€‚å‡è®¾â€œå‚è€ƒâ€æ•°æ®æ˜¯æŸä¸ªä»£è¡¨æ€§è¿‡å»æ—¶æœŸçš„æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œä¸Šä¸ªæœˆï¼‰ï¼Œè€Œâ€œå½“å‰â€æ˜¯å½“å‰ç”Ÿäº§æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œæœ¬æœˆï¼‰ã€‚è¿™ä¸¤ä¸ªæ•°æ®é›†æ˜¯ä½ å°†ä½¿ç”¨æè¿°ç¬¦è¿›è¡Œæ¯”è¾ƒçš„æ•°æ®é›†ã€‚

> ***æ³¨æ„ï¼š*** *å»ºç«‹åˆé€‚çš„å†å²åŸºçº¿å¾ˆé‡è¦ã€‚é€‰æ‹©ä¸€ä¸ªåæ˜ ä½ å¯¹æœªæ¥æ•°æ®é¢„æœŸçš„æ—¶æœŸã€‚*

æˆ‘ä»¬ä¸ºæ¯ä¸ªæ ·æœ¬é€‰æ‹©äº†5000ä¸ªä¾‹å­ã€‚ä¸ºäº†å¢åŠ è¶£å‘³æ€§ï¼Œæˆ‘ä»¬é€šè¿‡é€‰æ‹©è´Ÿé¢è¯„è®ºæ¥äººä¸ºåœ°å¼•å…¥äº†ä¸€äº›åå·®ã€‚

```py
reviews_ref = reviews[reviews.Rating > 3].sample(n=5000, replace=True, ignore_index=True, random_state=42)
reviews_cur = reviews[reviews.Rating < 3].sample(n=5000, replace=True, ignore_index=True, random_state=42)
```

# ğŸ“Š 3\. æ¢ç´¢æ€§æ•°æ®åˆ†æ

ä¸ºäº†æ›´å¥½åœ°ç†è§£æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨ Evidently ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Šã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé¢„è®¾çš„**æ–‡æœ¬æ¦‚è§ˆé¢„è®¾**ï¼Œå¸®åŠ©å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªæ–‡æœ¬æ•°æ®é›†ã€‚å®ƒç»“åˆäº†å„ç§æè¿°æ€§æ£€æŸ¥ï¼Œå¹¶è¯„ä¼°æ•´ä½“æ•°æ®æ¼‚ç§»ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨[åŸºäºæ¨¡å‹çš„æ¼‚ç§»æ£€æµ‹æ–¹æ³•](https://www.evidentlyai.com/blog/evidently-data-quality-monitoring-and-drift-detection-for-text-data)ï¼‰ã€‚

æ­¤æŠ¥å‘Šè¿˜åŒ…æ‹¬ä¸€äº›æ ‡å‡†æè¿°ç¬¦ï¼Œå¹¶å…è®¸ä½ ä½¿ç”¨è§¦å‘è¯åˆ—è¡¨æ·»åŠ æè¿°ç¬¦ã€‚æˆ‘ä»¬å°†åœ¨æŠ¥å‘Šä¸­æŸ¥çœ‹ä»¥ä¸‹æè¿°ç¬¦ï¼š

+   æ–‡æœ¬é•¿åº¦

+   OOVè¯æ±‡çš„æ¯”ä¾‹

+   éå­—æ¯ç¬¦å·çš„æ¯”ä¾‹

+   è¯„è®ºçš„æƒ…æ„Ÿ

+   åŒ…å«â€œdressâ€æˆ–â€œgownâ€è¿™ä¸¤ä¸ªè¯çš„è¯„è®º

+   åŒ…å«â€œblouseâ€æˆ–â€œshirtâ€è¿™ä¸¤ä¸ªè¯çš„è¯„è®º

> *æŸ¥çœ‹ Evidently* [*æœ‰å…³æè¿°ç¬¦çš„æ–‡æ¡£ä»¥è·å–è¯¦ç»†ä¿¡æ¯*](https://docs.evidentlyai.com/user-guide/customization/text-descriptors-parameters/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*ã€‚*

è¿™æ˜¯è¿è¡Œæ­¤æŠ¥å‘Šæ‰€éœ€çš„ä»£ç ã€‚ä½ å¯ä»¥ä¸ºæ¯ä¸ªæè¿°ç¬¦åˆ†é…è‡ªå®šä¹‰åç§°ã€‚

```py
text_overview_report = Report(metrics=[ 
  TextOverviewPreset(column_name="Review_Text", descriptors={ 
    "Review texts - OOV %" : OOV(), 
    "Review texts - Non Letter %" : NonLetterCharacterPercentage(), 
    "Review texts - Symbol Length" : TextLength(), 
    "Review texts - Sentence Count" : SentenceCount(), 
    "Review texts - Word Count" : WordCount(), 
    "Review texts - Sentiment" : Sentiment(), 
    "Reviews about Dress" : TriggerWordsPresence(words_list=['dress', 'gown']), 
    "Reviews about Blouses" : TriggerWordsPresence(words_list=['blouse', 'shirt']), 
  }) 
]) 
text_overview_report.run(reference_data=reviews_ref, current_data=reviews_cur, column_mapping=column_mapping) 
text_overview_report
```

è¿è¡Œè¿™æ ·çš„æŠ¥å‘Šæœ‰åŠ©äºæ¢ç´¢æ¨¡å¼ï¼Œå¹¶å½¢æˆå¯¹ç‰¹å®šå±æ€§çš„æœŸæœ›ï¼Œä¾‹å¦‚æ–‡æœ¬é•¿åº¦åˆ†å¸ƒã€‚

â€œæƒ…æ„Ÿâ€æè¿°ç¬¦çš„åˆ†å¸ƒè¿…é€Ÿæ­ç¤ºäº†æˆ‘ä»¬åœ¨æ‹†åˆ†æ•°æ®æ—¶æ‰€åšçš„æ“ä½œã€‚æˆ‘ä»¬å°†æ’åé«˜äº3çš„è¯„è®ºæ”¾å…¥â€œå‚è€ƒâ€æ•°æ®é›†ä¸­ï¼Œè€Œå°†æ›´å¤šè´Ÿé¢è¯„è®ºæ”¾å…¥â€œå½“å‰â€æ•°æ®é›†ä¸­ã€‚ç»“æœä¸€ç›®äº†ç„¶ï¼š

![](../Images/f6f0128ec9976fe67cdfb3d79e3cd4b2.png)

ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚

é»˜è®¤æŠ¥å‘Šéå¸¸å…¨é¢ï¼Œå¯ä»¥ä¸€æ¬¡æŸ¥çœ‹å¤šä¸ªæ–‡æœ¬å±æ€§ã€‚å¯ä»¥æ¢ç´¢æè¿°ç¬¦ä¸æ•°æ®é›†ä¸­å…¶ä»–åˆ—ä¹‹é—´çš„ç›¸å…³æ€§ï¼

ä½ å¯ä»¥åœ¨æ¢ç´¢é˜¶æ®µä½¿ç”¨å®ƒï¼Œä½†è¿™å¯èƒ½ä¸æ˜¯ä½ éœ€è¦ä¸€ç›´ä½¿ç”¨çš„å·¥å…·ã€‚

å¹¸è¿çš„æ˜¯ï¼Œå®ƒå¾ˆå®¹æ˜“è‡ªå®šä¹‰ã€‚

> ***Evidentlyé¢„è®¾å’ŒæŒ‡æ ‡***ã€‚Evidentlyæœ‰æŠ¥å‘Šé¢„è®¾ï¼Œå¯ä»¥å¿«é€Ÿç”ŸæˆæŠ¥å‘Šã€‚ä¸è¿‡ï¼Œè¿˜æœ‰å¾ˆå¤šä¸ªåˆ«æŒ‡æ ‡å¯ä¾›é€‰æ‹©ï¼ä½ å¯ä»¥å°†å®ƒä»¬ç»„åˆèµ·æ¥åˆ›å»ºè‡ªå®šä¹‰æŠ¥å‘Šã€‚æµè§ˆä¸€ä¸‹* [*é¢„è®¾*](https://docs.evidentlyai.com/presets/all-presets/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring) *å’ŒæŒ‡æ ‡ä»¥äº†è§£æœ‰å“ªäº›ã€‚*

# ğŸ“ˆ 4\. ç›‘æ§æè¿°ç¬¦æ¼‚ç§»

å‡è®¾æ ¹æ®æ¢ç´¢æ€§åˆ†æå’Œä½ å¯¹ä¸šåŠ¡é—®é¢˜çš„ç†è§£ï¼Œä½ å†³å®šä»…è·Ÿè¸ªå°‘é‡å±æ€§ï¼š

ä½ å¸Œæœ›æ³¨æ„åˆ°ä½•æ—¶æœ‰ç»Ÿè®¡å˜åŒ–ï¼šè¿™äº›å±æ€§çš„åˆ†å¸ƒä¸å‚è€ƒæœŸä¸åŒã€‚ä¸ºäº†æ£€æµ‹å®ƒï¼Œä½ å¯ä»¥ä½¿ç”¨Evidentlyä¸­å®ç°çš„æ¼‚ç§»æ£€æµ‹æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¯¹äºâ€œæƒ…æ„Ÿâ€è¿™æ ·çš„æ•°å€¼ç‰¹å¾ï¼Œå®ƒå°†é»˜è®¤ä½¿ç”¨Wassersteinè·ç¦»ç›‘æ§æ¼‚ç§»ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æ–¹æ³•ã€‚

è¿™æ˜¯ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„æ¼‚ç§»æŠ¥å‘Šä»¥è·Ÿè¸ªä¸‰ä¸ªæè¿°ç¬¦å˜åŒ–çš„æ–¹æ³•ã€‚

```py
descriptors_report = Report(metrics=[ 
  ColumnDriftMetric(WordCount().for_column("Review_Text")), 
  ColumnDriftMetric(Sentiment().for_column("Review_Text")), 
  ColumnDriftMetric(TriggerWordsPresence(words_list=['dress', 'gown']).for_column("Review_Text")), 
]) 
descriptors_report.run(reference_data=reviews_ref, current_data=reviews_cur, column_mapping=column_mapping) 
descriptors_report
```

ä¸€æ—¦ä½ è¿è¡ŒæŠ¥å‘Šï¼Œä½ å°†å¾—åˆ°æ‰€æœ‰é€‰å®šæè¿°ç¬¦çš„ç»¼åˆå¯è§†åŒ–ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

![](../Images/167750d2843c66fe380500152b7584da.png)

ä½œè€…æä¾›çš„å›¾ç‰‡ã€‚

æ·±ç»¿è‰²çº¿æ¡æ˜¯å‚è€ƒæ•°æ®é›†ä¸­æƒ…æ„Ÿçš„å¹³å‡å€¼ã€‚ç»¿è‰²åŒºåŸŸè¦†ç›–äº†å¹³å‡å€¼çš„ä¸€ä¸ªæ ‡å‡†å·®ã€‚ä½ å¯ä»¥æ³¨æ„åˆ°å½“å‰çš„åˆ†å¸ƒï¼ˆçº¢è‰²ï¼‰æ˜æ˜¾æ›´ä¸ºè´Ÿé¢ã€‚

> ***æ³¨æ„ï¼š*** *åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç›‘æ§è¾“å‡ºæ¼‚ç§»ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„ï¼šé€šè¿‡è·Ÿè¸ªé¢„æµ‹ç±»åˆ«çš„å˜åŒ–ã€‚ä½ å¯ä»¥ä½¿ç”¨åˆ†ç±»çš„* [*æ•°æ®æ¼‚ç§»æ£€æµ‹æ–¹æ³•*](https://docs.evidentlyai.com/reference/data-drift-algorithm/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*ï¼Œå¦‚JSæ•£åº¦ã€‚æˆ‘ä»¬åœ¨æ•™ç¨‹ä¸­æ²¡æœ‰æ¶µç›–è¿™ä¸€ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬ä»…å…³æ³¨è¾“å…¥è€Œä¸ç”Ÿæˆé¢„æµ‹ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé¢„æµ‹æ¼‚ç§»é€šå¸¸æ˜¯ååº”çš„ç¬¬ä¸€ä¸ªä¿¡å·ã€‚*

# ğŸ˜ 5\. æ·»åŠ ä¸€ä¸ªâ€œæƒ…æ„Ÿâ€æè¿°ç¬¦

å‡è®¾ä½ å†³å®šè·Ÿè¸ªä¸€ä¸ªæ›´æœ‰æ„ä¹‰çš„å±æ€§ï¼šè¯„è®ºä¸­è¡¨è¾¾çš„æƒ…æ„Ÿã€‚æ•´ä½“æƒ…æ„Ÿæ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œä½†å®ƒä¹Ÿæœ‰åŠ©äºåŒºåˆ†â€œä¼¤å¿ƒâ€å’Œâ€œæ„¤æ€’â€çš„è¯„è®ºï¼Œä¾‹å¦‚ã€‚

è®©æˆ‘ä»¬æ·»åŠ è¿™ä¸ªè‡ªå®šä¹‰æè¿°ç¬¦å§ï¼ä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å¤–éƒ¨å¼€æºæ¨¡å‹æ¥è¯„åˆ†ä½ çš„æ•°æ®é›†ã€‚ç„¶åï¼Œä½ å°†æŠŠè¿™ä¸ªå±æ€§ä½œä¸ºé¢å¤–çš„åˆ—è¿›è¡Œå¤„ç†ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ªHuggingfaceçš„[Distilbertæ¨¡å‹](https://huggingface.co/bhadresh-savani/distilbert-base-uncased-emotion)ï¼Œå®ƒé€šè¿‡äº”ç§æƒ…æ„Ÿå¯¹æ–‡æœ¬è¿›è¡Œåˆ†ç±»ã€‚

ä½ å¯ä»¥è€ƒè™‘ä¸ºä½ çš„ç”¨ä¾‹ä½¿ç”¨ä»»ä½•å…¶ä»–æ¨¡å‹ï¼Œå¦‚å‘½åå®ä½“è¯†åˆ«ã€è¯­è¨€æ£€æµ‹ã€æ¯’æ€§æ£€æµ‹ç­‰ã€‚

ä½ å¿…é¡»å®‰è£…transformersæ‰èƒ½è¿è¡Œæ¨¡å‹ã€‚æœ‰å…³æ›´å¤šç»†èŠ‚ï¼Œè¯·æŸ¥çœ‹[å®‰è£…è¯´æ˜](https://huggingface.co/docs/transformers/installation)ã€‚ç„¶åï¼Œå°†å…¶åº”ç”¨äºè¯„è®ºæ•°æ®é›†ï¼š

```py
from transformers import pipeline 
classifier = pipeline("text-classification", model='bhadresh-savani/distilbert-base-uncased-emotion', top_k=1) 
prediction = classifier("I love using evidently! It's easy to use", ) 
print(prediction)
```

> ***æ³¨æ„ï¼š*** *è¿™ä¸€æ­¥å°†ä½¿ç”¨å¤–éƒ¨æ¨¡å‹å¯¹æ•°æ®é›†è¿›è¡Œè¯„åˆ†ã€‚æ ¹æ®ä½ çš„ç¯å¢ƒï¼Œè¿™å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ‰èƒ½æ‰§è¡Œå®Œæ¯•ã€‚è¦åœ¨ä¸ç­‰å¾…çš„æƒ…å†µä¸‹äº†è§£åŸç†ï¼Œè¯·å‚è€ƒç¤ºä¾‹ç¬”è®°æœ¬ä¸­çš„â€œç®€å•ç¤ºä¾‹â€éƒ¨åˆ†ã€‚*

åœ¨å°†æ–°åˆ—â€œemotionâ€æ·»åŠ åˆ°æ•°æ®é›†åï¼Œä½ å¿…é¡»åœ¨åˆ—æ˜ å°„ä¸­åæ˜ è¿™ä¸€ç‚¹ã€‚ä½ åº”è¯¥æŒ‡å®šè¿™æ˜¯æ•°æ®é›†ä¸­çš„ä¸€ä¸ªæ–°åˆ†ç±»å˜é‡ã€‚

```py
column_mapping = ColumnMapping( 
  numerical_features=['Age', 'Positive_Feedback_Count'], 
  categorical_features=['Division_Name', 'Department_Name', 'Class_Name', 'emotion'], 
  text_features=['Review_Text', 'Title'] )
```

ç°åœ¨ï¼Œä½ å¯ä»¥å°†â€œemotionâ€åˆ†å¸ƒæ¼‚ç§»ç›‘æ§æ·»åŠ åˆ°æŠ¥å‘Šä¸­ã€‚

```py
descriptors_report = Report(metrics=[ 
  ColumnDriftMetric(WordCount().for_column("Review_Text")), 
  ColumnDriftMetric(Sentiment().for_column("Review_Text")), 
  ColumnDriftMetric(TriggerWordsPresence(words_list=['dress', 'gown']).for_column("Review_Text")), 
  ColumnDriftMetric('emotion'), ]) 
descriptors_report.run(reference_data=reviews_ref, current_data=reviews_cur, column_mapping=column_mapping) 
descriptors_report
```

è¿™æ˜¯ä½ å¾—åˆ°çš„ç»“æœï¼

![](../Images/8ca2d594a2f48d88dec8b624c5ca703b.png)

å›¾ç‰‡æ¥æºï¼šä½œè€…ã€‚

ä½ å¯ä»¥çœ‹åˆ°â€œsadâ€è¯„ä»·æ˜¾è‘—å¢åŠ ï¼Œè€Œâ€œjoyâ€è¯„ä»·å‡å°‘ã€‚

è¿½è¸ªéšæ—¶é—´å˜åŒ–æ˜¯å¦æœ‰å¸®åŠ©ï¼Ÿä½ å¯ä»¥ç»§ç»­é€šè¿‡å¯¹æ–°æ•°æ®è¿›è¡Œè¯„åˆ†æ¥è¿è¡Œæ­¤æ£€æŸ¥ã€‚

# ğŸ—ï¸ 6\. è¿è¡Œç®¡é“æµ‹è¯•

ä¸ºäº†å®šæœŸåˆ†ææ•°æ®è¾“å…¥ï¼Œå°†è¯„ä¼°æ‰“åŒ…æˆæµ‹è¯•æ˜¯æœ‰æ„ä¹‰çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªæ˜ç¡®çš„â€œé€šè¿‡â€æˆ–â€œå¤±è´¥â€ç»“æœã€‚å¦‚æœæ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡ï¼Œä½ å¯èƒ½ä¸éœ€è¦æŸ¥çœ‹å›¾è¡¨ã€‚ä½ åªå¯¹å˜åŒ–æ„Ÿå…´è¶£ï¼

Evidently æœ‰ä¸€ä¸ªæ›¿ä»£æ¥å£ï¼Œç§°ä¸ºæµ‹è¯•å¥—ä»¶ï¼Œå®ƒä»¥è¿™ç§æ–¹å¼å·¥ä½œã€‚

è¿™é‡Œæ˜¯å¦‚ä½•åˆ›å»ºä¸€ä¸ªæµ‹è¯•å¥—ä»¶ä»¥æ£€æŸ¥ç›¸åŒå››ä¸ªæè¿°ç¬¦ä¸­çš„ç»Ÿè®¡åˆ†å¸ƒï¼š

```py
descriptors_test_suite = TestSuite(tests=[ 
  TestColumnDrift(column_name = 'emotion'), 
  TestColumnDrift(column_name = WordCount().for_column("Review_Text")), 
  TestColumnDrift(column_name = Sentiment().for_column("Review_Text")), 
  TestColumnDrift(column_name = TriggerWordsPresence(words_list=['dress', 'gown']).for_column("Review_Text")), 
]) 
descriptors_test_suite.run(reference_data=reviews_ref, current_data=reviews_cur, column_mapping=column_mapping) 
descriptors_test_suite
```

> ***æ³¨æ„ï¼š*** *æˆ‘ä»¬ä½¿ç”¨é»˜è®¤è®¾ç½®ï¼Œä½†ä½ ä¹Ÿå¯ä»¥è®¾ç½®* [*è‡ªå®šä¹‰æ¼‚ç§»æ–¹æ³•å’Œæ¡ä»¶*](https://docs.evidentlyai.com/user-guide/customization/options-for-statistical-tests/?utm_source=website&utm_medium=referral&utm_campaign=blog_text&utm_content=unstructured-data-monitoring)*ã€‚*

è¿™æ˜¯ç»“æœã€‚è¾“å‡ºç»“æ„æ¸…æ™°ï¼Œä½ å¯ä»¥çœ‹åˆ°å“ªäº›æè¿°ç¬¦å‘ç”Ÿäº†æ¼‚ç§»ã€‚

![](../Images/77d27b490b8c0aa4b642b8509c854d7e.png)

å›¾ç‰‡æ¥æºï¼šä½œè€…ã€‚

æ£€æµ‹ç»Ÿè®¡åˆ†å¸ƒæ¼‚ç§»æ˜¯ç›‘æ§æ–‡æœ¬å±æ€§å˜åŒ–çš„æ–¹æ³•ä¹‹ä¸€ã€‚è¿˜æœ‰å…¶ä»–æ–¹æ³•ï¼æœ‰æ—¶ï¼Œæ ¹æ®æè¿°ç¬¦çš„æœ€å°å€¼ã€æœ€å¤§å€¼æˆ–å‡å€¼è¿è¡ŒåŸºäºè§„åˆ™çš„æœŸæœ›ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚

å‡è®¾ä½ æƒ³æ£€æŸ¥æ‰€æœ‰è¯„ä»·æ–‡æœ¬æ˜¯å¦é•¿äºä¸¤ä¸ªè¯ã€‚å¦‚æœè‡³å°‘æœ‰ä¸€æ¡è¯„ä»·çŸ­äºä¸¤ä¸ªè¯ï¼Œä½ å¸Œæœ›æµ‹è¯•å¤±è´¥å¹¶åœ¨å“åº”ä¸­æŸ¥çœ‹çŸ­æ–‡æœ¬çš„æ•°é‡ã€‚

ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ª**TestNumberOfOutRangeValues()** æ£€æŸ¥ã€‚æ­¤æ¬¡ï¼Œä½ åº”è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰è¾¹ç•Œï¼šæœŸæœ›èŒƒå›´çš„â€œå·¦â€ä¾§æ˜¯ä¸¤ä¸ªè¯ã€‚ä½ è¿˜å¿…é¡»è®¾ç½®ä¸€ä¸ªæµ‹è¯•æ¡ä»¶ï¼š**eq=0**ã€‚è¿™æ„å‘³ç€ä½ æœŸæœ›è¿™ä¸ªèŒƒå›´å¤–çš„å¯¹è±¡æ•°é‡ä¸º0ã€‚å¦‚æœé«˜äºæ­¤å€¼ï¼Œä½ å¸Œæœ›æµ‹è¯•è¿”å›å¤±è´¥ã€‚

```py
descriptors_test_suite = TestSuite(tests=[ 
  TestNumberOfOutRangeValues(column_name = WordCount().for_column("Review_Text"), left=2, eq=0), 
]) 
descriptors_test_suite.run(reference_data=reviews_ref, current_data=reviews_cur, column_mapping=column_mapping) 
descriptors_test_suite
```

è¿™æ˜¯ç»“æœã€‚ä½ è¿˜å¯ä»¥çœ‹åˆ°æ˜¾ç¤ºå®šä¹‰æœŸæœ›çš„æµ‹è¯•ç»†èŠ‚ã€‚

![](../Images/c7522aa55016dfa55e61e8499366d7d2.png)

å›¾ç‰‡æ¥æºï¼šä½œè€…ã€‚

ä½ å¯ä»¥éµå¾ªè¿™ä¸€åŸåˆ™è®¾è®¡å…¶ä»–æ£€æŸ¥ã€‚

# æ”¯æŒ Evidently

> *å–œæ¬¢è¿™ä¸ªæ•™ç¨‹å—ï¼Ÿç»™* [*Evidently åœ¨ GitHub ä¸Šç‚¹ä¸ªæ˜Ÿ*](https://github.com/evidentlyai/evidently) *ä»¥å›é¦ˆæ”¯æŒï¼è¿™æœ‰åŠ©äºæˆ‘ä»¬ç»§ç»­ä¸ºç¤¾åŒºåˆ›å»ºå…è´¹çš„å¼€æºå·¥å…·å’Œå†…å®¹ã€‚* [*â­ï¸ åœ¨ GitHub ä¸Šç‚¹æ˜Ÿ âŸ¶*](https://github.com/evidentlyai/evidently)

# æ€»ç»“

æ–‡æœ¬æè¿°ç¬¦å°†æ–‡æœ¬æ•°æ®æ˜ å°„åˆ°å¯è§£é‡Šçš„ç»´åº¦ï¼Œä½ å¯ä»¥å°†å…¶è¡¨ç¤ºä¸ºæ•°å€¼æˆ–åˆ†ç±»å±æ€§ã€‚å®ƒä»¬å¸®åŠ©æè¿°ã€è¯„ä¼°å’Œç›‘æ§éç»“æ„åŒ–æ•°æ®ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨æè¿°ç¬¦æ¥ç›‘æ§æ–‡æœ¬æ•°æ®ã€‚

ä½ å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥ç›‘æ§ NLP å’Œ LLM é©±åŠ¨æ¨¡å‹çš„ç”Ÿäº§è¡Œä¸ºã€‚ä½ å¯ä»¥å°†ä½ çš„æè¿°ç¬¦ä¸å…¶ä»–æ–¹æ³•ç»“åˆä½¿ç”¨ï¼Œå¦‚ [ç›‘æ§åµŒå…¥æ¼‚ç§»](https://www.evidentlyai.com/blog/embedding-drift-detection)ã€‚

ä½ è®¤ä¸ºè¿˜æœ‰å…¶ä»–æ™®éæœ‰ç”¨çš„æè¿°ç¬¦å—ï¼Ÿå‘Šè¯‰æˆ‘ä»¬ï¼åŠ å…¥æˆ‘ä»¬çš„ [Discord ç¤¾åŒº](https://discord.com/invite/xZjKRaNp8b) åˆ†äº«ä½ çš„æƒ³æ³•ã€‚

*æœ€åˆå‘å¸ƒäº* [*https://www.evidentlyai.com*](https://www.evidentlyai.com/blog/unstructured-data-monitoring) *äº2023å¹´6æœˆ27æ—¥ã€‚æ„Ÿè°¢* [*Olga Filippova*](https://www.evidentlyai.com/author/olga-fillipova) *å…±åŒæ’°å†™æœ¬æ–‡ã€‚*
