- en: In-Depth Guide to Creating and Publishing an R Data Package Using Devtools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/in-depth-guide-to-creating-and-publishing-an-r-data-package-using-devtools-245b0fd4c359?source=collection_archive---------8-----------------------#2023-10-19](https://towardsdatascience.com/in-depth-guide-to-creating-and-publishing-an-r-data-package-using-devtools-245b0fd4c359?source=collection_archive---------8-----------------------#2023-10-19)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A step-by-step account of developing my “Richmondway” R Data package, featuring
    the Expletives Count by Roy Kent
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@menghani.deepsha?source=post_page-----245b0fd4c359--------------------------------)[![Deepsha
    Menghani](../Images/56a6ed8597c36e8c76d8a29a449325a4.png)](https://medium.com/@menghani.deepsha?source=post_page-----245b0fd4c359--------------------------------)[](https://towardsdatascience.com/?source=post_page-----245b0fd4c359--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----245b0fd4c359--------------------------------)
    [Deepsha Menghani](https://medium.com/@menghani.deepsha?source=post_page-----245b0fd4c359--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb0c00845bcfa&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fin-depth-guide-to-creating-and-publishing-an-r-data-package-using-devtools-245b0fd4c359&user=Deepsha+Menghani&userId=b0c00845bcfa&source=post_page-b0c00845bcfa----245b0fd4c359---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----245b0fd4c359--------------------------------)
    ·9 min read·Oct 19, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F245b0fd4c359&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fin-depth-guide-to-creating-and-publishing-an-r-data-package-using-devtools-245b0fd4c359&user=Deepsha+Menghani&userId=b0c00845bcfa&source=-----245b0fd4c359---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F245b0fd4c359&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fin-depth-guide-to-creating-and-publishing-an-r-data-package-using-devtools-245b0fd4c359&source=-----245b0fd4c359---------------------bookmark_footer-----------)![](../Images/95dac23a0f2031aee4d139234160bdb3.png)'
  prefs: []
  type: TYPE_NORMAL
- en: Photo by [Erda Estremera](https://unsplash.com/@erdaest?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash)
    on [Unsplash](https://unsplash.com/photos/sxNt9g77PE0?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash)
  prefs: []
  type: TYPE_NORMAL
- en: When I was invited to speak at the 2023 Posit conference to present on [storytelling
    with animation and interactivity](https://deepshamenghani.github.io/posit_plotly_crosstalk/#/title-slide),
    I spent months deliberating on the perfect dataset. It seemed every intriguing
    dataset had been exhausted, and I wasn’t inspired to base my presentation on a
    mundane one. Then one day, marathoning through episodes of Ted Lasso, an American
    sports comedy-drama television series, and chuckling at the eloquently placed
    expletives from Roy Kent sparked an idea. I rewatched the series (at 2x speed,
    mind you) and tallied each time Roy used or gestured the word “F**k”. That became
    my dataset! In this article, I will walk you through the detailed steps I took
    to turn this dataset into an R Data package, allowing you to easily create one
    yourself.
  prefs: []
  type: TYPE_NORMAL
- en: Welcome to the making of `[Richmondway](https://github.com/deepshamenghani/richmondway)`,
    my very first R Data package that allows you to download the data to delve into
    the intricate details of Roy Kent’s lexicon, episode by episode, season by season.
    Finally, answering the question once and for all that nobody asked — Which season
    did Roy Kent say F**k the most?
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/6c98ac49eb033536c4c55052573f82c7.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Source: [Posit Conference 2023 presentation](https://deepshamenghani.github.io/posit_plotly_crosstalk/#/title-slide)
    by Deepsha Menghani'
  prefs: []
  type: TYPE_NORMAL
- en: Why did I Create a Package?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: I’ve been eager to learn how to create an R package. Starting with a simple
    data package seemed an excellent first endeavor.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Embedding data for function testing is essential. It familiarizes users with
    package functionalities — a step I’d need for any complex packages in the future.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: This dataset was too entertaining to keep to myself. Packaging it ensured easy
    access for everyone post-conference.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: So, whether you’re curious about R Data package creation or you’re a “Ted Lasso”
    aficionado, brew some tea and let’s dive in!
  prefs: []
  type: TYPE_NORMAL
- en: Detailed steps I used to create the R Data Package
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Step 0: The Dataset and Package Name'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Here’s what a snapshot of my dataset, named “richmondway”, looks like. It has
    34 rows corresponding to every episode and 16 columns with various values that
    are described in the package we will be creating.
  prefs: []
  type: TYPE_NORMAL
- en: Naming your package is like naming a pet — it is extremely special. While you’ll
    want to choose a memorable name, also ensure it’s simple, especially if you intend
    to make it publicly available. I named mine `Richmondway` — a nod to AFC Richmond,
    the football club Roy Kent used to play for in Ted Lasso. And, because it starts
    with “R”, which is a lucky coincidence. I also wanted the name to be a clear enough
    indicator of what is inside the package.
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 1: Install the Toolkit'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Install these R packages: `devtools`, `usethis`, and `roxygen2`. These make
    it extremely easy to structure and document your new package.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 2: Create a New Package as a Project'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There are two ways you can create a package using `devtools`. Devtools takes
    care of a lot of initial package structure set up needed.
  prefs: []
  type: TYPE_NORMAL
- en: 'Method 1: Directly from the RStudio console'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![](../Images/d086a4a2c90b9c43d7ed8515762bb6c2.png)'
  prefs: []
  type: TYPE_IMG
- en: Screen cast of project creation for R package using devtools
  prefs: []
  type: TYPE_NORMAL
- en: 'Method 2: With `usethis` package'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: With `usethis::create_package()` command, you can directly create a new package
    by providing the path where you want to create the package directory. For the
    rest of this article I will continue to showcase other `usethis` commands that
    make it simpler and faster to go through a lot of package creation and documentation
    steps.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: You’ve just created a folder with the bare necessities for an R package. If
    you peek inside, you’ll find some mysterious files. No worries, we’ll get to know
    them one by one. Here are the files you will see get created as part of your project.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/da5bc030f8c26ffce73194e71be98726.png)'
  prefs: []
  type: TYPE_IMG
- en: Initial home directory of project
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 3: Add the Dataset'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: I had saved the dataset in my local environment as “richmondway”. Running the
    command below adds a `‘/data’` directory to the root of your package and places
    a `“.rda”` file in it.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/6e52a46c9f91c506597137acb3f1cc65.png)'
  prefs: []
  type: TYPE_IMG
- en: A single file named “richmondway.rda” within the “data” folder
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 4: Create the Data Dictionary `data.R`:'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This is where you describe your dataset. Trust me, the better the description,
    the easier it is for others to unlock its potential. This will feed into your
    documentation in the later steps as well. You can create this file using the command
    below and then later update it with all the required details.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: This command will create a `data.R` file inside the `R` folder. Update the contents
    of this file to contain the format and columns available in your dataset. While
    there are many more columns in my dataset, for this example I am just showing
    three columns below. You should add the description of all columns as clearly
    as possible as it will appear in your dataset package documentation. The below
    format is used inside the `data.R` file to create the descriptions.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Let’s break this file down into its components:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Description Comments:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: This is a short title and description of the dataset. Comments starting with
    `#'` are used to annotate R objects in a special way that they will be picked
    up by the `roxygen2` package, which is used in R to produce documentation.
  prefs: []
  type: TYPE_NORMAL
- en: 'Format Comment:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: This specifies the format of the data. In this case, the dataset is a data frame
    with 34 rows and 16 columns.
  prefs: []
  type: TYPE_NORMAL
- en: 'Description of Variables:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: This part provides a detailed description of some of the main variables/columns
    in the data frame. The `\describe` block is used to list out and describe each
    variable that is represented by an `\item` tag, with the name of the variable
    and its description.
  prefs: []
  type: TYPE_NORMAL
- en: 'Source Comment:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: This provides information about the origin or source of the data. It’s important
    to credit the creator and provide context on how the data was gathered.
  prefs: []
  type: TYPE_NORMAL
- en: 'Examples Comment:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: This provides an example of how users can access and use the dataset. In this
    case, it simply demonstrates how to load the data into R once they will install
    your package.
  prefs: []
  type: TYPE_NORMAL
- en: 'Data Name:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: This is the name of the dataset. It’s in quotes because it indicates that this
    documentation is associated with the dataset of that name in the package.
  prefs: []
  type: TYPE_NORMAL
- en: When users install and load your package in R and then type `?richmondway`,
    they'll see this documentation presented in a structured format, helping them
    understand what the dataset is about, its structure, and how to use it.
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 5: Update the "`DESCRIPTION"` File'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The description file is a more higher-level documentation of the package. Have
    a look at the `DESCRIPTION` file in your package home folder, it should come pre-populated
    with instructions and needs to be updated to the correct descriptions. The fields
    I updated in my description file are below, the rest I left it to default.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 6: Create the “LICENSE” file'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This file is like your package’s CV. Note that in my DESCRIPTION file, I refer
    to the file called `LICENSE`. This file doesn’t yet exist, so we will now create
    it. This will refer to a file where your license information is stored. The license
    information tells the user of the package how to use the data made available through
    this package, aka, the rights. For my case, I used the CC0 license and added the
    standard description to my `LICENSE` file using the commands below.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/de998c41a835e3184a1e8762f11a0da9.png)'
  prefs: []
  type: TYPE_IMG
- en: Newly created LICENSE file is highlighted in the project home directory
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 7: Load the Documentation'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now that all the files have been created and updated, we load the documentation
    using this handy command below. This command will create documentation using the
    `data.R` file where we added the description of the data. This documentation is
    placed inside a newly created folder called `man` that stands for “manual”.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/f70fc27979fbab8fbfc0c724c1e3c7e7.png)'
  prefs: []
  type: TYPE_IMG
- en: Newly created “man” folder is highlighted in the project home directory
  prefs: []
  type: TYPE_NORMAL
- en: Once the documentation command is run, you can use the help command `?richmondway`,
    and it should open up the package documentation. Make sure the documentation is
    clear and the necessary details from the `data.R` file are showing up as expected.
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 8: Check'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can now test that everything is running smoothly and created perfectly by
    running the command below. This command performs a wide array of checks to ensure
    the consistency and validity of your package.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'The output of `devtools::check()` gives you NOTES, WARNINGS, and ERRORS, each
    requiring varying degrees of attention:'
  prefs: []
  type: TYPE_NORMAL
- en: 'ERRORS: Must be fixed immediately as they indicate major issues.'
  prefs: []
  type: TYPE_NORMAL
- en: 'WARNINGS: Should be addressed to ensure functionality and CRAN compliance.'
  prefs: []
  type: TYPE_NORMAL
- en: 'NOTES: Provide helpful advice and suggestions, and sometimes need to be addressed
    for CRAN submissions.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5c90468ad2f2abafdcf3d35d8cb5aef3.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Step 9: Install the package locally and test it'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The below command from `devtools` can be used to install the package locally.
    Then, use the same method you shared in the example within `data.R` file to test
    the data access.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Step 10\. Publish your brand new package to GitHub
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now we need to initialize our Git repository and push the package to GitHub
    using some more handy `usethis` commands. Before running these commands, make
    sure you have a GitHub account and that you have set up SSH keys or personal access
    tokens (PAT) for use with GitHub.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: What does usethis::use_git() do
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**Initializes Git:** This function initializes a new Git repository in your
    project.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**First Commit**: It makes an initial commit with the current state of the
    project.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What does usethis::use_github() do
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**GitHub Repository Creation:** This function helps in creating a new GitHub
    repository and connects your local Git repository to the remote GitHub repository.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Authentication**: Helps in setting up authentication with GitHub. It checks
    if you are authenticated with GitHub. If not, it might prompt you to do so.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Push:** Pushes your local git commits to the remote GitHub repository.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Step 11: And finally share your Package with the world'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can now share your package repository link. Anyone can install your package
    directly from GitHub using `devtools::install_github(“your_username/packagename”)`
    and access the data.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, the data from `richmondway` within my GitHub repository package
    can be accessed with the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: You made it!
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If you’ve reached this point, congratulations! You’ve just turned a fun binge-watching
    session into something both educational and delightful.
  prefs: []
  type: TYPE_NORMAL
- en: Feel free to play with this fun dataset and tag me in your analysis and visualizations.
    Or you can fork `[richmondway](https://github.com/deepshamenghani/richmondway)`
    on GitHub and contribute to the Roy Kent lexicon. Keep on packaging on!
  prefs: []
  type: TYPE_NORMAL
- en: Resources
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Richmondway package](https://github.com/deepshamenghani/richmondway) repository'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[R Packages](https://r-pkgs.org/) by Hadley Wickham and Jennifer Bryan'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[Roxygen2](https://roxygen2.r-lib.org/articles/roxygen2.html) Documentation'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[Usethis](https://usethis.r-lib.org/) Package'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[Devtools](https://devtools.r-lib.org/) Package'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Happy coding! If you’d like, find me on [Linkedin](https://www.linkedin.com/in/deepshamenghani/).
  prefs: []
  type: TYPE_NORMAL
- en: All images and screencasts, unless otherwise noted, are by the author.
  prefs: []
  type: TYPE_NORMAL
