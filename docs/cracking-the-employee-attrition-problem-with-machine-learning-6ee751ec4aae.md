# 破解员工流失问题的机器学习方法

> 原文：[https://towardsdatascience.com/cracking-the-employee-attrition-problem-with-machine-learning-6ee751ec4aae?source=collection_archive---------7-----------------------#2023-03-13](https://towardsdatascience.com/cracking-the-employee-attrition-problem-with-machine-learning-6ee751ec4aae?source=collection_archive---------7-----------------------#2023-03-13)

## 为什么这不是一个简单的问题

[](https://lromeo.medium.com/?source=post_page-----6ee751ec4aae--------------------------------)[![Lucas Nicolás Romeo](../Images/40d2bc61ba65f7a3237a38f251c3cc48.png)](https://lromeo.medium.com/?source=post_page-----6ee751ec4aae--------------------------------)[](https://towardsdatascience.com/?source=post_page-----6ee751ec4aae--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----6ee751ec4aae--------------------------------) [Lucas Nicolás Romeo](https://lromeo.medium.com/?source=post_page-----6ee751ec4aae--------------------------------)

·

[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F4fe494b2110&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcracking-the-employee-attrition-problem-with-machine-learning-6ee751ec4aae&user=Lucas+Nicol%C3%A1s+Romeo&userId=4fe494b2110&source=post_page-4fe494b2110----6ee751ec4aae---------------------post_header-----------) 发表在 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----6ee751ec4aae--------------------------------) ·10分钟阅读·2023年3月13日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F6ee751ec4aae&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcracking-the-employee-attrition-problem-with-machine-learning-6ee751ec4aae&user=Lucas+Nicol%C3%A1s+Romeo&userId=4fe494b2110&source=-----6ee751ec4aae---------------------clap_footer-----------)

--

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6ee751ec4aae&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcracking-the-employee-attrition-problem-with-machine-learning-6ee751ec4aae&source=-----6ee751ec4aae---------------------bookmark_footer-----------)![](../Images/bf77c9d4afd68ebff829ec6823b4c8ce.png)

图片来源于 [Nick Fewings](https://unsplash.com/@jannerboy62?utm_source=medium&utm_medium=referral) 于 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

员工流失，即员工离开组织的过程，近年来已成为一个令人担忧的问题。作为疫情后的副作用，全球化的远程工作已成为市场上的常态，这无疑使得高技能人才的换工作变得更为容易。再加上新秩序的其他特点，员工流失率显著上升，这给公司带来了额外的困扰：最有资格的员工离职的频率更高。显然，组织不应对这一问题掉以轻心，因为它不仅与生产力下降、招聘和培训等即时成本相关，还涉及剩余员工的动机和参与度，这反过来又会影响公司的潜在增长。

在这方面，开发一个能够预测员工流失的机器学习模型已成为公司决策过程中的关键组成部分，以**留住员工**。与其盲目分配资源（加薪、晋升、商务旅行、融入活动、培训等），机器学习可以帮助你**将留人努力引导到真正重要的地方**。流失模型可以帮助你了解**谁**是离职风险较高的员工，**哪些**条件可能解释这一风险，以及**可以做什么**来避免他们的潜在离职（前提是确实可以做些什么）。

但这些模型构建起来简单吗？你是否开发过一个？如果是这样，你是否遵循了正确的框架？尽管这听起来像是一个简单的分类任务，但一旦深入研究，你会发现这并不像看起来那么简单。实际上，许多网络上的例子反复犯着相同的错误……但别担心，我们会很快解决这些问题。现在可以说，根据可用的数据源、需要回答的问题和解决方案的范围，构建一个适用于这一特定任务的稳健机器学习模型可能是一个重大挑战。此外，请注意，最终这些模型会影响到真实的人，因此在设计决策时必须格外小心，即：将使用哪些变量、模型框架及其规范。

本文的目的是提供对当前解决方案的简要介绍，并揭示这一问题背后的挑战，同时指出常见的错误，以便未来能够轻松避免。作为一个快速提醒，请不要忘记检查是否遵循了成功构建此类项目的要求（这里有两篇文章 — [第一部分](https://medium.com/towards-data-science/14-requirements-to-make-your-machine-learning-project-a-success-part-i-80c288be503d) 和 [第二部分](https://medium.com/towards-data-science/14-requirements-to-make-your-machine-learning-project-a-success-part-ii-5a89600a7a16) — 以简单的方式解释了这些要求）。

## 问题定义

如果我们想提供一个现实世界的解决方案，而不是一个玩具模型，我们需要首先定义业务问题和最小可行产品/解决方案。根据我们的经验，关于员工流失有三个主要问题需要回答：

1.  员工是否会离开公司；

1.  何时会发生；

1.  为什么可能会发生。

正如你所猜测，这些问题并不是独立的，而是紧密相关的。因此，开发一个能够同时回答这些问题的单一工具将是我们最大的利益。让我们总结一下目前的做法（或者更具体地说，是如何进行的）。

## 当前解决问题的尝试

## i) 一个简单的分类问题？

预测员工流失的问题已经被许多研究和机器学习文章所探讨。然而，其中许多只是实现了相同的模型，没有对为何采用某种方法进行任何批判性分析。在这方面，正如之前所暗示的，互联网上的大多数非学术示例建议将问题作为分类任务来处理，其中：

+   目标变量为1如果员工离开公司，0则表示未离开；

+   员工的特点主要是分类变量（角色、部门、年龄组、绩效等级等），以及一些低方差的连续变量，如工资，用于预测退出事件（IBM建立了一个总结这些变量的合成数据集）；

+   **审查** **问题** 被完全忽略了。但是，什么是审查呢？简单来说，**审查** 是指我们对研究对象或测量值有不完整信息的情况（如果一个事件尚未被测量，并不意味着它不会发生，只是我们还没有见到它）。例如，在员工流失问题中，我们对员工的信息不完全，因为为了获得完整信息，我们需要他们离开公司（这将使我们知道他/她的确切离职时间，从而获得完整的测量）。忽略这个关键概念意味着这些解决方案从一开始就是有缺陷的，即使它们对模型输入进行了某些额外的变换（我们稍后会讨论这些），也永远无法对事件的时间做出正确的回答。

+   每次观察在员工之间和同一员工的时间序列中都是独立的。请注意，除非你使用一个将员工所有信息简化为单一观察的模型，或者确保模型能够处理员工的独立特征序列，即员工A的序列不会与员工B的序列混合，否则这在概念上是错误的。然而，我们知道，尽管概念上错误，但忽略这个错误的影响很难衡量。

+   类别是人为平衡的，因为员工离开公司的事件数相对较少，而留在公司的员工事件数较多；

+   结果是通过混淆矩阵中的指标来测量的，特别关注f1-score、精确度和召回率（如我们所知，对于类别自然不平衡的问题，准确度是一个不好的指标）。

请注意，这种方法有很多缺陷，但有一个特别值得关注：**它没有考虑时间，因此我们无法预测员工在感兴趣时间段内的离职**。这是因为解决方案没有尝试解决实际问题，即时间到事件的问题。简单来说，我们忽略了**所有员工都会在某个时间离开公司，问题是何时离开**。

那么，我们如何解决这个问题呢？答案是查阅关于时间到事件问题的文献，或者更具体地说是生存分析。

## ii) 生存分析

对于时间到事件问题，最准确的解决方案之一可以在生存分析领域找到，这一领域主要因其在医学研究中的应用而闻名（例如，预测一个患有绝症的患者的剩余时间）。

生存模型与分类模型在根本上不同：理论背后的理念是创建一个模型来预测期望的生存时间（通过“死亡”预期时间的补充），这意味着我们讨论的是回归模型而不是分类模型；我们预测的是事件的预期时间而不是标签。关于用于预测预期生存时间的机器学习模型，我们有两种主要模型，具有不同的特性：

**比例风险模型：**它们简单且透明，便于推断，但由于其大的方差，预测能力不足，就像线性回归模型一样。

**加速失效时间模型：**它们通过利用集成和提升算法来达到更高的预测能力。然而，这种优势伴随着特征转换过程缺乏透明度，因此模型决策函数也缺乏透明度（这意味着推断被抛在了后面）。

你可能在想，难道没有一种既具有高准确性又能解释标签决策原因的模型吗？不幸的是，在本文发布时，目前没有开放源代码的生存模型实现能够同时提供预测能力和完全透明度。然而，我们可以提出两种替代解决方案，并附上一个巨大的免责声明，我们将在最后讨论：**你仍然需要做一些调整来考虑时间因素**。

## iii) 黑箱模型 + SHAP/LIME 或其他解释模型

一种潜在的解决方案是实施黑箱模型，如传统的集成模型（Catboost或XGBoost与AFT损失函数），然后使用一些附加工具，如SHAP或LIME，以解释结果。但请记住，这种方法并不稳健，因为解释模型是基于主要模型结果构建的新模型，因此它们并不完全代表集成模型中拟合的真实决策函数。

## iv) 广义加性模型

第二个选项是实施GAM模型（广义加性模型）。这些模型在预测能力和透明度方面具有潜在的好处。它们是非参数模型，通过加性方式创建复杂模型，总结所使用变量的个体贡献，这意味着可以恢复最终模型的决策函数。然而，要使用GAM模型，我们必须放弃生存分析技术，转而使用常规分类器。不过……删失和时间依赖性问题再次出现。

## 我们的替代方案

因此，虽然有强大且透明的模型可用，但我们需要考虑应对审查问题的方法。这时数据转换就发挥了作用。让我们看看我们可以做什么。由于我们知道很难形成即将要说的内容的心理图像，下方展示了问题和解决方案的动态图。

![](../Images/b0ce32f09d4139791bd83af36c3b30c9.png)

作者提供的图片

为了预测员工在接下来的，例如，12 个月内的离职概率（流失），我们需要重组数据并做出一些重要假设。我们的目标是创建一个数据集，使模型能够学习留在公司与离开的员工之间的主要差异。为此，我们需要使用包含历史数据的数据集，并考虑这些数据集的主要特征，如年龄、资历、薪资变化等，在事件发生前的 12 个月内的各种变量。

为了将时间的概念引入这个问题，我们将每个员工的数据从最后一个可用的月度观察排序到最早的一个，并基于这个顺序创建一个时间索引。然后，我们可以将这个索引用作预测标签，指示例如在离职公司前 10 个月，员工显示出一些与留在公司员工特征相反的特征。然而，我们仍然面临活跃员工的问题——我们不确定他们是否会在接下来的几个月内离职。这就是之前谈到的审查问题，它影响了活跃员工的观察。

为了处理这个问题，我们排除了现有员工的最后 12 个月的记录，这样如果我们查看他们的特征，例如在最后可用记录之前的 13 个月，我们可以确保这些特征代表的是至少还会在公司待 12 个月以上的人。对于离职员工来说，他们的特征没有问题，因为事件的发生是我们已经知道的事实。

然而，建议还要排除活跃员工和在此期间离职员工的最近 12 个月的信息，以避免由于时间分布的变化而对两类员工之一的误表示。一旦我们进行这些更改，我们可以将问题从多类别分类问题简化为二分类问题。为此，我们基于时间索引创建一个虚拟变量，为活跃员工的最后 12 个观察值分配 0，为离职员工的最后 12 个观察值分配 1。

最终，我们将整个数据集缩减为这一子集，同时排除超过12个月时间窗口之外的记录。如果我们不这样做，可能会出现另一个问题，即数据集极度不平衡，这使得训练任何模型都非常困难。然后，我们可以使用我们的GAMs模型来预测员工流失概率。

需要注意的是，我们在这个过程中做了一个强假设——即观察值按月独立，即使这些是同一员工的记录。然而，如果我们想使用一个简单且透明的分类模型，这是我们必须容忍的。虽然有替代方法来解决这个问题，但大多数包括实施一些复杂的模型（例如，神经网络），这可能会影响解决方案的透明度。

最终，我们不能忘记我们正在构建一个可能改变现实员工未来的模型。**透明度至关重要**。如果我们使用模型来决定应采取什么行动计划以减少员工离职的可能性，从而改变不希望的结果，我们必须确保我们能够理解模型决策背后的推理，并向组织其他成员清楚地解释。

## 结论

总的来说，我们可以说，根据具体情况，员工流失可能是公司面临的一个持续且具有挑战性的问题。在这种情况下，能够预测员工何时以及为何离开对于留住有价值的人才和减轻偏离公司战略愿景的风险至关重要。正如我们所见，虽然不容易，但仍然有可能将现实问题转化为一个强大且透明的解决方案，这有助于公司做出明智的留人策略决策，并相应地投资于员工发展。

感谢您查看我的内容！如果您喜欢，请不要忘记关注我并点赞，以获取更多内容。

## 参考文献

Cox, DR. (1972). 回归模型与生命表。*皇家统计学会B系列-方法论期刊*, *34*(2), 187–202\. [https://doi.org/10.1111/j.2517-6161.1972.tb00899.x](https://doi.org/10.1111/j.2517-6161.1972.tb00899.x)

Hastie, T., & Tibshirani, R. (1984). 广义加性模型。*统计科学*, *1*(3). [https://doi.org/10.1214/ss/1177013604](https://doi.org/10.1214/ss/1177013604)

Kumar, I.E., Venkatasubramanian, S., Scheidegger, C.E., & Friedler, S.A. (2020). Shapley值解释作为特征重要性度量的问题。*国际机器学习会议*。

Wei, L. (1992). 加速失效时间模型：生存分析中对Cox回归模型的有用替代。*医学统计*, *11*(14–15), 1871–1879\. [https://doi.org/10.1002/sim.4780111409](https://doi.org/10.1002/sim.4780111409)
