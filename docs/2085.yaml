- en: Anomaly Root Cause Analysis 101
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 异常根本原因分析101
- en: 原文：[https://towardsdatascience.com/anomaly-root-cause-analysis-101-98f63dd12016?source=collection_archive---------0-----------------------#2023-06-28](https://towardsdatascience.com/anomaly-root-cause-analysis-101-98f63dd12016?source=collection_archive---------0-----------------------#2023-06-28)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/anomaly-root-cause-analysis-101-98f63dd12016?source=collection_archive---------0-----------------------#2023-06-28](https://towardsdatascience.com/anomaly-root-cause-analysis-101-98f63dd12016?source=collection_archive---------0-----------------------#2023-06-28)
- en: How to find the explanation for every anomaly on your metrics
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何找到每个指标异常的解释
- en: '[](https://miptgirl.medium.com/?source=post_page-----98f63dd12016--------------------------------)[![Mariya
    Mansurova](../Images/b1dd377b0a1887db900cc5108bca8ea8.png)](https://miptgirl.medium.com/?source=post_page-----98f63dd12016--------------------------------)[](https://towardsdatascience.com/?source=post_page-----98f63dd12016--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----98f63dd12016--------------------------------)
    [Mariya Mansurova](https://miptgirl.medium.com/?source=post_page-----98f63dd12016--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://miptgirl.medium.com/?source=post_page-----98f63dd12016--------------------------------)[![Mariya
    Mansurova](../Images/b1dd377b0a1887db900cc5108bca8ea8.png)](https://miptgirl.medium.com/?source=post_page-----98f63dd12016--------------------------------)[](https://towardsdatascience.com/?source=post_page-----98f63dd12016--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----98f63dd12016--------------------------------)
    [Mariya Mansurova](https://miptgirl.medium.com/?source=post_page-----98f63dd12016--------------------------------)'
- en: ·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F15a29a4fc6ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanomaly-root-cause-analysis-101-98f63dd12016&user=Mariya+Mansurova&userId=15a29a4fc6ad&source=post_page-15a29a4fc6ad----98f63dd12016---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----98f63dd12016--------------------------------)
    ·14 min read·Jun 28, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F98f63dd12016&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanomaly-root-cause-analysis-101-98f63dd12016&user=Mariya+Mansurova&userId=15a29a4fc6ad&source=-----98f63dd12016---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F15a29a4fc6ad&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanomaly-root-cause-analysis-101-98f63dd12016&user=Mariya+Mansurova&userId=15a29a4fc6ad&source=post_page-15a29a4fc6ad----98f63dd12016---------------------post_header-----------)
    发表在 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----98f63dd12016--------------------------------)
    ·14 min 阅读·2023年6月28日[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F98f63dd12016&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanomaly-root-cause-analysis-101-98f63dd12016&user=Mariya+Mansurova&userId=15a29a4fc6ad&source=-----98f63dd12016---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F98f63dd12016&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanomaly-root-cause-analysis-101-98f63dd12016&source=-----98f63dd12016---------------------bookmark_footer-----------)![](../Images/5c4f582ed238c52e8072d05a02c8bde1.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F98f63dd12016&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fanomaly-root-cause-analysis-101-98f63dd12016&source=-----98f63dd12016---------------------bookmark_footer-----------)![](../Images/5c4f582ed238c52e8072d05a02c8bde1.png)'
- en: Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 照片由 [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=medium&utm_medium=referral)
    提供，发布于 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: 'We use metrics and KPIs to monitor the health of our products: to ensure that
    everything is stable or the product is growing as expected. But sometimes, metrics
    change suddenly. Conversions may rise by 10% on one day, or revenue may drop slightly
    for a few quarters. In such situations, it’s critical for businesses to understand
    not only what is happening but also why and what actions we should take. And this
    is where analysts come into play.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用指标和关键绩效指标（KPIs）来监控产品的健康状况：确保一切稳定或产品按预期增长。但有时，指标会突然变化。转化率可能在一天内上升10%，或收入可能在几个季度内略微下降。在这种情况下，企业不仅需要了解发生了什么，还需要理解原因以及应采取的措施。这时分析师就发挥了重要作用。
- en: My first data analytics role was KPI analyst. Anomaly detection and root cause
    analysis has been my main focus for almost three years. I’ve found key drivers
    for dozens of KPI changes and developed a methodology for approaching such tasks.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我第一次从事的数据分析角色是KPI分析师。异常检测和根本原因分析是我近三年来的主要关注点。我发现了数十个KPI变化的关键驱动因素，并制定了一种处理这些任务的方法。
- en: In this article, I would like to share with you my experience. So next time
    you face unexpected metric behaviour, you will have a guide to follow.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在这篇文章中，我想与大家分享我的经验。这样，下次你遇到意外的指标行为时，你将有一个可以遵循的指南。
- en: What to focus on?
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应该关注什么？
- en: 'Before moving on to analysis, let’s define our main goal: what we would like
    to achieve. So what is the purpose of our anomaly root cause analysis?'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行分析之前，让我们定义我们的主要目标：我们希望实现什么。那么，我们的异常根本原因分析的目的是什么？
- en: The most straightforward answer is understanding key drivers for metric change.
    And it goes without saying that it’s a correct answer from an analyst’s point
    of view.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 最直接的答案是理解指标变化的关键驱动因素。不言而喻，从分析师的角度来看，这是一个正确的答案。
- en: But let’s look from a business side. The main reason to spend resources on this
    research is to minimize the potential negative impact on our customers. For example,
    if the conversion has dropped because of a bug in the new app version released
    yesterday, it will be better to find it out today rather than in a month when
    hundreds of customers will have already churned.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 但我们从商业角度来看。花费资源进行此研究的主要原因是为了最小化对客户的潜在负面影响。例如，如果由于昨天发布的新版本应用中的一个漏洞导致转化率下降，那么今天找出这个问题会比一个月后当数百名客户已经流失时要好。
- en: Our main goal is to minimise the potential negative impact on our customers.
  id: totrans-16
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我们的主要目标是最小化对客户的潜在负面影响。
- en: As an analyst, I like having optimization metrics even for my work tasks. Minimizing
    potential adverse effects sounds like a proper mindset to help us focus on the
    right things.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 作为分析师，我喜欢为我的工作任务设置优化指标。最小化潜在不利影响听起来像是一种合适的心态，帮助我们专注于正确的事情。
- en: 'So keeping the main goal in mind, I would try to find answers to the following
    questions:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，牢记主要目标，我会尝试找出以下问题的答案：
- en: Is it a real problem affecting our customers’ behaviour or just a data issue?
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是一个真正影响客户行为的问题，还是仅仅是一个数据问题？
- en: If our customers’ behaviour actually changed, could we do anything with it?
    What will be the potential effect of different options?
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们的客户行为确实发生了变化，我们能做些什么？不同选项的潜在效果是什么？
- en: If it’s a data issue, could we use other tools to monitor the same process?
    How could we fix the broken process?
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果这是一个数据问题，我们能否使用其他工具监控相同的过程？我们如何修复损坏的过程？
- en: 'Step 1: Do It Yourself'
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 步骤 1：自己动手做
- en: 'From my experience, the best first action is to reproduce the affected customer
    journey. For example, suppose the number of orders in the e-commerce app decreased
    by 10% on iOS. In that case, it’s worth trying to purchase something and double-check
    whether there are any product issues: buttons are not visible, the banner can’t
    be closed, etc.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我的经验，最好的第一步是重现受影响的客户旅程。例如，假设iOS上的电商应用订单数量减少了10%。在这种情况下，值得尝试购买一些东西，并仔细检查是否存在产品问题：按钮不可见、横幅无法关闭等。
- en: Also, remember to look at logging to ensure that information is captured correctly.
    Everything may be ok with customer experience, but we may lose data about purchases.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，记得查看日志以确保信息正确捕捉。客户体验可能一切正常，但我们可能会丢失关于购买的数据。
- en: 'I believe it’s an essential step to start your anomaly investigation. First
    of all, after DIY, you will better understand the affected part of the customer
    journey: what are the steps, how data is logged. Secondly, you may find the root
    cause and save yourself hours of analysis.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我相信这是开始异常调查的一个重要步骤。首先，经过DIY，你将更好地理解受影响的客户旅程部分：步骤是什么，数据如何记录。其次，你可能会找到根本原因，从而节省几个小时的分析时间。
- en: '**Tip:** It’s more likely to reproduce the issue if the anomaly magnitude is
    significant, which means the problem impacts many customers.'
  id: totrans-26
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**提示：** 如果异常幅度较大，更可能重现问题，这意味着问题影响了许多客户。'
- en: '**Step 2: Check The Data**'
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**步骤 2：检查数据**'
- en: As we discussed earlier, first of all, it’s essential to understand whether
    customers are influenced, or it’s just a data anomaly.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们之前讨论的，首先，了解客户是否受到影响，或者只是数据异常，这一点非常重要。
- en: I definitely advise you to check that the data is up-to-date. You may see a
    50% decrease in yesterday’s revenue because the report captured only the first
    half of the day. You can look at the raw data or talk to your Data Engineering
    team.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我强烈建议你检查数据是否是最新的。你可能会看到昨天的收入减少了50%，因为报告只捕捉了当天的前半部分。你可以查看原始数据或与数据工程团队沟通。
- en: If there are no known data-related problems, you can double-check the metric
    using different data sources. In many cases, the products have client-side (for
    example, Google Analytics or Amplitude) and back-end data (for example, application
    logs, access logs or logs of API gateway). So we can use different data sources
    to verify KPI dynamics. If you see an anomaly only in one data source, your problem
    is likely data-related and doesn’t affect customers.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有已知的数据相关问题，你可以使用不同的数据源来双重检查指标。在许多情况下，产品有客户端数据（例如，Google Analytics 或 Amplitude）和后端数据（例如，应用日志、访问日志或API网关日志）。因此，我们可以使用不同的数据源来验证KPI动态。如果你在一个数据源中看到异常，那么你的问题可能与数据有关，并不会影响客户。
- en: The other thing to keep in mind is time windows and data delays. Once, a product
    manager came to me saying activation was broken because conversion from registration
    to the first successful action (i.e. purchase in case of e-commerce) had been
    decreasing for three weeks. However, it was an everyday situation.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 另一点需要记住的是时间窗口和数据延迟。有一次，一位产品经理找我说激活出现了问题，因为从注册到首次成功操作（例如在电子商务中是购买）的转化率在过去三周里一直在下降。然而，这实际上是一种日常情况。
- en: '![](../Images/fde06fffba5d8108453e71f68cd01514.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fde06fffba5d8108453e71f68cd01514.png)'
- en: Example by author based on synthetic data
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 作者基于合成数据的示例
- en: The root cause of the decrease was the time window. We track activation within
    the first 30 days after registration. So cohorts registered 4+ weeks ago had the
    whole month to make the first action. But customers from the last cohort had only
    one week to convert, so conversion for them is expected to be much lower. If you
    want to compare conversions for these cohorts, change the time window to one week
    or wait.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 下降的根本原因是时间窗口。我们跟踪注册后前30天内的激活情况。因此，注册超过4周的用户有整整一个月的时间来进行首次操作。但最近一批用户只有一周的时间来转化，因此他们的转化率预期会低得多。如果你想比较这些用户群体的转化情况，可以将时间窗口更改为一周或等待。
- en: In case of data delays, you may have a similar decreasing trend in recent days.
    For example, our mobile analytical system used to send events in batches when
    the device was using a Wi-Fi network. So on average, it took 3–4 days to get all
    events from all devices. So seeing fewer active devices for the last 3–4 days
    was usual.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 如果数据出现延迟，你可能会看到最近几天有类似的下降趋势。例如，我们的移动分析系统在设备使用Wi-Fi网络时会批量发送事件。因此，平均而言，从所有设备收集所有事件需要3到4天。所以在过去的3到4天看到较少的活跃设备是很正常的。
- en: The good practice for such cases is trimming the last period from your graphs.
    It will prevent your team from making wrong decisions based on data. However,
    people may still accidentally bump into such inaccurate metrics, and you should
    spend some time understanding how methodologically accurate metrics are before
    diving deep into root cause analysis.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这种情况，好的做法是从图表中去掉最后一个句点。这将防止你的团队基于数据做出错误的决策。然而，人们仍然可能会不小心遇到这些不准确的指标，因此在深入进行根本原因分析之前，你应该花些时间理解这些方法论上准确的指标。
- en: 'Step 3: Helicopter view'
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第三步：全景视图
- en: The next step is to look at trends more globally. First, I prefer to zoom out
    and look at longer trends to get the whole picture.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是更全面地查看趋势。首先，我倾向于缩小视野，查看较长时间的趋势，以获得整体图景。
- en: For example, let’s look at the number of purchases. The number of orders has
    been growing steadily week after week, with an expected decrease at the end of
    December (Christmas and New Year time). But then, at the beginning of May, KPI
    significantly dropped and continued decreasing. Should we start panicking?
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，看看购买数量。订单数量已经稳定增长了好几个星期，预计在12月底（圣诞节和新年期间）会有所下降。但接着，在5月初，KPI显著下降并持续减少。我们应该开始感到恐慌了吗？
- en: '![](../Images/8467d21ce34df972a02da351dd01b623.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8467d21ce34df972a02da351dd01b623.png)'
- en: Example by author based on synthetic data
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 作者基于合成数据的示例
- en: 'Actually, most likely, there’s no reason to panic. We can look at metric trends
    for the last three years and notice that the number of purchases decreases every
    single summer. So it’s a case of seasonality. For many products, we can see lower
    engagement during the summertime because customers go on vacation. However, this
    seasonality pattern isn’t ubiquitous: for example, travel or summer festival sites
    may have an opposite seasonality trend.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/aa91c2ce52614e9d8481e3fe577d599f.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
- en: Example by author based on synthetic data
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s look at one more example — the number of active customers for another
    product. We could see a decrease since June: monthly active users used to be 380K
    — 400K, and now it’s only 340–360K (around a -10% decrease). We’ve already checked
    that there were no such changes in summer during several previous years. Should
    we conclude that something is broken in our product?'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/64925d72c360b1280b23348f27e6c4c5.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
- en: Example by author based on synthetic data
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: 'Wait, not yet. In this case, zooming out can also help. Taking into account
    long-term trends, we can see that the last three weeks’ values are close to the
    ones in February and March. The true anomaly is 1.5 months of the high number
    of customers from the beginning of April till mid-May. We may have wrongly concluded
    that KPI has dropped, but it just returned to the norm. Considering that it was
    spring 2020, higher traffic on our site is likely due to COVID isolation: customers
    were sitting at home and spending more time online.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/f64be76b59cf0f038162a706c9394bfb.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
- en: Example by author based on synthetic data
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: The last but not least point of your initial analysis is to define the exact
    time when KPI changed. In some cases, the change may happen suddenly within 5
    minutes. While in others, it can be a very slight shift in trend. For example,
    active users used to grow +5% WoW (week-over-week), but now it’s just +3%.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: It’s worth trying to define the change point as accurately as possible (even
    with minute precision) because it will help you pick up the most plausible hypothesis
    later.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: How fast the metric has changed can give you some clues. For example, if conversion
    changed within 5 minutes, it can’t be due to the rollout of a new app version
    (it usually takes days for customers to update their apps) and is more likely
    due to back-end changes (for example, API).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: '**Step 4: Get the context**'
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Understanding the whole context (what’s going on) may be crucial for our investigation.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: 'What I usually check to see the whole picture:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: '**Internal changes**. It goes without saying internal changes can influence
    KPIs, so I usually look up all releases, experiments, infrastructure incidents,
    product changes (i.e. new design or price changes) and vendor updates (for example,
    upgrade to the latest version of the BI tool we are using for reporting).'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**External factors** may be different depending on your product. Currency exchange
    rates in fintech can affect customers’ behaviour, while big news or weather changes
    can influence search engine market share. You can brainstorm similar factors for
    your product. Try to be creative in thinking about external factors. For example,
    once we discovered that the decrease in traffic on site was due to the network
    issues in our most significant region.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**外部因素**可能会根据你的产品有所不同。在金融科技领域，货币汇率可能会影响客户行为，而重大新闻或天气变化可能会影响搜索引擎市场份额。你可以为你的产品头脑风暴类似的因素。试着在思考外部因素时富有创意。例如，我们曾发现网站流量的下降是由于我们最重要地区的网络问题。'
- en: '**Competitors activities**. Try to find out whether your main competitors are
    doing something right now — an extensive marketing campaign, an incident when
    their product is unavailable or market closure. The easiest way to do it is to
    look for mentions on Twitter, Reddit or news. Also, there are a lot of sites monitoring
    services’ issues and outages (for example, [DownDetector](https://downdetector.co.uk/)
    or [DownForEveryoneOrJustMe](https://downforeveryoneorjustme.com/)) where you
    could check your competitors’ health.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**竞争对手活动**。尝试了解你的主要竞争对手是否正在做某些事情——大规模的营销活动、产品不可用的事件或市场关闭。最简单的方法是查看Twitter、Reddit或新闻上的提及。此外，还有许多监控服务问题和故障的网站（例如，[DownDetector](https://downdetector.co.uk/)或[DownForEveryoneOrJustMe](https://downforeveryoneorjustme.com/)），你可以在这些网站上检查竞争对手的健康状况。'
- en: '**Customers’ voice**. You can learn about problems with your product from your
    customer support team. So don’t hesitate to ask them whether there are any new
    complaints or an increase in customer contacts of a particular type. However,
    please remember that few people may contact customer support (especially if your
    product is not essential for everyday life). For example, once many-many years
    ago, our search engine was wholly broken for ~100K users of the old versions of
    Opera browser. The problem persisted for a couple of days, but less than ten customers
    reached out to the support.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**客户反馈**。你可以通过客户支持团队了解产品的问题。因此，不要犹豫，问问他们是否有新的投诉或特定类型的客户联系量增加。然而，请记住，可能只有少数人会联系客户支持（特别是如果你的产品对日常生活并非必需）。例如，多年前，我们的搜索引擎在~100K老版本Opera浏览器用户中完全崩溃。问题持续了几天，但不到十个客户联系了支持。'
- en: Since we’ve already defined the anomaly time, it’s pretty easy to get all events
    that happened nearby. These events are your hypothesis.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们已经定义了异常时间，因此很容易获取所有发生在附近的事件。这些事件就是你的假设。
- en: '**Tip:** If you suspect internal changes (release or experiment) are the root
    cause of your KPI drop-off. The best practice is to revert these changes (if possible)
    and then try to understand the exact problem. It will help you reduce the potential
    negative effects on customers.'
  id: totrans-62
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**提示：** 如果你怀疑内部变更（发布或实验）是KPI下降的根本原因。最佳实践是恢复这些变更（如果可能的话），然后尝试理解确切的问题。这将帮助你减少对客户的潜在负面影响。'
- en: '**Step 5: Slicing & Dicing**'
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**步骤5：切片与切块**'
- en: At this moment, you hopefully already have an understanding of what is going
    on around the time of the anomaly and some hypotheses about the root causes.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，你希望已经对异常发生时的周围情况有所了解，并对根本原因有了一些假设。
- en: Let’s start by looking at the anomaly from a higher level. For example, if there’s
    an anomaly in conversion on Android for the USA customers, it’s worth checking
    iOS and web and customers from other regions. Then you will be able to understand
    the scale of the problem adequately.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 我们先从更高的层次看待异常。例如，如果在美国客户的Android设备上出现了异常，值得检查iOS、网页以及其他地区的客户。这样你将能够适当地理解问题的规模。
- en: After that, it’s time to dive deep and try to localize anomaly (to define as
    narrow as possible a segment or segments affected by KPI change). The most straightforward
    way is to look at your product’s KPI trends in different dimensions.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，是时候深入挖掘并尝试定位异常（尽可能狭窄地定义受KPI变化影响的段或多个段）。最直接的方法是查看你产品在不同维度上的KPI趋势。
- en: 'The list of such meaningful dimensions can differ significantly depending on
    your product, so it’s worth brainstorming with your team. I would suggest looking
    at the following groups of factors:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 这样有意义的维度列表可能会根据你的产品有所不同，所以值得与团队进行头脑风暴。我建议查看以下因素组：
- en: '**technical features**: for example, platform, operation system, app version;'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**技术特性**：例如，平台、操作系统、应用版本；'
- en: '**customer features**: for example, new or existing customer (cohorts), age,
    region;'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**客户特征**：例如，新客户或现有客户（群体），年龄，地区；'
- en: '**customer behaviour**: for example, product features adopted, experiment flags,
    marketing channels.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**客户行为**：例如，产品功能的采用，实验标志，营销渠道。'
- en: When examining KPI trends split by different dimensions, it’s better to look
    only at significant enough segments. For example, if revenue has dropped by 10%,
    there’s no reason to look at countries that contribute less than 1% to total revenue.
    Metrics tend to be more volatile in smaller groups, so insignificant segments
    may add too much noise. I prefer to group all small slices into the `other` group
    to avoid losing this signal completely.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在按不同维度拆分KPI趋势时，最好只查看足够显著的细分。例如，如果收入下降了10%，没有必要查看对总收入贡献不到1%的国家。小组中的指标往往更具波动性，因此不显著的细分可能会增加过多噪音。我更倾向于将所有小片段分组到`其他`组中，以避免完全丧失该信号。
- en: For example, we can look at revenue split by platforms. The absolute numbers
    for different platforms can differ significantly, so I normed all series on the
    first point to compare dynamics over time. Sometimes, it’s better to normalize
    on average for the first N points. For example, average the first seven days to
    capture weekly seasonality.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们可以查看按平台划分的收入。不同平台的绝对数值可能差异很大，因此我将所有系列标准化到第一个点，以比较随时间的动态。有时，最好对前N个点进行平均化。例如，将前七天的平均值来捕捉每周季节性。
- en: That’s how you could do it in Python.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是你可以在Python中做到的。
- en: '[PRE0]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The graph tells us the whole story: before May, revenue trends for different
    platforms were pretty close, but then something happened on iOS, and iOS revenue
    decreased by 10–20%. So iOS platform is mainly affected by this change, while
    others are pretty stable.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 图表告诉我们整个故事：在5月之前，不同平台的收入趋势非常接近，但随后iOS出现了变化，iOS收入下降了10-20%。所以iOS平台主要受到这一变化的影响，而其他平台则相对稳定。
- en: '![](../Images/c418099c6dd4392ed54346a6924ab244.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c418099c6dd4392ed54346a6924ab244.png)'
- en: Example by author based on synthetic data
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 基于合成数据的作者示例
- en: '**Step 6: Understand your metric**'
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**步骤6：理解你的指标**'
- en: After determining the main segments affected by the anomaly, let’s try to decompose
    our KPI. It may give us a better understanding of what’s going on.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在确定受到异常影响的主要细分后，让我们尝试分解我们的KPI。这可能会给我们更好的了解情况。
- en: 'We usually use two types of KPIs in analytics: absolute numbers and ratios.
    So let’s discuss the approach for decomposition in each case.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通常在分析中使用两种类型的KPI：绝对数值和比率。所以让我们讨论每种情况的分解方法。
- en: We can decompose an **absolute number** by norming it. For example, let’s look
    at the total time spent in service (a standard KPI for content products). We can
    decompose it into two separate metrics.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过标准化来分解**绝对数值**。例如，让我们看看在服务中总共花费的时间（内容产品的标准KPI）。我们可以将其分解为两个单独的指标。
- en: '![](../Images/c055e7fdfa845c541ee754ef989d09c3.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c055e7fdfa845c541ee754ef989d09c3.png)'
- en: Then we can look at the dynamics for both metrics. In the example below, we
    can see that number of active customers is stable while the time spent per customer
    dropped, which means we haven’t lost customers entirely, but due to some reason,
    they started to spend less time on our service.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们可以查看两个指标的动态。在下面的例子中，我们可以看到活跃客户数保持稳定，而每位客户花费的时间下降了，这意味着我们并没有完全失去客户，但由于某些原因，他们开始在我们的服务上花费更少的时间。
- en: '![](../Images/b65c05e6b24de2ccda0f7496406d7564.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b65c05e6b24de2ccda0f7496406d7564.png)'
- en: Example by author based on synthetic data
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 基于合成数据的作者示例
- en: 'For **ratio metrics**, we can look at the numerator and denominator dynamics
    separately. For example, let’s use conversion from registration to the first purchase
    within 30 days. We can decompose it into two metrics:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 对于**比率指标**，我们可以分别查看分子和分母的动态。例如，让我们使用30天内从注册到首次购买的转化率。我们可以将其分解为两个指标：
- en: the number of customers who did purchase within 30 days after registration (numerator),
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在注册后30天内完成购买的客户数量（分子），
- en: the number of registrations (denominator).
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注册人数（分母）。
- en: 'In the example below, the conversion rate decreased from 43.5% to 40% in April.
    Both the number of registrations and the number of converted customers increased.
    It means there are additional customers with lower conversion. It can happen because
    of different reasons:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的例子中，转化率在四月份从43.5%下降到40%。注册人数和转化客户数都增加了。这意味着有更多的客户转化率较低。这可能是由于不同的原因：
- en: new marketing channel or marketing campaign with lower-quality users;
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的营销渠道或质量较低的用户的营销活动；
- en: technical changes in data (for example, we changed the definition of regions,
    and now we are taking into account more customers);
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据中的技术变化（例如，我们改变了地区定义，现在我们考虑了更多的客户）；
- en: fraud or bot traffic on site.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站上的欺诈或机器人流量。
- en: '![](../Images/9e52f3e410c838afdadfd6e3ce675d5c.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9e52f3e410c838afdadfd6e3ce675d5c.png)'
- en: Example by author based on synthetic data
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 作者基于合成数据的示例
- en: '**Tip:** If we saw a drop-off in converted users while total users were stable,
    that would indicate problems in a product or data regarding the fact of conversion.'
  id: totrans-95
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**提示：** 如果我们看到转换用户的下降，而总用户数量保持稳定，这将表明产品或数据中关于转换的事实存在问题。'
- en: 'For **conversions**, it also may be helpful to turn it into a funnel. For example,
    in our case, we can look at the conversions for the following steps:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 对于**转换**，将其转化为漏斗也可能会有所帮助。例如，在我们的案例中，我们可以查看以下步骤的转换：
- en: completed registration
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完成注册
- en: products’ catalogue
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 产品目录
- en: adding an item to the basket
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将商品添加到购物车
- en: placing order
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下订单
- en: successful payment.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 成功支付。
- en: Conversion dynamics for each step may show us the stage in a customer journey
    where the change happened.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 每一步的转换动态可以显示客户旅程中发生变化的阶段。
- en: '**Step 7: C**oming to a conclusion'
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**第7步：得出结论**'
- en: 'As a result of all the analysis stages mentioned above, you should have a pretty
    whole picture of the current situation:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 根据上述所有分析阶段，你应该对当前情况有一个比较全面的了解：
- en: what exactly changed;
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具体改变了什么；
- en: what segments are affected;
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哪些细分市场受到影响；
- en: what is going on around.
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 周围发生了什么。
- en: Now it’s time to sum it up. I prefer to put all information down in a structured
    way, describing tested hypotheses and conclusions we’ve made and what it is the
    current understanding of the primary root cause and next steps (if they are needed).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是总结的时候了。我倾向于以结构化的方式记录所有信息，描述测试过的假设和我们得出的结论，以及当前对主要根本原因的理解和下一步（如果需要）。
- en: '**Tip:** It’s worth writing down all tested hypotheses (not only proven ones)
    because it will avoid duplicating unnecessary work.'
  id: totrans-109
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**提示：** 记录所有测试过的假设（不仅仅是已证明的假设）是值得的，因为这将避免重复不必要的工作。'
- en: The essential thing to do now is to verify that our primary root cause can completely
    explain KPI change. I usually model the situation if there are no known effects.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 现在最重要的是验证我们的主要根本原因是否能够完全解释KPI变化。我通常在没有已知影响的情况下对情况进行建模。
- en: For example, in the case of conversion from registration to the first purchase,
    we might have discovered a fraud attack, and we know how to identify bot traffic
    using IP addresses and user agents. So we could look at the conversion rate without
    the effect of the known primary root cause — fraud traffic.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在从注册到首次购买的转换案例中，我们可能发现了欺诈攻击，并知道如何通过IP地址和用户代理来识别机器人流量。因此，我们可以查看在已知主要根本原因——欺诈流量——影响之外的转换率。
- en: '![](../Images/bbddf846d5cd53bc4c462e16034a1f5f.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bbddf846d5cd53bc4c462e16034a1f5f.png)'
- en: Example by author based on synthetic data
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 作者基于合成数据的示例
- en: As you can see, the fraud traffic explains only around 70% of drop-off, and
    there could be other factors affecting KPI. That’s why it’s better to double-check
    that you’ve found all significant factors.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，欺诈流量仅解释了大约70%的下降，还有其他因素可能影响KPI。这就是为什么最好双重检查你是否发现了所有重要因素。
- en: Sometimes, it may be challenging to prove your hypothesis, for example, changes
    in price or design that you couldn’t A/B test appropriately. We all know that
    correlation doesn’t imply causation.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，证明你的假设可能是具有挑战性的，例如价格或设计的变化，你无法进行适当的A/B测试。我们都知道，相关性并不意味着因果关系。
- en: 'The possible ways to check the hypothesis in such cases:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下检查假设的可能方法：
- en: To look at similar situations in the past, for example, price changes and whether
    there was a similar correlation with KPI.
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看过去类似情况，例如价格变化是否与KPI有类似的相关性。
- en: Try to identify customers with changed behaviour, such as those who started
    spending much less time in our app, and conduct a survey.
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尝试识别行为发生变化的客户，比如那些开始在我们的应用中花费更少时间的客户，并进行调查。
- en: After this analysis, you will still doubt the effects, but it may increase confidence
    that you’ve found the correct answer.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在此分析之后，你仍然可能对效果产生疑问，但这可能会增加你对找到正确答案的信心。
- en: '**Tip:** The survey could also help if you are stuck: you’ve checked all hypotheses
    and still haven’t found an explanation.'
  id: totrans-120
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**提示：** 如果你陷入困境，调查也可能有帮助：你已经检查了所有假设但仍未找到解释。'
- en: '**How to be prepared for the next root cause analysis?**'
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**如何为下一次根本原因分析做好准备？**'
- en: At the end of the extensive investigation, it’s time to think about how to make
    it easier and better next time.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在详细调查结束时，是时候考虑如何让下次变得更轻松、更好。
- en: 'My best practices after ages of dealing with anomalies investigations:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 经过多年的异常调查经验，我总结了以下最佳实践：
- en: 'It’s super-helpful to have **a checklist specific to your product** — it can
    save you and your colleagues hours of work. It’s worth putting together a list
    of hypotheses and tools to check them (links to dashboards, external sources of
    information on your competitors etc.). Please, keep in mind that writing down
    the checklist is not a one-time activity: you should add new knowledge to it once
    you face new types of anomalies so it stays up-to-date.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拥有**特定于您的产品的清单**是非常有帮助的——这可以为您和您的同事节省数小时的工作。值得整理出假设列表和检查这些假设的工具（例如仪表盘链接、关于竞争对手的外部信息来源等）。请记住，编写清单不是一次性活动：一旦遇到新的异常类型，您应该将新知识添加到清单中，以保持其最新。
- en: The other valuable artifact is **a changelog with all meaningful events** for
    your product, for example, changes in price, launches of competitive products
    or new feature releases. The changelog will allow you to find all significant
    events in one place not looking through multiple chats and wiki pages. It can
    be demanding not to forget to update the changelog. You could make it part of
    analytical on-call duties to establish clear ownership.
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 另一个有价值的文档是**包含所有重要事件的变更日志**，例如价格变动、竞争产品的推出或新功能发布。变更日志将帮助您在一个地方找到所有重要事件，而无需翻阅多个聊天记录和维基页面。记住更新变更日志可能会很有挑战性。您可以将其纳入分析值班职责，以确立明确的责任。
- en: In most cases, you need input from different people to understand the situation’s
    whole context. A preliminary prepared **working group and a channel for KPI anomaly
    investigations** can save precious time and keep all stakeholders updated.
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在大多数情况下，您需要来自不同人员的输入，以了解情况的整体背景。预先准备好的**工作组和KPI异常调查渠道**可以节省宝贵的时间，并保持所有利益相关者的更新。
- en: Last but not least, to minimize the potential negative impact on customers,
    we should have **a monitoring system in place** to learn about anomalies as soon
    as possible and start looking for root causes. So save some time establishing
    and improving your alerting and monitoring.
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后但同样重要的是，为了最小化对客户的潜在负面影响，我们应该**建立监控系统**，以便尽快了解异常情况并开始寻找根本原因。因此，请腾出时间来建立和改进您的警报和监控系统。
- en: TL;DR
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: TL;DR
- en: 'The key messages I would like you to keep in mind:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望您牢记的关键消息：
- en: Dealing with root cause analysis, you should **focus on minimizing the potential
    negative impact on customers**.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 处理根本原因分析时，您应该**专注于最小化对客户的潜在负面影响**。
- en: '**Try to be creative and look broadly**: get all the context of what’s going
    on inside your product, infrastructure, and what are potential external factors.'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**尽量发挥创造力并广泛考虑**：了解您产品内部发生的情况、基础设施的状况以及潜在的外部因素。'
- en: '**Dig deep**: look at your metrics from different angles, trying to examine
    different segments and decompose your metrics.'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**深入挖掘**：从不同角度查看您的指标，尝试检查不同的细分市场并分解您的指标。'
- en: '**Be prepared**: it’s much easier to deal with such research if you already
    have a checklist for your product, a changelog and a working group to brainstorm.'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**做好准备**：如果您已经有产品清单、变更日志和工作组进行头脑风暴，那么处理这样的研究会容易得多。'
- en: Thank you a lot for reading this article. I hope now you won’t be stuck facing
    a root cause analysis task since you already have a guide at hand. If you have
    any follow-up questions or comments, please don’t hesitate to leave them in the
    comments section.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 非常感谢您阅读这篇文章。我希望现在您不会在面对根本原因分析任务时感到困惑，因为您已经有了手头的指南。如果您有任何后续问题或评论，请随时在评论区留言。
