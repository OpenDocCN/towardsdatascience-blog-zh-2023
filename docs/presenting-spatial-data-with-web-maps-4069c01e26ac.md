# ä½¿ç”¨ç½‘ç»œåœ°å›¾å±•ç¤ºç©ºé—´æ•°æ®

> åŸæ–‡ï¼š[`towardsdatascience.com/presenting-spatial-data-with-web-maps-4069c01e26ac`](https://towardsdatascience.com/presenting-spatial-data-with-web-maps-4069c01e26ac)

## æ·±å…¥æ¢è®¨åœ°å›¾å›¾å—ã€åŸºç¡€åœ°å›¾ã€åœ°å›¾å›¾å±‚å’ŒçŸ¢é‡æ•°æ®

[](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)![Mary M](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------)![Towards Data Science](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------) [Mary M](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)

Â·å‘å¸ƒäº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------) Â·15 åˆ†é’Ÿé˜…è¯»Â·2023 å¹´ 8 æœˆ 15 æ—¥

--

![](img/3a11fdfd0efd8f0644ba1bcdf58e4d19.png)

çˆ±å°”å…°è¥¿éƒ¨å†å²æ³¥ç‚­æ²¼æ³½åœ°å›¾ï¼ŒCorine åœŸåœ°è¦†ç›–æ•°æ® 2000

[`github.com/mmc1718/webmap-ireland`](https://github.com/mmc1718/webmap-ireland)

# ğŸ—º å†…å®¹

+   **ç®€ä»‹**

    - ç½‘ç»œåœ°å›¾çš„å·¥ä½œåŸç†

+   **å‡†å¤‡åŸºç¡€åœ°å›¾**

    - åˆ›å»ºçŸ¢é‡å›¾å—é›†

    - è¯†åˆ«æ‰€éœ€çš„æ›´æ”¹

    - ä¿®æ”¹å›¾å—é›†

+   **æ ·å¼åŒ–åŸºç¡€åœ°å›¾** **-** åˆ›å»º JSON æ ·å¼æ–‡ä»¶

    - æä¾›æ ·å¼åŒ–çš„åœ°å›¾å›¾å—

+   **åˆ›å»ºç½‘ç»œåœ°å›¾** **-** åŠ è½½åŸºç¡€åœ°å›¾

    - åœ¨åœ°å›¾ä¸Šå åŠ æ•°æ®

åˆ¶ä½œåœ°å›¾çš„æ–¹å¼æœ‰å¾ˆå¤šç§ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¡Œé¢ GIS è½¯ä»¶ï¼Œå¦‚ QGIS æˆ– ArcGISï¼Œä½¿ç”¨ Web æ¡†æ¶ï¼Œå¦‚ Leaflet æˆ– Mapbox GL JSï¼Œæˆ–è€…ä½¿ç”¨ä¼ ç»Ÿçš„å¢¨æ°´å’Œçº¸å¼ æ¥å®Œæˆã€‚

ç½‘ç»œåœ°å›¾æ˜¯å±•ç¤ºç©ºé—´æ•°æ®çš„ç»ä½³é€‰æ‹©ï¼Œå› ä¸ºå®ƒä»¬æ˜“äºåˆ†äº«ä¸”å…·æœ‰äº’åŠ¨æ€§ã€‚ç°åœ¨æœ‰è®¸å¤šå·¥å…·å¯ä»¥ä½¿åˆ›å»ºç½‘ç»œåœ°å›¾çš„è¿‡ç¨‹å˜å¾—ç®€å•ï¼ŒåŒæ—¶è®©æˆ‘ä»¬å®Œå…¨æ§åˆ¶åœ°å›¾çš„å„ä¸ªå…ƒç´ ã€‚

**æˆ‘å°†ä»‹ç»ä½¿ç”¨å¼€æºè½¯ä»¶å’Œå¼€æ”¾æ•°æ®æºåˆ›å»ºæ‚¨è‡ªå·±çš„åœ°å›¾çš„å®Œæ•´è¿‡ç¨‹**ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨**OpenStreetMap**å’Œ**Natural** **Earth**æ•°æ®åˆ›å»ºè‡ªå®šä¹‰çŸ¢é‡åŸºç¡€åœ°å›¾ï¼Œä½¿ç”¨**Tileserver**æä¾›å›¾å—ï¼Œå°†åŸºç¡€åœ°å›¾åŠ è½½åˆ°ç½‘é¡µä¸Šï¼Œå¹¶ä½¿ç”¨**Maplibre**åœ¨åœ°å›¾ä¸Šå åŠ ç©ºé—´æ•°æ®ã€‚

ä½œä¸ºç¤ºä¾‹ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªå±•ç¤ºåå¹´æœŸé—´æ³¥ç‚­æ²¼æ³½æŸå¤±çš„çˆ±å°”å…°æ³¥ç‚­æ²¼æ³½åœ°å›¾ã€‚æˆ‘å·²å‡†å¤‡å¥½æ¥è‡ª Corine åœŸåœ°è¦†ç›–æ¸…å•çš„æ•°æ®ï¼Œä½¿å…¶å¯ä»¥åœ¨ç½‘ç»œåœ°å›¾ä¸Šæ˜¾ç¤ºã€‚æœ€ç»ˆç»“æœå°†æ˜¯ä¸€ä¸ªåœ¨æµè§ˆå™¨ä¸­å¯æŸ¥çœ‹çš„ç¾è§‚çš„çˆ±å°”å…°æ²¼æ³½åœ°å›¾ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹å·²éƒ¨ç½²çš„æœ€ç»ˆåœ°å›¾ç‰ˆæœ¬: [`marymcguire.dev/ireland-bog-map`](https://marymcguire.dev/ireland-bog-map.html)

è¿™ä¸ªé¡¹ç›®çš„ä»£ç åº“å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/mmc1718/webmap-ireland)æ‰¾åˆ°ï¼š

[](https://github.com/mmc1718/webmap-ireland?source=post_page-----4069c01e26ac--------------------------------) [## GitHub - mmc1718/webmap-ireland: æ˜¾ç¤ºçˆ±å°”å…°æ³¥ç‚­æ²¼æ³½çš„ç½‘ç»œåœ°å›¾

### æ˜¾ç¤ºçˆ±å°”å…°æ³¥ç‚­æ²¼æ³½çš„ç½‘ç»œåœ°å›¾ã€‚é€šè¿‡åˆ›å»ºè´¦æˆ·æ¥ä¸º mmc1718/webmap-ireland çš„å‘å±•åšè´¡çŒ®â€¦

github.com](https://github.com/mmc1718/webmap-ireland?source=post_page-----4069c01e26ac--------------------------------)

Docker å°†æ˜¯è¿™ä¸ªé¡¹ç›®çš„ä¸»è¦ä¾èµ–ï¼Œå› æ­¤å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…ï¼Œä½ éœ€è¦å…ˆå®‰è£…å®ƒæ‰èƒ½ç»§ç»­ã€‚å‡è®¾ä½ å…·æœ‰ä¸€äº›åŸºæœ¬çš„ GIS æ¦‚å¿µçŸ¥è¯†ï¼ŒåŸºæœ¬çš„ç»ˆç«¯ä½¿ç”¨ã€è¯»å– JSON æ–‡ä»¶çš„èƒ½åŠ›ï¼Œå¹¶èƒ½å¤Ÿè·Ÿéšä½¿ç”¨ JavaScript å’Œ HTML çš„ç®€å•ç¤ºä¾‹ã€‚

## ç½‘ç»œåœ°å›¾å¦‚ä½•å·¥ä½œ

æ•°å­—åœ°å›¾ç”±ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼šåŸºç¡€åœ°å›¾å’Œæ•°æ®å±‚ã€‚å¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰ç½‘ç»œåœ°å›¾ï¼Œå®ƒä»¬ä¸æ­¤æ— å¼‚ã€‚

![](img/e345905b73b9fa9195ccc40937cd8690.png)![](img/43af9a50646f79bd82da4a20c15a17d7.png)![](img/1118d9d74e974465a05e4d8583c6abdd.png)

éƒ½æŸæ—çš„ä¸‰ä¸ªç½‘ç»œåœ°å›¾è§†å›¾ï¼Œåœ°å›¾æ•°æ®ç‰ˆæƒå½’ OpenStreetMap æ‰€æœ‰

æ•°æ®å±‚é€šå¸¸æ˜¯åˆ¶ä½œåœ°å›¾çš„æ ¹æœ¬åŸå› ã€‚åŸºç¡€åœ°å›¾ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåŸºç¡€åœ°å›¾ï¼Œä»¥ä¾¿æˆ‘ä»¬åœ¨å…¶ä¸Šå åŠ æ•°æ®ã€‚æ ·å¼è®¾è®¡å¯¹åŸºç¡€åœ°å›¾å¾ˆé‡è¦ï¼Œä»¥æ”¯æŒæ•°æ®å±‚è€Œä¸åˆ†æ•£æ³¨æ„åŠ›ï¼Œå¹¶ä¸”å¯¹æ•°æ®å±‚ä¹Ÿå¾ˆé‡è¦ï¼Œä½¿æ•°æ®å¯è¯»å¹¶ä¼ è¾¾å…³äºå…¶ä»·å€¼çš„é™„åŠ ä¿¡æ¯ï¼ˆè¾ƒæš—æˆ–è¾ƒäº®çš„é¢œè‰²ï¼Œæˆ–è¾ƒå¤§æˆ–è¾ƒå°çš„ç¬¦å·ä¼ è¾¾ä¸åŒçš„æ„ä¹‰ï¼‰ã€‚

é€šå¸¸ï¼Œç½‘ç»œåŸºç¡€åœ°å›¾ä»¥ä¸€ç»„å•ç‹¬çš„åœ°å›¾ç“¦ç‰‡çš„å½¢å¼å‡ºç°ï¼Œè¿™äº›ç“¦ç‰‡æ‹¼æ¥åœ¨ä¸€èµ·å½¢æˆä¸€å¼ åœ°å›¾ã€‚

![](img/bb58f4bc4fd4fe639f279659a113f506.png)

å›¾ç¤ºæ‘˜è‡ª**ã€Šç©ºé—´æ•°æ®åŸºç¡€è®¾æ–½çš„ Web åœ°å›¾ç“¦ç‰‡æœåŠ¡ï¼šç®¡ç†ä¸ä¼˜åŒ–ã€‹**ï¼Œè¯¥ç« èŠ‚åœ¨ CC BY è®¸å¯è¯ä¸‹å‘å¸ƒï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è§[`www.intechopen.com/chapters/38302#F1`](https://www.intechopen.com/chapters/38302#F1)

é‡è¦çš„æ˜¯ï¼Œè¿™äº›åœ°å›¾ç“¦ç‰‡è¢«åˆ†ç±»ä¸ºä¸åŒçš„ç¼©æ”¾çº§åˆ«ï¼Œè¿™æ„å‘³ç€å®Œæ•´çš„åœ°å›¾ç“¦ç‰‡é›†å®é™…ä¸ŠåŒ…æ‹¬äº†è®¸å¤šç‰ˆæœ¬çš„åœ°å›¾â€”â€”æ¯ä¸ªç¼©æ”¾çº§åˆ«ä¸€ä¸ªã€‚å½“ä½ åœ¨ç½‘ç»œåœ°å›¾ï¼ˆæˆ–â€œæ»‘åŠ¨åœ°å›¾â€ï¼‰ä¸Šæ”¾å¤§æˆ–ç¼©å°æ—¶ï¼Œåœ°å›¾ç‰¹å¾ä¼šå˜å¾—æ›´åŠ è¯¦ç»†æˆ–ä¸é‚£ä¹ˆè¯¦ç»†ï¼Œæœ‰äº›ç‰¹å¾åªæœ‰åœ¨è¾¾åˆ°æŸäº›ç¼©æ”¾çº§åˆ«æ—¶æ‰ä¼šå‡ºç°ã€‚åœ¨åå°ï¼Œé¡µé¢ä¼šåŠ è½½ä¸å½“å‰æŸ¥çœ‹çš„ç¼©æ”¾çº§åˆ«å’Œåœ°å›¾éƒ¨åˆ†ç›¸å¯¹åº”çš„æ–°ç“¦ç‰‡ã€‚

å°†è¿™äº›ç“¦ç‰‡æ‹¼å‡‘åœ¨ä¸€èµ·ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªç“¦ç‰‡é‡‘å­—å¡”ã€‚æˆ‘ä»¬å°†å…¶è§†ä¸ºé‡‘å­—å¡”ï¼Œå› ä¸ºç¼©æ”¾çº§åˆ«è¶Šé«˜ï¼Œè¦†ç›–æ•´ä¸ªåŒºåŸŸæ‰€éœ€çš„ç“¦ç‰‡å°±è¶Šå¤šã€‚[Maptiler æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„å¯è§†åŒ–å›¾ç¤º](https://www.maptiler.com/google-maps-coordinates-tile-bounds-projection/#3/-46.28/26.66)ï¼Œä½ å¯ä»¥åœ¨å¼€å§‹ä½¿ç”¨ç½‘ç»œåœ°å›¾æ—¶å‚è€ƒã€‚

åœ¨å¤„ç†åœ°ç†ç©ºé—´æ•°æ®æ—¶ï¼Œä½ å¯èƒ½å¬è¯´è¿‡çŸ¢é‡æ•°æ®å’Œæ …æ ¼æ•°æ®ä¹‹é—´çš„åŒºåˆ«ã€‚åœ°å›¾åˆ‡ç‰‡ä¹Ÿä¸ä¾‹å¤–ï¼›å•ä¸ªåˆ‡ç‰‡å¯ä»¥æ˜¯çŸ¢é‡åˆ‡ç‰‡ï¼Œé€šå¸¸æ˜¯ .pbf æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯æ …æ ¼ (.png) æ–‡ä»¶ã€‚

æˆ‘å°†åˆ›å»ºä¸€ä¸ªå­˜å‚¨åœ¨ Mapbox çš„ MBTiles æ ¼å¼ä¸­çš„çŸ¢é‡åˆ‡ç‰‡é›†ä½œä¸ºåŸºç¡€åœ°å›¾ã€‚æˆ‘æ›´å–œæ¬¢çŸ¢é‡ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚

# å‡†å¤‡åŸºç¡€åœ°å›¾

## åˆ›å»ºçŸ¢é‡åˆ‡ç‰‡é›†

ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºåŸºç¡€åœ°å›¾åˆ‡ç‰‡é›†ã€‚æœ‰è®¸å¤šç°æˆçš„åŸºç¡€åœ°å›¾å¯ç”¨ï¼Œä½†æˆ‘å¸Œæœ›åœ°å›¾å°†é‡ç‚¹æ”¾åœ¨çˆ±å°”å…°å²›ä¸Šï¼Œæ’é™¤å¤§ä¸åˆ—é¢ ã€‚è¿™å¹¶ä¸å¸¸è§ï¼Œå› æ­¤æˆ‘å°†åˆ¶ä½œè‡ªå·±çš„åŸºç¡€åœ°å›¾ã€‚

æˆ‘ä½¿ç”¨[**Planetiler**](https://github.com/onthegomap/planetiler)æ¥åˆ›å»ºçŸ¢é‡åˆ‡ç‰‡åŸºç¡€åœ°å›¾ã€‚Planetiler æ˜¯ä¸€ä¸ªåˆ›å»ºçŸ¢é‡åœ°å›¾åˆ‡ç‰‡é›†çš„å·¥å…·ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚ç”šè‡³è¿˜æœ‰ä¸€ä¸ª Docker é•œåƒï¼Œè¿™ä½¿å¾—ä½¿ç”¨ Planetiler ç”Ÿæˆå®Œæ•´çš„åˆ‡ç‰‡é›†å˜å¾—ç®€å•ã€‚Planetiler ä½¿ç”¨ OpenStreetMap æ•°æ®æ¥åˆ›å»ºåœ°å›¾åˆ‡ç‰‡ï¼Œè€Œå¯¹æˆ‘æ¥è¯´ï¼Œçˆ±å°”å…°å’ŒåŒ—çˆ±å°”å…°çš„æ•°æ®æå–å·²ç»å¯ç”¨ã€‚

è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†ä¸‹è½½æ‰€éœ€çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨ OpenMapTiles æ¶æ„ä½œä¸ºé»˜è®¤å€¼ç”Ÿæˆåˆ‡ç‰‡é›†ï¼š

```py
docker run --rm -v "$(pwd)/data":/data ghcr.io/onthegomap/planetiler:latest --download --area=ireland-and-northern-ireland --minzoom=4
```

æ³¨æ„ minzoom å‚æ•°è®¾ç½®ä¸º 4ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„åœ°å›¾ä»…å…³æ³¨çˆ±å°”å…°ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨çˆ±å°”å…°è¿‡äºå°çš„éå¸¸ä½çš„ç¼©æ”¾çº§åˆ«ç”Ÿæˆåˆ‡ç‰‡ã€‚ç¼©æ”¾çº§åˆ« 4 æ˜¯æˆ‘ä»¬éœ€è¦çš„æœ€ä½çº§åˆ«ï¼Œè®¾ç½®é™åˆ¶å°†èŠ‚çœåˆ‡ç‰‡ç”Ÿæˆæ—¶é—´ã€‚

Planetiler å®Œæˆçš„æ—¶é—´å°†æ ¹æ®ä½ çš„ç¡¬ä»¶è€Œæœ‰æ‰€ä¸åŒï¼Œä½†å¯èƒ½éœ€è¦ä¸€ä¸ªå°æ—¶æˆ–æ›´é•¿æ—¶é—´ã€‚è®©è¿›ç¨‹è¿è¡Œï¼Œç­‰å¾…çš„åŒæ—¶åšäº›å…¶ä»–äº‹æƒ…ã€‚

ä¸€æ—¦åˆ‡ç‰‡å®Œæˆï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹å®ƒä»¬ã€‚æˆ‘ä½¿ç”¨[**Tileserver**](https://github.com/maptiler/tileserver-gl)æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Docker æ¥è¿è¡Œæ­¤æ­¥éª¤ï¼Œä»è€ŒèŠ‚çœæ—¶é—´ã€‚ç¡®ä¿åœ¨ä¸åˆ‡ç‰‡ç›¸åŒçš„ç›®å½•ä¸­è¿è¡Œæ­¤å‘½ä»¤ï¼Œæˆ–è€…ä½¿ç”¨ mbtiles çš„å®Œæ•´è·¯å¾„è¿è¡Œã€‚

```py
docker run --rm -it -v $(pwd):/data -p 8080:8080 maptiler/tileserver-gl --mbtiles=./ireland_and_northern_ireland.mbtiles
```

æˆ‘ä»¬çš„åˆ‡ç‰‡ç°åœ¨å¯ä»¥åœ¨ http://localhost:8080 ä¸ŠæŸ¥çœ‹ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼ŒTileserver å…è®¸æˆ‘ä»¬æŸ¥çœ‹åŸå§‹åˆ‡ç‰‡æ•°æ®æˆ–ä½¿ç”¨åŸºæœ¬æ ·å¼çš„æ ·å¼åŒ–åˆ‡ç‰‡ã€‚è¿™å¯¹äºæ£€æŸ¥æˆ‘ä»¬çš„åˆ‡ç‰‡æ˜¯å¦ç¬¦åˆé¢„æœŸå¹¶è¯†åˆ«ä»»ä½•é—®é¢˜éå¸¸æœ‰ç”¨ã€‚

å³ä½¿åŸå§‹æ•°æ®æ²¡æœ‰æ ·å¼ï¼ŒåŠŸèƒ½ä¹Ÿä¼šæ ¹æ®å®ƒä»¬æ‰€åœ¨çš„æ•°æ®å±‚è¿›è¡Œé¢œè‰²ç¼–ç ï¼Œå¹¶ä¸”æ—è¾¹æœ‰ä¸€ä¸ªå›¾ä¾‹æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚è¿™åœ¨æ ·å¼åŒ–æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚

## ç¡®å®šæ‰€éœ€çš„æ›´æ”¹

æŸ¥çœ‹åˆ‡ç‰‡æ•°æ®æ­ç¤ºäº†åˆ‡ç‰‡æœ¬èº«å­˜åœ¨çš„ä¸€ä¸ªç›´æ¥é—®é¢˜ã€‚

![](img/98dd783a9410ac2c9070723852d6cfe1.png)

ä½¿ç”¨ Tileserver GL æŸ¥çœ‹æœªæ ·å¼åŒ–çš„çŸ¢é‡åˆ‡ç‰‡é›†

å°½ç®¡æˆ‘ä»¬ä»…ä½¿ç”¨äº†çˆ±å°”å…°å’ŒåŒ—çˆ±å°”å…°çš„æ•°æ®æ¥ç”Ÿæˆåœ°å›¾ï¼Œä½†å¤§ä¸åˆ—é¢ çš„è½®å»“ä»ç„¶å¯è§ã€‚è¿™æ˜¯å› ä¸º Planetiler ç”Ÿæˆäº†å¡«å……æ°´åŸŸçš„æµ·æ´‹å¤šè¾¹å½¢ï¼Œä½¿å¾—é™†åœ°éƒ¨åˆ†ä¸ºç©ºã€‚æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯å¤§ä¸åˆ—é¢ å²›åº”åœ¨çš„ä½ç½®çš„æµ·æ´‹ç©ºæ´â€”â€”å¦‚æœä½ ç‚¹å‡»å²›å±¿ï¼Œä½ ä¼šå‘ç°æ²¡æœ‰ç‰¹å¾ï¼Œè¿é™†åœ°éƒ½æ²¡æœ‰ã€‚

æˆ‘ä»¬è¯¥å¦‚ä½•å¤„ç†åˆ‡å‰²æµ·æ´‹æ•ˆæœï¼Ÿæˆ‘ä»¬æ— æ³•å¡«è¡¥ç©ºæ´ï¼Œä½†å¯¹æˆ‘ä»¬æ¥è¯´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹èƒŒæ™¯å’Œé™†åœ°è¾¹ç•Œè¿›è¡Œæ ·å¼è®¾ç½®ã€‚é€šå¸¸è¿™ä¼šé€šè¿‡ç»™é™†åœ°å‘¨å›´çš„æµ·æ´‹è®¾ç½®æ ·å¼æ¥å®Œæˆï¼Œä»¥ä½¿èƒŒæ™¯å¡«å……é™†åœ°ã€‚æˆ‘ä»¬éœ€è¦åè¿‡æ¥åšï¼Œä¸ºçˆ±å°”å…°å²›åŒ…æ‹¬ä¸€ä¸ªé™†åœ°å¤šè¾¹å½¢ï¼Œä»¥å¯¹èƒŒæ™¯è¿›è¡Œæ ·å¼è®¾ç½®å’Œå¯¹æ¯”ã€‚

åœ¨åˆ›å»ºæ ·å¼æ–‡ä»¶ä¹‹å‰ï¼Œéœ€è¦åšä¸€äº›æ›´æ”¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨é¢å¤–çš„ç‰¹å¾æ¥è¡¥å……æ•°æ®â€”â€”çˆ±å°”å…°çš„é™†åœ°é¢ç§¯ã€‚

åˆ‡ç‰‡é›†è¿˜æœ‰ä¸€ä¸ªç¨å¾®ä¸é‚£ä¹ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œä½†åœ¨æ”¾å¤§æ—¶ä¼šçœ‹åˆ°ã€‚

![](img/f61c0260c556546df0260d4c4855d094.png)

æ³¨æ„åˆ°å¿ç•Œï¼ˆç²‰è‰²ï¼‰åœ¨ç¼©æ”¾çº§åˆ« 4 ä¹‹åæ¶ˆå¤±ã€‚åœ¨ç¼©æ”¾çº§åˆ« 1-4 ä¹‹é—´ï¼ŒPlanetiler OpenMapTiles æ¨¡å¼ä½¿ç”¨ Natural Earth çš„æ•°æ®è€Œé OSM æ¥ç”Ÿæˆåœ°çƒçš„ä½åˆ†è¾¨ç‡åœ°å›¾ã€‚ç¼©æ”¾çº§åˆ« 4 ä¹‹åï¼Œä½¿ç”¨çš„æ˜¯ OpenStreetMap çš„æ•°æ®ã€‚ç”±äºæˆ‘ä»¬ä»ç¼©æ”¾çº§åˆ« 4 å¼€å§‹ç”Ÿæˆåˆ‡ç‰‡ï¼Œè¿™ä¸€ç‚¹å¾ˆæ˜æ˜¾ã€‚

ç”±äº Planetiler OpenMapTiles æ¨¡å¼é€‚ç”¨äºæ•´ä¸ªæ˜Ÿçƒï¼Œä¸å¯é¿å…åœ°åœ¨å›½å®¶ä¹‹é—´å­˜åœ¨ä¸€äº›ä¸ä¸€è‡´æ€§ã€‚çˆ±å°”å…°å¿ç•Œè¢«ä» OSM æ•°æ®ä¸­è¿‡æ»¤æ‰å°±æ˜¯è¿™äº›ä¸ä¸€è‡´æ€§ä¹‹ä¸€ã€‚æˆ‘ä»¬çš„åœ°å›¾ç‰¹åˆ«æ˜¯å…³äºçˆ±å°”å…°çš„ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›æŠŠå®ƒåšå¯¹ã€‚

é™¤äº†ä¸ä¸€è‡´æ€§å¤–ï¼Œå¿ç•Œåœ¨çˆ±å°”å…°åœ°å›¾ä¸Šæ˜¯ä¸€ä¸ªé‡è¦ç‰¹å¾ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ‰€æœ‰ç¼©æ”¾çº§åˆ«ä¸­éƒ½åŒ…æ‹¬å®ƒã€‚

ç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»ç¼©æ”¾çº§åˆ« 4 å¼€å§‹ï¼Œå°† Natural Earth çš„å¿ç•Œæ·»åŠ å›åˆ‡ç‰‡é›†ä¸­ã€‚

## ä¿®æ”¹åˆ‡ç‰‡é›†

[**Tippecanoe**](https://github.com/felt/tippecanoe) æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç”¨äºå¤„ç† MBTiles åˆ‡ç‰‡é›†ã€‚å®ƒå…è®¸æˆ‘ä»¬ä» GeoJSON æ•°æ®åˆ›å»º mbtilesï¼Œå¹¶å°† MBtiles æ–‡ä»¶åˆå¹¶åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬åªéœ€è¦æ‰€éœ€çš„é¢å¤–æ•°æ®ï¼ˆGeoJSON æ ¼å¼ï¼‰ï¼Œå°±å¯ä»¥å°†æ‰€éœ€çš„ç‰¹å¾åˆå¹¶åˆ°åˆ‡ç‰‡é›†ä¸­ã€‚

[](https://github.com/felt/tippecanoe?source=post_page-----4069c01e26ac--------------------------------) [## GitHub - felt/tippecanoe: ä»å¤§å‹ GeoJSON ç‰¹å¾é›†åˆä¸­æ„å»ºçŸ¢é‡åˆ‡ç‰‡é›†ã€‚

### ä»å¤§å‹ GeoJSON ç‰¹å¾é›†åˆä¸­æ„å»ºçŸ¢é‡åˆ‡ç‰‡é›†ã€‚- GitHub - felt/tippecanoe: ä»å¤§å‹ GeoJSON ç‰¹å¾é›†åˆä¸­æ„å»ºçŸ¢é‡åˆ‡ç‰‡é›†â€¦

[**GitHub - felt/tippecanoe**](https://github.com/felt/tippecanoe?source=post_page-----4069c01e26ac--------------------------------)

ä¸ºäº†è·å–è¡¨ç¤ºçˆ±å°”å…°çš„å¤šè¾¹å½¢â€”â€”æˆ–æ›´å¯èƒ½æ˜¯å¤šå¤šè¾¹å½¢ï¼Œæ„Ÿè°¢å…¶å²›å±¿â€”â€”æˆ‘è½¬å‘ OpenStreetMapï¼Œç‰¹åˆ«æ˜¯[Overpass Turbo](https://overpass-turbo.eu/)ã€‚ä¸ç«‹å³æ¸…æ¥šæˆ‘ä»¬éœ€è¦å“ªä¸ªç‰¹å¾ï¼ˆçˆ±å°”å…°å²›ï¼Ÿçˆ±å°”å…°å’ŒåŒ—çˆ±å°”å…°ï¼Ÿï¼‰ï¼Œå› æ­¤éœ€è¦ä¸€äº›æ¢ç´¢ã€‚

é€šè¿‡åœ¨[openstreetmap.org](https://www.openstreetmap.org/)ä¸Šä½¿ç”¨â€˜æŸ¥è¯¢ç‰¹å¾â€™å·¥å…·ï¼Œæˆ‘èƒ½å¤Ÿæ‰¾åˆ°ä¸¤ä¸ªå…³ç³»ï¼Œå½“å®ƒä»¬ç»“åˆæ—¶ï¼Œç»“æœæ­£æ˜¯æˆ‘æ‰€éœ€è¦çš„ç‰¹å¾ã€‚é€šè¿‡æ£€æŸ¥æ ‡ç­¾ï¼Œæˆ‘å¯ä»¥åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢ä»¥ä¾› Overpass ä½¿ç”¨ã€‚

ä½¿ç”¨**Overpass Turbo**è·å–ä¸¤ä¸ªç‰¹å¾å¦‚ä¸‹æ‰€ç¤ºï¼š

![](img/7f751f4fd2ba3c1d59a8bd059d9f833d.png)

Overpass Turbo çš„æˆªå›¾ï¼Œæ˜¾ç¤ºäº†çˆ±å°”å…°å’Œé˜¿å°”æ–¯ç‰¹çš„å…³ç³»

æŸ¥è¯¢ï¼š

```py
[out:json][timeout:25];
(
  relation["ref"="IE0"];
  relation["boundary"="historic"]["name"="Ulster"];
);
out body;
>;
out skel qt;
```

å¯¼å‡ºæŒ‰é’®å…è®¸æˆ‘ä»¬å°†ç»“æœä¿å­˜ä¸º GeoJSON æ–‡ä»¶ã€‚å‰©ä¸‹çš„å°±æ˜¯åˆå¹¶è¿™ä¸¤ä¸ªç‰¹å¾ï¼Œä»¥ä¾¿å¾—åˆ°ä¸€ä¸ª MultiPolygonã€‚

å¿ç•Œçº¿å¯ä»¥ä»[Natural Earth ç½‘ç«™](https://www.naturalearthdata.com/downloads/10m-cultural-vectors/)ä¸‹è½½ã€‚å®é™…ä¸Šï¼ŒPlanetiler å·²ç»ä¸ºä½ ä¸‹è½½äº† Natural Earth æ•°æ®çš„å‰¯æœ¬ï¼Œä½†ç”±äºæˆ‘ä»¬åªéœ€è¦å›½å®¶è¾¹ç•Œï¼Œå•ç‹¬ä¸‹è½½æ­¤æå–æ–‡ä»¶ä¼šæ›´ç®€å•ã€‚æ–‡ä»¶åä¸º*Admin 1 â€” States, Provinces*ï¼Œä¸‹è½½é“¾æ¥å¦‚ä¸‹ï¼š

[`www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_1_states_provinces.zip`](https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_1_states_provinces.zip)

ä½ å¯ä»¥åœ¨è¿™ä¸ªé¡¹ç›®çš„[GeoJSON æ–‡ä»¶ç¤ºä¾‹ç¬”è®°æœ¬](https://github.com/mmc1718/webmap-ireland/blob/main/notebooks/ireland_outline_counties.ipynb)ä¸­æ‰¾åˆ°å‡†å¤‡ä¸¤ä¸ª GeoJSON æ–‡ä»¶çš„ä¾‹å­ã€‚

ä¸€æ—¦ GeoJSON æ–‡ä»¶å‡†å¤‡å¥½åï¼Œä½ å¯ä»¥ä» GitHub å…‹éš†[Tippecanoe repo](https://github.com/felt/tippecanoe)ï¼Œå¹¶ä½¿ç”¨ Docker æ„å»ºé•œåƒæˆ–ä»æºä»£ç å®‰è£…ï¼ˆè¯·å‚é˜… README è·å–è¯´æ˜ï¼‰ã€‚æˆ‘ç”¨äºå°†æ•°æ®åˆå¹¶åˆ°æˆ‘çš„ tileset ä¸­çš„å‘½ä»¤å¦‚ä¸‹ï¼š

```py
# convert the files to mbtiles
tippecanoe -o ireland_outline.mbtiles -f ireland.geojson
tippecanoe -o ireland_counties.mbtiles -f counties.geojson

# merge the mbtiles into the main tileset
tile-join -o "ireland_1.mbtiles" --name="OpenMapTiles" -pk -f ireland_and_northern_ireland.mbtiles ireland_outline.mbtiles
tile-join -o "ireland_final.mbtiles" --name="OpenMapTiles" -pk -f ireland_1.mbtiles ireland_counties.mbtiles
```

ä½¿ç”¨ Tileserver é¢„è§ˆåˆå¹¶æ–°æ•°æ®åçš„æ–°å›¾å—æ—¶ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°äº†ä¸€äº›å˜åŒ–ã€‚

æç¤ºï¼šè¿è¡Œ Tileserver æ—¶ï¼Œè¯·ç¡®ä¿ä½¿ç”¨çš„æ˜¯æ­£ç¡®çš„ mbtiles æ–‡ä»¶ï¼Œå³ä½ ä½¿ç”¨ Tippecanoe åˆ›å»ºçš„æ–‡ä»¶ã€‚è¿è¡Œ Tileserver æ—¶ä½¿ç”¨å‚æ•°`--mbtiles`æ¥æŒ‡å®šæ–‡ä»¶ã€‚

![](img/17d7441d51a350009b991bbcec93d8c0.png)

æœªæ ·å¼åŒ–çš„çŸ¢é‡æ•°æ®è§†å›¾ï¼ŒåŒ…æ‹¬çˆ±å°”å…°å’Œå¿ç•Œå±‚

å›¾ä¾‹æä¾›äº†ä¸€ç§å¿«é€ŸéªŒè¯æˆ‘ä»¬æ–°å›¾å±‚æ˜¯å¦å­˜åœ¨çš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ä¸¤ä¸ªæ–°å›¾å±‚ï¼›â€˜irelandâ€™å’Œâ€˜counties*â€™*ã€‚

# æ ·å¼åŒ–åŸºç¡€åœ°å›¾

## åˆ›å»º JSON æ ·å¼æ–‡ä»¶

ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½åŸºç¡€ tilesetï¼Œå‡†å¤‡å¼€å§‹æ ·å¼åŒ–ã€‚å½“åˆ¶ä½œæ ·å¼æ—¶ï¼Œæˆ‘é€‰æ‹©çªå‡ºè‡ªç„¶ç‰¹å¾å¦‚å±±è„‰ï¼Œå‡å°‘å¯¹å¦‚é«˜é€Ÿå…¬è·¯ç­‰äººé€ åŸºç¡€è®¾æ–½çš„å…³æ³¨ï¼Œä»¥ä¿æŒæ²¼æ³½ä¸»é¢˜ã€‚

å¦‚æœä½ å¯¹åœ°å›¾æ ·å¼ä¸ç†Ÿæ‚‰ï¼Œå®ƒä»¬æ˜¯åŒ…å«æœ‰å…³å¦‚ä½•æ ·å¼åŒ–åˆ‡ç‰‡é›†ä¸­çŸ¢é‡æ•°æ®çš„ä¿¡æ¯çš„ JSON æ–‡æ¡£ã€‚ [**Maputnik**](https://maputnik.github.io/) æ˜¯ä¸€ä¸ªæ ·å¼ç¼–è¾‘å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œç¼–è¾‘æ ·å¼ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨å·¥ä½œæ—¶é¢„è§ˆæ ·å¼å’ŒåŸå§‹æ•°æ®ã€‚å®ƒæ˜¯ Mapbox æ ·å¼ç¼–è¾‘å™¨çš„ä¸€ä¸ªå¼€æºæ›¿ä»£å“ï¼Œå¯ä»¥ä½¿ç”¨å…¬å¼€çš„ Docker é•œåƒè¿è¡Œã€‚

[](https://github.com/maputnik/editor?source=post_page-----4069c01e26ac--------------------------------) [## GitHub - maputnik/editor: ä¸€ä¸ªå¼€æºçš„è§†è§‰ç¼–è¾‘å™¨ï¼Œç”¨äº'Mapbox Style Specification'

### ä¸€ä¸ªå¼€æºçš„è§†è§‰ç¼–è¾‘å™¨ï¼Œç”¨äº'Mapbox Style Specification' - GitHub - maputnik/editor: ä¸€ä¸ªå¼€æºçš„è§†è§‰â€¦

github.com](https://github.com/maputnik/editor?source=post_page-----4069c01e26ac--------------------------------)

ä¸€æ—¦ Maputnik æ‰“å¼€ï¼Œæ‰“å¼€ä¸€ä¸ªç©ºç™½æ ·å¼ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è¿æ¥åˆ°æˆ‘ä»¬çš„åˆ‡ç‰‡é›†ã€‚è¿™æ˜¯é€šè¿‡â€˜æ•°æ®æºâ€™é€‰é¡¹å¡å®Œæˆçš„ã€‚ä½ éœ€è¦å¤åˆ¶ä½ çš„ TileJSON æ–‡ä»¶çš„é“¾æ¥ â€”â€” ä½¿ç”¨ Tileserver å¯ä»¥æŸ¥çœ‹ â€”â€” å¹¶å°†å…¶ç²˜è´´åˆ° `#OpenMapTiles` æ´»è·ƒçš„æ•°æ®æºä¸­ã€‚TileJSON æ–‡ä»¶æ˜¯ä¸€ä¸ªåŒ…å«æœ‰å…³ä½ çš„åˆ‡ç‰‡é›†ä¿¡æ¯çš„ JSON å…ƒæ•°æ®æ–‡ä»¶ï¼ŒåŒ…æ‹¬æº URLã€‚

![](img/af62051af037826a81fe2bae5a6f2444.png)

Maputnik æˆªå›¾ï¼Œæ˜¾ç¤ºäº† Sources çª—å£

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥èƒ½å¤Ÿå°†è§†å›¾ä»â€˜åœ°å›¾â€™åˆ‡æ¢åˆ°â€˜æ£€æŸ¥â€™ï¼Œå¹¶åœ¨å±å¹•ä¸Šçœ‹åˆ°ä½ çš„æ•°æ®ã€‚æ•°æ®å°†ç±»ä¼¼äºä½¿ç”¨ Tileserver æŸ¥çœ‹çš„åŸå§‹æ•°æ®ã€‚åœ¨ä½ åˆ›å»ºäº†ä¸€äº›æ ·å¼å›¾å±‚ä¹‹å‰ï¼Œä½ çš„â€˜åœ°å›¾â€™è§†å›¾å°†åªæ˜¾ç¤ºä¸€ä¸ªç©ºç™½å±å¹•ã€‚

![](img/141d2f4ba24e4005b9b4bc7af3afd5f2.png)

åœ¨ Maputnik ä¸­åˆ‡æ¢åœ°å›¾å’Œæ£€æŸ¥è§†å›¾

æŒ‡å®šç‰¹å¾æ ·å¼çš„æ–¹å¼æ˜¯é€šè¿‡æ ·å¼å›¾å±‚å®Œæˆçš„ã€‚è¿™äº›å›¾å±‚å¯ä»¥åœ¨ Maputnik çš„ä¾§è¾¹é¢æ¿ä¸­ç¼–è¾‘ï¼Œå¹¶å°†è¢«è½¬æ¢ä¸ºæˆ‘ä»¬æœ€ç»ˆæ ·å¼ JSON æ–‡ä»¶ä¸­çš„â€˜layersâ€™å­—æ®µä¸­çš„ JSON å¯¹è±¡ã€‚ç‚¹å‡»â€˜æ·»åŠ å›¾å±‚â€™æŒ‰é’®å¼€å§‹æ“ä½œã€‚

ç¬¬ä¸€ä¸ªåˆ›å»ºçš„å›¾å±‚é€šå¸¸æ˜¯èƒŒæ™¯ã€‚ä¹‹åï¼Œæ ¹æ®éœ€è¦æ·»åŠ å›¾å±‚ä»¥å®šä½ä¸åŒçš„ç‰¹å¾ã€‚æ³¨æ„å›¾å±‚çš„é¡ºåºä¼šæœ‰æ‰€ä¸åŒ â€”â€” ç‰¹å¾å°†æ ¹æ®æ ·å¼é¡ºåºæ˜¾ç¤ºåœ¨å½¼æ­¤çš„ä¸Šæ–¹æˆ–ä¸‹æ–¹ã€‚

æ ·å¼å›¾å±‚å½±å“å“ªäº›ç‰¹å¾å–å†³äºå…¶æºï¼ˆç‰¹å¾æ‰€åœ¨çš„æ•°æ®å±‚ï¼Œä¾‹å¦‚è¿è¾“æˆ–åœŸåœ°ä½¿ç”¨ï¼‰ä»¥åŠæˆ‘ä»¬è®¾ç½®çš„è¿‡æ»¤å™¨ã€‚ä½ å¯ä»¥åœ¨åˆ›å»ºå›¾å±‚æ—¶æŒ‡å®šè¿™ä¸€ç‚¹ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿‡æ»¤è¾¹ç•Œæ ·å¼å›¾å±‚ï¼Œä»¥ä»…å½±å“è¾¹ç•Œæºå›¾å±‚ä¸­çš„é™†åœ°è¾¹ç•Œï¼Œé€šè¿‡ä½¿ç”¨ maritime æ ‡ç­¾å¿½ç•¥æµ·æ´‹è¾¹ç•Œï¼š

![](img/c9154a6b2b79503b53f820b81a0dc2d1.png)

åœ¨ Maputnik ä¸­æŸ¥çœ‹çš„å¿ç•Œæ ·å¼é€‰é¡¹

åœ¨ JSON ä¸­ï¼Œè¿™ä¸ªå­—æ®µæœ€ç»ˆå˜æˆå¦‚ä¸‹ï¼š

```py
 "filter": [
    "all",
    ["!=", "maritime", 1],
    [">", "admin_level", 2],
    ["<", "admin_level", 8]
  ],
```

åœ¨åº•éƒ¨çš„ä¾§è¾¹é¢æ¿ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°åŸå§‹ JSON çš„æ ·å­ã€‚

è¯·æ³¨æ„ï¼Œå¤šä¸ªæ ·å¼è¡¨å¯ä»¥å½±å“ç›¸åŒçš„ç‰¹å¾ã€‚è¿™ä½¿å¾—èƒ½å¤Ÿæ¸²æŸ“ç›¸åŒç‰¹å¾çš„ä¸åŒç‰ˆæœ¬ï¼Œä¾‹å¦‚ä¸€ä¸ªç‚¹ç‰¹å¾å¯ä»¥åŒæ—¶æ˜¾ç¤ºä¸ºæ ‡ç­¾å’Œå›¾åƒã€‚

ä½¿ç”¨ Maputnik åˆ›å»ºçš„æ ·å¼éµå¾ª Mapbox æ ·å¼è§„èŒƒï¼Œå› æ­¤å¦‚æœæœ‰ç–‘é—®ï¼Œä½ å¯ä»¥ [æŸ¥çœ‹æ–‡æ¡£](https://docs.mapbox.com/mapbox-gl-js/style-spec/)ã€‚

ä½ å¯ä»¥åœ¨ [è¿™é‡Œ](https://github.com/mmc1718/webmap-ireland/blob/main/tileserver/styles/ireland.json) æŸ¥çœ‹æˆ‘æœ€ç»ˆçš„æ ·å¼ã€‚

åœ¨çº¿æœ‰å¤§é‡å…³äºåˆ¶å›¾çš„æç¤ºä¿¡æ¯ã€‚Esri å‘å¸ƒäº† [ä¸€ä»½åœ¨çº¿èµ„æºåˆ—è¡¨](https://www.esri.com/arcgis-blog/products/product/mapping/favorite-tools-and-resources-for-cartographers/)ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚

è¯·æ³¨æ„ï¼Œæˆ‘ä¸ºæ ·å¼æ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„è¿œç¨‹å­—ä½“å’Œç²¾çµï¼ˆå¾½æ ‡æˆ–å›¾åƒï¼‰æºã€‚è¿™å¯ä»¥åœ¨ Maputnik çš„æºçª—å£ä¸­å®Œæˆï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ·»åŠ äº†æˆ‘ä»¬çš„å›¾å—æºã€‚æˆ‘ä½¿ç”¨çš„æºæ˜¯ `https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf` ç”¨äºå­—ä½“å’Œ `https://openmaptiles.github.io/osm-bright-gl-style/sprite` ç”¨äºç²¾çµã€‚ï¼ˆæŸ¥çœ‹ Orange Mug çš„è‡ªå®šä¹‰å­—ä½“åº“ [`github.com/orangemug/font-glyphs`](https://github.com/orangemug/font-glyphs)ï¼‰

## æä¾›æ ·å¼åœ°å›¾å›¾å—

ä¸€æ—¦ä½ çš„æ ·å¼å‡†å¤‡å¥½ï¼Œä» Maputnik ä¸‹è½½å®ƒå¹¶ä¿å­˜åœ¨ä¸ä½ çš„ MBTiles å›¾å—é›†ç›¸åŒçš„ç›®å½•ä¸­ã€‚æˆ‘ä»¬éœ€è¦ä¸º Tileserver åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨æä¾›å›¾å—æ—¶å®ƒå¯ä»¥æ‰¾åˆ°ä½ çš„è‡ªå®šä¹‰æ ·å¼ã€‚

åˆ›å»ºä¸€ä¸ªåä¸º config.json çš„æ–°æ–‡ä»¶ï¼Œå¹¶ç¡®ä¿å…¶åŒ…å«å¦‚ä¸‹å†…å®¹ã€‚

```py
{
    "options": {
      "paths": {
        "root": "",
        "fonts": "/usr/src/app/node_modules/tileserver-gl-styles/fonts",
        "styles": "styles",
        "mbtiles": ""
      }
    },
    "styles": {
      "natural": {
        "style": "ireland.json",
        "tilejson": {
          "bounds": [
            -16.325684,
            47.960502,
            -5.053711,
            56.872996
          ]
        }
      }
    },
    "data": {
      "v3": {
        "mbtiles": "ireland.mbtiles"
      }
    }
  }
```

è¿™ä¸ªé…ç½®æ–‡ä»¶å°†åŠ è½½ä¸€ä¸ªåä¸º ireland.mbtiles çš„ mbtiles æ–‡ä»¶ï¼ˆä½¿ç”¨åœ¨é€‰é¡¹ -> è·¯å¾„ -> mbtiles ä¸‹å®šä¹‰çš„è·¯å¾„ï¼‰ã€‚Tileserver å°†æŸ¥æ‰¾åœ¨æ ·å¼ç›®å½•ï¼ˆé€‰é¡¹ -> è·¯å¾„ -> stylesï¼‰ä¸­åä¸º ireland.json çš„æ ·å¼æ–‡ä»¶æ¥æä¾›æœåŠ¡ã€‚è¯·æ³¨æ„ï¼Œå­—ä½“ã€æ ·å¼å’Œ mbtiles çš„è·¯å¾„å‡å®šæ˜¯ç›¸å¯¹äºæ ¹ç›®å½•çš„ã€‚

åœ¨åŒ…å«æ–°é…ç½®æ–‡ä»¶çš„ç›®å½•ä¸­é‡æ–°å¯åŠ¨ Tileserver å°†ä½¿æˆ‘ä»¬æ–°çš„æ ·å¼åœ¨ localhost:8080 ä¸Šå¯ä¾›æŸ¥çœ‹ã€‚

æç¤ºï¼šå¦‚æœä½ å¸Œæœ›ä½ çš„å›¾å—åœ¨ localhost ä¹‹å¤–çš„åœ°æ–¹å¯ç”¨ï¼Œä½ éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŒ…å«â€˜domainsâ€™ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚è§ [Tileserver æ–‡æ¡£](https://tileserver.readthedocs.io/en/latest/config.html)ã€‚

# åˆ›å»º Web åœ°å›¾

## åŠ è½½åŸºç¡€åœ°å›¾

æˆ‘ä»¬å·²ç»æœ‰äº†åŸºç¡€åœ°å›¾å’Œæ ·å¼ã€‚ç°åœ¨å‰©ä¸‹çš„å°±æ˜¯å°†æ•°æ®å åŠ åˆ°åœ°å›¾ä¸Šã€‚æˆ‘æœ‰ä¸¤ä¸ªå…³äºçˆ±å°”å…°æ²¼æ³½çš„æ•°æ®æ–‡ä»¶ã€‚æˆ‘å‡†å¤‡æ•°æ®çš„æ­¥éª¤å¯ä»¥åœ¨ [GitHub](https://github.com/mmc1718/webmap-ireland/tree/main/notebooks) ä¸ŠæŸ¥çœ‹ã€‚

æˆ‘ä½¿ç”¨ [Maplibre](https://maplibre.org/) æ¥åˆ›å»ºæˆ‘çš„åœ°å›¾ã€‚Maplibre æ˜¯ Mapbox GL JS çš„å¼€æºæ›¿ä»£å“ï¼Œéå¸¸ç›¸ä¼¼ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ HTML æ–‡ä»¶ä¸­æ·»åŠ  JavaScript è„šæœ¬ï¼Œæˆ–è€…ä½¿ç”¨ JavaScript æ–‡ä»¶å¹¶å¯¼å…¥å®ƒã€‚

æŒ‰ç…§[Maplibre æ–‡æ¡£](https://maplibre.org/maplibre-gl-js/docs/)ä¸­çš„ç¤ºä¾‹ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ã€‚åŒ…å«ä¸€ä¸ª`<script>`æ ‡ç­¾ï¼Œæ ‡ç­¾å†…çš„ä»£ç å°†ä½¿ç”¨æ–°åˆ›å»ºçš„è‡ªå®šä¹‰åº•å›¾åˆ›å»ºåœ°å›¾å®ä¾‹ã€‚

```py
 <div id="map"></div>
<script>

const map = new maplibregl.Map({
    container: "map",
    // stylesheet location
    style: "http://localhost:8080/styles/natural/style.json",
    center: [-8, 53], // starting position [lng, lat]
    zoom: 7, // starting zoom
    minZoom: 6,
    maxBounds: [
        [-17.7, 46.6],
        [2.7, 58.6],
    ],
});

</script>
```

æ³¨æ„ï¼Œæˆ‘åœ¨â€˜styleâ€™å­—æ®µä¸­åŒ…å«äº†ç”± Tileserver æä¾›çš„æ ·å¼æ–‡ä»¶é“¾æ¥ã€‚

è®¾ç½®è¾¹ç•Œæ„å‘³ç€ç”¨æˆ·å°†æ— æ³•å°†åœ°å›¾å¹³ç§»åˆ°å®šä¹‰çš„è¾¹ç•Œæ¡†åæ ‡ä¹‹å¤–ï¼Œè¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•°æ®ä»…é™äºåœ°å›¾ä¸Šçš„ä¸€ä¸ªå°åŒºåŸŸã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä»¥å¹³ç§»æ•´ä¸ªä¸–ç•Œï¼Œè¿™åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹ä¾¿çš„å·¥å…·æ‰¾åˆ°è‡ªå®šä¹‰è¾¹ç•Œï¼š[`norbertrenner.de/osm/bbox.html`](https://norbertrenner.de/osm/bbox.html)ã€‚

è¦æŸ¥çœ‹æˆ‘ä»¬çš„é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª Web æœåŠ¡å™¨ã€‚æˆ‘ä½¿ç”¨[VSCode çš„ Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer) æ‰©å±•æ¥å¿«é€ŸæŸ¥çœ‹å¼€å‘ä¸­çš„ç½‘é¡µã€‚å®ƒå¯ä»¥å…è´¹å®‰è£…ï¼Œå¹¶ä¸”æ„å‘³ç€ä½ åªéœ€ç‚¹å‡»ä¸€ä¸‹æŒ‰é’®å³å¯æä¾› Web åº”ç”¨ã€‚åŠ è½½é¡µé¢å°†æ˜¾ç¤ºæˆ‘ä»¬çš„åº•å›¾ï¼š

![](img/8b09e5c4d3090e556143ab75257f3435.png)

ä½œè€…æ ·å¼çš„çˆ±å°”å…°åº•å›¾

## åœ¨åœ°å›¾ä¸Šå åŠ æ•°æ®

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ•°æ®å›¾å±‚æ·»åŠ åˆ°åœ°å›¾ä¸­ã€‚åŒæ ·ï¼ŒMaplibre ç½‘ç«™æä¾›äº†è®¸å¤šç¤ºä¾‹ï¼Œæ¶µç›–äº†åˆ›å»ºåœ°å›¾æ—¶å¯èƒ½é‡åˆ°çš„å„ç§åœºæ™¯ã€‚

è¦åŠ è½½ GeoJSON æ–‡ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å°†æ–‡ä»¶è·¯å¾„æ·»åŠ ä¸ºæºã€‚å®šä¹‰æ–‡ä»¶æºåï¼Œæˆ‘ä»¬å¯ä»¥å°†å…·æœ‰æ ·å¼é€‰é¡¹çš„å›¾å±‚æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚è¿™ä¸€åˆ‡éƒ½åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å®Œæˆï¼Œè¯¥å‡½æ•°åœ¨åœ°å›¾çš„â€œåŠ è½½â€äº‹ä»¶è§¦å‘æ—¶è¿è¡Œï¼ˆè¿™å°±æ˜¯`map.on(â€œload" â€¦)`çš„æ„æ€ï¼‰ã€‚æˆ‘å°†æ–°å‡½æ•°å‘½åä¸º`setUpMap`å¹¶å°†å…¶ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™`map.on(â€œload")`ã€‚

```py
function setUpMap() {
  map.addSource("peat_bogs", {
      type: "geojson",
      data: "data/ireland_peat_bogs_2012.geojson",
  });
  map.addSource("lost_bogs", {
      type: "geojson",
      data: "data/peat_bog_loss.geojson",
      // required for smooth rendering while zooming
      tolerance: 0,
  });

  map.addLayer({
      id: "peat_bogs",
      type: "fill",
      source: "peat_bogs",
      paint: {
          "fill-color": "#92a94a",
          "fill-opacity": 0.4,
      },
  });

  map.addLayer({
      id: "lost_bogs",
      type: "fill",
      source: "lost_bogs",
      paint: {
          "fill-color": "#744333",
          "fill-opacity": 0.4,
      },
  })
};

map.on("load", setUpMap);
```

æ¯ä¸ªå›¾å±‚ä½¿ç”¨ä¸åŒçš„é¢œè‰²è¿›è¡Œæ ·å¼è®¾ç½®ï¼Œå¹¶ä¸”ç¨å¾®é€æ˜ï¼Œä»¥ä¾¿åŸºç¡€åœ°å›¾ä¸­çš„åœ°ç‚¹æ ‡ç­¾å’Œç»†èŠ‚èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚æˆ‘ä½¿ç”¨äº†[è¿™ä¸ªæ–¹ä¾¿çš„å·¥å…·](https://www.colorhexa.com/647433)æ¥é€‰æ‹©å’Œæ¯”è¾ƒé¢œè‰²ã€‚

æˆ‘è¿˜ä½¿ç”¨äº†ä¸€ä¸ªåä¸º maplibre-gl-legend çš„æ’ä»¶ï¼Œæ’ä»¶å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š[`github.com/watergis/maplibre-gl-legend`](https://github.com/watergis/maplibre-gl-legend)ã€‚ä»¥ä¸‹ä»£ç å®šä¹‰äº†å›¾ä¾‹ï¼š

```py
 const legendInfo = {
      lost_bogs: "Lost Peat Bog (Derived from Corine Land Cover (CLC) 2000, Version 2020_20u1)",
      peat_bogs: "Peat Bog (Corine Land Cover (CLC) 2012, Version 2020_20u1)",
  };
  map.addControl(
      new MaplibreLegendControl.MaplibreLegendControl(legendInfo, {
          showDefault: true,
          showCheckbox: true,
          onlyRendered: false,
          reverseOrder: true,
          title: "Peat Bog loss in Ireland Between 2000 and 2012",
      }),
      "top-right"
  );j
```

å›¾ä¾‹è¿˜æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œä½¿æˆ‘èƒ½å¤Ÿä¸ºæ•°æ®æºåŒ…å«ç½²åï¼Œè€Œæ— éœ€åœ¨å…¶ä»–åœ°æ–¹æ·»åŠ è¿™ä¸€å†…å®¹ã€‚

æŸ¥çœ‹æœ€ç»ˆç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå®Œæ•´çš„æ²¼æ³½åœ°åœ°å›¾ï¼Œé™„å¸¦äº’åŠ¨å›¾ä¾‹ï¼š

![](img/55218bc6cdf3434c780312d6c6b4090f.png)

çˆ±å°”å…° 2000â€“2012 å¹´é—´æ³¥ç‚­æ²¼æ³½æŸå¤±çš„åœ°å›¾ï¼Œé™„å¸¦å›¾ä¾‹

*æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œå¯ä»¥è€ƒè™‘ç‚¹èµã€å…³æ³¨ä½œè€…æˆ–åœ¨ GitHub ä¸Šç»™é¡¹ç›®åŠ æ˜ŸğŸ‘*
