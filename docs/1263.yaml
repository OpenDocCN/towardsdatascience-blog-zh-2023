- en: 'How to Create Publication-Ready Plots with LaTeX: Part II'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/how-to-create-publication-ready-plots-with-latex-part-ii-11ea811c5c3b?source=collection_archive---------9-----------------------#2023-04-11](https://towardsdatascience.com/how-to-create-publication-ready-plots-with-latex-part-ii-11ea811c5c3b?source=collection_archive---------9-----------------------#2023-04-11)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*Let’s take a look at stacked plots!*'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@aspdata?source=post_page-----11ea811c5c3b--------------------------------)[![Aruna
    Pisharody](../Images/c12797bb32a483da4fe0aff33ff58a63.png)](https://medium.com/@aspdata?source=post_page-----11ea811c5c3b--------------------------------)[](https://towardsdatascience.com/?source=post_page-----11ea811c5c3b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----11ea811c5c3b--------------------------------)
    [Aruna Pisharody](https://medium.com/@aspdata?source=post_page-----11ea811c5c3b--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·
  prefs: []
  type: TYPE_NORMAL
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F5b205ac0c1dc&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-publication-ready-plots-with-latex-part-ii-11ea811c5c3b&user=Aruna+Pisharody&userId=5b205ac0c1dc&source=post_page-5b205ac0c1dc----11ea811c5c3b---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----11ea811c5c3b--------------------------------)
    ·8 min read·Apr 11, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F11ea811c5c3b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-publication-ready-plots-with-latex-part-ii-11ea811c5c3b&user=Aruna+Pisharody&userId=5b205ac0c1dc&source=-----11ea811c5c3b---------------------clap_footer-----------)'
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F11ea811c5c3b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-to-create-publication-ready-plots-with-latex-part-ii-11ea811c5c3b&source=-----11ea811c5c3b---------------------bookmark_footer-----------)![](../Images/5072c9f7f16ab7a3a23fcc6c4141e73a.png)'
  prefs: []
  type: TYPE_NORMAL
- en: Photo by [Isaac Smith](https://unsplash.com/@isaacmsmith?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/6EnTPvPPL6I?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  prefs: []
  type: TYPE_NORMAL
- en: Hello friends! So I’m back with another article on plotting with LaTeX! In case
    you have missed my previous article or would like to jog your memory a bit (I
    know it has been a while since my first article!), you can read it [here](/how-to-create-publication-ready-plots-with-latex-4a095eb2f1bd).
  prefs: []
  type: TYPE_NORMAL
- en: 'In this article, I’ll be walking through one particular kind of plot: stacked
    plots (or, *groupplots* in LaTeX; I’ll be using these two terms interchangeably
    throughout this article). I find these plots to be really useful for many scenarios.
    However, each use case may demand different customizations and I won’t be able
    to cover all of them in a single article. So I thought that I’ll simply focus
    on how to get started with stacked plots in LaTeX. In particular, I’ll be detailing
    how I tackled one of the most frustrating challenges when I first started with
    this type of plot: adding legends to stacked plots!'
  prefs: []
  type: TYPE_NORMAL
- en: So without further ado, let’s get started!
  prefs: []
  type: TYPE_NORMAL
- en: Stacked plots in LaTeX
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Let’s use the same *flights.csv* dataset *(credit: seaborn.pydata.org)* from
    our previous article. However, this time we’ll plot the variation in monthly passenger
    count for 4 consecutive years (1949 — 1952). Using what we learnt last time, we
    can plot the scenario like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/bcae8090cee1fea943140db0d8bec5c3.png)'
  prefs: []
  type: TYPE_IMG
- en: A simple plot (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: The LaTeX code to create this plot is given below.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Although this plot looks good enough as it is, let’s check out how we can separate
    the plot for each year and stack them one upon the other (since that is what was
    promised in the title!).
  prefs: []
  type: TYPE_NORMAL
- en: 'We can use the *groupplot* option for doing this. In this case, we need to
    first replace the `\begin{axis}...\end{axis}` with `\begin{groupplot}...\end{groupplot}`
    . We’ll also need to define some basic styling options for this groupplot; some
    options I’ve included here are size of the groupplot, position of x- and y-axis
    labels and tickmarks, and vertical distance between individual plots in the groupplot.
    Next, we’ll need to add a command `\nextgroupplot` before each `\addplot` command.
    So the complete code will look something like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'And the plot for the code above will look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/7dec8d3926d6f29229236ecd05b84d8f.png)'
  prefs: []
  type: TYPE_IMG
- en: A simple stacked plot without legends (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let’s move on to including legends in this groupplot. For our plot, there
    are three ways we can go about this:'
  prefs: []
  type: TYPE_NORMAL
- en: '*Option 1: Legends inside each individual plot*'
  prefs: []
  type: TYPE_NORMAL
- en: 'For this one, we’ll simply add in a command `\addlegendentry{*year*}` after
    each `\addplot` and we’re done! *Note: If you have multiple* `*\addplot*` *commands
    within one plot, simply add the* `*\addlegendentry{year}*` *command after each*
    `*\addplot*` *.*'
  prefs: []
  type: TYPE_NORMAL
- en: 'The complete code will look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '*Option 2: Add a text node within each plot to specify the corresponding year*'
  prefs: []
  type: TYPE_NORMAL
- en: 'For this, I changed all the plot markers to be the same. Then, we add a node
    to all the individual plots specifying the year for each of them. *(Note: we did
    something similar for the mean plots we made in my previous article).* This node
    can be defined something like this (*You can read about node positioning using
    rel axis cs in more detail in my previous article* [*here*](/how-to-create-publication-ready-plots-with-latex-4a095eb2f1bd)):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Here, I have also specified width of the node for convenience.
  prefs: []
  type: TYPE_NORMAL
- en: 'I find this to be the easier option in this particular case (where we have
    only a single column of data to be plotted in each plot). And this is how the
    complete code will look like for option 2:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '*Option 3: Combine all legend entries into a single legend box*'
  prefs: []
  type: TYPE_NORMAL
- en: 'In this case, I’ll be labelling all individual plots using `\label` command
    like this: `\label{plots:plot1}` , `\label{plots:plot2}` , `\label{plots:plot3}`
    , and `\label{plots:plot4}` . Next, I’ll define the position where I want to place
    my legend box. This can be done by adding in the following lines of code after
    `\end{groupplot}` but before `\end{tikzpicture}` :'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Here, all we’re doing is creating a path spanning the two ends of the first
    plot (or, `c1r1`) in the groupplot (`c1r1.north west` — `c1r1.north east`) and
    defining our legend position (`legendpos`) midway on this path. *Note: the*`*\path*`
    *command draws an “invisible path”. If you wish to see what you’re drawing before
    you place the nodes, just replace* `*\path*` *with either* `*\path[draw]*` *or*
    `*\draw*` *command.*'
  prefs: []
  type: TYPE_NORMAL
- en: 'Once the position is defined, I’ll add in the legends. For this, I have once
    again used the `\node`command to do this (Or, you can use `\matrix` , which is
    abbreviation for `\path node[matrix]`; any of these commands will do the job).
    However, this time I have used a special option `matrix of nodes` in my `\node[]`
    , which as the name implies specifies that I’ll need a matrix of nodes. The syntax
    for specifying this node is something like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'For this groupplot, I have defined the node as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'A few node options that I have added in include `draw` (to make the legend
    box visible) and `inner sep` (to define the space between matrix outer boundary
    and content). I have also added a `yshift` to position the legend away from the
    plot boundaries. The cell contents are self-explanatory. Here is the complete
    code for this option:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Let’s take a look at all the three plot variations we just tried out:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1e5cb93e80023f4c4ab978eefcdb0a6d.png)'
  prefs: []
  type: TYPE_IMG
- en: Stacked plots illustrating three variations for including legends (image by
    author)
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, I would like to do one more modification to this plot to make them more
    aesthetically pleasing. Since we have the same label for the y-axis of every plot,
    let’s just use a single y-axis label for all of them. For this, we could simply
    remove the y-axis label from the groupplot style definitions and add in a node
    with the label centered vertically in the groupplot. We’ll do this by adding in
    the following lines of code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: This is a variation of the `\path` command we used before. Here, I’ll be drawing
    a path from the north west corner of the first plot (`c1r1`) to the south west
    corner of the last plot (`c1r4`) in the groupplot and placing a node midway on
    this path. Here, in addition to shifting the node outside the plot boundaries,
    I have also rotated it by 90 degrees. And the y-label is done!
  prefs: []
  type: TYPE_NORMAL
- en: 'This is what the complete code and plot will look like now. *Note: For brevity,
    I’m only showing the code/plot for one of the plot variations mentioned before
    (option 2). The same* `*\path*` *command will work for the other two plot options
    as well.*'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/a842c7dbbab37d41a37fcfb7edc2dbe5.png)'
  prefs: []
  type: TYPE_IMG
- en: Final stacked plot after After styling legend (option 2) and axis labels (image
    by author)
  prefs: []
  type: TYPE_NORMAL
- en: Thanks for reading! :)
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: And that’s a wrap… for this article!
  prefs: []
  type: TYPE_NORMAL
- en: As always, this is just the tip of the iceberg as far as groupplots are concerned.
    There are many more customizations and complicated stacked plots you can create
    with LaTeX, but this should hopefully suffice to get you started in the right
    direction. Please do drop me a comment on what you would like to see next with
    regards to plotting in LaTeX! So until the next time we meet…
  prefs: []
  type: TYPE_NORMAL
- en: Happy learning!
  prefs: []
  type: TYPE_NORMAL
