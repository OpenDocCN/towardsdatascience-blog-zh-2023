- en: 'Unlocking Data Modeling Success: 3 Must-Have Contextual Tables'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è§£é”æ•°æ®å»ºæ¨¡æˆåŠŸï¼š3ä¸ªå¿…é¡»æ‹¥æœ‰çš„ä¸Šä¸‹æ–‡è¡¨
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/unlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84?source=collection_archive---------17-----------------------#2023-07-06](https://towardsdatascience.com/unlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84?source=collection_archive---------17-----------------------#2023-07-06)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/unlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84?source=collection_archive---------17-----------------------#2023-07-06](https://towardsdatascience.com/unlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84?source=collection_archive---------17-----------------------#2023-07-06)
- en: And how to ingest valuable data for free
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä»¥åŠå¦‚ä½•å…è´¹è·å–æœ‰ä»·å€¼çš„æ•°æ®
- en: '[](https://medium.com/@mattgazzano?source=post_page-----7b9ae9d4ad84--------------------------------)[![Matthew
    Gazzano](../Images/23f154b154d05847c2c13ea17ceb7a57.png)](https://medium.com/@mattgazzano?source=post_page-----7b9ae9d4ad84--------------------------------)[](https://towardsdatascience.com/?source=post_page-----7b9ae9d4ad84--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----7b9ae9d4ad84--------------------------------)
    [Matthew Gazzano](https://medium.com/@mattgazzano?source=post_page-----7b9ae9d4ad84--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@mattgazzano?source=post_page-----7b9ae9d4ad84--------------------------------)[![Matthew
    Gazzano](../Images/23f154b154d05847c2c13ea17ceb7a57.png)](https://medium.com/@mattgazzano?source=post_page-----7b9ae9d4ad84--------------------------------)[](https://towardsdatascience.com/?source=post_page-----7b9ae9d4ad84--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----7b9ae9d4ad84--------------------------------)
    [Matthew Gazzano](https://medium.com/@mattgazzano?source=post_page-----7b9ae9d4ad84--------------------------------)'
- en: Â·
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·
- en: '[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F626000912ce9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84&user=Matthew+Gazzano&userId=626000912ce9&source=post_page-626000912ce9----7b9ae9d4ad84---------------------post_header-----------)
    Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----7b9ae9d4ad84--------------------------------)
    Â·6 min readÂ·Jul 6, 2023[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7b9ae9d4ad84&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84&user=Matthew+Gazzano&userId=626000912ce9&source=-----7b9ae9d4ad84---------------------clap_footer-----------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[å…³æ³¨](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F626000912ce9&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84&user=Matthew+Gazzano&userId=626000912ce9&source=post_page-626000912ce9----7b9ae9d4ad84---------------------post_header-----------)
    å‘è¡¨åœ¨ [Towards Data Science](https://towardsdatascience.com/?source=post_page-----7b9ae9d4ad84--------------------------------)
    Â·6åˆ†é’Ÿé˜…è¯»Â·2023å¹´7æœˆ6æ—¥[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F7b9ae9d4ad84&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84&user=Matthew+Gazzano&userId=626000912ce9&source=-----7b9ae9d4ad84---------------------clap_footer-----------)'
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7b9ae9d4ad84&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84&source=-----7b9ae9d4ad84---------------------bookmark_footer-----------)![](../Images/7728d2da0190159ba9678148bdb1db24.png)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7b9ae9d4ad84&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Funlocking-data-modeling-success-3-must-have-contextual-tables-7b9ae9d4ad84&source=-----7b9ae9d4ad84---------------------bookmark_footer-----------)![](../Images/7728d2da0190159ba9678148bdb1db24.png)'
- en: '[Photo](https://unsplash.com/photos/PkbZahEG2Ng) by [Tobias Fischer](https://unsplash.com/@tofi)
    on [Unsplash](https://unsplash.com/)'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[ç…§ç‰‡](https://unsplash.com/photos/PkbZahEG2Ng) ç”± [Tobias Fischer](https://unsplash.com/@tofi)
    æä¾›ï¼Œæ¥è‡ª [Unsplash](https://unsplash.com/)'
- en: Data modeling can be a challenging task for analytics teams. With unique business
    entities in every organization, finding the right structure and granularity for
    each table becomes open-ended. But fear not! Some of the data you need is simplistic,
    free, and occupies minimal storage.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®å»ºæ¨¡å¯¹äºåˆ†æå›¢é˜Ÿæ¥è¯´å¯èƒ½æ˜¯ä¸€é¡¹å…·æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ã€‚ç”±äºæ¯ä¸ªç»„ç»‡éƒ½æœ‰ç‹¬ç‰¹çš„ä¸šåŠ¡å®ä½“ï¼Œä¸ºæ¯ä¸ªè¡¨æ‰¾åˆ°åˆé€‚çš„ç»“æ„å’Œç²’åº¦æˆä¸ºäº†å¼€æ”¾å¼é—®é¢˜ã€‚ä½†ä¸ç”¨æ‹…å¿ƒï¼ä½ éœ€è¦çš„ä¸€äº›æ•°æ®æ˜¯ç®€å•çš„ã€å…è´¹çš„ï¼Œå¹¶ä¸”å ç”¨å­˜å‚¨ç©ºé—´æå°ã€‚
- en: 'When your data is modeled in full, you can see the following benefits:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ çš„æ•°æ®å®Œå…¨å»ºæ¨¡åï¼Œä½ å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å¥½å¤„ï¼š
- en: Queries are less complex to generate, and therefore more readable.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æŸ¥è¯¢ç”Ÿæˆè¾ƒä¸ºç®€å•ï¼Œå› æ­¤æ›´æ˜“äºé˜…è¯»ã€‚
- en: Reports are more scalable, reducing hard-coded values.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æŠ¥å‘Šæ›´å…·å¯æ‰©å±•æ€§ï¼Œå‡å°‘äº†ç¡¬ç¼–ç çš„å€¼ã€‚
- en: You are likely spending less time finding where the right data lives.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½èŠ±è´¹æ›´å°‘çš„æ—¶é—´å»å¯»æ‰¾æ­£ç¡®çš„æ•°æ®æ‰€åœ¨ä½ç½®ã€‚
- en: Below are 3 generic tables that can streamline your teamâ€™s analytics, which
    you can ingest into your Data Warehouse in the context of a dimensional model.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹é¢æ˜¯å¯ä»¥ç®€åŒ–ä½ å›¢é˜Ÿåˆ†æçš„3ä¸ªé€šç”¨è¡¨ï¼Œä½ å¯ä»¥å°†å®ƒä»¬ä»¥ç»´åº¦æ¨¡å‹çš„å½¢å¼å¯¼å…¥åˆ°ä½ çš„æ•°æ®ä»“åº“ä¸­ã€‚
- en: ğŸ—“ï¸The Date Dimension
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ğŸ—“ï¸æ—¥æœŸç»´åº¦
- en: '***For Timeseries Reporting***'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '***æ—¶é—´åºåˆ—æŠ¥å‘Š***'
- en: 'If you have ever needed to show a business metric as it was at a given point
    in time, this is a nearly essential table to have. For example, you may be asked:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æ›¾ç»éœ€è¦å±•ç¤ºæŸä¸ªå•†ä¸šæŒ‡æ ‡åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„æƒ…å†µï¼Œè¿™å‡ ä¹æ˜¯ä¸€ä¸ªå¿…å¤‡çš„è¡¨ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šè¢«é—®åˆ°ï¼š
- en: '***â€œWhat did sales look like in FY23?â€***'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***â€œFY23çš„é”€å”®æƒ…å†µå¦‚ä½•ï¼Ÿâ€***'
- en: '***Can you show me client churn on a daily basis?***'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***ä½ èƒ½æ¯å¤©å±•ç¤ºå®¢æˆ·æµå¤±æƒ…å†µå—ï¼Ÿ***'
- en: Management frequently seeks insights from a timeseries perspective, asking questions
    like â€œHow is x growing or shrinking over time?â€. A date dimension enables flexible
    analysis of various metrics based on different date attributes.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ç®¡ç†å±‚å¸¸å¸¸ä»æ—¶é—´åºåˆ—çš„è§’åº¦å¯»æ±‚æ´å¯Ÿï¼Œæå‡ºç±»ä¼¼â€œxçš„å¢é•¿æˆ–ç¼©å°æƒ…å†µå¦‚ä½•ï¼Ÿâ€çš„é—®é¢˜ã€‚æ—¥æœŸç»´åº¦å¯ä»¥æ ¹æ®ä¸åŒçš„æ—¥æœŸå±æ€§çµæ´»åˆ†æå„ç§æŒ‡æ ‡ã€‚
- en: Most Date Dimension tables can be created solely using [DDL](https://www.javatpoint.com/ddl-commands-in-sql)
    statements directly in your Data Warehouse, with a mix of date functions.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: å¤§å¤šæ•°æ—¥æœŸç»´åº¦è¡¨å¯ä»¥é€šè¿‡åœ¨æ•°æ®ä»“åº“ä¸­ç›´æ¥ä½¿ç”¨[DDL](https://www.javatpoint.com/ddl-commands-in-sql)è¯­å¥å’Œæ—¥æœŸå‡½æ•°æ¥åˆ›å»ºã€‚
- en: 'In the below example, I use BigQuery SQL to do just that:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä½¿ç”¨BigQuery SQLæ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ï¼š
- en: '[PRE0]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![](../Images/9e5ca6ae342b0c68353e44384494737b.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9e5ca6ae342b0c68353e44384494737b.png)'
- en: '**Breaking this down:**'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ‹†è§£ä¸€ä¸‹ï¼š**'
- en: We start with the [GENERATE_DATE_ARRAY](https://cloud.google.com/bigquery/docs/reference/standard-sql/array_functions#generate_date_array)
    function, which returns an array of dates in a range that you specify. We then
    use the UNNEST function to break each element of the array into separate rows,
    just like in a standard database table. Arrays in BigQuery use one row to display
    multiple values.
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä»[GENERATE_DATE_ARRAY](https://cloud.google.com/bigquery/docs/reference/standard-sql/array_functions#generate_date_array)å‡½æ•°å¼€å§‹ï¼Œå®ƒè¿”å›ä¸€ä¸ªä½ æŒ‡å®šèŒƒå›´å†…çš„æ—¥æœŸæ•°ç»„ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨UNNESTå‡½æ•°å°†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‹†åˆ†æˆå•ç‹¬çš„è¡Œï¼Œå°±åƒåœ¨æ ‡å‡†æ•°æ®åº“è¡¨ä¸­ä¸€æ ·ã€‚BigQueryä¸­çš„æ•°ç»„ä½¿ç”¨ä¸€è¡Œæ¥æ˜¾ç¤ºå¤šä¸ªå€¼ã€‚
- en: Then with our ***full_date*** column that was generated from the unnested array
    (which represents dates in the format of *XXXX-MM-DD)*, we can use many of BigQueryâ€™s
    [EXTRACT](https://cloud.google.com/bigquery/docs/reference/standard-sql/date_functions#extract)
    functions to get segments of ***full_date*** into separate fields (month, day,
    year, etc.)
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç„¶ååˆ©ç”¨æˆ‘ä»¬ä»å±•å¼€æ•°ç»„ç”Ÿæˆçš„***full_date***åˆ—ï¼ˆè¡¨ç¤ºæ—¥æœŸæ ¼å¼ä¸º*XXXX-MM-DD*ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¸å¤šBigQueryçš„[EXTRACT](https://cloud.google.com/bigquery/docs/reference/standard-sql/date_functions#extract)å‡½æ•°å°†***full_date***çš„å„ä¸ªéƒ¨åˆ†ï¼ˆå¦‚æœˆä»½ã€æ—¥æœŸã€å¹´ä»½ç­‰ï¼‰æå–åˆ°ä¸åŒçš„å­—æ®µä¸­ã€‚
- en: The [FORMAT_DATE](https://cloud.google.com/bigquery/docs/reference/standard-sql/date_functions#format_date)
    function has a similar purpose to EXTRACT, but gives us more customization on
    how the date value appears. You can use special [format elements described in
    Googleâ€™s documentation](https://cloud.google.com/bigquery/docs/reference/standard-sql/format-elements#format_elements_date_time)
    for details on what each â€˜%â€™ character means.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[FORMAT_DATE](https://cloud.google.com/bigquery/docs/reference/standard-sql/date_functions#format_date)å‡½æ•°çš„ä½œç”¨ç±»ä¼¼äºEXTRACTï¼Œä½†æä¾›äº†æ›´å¤šè‡ªå®šä¹‰æ—¥æœŸå€¼æ˜¾ç¤ºçš„é€‰é¡¹ã€‚ä½ å¯ä»¥ä½¿ç”¨[Googleæ–‡æ¡£ä¸­æè¿°çš„ç‰¹æ®Šæ ¼å¼å…ƒç´ ](https://cloud.google.com/bigquery/docs/reference/standard-sql/format-elements#format_elements_date_time)æ¥äº†è§£æ¯ä¸ªâ€˜%â€™å­—ç¬¦çš„æ„ä¹‰ã€‚'
- en: We also use the [DATE_SUB](https://cloud.google.com/bigquery/docs/reference/standard-sql/date_functions#date_sub)
    function which simply subtracts a value from one date. This is used to get the
    related fiscal year, which in this example would start on July of every calendar
    year. In this function, we specify a quantity (1 â€” infinity), and the interval
    (day, months, years etc.)
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜ä½¿ç”¨[DATE_SUB](https://cloud.google.com/bigquery/docs/reference/standard-sql/date_functions#date_sub)å‡½æ•°ï¼Œå®ƒåªæ˜¯ä»ä¸€ä¸ªæ—¥æœŸä¸­å‡å»ä¸€ä¸ªå€¼ã€‚è¿™ç”¨äºè·å–ç›¸å…³çš„è´¢æ”¿å¹´åº¦ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè´¢æ”¿å¹´åº¦å°†ä»æ¯ä¸ªæ—¥å†å¹´çš„ä¸ƒæœˆå¼€å§‹ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šä¸€ä¸ªæ•°é‡ï¼ˆ1
    - æ— é™ï¼‰å’Œé—´éš”ï¼ˆæ—¥ã€æœˆã€å¹´ç­‰ï¼‰ã€‚
- en: ğŸŒThe Zip Code Dimension
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ğŸŒé‚®æ”¿ç¼–ç ç»´åº¦
- en: '***For Geospacial Reporting***'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '***åœ°ç†ç©ºé—´æŠ¥å‘Š***'
- en: If you have been tasked to create a heatmap visualization, or a general geospatial
    analysis â€” a zip code dimension will be of great use for your team. This gives
    you the option to visualize elements by latitude and longitude, aggregate by county
    names, time zone, and append population data for benchmarking.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ è¢«è¦æ±‚åˆ›å»ºçƒ­å›¾å¯è§†åŒ–æˆ–è¿›è¡Œä¸€èˆ¬çš„åœ°ç†ç©ºé—´åˆ†æï¼Œé‚®æ”¿ç¼–ç ç»´åº¦å°†å¯¹ä½ çš„å›¢é˜Ÿéå¸¸æœ‰ç”¨ã€‚è¿™è®©ä½ å¯ä»¥é€šè¿‡çº¬åº¦å’Œç»åº¦å¯è§†åŒ–å…ƒç´ ï¼ŒæŒ‰å¿åã€æ—¶åŒºèšåˆï¼Œå¹¶é™„åŠ äººå£æ•°æ®ä»¥è¿›è¡ŒåŸºå‡†æ¯”è¾ƒã€‚
- en: A Zip Code Dimension is a great supplemental table to a customer table. By using
    the Zip Code field as the join key, you can append meaningful contextual data
    to where your customer base resides, and patterns behind them.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: é‚®æ”¿ç¼–ç ç»´åº¦æ˜¯å®¢æˆ·è¡¨çš„ä¸€ä¸ªå¾ˆå¥½çš„è¡¥å……è¡¨ã€‚é€šè¿‡å°†é‚®æ”¿ç¼–ç å­—æ®µä½œä¸ºè¿æ¥é”®ï¼Œä½ å¯ä»¥é™„åŠ æœ‰æ„ä¹‰çš„ä¸Šä¸‹æ–‡æ•°æ®åˆ°ä½ çš„å®¢æˆ·åŸºç¡€æ‰€åœ¨çš„ä½ç½®åŠå…¶èƒŒåçš„æ¨¡å¼ã€‚
- en: '[Opendatasoft](https://data.opendatasoft.com/pages/home/) provides various
    free datasets with an open-source API connector. One that is perfect for this
    use case is the [***US Zip Codes Points- United States of America***](https://data.opendatasoft.com/explore/dataset/georef-united-states-of-america-zc-point%40public/table/?rows=)dataset.
    On this link, hover over to the â€˜APIâ€™ tab which lets you configure the URL to
    retrieve JSON data.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '[Opendatasoft](https://data.opendatasoft.com/pages/home/) æä¾›å„ç§å…è´¹çš„æ•°æ®é›†ä»¥åŠå¼€æº API
    è¿æ¥å™¨ã€‚é€‚ç”¨äºæ­¤ç”¨ä¾‹çš„ä¸€ä¸ªæ•°æ®é›†æ˜¯ [***US Zip Codes Points- United States of America***](https://data.opendatasoft.com/explore/dataset/georef-united-states-of-america-zc-point%40public/table/?rows=)
    æ•°æ®é›†ã€‚åœ¨æ­¤é“¾æ¥ä¸­ï¼Œç§»åˆ°â€˜APIâ€™æ ‡ç­¾ï¼Œé…ç½® URL ä»¥æ£€ç´¢ JSON æ•°æ®ã€‚'
- en: 'With a few lines in Python, we can output the following Pandas DataFrame:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: å‡ è¡Œ Python ä»£ç åï¼Œæˆ‘ä»¬å¯ä»¥è¾“å‡ºå¦‚ä¸‹ Pandas DataFrameï¼š
- en: '[PRE1]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](../Images/d55748137629a3223ccbaf5e1c728762.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d55748137629a3223ccbaf5e1c728762.png)'
- en: '**Breaking this down:**'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**åˆ†è§£å¦‚ä¸‹ï¼š**'
- en: Here I use the [requests](https://requests.readthedocs.io/en/latest/) library
    to retrieve data found at the following URL shown in the â€˜urlâ€™ variable, which
    was generated on the API tab of the opendatasoft website.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨ [requests](https://requests.readthedocs.io/en/latest/) åº“ä»â€˜urlâ€™å˜é‡ä¸­æ˜¾ç¤ºçš„
    URL æ£€ç´¢æ•°æ®ï¼Œè¯¥ URL åœ¨ opendatasoft ç½‘ç«™çš„ API æ ‡ç­¾ä¸Šç”Ÿæˆã€‚
- en: With Pandas, I use the [***json_normalize***](/all-pandas-json-normalize-you-should-know-for-flattening-json-13eae1dfb7dd)function
    to convert the JSON data into a Pandas DataFrame.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Pandasï¼Œæˆ‘ä½¿ç”¨ [***json_normalize***](/all-pandas-json-normalize-you-should-know-for-flattening-json-13eae1dfb7dd)
    å‡½æ•°å°† JSON æ•°æ®è½¬æ¢ä¸º Pandas DataFrameã€‚
- en: ğŸ“ˆThe FX Rates Fact Table
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ğŸ“ˆFX Rates äº‹å®è¡¨
- en: '***For Financial Analysis***'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '***ç”¨äºè´¢åŠ¡åˆ†æ***'
- en: Organizations with international clients often need to convert all transactions
    to a base currency for financial reporting. To understand how a foreign exchange
    rate fluctuation may be impacting revenue, a daily FX rate feed is a great solution
    to answer this question.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: æ‹¥æœ‰å›½é™…å®¢æˆ·çš„ç»„ç»‡é€šå¸¸éœ€è¦å°†æ‰€æœ‰äº¤æ˜“è½¬æ¢ä¸ºåŸºç¡€è´§å¸ä»¥è¿›è¡Œè´¢åŠ¡æŠ¥å‘Šã€‚ä¸ºäº†ç†è§£å¤–æ±‡æ±‡ç‡æ³¢åŠ¨å¦‚ä½•å½±å“æ”¶å…¥ï¼Œæ¯æ—¥ FX æ±‡ç‡æ•°æ®æµæ˜¯å›ç­”è¿™ä¸ªé—®é¢˜çš„ç»ä½³è§£å†³æ–¹æ¡ˆã€‚
- en: This is also particularly impactful when paired with time series reporting,
    to append exchange rates at the time of a given sale. In my experience building
    dashboards which show client revenue over a period of time, business users always
    appreciated the ability to toggle different FX rate values against revenue on
    a date axis. The FX Rates table lets you accomplish all of this.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä¸æ—¶é—´åºåˆ—æŠ¥å‘Šé…åˆä½¿ç”¨æ—¶ï¼Œè¿™ä¹Ÿç‰¹åˆ«å…·æœ‰å½±å“åŠ›ï¼Œå¯ä»¥åœ¨ç‰¹å®šé”€å”®æ—¶é—´é™„åŠ æ±‡ç‡ã€‚åœ¨æˆ‘æ„å»ºæ˜¾ç¤ºå®¢æˆ·æ”¶å…¥éšæ—¶é—´å˜åŒ–çš„ä»ªè¡¨æ¿çš„ç»éªŒä¸­ï¼Œä¸šåŠ¡ç”¨æˆ·æ€»æ˜¯æ¬£èµèƒ½å¤Ÿåœ¨æ—¥æœŸè½´ä¸Šåˆ‡æ¢ä¸åŒçš„å¤–æ±‡æ±‡ç‡å€¼ã€‚FX
    Rates è¡¨æ ¼å¯ä»¥è®©ä½ å®Œæˆæ‰€æœ‰è¿™äº›æ“ä½œã€‚
- en: '[Exchangerate.host](https://exchangerate.host/#/docs) is another open-source
    site that allows you to connect to a daily FX rates feed. Below is an example
    of how to retrieve the data â€” more info can be found on [their documentation](https://exchangerate.host/#/docs):'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '[Exchangerate.host](https://exchangerate.host/#/docs) æ˜¯å¦ä¸€ä¸ªå¼€æºç½‘ç«™ï¼Œå…è®¸ä½ è¿æ¥åˆ°æ¯æ—¥ FX
    æ±‡ç‡æ•°æ®æµã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•æ£€ç´¢æ•°æ®çš„ç¤ºä¾‹ â€” æ›´å¤šä¿¡æ¯è¯·å‚è§ [ä»–ä»¬çš„æ–‡æ¡£](https://exchangerate.host/#/docs)ï¼š'
- en: '[PRE2]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/ac6bf1ef48a5b206e05fa3c8befbcc7d.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ac6bf1ef48a5b206e05fa3c8befbcc7d.png)'
- en: '**Breaking this down:**'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**åˆ†è§£å¦‚ä¸‹ï¼š**'
- en: Here we use the requests library to retrieve data in the form of a Python dictionary
    from the URL specified in the â€˜urlâ€™ variable. Please note â€” I edited the URL per
    the documentation to specify the base currency to USD. Meaning, all rates will
    relate to their USD exchange rate.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ requests åº“ä»â€˜urlâ€™å˜é‡ä¸­æŒ‡å®šçš„ URL æ£€ç´¢æ•°æ®ï¼Œæ•°æ®å½¢å¼ä¸º Python å­—å…¸ã€‚è¯·æ³¨æ„ â€” æˆ‘æ ¹æ®æ–‡æ¡£ç¼–è¾‘äº† URLï¼Œä»¥æŒ‡å®šåŸºç¡€è´§å¸ä¸º
    USDã€‚å³ï¼Œæ‰€æœ‰æ±‡ç‡å°†ä¸å…¶ USD æ±‡ç‡ç›¸å…³ã€‚
- en: Next, we convert the Python dictionary to a list, taking the data from the â€˜ratesâ€™
    key.
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°† Python å­—å…¸è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œä»â€˜ratesâ€™é”®ä¸­è·å–æ•°æ®ã€‚
- en: '[PRE3]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Then, we convert the list into a Pandas DataFrame and label the column headers:'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œæˆ‘ä»¬å°†åˆ—è¡¨è½¬æ¢ä¸º Pandas DataFrame å¹¶æ ‡è®°åˆ—æ ‡é¢˜ï¼š
- en: '[PRE4]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Finally a column is added â€˜cycle_dateâ€™ which represents the ETL cycle date,
    denoting when the data is ingested into the Data Warehouse.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æœ€åï¼Œæ·»åŠ äº†ä¸€ä¸ªåä¸º â€˜cycle_dateâ€™ çš„åˆ—ï¼Œè¡¨ç¤º ETL å‘¨æœŸæ—¥æœŸï¼Œæ ‡ç¤ºæ•°æ®ä½•æ—¶è¢«æ‘„å–åˆ°æ•°æ®ä»“åº“ä¸­ã€‚
- en: Conclusion
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: Incorporating publicly available data into your Data Warehouse can provide immediate
    value to analytics teams with minimal effort. These tables, as well as any properly
    modeled data entity, eliminate the need to store nested business logic solely
    in BI tools like Power BI or Tableau. They instead provide a centralized source
    of data that multiple analysts can reference and apply consistently in their reporting.
    This cohesive approach to data modeling empowers teams to scale reporting effortlessly,
    ensuring transparency into the source data. With the ability to leverage these
    types of contextual tables, your organization can streamline analytics processes,
    eliminate discrepancies in reporting, and achieve a higher level of data-driven
    decision-making.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: å°†å…¬å¼€å¯ç”¨çš„æ•°æ®çº³å…¥æ•°æ®ä»“åº“å¯ä»¥ä¸ºåˆ†æå›¢é˜Ÿæä¾›å³æ—¶ä»·å€¼ï¼Œä¸”ä»˜å‡ºæœ€å°‘çš„åŠªåŠ›ã€‚è¿™äº›è¡¨æ ¼ä»¥åŠä»»ä½•é€‚å½“å»ºæ¨¡çš„æ•°æ®å®ä½“ï¼Œæ¶ˆé™¤äº†ä»…åœ¨åƒ Power BI æˆ– Tableau
    è¿™æ ·çš„ BI å·¥å…·ä¸­å­˜å‚¨åµŒå¥—ä¸šåŠ¡é€»è¾‘çš„éœ€æ±‚ã€‚å®ƒä»¬æä¾›äº†ä¸€ä¸ªé›†ä¸­åŒ–çš„æ•°æ®æºï¼Œå¤šä¸ªåˆ†æå¸ˆå¯ä»¥å‚è€ƒå¹¶åœ¨æŠ¥å‘Šä¸­ä¸€è‡´åº”ç”¨ã€‚è¿™ç§æ•°æ®å»ºæ¨¡çš„æ•´ä½“æ–¹æ³•ä½¿å›¢é˜Ÿèƒ½å¤Ÿè½»æ¾æ‰©å±•æŠ¥å‘Šï¼Œç¡®ä¿å¯¹æºæ•°æ®çš„é€æ˜åº¦ã€‚é€šè¿‡åˆ©ç”¨è¿™äº›ç±»å‹çš„ä¸Šä¸‹æ–‡è¡¨æ ¼ï¼Œæ‚¨çš„ç»„ç»‡å¯ä»¥ç®€åŒ–åˆ†ææµç¨‹ï¼Œæ¶ˆé™¤æŠ¥å‘Šä¸­çš„ä¸ä¸€è‡´ï¼Œå¹¶å®ç°æ›´é«˜æ°´å¹³çš„æ•°æ®é©±åŠ¨å†³ç­–ã€‚
- en: Happy Modeling!
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç¥å»ºæ¨¡æ„‰å¿«ï¼
