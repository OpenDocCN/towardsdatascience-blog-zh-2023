- en: Fantastic Beasts of BigQuery and When to Use Them
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/fantastic-beasts-of-bigquery-and-when-to-use-them-13af9a17f3db](https://towardsdatascience.com/fantastic-beasts-of-bigquery-and-when-to-use-them-13af9a17f3db)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Unveiling the Traits of BigQuery Studio, DataFrames, Generative AI/AI Functions,
    and DuetAI
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@martosi?source=post_page-----13af9a17f3db--------------------------------)[![Marina
    Tosic](../Images/cb2168826ed9ed608d61c6c90843c535.png)](https://medium.com/@martosi?source=post_page-----13af9a17f3db--------------------------------)[](https://towardsdatascience.com/?source=post_page-----13af9a17f3db--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----13af9a17f3db--------------------------------)
    [Marina Tosic](https://medium.com/@martosi?source=post_page-----13af9a17f3db--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----13af9a17f3db--------------------------------)
    ·8 min read·Dec 31, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/21d378b95769bcc96f6dcb557570b5a2.png)'
  prefs: []
  type: TYPE_IMG
- en: “BigQuery is an all-in-one Google service with DB-BI-ML-GenAI features.” [Photo
    by [Korng Sok](https://unsplash.com/@korng_sok?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)]
  prefs: []
  type: TYPE_NORMAL
- en: Discover more from the BigQuery world
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One of my favourite books is “[Fantastic Beasts and Where to Find Them](https://en.wikipedia.org/wiki/Fantastic_Beasts_and_Where_to_Find_Them)”
    by [J.K. Rowling](https://en.wikipedia.org/wiki/J._K._Rowling). It is a story
    about the world of magical creatures who get loose in the non-wizard world. It’s
    also a story that shows how *Maj* (wizards) and *No-Maj* (non-wizard) people form
    a friendship to protect magical creatures. On this mission, the lead *No-Maj*
    character discovers a world of magic and falls in love with all the challenges
    it offers, wishing he was a wizard too.
  prefs: []
  type: TYPE_NORMAL
- en: 'As a *No-Maj* myself, [my transition from mechanical engineering to the data
    world was initially filled with challenges](https://medium.com/towards-data-science/ending-the-year-with-12-lessons-about-data-career-8786afc068f4).
    Each time I entered a new data area, I was thinking: *“If only I were a wizard”.*
    ;)'
  prefs: []
  type: TYPE_NORMAL
- en: When I first started learning about ***databases (DB) and business intelligence
    (BI)***, I had this thought in my head.
  prefs: []
  type: TYPE_NORMAL
- en: As I progressed to ***machine learning (ML)*** topics, this thought was again
    present.
  prefs: []
  type: TYPE_NORMAL
- en: Nowadays, I am trying to manoeuvre through ***generative AI (GenAI) development***,
    and—you guessed it—this thought is again with me.
  prefs: []
  type: TYPE_NORMAL
- en: Even after gaining experience in DB, BI, and ML, the GenAI area would be more
    challenging for me if it weren’t for one Google service—[**BigQuery**](https://cloud.google.com/bigquery/docs/introduction)
    **(BQ)**.
  prefs: []
  type: TYPE_NORMAL
- en: '***Do you know why?***'
  prefs: []
  type: TYPE_NORMAL
- en: Because BigQuery is offering **“all-in-one**” when it comes to the **“DB-BI-ML-GenAI”**
    combination. Or, as Google has announced in one of its webinars, it is covering
    features “*From Data to AI*” [[1](https://cloudonair.withgoogle.com/events/cloud-onboard-data-to-ai)].
  prefs: []
  type: TYPE_NORMAL
- en: 'And how I thought it should be announced: ***“Fantastic Beasts of BigQuery”***.'
  prefs: []
  type: TYPE_NORMAL
- en: On top of my all-time favourite BigQuery feature—[BQML](https://cloud.google.com/bigquery/docs/bqml-introduction)—Google
    has recently implemented additional transformative features, making BQ more similar
    to an analytical development environment and less to a database environment.
  prefs: []
  type: TYPE_NORMAL
- en: These new features enable data professionals to conduct end-to-end analytical
    tasks **without the need to switch between multiple tools.**
  prefs: []
  type: TYPE_NORMAL
- en: With end-to-end tasks, I have in mind performing [exploratory data analysis](https://en.wikipedia.org/wiki/Exploratory_data_analysis)
    (EDA), predictive modelling using either SQL or Python with Spark, and creating
    new insights by using generative AI features. And all this can now be done with
    the assistance of the code co-creating feature.
  prefs: []
  type: TYPE_NORMAL
- en: The recent evolution of BigQuery’s ecosystem motivated me to write this post
    and to show the new BQ advances that will transform the way (we) data professionals
    work and possibly make us feel a bit like *Maj* people. ;)
  prefs: []
  type: TYPE_NORMAL
- en: In other words, this **post aims to present** when the new BQ features can be
    used in the analytical workflow.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'But before we start the explanation, I need to share the names of these “fantastic
    beasts”:'
  prefs: []
  type: TYPE_NORMAL
- en: '[***BigQuery Studio***](https://cloud.google.com/bigquery/docs/query-overview#bigquery-studio)
    ***and*** [***BigQuery DataFrames***](https://cloud.google.com/python/docs/reference/bigframes/latest)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '***BigQuery GenAI and AI Functions***'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[***DuetAI in BigQuery***](https://cloud.google.com/bigquery/docs/write-sql-duet-ai)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Let’s begin now by unveiling their unique traits and pointing out how they can
    be leveraged to enhance your performance.
  prefs: []
  type: TYPE_NORMAL
- en: '**Fantastic Beasts of BigQuery**'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To hint at the purpose of the new BQ features, I created an illustration of
    how they align with the knowledge data discovery process (analytical workflow).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4e7ab1afb1a3c9c0b4b75a8d5c46e5ee.png)'
  prefs: []
  type: TYPE_IMG
- en: The new BigQuery features aligned with analytical workflow [Image by author
    using [draw.io](https://www.drawio.com/)]
  prefs: []
  type: TYPE_NORMAL
- en: As visible from the picture, at the base of the analytical workflow is *DuetAI*,
    which is an AI coding assistance feature. Except for the coding support, DuetAI
    is a chatbot, and you can use it for brainstorming.
  prefs: []
  type: TYPE_NORMAL
- en: This means that data professionals can ask the chatbot different questions related
    to ***input*** problem definitions (e.g., how can I subset my dataset or could
    you explain a specific function) and recommendations on how to structure the analytical
    ***output*** (e.g., how can I present my findings).
  prefs: []
  type: TYPE_NORMAL
- en: 'In between the analytical *input → output* flow, other features come in handy:'
  prefs: []
  type: TYPE_NORMAL
- en: In ***Phase I***, i.e., **the data preparation and understanding phase**, BigQuery
    SQL (for subsetting and wrangling datasets), GenAI/AI functions (for enriching
    datasets), BigQuery DataFrames, and other Python libraries (for exploring datasets)
    can be used via BigQuery Studio.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In ***Phase II***, i.e., ***the data modelling and insights synthesis phase***,
    BigQuery SQL or BQML functions can be used alongside BigQuery DataFrames in BQ
    Studio (for BI/ML model creation) to get the required analytical output (descriptive
    or predictive outcome).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Now we will showcase the magical traits of these features.
  prefs: []
  type: TYPE_NORMAL
- en: BigQuery Studio and DataFrames
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Don’t get confused here with [BigQuery Studio](https://cloud.google.com/bigquery/docs/query-overview#bigquery-studio)
    vs. [Looker Studio](https://cloud.google.com/looker-studio?hl=en) (the former
    Data Studio). While the latter is a self-service BI tool, the first one is a new
    collaborative workspace that supports the complete analytical workflow.
  prefs: []
  type: TYPE_NORMAL
- en: 'With this said, BigQuery Studio has the following main traits [[2](https://cloud.google.com/blog/products/data-analytics/announcing-bigquery-studio)]:'
  prefs: []
  type: TYPE_NORMAL
- en: '***#1: Supports multiple languages and tools in a unified interface.***'
  prefs: []
  type: TYPE_NORMAL
- en: 'By this, I mean that it eases the work between different data professions,
    as:'
  prefs: []
  type: TYPE_NORMAL
- en: '*data engineering* (ingestion and data wrangling),'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*data analytics* (descriptive statistics/EDA), and'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*data science* tasks (predictive modelling) can be done in one environment,
    or better yet, in one **notebook**.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The BQ Studio provides the notebook [Colab interface](https://cloud.google.com/colab/docs/introduction)
    and enables data professionals to use either SQL, Python, Spark, or natural language
    in BigQuery (in combination with DuetAI) in one notebook file. In addition, developed
    notebooks can later be accessed via [Vertex AI](https://cloud.google.com/vertex-ai?hl=en)
    for ML workflows.
  prefs: []
  type: TYPE_NORMAL
- en: When it comes to data ingestion formats, it supports both structured, semi-structured,
    and unstructured formats from different cloud platforms.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1ac87d33537f9dbbb3c52436d99f2415.png)'
  prefs: []
  type: TYPE_IMG
- en: Google’s presentation of BigQuery Studio notebook [[2](https://cloud.google.com/blog/products/data-analytics/announcing-bigquery-studio)]
  prefs: []
  type: TYPE_NORMAL
- en: '***#2: Enhances collaboration and versioning by connecting to external code
    repositories.***'
  prefs: []
  type: TYPE_NORMAL
- en: I have to say this trait is something I have been wishing for a while. Although
    it doesn’t support (yet) all [git commands](https://www.atlassian.com/git/glossary#commands),
    the BQ Studio supports software development practices like continuous integration/continuous
    deployment (CI/CD), version history, and source control of data code assets. Simply
    put, it is now possible to review the history of a notebook and [revert to](https://www.atlassian.com/git/tutorials/undoing-changes/git-revert)
    or [branch from](https://www.atlassian.com/git/tutorials/using-branches) a specific
    notebook version.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/9c5c1d3b2c19168e155f4bc148d2c25a.png)'
  prefs: []
  type: TYPE_IMG
- en: Google’s presentation of version control BQ Studio feature [[2](https://cloud.google.com/blog/products/data-analytics/announcing-bigquery-studio)]
  prefs: []
  type: TYPE_NORMAL
- en: '***#3: Enforces security and data governance within BigQuery.***'
  prefs: []
  type: TYPE_NORMAL
- en: BQ Studio enforces security because it reduces the need to share the data outside
    of BigQuery. In other words, by adopting unified credential management between
    services, analysts can, e.g., access Vertex AI foundational models to perform
    complex analytical tasks (like sentiment analysis) without sharing data with third-party
    tools.
  prefs: []
  type: TYPE_NORMAL
- en: On top of this, there are data governance traits, including [data lineage](https://www.ibm.com/topics/data-lineage)
    tracking, [data profiling](https://www.ibm.com/topics/data-profiling), and enforcing
    [quality](https://www.ibm.com/topics/data-quality) constraints. I can only add
    “Amen to that”.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/ff4445687e8fa11ec0766d59d0ef5cd9.png)'
  prefs: []
  type: TYPE_IMG
- en: Google’s presentation of data governance features [[2](https://cloud.google.com/blog/products/data-analytics/announcing-bigquery-studio)]
  prefs: []
  type: TYPE_NORMAL
- en: To summarise the above-listed traits, it is evident that BigQuery Studio is
    a magical feature, as it enables tasks from data ingestion to data modelling by
    enforcing security and governance.
  prefs: []
  type: TYPE_NORMAL
- en: The story would not be complete if Google didn’t provide an additional feature
    that can be used within BigData Studio notebooks for data analysis and modelling
    purposes—[BigQuery DataFrames](https://cloud.google.com/python/docs/reference/bigframes/latest).
  prefs: []
  type: TYPE_NORMAL
- en: 'By installing the `bigframes` package (similar to the [installation of any
    other Python package](https://packaging.python.org/en/latest/tutorials/installing-packages/)
    with `pip`), data professionals can use the following Python APIs [[3](https://cloud.google.com/python/docs/reference/bigframes/latest)]:'
  prefs: []
  type: TYPE_NORMAL
- en: '`bigframes.pandas` which is a [pandas](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html)
    API for analysis and manipulation, and'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`bigframes.ml`, i.e., a [scikit-learn](https://scikit-learn.org/stable/modules/classes.html)
    API for machine learning.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: And with the machine learning topic, I wanted to finalise this section.
  prefs: []
  type: TYPE_NORMAL
- en: The reason for this is that in the next section, I will elaborate on the new
    [BigQuery ML](https://cloud.google.com/bigquery/docs/bqml-introduction) functions.
  prefs: []
  type: TYPE_NORMAL
- en: BigQuery GenAI and AI functions
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As mentioned in the introduction, I am a big fan of the BQML functions because
    they enable data professionals to create predictive models using SQL syntax.
  prefs: []
  type: TYPE_NORMAL
- en: 'In addition to its already nice portfolio of BQML functions for supervised
    and unsupervised learning, Google has now added my next favourite functions: **generative
    AI** and **AI functions**.'
  prefs: []
  type: TYPE_NORMAL
- en: When it comes to the generative AI function [ML.GENERATE_TEXT](https://cloud.google.com/bigquery/docs/reference/standard-sql/bigqueryml-syntax-generate-text),
    I recently wrote a blog to show its traits.
  prefs: []
  type: TYPE_NORMAL
- en: '[](/the-new-generative-ai-function-in-bigquery-38d7a16d4efc?source=post_page-----13af9a17f3db--------------------------------)
    [## The New Generative AI Function in BigQuery'
  prefs: []
  type: TYPE_NORMAL
- en: How to use BigQuery GENERATE_TEXT remote function
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/the-new-generative-ai-function-in-bigquery-38d7a16d4efc?source=post_page-----13af9a17f3db--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: In summary, the function can be used to create new insights from unstructured
    text stored in the BigQuery datasets. Or more precisely, you can use it to create
    *new classes* or *attributes* (classification analysis, sentiment analysis, or
    entity extraction), *summarise* or *rewrite natural text records*, and *generate
    ads* or *ideation concepts*.
  prefs: []
  type: TYPE_NORMAL
- en: I would say that SQL-based data engineering now has next-level powers.
  prefs: []
  type: TYPE_NORMAL
- en: Alongside this magic function, other powerful new SQL-based **AI functions are:**
  prefs: []
  type: TYPE_NORMAL
- en: '[ML.UNDERSTAND_TEXT](https://cloud.google.com/bigquery/docs/reference/standard-sql/bigqueryml-syntax-understand-text)
    — a function that helps in text analysis of the records stored in BigQuery and
    supports similar features as the ML.GENERATE_TEXT function. Meaning that it supports
    entity, sentiment, classification, and syntax analysis.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[ML.TRANSLATE](https://cloud.google.com/bigquery/docs/reference/standard-sql/bigqueryml-syntax-translate)
    — a function used for text translation from one language to another.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[ML.PROCESS_DOCUMENT](https://cloud.google.com/bigquery/docs/reference/standard-sql/bigqueryml-syntax-process-document)
    — a function used for processing unstructured documents from an [object table](https://cloud.google.com/bigquery/docs/object-table-introduction)
    (e.g., invoices).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[ML.TRANSCRIBE](https://cloud.google.com/bigquery/docs/reference/standard-sql/bigqueryml-syntax-transcribe)
    — a function used for transcribing audio files from an object table.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[ML.ANNOTATE_IMAGE](https://cloud.google.com/bigquery/docs/reference/standard-sql/bigqueryml-syntax-annotate-image)
    — a function used for image annotation from object tables.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Although these functions are written in SQL, understanding their query structure
    and parameters is a must for proper usage. To speed up the learning curve, a little
    coding assistance—DuetAI—comes in handy.
  prefs: []
  type: TYPE_NORMAL
- en: '**DuetAI in BigQuery**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Simple as that: the [*DuetAI*](https://cloud.google.com/duet-ai/docs/use-cases/analyze-data-duet-ai)
    magic feature can help data professionals write, improve, and understand their
    multi-language code within the BQ and BQ Studio environments.'
  prefs: []
  type: TYPE_NORMAL
- en: 'More precisely, this feature possesses the following traits:'
  prefs: []
  type: TYPE_NORMAL
- en: '***#1: Creates queries or code from scratch within the BQ environment or BQ
    Studio notebooks***'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/6908b1edca042e4c6a29f812b0e90125.png)'
  prefs: []
  type: TYPE_IMG
- en: Example of the code completion by using DuetAI in BigQuery [Image by author]
  prefs: []
  type: TYPE_NORMAL
- en: '***#2: Explains queries and code snippets within the BQ environment or BQ Studio
    notebooks***'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4e894af089e5feb4baf0e6ad49613d74.png)'
  prefs: []
  type: TYPE_IMG
- en: Example of the code completion by using DuetAI in BigQuery [Image by author]
  prefs: []
  type: TYPE_NORMAL
- en: '***#3: Enhances code quality within the BQ environment or BQ Studio notebooks***'
  prefs: []
  type: TYPE_NORMAL
- en: 'By this, I mean that DuetAI can improve code by assisting with:'
  prefs: []
  type: TYPE_NORMAL
- en: '*syntax correction:* it can identify and suggest corrections for [syntax errors](https://en.wikipedia.org/wiki/Syntax_error).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*logic improvement*: it can suggest alternative ways to structure the code,
    improving the overall efficiency and readability.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*documentation generation:* it can automatically generate documentation for
    the code, making it easier to understand.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Finally, with this magic feature, I will conclude the section and presentation
    of the new BigQuery “fantastic beasts”.
  prefs: []
  type: TYPE_NORMAL
- en: A World of Endless Possibilities
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the book “[Fantastic Beasts and Where to Find Them](https://en.wikipedia.org/wiki/Fantastic_Beasts_and_Where_to_Find_Them)”,
    J.K. Rowling showed how magical creatures become less scary for *Maj* and even
    *No-Maj* people when they learn about their positive traits. Similarly, in this
    blog post, I wanted to showcase the new fantastic features of BigQuery and point
    out their positive traits on different analytical levels.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a35c6ba4c0af434875c982fc5deb1248.png)'
  prefs: []
  type: TYPE_IMG
- en: Illustration of the three BigQuery beasts created by the author using [DALL-E](https://openai.com/dall-e-2?_sm_vck=ZrFSTvft5N6ZFV4rFDZ1Jn8fPNjfn4FMvqT8TnfR5fPTvFQf5Sn5)
    extension in ChatGPT (Correct number of beasts, but a wrong number of the names
    ;))
  prefs: []
  type: TYPE_NORMAL
- en: My goal was to present how the new features can support you in the complete
    analytical workflow and ease your work, whether you are a data engineer, analyst,
    or scientist. In addition, I wanted to point out how they can enhance collaboration
    among team members with different data backgrounds.
  prefs: []
  type: TYPE_NORMAL
- en: Hopefully, you will engage in hands-on magic yourself and learn more about the
    “Fantastic Beasts of BigQuery”.
  prefs: []
  type: TYPE_NORMAL
- en: Happy learning!
  prefs: []
  type: TYPE_NORMAL
- en: Thank you for reading my post. Stay connected for more stories on [Medium](https://medium.com/@martosi/subscribe)
    and [Linkedin](https://www.linkedin.com/in/martosi/).
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Knowledge resources
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[[1](https://cloudonair.withgoogle.com/events/cloud-onboard-data-to-ai)] Google
    Cloud webinar: “Cloud OnBoard: From Data to AI with BigQuery and Vertex AI”, accessed
    December 10th 2023, [https://cloudonair.withgoogle.com/events/cloud-onboard-data-to-ai](https://cloudonair.withgoogle.com/events/cloud-onboard-data-to-ai)'
  prefs: []
  type: TYPE_NORMAL
- en: '[[2](https://cloud.google.com/blog/products/data-analytics/announcing-bigquery-studio)]
    Google Cloud blog: “Announcing BigQuery Studio — a collaborative analytics workspace
    to accelerate data-to-AI workflows”, accessed December 11th 2023, [https://cloudonair.withgoogle.com/events/cloud-onboard-data-to-AI](https://cloud.google.com/blog/products/data-analytics/announcing-bigquery-studio)'
  prefs: []
  type: TYPE_NORMAL
- en: '[[3](https://cloud.google.com/python/docs/reference/bigframes/latest)] Google
    Cloud documentation: “BigQuery DataFrames”, accessed December 11th 2023, [https://cloud.google.com/python/docs/reference/bigframes/latest](https://cloud.google.com/python/docs/reference/bigframes/latest)'
  prefs: []
  type: TYPE_NORMAL
