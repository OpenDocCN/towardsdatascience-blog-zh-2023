["```py\n>pip install tfcausalimpact\n```", "```py\nfrom causalimpact import CausalImpact\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n```", "```py\n#Define the dates\ntraining_strat = \"2022-03-10\"\ntraining_end = \"2022-06-30\"\ntreatment_start = \"2022-07-01\"\ntreatment_end = \"2022-07-13\"\n\n#import the data- for my example i am using a CSV\ndata=pd.read_csv(\"example.csv\", index_col='Date', parse_dates=True) \n```", "```py\n# get the training data only\ndf_training = data[data.index <= pd.to_datetime(training_end)]\n```", "```py\n# Check for stationarity\nfrom statsmodels.tsa.stattools import adfuller\n\ntest = adfuller(x = df_training['Barcelona'])[1]\nprint(test)\nif test< 0.05:\n    print(\"Data is stationary\")\nelse:\n    print(\"Time series is not stationary\")\n```", "```py\n# Differening calculates the difference or Pct Difference from the previous date\ndifferencing = df_training.pct_change().dropna(thresh = 1,axis=1).dropna()\ndifferencing.head()\n```", "```py\n#Rest on the differenced data\ntest = adfuller(x = differencing['Barcelona'])[1]\nprint(test)\nif test< 0.05:\n    print(\"Data is stationary\")\nelse:\n    print(\"Time series is not stationary\")\n```", "```py\n#Create correlation\nmarket_cor= pd.Series(differencing.corr().abs()['Barcelona'])\n\n#Create a list with markets with correlation coef >=0.3\nmarkets_to_keep = list(market_cor[market_cor >=0.3].index)\n\n#Keep only markets on the above list\nfinal_data = data.drop(columns=[col for col in data if col not in markets_to_keep])\n```", "```py\n#Prepare Pre and Post periods\npre_period = [training_strat,training_end]\npost_period = [treatment_start,treatment_end]\n\n#Fitting CausalImpact\nimpact = CausalImpact(data=final_data,\n                      pre_period=pre_period,\n                      post_period=post_period)\n```", "```py\nimpact.plot()\n```", "```py\nprint(impact.summary())\n```", "```py\nPosterior Inference {Causal Impact}\n                          Average                Cumulative\nActual                    397631.92              5169215.0\nPrediction (s.d.)         177248.77 (6914.43)    2304234.0 (89887.6)\n95% CI                    [163527.02, 190631.09] [2125851.11, 2478204.1]\n\nAbsolute effect (s.d.)    220383.16 (6914.43)     2864981.0 (89887.6)\n95% CI                    [207000.83, 234104.91]  [2691010.9, 3043363.89]\n\nRelative effect (s.d.)    124.34% (3.9%)          124.34% (3.9%)\n95% CI                    [116.79%, 132.08%]      [116.79%, 132.08%]\n\nPosterior tail-area probability p: 0.0\nPosterior prob. of a causal effect: 100.0%\n\nFor more details run the command: print(impact.summary('report'))\n```", "```py\nprint(impact.summary('report'))\n```", "```py\nAnalysis report {CausalImpact}\n\nDuring the post-intervention period, the response variable had\nan average value of approx. 397631.92\\. By contrast, in the absence of an\nintervention, we would have expected an average response of 177248.77.\nThe 95% interval of this counterfactual prediction is [163527.02, 190631.09].\nSubtracting this prediction from the observed response yields\nan estimate of the causal effect the intervention had on the\nresponse variable. This effect is 220383.16 with a 95% interval of\n[207000.83, 234104.91]. For a discussion of the significance of this effect,\nsee below.\n\nSumming up the individual data points during the post-intervention\nperiod (which can only sometimes be meaningfully interpreted), the\nresponse variable had an overall value of 5169215.0.\nBy contrast, had the intervention not taken place, we would have expected\na sum of 2304234.0\\. The 95% interval of this prediction is [2125851.11, 2478204.1].\n\nThe above results are given in terms of absolute numbers. In relative\nterms, the response variable showed an increase of +124.34%. The 95%\ninterval of this percentage is [116.79%, 132.08%].\n\nThis means that the positive effect observed during the intervention\nperiod is statistically significant and unlikely to be due to random\nfluctuations. It should be noted, however, that the question of whether\nthis increase also bears substantive significance can only be answered\nby comparing the absolute effect (220383.16) to the original goal\nof the underlying intervention.\n\nThe probability of obtaining this effect by chance is very small\n(Bayesian one-sided tail-area probability p = 0.0).\nThis means the causal effect can be considered statistically\nsignificant.\n```"]