# 如何使用 Seaborn 和 Matplotlib 创建美丽的条形图（包括动画）

> 原文：[https://towardsdatascience.com/how-to-create-beautiful-bar-charts-with-seaborn-and-matplotlib-including-animation-c2bc9ade1d7c](https://towardsdatascience.com/how-to-create-beautiful-bar-charts-with-seaborn-and-matplotlib-including-animation-c2bc9ade1d7c)

## 图表教程

## Python 数据可视化教程

[](https://medium.com/@oscarleo?source=post_page-----c2bc9ade1d7c--------------------------------)[![Oscar Leo](../Images/7733c9147bad2875a35155fca3903aa8.png)](https://medium.com/@oscarleo?source=post_page-----c2bc9ade1d7c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c2bc9ade1d7c--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c2bc9ade1d7c--------------------------------) [Oscar Leo](https://medium.com/@oscarleo?source=post_page-----c2bc9ade1d7c--------------------------------)

·发布在 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c2bc9ade1d7c--------------------------------) ·7 分钟阅读·2023年6月15日

--

![](../Images/0a763b4611b2c631030faccd3c320cbe.png)

作者创建的图表

你好，欢迎来到我的第一个 Matplotlib 和 Seaborn 教程。今天，我将向你展示如何将默认条形图转变为令人惊叹的视觉效果，配有图标和动画。

如果你喜欢这种内容，请告诉我。如果是这样，我可以创建更多类似的内容！ :)

你可以在这个仓库中找到代码和预处理数据：[simple-bar-chart-tutorial](https://github.com/oscarleoo/simple-bar-chart-tutorial)。

让我们开始吧。

## 第1步：创建默认条形图

对于本教程，我创建了一个简单的数据集，其中包含三个流行的开源深度学习框架（`Tensorflow`、`PyTorch` 和 `Keras`）随时间变化的星级总数。

![](../Images/fbc9983d68b8d3d52d22ac17ccfe9c15.png)

作者截图

这是一个简单的函数，它为数据框中的一行创建一个简单的条形图。

[PRE0]

要创建第一个视觉效果，我像这样运行上述代码。

[PRE1]

如果我对数据集的最后一行运行这个函数，并使用橙色，这就是我得到的默认条形图。

![](../Images/71e1b79a4cd419a70a95e19b156d00dd.png)

作者创建的条形图

在接下来的步骤中，我将创建一些额外的函数，我们可以与上述代码一起运行，以改进图表。

让我们尝试创建一些更美丽的东西。

## 第2步：创建主题

首先，我想创建一个函数，允许我测试图表的不同颜色和字体。

Matplotlib 和 Seaborn 中有大量的方法，可以帮助你改变图表的外观。

我更喜欢首先通过使用 `sns.set_style()` 来创建主题。下面是我用来快速创建新主题的代码片段。

[PRE2]

`sns.set_style()` 还有更多选项，你可能会想以不同的方式使用它。但这是最适合我的设置。

我经常去 [colorhunt.co](https://colorhunt.co) 或 [canva.com](https://www.canva.com/colors/color-palettes) 寻找灵感以创建配色方案。当我有喜欢的基础颜色时，如果还需要更多颜色，我会去 [coolors.co](https://coolors.co/)。

这是我为本教程创建的颜色调色板（是的，我喜欢紫色）。

![](../Images/16859174bd444096d52ae74915938758.png)

作者截图

我选择的字体是“PT Mono”，根据这个决定，我可以运行以下代码。

[PRE3]

如果我现在运行原始代码以创建条形图，我得到以下结果。

![](../Images/af163bf5e829f5021c670cc5a3257d7c.png)

作者创建的条形图

这是一项明显的改进，但还不够好。让我们继续格式化标题文本和轴标签。

## 步骤 3: 文本格式化

我首先注意到的是轴标签需要更大。图表中显示的所有信息都应该易于一眼看清。

我不喜欢 x 轴上数字的显示方式。我想用 75K 替代 75000，以获得一个更不令人畏惧的外观。

这就是我创建这个函数的原因。

[PRE4]

对于标题，我添加了参数以增加字体大小并调整位置。

这是创建带有我新修改的图表的代码。

[PRE5]

这是结果。

![](../Images/28eea820ca81b91c76fcff470f51aad2.png)

作者创建的条形图

现在看起来相当不错，但现在是时候添加一些图标魔法了。

## 步骤 4: 添加图标

向图表中添加图像和图标很有趣，但也很棘手。将它们放在完美的位置或以理想的大小显示并不总是那么简单。

以下函数通过使用`xycoords="data"`和来自我的数据框的值，将图形中每个条形的末尾添加图标。

`bboxprops`中的`boxstyle`参数创建了一个白色圆形背景。

[PRE6]

我想将图标放在一个白色圆圈上，并用与图表背景相同的深紫色添加边框。

到目前为止，我还没有找到一种好的方法来动态处理`zoom`参数，所以我手动调整以获得正确的尺寸。

现在我创建图表的代码如下。

[PRE7]

这就是我得到的结果。

![](../Images/01dfe35feb8f42b8b302a71ad09db829.png)

作者创建的条形图

为了添加星形图标，我创建了另一个函数，它使用 `xycoords="axes fraction"` 在图表上的任意位置添加自定义图标。

[PRE8]

在下一个技巧中，我通过在标题中添加额外的空格并调整`x`和`y`参数，为星形图标留出空间，以将图标放置在正确的位置。

[PRE9]

现在我们的条形图是这样的，我们快完成了。

![](../Images/5b8829c09db2e4836942f792e9ed87bf.png)

作者创建的条形图

看起来很棒，但现在我想将图表转换为更通用的格式。

让我们通过添加一些填充来解决那个被挤压的外观问题。

## 步骤 5: 将图表转换为图像

在这一部分，我创建了一个函数，它将图形转换为PIL图像。PIL图像在我们教程的最后步骤中更易于操作。

[PRE10]

我还创建了以下函数，以在图表周围添加填充。

[PRE11]

这是生成图表的新版本代码，我用我们的新方法替代了标准的`plt.show()`。

[PRE12]

这是结果。

![](../Images/0a763b4611b2c631030faccd3c320cbe.png)

作者创建的条形图

太棒了！

我们现在已经把默认的条形图变成了更美丽的样子。

让我们用一个额外的部分结束。

## 额外部分：创建动画

因为我们把代码分成了可重用的函数，所以创建动画相当简单。

我们需要做的就是多次运行代码，使用不同的值，并将帧拼接在一起。

这是一个循环，我从数据集中取了最后2000行中的200行。我还通过设置`xlim=(0, 185000)`来修复x轴，以避免值闪烁。

[PRE13]

接下来，我使用`imageio`来创建一个GIF。

[PRE14]

这是结果。

![](../Images/fbbc22098563ad0256383123f7151ed3.png)

作者创建的可视化

这标志着本教程的结束，希望你喜欢。如果喜欢，请分享这个故事并订阅我的[频道](https://medium.com/@oscarleo)。

你也可以在Twitter上关注我：[@oscarle3o](https://twitter.com/oscarl3o)

感谢阅读。

下次见！ :)
