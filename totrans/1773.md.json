["```py\ngsutil mb gs://<PROJECT_ID>-europe-west1-backup\n```", "```py\n# Enable the Composer Service\ngcloud services enable composer.googleapis.com\n\n# Create the Environment service account. Name it \"sac-cmp\"\ngcloud iam service-accounts create sac-cmp\n\n# Add the role Composer Worker to the sac-cmp service account\ngcloud projects add-iam-policy-binding <PROJECT_ID> \\\n  --member serviceAccount:sac-cmp@<PROJECT_ID>.iam.gserviceaccount.com \\\n  --role roles/composer.worker\n\n# Add the role Composer ServiceAgentV2Ext to the Composer Agent\n# Watch out, do not confuse the Project ID with the Project Number\ngcloud iam service-accounts add-iam-policy-binding sac-cmp@<PROJECT_ID>.iam.gserviceaccount.com \\\n  --member serviceAccount:service-<PROJECT_NUMBER>@cloudcomposer-accounts.iam.gserviceaccount.com \\\n  --role roles/composer.ServiceAgentV2Ext\n```", "```py\n# Enable the CSR API\ngcloud services enable sourcerepo.googleapis.com\n\n# Configure Git. Make sure git is installed before\ngcloud init && git config --global credential.https://source.developers.google.com.helper gcloud.sh\n```", "```py\n# Clone the Git repository\ngit clone git@gitlab.com:marcdjoh/reduce_composer_bill.git\n\n# Push the edited files into the CSR repository reduce_composer_bill\n# To do that, follow the instructions in the CSR console \n```", "```py\nsteps:\n\n  - name: gcr.io/cloud-builders/gcloud\n    entrypoint: /bin/bash\n    id: 'Create environment'\n    args:\n      - -c\n      - |\n        set -e  \n        # This is an example project_id and env_name. Use your own\n        project_id=reduce-composer-bill\n        env_name=my-basic-environment\n        gcloud composer environments create ${env_name} --location europe-west1 \\\n          --project ${project_id} --image-version=composer-2.1.10-airflow-2.4.3 \\\n          --service-account sac-cmp@${project_id}.iam.gserviceaccount.com\n\n  - name: gcr.io/cloud-builders/gcloud\n    entrypoint: /bin/bash\n    id: 'Load Snapshot'\n    args:\n      - -c\n      - |\n        set -e\n        # This is an example project_id and env_name. Use your own\n        project_id=reduce-composer-bill\n        env_name=my-basic-environment\n        if gsutil ls gs://${project_id}-europe-west1-backup/snapshots/* ; then\n          snap_folder=$(gsutil ls gs://${project_id}-europe-west1-backup/snapshots)\n          gcloud composer environments snapshots load ${env_name} --project ${project_id} \\\n            --location europe-west1 \\\n            --snapshot-path ${snap_folder}\n        else\n          echo \"There is no snapshot to load\"\n        fi\n\n  - name: gcr.io/cloud-builders/gcloud\n    entrypoint: /bin/bash\n    id: 'Restore Tasks Logs'\n    args:\n      - -c\n      - |\n        set -e\n        # This is an example project_id and env_name. Use your own\n        project_id=reduce-composer-bill\n        env_name=my-basic-environment\n        if gsutil ls gs://${project_id}-europe-west1-backup/tasks-logs/* ; then\n          dags_folder=$(gcloud composer environments describe ${env_name} --project ${project_id} \\\n            --location europe-west1 --format=\"get(config.dagGcsPrefix)\")\n          logs_folder=$(echo $dags_folder | cut -d / -f-3)/logs\n          gsutil -m cp -r gs://${project_id}-europe-west1-backup/tasks-logs/* ${logs_folder}/\n        else\n          echo \"There is no task logs to restore\"\n        fi\n```", "```py\n# Add the project editor role to the Cloud Build service account\ngcloud projects add-iam-policy-binding <PROJECT_ID> \\\n  --member serviceAccount:<PROJECT_NUMBER>@cloudbuild.gserviceaccount.com \\\n  --role roles/editor\n\n# Create a Cloud Build trigger for the Environment creation CICD pipeline\ngcloud builds triggers create manual --name trg-environment-creator \\\n  --build-config create_environment.yaml --repo reduce_composer_bill \\\n  --branch main --repo-type CLOUD_SOURCE_REPOSITORIES\n```"]