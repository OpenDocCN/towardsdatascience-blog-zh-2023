- en: Importance Sampling with Python
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Python çš„é‡è¦æ€§é‡‡æ ·
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/importance-sampling-with-python-93b03eb9ca22](https://towardsdatascience.com/importance-sampling-with-python-93b03eb9ca22)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/importance-sampling-with-python-93b03eb9ca22](https://towardsdatascience.com/importance-sampling-with-python-93b03eb9ca22)
- en: '![](../Images/f7f54b21a31c0992de0b707432134091.png)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f7f54b21a31c0992de0b707432134091.png)'
- en: Photo by [Edge2Edge Media](https://unsplash.com/@edge2edgemedia?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Edge2Edge Media](https://unsplash.com/@edge2edgemedia?utm_source=medium&utm_medium=referral)
    æä¾›ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Learn how to sample from a distribution when you only have access to another
    distribution
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å­¦ä¹ å¦‚ä½•åœ¨åªèƒ½è®¿é—®å¦ä¸€ä¸ªåˆ†å¸ƒæ—¶ä»ä¸€ä¸ªåˆ†å¸ƒä¸­é‡‡æ ·
- en: '[](https://medium.com/@marcellopoliti?source=post_page-----93b03eb9ca22--------------------------------)[![Marcello
    Politi](../Images/484e44571bd2e75acfe5fef3146ab3c2.png)](https://medium.com/@marcellopoliti?source=post_page-----93b03eb9ca22--------------------------------)[](https://towardsdatascience.com/?source=post_page-----93b03eb9ca22--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----93b03eb9ca22--------------------------------)
    [Marcello Politi](https://medium.com/@marcellopoliti?source=post_page-----93b03eb9ca22--------------------------------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@marcellopoliti?source=post_page-----93b03eb9ca22--------------------------------)[![Marcello
    Politi](../Images/484e44571bd2e75acfe5fef3146ab3c2.png)](https://medium.com/@marcellopoliti?source=post_page-----93b03eb9ca22--------------------------------)[](https://towardsdatascience.com/?source=post_page-----93b03eb9ca22--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----93b03eb9ca22--------------------------------)
    [Marcello Politi](https://medium.com/@marcellopoliti?source=post_page-----93b03eb9ca22--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----93b03eb9ca22--------------------------------)
    Â·5 min readÂ·May 10, 2023
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----93b03eb9ca22--------------------------------)
    Â·é˜…è¯»æ—¶é—´ 5 åˆ†é’ŸÂ·2023å¹´5æœˆ10æ—¥
- en: --
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: Introduction
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä»‹ç»
- en: Among the various sampling methods that a data scientist must know one of the
    most important is the one called Importance Sampling.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ•°æ®ç§‘å­¦å®¶å¿…é¡»çŸ¥é“çš„å„ç§é‡‡æ ·æ–¹æ³•ä¸­ï¼Œæœ€é‡è¦çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯æ‰€è°“çš„â€œé‡è¦æ€§é‡‡æ ·â€ã€‚
- en: This method allows us to **sample from one distribution even though we are actually
    only able to sample from a different distribution!** Letâ€™s see how it works.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§æ–¹æ³•ä½¿æˆ‘ä»¬èƒ½å¤Ÿ**å³ä½¿æˆ‘ä»¬å®é™…ä¸Šåªèƒ½ä»å¦ä¸€ä¸ªåˆ†å¸ƒä¸­é‡‡æ ·ï¼Œä¹Ÿèƒ½ä»ä¸€ä¸ªåˆ†å¸ƒä¸­é‡‡æ ·ï¼** è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚
- en: Importance Sampling
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é‡è¦æ€§é‡‡æ ·
- en: Suppose, for example, that taking samples x from the distribution g(x) is infeasible
    because, for example, it is too expensive. But at the same time, we have a distribution
    f(x) that we call importance distribution from which we are able to sample.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ï¼Œä¾‹å¦‚ï¼Œä»åˆ†å¸ƒ g(x) ä¸­é‡‡æ ·æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºï¼Œä¾‹å¦‚ï¼Œè¿™æ ·åšæˆæœ¬å¤ªé«˜ã€‚ä½†ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ä»¥é‡‡æ ·çš„åˆ†å¸ƒ f(x)ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé‡è¦æ€§åˆ†å¸ƒã€‚
- en: We can use sampling of the distribution f(x) to compute statistics about the
    distribution in which we are really interested g(x). Letâ€™s see how.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹åˆ†å¸ƒ f(x) è¿›è¡Œé‡‡æ ·æ¥è®¡ç®—æˆ‘ä»¬çœŸæ­£æ„Ÿå…´è¶£çš„åˆ†å¸ƒ g(x) çš„ç»Ÿè®¡ä¿¡æ¯ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åšã€‚
- en: Imagine that we have a distribution f(x) representing the probability of each
    face of the die. Each face has a probability of 1/6 if the die is â€œfair,â€ so we
    can represent the distribution as follows.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨ç¤ºæ¯ä¸ªéª°å­é¢çš„æ¦‚ç‡çš„åˆ†å¸ƒ f(x)ã€‚å¦‚æœéª°å­æ˜¯â€œå…¬å¹³çš„â€ï¼Œæ¯ä¸€é¢éƒ½æœ‰ 1/6 çš„æ¦‚ç‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†åˆ†å¸ƒè¡¨ç¤ºå¦‚ä¸‹ã€‚
- en: '![](../Images/a3ed8d55d5ee16647742bd12209afb03.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a3ed8d55d5ee16647742bd12209afb03.png)'
- en: Fair Distribution (Image By Author)
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: å…¬å¹³åˆ†é…ï¼ˆå›¾ç‰‡ç”±ä½œè€…æä¾›ï¼‰
- en: We also have another distribution g(x), the one we would like to sample from
    but for some reason are prevented from doing so. In this case, the die is not
    fair and so the distribution is biased. So some faces will have a higher probability
    than others.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜æœ‰å¦ä¸€ä¸ªåˆ†å¸ƒ g(x)ï¼Œæˆ‘ä»¬å¸Œæœ›ä»ä¸­é‡‡æ ·ï¼Œä½†ç”±äºæŸç§åŸå› è¢«é˜»æ­¢ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéª°å­æ˜¯ä¸å…¬å¹³çš„ï¼Œå› æ­¤åˆ†å¸ƒæ˜¯æœ‰åçš„ã€‚æ‰€ä»¥æœ‰äº›é¢ä¼šæ¯”å…¶ä»–é¢æœ‰æ›´é«˜çš„æ¦‚ç‡ã€‚
- en: '![](../Images/35d84494aa391b60e19e22476a288436.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/35d84494aa391b60e19e22476a288436.png)'
- en: Biased Distribution (Image By Author)
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: åå€šåˆ†å¸ƒï¼ˆå›¾ç‰‡ç”±ä½œè€…æä¾›ï¼‰
- en: 'Using our math notions, we are able for each distribution to calculate the
    expected value. So for example E[x] for the first distribution f(x) will be:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æˆ‘ä»¬çš„æ•°å­¦æ¦‚å¿µï¼Œæˆ‘ä»¬èƒ½å¤Ÿè®¡ç®—æ¯ä¸ªåˆ†å¸ƒçš„æœŸæœ›å€¼ã€‚å› æ­¤ï¼Œä¾‹å¦‚ï¼Œç¬¬ä¸€ç§åˆ†å¸ƒ f(x) çš„ E[x] å°†æ˜¯ï¼š
- en: '![](../Images/b94758ec8321bd4c3367ae18f1cf26ba.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b94758ec8321bd4c3367ae18f1cf26ba.png)'
- en: Expected Value f(x) (Image By Author)
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: æœŸæœ›å€¼ f(x)ï¼ˆå›¾ç‰‡ç”±ä½œè€…æä¾›ï¼‰
- en: The same thing naturally applies to g(x).
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ ·çš„åŸç†è‡ªç„¶é€‚ç”¨äº g(x)ã€‚
- en: '![](../Images/442a89d0704b4fecb20512b2a76d1c4e.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/442a89d0704b4fecb20512b2a76d1c4e.png)'
- en: Expected Value g(x) (Image By Author)
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: é¢„æœŸå€¼ g(x)ï¼ˆä½œè€…æä¾›çš„å›¾ç‰‡ï¼‰
- en: Now imagine that we want to calculate statistics from our population by sampling.
    For example, we want to calculate the average value of the result of n rolls of
    a die.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æƒ³è±¡æˆ‘ä»¬æƒ³é€šè¿‡æŠ½æ ·ä»æˆ‘ä»¬çš„æ€»ä½“ä¸­è®¡ç®—ç»Ÿè®¡é‡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³è®¡ç®—æ· n æ¬¡éª°å­çš„ç»“æœçš„å¹³å‡å€¼ã€‚
- en: We roll a fair die n times, and we know from the central limit theorem, that
    as n increases this average value will tend to the expected value.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ·ä¸€ä¸ªå…¬å¹³éª°å­ n æ¬¡ï¼Œæˆ‘ä»¬çŸ¥é“æ ¹æ®ä¸­å¿ƒæé™å®šç†ï¼Œéšç€ n çš„å¢åŠ ï¼Œè¿™ä¸ªå¹³å‡å€¼å°†è¶‹å‘äºé¢„æœŸå€¼ã€‚
- en: '![](../Images/93cf9c3feccfee9d19bfd2e8319baaa9.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/93cf9c3feccfee9d19bfd2e8319baaa9.png)'
- en: Image By Author
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡
- en: Now we would like to calculate the same statistic by also rolling n times the
    other die, the unfair one that has a different probability distribution. The problem
    is that this die does not exist and therefore we cannot experiment!
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬æƒ³é€šè¿‡æ· n æ¬¡å¦ä¸€ä¸ªéª°å­ï¼Œå³ä¸å…¬å¹³çš„éª°å­ï¼Œæ¥è®¡ç®—ç›¸åŒçš„ç»Ÿè®¡é‡ï¼Œé‚£ä¸ªéª°å­å…·æœ‰ä¸åŒçš„æ¦‚ç‡åˆ†å¸ƒã€‚é—®é¢˜æ˜¯è¿™ä¸ªéª°å­ä¸å­˜åœ¨ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å®éªŒï¼
- en: But then how do we do that? What we can do is calculate this statistic by always
    using the fair die but using a â€œ*trick*.â€
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£æˆ‘ä»¬è¯¥å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡å§‹ç»ˆä½¿ç”¨å…¬å¹³éª°å­æ¥è®¡ç®—è¿™ä¸ªç»Ÿè®¡é‡ï¼Œä½†ä½¿ç”¨ä¸€ä¸ªâ€œ*æŠ€å·§*â€ã€‚
- en: We know how to calculate the expected value of this die with the distribution
    g(x). What we go on to do next is to multiply and divide by the same quantity
    f(x).
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çŸ¥é“å¦‚ä½•è®¡ç®—è¿™ä¸ªéª°å­çš„é¢„æœŸå€¼ï¼Œä½¿ç”¨åˆ†å¸ƒ g(x)ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„æ˜¯ä¹˜ä»¥å¹¶é™¤ä»¥ç›¸åŒçš„æ•°é‡ f(x)ã€‚
- en: '![](../Images/6dc6af3b7fd31e770164f1dd167954a3.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6dc6af3b7fd31e770164f1dd167954a3.png)'
- en: Image By Author
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡
- en: Now if we call x all the first part within the summation, this value is practically
    the expected value of f(x) in which x is weighted.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨å¦‚æœæˆ‘ä»¬å°† x å«åšæ±‚å’Œä¸­çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œè¿™ä¸ªå€¼å®é™…ä¸Šæ˜¯ f(x) çš„é¢„æœŸå€¼ï¼Œå…¶ä¸­ x æ˜¯åŠ æƒçš„ã€‚
- en: '![](../Images/4d5ec83a525f073282736e154548ee72.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4d5ec83a525f073282736e154548ee72.png)'
- en: Image By Author
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡
- en: So we can use the same idea as before, and do a sampling in which **we weigh
    each draw by g(x)/f(x)**, and the result should come close to the expected value
    of g.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰çš„ç›¸åŒæ€è·¯ï¼Œè¿›è¡Œä¸€ä¸ªæŠ½æ ·ï¼Œå…¶ä¸­ **æˆ‘ä»¬æŒ‰ g(x)/f(x) æƒé‡æ¯æ¬¡æŠ½å–**ï¼Œç»“æœåº”è¯¥æ¥è¿‘ g çš„é¢„æœŸå€¼ã€‚
- en: All very nice but does it really work? Letâ€™s do some experiments!
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œä½†è¿™çœŸçš„æœ‰æ•ˆå—ï¼Ÿè®©æˆ‘ä»¬åšä¸€äº›å®éªŒï¼
- en: Letâ€™s Code!
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ç¼–ç å§ï¼
- en: First, we import some libraries that we will need.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬å¯¼å…¥ä¸€äº›éœ€è¦çš„åº“ã€‚
- en: '[PRE0]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: We now represent with two numpy arrays the distribution of two dice. The first
    is a fair die in which each face has the same probability. While in the second
    each face has a different probability.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬ç”¨ä¸¤ä¸ª numpy æ•°ç»„è¡¨ç¤ºä¸¤ä¸ªéª°å­çš„åˆ†å¸ƒã€‚ç¬¬ä¸€ä¸ªæ˜¯å…¬å¹³éª°å­ï¼Œæ¯ä¸€é¢çš„æ¦‚ç‡ç›¸åŒã€‚ç¬¬äºŒä¸ªåˆ™æ˜¯æ¯ä¸€é¢æ¦‚ç‡ä¸åŒçš„éª°å­ã€‚
- en: '[PRE1]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: If you want you can plot the distributions using Matplotlib.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥ä½¿ç”¨ Matplotlib ç»˜åˆ¶åˆ†å¸ƒå›¾ã€‚
- en: '[PRE2]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/d19fddf8f9ae16a557f601bf3e5c7c09.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d19fddf8f9ae16a557f601bf3e5c7c09.png)'
- en: Image By Author
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡
- en: '[PRE3]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](../Images/045e74847b6b1e333bde6b6bb209bbd5.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/045e74847b6b1e333bde6b6bb209bbd5.png)'
- en: Image By Author
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾ç‰‡
- en: Now letâ€™s define a function that calculates the empirical mean of the experiments.
    That is, we roll a die n times, and then divide the sum of the results obtained
    by n. The greater the number n chosen, the closer the empirical mean will be to
    the expected value.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å®éªŒçš„ç»éªŒå‡å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ·ä¸€ä¸ªéª°å­ n æ¬¡ï¼Œç„¶åå°†è·å¾—çš„ç»“æœæ€»å’Œé™¤ä»¥ nã€‚é€‰æ‹©çš„æ•°å­— n è¶Šå¤§ï¼Œç»éªŒå‡å€¼å°±ä¼šè¶Šæ¥è¿‘é¢„æœŸå€¼ã€‚
- en: '[PRE4]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: If you now calculate this empirical mean on the two distributions f and g you
    should find a mean value similar to the expected one.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ç°åœ¨åœ¨ä¸¤ä¸ªåˆ†å¸ƒ f å’Œ g ä¸Šè®¡ç®—è¿™ä¸ªç»éªŒå‡å€¼ï¼Œä½ åº”è¯¥ä¼šæ‰¾åˆ°ä¸€ä¸ªç±»ä¼¼äºé¢„æœŸå€¼çš„å‡å€¼ã€‚
- en: '[PRE5]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The problem is that we have to assume a case in which you cannot directly calculate
    the empirical mean of g, because, for example, you do not have such a die and
    therefore cannot experiment. The only die you have is the fair die, and you know
    the distribution of both dice, though.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜åœ¨äºæˆ‘ä»¬å¿…é¡»å‡è®¾ä¸€ä¸ªä½ æ— æ³•ç›´æ¥è®¡ç®— g çš„ç»éªŒå‡å€¼çš„æƒ…å†µï¼Œå› ä¸ºä¾‹å¦‚ï¼Œä½ æ²¡æœ‰è¿™æ ·çš„éª°å­ï¼Œå› æ­¤æ— æ³•å®éªŒã€‚ä½ å”¯ä¸€æ‹¥æœ‰çš„éª°å­æ˜¯å…¬å¹³éª°å­ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œä½ çŸ¥é“ä¸¤ä¸ªéª°å­çš„åˆ†å¸ƒã€‚
- en: Then as we saw earlier we can create a function that samples from the distribution
    f and then by weighing the extracted number in the way we showed earlier, we can
    calculate the mean as if it were extracted from the distribution g. Now all we
    have to do is write the function that does this and see that it actually works.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œæ­£å¦‚æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä»åˆ†å¸ƒ f ä¸­æŠ½æ ·çš„å‡½æ•°ï¼Œç„¶åé€šè¿‡ä¹‹å‰å±•ç¤ºçš„æ–¹å¼åŠ æƒæå–çš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºå¥½åƒå®ƒæ˜¯ä»åˆ†å¸ƒ g ä¸­æå–çš„å‡å€¼ã€‚ç°åœ¨æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç¼–å†™è¿™ä¸ªå‡½æ•°ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦çœŸçš„æœ‰æ•ˆã€‚
- en: '[PRE6]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: We, therefore, launch this importance sampling on a number of launches n = 10,000
    and on the f and g distributions stated earlier.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰æåˆ°çš„få’Œgåˆ†å¸ƒä¸Šè¿›è¡Œäº†n = 10,000æ¬¡çš„é‡è¦æ€§é‡‡æ ·ã€‚
- en: '[PRE7]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The result of this function is 2.24920 which is very close to the expected value!
    So we showed concretely by writing a Python code that this method works!
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªå‡½æ•°çš„ç»“æœæ˜¯2.24920ï¼Œéå¸¸æ¥è¿‘é¢„æœŸå€¼ï¼æ‰€ä»¥æˆ‘ä»¬é€šè¿‡ç¼–å†™Pythonä»£ç å…·ä½“å±•ç¤ºäº†è¿™ä¸ªæ–¹æ³•çš„æœ‰æ•ˆæ€§ï¼
- en: Final Thoughts
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æœ€åçš„æƒ³æ³•
- en: In this article, we looked at one of the most important sampling techniques
    for a data scientist. Importance sampling allows us to sample from one distribution
    even if we only have access to another distribution. This can happen if for example
    if doing sampling from the target distribution is too expensive, or impossible
    for any reason. I hope you have in this article learned something useful, and
    if you are interested in more articles of this type follow me here on Medium![ğŸ˜‰](https://emojipedia.org/it/apple/ios-15.4/faccina-che-fa-l-occhiolino/)
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†æ•°æ®ç§‘å­¦å®¶æœ€é‡è¦çš„é‡‡æ ·æŠ€æœ¯ä¹‹ä¸€ã€‚é‡è¦æ€§é‡‡æ ·å…è®¸æˆ‘ä»¬ä»ä¸€ä¸ªåˆ†å¸ƒä¸­è¿›è¡Œé‡‡æ ·ï¼Œå³ä½¿æˆ‘ä»¬åªèƒ½è®¿é—®å¦ä¸€ä¸ªåˆ†å¸ƒã€‚å¦‚æœä¾‹å¦‚ä»ç›®æ ‡åˆ†å¸ƒä¸­é‡‡æ ·æˆæœ¬è¿‡é«˜ï¼Œæˆ–è€…ç”±äºä»»ä½•åŸå› ä¸å¯èƒ½è¿›è¡Œé‡‡æ ·ï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿè¿™ç§æƒ…å†µã€‚æˆ‘å¸Œæœ›ä½ åœ¨è¿™ç¯‡æ–‡ç« ä¸­å­¦åˆ°äº†æœ‰ç”¨çš„ä¸œè¥¿ï¼Œå¦‚æœä½ å¯¹è¿™ç±»æ–‡ç« æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨Mediumä¸Šå…³æ³¨æˆ‘ï¼[ğŸ˜‰](https://emojipedia.org/it/apple/ios-15.4/faccina-che-fa-l-occhiolino/)
- en: The End
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“æŸ
- en: '*Marcello Politi*'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '*é©¬å°”åˆ‡æ´›Â·æ³¢åˆ©æ*'
- en: '[Linkedin](https://www.linkedin.com/in/marcello-politi/), [Twitter](https://twitter.com/_March08_),
    [Website](https://marcello-politi.super.site/)'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '[Linkedin](https://www.linkedin.com/in/marcello-politi/), [Twitter](https://twitter.com/_March08_),
    [Website](https://marcello-politi.super.site/)'
