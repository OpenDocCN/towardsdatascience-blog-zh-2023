- en: 'Loguru: Simple as Print, Flexible as Logging'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/loguru-simple-as-print-flexible-as-logging-c964467f64aa](https://towardsdatascience.com/loguru-simple-as-print-flexible-as-logging-c964467f64aa)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The simple logging solution for your data science project
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://khuyentran1476.medium.com/?source=post_page-----c964467f64aa--------------------------------)[![Khuyen
    Tran](../Images/98aa66025ad29b618e875c75f1c400a5.png)](https://khuyentran1476.medium.com/?source=post_page-----c964467f64aa--------------------------------)[](https://towardsdatascience.com/?source=post_page-----c964467f64aa--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----c964467f64aa--------------------------------)
    [Khuyen Tran](https://khuyentran1476.medium.com/?source=post_page-----c964467f64aa--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----c964467f64aa--------------------------------)
    ·8 min read·Jul 17, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/3829b994881a3b1be639cbae3c28152d.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
- en: Image by Author
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: '*Originally published at* [*https://mathdatasimplified.com*](https://mathdatasimplified.com/2023/07/17/simplify-your-python-logging-with-loguru/)
    *on July 17, 2023.*'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: Why Use Logging in a Data Science Project?
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Data scientists often use the print function to debug their code. However, as
    the number of print statements increases, it becomes difficult to identify where
    the output is from due to the lack of line numbers or function names.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Output:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: When putting the code into production, manually going through and removing all
    the debugging lines can be a tedious and error-prone task.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Logging provides the perfect solution for this problem by allowing data scientists
    to specify different levels (debug, info, warning, error) for their output.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Output:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: By setting appropriate log levels, data scientists can selectively enable or
    disable certain types of output based on their needs. In production environments,
    they can set the log level to “INFO” or higher to exclude debugging logs, keeping
    logs concise and relevant.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Since the logs contain additional information, such as timestamps, function
    names, and line numbers, data scientists can quickly pinpoint the origin of log
    messages.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: Data scientists can also direct log output to a file to review logs from previous
    runs.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Why Are Many Data Scientists Not Using Logging?
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Many data scientists still prefer using print statements over logging because
    print is simpler and doesn’t require as much setup. For small scripts and one-off
    tasks, the overhead of setting up a logging framework seems unnecessary.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Wouldn’t it be nice if there was a library that allows you to leverage the power
    of logging while making the experience as simple as print?
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: That is when Loguru, an open-source Python library, comes in handy. This article
    will show some Loguru features that make it a great alternative to the standard
    logging library.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: 'Feel free to play and fork the source code of this article here:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://github.com/khuyentran1401/Data-science/tree/master/productive_tools/logging_tools?source=post_page-----c964467f64aa--------------------------------)
    [## Data-science/productive_tools/logging_tools at master · khuyentran1401/Data-science'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: Collection of useful data science topics along with articles, videos, and code
    …
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: github.com](https://github.com/khuyentran1401/Data-science/tree/master/productive_tools/logging_tools?source=post_page-----c964467f64aa--------------------------------)
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: Elegant Out-of-the-Box Functionality
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'By default, logging gives boring and not very useful logs:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Output:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: In contrast, Loguru generates informative and vibrant logs by default.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](../Images/54018e60bf25a291e18e51b50a965a91.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
- en: Image by Author
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: Format Logs
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Formatting logs allows you to add useful information to logs such as timestamps,
    log levels, module names, function names, and line numbers.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: 'The traditional logging approach uses the % formatting, which is not intuitive
    to use :'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Output:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'In contrast, Loguru uses the `{}` formatting, which is much more readable and
    easy to use:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Save Logs to Files
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Saving logs to files and printing them to the terminal using the traditional
    logging module requires two extra classes `FileHandler` and `StreamHandler`.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: However, with Loguru, you can attain the same functionality with just the `add`
    method.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Rotate Logs
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Rotating logs prevents the size of log files from getting too large by periodically
    creating new log files and archiving or removing older ones.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: In the logging library, rotating logs requires an additional class called `TimedRotatingFileHandler`.
    The following code switches to a new log file every week ( `when="WO", interval=1`)
    and retains up to 4 weeks' worth of log files ( `backupCount=4`).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: In Loguru, you can replicate this behavior by adding the `rotation` and `retention`
    arguments to the `add` method. The syntax for specifying these arguments is readable
    and easy to use.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Filter
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Filtering in logging allows you to selectively control which log records should
    be output based on specific criteria.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: In the logging library, filtering logs requires creating a custom logging filter
    class.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: In Loguru, you can simply use a lambda function to filter logs.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Catch Exceptions
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Conventional logs for exceptions can be ambiguous and challenging to debug:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '[PRE21]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: The exceptions displayed above are not very helpful as they don’t provide information
    about the values of `c` that triggered the exceptions.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: 'Loguru enhances error identification by displaying the entire stack trace,
    including the values of variables:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '![](../Images/00e66ec52d1208b3a60d0c3b4bda08d6.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
- en: Image by Author
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: Loguru’s `catch` decorator allows you to catch any errors within a function.
    This decorator also identifies the thread on which the error occurs.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Loguru的`catch`装饰器允许你捕获函数中的任何错误。这个装饰器还会识别错误发生的线程。
- en: '[PRE23]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '![](../Images/df176fcc258471a4f72be579f57daf34.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/df176fcc258471a4f72be579f57daf34.png)'
- en: Image by Author
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的图像
- en: But I don’t want to add more dependencies to my Python project
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 但我不想在我的Python项目中增加更多依赖。
- en: Although incorporating Loguru into your project requires installing an additional
    library, it is remarkably lightweight and occupies minimal disk space.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管将Loguru集成到你的项目中需要安装额外的库，但它非常轻量，占用的磁盘空间极少。
- en: Moreover, it helps in reducing boilerplate code, significantly reducing the
    friction associated with using logging and making your project easier to maintain
    in the long run.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，它有助于减少样板代码，显著降低使用日志记录的摩擦，并使你的项目在长期维护中更为轻松。
- en: 'I love writing about data science concepts and playing with different data
    science tools. You can stay up-to-date with my latest posts by:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 我喜欢撰写有关数据科学概念的文章，并玩弄不同的数据科学工具。你可以通过以下方式随时了解我最新的文章：
- en: Subscribing to my newsletter on [Data Science Simplified](https://mathdatasimplified.com/).
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 订阅我的[数据科学简化](https://mathdatasimplified.com/)新闻通讯。
- en: Connect with me on [LinkedIn](https://www.linkedin.com/in/khuyen-tran-1401/)
    and [Twitter](https://twitter.com/KhuyenTran16).
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[LinkedIn](https://www.linkedin.com/in/khuyen-tran-1401/)和[Twitter](https://twitter.com/KhuyenTran16)上与我联系。
