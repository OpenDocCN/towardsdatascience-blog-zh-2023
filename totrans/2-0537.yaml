- en: Comparing Apples to Oranges with python
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/comparing-apples-to-oranges-with-python-51a122252ecf](https://towardsdatascience.com/comparing-apples-to-oranges-with-python-51a122252ecf)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Budget Optimization Illustrated Through a Fruit Salad Example
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@allaei?source=post_page-----51a122252ecf--------------------------------)[![Hamed
    Seyed-allaei](../Images/9e1c23d75874a886660d22d136456f61.png)](https://medium.com/@allaei?source=post_page-----51a122252ecf--------------------------------)[](https://towardsdatascience.com/?source=post_page-----51a122252ecf--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----51a122252ecf--------------------------------)
    [Hamed Seyed-allaei](https://medium.com/@allaei?source=post_page-----51a122252ecf--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----51a122252ecf--------------------------------)
    ·8 min read·Oct 6, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1505a80c925bc8439e13eaaacd3bacd4.png)'
  prefs: []
  type: TYPE_IMG
- en: Image belongs to author
  prefs: []
  type: TYPE_NORMAL
- en: You may think comparing apples to oranges is misguided or illogical, but in
    reality, we all do it daily — it’s the essence of hard decisions. Choosing between
    an apple or an orange poses a challenge, unlike deciding between one apple or
    two — two is clearly better.
  prefs: []
  type: TYPE_NORMAL
- en: 'Life presents many comparisons: **freedom** vs **security**, time vs money,
    immediate satisfaction vs delayed gratification, **growth** vs **profit**, and
    more. Finding the ‘Goldilocks zone’ or the sweet spot in these scenarios often
    calls for a touch of optimization.'
  prefs: []
  type: TYPE_NORMAL
- en: Now, what if the choice extends to bananas, raspberries, with a budget thrown
    into the mix? That’s where simple decisions evolve into a complex array of choices.
    As we delve into optimization and utility, we’ll uncover how a methodical approach
    can navigate such details, be it in making a fruit salad or tackling life’s many
    decisions.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s use a story to show this idea. Long ago, I hosted a party where I served
    a fruit salad that was a big hit. The recipe for a portion was as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Each portion cost around *2 €*.
  prefs: []
  type: TYPE_NORMAL
- en: Now, I’ve been laid off and am short on funds, yet I am hosting the same group
    of people with the same expectations. This time, however, I have a budget of just
    1 euro per portion.
  prefs: []
  type: TYPE_NORMAL
- en: The straightforward idea might be to halve the amounts, but that won’t fly —
    100 grams per person is unacceptably scant, leaving half the guests empty-handed.
    This easy solution is clearly nonoptimal.
  prefs: []
  type: TYPE_NORMAL
- en: If this simple, suboptimal fix satisfies you, stop here. If not, keep reading
    for a more thoughtful solution.
  prefs: []
  type: TYPE_NORMAL
- en: If you want to see the optimal results and you hate math and python, jump to
    the result section. If you are either in love with math or python, keep reading.
  prefs: []
  type: TYPE_NORMAL
- en: Being short on money but having a lot of time, I decided to optimize the solution
    methodically, to get an easy and optimal solution.
  prefs: []
  type: TYPE_NORMAL
- en: 'We start by crafting an objective function to measure the enjoyment from a
    fruit salad. We’ll use the [Cobb-Douglas](https://en.wikipedia.org/wiki/Cobb%E2%80%93Douglas_production_function)
    utility function:'
  prefs: []
  type: TYPE_NORMAL
- en: This function is a favorite in economics, illustrating how different factors
    contribute to utility or production. In our scenario, it highlights the importance
    of each fruit — skip any fruit and the utility plunges to zero, showing the vital
    role of each ingredient. Under a constraint where *a+o+b+r = 200* grams, the function
    is at its best when *a = o = b = r = 50*. Don’t believe me? Feel free to play
    around with the values yourself!
  prefs: []
  type: TYPE_NORMAL
- en: 'However, now our constraint is the budget, not the portion size. We aim to
    maintain the price per portion at 1 euro, slashing the previous budget by half.
    This brings us to the equation:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To fine-tune the amount of each fruit under this budget constraint, while using
    the Cobb-Douglas utility function, we turn to the method of [Lagrange multipliers](https://en.wikipedia.org/wiki/Lagrange_multiplier).
    This method helps in finding the maximum or minimum of a function subject to certain
    constraints. To simplify our task, we take the logarithm of U before diving into
    the Lagrangian, leading to:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/98d56a6aae3a11dba927ab38162a13ec.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 1: Displayed is the log utility versus price per portion, plotted for
    random weight samples. Each price point has a corresponding peak utility, showcasing
    the trade-off between cost and satisfaction. The orange and red dots denote the
    utility values for the original and optimum recipes respectively.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let’s introduce the Lagrangian as:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Which for our fruit salad is:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The Lagrangian is a remarkable mathematical construct that showcases the trade-offs
    between the cost of fruits and the joy they bring. Visualize it as a seesaw: on
    one side, we have our longing for more fruit, and on the other, the stern budget
    constraint. The Lagrangian helps find that sweet spot where we maximize enjoyment
    without breaking the bank.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/55876190fcd89a58ed0f409b1b4d4c17.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 2: The graph illustrates the Lagrangian against the price per portion,
    depicting the balance between cost and enjoyment. The red and orange dots signify
    the optimum and original recipes respectively, with the red dot indicating the
    peak, where enjoyment is maximized within budget constraints.'
  prefs: []
  type: TYPE_NORMAL
- en: 'For those with a knack for mathematics, here’s an interesting tidbit: this
    optimization problem is convex, meaning it has a single peak value, ensuring a
    unique optimal solution, which in turn makes the job of numerical methods simple.
    This characteristic simplifies our quest for the perfect fruit salad.'
  prefs: []
  type: TYPE_NORMAL
- en: Now that you’ve grasped the basics of utility and the Lagrangian, let’s delve
    into the math. If math isn’t your cup of tea, but you fancy Python, feel free
    to jump to the Python section.
  prefs: []
  type: TYPE_NORMAL
- en: 'For those ready to dive into the details, here we go:'
  prefs: []
  type: TYPE_NORMAL
- en: 'By taking the partial derivatives and setting them to zero, we arrive at a
    set of equations, all connected through the variable, λ. Here’s how it pans out:'
  prefs: []
  type: TYPE_NORMAL
- en: 'From here, it’s evident that all equations are tied together through λ, as
    shown below:'
  prefs: []
  type: TYPE_NORMAL
- en: 'This gives us a system of decoupled equations; each fruit has its own equation,
    but all are intertwined through λ. This structure helps us find the optimal values
    for *a*, *o*, *b*, and *r*, as we can express them in terms of λ:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Furthermore, the utility and total price as functions of λ and budget are given
    by:'
  prefs: []
  type: TYPE_NORMAL
- en: The six equations are linked only by λ. Here, λ, known as the shadow price,
    reveals the extra value from easing our budget a bit. Once λ is known, each equation
    can be solved separately, they are [**mutually exclusive and collectively exhaustive**](https://en.wikipedia.org/wiki/MECE_principle)**.**
    Here λ is the One Parameter.
  prefs: []
  type: TYPE_NORMAL
- en: One Parameter to rule them all,
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: One Parameter to find them,
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: One Parameter to bring them all,
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: and in the darkness bind them.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Upon substituting these expressions back into the budget constraint equation,
    we find λ equals 4\. This leads to optimized quantities for our ingredients in
    kilograms: *a=1/12*, *o=1/16*, *b=1/12*, and *r=1/120*, totaling exactly *1 €*
    for a portion of *238* grams.'
  prefs: []
  type: TYPE_NORMAL
- en: This method harmonizes the sweet taste of fruit with the bitter constraints
    of a budget, illustrating how thoughtful optimization helps navigate financial
    hurdles.
  prefs: []
  type: TYPE_NORMAL
- en: Python
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Dive into the code below to visualize the problem:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Now, let’s solve the equations with *sympy*:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Running the second code chunk reveals the precise fruit quantities needed to
    meet our budget while maximizing utility.
  prefs: []
  type: TYPE_NORMAL
- en: Results
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Optimization reveals the best amount for each ingredient:'
  prefs: []
  type: TYPE_NORMAL
- en: '- Apple: *83 gr*.'
  prefs: []
  type: TYPE_NORMAL
- en: '- Orange: *62 gr*.'
  prefs: []
  type: TYPE_NORMAL
- en: '- Banana: *83 gr*.'
  prefs: []
  type: TYPE_NORMAL
- en: '- Raspberry: *8 gr*.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Total portion size: *0.238 kg*, costing exactly 1 euro.'
  prefs: []
  type: TYPE_NORMAL
- en: We’ve retained all the fruity characters in the salad, smartly adjusting their
    proportions. The outcome? A substantial *20%* increase in portion size by reallocating
    the costly raspberry quota to the more economical apples and bananas. Quite resourceful,
    isn’t it?
  prefs: []
  type: TYPE_NORMAL
- en: This method creates a flexible formula, ready to adapt to changing prices, evolving
    recipes, or shifting budgets with little extra effort. The magic lies in the “One
    Parameter” — our mathematical key to balancing cost and satisfaction.
  prefs: []
  type: TYPE_NORMAL
- en: Now, does your business scenario echo this fruit salad dilemma? Need a similar
    optimization? Reach out, and I’ll craft a solution to balance your business ingredients
    within your budget boundaries.
  prefs: []
  type: TYPE_NORMAL
- en: 'Enjoyed the read? Click the clap button below — the more claps, the happier
    I get. Here’s the equation of my happiness:'
  prefs: []
  type: TYPE_NORMAL
- en: Here, *n* is the number of claps, and “!” (factorial) means multiplying all
    positive integer numbers from 1 up to *n*. So, *5!* is *5*4*3*2*1 = 120*.
  prefs: []
  type: TYPE_NORMAL
- en: Feel like sharing? Pass this piece along. Your shares spread the joy of a fun
    optimization tale!
  prefs: []
  type: TYPE_NORMAL
- en: I’d love to hear your thoughts or see your fun optimization ideas in the comments.
    Who knows, your quirky problem could inspire my next story!
  prefs: []
  type: TYPE_NORMAL
- en: 'In the meantime, check out my other fun post:'
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/@allaei/statement-on-organic-life-risk-7f1910feb1bf?source=post_page-----51a122252ecf--------------------------------)
    [## Statement on Artificial Life Risk'
  prefs: []
  type: TYPE_NORMAL
- en: Artificial Life (AL) experts and network figures express their concern about
    AL risk.
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: medium.com](https://medium.com/@allaei/statement-on-organic-life-risk-7f1910feb1bf?source=post_page-----51a122252ecf--------------------------------)
  prefs: []
  type: TYPE_NORMAL
