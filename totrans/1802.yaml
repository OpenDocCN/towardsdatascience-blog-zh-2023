- en: 'Running with Pandas AI: an Exploration of the Boston Marathon'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/running-with-pandas-ai-an-exploration-of-the-boston-marathon-ad9516b34d8a](https://towardsdatascience.com/running-with-pandas-ai-an-exploration-of-the-boston-marathon-ad9516b34d8a)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Striding through the Boston Marathon Winners dataset from start to finish line
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://sejaldua.medium.com/?source=post_page-----ad9516b34d8a--------------------------------)[![Sejal
    Dua](../Images/b9ec1f4907da5e6dfa1c922caa5b326d.png)](https://sejaldua.medium.com/?source=post_page-----ad9516b34d8a--------------------------------)[](https://towardsdatascience.com/?source=post_page-----ad9516b34d8a--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----ad9516b34d8a--------------------------------)
    [Sejal Dua](https://sejaldua.medium.com/?source=post_page-----ad9516b34d8a--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----ad9516b34d8a--------------------------------)
    ·9 min read·May 22, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d6458818dcf988949ccea46e6c5c796c.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Miguel A Amutio](https://unsplash.com/@amutiomi?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/s/photos/boston-marathon?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  prefs: []
  type: TYPE_NORMAL
- en: As I stood amidst the electrifying atmosphere of this year’s Boston Marathon,
    cheering on the runners with exhilaration, I began to understand the almost inarticulable
    magic of Boston. Marathons demonstrate that with mental fortitude, discipline,
    and determination, ordinary individuals can accomplish extraordinary feats. Even
    larger than that, marathons are a celebration of human progress and potential.
    With Boston being the oldest annual marathon in the world, one of the most challenging
    courses, and also one of the most symbolic events in terms of strength and resilience
    in light of the 2013 bombing, I decided to embark on a journey to explore it through
    a data lens.
  prefs: []
  type: TYPE_NORMAL
- en: 'I was able to find a [Kaggle dataset](https://www.kaggle.com/datasets/zhikchen/boston-marathon-winners-men-and-women)
    with the winners (men & women) of the Boston Marathon, and their winning times.
    The columns of this dataset are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Year (int)**: the year in which the Boston Marathon was held and the winner
    obtained the title'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Winner (str)**: the name of the athlete (male / female) who won the marathon
    in that year'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Country (str)**: the country the athlete represents or is from'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Time (time)**: the finishing time of the athlete in hours, minutes, and seconds'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Distance (miles)**: the distance covered by the athlete in miles'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Distance (km)**: the distance covered by the athlete in kilometers'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Early on, I learned that there is not a publicly available dataset with the
    times of *all* of the elite finishers, which limited the types of questions I
    would be able to explore. However, since this Boston Marathon Winners dataset
    is relatively compact (126 rows x 6 columns), I thought it could be fun to try
    a speedier route, if you will. With the advent and democratization of ChatGPT,
    among other large language models (LLMs) this past year, I wanted to explore how
    AI could be used to level up our analysis and/or bring it to a less technical
    audience.
  prefs: []
  type: TYPE_NORMAL
- en: Coincidentally, on my GitHub explore page, I stumbled upon [Pandas AI](https://github.com/gventuri/pandas-ai),
    which is a Python library that integrates generative artificial intelligence capabilities
    into Pandas, making dataframes conversational. Essentially, what if we could learn
    a thing or two about Boston Marathon winners just by talking to our data set?
    *That would be a game changer.*
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0ee70422254fbd583263ab2e60c79a7d.png)'
  prefs: []
  type: TYPE_IMG
- en: Image generated with DALL-E
  prefs: []
  type: TYPE_NORMAL
- en: Pandas AI has great documentation for how to get set up with your Open AI token,
    your choice of LLM, etc., so I will dive straight into the analysis, but it is
    worth mentioning that there are a couple of handy parameters a user can leverage
    when invoking Pandas AI. You can ask for a conversational response, and you can
    also ask Pandas AI to “show code”. In this walkthrough, I will show examples for
    both of these types of prompts.
  prefs: []
  type: TYPE_NORMAL
- en: Analysis
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: First, I downloaded the datasets from Kaggle, read them in using pandas, and
    set up my LLM instance.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/2c46c7197d3b4e4d87218696e536f298.png)'
  prefs: []
  type: TYPE_IMG
- en: Screenshot by author
  prefs: []
  type: TYPE_NORMAL
- en: Next, I asked Pandas AI to do the data cleaning for me because I noticed some
    empty rows. Namely, 2020 did not have a Boston Marathon winner due to the COVID-19
    pandemic. I also noticed that some of the data types were likely not being interpreted
    properly.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/67c6fdd02132dbe3cb457633e91ab0bb.png)'
  prefs: []
  type: TYPE_IMG
- en: Screenshot by author
  prefs: []
  type: TYPE_NORMAL
- en: It handled this task with ease and in just about 30 seconds! What I love most
    about its response is that it shows exactly how my English prompt is addressed
    by each line of code. This makes the package compelling as an educational tool
    for people who are looking to get started with Python for data analysis.
  prefs: []
  type: TYPE_NORMAL
- en: 'I then did a small test of Pandas AI’s fact retrieval capabilities. I asked
    it this question:'
  prefs: []
  type: TYPE_NORMAL
- en: “Who won the Boston marathon in 2022? How much faster or slower was their Time
    compared to the Time in 1922? Please report the answer in minutes.”
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'After a bit of stumbling, it was able to provide some helpful code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Evans Chebet won the Boston marathon in 2022 and was about -12 minutes faster/slower
    than the winner in 1922.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Pretty cool that Pandas AI yielded this insight, but let’s just take a moment
    to digest how unreal this statement is. Clarence DeMar finished the 1922 Boston
    Marathon with a time of 2:18:10\. Flash forward 100 years, and Evans Chebet finishes
    the 2022 Boston Marathon with a time of 2:06:51\. Now, here is the kicker: the
    Boston marathon was actually *only* a 24.5 mile race in 1922\. The distance of
    the race was increased to over 26 miles to adhere to the Olympic standard later
    on, which in our dataset, would be marked by the 1927 race. The 12+ minute improvement
    over the course of a century, marks a tremendous feat in human progress, fitness
    training, and also footwear innovation.'
  prefs: []
  type: TYPE_NORMAL
- en: Visualization
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Pivoting to some visualization prompts, we can now explore the Country column
    to uncover which countries have produced the most Boston Marathon winners.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/2a26d5d25827723267ac788c95958d7a.png)'
  prefs: []
  type: TYPE_IMG
- en: Screenshot by author
  prefs: []
  type: TYPE_NORMAL
- en: The bar chart above demonstrates that the U.S. has dominated the Boston Marathon
    over the long term history of the race, followed by Kenya, Canada, Japan, Finland,
    and Ethiopia. This insight is to be taken with a grain of salt because we are
    only showcasing the winners here, and I imagine that the race did not have a lot
    of international participants in the early 1900s. Perhaps we can contextualize
    these insights by understanding when runners representing Kenya, Canada, Japan,
    and other countries, secured their wins, over time.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/afb7bf947b8a7a0658543f337bd82d9e.png)'
  prefs: []
  type: TYPE_IMG
- en: Screenshot by author
  prefs: []
  type: TYPE_NORMAL
- en: The scatterplot above shows us just how drastically winning times have dropped
    over the 127 year history of the Boston marathon. Individual runners can improve
    their personal best time for the marathon by quite a bit, if their training reflects
    major fitness improvement, but for the winning time to decrease by over 45 minutes,
    that shows true longitudinal performance evolution. As mentioned before, it is
    worth bearing in mind that the distance of the Boston Marathon course started
    at 24.5 miles, and only increased to 26+ miles in the 1920s, as evidenced by the
    upward spike in the points on the plot around that time. The most consistently
    fast finish times appear to reside during the 1990-early 2000s period. There has
    been an a higher amount of variance in winning times since around 2005, which
    could be worth looking into in the future!
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, let’s see if we can color code this scatterplot by the Country of the
    winning runner. There will be too many colors going on if we represent each runner
    with their Country, so let’s only color-code the top countries. We can represent
    points for runners that do not represent top countries with an “Other” label.
    We will implement this visualization in 2 steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Ask Pandas AI to create our top countries array
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ask Pandas AI to color code the previously shown scatterplot by top countries
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'For step 1, this was the prompt given to Pandas AI:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'It gave back the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'For step 2, this was the prompt given to Pandas AI:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'We received back the following pretty involved code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/2153c5cf56ad70cf51cc6332bb337b6b.png)'
  prefs: []
  type: TYPE_IMG
- en: Screenshot by author
  prefs: []
  type: TYPE_NORMAL
- en: As we can see above, the earlier hypothesis that international runners did not
    start accumulating Boston Marathon wins till later on is, in fact, validated by
    the scatterplot. Until the 1940s, American and Canadian runners seemed to dominate
    the Boston Marathon. From 1950 on, we see more green points, indicating a higher
    prevalence of runners from elsewhere. We also see a brief period of Finnish dominance
    in the 1950s. Then, from 1970 to present day, we see a shift from Americans owning
    the Boston hills to Kenyan and Ethiopian runners going for gold.
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This is only the beginning…
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In this article, I have touched on cleaning, grouping, and visualization tasks
    that can be accelerated with the help of Pandas AI. It was incredibly rewarding
    to get to take Pandas AI for a spin with this project. I am personally excited
    that, after just being released a couple of weeks ago, it can already augment
    and expedite EDA work. I also want to point out that it is not all unicorns and
    rainbows when it comes to leveraging AI today. If you are a data analyst, fear
    not — Pandas AI is not at all coming to replace you…
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d3df00ae598995a68b7ddd920ee7e3eb.png)'
  prefs: []
  type: TYPE_IMG
- en: Screenshot by author
  prefs: []
  type: TYPE_NORMAL
- en: In fact, sometimes it can be a little bit naive / sarcastic in the way it responds
    to certain prompts (see example above). That being said, using it as a tool to
    boost your own productivity is something I’d definitely encourage (*as long as
    you have considered the privacy implications of your data*).
  prefs: []
  type: TYPE_NORMAL
- en: Its use cases and functionality will only continue to improve from here. In
    particular, I am excited to test out different LLMs, integrate it with different
    data user interfaces, such as Google Sheets, merge dataframes with ease, and also
    one day hopefully ask predictive questions, like *who will win the Boston marathon
    next year?*
  prefs: []
  type: TYPE_NORMAL
- en: Links & References
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Project Code: [https://github.com/sejaldua/boston-marathon-study-sesh](https://github.com/sejaldua/boston-marathon-study-sesh)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Data Source: [https://www.kaggle.com/datasets/zhikchen/boston-marathon-winners-men-and-women/code](https://www.kaggle.com/datasets/zhikchen/boston-marathon-winners-men-and-women/code)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Pandas AI: [https://github.com/gventuri/pandas-ai](https://github.com/gventuri/pandas-ai)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
