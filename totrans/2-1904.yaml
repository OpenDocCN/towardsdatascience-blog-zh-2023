- en: 'SquirrelML: Predicting Squirrel Approach in NYC’s Central Park'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SquirrelML：预测纽约中央公园的松鼠接近行为
- en: 原文：[https://towardsdatascience.com/squirrelml-predicting-squirrel-approach-in-nycs-central-park-8c3719d8ff65](https://towardsdatascience.com/squirrelml-predicting-squirrel-approach-in-nycs-central-park-8c3719d8ff65)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/squirrelml-predicting-squirrel-approach-in-nycs-central-park-8c3719d8ff65](https://towardsdatascience.com/squirrelml-predicting-squirrel-approach-in-nycs-central-park-8c3719d8ff65)
- en: 'Explore squirrel behavior in NYC’s Central Park through ML: Clustering sightings
    & predicting encounters with interactive insights'
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通过机器学习探索纽约中央公园的松鼠行为：聚类观察和预测互动见面
- en: '[](https://victormurcia-53351.medium.com/?source=post_page-----8c3719d8ff65--------------------------------)[![Victor
    Murcia](../Images/0041e70a3e7b6b643338a9570257a719.png)](https://victormurcia-53351.medium.com/?source=post_page-----8c3719d8ff65--------------------------------)[](https://towardsdatascience.com/?source=post_page-----8c3719d8ff65--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----8c3719d8ff65--------------------------------)
    [Victor Murcia](https://victormurcia-53351.medium.com/?source=post_page-----8c3719d8ff65--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://victormurcia-53351.medium.com/?source=post_page-----8c3719d8ff65--------------------------------)[![Victor
    Murcia](../Images/0041e70a3e7b6b643338a9570257a719.png)](https://victormurcia-53351.medium.com/?source=post_page-----8c3719d8ff65--------------------------------)[](https://towardsdatascience.com/?source=post_page-----8c3719d8ff65--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----8c3719d8ff65--------------------------------)
    [Victor Murcia](https://victormurcia-53351.medium.com/?source=post_page-----8c3719d8ff65--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----8c3719d8ff65--------------------------------)
    ·18 min read·Dec 20, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发表于[Towards Data Science](https://towardsdatascience.com/?source=post_page-----8c3719d8ff65--------------------------------)
    ·18分钟阅读·2023年12月20日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/62f6c3e4ab66223281431921e2943790.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/62f6c3e4ab66223281431921e2943790.png)'
- en: Photo by [Tj Holowaychuk](https://unsplash.com/@tjholowaychuk?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash)
    on [Unsplash](https://unsplash.com/photos/brown-and-white-squirrel-on-brown-tree-trunk-D18ZnjlhVqM?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 照片由[Tj Holowaychuk](https://unsplash.com/@tjholowaychuk?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash)拍摄，发布于[Unsplash](https://unsplash.com/photos/brown-and-white-squirrel-on-brown-tree-trunk-D18ZnjlhVqM?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash)。
- en: '[NYCOpenData](http://opendata.cityofnewyork.us/) has a treasure trove of both
    interesting and rich datasets to explore related to topics concerning health,
    environment, business, and education. I stumbled upon the [2018 Central Park Squirrel
    Census](https://data.cityofnewyork.us/Environment/2018-Central-Park-Squirrel-Census-Squirrel-Data/vfnx-vebw)
    dataset and I knew immediately that I had to do something with it. This dataset
    deals with squirrel sightings collected over the course of two weeks by volunteers
    in Central Park. After looking through the data dictionary, I was drawn to a feature
    named ‘Approaches’ that denotes whether a squirrel was observed approaching a
    human. I thought it’d be neat to train a machine learning (ML) model to assist
    me in determining whether a squirrel located within the bounds of Central Park
    would approach me. This article will go through this weekend project where I detail
    the entire process towards building that model. There’s a little bit of everything
    in this project: there’s work with geospatial data, clustering, visualization,
    feature engineering, unstructured text, model training, model calibration and
    model deployment.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[NYCOpenData](http://opendata.cityofnewyork.us/)拥有丰富的有趣数据集，涉及健康、环境、商业和教育等话题。我偶然发现了[2018
    Central Park Squirrel Census](https://data.cityofnewyork.us/Environment/2018-Central-Park-Squirrel-Census-Squirrel-Data/vfnx-vebw)数据集，并立即决定要对其进行一些处理。该数据集记录了志愿者在两周内在中央公园收集的松鼠观察数据。浏览数据字典后，我被一个名为‘Approaches’的特征吸引，该特征表示是否观察到松鼠接近人类。我认为训练一个机器学习（ML）模型来帮助我判断位于中央公园范围内的松鼠是否会接近我会很有趣。本文将详细介绍这个周末项目的整个过程。这个项目涉及许多内容：地理空间数据处理、聚类、可视化、特征工程、非结构化文本、模型训练、模型校准和模型部署。'
- en: I deployed the model in a streamlit app where you can enter your coordinates
    and other features which will tell you the probability of a squirrel approaching
    you. You can play with it [here](https://squirrelml.streamlit.app/). Also, if
    you are interested in looking through some of the code, I’ve posted the .ipynb
    [here](https://github.com/victormurcia/SquirrelML/blob/main/Squirrel_ML.ipynb).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 我在streamlit应用中部署了该模型，你可以输入你的坐标和其他特征，这将告诉你松鼠接近你的概率。你可以在[这里](https://squirrelml.streamlit.app/)玩这个应用。如果你对查看一些代码感兴趣，我已将.ipynb文件发布在[这里](https://github.com/victormurcia/SquirrelML/blob/main/Squirrel_ML.ipynb)。
- en: Loading and Initial EDA
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据加载和初步EDA
- en: The data loading was pretty standard.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 数据加载相当标准。
- en: '[PRE0]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To carry out the initial EDA I used dataprep to rapidly get an initial idea
    of what sorts of feature distributions, cardinalities, patterns, missing data,
    and correlations are present in the raw dataset. You can see the report [here](https://github.com/victormurcia/SquirrelML/blob/main/EDA/Initial%20EDA.html).
    There were several useful insights that I gained from this which allowed me to
    plan my subsequent feature engineering and remove redundant/unnecessary features.
    Some of the most notable observations I gleaned from this EDA were as follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行初步的EDA，我使用了dataprep来快速了解原始数据集中存在的特征分布、基数、模式、缺失数据和相关性。你可以查看报告[这里](https://github.com/victormurcia/SquirrelML/blob/main/EDA/Initial%20EDA.html)。从中获得了几个有用的见解，这些见解帮助我规划后续的特征工程，并移除冗余/不必要的特征。以下是我从这次EDA中获得的一些显著观察结果：
- en: The dataset is comprised of 3023 unique observations, 31 columns, with 13% of
    cells missing.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据集由3023个独特观察值、31列组成，其中13%的单元格缺失。
- en: Most of the features are categorical and Boolean.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数特征是分类的和布尔值的。
- en: The latitude and longitude entries appear to have an approximately tetramodal
    distribution
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 纬度和经度条目似乎有一个大致的四峰分布
- en: The “Shift” column is fairly balanced (~55% of observations were made in the
    afternoon/night)
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “移位”列相当平衡（~55%的观测是在下午/晚上进行的）
- en: The “Indifferent” column is fairly balanced (~51% of entries are False)
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “漠不关心”列相当平衡（~51%的条目为False）
- en: The vast majority of squirrels are Adults and have a primary fur color of Gray
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数松鼠是成年松鼠，主要毛色为灰色
- en: The most common location squirrels were observed in were trees
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 观察到的最常见的位置是树木
- en: Color notes, Specific location, Other Activities, and Other Interactions are
    text columns that have a lot of missing data
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 颜色备注、具体位置、其他活动和其他互动是有大量缺失数据的文本列
- en: The “Approaches” is HIGHLY imbalanced (94.11% of the observations are negative)
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “接近”高度不平衡（94.11%的观测值为负）
- en: '![](../Images/369879f64a7d1156885c887e688b2f65.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/369879f64a7d1156885c887e688b2f65.png)'
- en: Massive class imbalance in the target variable ‘Approaches’. Image by author
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 目标变量‘接近’的巨大类别不平衡。图片由作者提供
- en: These are all useful observations since now I know that the problem I’m trying
    to tackle is an imbalanced, binary classification problem. In addition to this,
    now I know that using clustering methods to group squirrel sightings might be
    useful moving forward. Furthermore, the text columns may contain information that
    will enable creation of new, potentially useful features.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这些都是有用的观察，因为现在我知道我尝试解决的问题是一个不平衡的二分类问题。此外，我现在知道使用聚类方法对松鼠观测进行分组可能在未来会有用。此外，文本列可能包含可以创建新、潜在有用特征的信息。
- en: Clustering Squirrel Sightings
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 松鼠观测的聚类
- en: As can be seen below the squirrel sightings appeared to have approximately a
    trimodal or tetramodal distribution. I think it would be interesting to try and
    group squirrel sightings based on location.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 如下所示，松鼠观测似乎具有大致的三峰或四峰分布。我认为尝试根据位置对松鼠观测进行分组会很有趣。
- en: '![](../Images/8d028fecd94996cacac578a03d36718c.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8d028fecd94996cacac578a03d36718c.png)'
- en: Longitude and Latitude of squirrel sightings within the bounds of Central Park.
    Image by author.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 中央公园范围内松鼠观测的经度和纬度。图片由作者提供。
- en: 'Though we can try and establish an optimal number of clusters via silhouette
    scores or the elbow method, in this case, I wanted to simply partition the sightings
    into 4 areas. I ran the K-Means algorithm using the Latitude and Longitude as
    shown below:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们可以通过轮廓系数或肘部法则来尝试确定最佳的簇数，但在这种情况下，我想将观测结果简单地划分为4个区域。我使用纬度和经度运行了K均值算法，如下所示：
- en: '[PRE1]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The results of the K-Means algorithm are shown below. There are some clear boundaries
    which I’ve accentuated a bit via a Voronoi Diagram. You can also see the centroids
    of each cluster depicted via red X’s. I’ve also made it so that the points that
    correspond to an approaching squirrel are not enclosed in a dark circle, while
    those that didn’t approach are enclosed.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: K-Means算法的结果如下所示。有一些明显的边界，我通过Voronoi图进行了强调。你还可以看到每个簇的质心通过红色X标记出来。我还使得那些接近松鼠的点没有被包围在暗圈中，而那些没有接近的点则被包围在内。
- en: '![](../Images/db99f61059ea9a7ff11e0536ea3c36c0.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/db99f61059ea9a7ff11e0536ea3c36c0.png)'
- en: Results of K-Means clustering on Latitude and Longitude of Squirrel Census dataset.
    Image by author.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 松鼠普查数据集的纬度和经度上的K-Means聚类结果。图片由作者提供。
- en: Geospatial Visualization of Squirrel Sightings
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 松鼠观测的地理空间可视化
- en: Geospatial data is fun to work with. If you were to look up an aerial view of
    Central Park or if you are simply familiar with the layout then you would be able
    to see the one-to-one correspondence of the layouts. For instance, there are 3
    major bodies of water in central park which are present in the empty areas of
    the plot. You can find a labeled layout of Central Park [here](https://en.wikivoyage.org/wiki/Manhattan/Central_Park).
    For instance, that large ‘empty’ area situated in the ‘Yellow’ cluster is actually
    ‘The Reservoir’. On the top right, we also see an emptyish area that corresponds
    to the ‘Harlem Meer’. Finally, in the bottom left of the blue cluster we can see
    the body water known as ‘The Lake’.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 地理空间数据处理起来很有趣。如果你查看中央公园的鸟瞰图，或者对其布局比较熟悉，你就会看到布局的逐一对应。例如，中央公园有三个主要的水体，这些水体出现在图上的空白区域。你可以在[这里](https://en.wikivoyage.org/wiki/Manhattan/Central_Park)找到中央公园的标注布局。例如，位于‘黄色’簇中的那个大‘空旷’区域实际上是‘水库’。右上方，我们还可以看到一个接近空白的区域，对应于‘哈莱姆湖’。最后，在蓝色簇的左下角，我们可以看到被称为‘湖泊’的水体。
- en: 'To better take advantage of this data, I thought it’d be neat to visualize
    these sightings directly on a geospatially accurate map of NYC. To do this, I
    once again turned to NYCOpenData and download the shape (.shp) files for NYC over
    [here](https://data.cityofnewyork.us/Housing-Development/Shapefiles-and-base-map/2k7f-6s2k).
    Your download should include 4 different files: a .shp file, .a .prj file, a .dbf
    file, and a .shx file. Make sure that all those files are in the same directory
    before you load them. Once I had those files downloaded, I loaded them into my
    environment with Geopandas. These files are generally quite large and can take
    a few minutes to load (in my case it took about 5 minutes).'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地利用这些数据，我认为将这些观测结果直接可视化在地理空间准确的纽约市地图上会很有趣。为此，我再次转向NYCOpenData，并从[这里](https://data.cityofnewyork.us/Housing-Development/Shapefiles-and-base-map/2k7f-6s2k)下载了纽约市的shape
    (.shp)文件。你的下载应该包括4个不同的文件：一个.shp文件、一个.prj文件、一个.dbf文件和一个.shx文件。在加载这些文件之前，请确保所有文件都在同一个目录中。下载这些文件后，我用Geopandas将它们加载到环境中。这些文件通常比较大，加载可能需要几分钟（在我的情况下大约需要5分钟）。
- en: '[PRE2]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: To make the .shp file a bit more lightweight and faster to work with, I used
    Geofeather to convert Geopandas frame into a feather object.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使.shp文件更加轻量化并提高工作速度，我使用Geofeather将Geopandas框架转换为feather对象。
- en: '[PRE3]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Now I can regenerate the nyc_map from the feather file and plot it which is
    many times faster than doing it using the original .shp file. We can plot the
    nyc_map as follows:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我可以从feather文件中重新生成nyc_map并绘制它，这比使用原始的.shp文件要快很多。我们可以如下绘制nyc_map：
- en: '[PRE4]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'And the result is below:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![](../Images/107b7c8434c67d8b6d2f0e9e53d704b6.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/107b7c8434c67d8b6d2f0e9e53d704b6.png)'
- en: Geospatially accurate NYC Map. Image by author.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 地理空间准确的纽约市地图。图片由作者提供。
- en: That looks great! You can also see Central Park over on the top left of the
    NYC landmass. As cool as this view is, I want to focus more on the Central Park
    area. Given that, I also won’t need to have the entire dataset available so I’ll
    filter it based on the squirrel sighting coordinates. This will also have the
    added benefit of speeding all subsequent operations since we will be dealing with
    a much smaller subset of the NYC map.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来很棒！你还可以在纽约市陆块的左上角看到中央公园。尽管这个视图很酷，但我想更多地关注中央公园区域。因此，我也不需要整个数据集，只需根据松鼠观测坐标进行过滤。这还将加速所有后续操作，因为我们将处理纽约市地图的一个更小的子集。
- en: 'A centroid is the geometric center of a shape. In the context of geospatial
    data, it refers to the central point of a geographic feature. This point is the
    average position of all the points in the shape. For simple shapes like polygons
    (e.g., the boundary of a city or park), the centroid is often inside the shape.
    For more complex shapes, especially those with concave parts, the centroid might
    be outside the physical boundaries of the shape. There are a few approaches one
    can use to calculate centroids. Here I’m simply using the shapely package alongside
    the nyc_map:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 质心是形状的几何中心。在地理空间数据的上下文中，它指的是地理特征的中心点。这个点是形状中所有点的平均位置。对于简单的形状如多边形（例如城市或公园的边界），质心通常位于形状内部。对于更复杂的形状，尤其是那些有凹部的形状，质心可能位于形状的物理边界之外。有几种方法可以用来计算质心。这里我只是使用了shapely包和nyc_map：
- en: '[PRE5]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Then, I can filter the nyc_map using the coordinate ranges of the squirrel sightings.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我可以使用松鼠目击的坐标范围来过滤nyc_map。
- en: '[PRE6]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: And now we can plot the filtered NYC map, which, if we did things correctly
    should be centered around Central Park.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以绘制过滤后的纽约市地图，如果我们做对了的话，它应该以中央公园为中心。
- en: '[PRE7]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The result is below:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![](../Images/fe0b3a41457a8dea0dbb2fc7cae263d5.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fe0b3a41457a8dea0dbb2fc7cae263d5.png)'
- en: Geospatially accurate plot of NYC’s Central Park. Image by author.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 纽约中央公园的地理空间准确图。图片由作者提供。
- en: 'Success! However, we have one more thing to do. I want to include the squirrel
    sightings, colored by cluster and accentuated based on squirrel approach on this
    plot. We can do that using the code below:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 成功了！不过，我们还有一件事要做。我想在这个图上包括按集群着色的松鼠目击情况，并根据松鼠的接近程度进行强调。我们可以使用下面的代码来实现：
- en: '[PRE8]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'And the result of this is below:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这个结果如下：
- en: '![](../Images/72200bb2070627b37eacc1cb32361170.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/72200bb2070627b37eacc1cb32361170.png)'
- en: Squirrel sightings colored by cluster on geospatially accurate map of NYC’s
    Central Park. Image by author.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 按集群着色的松鼠目击情况，在地理空间准确的纽约中央公园地图上。图片由作者提供。
- en: That’s pretty cool! I’m pretty happy with this. There was one more visualization
    that I was thinking of doing. I found a really cool aerial picture of Central
    Park. I thought it would be neat to try and overlay the squirrel sightings on
    top of the aerial view, however, there are some other effects that were complicating
    the plotting so I figured I’d save that for a future time.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 这真不错！我对这个结果非常满意。我还想做一个可视化。我找到了中央公园的一张非常酷的航拍照片。我认为将松鼠目击情况覆盖到航拍视图上会很有趣，但是，有一些其他效果使得绘图变得复杂，所以我决定将这个任务留到以后再做。
- en: Feature Engineering
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 特征工程
- en: 'As I alluded to in the introduction, there was a fair bit of feature engineering
    opportunities available in this dataset. Most of the new features I created were
    derived from the textual columns. These textual column contained additional descriptions
    made by the volunteers surrounding each squirrel sighting. I identified a few
    key categories and terms associated with each category that I used alongside regular
    expressions to create the new features as shown below:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我在介绍中提到的，这个数据集有很多特征工程的机会。我创建的大多数新特征都是从文本列派生出来的。这些文本列包含了志愿者们对每次松鼠目击的额外描述。我识别出了一些关键类别和与每个类别相关的术语，并结合正则表达式创建了如下的新特征：
- en: '[PRE9]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: In the example above, I was able to create new features like ‘Seen in Tree’,
    ‘Seen in Shrubbery’, and ‘Seen in Rock’ amongst several others. In addition to
    this, some of the columns like ‘Primary Fur Color’ and ‘Highlight Fur Color’ for
    instance, were One Hot Encoded since they had a handful of categories (i.e., Primary
    Fur Color had Gray, Black, Cinnamon and Unknown). There were others and if you
    are interested in looking at the full EDA on the added features as well as looking
    at the full set of features that were created you can check out the report [here](https://github.com/victormurcia/SquirrelML/blob/main/EDA/Preprocessed%20EDA.html).
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的例子中，我能够创建出像‘树上出现’、‘灌木丛中出现’和‘岩石上出现’等新特征。除此之外，一些列如‘主要毛色’和‘突出毛色’等被进行了独热编码，因为它们有几个类别（例如，主要毛色包括灰色、黑色、肉桂色和未知）。还有其他特征，如果你对查看完整的EDA报告以及查看创建的所有特征感兴趣，可以查看[这里](https://github.com/victormurcia/SquirrelML/blob/main/EDA/Preprocessed%20EDA.html)的报告。
- en: '![](../Images/411da7c0708c7f1f0ed85f3d7ce0ca66.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/411da7c0708c7f1f0ed85f3d7ce0ca66.png)'
- en: Dependency plots for various features made from preprocessed dataset. Image
    by author.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 预处理数据集的各种特征的依赖图。图片由作者提供。
- en: 'I created a pipeline to do all the necessary cleaning, formatting, etc. that
    I decided was necessary after playing with the dataset. You can check out all
    the work in the notebook I linked in the beginning of the article. A few things
    worth mentioning are:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我创建了一个管道来进行所有必要的清理、格式化等，这是我在处理数据集后决定必要的。你可以查看我在文章开头链接的笔记本中的所有工作。值得一提的几点是：
- en: We now have 44 features (original dataset had 31)
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们现在有44个特征（原始数据集有31个）。
- en: No observations were dropped so we still have 3023 rows.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 没有删除任何观察值，因此我们仍然有3023行。
- en: There is no missing data anymore. No imputation or dropping of rows was performed.
    Most of the missing data was present in the textual columns. These columns were
    dropped after they were used for feature engineering. In columns like Primary
    Fur Color or Age, I simply treated the NaNs as a new category called ‘Unknown’
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在没有缺失数据了。没有进行插补或删除行。大部分缺失数据出现在文本列中。这些列在用于特征工程后被删除。在像Primary Fur Color或Age这样的列中，我简单地将NaNs视为一个名为“未知”的新类别。
- en: The correlation map below wasn’t particularly helpful. It mostly revealed correlations/relationships
    that I already anticipated. For instance, most of the strong anticorrelations
    are between variables associated with Primary Fur Color (i.e., Gray vs Cinnammon)
    or Squirrel Age (i.e., Adult vs Juvenile).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的相关图并没有特别有用。它主要揭示了我已经预料到的相关性/关系。例如，大多数强反相关是与Primary Fur Color（即，灰色与肉桂色）或Squirrel
    Age（即，成人与幼年）的变量之间的。
- en: '![](../Images/d94dd866f2561d98908d247898d03d72.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d94dd866f2561d98908d247898d03d72.png)'
- en: Pearson Correlation plot for features in preprocessed dataset. Image by author.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 预处理数据集中特征的皮尔逊相关图。图像由作者提供。
- en: At this point I wanted to look at dimensionality reduction techniques like Principal
    Component Analysis (PCA) and t-Distributed Stochastic Neighbor Embedding (tSNE)
    to try and identify and additional patterns/clusters within my data as well to
    gauge which features carry the most weight. The tSNE plot wasn’t particularly
    revealing, though I can sorta see a few groupings in the data. I carried out PCA
    as well and both the Loading and Explained Variance plots were useful in telling
    me that 30 features accounted ~90% of the variance as well as seeing that features
    like Cluster, PFC_Gray, X,Y, PFC_Cinnamon, and HFC_Gray were some of the strongest
    components in the dataset.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，我想查看像主成分分析（PCA）和t-分布随机邻域嵌入（tSNE）这样的降维技术，以尝试识别数据中的附加模式/簇，并评估哪些特征具有最重要的权重。tSNE图并没有特别揭示出什么，尽管我可以在数据中看到一些分组。我也进行了PCA，加载图和解释方差图在告诉我30个特征占了大约90%的方差方面非常有用，还可以看到像Cluster、PFC_Gray、X、Y、PFC_Cinnamon和HFC_Gray这样的特征是数据集中一些最强的成分。
- en: '![](../Images/4b7931de60a80d22ef82368f68c1c5e7.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4b7931de60a80d22ef82368f68c1c5e7.png)'
- en: Dimensionality reduction techniques and analysis on Processed Squirrel Data.
    Image by author.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 降维技术和处理过的松鼠数据分析。图像由作者提供。
- en: Training the Model
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 训练模型
- en: 'From the moment I decided to take a ML approach for this, I knew that there
    were really only two algorithms I’d consider: Decision Tree and Random Forest.
    The reason being… squirrels like trees and that joke is the main reason I decided
    to do this project. Though other algorithms may perform better, their choice wouldn’t
    be as funny. If you have any funny suggestions for approaches let me know :)'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 从我决定采取机器学习方法的那一刻起，我就知道我只会考虑两个算法：决策树和随机森林。原因是……松鼠喜欢树，这个笑话是我决定做这个项目的主要原因。虽然其他算法可能表现更好，但它们的选择就没那么有趣了。如果你有任何有趣的建议，请告诉我
    :)
- en: Anyways, let’s get to modeling. First off, here is a view of how my dataframe
    looks like presently.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 无论如何，接下来我们开始建模。首先，这是我目前的数据框的视图。
- en: '![](../Images/4d09ce873444cf4b512d67ccc1356be3.png)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4d09ce873444cf4b512d67ccc1356be3.png)'
- en: Cleaned, engineered and preprocessed squirrel census dataset. Image by author.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 清理、工程化和预处理的松鼠普查数据集。图像由作者提供。
- en: First thing we need to do is create our train and test sets. One thing to keep
    in mind when doing the splitting is that we must use stratified splitting using
    our target variable since the dataset is highly imbalanced. Stratified splitting
    will preserve the percentage of samples for each class.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要创建我们的训练集和测试集。在进行拆分时需要记住的一点是，我们必须使用目标变量进行分层拆分，因为数据集严重不平衡。分层拆分将保留每个类别的样本百分比。
- en: '[PRE10]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Given how imbalanced the dataset is, an approach I considered is to use data
    augmentation techniques. However, this is something I’ll save for a future iteration
    since introducing synthetic samples can lead to other complications and in my
    experience, they tend to not generalize well.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于数据集的不平衡性，我考虑使用数据增强技术。然而，我将这些内容留待未来的迭代，因为引入合成样本可能会带来其他复杂情况，而且根据我的经验，这些样本通常泛化效果不佳。
- en: In the meantime, I’ll deal with the imbalance by using balanced weights when
    training the models. Regarding metrics, I’m going to look into both the Receiver
    Operating Characteristic Area Under the Curve (ROC-AUC) score and the Precision
    Recall Area Under the Curve (PR-AUC) score. The PR-AUC score in particular is
    useful for imbalanced classification problems since it focuses on the minority
    class while the ROC curve covers both classes.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在此期间，我将通过在训练模型时使用平衡权重来处理不平衡问题。关于指标，我将关注接收者操作特征曲线下面积（ROC-AUC）得分和精确度召回曲线下面积（PR-AUC）得分。特别是PR-AUC得分在不平衡分类问题中很有用，因为它关注少数类，而ROC曲线则涵盖了两个类别。
- en: 'I did a grid search on the Decision Tree and Random Forest models. I used a
    stratified K-fold with 5 splits since I want to preserve the class percentage
    between splits. I also used both the PR-AUC and ROC-AUC as the metrics to optimize
    during the hyperparameter tuning. For the random forest, I looked at n_estimators,
    max_depth, min_samples_split, and min_samples_leaf using a conservative range
    of values. The code for the random forest hyperparameter tuning is shown below:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我对决策树和随机森林模型进行了网格搜索。我使用了5折分层交叉验证，因为我想在分割间保留类别百分比。我还使用了PR-AUC和ROC-AUC作为超参数调优过程中的优化指标。对于随机森林，我查看了n_estimators、max_depth、min_samples_split和min_samples_leaf，使用了保守的数值范围。随机森林超参数调优的代码如下所示：
- en: '[PRE11]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'For the Decision Tree, I also used a small range of values for max_depth, min_samples_split,
    and min_samples_leaf. The code for the hyperparameter tuning of the Decision Tree
    is shown below:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 对于决策树，我也使用了小范围的max_depth、min_samples_split和min_samples_leaf值。决策树超参数调优的代码如下所示：
- en: '[PRE12]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Evaluating and Explaining the Model
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评估和解释模型
- en: 'In evaluating the performance of the best Random Forest and Decision Tree models
    on the highly imbalanced dataset, I observed distinct outcomes in ROC-AUC and
    PR-AUC scores. The Random Forest model excelled with a ROC-AUC score of 0.91,
    significantly outperforming the Decision Tree’s respectable score of 0.77\. This
    indicates its superior ability to distinguish between classes. However, the PR-AUC
    scores, which are crucial in the context of an imbalanced dataset due to their
    focus on the precision-recall balance, told a different story. Both models surpassed
    the baseline performance of a ‘No Skill’ classifier (which predicts the majority
    class in all cases), yet they showed room for improvement in precision and recall:
    the Random Forest achieved a PR-AUC score of 0.46, and the Decision Tree only
    0.20\. These results underscore the importance of focusing on PR-AUC as the target
    metric in imbalanced scenarios and suggest avenues for future improvement, such
    as experimenting with different class imbalance mitigation techniques, adjusting
    decision thresholds, or exploring alternative algorithms better suited for imbalanced
    data.'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在评估最佳随机森林和决策树模型在高度不平衡数据集上的表现时，我观察到了ROC-AUC和PR-AUC评分的明显差异。随机森林模型以0.91的ROC-AUC得分表现优异，显著超过了决策树0.77的体面得分。这表明其在区分类别方面的能力更强。然而，由于PR-AUC评分在不平衡数据集的背景下关注精确度与召回率的平衡，结果却有所不同。两个模型的PR-AUC得分都超过了‘无技能’分类器的基线表现（该分类器在所有情况下都预测主要类别），但在精确度和召回率上仍有改进空间：随机森林的PR-AUC得分为0.46，而决策树仅为0.20。这些结果强调了在不平衡场景下将PR-AUC作为目标指标的重要性，并建议了未来改进的方向，如尝试不同的类别不平衡缓解技术、调整决策阈值或探索更适合不平衡数据的算法。
- en: '![](../Images/1312e28a7d41c1c5ef64d228096b8ce0.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1312e28a7d41c1c5ef64d228096b8ce0.png)'
- en: Results of training and hyperparameter tuning of Random Forest and Decision
    Tree models on Squirrel Census data. Image by author.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 随机森林和决策树模型在松鼠普查数据上的训练和超参数调优结果。图片由作者提供。
- en: The feature importances also show that latitude, longitude, and Indifferent
    are top features contributing the most towards the prediction made by the model.
    This is further supported by the SHAP value plots for both models.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 特征重要性分析还显示，纬度、经度和Indifferent是对模型预测贡献最大的主要特征。这一点通过两种模型的SHAP值图进一步得到了支持。
- en: '![](../Images/fd874d051cb8f50299af250ce817c980.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fd874d051cb8f50299af250ce817c980.png)'
- en: SHAP values for Random Forest and Decision Tree models for Squirrel Census dataset.
    Image by author.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 随机森林和决策树模型在松鼠普查数据集上的SHAP值。图片由作者提供。
- en: The probability distributions for the Random Forest and Decision Tree models
    are shown below. The histogram shows a distribution of predicted probabilities
    with a peak around 0.1 to 0.2 and a long tail extending towards 0.8\. This suggests
    that the Random Forest model has a tendency to predict many instances with a low
    probability of being the positive class, but there’s uncertainty as it does not
    peak near 0 or 1\. The presence of a tail towards the higher probabilities indicates
    that the model is somewhat confident about certain predictions, but overall, there
    seems to be a cautious stance in the predictions, as the probabilities are not
    clustered near 0 or 1\. The Decision Tree histogram shows an extremely peaked
    distribution at probability 0 and very few instances with a probability of 1\.
    This is indicative of a model that is very confident about a large majority of
    instances belonging to the negative class. The lack of instances with intermediate
    probabilities suggests that the Decision Tree model makes very certain predictions
    — it is either very sure an instance is in the positive class or very sure it
    is not. This is typical for decision trees, as they tend to produce more extreme
    probability estimates.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 随机森林和决策树模型的概率分布如下所示。直方图显示了预测概率的分布，峰值在0.1到0.2之间，并有一个长尾延伸至0.8。这表明随机森林模型倾向于预测许多实例为低概率正类，但存在不确定性，因为它没有在0或1附近达到峰值。较高概率的尾部存在，表明模型对某些预测有一定的信心，但总体上预测较为谨慎，因为概率并未集中在0或1附近。决策树直方图显示了在概率0处极为集中的分布，以及很少有概率为1的实例。这表明模型对大多数实例属于负类非常自信。缺乏中间概率的实例表明决策树模型的预测非常确定——它要么非常确信一个实例是正类，要么非常确信它不是。这是决策树的典型特征，因为它们往往会产生更极端的概率估计。
- en: '![](../Images/8fd577b2820219a168b98543583a7ef0.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8fd577b2820219a168b98543583a7ef0.png)'
- en: Probability distributions for Random Forest and Decision Tree models for Squirrel
    Census Data. Image by author.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 随机森林和决策树模型在松鼠普查数据上的概率分布。图片由作者提供。
- en: The Random Forest model is likely to be better calibrated, as it provides a
    smoother distribution of probabilities and does not tend towards the extremes
    as much as the Decision Tree. The Decision Tree’s extreme confidence might be
    a sign of overfitting, where the model has learned the training data too well,
    including noise, leading to overly confident predictions. Neither model shows
    the ideal two-peaked distribution that would indicate high confidence in distinguishing
    between classes. This might suggest that the models are not capturing the underlying
    patterns perfectly and might benefit from further tuning, additional features,
    or more complex modeling techniques. I could certainly play around a bit more
    with features, however, I’ll save that for a future iteration. Hence, I decided
    that probability calibration for the better performing Random Forest model would
    be a good next step.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 随机森林模型可能会更好地进行校准，因为它提供了更平滑的概率分布，并不像决策树那样趋向极端。决策树的极端自信可能是过拟合的迹象，即模型过于精确地学习了训练数据，包括噪声，从而导致过于自信的预测。两个模型都没有显示出理想的双峰分布，这会表明在区分类别方面的高自信。这可能表明模型没有完美地捕捉到潜在模式，可能需要进一步调优、添加特征或采用更复杂的建模技术。我当然可以多尝试一些特征，但我会将其留到将来的迭代中。因此，我决定对表现更好的随机森林模型进行概率校准是一个好的下一步。
- en: Calibrating the Model
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 校准模型
- en: Calibrating a machine learning model is the process of adjusting the predicted
    probabilities to better align with the observed frequencies in the data. It is
    a step that is often overlooked when training models which limits their usability.
    Calibrating a model is important because the raw estimates of a machine learning
    model may not represent the true likelihood of an event. This is crucial to consider
    if your model is to be used for any kind of decision making process (especially
    those where stakes are high). In addition to that, if your probabilities are well-calibrated,
    this can also allow for more meaningful comparisons between different models.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 校准机器学习模型是调整预测概率以更好地与数据中的观测频率对齐的过程。这是一个在训练模型时常常被忽视的步骤，限制了其可用性。校准模型很重要，因为机器学习模型的原始估计可能无法表示事件的真实可能性。如果你的模型用于任何类型的决策过程（特别是那些涉及高风险的），这一点尤为关键。此外，如果你的概率经过良好校准，这也可以使不同模型之间的比较更具意义。
- en: 'To do the calibration, I used Platt Scaling (also known as Sigmoid Calibration).
    This method fits a logistic regression model to the outputs of the classifier.
    The basic workflow is as follows:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行校准，我使用了 Platt Scaling（也称为 Sigmoid 校准）。该方法将逻辑回归模型拟合到分类器的输出。基本工作流程如下：
- en: Train the model
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 训练模型
- en: Split the data
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 划分数据
- en: Fit the calibration model
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 拟合校准模型
- en: Evaluate the calibration
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 评估校准
- en: The code for this process is shown below.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 该过程的代码如下所示。
- en: '[PRE13]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The results of the calibration can be seen below. A perfectly calibrated model
    would have all the points lying exactly on top of the orange curve. The probabilities
    are overall well calibrated with a notable exception at ~ 0.25 where the model
    is clearly underestimating. In addition to this, I also calculated Brier Score
    for the calibration process. Brier Scores range between 0 and 1, where a score
    of 0 represents perfect accuracy and a score of 1 represents perfect inaccuracy.
    The Brier Score for this calibration is 0.0445 which is quite low and therefore
    good.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 校准结果如下所示。一个完全校准的模型应将所有点精确地位于橙色曲线之上。总体而言，概率校准较好，唯一的显著例外是在 ~ 0.25 处，模型明显低估了概率。此外，我还计算了校准过程中的
    Brier 分数。Brier 分数范围在 0 和 1 之间，0 代表完美准确，1 代表完全不准确。此次校准的 Brier 分数为 0.0445，比较低，因此表现良好。
- en: '![](../Images/79d9a1f8edf9cbaa36e6ead70ebd4615.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/79d9a1f8edf9cbaa36e6ead70ebd4615.png)'
- en: Probability calibration for Random Forest model using Platt scaling. Image by
    author.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Platt scaling 对随机森林模型进行概率校准。图片来源于作者。
- en: Though there are further improvements I can do to this process, this is something
    that I’ll refine in a future iteration. For now, I’ll simply save my model and
    continue.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我可以对这一过程进行进一步改进，但这将是我在未来的迭代中精细化的内容。目前，我会简单地保存模型并继续。
- en: '[PRE14]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Deploying the Model as Streamlit App
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将模型部署为 Streamlit 应用
- en: So many machine learning get made, yet sadly, so many are left to collect dust.
    I think it is important whenever you are working on a ML project to have a way
    that your model could be deployed and used by people. This way your work has a
    chance to be appreciated and serve as a bit more than just a training exercise
    even if its just a silly application like the one I did here. I find that people
    usually remember your work more if they get to interact with it somehow (which
    can be quite useful if you are job hunting). Deploying your model as part of a
    Streamlit app is a great way to showcase your work in a tangible way.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管有很多机器学习模型被创建，但遗憾的是，很多都被束之高阁。我认为，无论你在进行 ML 项目时都应有一种方式，使你的模型能够被部署并被人们使用。这样，即使只是像我这里做的那种简单应用，你的工作也有机会得到认可，发挥更大的作用。我发现人们通常会更记得你的工作，如果他们能以某种方式与之互动（这对于求职时尤其有用）。将模型部署为
    Streamlit 应用是一种很好地展示你工作的方式。
- en: The basic premise of the app is to give the user the ability to play around
    with the various features used to train the model and give them the probability
    of a squirrel approaching them as an output. One of the inputs of the model are
    the Latitude and Longitude of the user. The user can enter them directly in the
    app, however, I also used Folium to include an interactive map that is initially
    centered on Central Park that gives you the Latitude and Longitude of the location
    you click.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 这个应用的基本前提是给用户提供各种功能的操作体验，用于训练模型并输出一个松鼠接近他们的概率。模型的输入之一是用户的经纬度。用户可以直接在应用中输入这些数据，不过，我还使用了Folium来包含一个交互式地图，初始时中心定位在中央公园，并且当你点击地图上的位置时，会显示该位置的经纬度。
- en: '![](../Images/2ab293d58ad4f78bacf46a90d7511aa0.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2ab293d58ad4f78bacf46a90d7511aa0.png)'
- en: SquirrelML Streamlit App for predicting squirrel approach in Central Park. Image
    by author.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: SquirrelML Streamlit应用，用于预测中央公园松鼠的接近情况。图像由作者提供。
- en: 'The user can then play around with the different features found in the drop
    down menus and once they have their desired feature configuration they can click
    the Predict button. Pressing the Predict button will return the Squirrel Approach
    Probability (SAP) and an accompanying picture (it’ll be a happy squirrel if the
    probability is more than 50% and a sad squirrel picture if the probability is
    equal to or below 50%). You can see an example output below:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以在下拉菜单中尝试不同的功能，一旦他们配置好所需的功能，可以点击预测按钮。点击预测按钮将返回松鼠接近概率（SAP）以及一张附带的图片（如果概率超过50%，则会是一只开心的松鼠；如果概率等于或低于50%，则会是一只伤心的松鼠图片）。你可以在下面看到一个示例输出：
- en: '![](../Images/dc5bbec96950639cb8e1764ac6cadeec.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dc5bbec96950639cb8e1764ac6cadeec.png)'
- en: Conclusion
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: This was a fun little project to work on. The model can certainly be improved
    and I might revisit this in the future to fine tune it further. For instance,
    I can try and use the results of my PCA analysis alongside the SHAP values to
    try and reduce the dimensionality of my dataset down to the core features. There
    are also accompanying datasets to the Squirrel Census that have information like
    the amount of litter present, the activity levels present, the sighting duration,
    and the weather conditions amongst others. I found those datasets after I was
    done with my processing, but I’d be keen on incorporating them into my model since
    they seem like they’d be informative. Those datasets can be found on NYCOpenData
    [here](https://data.cityofnewyork.us/Environment/2018-Central-Park-Squirrel-Census-Hectare-Data/ej9h-v6g2)
    and [here](https://data.cityofnewyork.us/Environment/2018-Central-Park-Squirrel-Census-Stories/gfqj-f768).
    I can also try and use data augmentation techniques.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个有趣的小项目。模型当然可以改进，我可能会在未来重新审视以进一步优化。例如，我可以尝试将我的PCA分析结果与SHAP值结合使用，尝试将数据集的维度降至核心特征。还有一些与松鼠普查相关的数据集，包含了如垃圾量、活动水平、观察时长和天气条件等信息。我在处理完数据后才发现这些数据集，但我很希望将它们整合到我的模型中，因为它们似乎很有用。这些数据集可以在NYCOpenData的[这里](https://data.cityofnewyork.us/Environment/2018-Central-Park-Squirrel-Census-Hectare-Data/ej9h-v6g2)和[这里](https://data.cityofnewyork.us/Environment/2018-Central-Park-Squirrel-Census-Stories/gfqj-f768)找到。我还可以尝试使用数据增强技术。
- en: As always, I hope you enjoyed my work and thanks for reading!
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 一如既往，希望你喜欢我的工作，谢谢阅读！
- en: All data from NYCOpenData has no restrictions on their use. Check the following
    links for their [FAQ](https://opendata.cityofnewyork.us/faq/) and [Terms of Use](https://opendata.cityofnewyork.us/overview/#termsofuse).
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 来自NYCOpenData的所有数据在使用上没有限制。请查看以下链接了解其[常见问题](https://opendata.cityofnewyork.us/faq/)和[使用条款](https://opendata.cityofnewyork.us/overview/#termsofuse)。
