- en: 8 ChatGPT Prompts For Frequently Done Pandas Operations
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/8-chatgpt-prompts-for-frequently-done-pandas-operations-e3d7d1965b2c](https://towardsdatascience.com/8-chatgpt-prompts-for-frequently-done-pandas-operations-e3d7d1965b2c)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A quick way to get things done with Pandas
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)[![Soner
    Yıldırım](../Images/c589572e9d1ee176cd4f5a0008173f1b.png)](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)
    [Soner Yıldırım](https://sonery.medium.com/?source=post_page-----e3d7d1965b2c--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e3d7d1965b2c--------------------------------)
    ·7 min read·May 26, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/c2e8e682e64722afd27b4fea46bcaa24.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Karsten Winegeart](https://unsplash.com/@karsten116?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/YzxeHEzBZ6I?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  prefs: []
  type: TYPE_NORMAL
- en: We’ve all heard about ChatGPT. It’s not just on the tech industry’s radar, but
    also making headlines in the wider press. I frequently get friends reaching out
    to ask if I’ve heard about it. And yes, I sure have — I use it every day.
  prefs: []
  type: TYPE_NORMAL
- en: Despite some critiques concerning its performance and reliability on simpler
    tasks, ChatGPT and other large language models (LLMs) excel in a variety of tasks.
    For me, they’ve served as a significant productivity booster.
  prefs: []
  type: TYPE_NORMAL
- en: Recently, I decided to leverage ChatGPT for the Pandas operations I regularly
    carry out for data cleaning and analysis. In this article, I’ll share and guide
    you through 8 prompt examples where I asked ChatGPT how to get things done with
    Pandas.
  prefs: []
  type: TYPE_NORMAL
- en: '*If you’d like to learn more about Pandas, visit my course* [*500 Exercises
    to Master Python Pandas*](https://www.udemy.com/course/500-exercises-to-master-python-pandas/learn/lecture/37842166#overview)*.*'
  prefs: []
  type: TYPE_NORMAL
- en: '**First prompt to define its role:**'
  prefs: []
  type: TYPE_NORMAL
- en: '*Prompt: You are a Python tutor teaching me the Pandas library. I will be asking
    you how to do a particular task with Pandas and expecting you to explain it to
    me. Also show me the code along with your explanation.*'
  prefs: []
  type: TYPE_NORMAL
- en: I gave it the structure of the DataFrame in terms of column names and data types
    before I start asking questions.
  prefs: []
  type: TYPE_NORMAL
- en: '**Second prompt:**'
  prefs: []
  type: TYPE_NORMAL
- en: '*Prompt: Let me first tell you about the DataFrame I have. Then, I will start
    asking questions. The columns and their data types are given below as a Python
    dictionary with keys showing column names and values showing the data types.*'
  prefs: []
  type: TYPE_NORMAL
- en: '*{‘store’: dtype(‘O’), ‘product_group’: dtype(‘O’), ‘product_code’: dtype(‘int64’),
    ‘stock_qty’: dtype(‘int64’), ‘cost’: dtype(‘float64’), ‘price’: dtype(‘float64’),
    ‘last_week_sales’: dtype(‘int64’), ‘last_month_sales’: dtype(‘int64’)}*'
  prefs: []
  type: TYPE_NORMAL
- en: I will be using a sample dataset that I prepared with mock data. You can download
    it from my [datasets](https://github.com/SonerYldrm/datasets) repo. It’s the one
    named “sales_data_with_stores.csv”.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is the DataFrame I have for you to reference easily:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0733c160600599104d25e18c2c61efc7.png)'
  prefs: []
  type: TYPE_IMG
- en: The first 5 rows of df (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: We can now start on Pandas tasks.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 1**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Prompt: Tell me how to calculate the average last week sales for each store.*'
  prefs: []
  type: TYPE_NORMAL
- en: 'This is a simple one-liner but can still take some time to figure out if you
    just started learning Pandas. Here is the answer of ChatGPT:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/59a8c41893d9f96a3746f2b76b72e8cc.png)'
  prefs: []
  type: TYPE_IMG
- en: (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: I will be copy-pasting the code snippets in case you want to test it for yourself.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: ChatGPT also provided a detailed explanation along with the code in terms of
    how the task done and the type of the output.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 2**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Prompt: Tell me how to find the total profit in the last month for each store.*'
  prefs: []
  type: TYPE_NORMAL
- en: 'For this task, it needs to figure out how to calculate the profit first. Let’s
    see it’s response:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1f030edaa0c72a6862468502fd2792f2.png)'
  prefs: []
  type: TYPE_IMG
- en: (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Example 3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When working with real-world data, we often encounter the challenge of missing
    values. I want to see how ChatGPT tackles a task that isn’t quite as straightforward.
  prefs: []
  type: TYPE_NORMAL
- en: '*Prompt: There are some missing values in the stock quantity column. I want
    to replace the missing values with average stock quantity in that store. Tell
    me how to do this task.*'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5d4b2e71dabef0f409234e2b3fff1795.png)'
  prefs: []
  type: TYPE_IMG
- en: (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: There are other ways to solve this task but using the transform function is
    one of the efficient ways. At least, this is how I would do it.
  prefs: []
  type: TYPE_NORMAL
- en: 'I recently wrote an [article](https://medium.com/@sonery/5-python-pandas-functions-you-should-not-forget-about-91a0acc8e718)
    that mentions the importance of the transform function. Here is a short snippet
    from the article that explains why I would do this task using the transform function:'
  prefs: []
  type: TYPE_NORMAL
- en: It sounds similar to the `apply` function but unlike the `apply` function, `transform`
    can return a Series that has the same size as the input, which makes it useful
    in performing vectorized operations and broadcasting, particularly when used with
    groupby objects.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 4**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Prompt: Tell me how to find the top 3 products with the highest sales in last
    month for each store.*'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/c885d75b38ed27ee5632858f27587bd3.png)'
  prefs: []
  type: TYPE_IMG
- en: (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: It sorts the entire DataFrame first. We can also do the sorting within each
    group. Let’s see if ChatGPT knows how to do it.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 5**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Prompt: Is there another way of doing this task without sorting the DataFrame
    first?*'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/88e97c4e53d16c513c7e952d6df866f9.png)'
  prefs: []
  type: TYPE_IMG
- en: (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: It is important to note that sorting the entire DataFrame first might be the
    more performant way. I just wanted to see if ChatGPT provides different solutions.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 6**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Prompt: I want to see the last week performance of each stores compared to
    their last month performance.*'
  prefs: []
  type: TYPE_NORMAL
- en: This is a simple task but the prompt does not directly tells ChatGPT how to
    do it. Let’s see how it will perform.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/7a8ce1a79293b040c0a0260039ebe987.png)'
  prefs: []
  type: TYPE_IMG
- en: (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: As a response to the performance in the last week compared to the last month,
    it finds the difference between the last week sales and one fourth of the last
    month sales, which makes sense.
  prefs: []
  type: TYPE_NORMAL
- en: 'The DataFrame it creates looks like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a42aaa52a4d7ce600d46d53a37064e39.png)'
  prefs: []
  type: TYPE_IMG
- en: Example 7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Prompt: Create a new column called `critical_stock`, which takes the value
    of 1 if the `stock_qty` is less than 500, 0 otherwise.*'
  prefs: []
  type: TYPE_NORMAL
- en: 'ChatGPT gives me 3 options for this task. Here are the two of them I liked
    better:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/9ddd6f4c1b4027af78fa5c385fd55b3d.png)'
  prefs: []
  type: TYPE_IMG
- en: (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Example 8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Prompt: Create a summary of the DataFrame in terms of the size, missing values,
    data types, and column statistics.*'
  prefs: []
  type: TYPE_NORMAL
- en: The functions and methods used for summarizing a DataFrame is quite simple but
    ChatGPT did a great job at organizing them in a nice and clean way.
  prefs: []
  type: TYPE_NORMAL
- en: 'I’m just copy-pasting the code it generated:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: Final words
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The examples we covered did a small demonstration of how ChatGPT is revolutionizing
    the way we perform common tasks in data analysis, specifically with Pandas. It
    is not only increasing our efficiency in completing tasks but also enriching our
    understanding of the complex operations that can be done with Pandas.
  prefs: []
  type: TYPE_NORMAL
- en: I will be exploring even more ways to employ ChatGPT in my data analytics toolkit
    and get more complicated tasks done. It is important to note that as the complexity
    of tasks increases, the way you write prompts start to matter a lot. This is the
    reason why there is a new discipline emerging, called prompt engineering.
  prefs: []
  type: TYPE_NORMAL
- en: '*You can become a* [*Medium member*](https://sonery.medium.com/membership)
    *to unlock full access to my writing, plus the rest of Medium. If you already
    are, don’t forget to* [*subscribe*](https://sonery.medium.com/subscribe) *if you’d
    like to get an email whenever I publish a new article.*'
  prefs: []
  type: TYPE_NORMAL
- en: Thank you for reading. Please let me know if you have any feedback.
  prefs: []
  type: TYPE_NORMAL
