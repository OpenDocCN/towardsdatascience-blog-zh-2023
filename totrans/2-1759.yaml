- en: Quickly Evaluate your RAG Without Manually Labeling Test Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 快速评估你的 RAG，无需手动标注测试数据
- en: 原文：[https://towardsdatascience.com/quickly-evaluate-your-rag-without-manually-labeling-test-data-43ade0ae187a](https://towardsdatascience.com/quickly-evaluate-your-rag-without-manually-labeling-test-data-43ade0ae187a)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/quickly-evaluate-your-rag-without-manually-labeling-test-data-43ade0ae187a](https://towardsdatascience.com/quickly-evaluate-your-rag-without-manually-labeling-test-data-43ade0ae187a)
- en: Automate the evaluation process of your Retrieval Augment Generation apps without
    any manual intervention
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自动化评估你的检索增强生成应用程序的过程，无需人工干预
- en: '[](https://ahmedbesbes.medium.com/?source=post_page-----43ade0ae187a--------------------------------)[![Ahmed
    Besbes](../Images/93804d9291439715e578f204b79c9bdd.png)](https://ahmedbesbes.medium.com/?source=post_page-----43ade0ae187a--------------------------------)[](https://towardsdatascience.com/?source=post_page-----43ade0ae187a--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----43ade0ae187a--------------------------------)
    [Ahmed Besbes](https://ahmedbesbes.medium.com/?source=post_page-----43ade0ae187a--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://ahmedbesbes.medium.com/?source=post_page-----43ade0ae187a--------------------------------)[![Ahmed
    Besbes](../Images/93804d9291439715e578f204b79c9bdd.png)](https://ahmedbesbes.medium.com/?source=post_page-----43ade0ae187a--------------------------------)[](https://towardsdatascience.com/?source=post_page-----43ade0ae187a--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----43ade0ae187a--------------------------------)
    [Ahmed Besbes](https://ahmedbesbes.medium.com/?source=post_page-----43ade0ae187a--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----43ade0ae187a--------------------------------)
    ·12 min read·Dec 21, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发布于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----43ade0ae187a--------------------------------)
    ·阅读时间 12 分钟·2023年12月21日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/d058a92e9619f69812d1ccfc71bcb537.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d058a92e9619f69812d1ccfc71bcb537.png)'
- en: Image generated by the user
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图像
- en: Today’s topic is evaluating your RAG without manually labeling test data.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 今天的话题是如何在不手动标注测试数据的情况下评估你的 RAG。
- en: Measuring the performance of your RAG is something you should care about especially
    if you’re building such systems and serving them in production.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 测量你的 RAG 的性能是你应该关注的，尤其是当你正在构建这些系统并在生产环境中提供服务时。
- en: Besides giving you a rough idea of how your application behaves, evaluating
    your RAG also provides quantitative feedback that guides experimentations and
    the appropriate selection of parameters (LLMs, embedding models, chunk size, top
    K, etc.)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 除了让你大致了解应用的表现外，评估你的 RAG 还提供了量化反馈，这些反馈指导实验和参数的适当选择（如 LLMs、嵌入模型、分块大小、top K 等）。
- en: Evaluating your RAG is also important for your client or stakeholders because
    they are ***always*** expecting performance metrics to validate your project.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 评估你的 RAG 对你的客户或利益相关者也很重要，因为他们***总是***期望有性能指标来验证你的项目。
- en: 'Less teasing, here’s what this issue covers:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 不再卖关子，这个问题涵盖了以下内容：
- en: Automatically generating a synthetic test set from your RAG’s data
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 自动生成一个合成测试集，从你的 RAG 数据中
- en: Overview of popular RAG metrics
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 流行的 RAG 指标概述
- en: Computing RAG metrics on the synthetic dataset using the Ragas package
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 Ragas 包在合成数据集上计算 RAG 指标
- en: '*PS: Some sections of this issue are a bit hands-on. They include the necessary
    coding material to implement dataset generation and evaluate the RAG.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '*PS: 这个问题的某些部分是稍微动手的。它们包括实现数据集生成和评估 RAG 所需的编码材料。*'
- en: Everything will also be available in this* [*notebook*](https://colab.research.google.com/drive/1Qr3fUfBvJbDLZ0k6al_axlmFrArlm9-u?usp=drive_link)*.*
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 所有内容也会在这个* [*notebook*](https://colab.research.google.com/drive/1Qr3fUfBvJbDLZ0k6al_axlmFrArlm9-u?usp=drive_link)*中提供。*
- en: Let’s have a look 🔎
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 一起来看看 🔎
- en: 1 — Generate a synthetic test set 🧪
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1 — 生成合成测试集 🧪
- en: Let’s say you’ve just built a RAG and now want to evaluate its performance.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你刚刚构建了一个 RAG，现在想要评估其性能。
- en: 'To do that, you need an evaluation dataset that has the following columns:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，你需要一个具有以下列的评估数据集：
- en: '**question** (str): to evaluate the RAG on'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**question** (str)：用来评估 RAG 的问题'
- en: '**ground_truths** (list): the reference (i.e. true) answers to the questions'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ground_truths** (列表)：问题的参考（即真实）答案'
- en: '**answer** (str): the answers predicted by the RAG'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**answer** (str)：RAG 预测的答案'
- en: '**contexts** (list): the list of relevant contexts the RAG used for each question
    to generate the answer'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**contexts** (列表)：RAG 用于每个问题生成答案的相关上下文列表'
- en: '***→ the first two columns represent ground-truth data and the last two columns
    represent the RAG predictions.***'
  id: totrans-26
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***→ 前两列表示真实数据，后两列表示 RAG 预测。***'
- en: '![](../Images/103ca833aac503a2d0c58bce1f8c30b8.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/103ca833aac503a2d0c58bce1f8c30b8.png)'
- en: Screenshot by the author
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 作者提供的截图
- en: To build such a dataset, we first need to generate tuples of questions and corresponding
    answers.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 要构建这样的数据集，我们首先需要生成问题和相应答案的元组。
- en: Then, in the next step, we need to run the RAG over these questions to make
    the predictions.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，在下一步中，我们需要对这些问题运行 RAG 以进行预测。
- en: 👉 Generate questions and ground-truth answers (the theory)
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 👉 生成问题和真实答案（理论）
- en: To generate tuples of (question, answer), we first need to prepare the RAG data,
    split it into chunks, and embed it into a vector database.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 为了生成 (问题, 答案) 的元组，我们首先需要准备 RAG 数据，将其拆分成块，并嵌入到向量数据库中。
- en: Once the splits are created and embedded, we will instruct an LLM to generate
    `N_q` questions from `N_c` topics to finally obtain `N_q x N_c` tuples of questions
    and answers.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦拆分完成并嵌入，我们将指示一个 LLM 从 `N_c` 个主题中生成 `N_q` 个问题，最终得到 `N_q x N_c` 个问题和答案的元组。
- en: 'To generate questions and answers from a given context, we need to go through
    the following steps:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 为了从给定上下文中生成问题和答案，我们需要经过以下步骤：
- en: Sample a random split and use it as a root context
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 随机抽取一个拆分，并将其用作根上下文
- en: Fetch K similar contexts from the vector database
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从向量数据库中提取 K 个相似上下文
- en: Concatenate the texts of the root context with its K neighbors to build a larger
    context
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将根上下文的文本与其 K 个邻居连接起来，以构建更大的上下文
- en: Use the large `context` and `num_questions` in the following prompt template
    to generate questions and answers
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下列提示模板中的大 `context` 和 `num_questions` 生成问题和答案
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Then, repeat steps 1 to 4 `N_c` times to vary the context each time and generate
    different questions
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，重复步骤 1 到 4 `N_c` 次，以每次变化上下文并生成不同的问题
- en: I’ve used this workflow to produce questions and answers on Python programming
    and here’s a sample of the results I got.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经使用这个工作流来生成 Python 编程相关的问题和答案，以下是我得到的一些结果示例。
- en: '[PRE1]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 👉 Now the coding part 💻
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 👉 现在是编码部分 💻
- en: Let’s first start by building a vectorstore that includes the data used by the
    RAG.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先从构建一个包含 RAG 使用数据的 vectorstore 开始。
- en: We can load that from Wikipedia (but if you have any interesting PDF on Python
    programming, you can load that too)
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从维基百科加载这些（但如果你有任何有趣的 Python 编程 PDF，你也可以加载）
- en: '[PRE2]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: After loading the data, we split it into chunks.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 加载数据后，我们将其拆分成块。
- en: '[PRE3]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Then, we create an index in Pinecone:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们在 Pinecone 中创建一个索引：
- en: '[PRE4]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: and use a LangChain wrapper to index the splits’ embeddings in it.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 并使用 LangChain 包装器来对拆分的嵌入进行索引。
- en: '[PRE5]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Now comes the interesting part: generating the synthetic dataset.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 现在进入有趣的部分：生成合成数据集。
- en: To do that, we initialize an object from a `TestsetGenerator` class using an
    LLM, the document splits, an embedding model, and the name of the Pinecone index.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，我们使用 LLM、文档拆分、嵌入模型和 Pinecone 索引名称初始化一个 `TestsetGenerator` 类的对象。
- en: '[PRE6]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Then, we call the `generate` method by passing two parameters:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们通过传递两个参数来调用 `generate` 方法：
- en: '[PRE7]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'This produces this following dataframe:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下数据框：
- en: '[PRE8]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Pretty simple, right?
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 很简单，对吧？
- en: '**If you’re interested in the implementation details, you can find them in
    the** [**notebook**](https://colab.research.google.com/drive/1Qr3fUfBvJbDLZ0k6al_axlmFrArlm9-u?usp=drive_link)**.**'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果你对实现细节感兴趣，可以在** [**notebook**](https://colab.research.google.com/drive/1Qr3fUfBvJbDLZ0k6al_axlmFrArlm9-u?usp=drive_link)**
    中找到它们。**'
- en: We’ll only be halfway through it. Now, we need to use the RAG to predict the
    answers for each question and provide the context list used to ground the response.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 这只是其中的一半。现在，我们需要使用 RAG 来预测每个问题的答案，并提供用于生成响应的上下文列表。
- en: 'The RAG is defined in a RAG class, so let’s initialize it first:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: RAG 定义在 RAG 类中，所以我们首先需要初始化它：
- en: '[PRE9]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Then, we iterate over the synthetic dataset by calling the `predict` method
    over each question and collect the predictions.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们通过对每个问题调用 `predict` 方法来迭代合成数据集，并收集预测结果。
- en: '[PRE10]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'and here’s what the final result looks like:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是最终结果的样子：
- en: '[PRE11]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 🏆 Congratulations if you’ve made it this far, now you’re ready to evaluate your
    RAG.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 🏆 恭喜你完成到这一步，现在你准备好评估你的 RAG 了。
- en: 2 — Popular RAG metrics 📊
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2 — 流行的 RAG 指标 📊
- en: Before jumping into the code, let’s cover the **four** basic metrics we’ll use
    to evaluate our RAG.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在跳入代码之前，让我们介绍一下用于评估 RAG 的 **四** 个基本指标。
- en: Each metric examines a different facet. Therefore, when evaluating your application,
    it is crucial to consider multiple metrics for a comprehensive perspective.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 每个指标考察了不同的方面。因此，在评估你的应用时，考虑多个指标以获得全面的视角至关重要。
- en: '**1 — Answer Relevancy**:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '**1 — 答案相关性**：'
- en: The answer relevance metric is designed to **evaluate the pertinence of the
    generated answer with the provided prompt**. Answers that lack completeness or
    include redundant information receive lower scores. This metric utilizes both
    the question and the answer, generating values between 0 and 1\. Higher scores
    signify better relevance.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 答案相关性指标旨在**评估生成答案与提供的提示的相关性**。缺乏完整性或包含冗余信息的答案会获得较低的分数。该指标利用问题和答案，生成0到1之间的值。得分越高，相关性越好。
- en: '**Example**'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '**示例**'
- en: '❓*Question: What are the key features of a healthy diet?*'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: ❓*问题：健康饮食的关键特征是什么？*
- en: '⬇️ *Low relevance answer*: A healthy diet is important for overall well-being.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: ⬇️ *低相关性答案*：健康饮食对整体健康非常重要。
- en: '⬆️ *High relevance answer*: A healthy diet should include a variety of fruits,
    vegetables, whole grains, lean proteins, and dairy products, providing essential
    nutrients for optimal health.'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: ⬆️ *高相关性答案*：健康饮食应包括多种水果、蔬菜、全谷物、瘦蛋白和乳制品，提供必需的营养素以促进最佳健康。
- en: '**2 — Faithfulness**'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '**2 — 准确性**'
- en: This metric evaluates **the factual consistency of the generated answer within
    the provided context**. The calculation involves both the answer and the retrieved
    context, with the answer scaled to a range between 0 and 1, where higher values
    indicate better faithfulness.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 该指标评估**生成答案在提供的上下文中的事实一致性**。计算涉及答案和检索到的上下文，答案的评分范围在0到1之间，得分越高表示一致性越好。
- en: For an answer to be deemed faithful, all claims made in the response must be
    inferable from the given context.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使答案被认为是准确的，回答中提出的所有主张必须可以从给定的上下文中推断出来。
- en: '**Example:**'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '**示例：**'
- en: '❓*Question: What are the main accomplishments of Marie Curie?*'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: ❓*问题：玛丽·居里的主要成就是什么？*
- en: '📑 *Context*: Marie Curie (1867–1934) was a pioneering physicist and chemist,
    the first woman to win a Nobel Prize and the only woman to win Nobel Prizes in
    two different fields.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 📑 *上下文*：玛丽·居里（1867–1934）是开创性的物理学家和化学家，第一位获得诺贝尔奖的女性，也是唯一一位在两个不同领域获得诺贝尔奖的女性。
- en: '⬆️ *High faithfulness answer*: Marie Curie won Nobel Prizes in both physics
    and chemistry, making her the first woman to achieve this feat.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: ⬆️ *高准确性答案*：玛丽·居里获得了物理学和化学两项诺贝尔奖，使她成为首位实现这一成就的女性。
- en: ⬇️ *Low faithfulness answer:* Marie Curie won Nobel Prizes only in physics.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ⬇️ *低准确性答案*：玛丽·居里仅获得了物理学方面的诺贝尔奖。
- en: '**3 — Context precision**'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '**3 — 上下文精确度**'
- en: Context Precision is a metric that evaluates whether all of the ground-truth
    relevant items present in the `contexts` are ranked higher or not. Ideally, all
    the relevant chunks must appear at the top ranks. This metric is computed using
    the `question` and the `contexts`, with values ranging between 0 and 1, where
    higher scores indicate better precision.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 上下文精确度是一个指标，评估`上下文`中所有真实相关条目是否都被排在更高的位置。理想情况下，所有相关片段应出现在排名靠前的位置。该指标使用`问题`和`上下文`进行计算，得分范围在0到1之间，得分越高表示精确度越好。
- en: '**4 — Answer correctness**'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '**4 — 答案准确性**'
- en: This metric measures the accuracy of the generated answer in comparison to the
    ground truth. This assessment utilizes both the ground truth and the answer, assigning
    scores within the 0 to 1 range. A higher score indicates a more accurate alignment
    between the generated answer and the ground truth, indicative of superior correctness.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 该指标衡量生成答案与真实答案之间的准确性。这项评估利用真实答案和生成答案，并在0到1的范围内进行评分。得分越高，表明生成的答案与真实答案之间的对齐越准确，表示更高的正确性。
- en: '**Example:**'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '**示例：**'
- en: '🟢 *Ground Truth: The Eiffel Tower was completed in 1889 in Paris, France.*'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 🟢 *真实答案：埃菲尔铁塔于1889年在法国巴黎竣工。*
- en: '⬆️ *High answer correctness*: The construction of the Eiffel Tower concluded
    in 1889 in Paris, France.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: ⬆️ *高准确性答案*：埃菲尔铁塔的建设于1889年在法国巴黎完成。
- en: '⬇️ *Low answer correctness*: Completed in 1889, the Eiffel Tower stands in
    London, England.'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: ⬇️ *低准确性答案*：埃菲尔铁塔于1889年竣工，位于英国伦敦。
- en: 3 — Evaluate RAGs with RAGAS 📏
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3 — 使用RAGAS评估RAG 📏
- en: To evaluate the RAG and compute the four metrics, we can use [Ragas](https://github.com/explodinggradients/ragas).
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 为了评估RAG并计算四个指标，我们可以使用[Ragas](https://github.com/explodinggradients/ragas)。
- en: Ragas (for Rag Assessment), is a framework that helps you evaluate your Retrieval
    Augmented Generation (RAG) pipelines.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: Ragas（用于Rag评估）是一个帮助你评估检索增强生成（RAG）管道的框架。
- en: It also provides a bunch of [metrics](https://docs.ragas.io/en/latest/concepts/metrics/index.html)
    and utility [functions](https://docs.ragas.io/en/latest/concepts/testset_generation.html)
    to generate synthetic datasets.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 它还提供了一些[指标](https://docs.ragas.io/en/latest/concepts/metrics/index.html)和实用的[函数](https://docs.ragas.io/en/latest/concepts/testset_generation.html)来生成合成数据集。
- en: To run Ragas over our dataset, you first need to import the metrics and convert
    the dataframe of synthetic data to a Dataset object.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 要在我们的数据集上运行Ragas，你首先需要导入指标并将合成数据的数据框转换为数据集对象。
- en: '[PRE12]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Then, we need to configure Ragas to use VertexAI LLMs and embeddings.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们需要配置Ragas以使用VertexAI LLMs和嵌入。
- en: This step is important since Ragas is configured to use OpenAI by default.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这一步很重要，因为Ragas默认配置为使用OpenAI。
- en: '[PRE13]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Finally, we call the `evaluate` function on the synthetic dataset and specifcy
    the metrics we want to compute:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们在合成数据集上调用`evaluate`函数，并指定我们想要计算的指标：
- en: '[PRE14]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Once the evaluation is done, you can print the result directly.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 评估完成后，你可以直接打印结果。
- en: '[PRE15]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: or you can convert it to a dataframe to inspect each of these metrics for every
    question.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 或者你可以将其转换为数据框，以检查每个问题的这些指标。
- en: '[PRE16]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Conclusion
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: Generating a synthetic dataset to evaluate your RAG is a good start, especially
    when you don’t have access to labeled data.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 生成一个合成数据集以评估你的RAG是一个好的开始，特别是当你没有访问标注数据时。
- en: However, this solution also comes with its problems.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这个解决方案也有其问题。
- en: 'Some of the generated answers:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 一些生成的答案：
- en: May lack diversity
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可能缺乏多样性
- en: Are redundant
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是冗余的
- en: Are plain rephrasing of the original text and need more complexity to reflect
    real questions that need reasoning
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 只是对原始文本的简单改述，需要更多的复杂性来反映需要推理的实际问题
- en: Can be too generic (especially in very technical domains)
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可能过于笼统（尤其是在非常技术性的领域）
- en: To tackle these issues, you can adjust and tune your prompts, filter irrelevant
    questions, create synthetic questions on specific topics, and use Ragas for dataset
    generation.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 为了应对这些问题，你可以调整和调整你的提示，过滤无关的问题，创建特定主题的合成问题，并使用Ragas进行数据集生成。
