- en: How to Model Multiple Seasonality in Time Series
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/how-to-model-multiple-seasonality-in-time-series-2a3488f8e7f5](https://towardsdatascience.com/how-to-model-multiple-seasonality-in-time-series-2a3488f8e7f5)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**Handling seasonal effects in several periods**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://vcerq.medium.com/?source=post_page-----2a3488f8e7f5--------------------------------)[![Vitor
    Cerqueira](../Images/9e52f462c6bc20453d3ea273eb52114b.png)](https://vcerq.medium.com/?source=post_page-----2a3488f8e7f5--------------------------------)[](https://towardsdatascience.com/?source=post_page-----2a3488f8e7f5--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----2a3488f8e7f5--------------------------------)
    [Vitor Cerqueira](https://vcerq.medium.com/?source=post_page-----2a3488f8e7f5--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----2a3488f8e7f5--------------------------------)
    ·5 min read·Jul 25, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b0ff9a93e1a11fae7f8848871a893fcf.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Joshua Woroniecki](https://unsplash.com/@joshua_j_woroniecki?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  prefs: []
  type: TYPE_NORMAL
- en: 'In this article, you’ll learn how to model multiple seasonality in time series.
    We’ll cover:'
  prefs: []
  type: TYPE_NORMAL
- en: How to decompose a time series using MSTL
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating explanatory variables that capture complex seasonality
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using off-the-shelf methods, with an example based on *orbit*’s forecasting
    package.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Complex Seasonality
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Seasonality refers to systematic changes that repeat with a regular periodicity](https://medium.com/towards-data-science/8-techniques-to-model-seasonality-2f81d739710).
    These patterns are connected with the frequency at which a time series is observed.
    A low-frequency time series usually contains a single seasonal period. For example,
    monthly time series exhibit yearly seasonality.'
  prefs: []
  type: TYPE_NORMAL
- en: Increasingly, time series are collected at higher sampling frequencies, such
    as daily or hourly. This leads to larger datasets with a complex seasonality.
    A daily time series may show weekly, monthly, and yearly repeating patterns.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here’s an example of an hourly time series with daily and weekly seasonality:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a9bf9df7169deb16c4568e11a605e577.png)'
  prefs: []
  type: TYPE_IMG
- en: Hourly time series with daily and weekly seasonality. Artificial data and image
    created by author.
  prefs: []
  type: TYPE_NORMAL
- en: At first glance, it’s not clear that the above time series contains more than
    one seasonal pattern. Multiple seasonal effects can overlap each other, which
    makes it difficult to identify all relevant periods.
  prefs: []
  type: TYPE_NORMAL
- en: Decomposition with Multiple Seasonality
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Decomposition methods aim at splitting time series into its basic parts: trend,
    seasonality, and residuals.'
  prefs: []
  type: TYPE_NORMAL
- en: Most methods were designed to handle seasonality at a single predefined period.
    Examples include the classical method, x11, and STL, among others.
  prefs: []
  type: TYPE_NORMAL
- en: 'The STL method has been extended to handle multiple seasonality. MSTL (for
    Multiple STL) is available on *statsmodels* Python package:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'The decomposition results in the following parts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/859d8a2048642e9af08c0bbe44259954.png)'
  prefs: []
  type: TYPE_IMG
- en: A time series and its basic parts including two seasonal components. Image by
    author.
  prefs: []
  type: TYPE_NORMAL
- en: So, MSTL can be used to adjust a time series with complex seasonality.
  prefs: []
  type: TYPE_NORMAL
- en: You can check a [previous article](/8-techniques-to-model-seasonality-2f81d739710)
    to learn how to build a forecasting model with a decomposed time series.
  prefs: []
  type: TYPE_NORMAL
- en: Modeling Multiple Seasonality
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Besides decomposition, there are [other approaches to model seasonality for
    forecasting](/8-techniques-to-model-seasonality-2f81d739710). These usually focus
    on time series with a single seasonal period. Yet, some methods can handle complex
    seasonality as well.
  prefs: []
  type: TYPE_NORMAL
- en: For example, you get seasonal dummies for different periods. With an hourly
    time series, you can get information such as the day, week, or month of each observation.
  prefs: []
  type: TYPE_NORMAL
- en: 'With Fourier series, you can compute sine and cosine waves using different
    periods. Here’s how to do that with *sktime*:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: You can get radial basis functions for several periods as well.
  prefs: []
  type: TYPE_NORMAL
- en: Off-the-shelf methods
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There are a few off-the-shelf methods that handle complex seasonality. Examples
    include TBATS, Prophet, MSTL, or KTR (Kernel-based time-varying regression).
  prefs: []
  type: TYPE_NORMAL
- en: With MSTL, you approach the task by [forecasting each component separately and
    then combining forecasts](https://medium.com/towards-data-science/8-techniques-to-model-seasonality-2f81d739710).
  prefs: []
  type: TYPE_NORMAL
- en: 'Here’s an example of how to use KTR, which is available on the *orbit* Python
    package:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Each seasonal component is modeled with Fourier series, which are used as explanatory
    variables. Here’s what they look like:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a6c8fc8ff766cd8798cb276893401759.png)'
  prefs: []
  type: TYPE_IMG
- en: Results obtained from the function plot_predicted_components. Image by author.
  prefs: []
  type: TYPE_NORMAL
- en: Each Fourier wave has different characteristics that capture the periodicity
    of each seasonality.
  prefs: []
  type: TYPE_NORMAL
- en: Key Takeaways
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: High-frequency time series can exhibit seasonality in several periods. Capturing
    all seasonal patterns is important for the optimal modeling of time series.
  prefs: []
  type: TYPE_NORMAL
- en: In this article, you learned how to extend common approaches to model seasonality
    to handle several seasonal periods.
  prefs: []
  type: TYPE_NORMAL
- en: Some off-the-shelf methods are also able to cope with this problem, such as
    Prophet, or KTR.
  prefs: []
  type: TYPE_NORMAL
- en: Thanks for reading, and see you in the next story!
  prefs: []
  type: TYPE_NORMAL
- en: Related articles
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[8 Techniques to Model Seasonality](https://medium.com/towards-data-science/8-techniques-to-model-seasonality-2f81d739710)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[3 Types of Seasonality and How to Detect Them](https://medium.com/towards-data-science/3-types-of-seasonality-and-how-to-detect-them-4e03f548d167)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Understanding Time Series Trend](https://medium.com/towards-data-science/understanding-time-series-trend-addfd9d7764e)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Code
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[https://github.com/vcerqueira/blog/blob/main/posts/seasonality/complex_seasonality.py](https://github.com/vcerqueira/blog/blob/main/posts/seasonality/complex_seasonality.py)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: References
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[1] Orbit’s KTR documentation: [https://orbit-ml.readthedocs.io/en/stable/tutorials/ktr2.html](https://orbit-ml.readthedocs.io/en/stable/tutorials/ktr2.html)'
  prefs: []
  type: TYPE_NORMAL
- en: '[2] Forecasting: Principles and Practice, Complex seasonality section: [https://otexts.com/fpp3/complexseasonality.html](https://otexts.com/fpp3/complexseasonality.html)'
  prefs: []
  type: TYPE_NORMAL
- en: '[3] Holmes, Elizabeth E., Mark D. Scheuerell, and E. J. Ward. “Applied time
    series analysis for fisheries and environmental data.” *NOAA Fisheries, Northwest
    Fisheries Science Center, Seattle, WA* (2020).'
  prefs: []
  type: TYPE_NORMAL
