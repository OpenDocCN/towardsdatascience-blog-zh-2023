- en: 'ChatGPT Moderation API: Input/Output Control'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ChatGPT 审查 API：输入/输出控制
- en: 原文：[https://towardsdatascience.com/chatgpt-moderation-api-input-output-artificial-intelligence-chatgpt3-data-4754389ec9c8](https://towardsdatascience.com/chatgpt-moderation-api-input-output-artificial-intelligence-chatgpt3-data-4754389ec9c8)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/chatgpt-moderation-api-input-output-artificial-intelligence-chatgpt3-data-4754389ec9c8](https://towardsdatascience.com/chatgpt-moderation-api-input-output-artificial-intelligence-chatgpt3-data-4754389ec9c8)
- en: Using the OpenAI’s Moderation Endpoint for Responsible AI
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 OpenAI 的审查端点实现负责任的 AI
- en: '[](https://medium.com/@andvalenzuela?source=post_page-----4754389ec9c8--------------------------------)[![Andrea
    Valenzuela](../Images/ddfc1534af92413fd91076f826cc49b6.png)](https://medium.com/@andvalenzuela?source=post_page-----4754389ec9c8--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4754389ec9c8--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----4754389ec9c8--------------------------------)
    [Andrea Valenzuela](https://medium.com/@andvalenzuela?source=post_page-----4754389ec9c8--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@andvalenzuela?source=post_page-----4754389ec9c8--------------------------------)[![Andrea
    Valenzuela](../Images/ddfc1534af92413fd91076f826cc49b6.png)](https://medium.com/@andvalenzuela?source=post_page-----4754389ec9c8--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4754389ec9c8--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----4754389ec9c8--------------------------------)
    [Andrea Valenzuela](https://medium.com/@andvalenzuela?source=post_page-----4754389ec9c8--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4754389ec9c8--------------------------------)
    ·9 min read·Jul 23, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4754389ec9c8--------------------------------)
    ·9 分钟阅读·2023年7月23日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/733cc16aa1f0f391b10378392a4daae2.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/733cc16aa1f0f391b10378392a4daae2.png)'
- en: Self-made gif.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 自制 gif。
- en: Large Language Models (LLMs) have undoubtedly transformed the way we interact
    with technology. ChatGPT, among the prominent LLMs, has proven to be an invaluable
    tool, serving users with a vast array of information and helpful responses. However,
    like any technology, **ChatGPT is not without its limitations**.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 大型语言模型 (LLMs) 无疑改变了我们与技术互动的方式。在众多 LLM 中，ChatGPT 被证明是一个宝贵的工具，为用户提供了大量的信息和有用的回应。然而，像任何技术一样，**ChatGPT
    也有其局限性**。
- en: Recent discussions have brought to light an important concern — **the potential
    for ChatGPT to generate inappropriate or biased responses**. This issue stems
    from its training data, which comprises the collective writings of individuals
    across diverse backgrounds and eras. **While this diversity enriches the model’s
    understanding, it also brings with it the biases and prejudices prevalent in the
    real world**.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 最近的讨论揭示了一个重要问题——**ChatGPT 生成不当或有偏见回应的潜在风险**。这个问题源自于其训练数据，这些数据包括了来自不同背景和时代的个体的集体著作。**虽然这种多样性丰富了模型的理解，但也带来了现实世界中普遍存在的偏见和成见**。
- en: As a result, some responses generated by ChatGPT may reflect these biases. *But
    let’s be fair*, **inappropriate responses can be triggered by inappropriate user
    queries**.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，ChatGPT 生成的一些回应可能反映了这些偏见。*但我们要公平地看待*，**不当回应可能是由不当的用户查询触发的**。
- en: In this article, we will explore the importance of actively moderating both
    the model’s inputs and outputs when building LLM-powered applications. To do so,
    we will use the so-called ***OpenAI Moderation API* that helps identify inappropriate
    content and take action accordingly**.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我们将探讨在构建 LLM 驱动的应用程序时，积极审查模型的输入和输出的重要性。为此，我们将使用所谓的***OpenAI 审查 API*，该 API
    帮助识别不当内容并采取相应行动**。
- en: '*As always*, we will implement these moderation checks in Python!'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '*一如既往*，我们将使用 Python 实现这些审查检查！'
- en: Content Moderation
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 内容审查
- en: It is crucial to recognize the significance of controlling and moderating user
    input and model output when building applications that use LLMs underneath.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建使用大型语言模型 (LLMs) 的应用程序时，认识到控制和审查用户输入及模型输出的重要性至关重要。
- en: '**📥 User input control** refers to the implementation of mechanisms and techniques
    to monitor, filter, and manage the **content provided by users when engaging with
    powered LLM applications**. This control empowers developers to mitigate risks
    and uphold the integrity, safety, and ethical standards of their applications.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**📥 用户输入控制** 指的是实施机制和技术来监控、过滤和管理**用户在使用 LLM 应用程序时提供的内容**。这种控制使开发者能够降低风险，维护应用程序的完整性、安全性和伦理标准。'
- en: '**📤 Output model control** refers to the implementation of measures and methodologies
    that enable monitoring and filtering of the responses generated by the model in
    its interactions with users. By exercising control over the model’s outputs, developers
    can address potential issues such as biased or inappropriate responses.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '**📤 输出模型控制**指的是实施措施和方法，以便在模型与用户互动时监控和过滤模型生成的响应。通过控制模型的输出，开发者可以解决潜在问题，例如偏见或不适当的响应。'
- en: Models like ChatGPT can exhibit biases or inaccuracies, particularly when influenced
    by unfiltered user input during conversations. **Without proper control measures,
    the model may inadvertently disseminate misleading or false information**. Therefore,
    it is essential not only to moderate user input, but also to implement measures
    for moderating the model’s output.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 像 ChatGPT 这样的模型可能会表现出偏见或不准确性，特别是当受到未过滤用户输入的影响时。**如果没有适当的控制措施，模型可能会无意中传播误导性或虚假的信息**。因此，不仅需要对用户输入进行审查，还需要实施措施来审查模型的输出。
- en: OpenAI Moderation API
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: OpenAI 审查 API
- en: '![](../Images/8734afecae84a763b20141424812d050.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8734afecae84a763b20141424812d050.png)'
- en: Self-made gif.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 自制的 gif。
- en: 'OpenAI, the company behind ChatGPT, already provides a tool to identify the
    aforementioned unappropriated content coming either from the user or from the
    model: **the Moderation API**.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: OpenAI，即 ChatGPT 背后的公司，已经提供了一种工具来识别上述不适当内容，无论是来自用户还是模型：**审查 API**。
- en: Specifically, the moderation endpoint serves as a tool for checking content
    against OpenAI’s usage policies, which target inappropriate categories like **hate
    speech**, **threats**, **harassment**, **self-harm** (intent or instructions),
    **sexual content** (including minors), and **violent content** (including graphic
    details).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，审查端点作为工具，用于检查内容是否符合 OpenAI 的使用政策，这些政策针对不适当的类别，如**仇恨言论**、**威胁**、**骚扰**、**自残**（意图或指示）、**色情内容**（包括未成年人）和**暴力内容**（包括详细的图像）。
- en: '*And the best part?*'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '*那最棒的部分是什么？*'
- en: '**The moderation endpoint is free** to use when monitoring the inputs and outputs
    of OpenAI APIs!'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '**审查端点是免费的**，可用于监控 OpenAI API 的输入和输出！'
- en: Moderation API in Python
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Python 中的审查 API
- en: '*How can we use the tool? Let’s start with the hands-on!*'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '*我们如何使用这个工具？让我们开始实际操作吧！*'
- en: For the hands-on, we will be using Python and the official `openai` library
    that already provides a `Moderation.create` method to access the Moderation API.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在实际操作中，我们将使用 Python 和官方的`openai`库，该库已经提供了一个`Moderation.create`方法来访问审查 API。
- en: 'We can get the `openai` library as any other Python library:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以像其他 Python 库一样获取`openai`库：
- en: '[PRE0]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Then, it is important to get the *OpenAI API Key* from our OpenAI account and
    set it either as an environmental variable or by pointing to the token path in
    our *Jupyter Notebook.* I normally use the latest approach:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，从我们的 OpenAI 账户中获取*OpenAI API 密钥*并将其设置为环境变量，或者在我们的*Jupyter Notebook*中指定令牌路径。我通常使用最新的方法：
- en: '[PRE1]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Once the key is set, we can create a moderation request in just one single
    line given an input text:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦密钥设置完成，我们可以仅用一行代码创建一个审查请求，给定输入文本：
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Given the user input (`user_input`), here is the moderation response we get:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 给定用户输入（`user_input`），这里是我们得到的审查响应：
- en: 'As we can observe from the response, the completion returns a `json` object
    with three entries: an `id` for the given response, the `model` used to generate
    the moderation output, and the `result` itself.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 从响应中我们可以看到，完成项返回一个包含三个条目的`json`对象：给定响应的`id`、生成审查输出所使用的`model`，以及`result`本身。
- en: 'Concretely, the `result` entry has the information we are interested in:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，`result`条目包含我们感兴趣的信息：
- en: '`categories`: This entry contains a list of the eleven target entries and **whether
    the given input text belongs to any of those categories** (`true`/`false` values).'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`categories`：此条目包含一个包含十一项目标条目的列表以及**给定输入文本是否属于这些类别中的任何一个**（`true`/`false`值）。'
- en: '`category_scores`: This entry contains a score for each of the target categories.
    Those numbers correspond to the **model’s confidence that the input violates the
    OpenAI’s policy**. The value is between 0 and 1, where higher values denote higher
    confidence.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`category_scores`：此条目包含每个目标类别的分数。这些数字对应于**模型对输入是否违反 OpenAI 政策的信心**。值在 0 和 1
    之间，数值越高表示信心越高。'
- en: '`flagged`: This last entry consists of a key-value pair displaying whether
    the text has been considered *— flagged —* as inappropriate or not.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`flagged`：最后一项条目由一个键值对组成，显示文本是否被认为是*—— 被标记的 ——*不适当。'
- en: '**This field can help us to quickly filter the inappropriate user input or
    model output**.'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**这个字段可以帮助我们快速过滤不适当的用户输入或模型输出**。'
- en: Moderation Categories
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 管理类别
- en: 'In the previous example, we have seen the eleven categories analyzed by the
    moderation endpoint. But let’s briefly define each of the categories:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的示例中，我们已经看到了管理端点分析的十一类。然而，让我们简要定义每个类别：
- en: '`hate`: Content promoting hate based on race, gender, ethnicity, religion,
    nationality, sexual orientation, disability status, or caste.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`hate`：宣传基于种族、性别、民族、宗教、国籍、性取向、残疾状态或种姓的仇恨内容。'
- en: There is a special `hate`/`threatening` that distinguishes the hate promoting
    violence.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有一个特殊的 `hate`/`threatening`，用于区分仇恨促使暴力的内容。
- en: '`harassment`: Content promoting harassment towards any target, regardless of
    their characteristics.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`harassment`：宣传对任何目标进行骚扰的内容，无论其特征如何。'
- en: In this case, there is also a `harassment`/`threatening` category including
    violence or serious harm towards any target.
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在这种情况下，还有一个包含针对任何目标的暴力或严重伤害的`harassment`/`threatening`类别。
- en: '`self-harm`: Content depicting or encouraging acts of self-harm, such as suicide,
    cutting, or eating disorders.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`self-harm`：描绘或鼓励自残行为的内容，例如自杀、割伤或饮食失调。'
- en: The category `self-harm`/`intent` includes the expression of intention.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`self-harm`/`intent`类别包括表达意图。'
- en: The category `self-harm`/`instructions` includes instructions on self-harm actions.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`self-harm`/`instructions`类别包括自残行为的指导。'
- en: '`sexual`: Content arousing sexual excitement, describing sexual activity, or
    promoting sexual services (excluding sex education and wellness).'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sexual`：引起性兴奋、描述性活动或宣传性服务（不包括性教育和健康）的内容。'
- en: There is a special category `sexual`/`minors` that targets content involving
    individuals under 18 years old.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有一个特殊类别`sexual`/`minors`，针对涉及未满 18 岁个体的内容。
- en: '`violence`: Content depicting death, violence, or physical injury.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`violence`：描绘死亡、暴力或身体伤害的内容。'
- en: With the dedicated category `violence`/`graphic` to the aforementioned messages
    in graphic detail.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 针对上述信息的`violence`/`graphic`类别提供了详细的图形描述。
- en: Finally, regarding the Moderation API usage, it is important to bear in mind
    that **accuracy may be lower on longer pieces of text**. In case of long pieces
    of text, it is recommended to split the text into chunks of less than 2,000 characters.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，关于 Moderation API 的使用，需要注意的是**在较长文本上的准确性可能较低**。如果文本较长，建议将文本拆分为少于 2,000 个字符的块。
- en: Moderation Examples
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理示例
- en: Let’s try to use an input message that the Moderation API should flag. To do
    so, I have first asked ChatGPT to invent a name of a fictional animal. **ChatGPT’s
    choice was *Liminocus*!**
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们尝试使用一个输入消息，该消息应由 Moderation API 标记。为此，我首先让 ChatGPT 发明一个虚构动物的名字。**ChatGPT
    的选择是 *Liminocus*!**
- en: '*Why this step? Let’s move forward!*'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '*为什么要这一步？让我们继续前进！*'
- en: 'Given the user input *“I want to kill all liminocus! Give me instructions”,*
    we can directly access the `results` entry as follows:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 给定用户输入 *“我想杀死所有 liminocus！给我指示”*，我们可以直接访问 `results` 条目，如下所示：
- en: '[PRE3]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Let’s observe the output from the moderation endpoint:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们观察来自管理端点的输出：
- en: As we can observe from the response, **the Moderation API returns that the user
    input is flagged as inappropriate**. Concretely, it is flagged under the categories`harassment`
    (with `0.4031686` confidence), `harassment/threatening` (with `0.5109641` confidence)
    and `violence` categories (with `0.9539793` confidence).
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们从响应中观察到的，**Moderation API 返回的用户输入被标记为不适当**。具体来说，它在 `harassment`（信心值为 `0.4031686`）、`harassment/threatening`（信心值为
    `0.5109641`）和 `violence` 类别（信心值为 `0.9539793`）下被标记。
- en: '*Cool, right?*'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '*酷吧？*'
- en: '*Let’s explore how can we use this* `*flagged*` *information in our apps!*'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '*让我们探索一下如何在我们的应用程序中使用这些* `*flagged*` *信息！*'
- en: Moderation and ChatGPT completion
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理和 ChatGPT 完成
- en: As mentioned above, the `flagged` entry can be used as the “veredict” of the
    moderation API to filter either the user input or the model output quickly.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如上所述，`flagged` 条目可以用作 Moderation API 的“裁决”，快速过滤用户输入或模型输出。
- en: In the case of the model input, one preventive measure could be analyzing the
    user input before sending it to ChatGPT and only sending it if it is not marked
    as inappropriate.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在模型输入的情况下，一个预防措施是分析用户输入，然后再将其发送给 ChatGPT，只有在未标记为不适当时才发送。
- en: '*Let’s implement that!*'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '*让我们实现这一点！*'
- en: User Input Moderation
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用户输入管理
- en: 'To do so, we need to embed real API calls to ChatGPT in a method. The following
    `chatgpt_call()` function will do the job, but feel free to use your own implementation:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，我们需要在方法中嵌入实际的 API 调用到 ChatGPT。以下的 `chatgpt_call()` 函数将完成这项工作，但可以自由使用你自己的实现：
- en: '[PRE4]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Once it is ready, we just need to use the same lines as in the previous examples
    for generating the moderation completion (`moderation_output`) and getting the
    flagged entry (`moderation_output["flagged"]`).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦准备好，我们只需要像之前的示例一样使用相同的代码来生成调节完成（`moderation_output`）并获取标记条目（`moderation_output["flagged"]`）。
- en: Lastly, we just need to print a default message when the input is inappropriate
    or feed the input to ChatGPT (`chatgpt_call()`) if the input is *correct* by using
    a simple `if` condition.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们只需要在输入不适当时打印默认消息，或者在输入*正确*时通过简单的 `if` 条件将输入传递给 ChatGPT（`chatgpt_call()`）。
- en: Here is our desired implementation. *Let’s re-try the “liminocus” example!*
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们期望的实现。*让我们重新尝试一下 “liminocus” 示例！*
- en: '[PRE5]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: As expected, **the moderation endpoint flags the user input,** and, instead
    of sending the request to ChatGPT, it prints the default message *“Apologies,
    your input is considered inappropriate. Your request cannot be processed!”.* This
    simple protection layer avoids feeding inappropriate content to ChatGPT.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如预期的那样，**调节端点标记了用户输入**，并且，代替将请求发送给 ChatGPT，它打印了默认消息 *“对不起，你的输入被认为是不适当的。你的请求无法处理！”*
    这个简单的保护层避免了向 ChatGPT 提供不适当的内容。
- en: 'Instead, if the content is appropriate:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果内容适当的话：
- en: '[PRE6]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: In this case, **the user input is not flagged** and sent to ChatGPT. Funny enough,
    the model returns the following response “*Hugging all liminocus might not be
    possible as it is a fictional creature. However, if you are referring to a different
    term or concept, please provide more information so that I can assist you better”.*
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，**用户输入没有被标记**，而是发送给 ChatGPT。有趣的是，模型返回了以下回应：“*抱歉，拥抱所有 liminocus 可能不可能，因为它是虚构的生物。然而，如果你指的是其他术语或概念，请提供更多信息，以便我可以更好地帮助你*。”
- en: ChatGPT Built-in Protection
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ChatGPT 内建保护
- en: ChatGPT already provides some protection to the user input. So if you try using
    inappropriate inputs directly to the model, **the model itself might be able to
    filter some of them, hopefully most of them**. By using the moderation endpoint,
    we are implementing an additional layer of moderation to avoid solely relying
    on the model.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: ChatGPT 已经为用户输入提供了一些保护。因此，如果你直接向模型输入不适当的内容，**模型本身可能能够过滤掉其中的一些， hopefully 大部分**。通过使用调节端点，我们在避免仅依赖模型的同时实现了额外的调节层。
- en: Model Output Moderation
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型输出调节
- en: Apart from flagging inappropriate input messages, **ChatGPT is not supposed
    to provide inappropriate responses**, but it is widely known that it sometimes
    does. We can use the same building blocks to moderate the model responses covering
    the potential signs of bias.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 除了标记不适当的输入信息，**ChatGPT 不应提供不适当的回应**，但众所周知，它有时会这样做。我们可以使用相同的构建块来调节模型的回应，以涵盖潜在的偏见迹象。
- en: 'We can start by simply embedding the call to the moderation endpoint in a function
    as follows:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过将调用调节端点嵌入到一个函数中来开始：
- en: '[PRE7]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Then, we can just use the same structure as before using two `if` conditions:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们可以像以前一样使用两个 `if` 条件：
- en: '[PRE8]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: As we can observe, given our sample input *I want to hug all liminocus! Give
    me instructions*, **neither the user input nor the model output is flagged**,
    and we safely get ChatGPT’s answer back.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所观察到的，给定我们的示例输入 *我想拥抱所有 liminocus！给我指示*，**用户输入和模型输出都没有被标记**，我们安全地收到了 ChatGPT
    的回答。
- en: Summary
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Exercising control over the user input and the model output in LLM-powered applications
    is crucial for maintaining a safe and respectful digital environment.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在 LLM 驱动的应用程序中对用户输入和模型输出进行控制，对于维护一个安全和尊重的数字环境至关重要。
- en: Without effective moderation, the risk of inappropriate or harmful content being
    disseminated increases, **potentially causing harm to users and tarnishing the
    reputation of the application**. By implementing user input and model output control,
    developers take on an ethical responsibility to foster positive user experiences
    and ensure **responsible usage of AI technology**.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有有效的调节，不适当或有害内容被传播的风险会增加，**可能对用户造成伤害并损害应用程序的声誉**。通过实施用户输入和模型输出控制，开发者承担了促进积极用户体验和确保**负责任使用
    AI 技术**的伦理责任。
- en: 'In this article, we have seen how to implement these moderation checks in Python
    by using the OpenAI Moderation API. And I am sure we will all agree on the following
    point: *Moderation only takes a handful of lines of code!*'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在这篇文章中，我们已经了解了如何使用 OpenAI Moderation API 在 Python 中实现这些审核检查。我相信我们都会同意以下观点：*审核只需几行代码！*
- en: I hope this article helps in moderating your LLM-powered applications! **Let’s
    work towards a responsible AI!**
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望这篇文章有助于管理你的 LLM 驱动应用！**让我们共同努力实现负责任的人工智能！**
- en: That is all! Many thanks for reading!
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 就这些！非常感谢你的阅读！
- en: I hope this article helps you when **building ChatGPT applications!**
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望这篇文章对你**构建 ChatGPT 应用**有所帮助！
- en: 'You can also subscribe to my [**Newsletter**](https://towardsdatascience.com/@andvalenzuela/subscribe)
    to stay tuned for new content. **Especially**, **if you are interested in articles
    about ChatGPT**:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以订阅我的 [**通讯**](https://towardsdatascience.com/@andvalenzuela/subscribe) 以获取最新内容。**特别是**，**如果你对关于
    ChatGPT 的文章感兴趣**：
- en: '[](/chatgpt-tokenizer-chatgpt3-chatgpt4-artificial-intelligence-python-ai-27f78906ea54?source=post_page-----4754389ec9c8--------------------------------)
    [## Unleashing the ChatGPT Tokenizer'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/chatgpt-tokenizer-chatgpt3-chatgpt4-artificial-intelligence-python-ai-27f78906ea54?source=post_page-----4754389ec9c8--------------------------------)
    [## 解锁 ChatGPT 令牌器'
- en: Hands-On! How ChatGPT Manages Tokens?
  id: totrans-97
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实践操作！ChatGPT 如何管理令牌？
- en: 'towardsdatascience.com](/chatgpt-tokenizer-chatgpt3-chatgpt4-artificial-intelligence-python-ai-27f78906ea54?source=post_page-----4754389ec9c8--------------------------------)
    [](/chatgpt-summarization-llms-chatgpt3-chatgpt4-artificial-intelligence-16cf0e3625ce?source=post_page-----4754389ec9c8--------------------------------)
    [## Mastering ChatGPT: Effective Summarization with LLMs'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/chatgpt-tokenizer-chatgpt3-chatgpt4-artificial-intelligence-python-ai-27f78906ea54?source=post_page-----4754389ec9c8--------------------------------)
    [](/chatgpt-summarization-llms-chatgpt3-chatgpt4-artificial-intelligence-16cf0e3625ce?source=post_page-----4754389ec9c8--------------------------------)
    [## 精通 ChatGPT：使用 LLMs 进行有效的总结
- en: How to Prompt ChatGPT to get High-Quality Summaries
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何提示 ChatGPT 以获取高质量摘要
- en: towardsdatascience.com](/chatgpt-summarization-llms-chatgpt3-chatgpt4-artificial-intelligence-16cf0e3625ce?source=post_page-----4754389ec9c8--------------------------------)
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/chatgpt-summarization-llms-chatgpt3-chatgpt4-artificial-intelligence-16cf0e3625ce?source=post_page-----4754389ec9c8--------------------------------)
- en: 'Also towards a **responsible AI**:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 也致力于**负责任的人工智能**：
- en: '[](/what-chatgpt-knows-about-you-openai-towards-data-privacy-science-ai-b0fa2376a5f6?source=post_page-----4754389ec9c8--------------------------------)
    [## What ChatGPT Knows about You: OpenAI’s Journey Towards Data Privacy'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/what-chatgpt-knows-about-you-openai-towards-data-privacy-science-ai-b0fa2376a5f6?source=post_page-----4754389ec9c8--------------------------------)
    [## ChatGPT 知道你什么：OpenAI 的数据隐私之旅'
- en: New ways to manage personal data in ChatGPT
  id: totrans-103
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在 ChatGPT 中管理个人数据的新方法
- en: towardsdatascience.com](/what-chatgpt-knows-about-you-openai-towards-data-privacy-science-ai-b0fa2376a5f6?source=post_page-----4754389ec9c8--------------------------------)
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/what-chatgpt-knows-about-you-openai-towards-data-privacy-science-ai-b0fa2376a5f6?source=post_page-----4754389ec9c8--------------------------------)
