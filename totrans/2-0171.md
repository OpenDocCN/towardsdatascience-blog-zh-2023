# 数据分析家庭实验室启动完整指南

> 原文：[https://towardsdatascience.com/a-complete-guidebook-on-starting-your-own-homelab-for-data-analysis-552c9f532ff0](https://towardsdatascience.com/a-complete-guidebook-on-starting-your-own-homelab-for-data-analysis-552c9f532ff0)

![](../Images/ad5edba28504a7abfb32abf7ebecd382.png)

照片由 [imgix](https://unsplash.com/@imgix?utm_source=medium&utm_medium=referral) 提供，来源于 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

## 现在是启动你自己的数据科学家庭实验室的最佳时机，用于分析对你有用的数据、存储重要信息或开发自己的技术技能。

[](https://medium.com/@willkeefe?source=post_page-----552c9f532ff0--------------------------------)[![Will Keefe](../Images/e26b5d394bd268f2b7e333d4b45711eb.png)](https://medium.com/@willkeefe?source=post_page-----552c9f532ff0--------------------------------)[](https://towardsdatascience.com/?source=post_page-----552c9f532ff0--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----552c9f532ff0--------------------------------) [Will Keefe](https://medium.com/@willkeefe?source=post_page-----552c9f532ff0--------------------------------)

·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----552c9f532ff0--------------------------------) ·阅读时间13分钟·2023年6月10日

--

我在 Reddit 上的几个技术相关子论坛中看到过一句话，大意是“支付云服务费用就像是在租用别人的计算机。”虽然我认为云计算和存储非常有用，但这篇文章将重点讲述我为什么将我的分析、数据存储和工具从在线服务提供商那里转移到我的家庭办公室。[我使用的工具和硬件的链接](http://www.willkeefe.com)也可以查看。

# 介绍

解释我这疯狂方法的最佳方式是分享一个我遇到的商业问题。虽然我是一个风险承受能力较低的传统投资者，但我心中有一个小小的希望，也许，只有也许，我能成为那不到1%击败标普500的人。请注意，我使用了“希望”这个词，因此，也不要在这种希望上投入太多。每年我会给我的 Robinhood 账户100美元，并像对待彩票一样对待它——希望能一夜暴富。不过，我要向大家保证，这个账户与我的其他主要账户是分开的，后者主要投资于指数基金，获得稳定的回报，并且我会在这些基金上进行定期的卖出看涨期权。我的 Robinhood 账户则有些类似于赌博，什么都可能发生。不过，我给自己设定了几个规则：

1.  我从不使用任何保证金。

1.  我从不卖出裸仓，只进行买入开仓操作。

1.  我不会将钱投入到追逐亏损交易上。

你可能会想知道我接下来要说什么，我会从我的岔题中回到正题，分享我的“彩票”虽然尚未为我赢得一个 Jeff-Bezos 水平的游艇，但确实教会了我不少关于风险和损失的知识。这些教训也激发了我内心的数据爱好者，尝试改进我量化风险和预测市场趋势及事件的方式。即使在短期内方向性正确的模型也能为投资者提供巨大的价值——无论是散户还是对冲基金。

我看到改善决策的第一步是需要有数据来做*数据驱动*的决策。剔除投资中的情感是一个著名的成功秘诀。虽然历史数据在股票和 ETF 中广泛可用，并通过诸如 [yfinance](https://pypi.org/project/yfinance/)（我下面的一个例子）等资源开放源代码，但衍生的历史数据集则要昂贵得多，获取也更困难。一些初步了解的 API 提示，常规的数据访问以回测我的投资组合策略可能会花费我数百美元**每年**，甚至根据我所寻求的粒度可能**每月**都要付费。

[](https://wire.insiderfinance.io/graphing-financial-data-and-multiple-overlaid-trends-using-python-and-plotly-f9d948934ecb?source=post_page-----552c9f532ff0--------------------------------) [## 使用 Python 和 Plotly 绘制金融数据及多个叠加趋势

### Plotly 为 Python 开发者提供了在使用蜡烛图和其他各种绘图工具建模时的灵活性……

wire.insiderfinance.io](https://wire.insiderfinance.io/graphing-financial-data-and-multiple-overlaid-trends-using-python-and-plotly-f9d948934ecb?source=post_page-----552c9f532ff0--------------------------------)

我决定在这个过程中投资于自己，而不是按我的条件花费数百美元。**观众发出呻吟**

# 构建在云端

我对数据抓取和仓储的初步思考使我回到了我在日常工作中使用的相同工具。我创建了一个个人 AWS 账户，并编写了 Python 脚本来部署在 Lambda 上，以在预定的时间间隔抓取免费的实时期权数据集，并代表我写入数据。这是一个完全自动化的系统，并且几乎可以无限扩展，因为会为我的投资组合中的每个股票动态启动不同的抓取器。写入数据更具挑战性，我夹在两条路之间。我可以选择将数据写入 S3，通过 Glue 爬取数据，然后用 Athena 进行无服务器查询，或者使用关系数据库服务，将数据直接从 Lambda 写入 RDS。

## 快速总结提到的 AWS 工具：

> Lambda 是一种无服务器计算，允许用户执行脚本而不需要太多的开销，并且提供非常慷慨的免费层。
> 
> S3，也称为简单存储服务，是一个具有相当大免费额度的对象存储系统，每GB每月费用为0.02美元。
> 
> Glue 是一个AWS的数据准备、集成和ETL工具，具有可用于读取和解释表格数据的网页爬虫。
> 
> Athena 是一种无服务器查询架构。

我最终倾向于使用RDS，仅仅是为了让数据可以轻松查询和监控，如果没有其他原因的话。他们还提供了750小时的免费额度和20GB的存储，这为我提供了一个很好的沙盒环境，让我可以动手操作。

然而，我没意识到股票期权数据有多庞大。我开始每15分钟写入大约100 MB的数据，每个股票代码每月都这样，这可能听起来不多，但考虑到我有一个包含20个股票代码的投资组合，在年底之前我就会用完所有免费额度。除此之外，免费层中的小计算能力很快就被消耗殆尽，我的服务器在不知不觉中消耗了所有750小时（考虑到我想跟踪期权交易，大约每天8小时，每周5天）。我还经常在白天工作后阅读和分析数据，这也导致了更高的使用量。大约两个月后，我用完了免费额度，收到了第一张AWS账单：每月约60美元。请记住，一旦免费额度结束，你将为每个服务器小时的处理、从AWS生态系统到本地开发机器的每GB数据量以及存储费用按GB/月付费。我预计在一两个月内，我的拥有成本可能增加至少50%甚至更多，并将继续增加。

![](../Images/14c6fd372eb504991205d38be7e4e07e.png)

哎呀。

# 离开云计算

到了这个时候，我意识到我宁愿把每月花在租用Amazon设备上的60美元花在电费上，把剩下的钱投入到我的Robinhood账户中，回到我们开始的地方。尽管我很喜欢使用AWS工具，但当我的雇主不支付账单时（对我的同事们，我保证我在工作中也是很节俭的），我真的对投资它们不太感兴趣。AWS的定价对于爱好者来说并不合适。他们提供了很多很棒的免费资源来帮助新手学习，也为专业人士提供了极高的性价比，但对于现在这个中间层级却不适合。

我有一台旧的[联想 Y50–70](https://www.amazon.com/Lenovo-Y50-70-Laptop-Computer-Generation/dp/B0179Y6T6I?keywords=lenovo+y50-70&qid=1686279360&sprefix=lenovo+y50-70%2Caps%2C118&sr=8-8&ufe=app_do%3Aamzn1.fos.ac2169a1-b668-44b9-8bd0-5ec63b24bcb5&linkCode=ll1&tag=willkeefe-20&linkId=f7a30dc24fc8f6e16751b0d7357c179b&language=en_US&ref_=as_li_ss_tl) 笔记本电脑，屏幕坏了，我打算将其改装为家庭网页抓取机器人和 SQL 服务器。尽管它们作为新机或认证翻新的价格仍然相当可观（可能由于 i7 处理器和独立显卡），但我坏掉的屏幕几乎完全抵消了电脑的价值，因此将其作为服务器重新启用，使其焕发了新生，也让它积攒了约三年的灰尘。我把它放在客厅角落的一个音响上（旁边有一个侏儒），与 PlayStation 相对，并将其设置为“常开”以完成其新任务。我的女朋友甚至说，电脑键盘刺眼的红色背光“让房间看起来更整洁”，这也算是一种赞美。

![](../Images/c449014d76a2b31a6966bdae7e1322b9.png)

画面中是一个侏儒，但拍摄时，服务器尚未配置。

幸运的是，我的 65 英寸《使命召唤》认证电视距离笔记本电脑的 HDMI 电缆足够近，也能看到我写的代码。

我将服务器从云端迁移到我的破旧笔记本电脑，开启了新的征程！现在我可以以仅仅电费为代价进行所有分析，约为 $0.14/kWh，或大约 $0.20–0.30 一天。接下来的一个月或两个月里，我在本地进行了一些实验和调整。通常，这包括每周工作后花几小时打开我的 MacBook，玩弄来自侏儒音响服务器的数据上的 ML 模型，利用本地[Plotly](https://medium.com/u/5fdd6522cd45?source=post_page-----552c9f532ff0--------------------------------) 仪表板可视化数据，然后指导我的 Robinhood 投资。

我取得了一些有限的成功。详细情况我会留到另一篇 Medium 文章中分享，一旦有更多的数据和性能指标。不过，我决定从破旧笔记本电脑扩展到自己的微型云。这次，不是租用，而是拥有。

# 构建家庭实验室

“家庭实验室”这个名字听起来很复杂和酷炫 **推了推眼镜**，但实际上在拆解后相对简单。基本上，我在使用破旧笔记本电脑时遇到了一些挑战，这些挑战提供了动力，同时也有一些新目标和理想需求给予了灵感。

## 损坏的笔记本电脑问题：

> 硬盘很旧，至少有 5 或 6 年了，这给未来数据丢失带来了风险。在承受较大查询压力时，它的速度也显著下降，这是该型号的一个[已知问题](https://www.pcworld.com/article/428549/ocz-trion-100-review-an-affordable-ssd-with-a-problem.html)。
> 
> 使用我的 TV 和蓝牙键盘来操作安装了 Windows 10 Home 的笔记本电脑非常不便，且不符合人体工程学。
> 
> 笔记本电脑无法升级，如果我想添加更多的 RAM 超过已安装的容量。
> 
> 技术在任务并行化方面有限。
> 
> 单靠笔记本电脑不足以托管我的 SQL 服务器，以及为我的 ML 模型处理仪表板和数据。也不希望在同一台计算机上共享资源，以免影响其他服务。

我会实施的系统必须解决这些问题，但我也希望实现一些新功能。

## 计划的新功能：

> 一个新的家庭办公室设置，使在家工作时更加舒适。
> 
> 整个公寓的以太网布线（如果我支付整个千兆网，我就要使用整个千兆网 [AT&T](https://medium.com/u/d64b7e9cbaff?source=post_page-----552c9f532ff0--------------------------------)）。
> 
> 在适当的情况下使用微服务器进行分布式计算。
> 
> 服务器可以升级和更换。
> 
> 各种程序和软件可以独立部署，以实现不同的子目标，而不会妨碍当前或并行程序。

**我选择的计算机的分布式计算是一个有争议的话题，稍后将在文章中解释。**

我花了很多时间进行适当的硬件配置研究。我读过的一个最喜欢的资源是《[TinyMiniMicro](https://www.servethehome.com/introducing-project-tinyminimicro-home-lab-revolution/)》，它比较了 Lenovo ThinkCentre Tiny 平台、HP ProDesk/EliteDesk Mini 平台和 Dell OptiPlex Micro 平台。我也曾使用过单板计算机，就像 Project TMM 的作者一样，我有两个 [Raspberry Pis](https://amzn.to/3WZhoXF) 和一个 [Odroid XU4](https://amzn.to/43NUwfX)。

> 我喜欢我的 Pis 的地方：
> 
> 它们体积小，功耗低，新型号有 8GB 的 RAM。
> 
> 我喜欢我的 Odroid XU4 的地方：
> 
> 它小巧，拥有 8 个核心，是一个很好的模拟平台。

虽然我相信我的 SBC 仍会在我的家庭实验室中找到用武之地，但请记住，我需要处理我想要托管的服务的设备。我最终还购买了可能是我一生中最贵的 Amazon 订单，并彻底重新装修了我的整个办公室。我的购物车包括：

+   多条 Cat6 以太网电缆

+   RJ45 压接工具

+   绑扎带

+   2 台 EliteDesk 800 G1 i5 Minis（但发了一台 G2 #Win）

+   1 台 EliteDesk 800 G4 i7 Mini（还发了一款更好的 i7 处理器 #Win）

+   2 台 ProDesk 600 G3 i5 Minis（并发了一台稍差的 i5 #Karma）

+   额外的 RAM

+   多个 SSD

+   替换我的书架/桌子的一个新办公室桌

+   新的办公室照明

+   硬盘克隆设备

+   两个 8 端口网络交换机

+   不间断电源

+   一个打印机

+   一个机械键盘（相关的，我还有五个键盘和鼠标组合，如果有人需要的话）

+   两个新显示器

如果你想查看我完整的零件列表，包括每个项目的链接以供检查或购买，请随时 [前往我的网站查看完整列表](http://www.willkeefe.com/)。

一旦我的“夏季圣诞礼物”到达，门口堆满了许多箱子，真正的乐趣就可以开始了。第一步是完成全屋以太网布线。安装人员默认没有将任何以太网电缆连接到有线电视盒上，所以我不得不剪掉电缆末端并自己安装插座。幸运的是，我购买的棒极了的工具包（链接在我的 [网站](http://www.willkeefe.com/)）中包括了压接工具、RJ45 插头和测试设备，以确保我正确布线并确定我公寓中的哪个端口与哪个电缆对应。当然，按我的运气，最后一根电缆正好是我办公室需要的，但我想未来的租户会从我今天的好 deed 中受益。整个过程花了大约 2-3 小时布线千兆连接，幸运的是，我的女朋友很喜欢帮忙，一杯酒让过程变得更快。

在有线网络设置之后，我开始通过组装家具、安装照明和拆卸硬件来布置我的办公室。我的桌面设置非常整洁，我对现在的办公室效果很满意。

![](../Images/b67fd2c4e0c4532c3c190dbc9c367e2b.png)![](../Images/5d87d4733edf2cdd8da5350796969d32.png)

前后对比

关于我的硬件设置，我购买的每台计算机都配备了 16GB 的内存，我将其升级到 32GB，同时还有固态硬盘（其中一些我也进行了升级）。由于每台设备都运行 Windows 10 Pro，我能够在我的网络中进行远程登录，并且我已经设置了一些服务。联网这些设备也很有趣，尽管我觉得我的电缆管理还有改进的空间。

![](../Images/a02fb6ad592fa6267b4aba51f4aaee20.png)![](../Images/23402c1bc5a4afd93fb59da27366da33.png)

家庭实验室节点前面

![](../Images/3f0bca7133a43222c9b645b66e9258a5.png)![](../Images/468c2a88b85ae5fca4d54252b4e50c60.png)

家庭实验室节点后面

现在，根据我一开始提到的星号，为什么我花费了相当于一年的 AWS 成本来购买五台总共大约 22 核心的计算机，而不是直接购买/构建一台高级现代 PC 呢？原因有几个，我相信这可能会在某些技术爱好者中引发争议。

1.  扩展性 — 我可以轻松地向我的集群中添加另一个节点，或移除一个进行维护/升级。

1.  成本 — 升级和维护非常简单且便宜。此外，对于大多数单元，功耗约为 35W，运行我的服务器的成本非常实惠。

1.  冗余 — 如果一个节点出现故障（例如，CPU 故障），我有纠正脚本来平衡我的分布式工作负载。

1.  教育 — 我正在学习大量内容，这些内容提升了我的专业技能和经验，教育是✨宝贵的✨。

1.  看起来很酷。这里的第5点足以作为理由。

说到教育，这里是我在集群中学到并实施的一些东西：

+   在将驱动器从小容量克隆到大容量时，你需要扩展新驱动器的卷，这通常需要第三方软件来轻松完成（如 Paragon）。

+   你需要手动分配静态 IP 才能在桌面之间远程访问时获得可靠的结果。

+   迁移 SQL 服务器时，从备份恢复比在两个不同服务器之间查询要容易。

我相信在这个过程中我还会学到很多东西……

以下是我现在家庭网络的一个大致示意图。图中没有展示我的 wifi 设备，比如我的 MacBook 和手机，它们会在两个路由器之间跳跃。最终，我还会将我的单板计算机和可能的另一台 PC 加入到集群中。哦，对了，我那台破屏的旧笔记本电脑？没有人愿意在 Facebook Marketplace 上以 $50 的价格购买它，所以我在上面安装了 Windows 10 Pro 以便远程访问，并且也将它添加到集群中，这实际上可能是个好事，因为我可以利用它的 GPU 来辅助构建 Tensorflow 模型（也可以玩一些回合制游戏）。

![](../Images/6b64d9b738ec6ce1319d5337077d6f15.png)

家庭实验室网络图

说到 Tensorflow，这里是我将在新家庭实验室中实现的一些服务和功能：

+   SQL 服务器（目前托管我的财务数据集以及我正在网络抓取的新数据集，后续将撰写关于我母校的财务状况和我居住城市的公共安全数据集）

+   Docker（用于托管我将要构建的应用程序/容器以及 Minecraft 服务器，因为，为什么不呢）

+   Jenkins CI/CD 系统，用于在我的数据集上构建、训练和部署机器学习模型

+   个人代码库的 Git 仓库

+   网络附加存储，支持我摄影爱好中的大量照片、文档以及其他数据收集活动

+   以及其他待定的项目/服务

# 结束语：

值得吗？嗯，确实有“只有时间才能证明”的因素。一旦我的信用卡从亚马逊的采购中恢复过来，我相信它也会享受 AWS 定价的缓解。我也期待能够构建和部署更多的兴趣爱好，并收集更多数据来撰写更多的 Medium 文章。我计划的下一些文章包括分析西弗吉尼亚大学目前面临的财政债务问题，以及对纳什维尔公共安全报告的探索性数据分析（可能还会有一个预测紧急事件和分配资源需求的机器学习模型）。这些数据科学项目规模足够大，如果没有某种存储和查询大量相关数据的架构，将无法实现。

你怎么看？离开云服务，建立一个家庭实验室的项目听起来是否是你想做的？你的硬件选择会是什么？

如果你对我使用的硬件感兴趣，可以查看我在 [www.willkeefe.com](http://www.willkeefe.com) 上的评论。

我已经发布了这篇文章的续集，扩展了使用案例！在 Better Programming 上查看！

[https://medium.com/better-programming/building-python-distributed-machine-learning-models-for-derivatives-on-homelab-cluster-dd9cb1d97e23](https://medium.com/better-programming/building-python-distributed-machine-learning-models-for-derivatives-on-homelab-cluster-dd9cb1d97e23)

我最近在 Medium 上的相关内容：

[](/production-planning-and-resource-management-of-manufacturing-systems-in-python-5458e9c04183?source=post_page-----552c9f532ff0--------------------------------) [## Python中的生产计划和资源管理系统

### 高效的供应链、生产计划和资源分配管理比以往任何时候都更重要。Python…

towardsdatascience.com](/production-planning-and-resource-management-of-manufacturing-systems-in-python-5458e9c04183?source=post_page-----552c9f532ff0--------------------------------) [](/crime-location-analysis-and-prediction-using-python-and-machine-learning-1d8db9c8b6e6?source=post_page-----552c9f532ff0--------------------------------) [## 使用 Python 和机器学习进行犯罪地点分析与预测

### 利用 Python、Folium 和 ScyPy，可以建立模型来展示犯罪事件，计算最佳位置…

towardsdatascience.com](/crime-location-analysis-and-prediction-using-python-and-machine-learning-1d8db9c8b6e6?source=post_page-----552c9f532ff0--------------------------------)

在 LinkedIn 上也可以与我联系！

[https://www.linkedin.com/in/will-keefe-476016127/](https://www.linkedin.com/in/will-keefe-476016127/)
