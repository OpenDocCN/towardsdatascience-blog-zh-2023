- en: Ensuring Trustworthy ML Systems With Data Validation and Real-Time Monitoring
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¡®ä¿å¯ä¿¡çš„MLç³»ç»Ÿï¼Œé€šè¿‡æ•°æ®éªŒè¯å’Œå®æ—¶ç›‘æ§
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/ensuring-trustworthy-ml-systems-with-data-validation-and-real-time-monitoring-89ab079f4360](https://towardsdatascience.com/ensuring-trustworthy-ml-systems-with-data-validation-and-real-time-monitoring-89ab079f4360)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/ensuring-trustworthy-ml-systems-with-data-validation-and-real-time-monitoring-89ab079f4360](https://towardsdatascience.com/ensuring-trustworthy-ml-systems-with-data-validation-and-real-time-monitoring-89ab079f4360)
- en: '[THE FULL STACK 7-STEPS MLOPS FRAMEWORK](https://towardsdatascience.com/tagged/full-stack-mlops)'
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[å®Œæ•´çš„7æ­¥éª¤MLOpsæ¡†æ¶](https://towardsdatascience.com/tagged/full-stack-mlops)'
- en: 'Lesson 5: Data Validation for Quality and Integrity using GE. Model Performance
    Continuous Monitoring.'
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è¯¾ç¨‹ 5ï¼šä½¿ç”¨GEè¿›è¡Œè´¨é‡å’Œå®Œæ•´æ€§çš„æ•°æ®éªŒè¯ã€‚æ¨¡å‹æ€§èƒ½æŒç»­ç›‘æ§ã€‚
- en: '[](https://pauliusztin.medium.com/?source=post_page-----89ab079f4360--------------------------------)[![Paul
    Iusztin](../Images/d07551a78fa87940220b49d9358f3166.png)](https://pauliusztin.medium.com/?source=post_page-----89ab079f4360--------------------------------)[](https://towardsdatascience.com/?source=post_page-----89ab079f4360--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----89ab079f4360--------------------------------)
    [Paul Iusztin](https://pauliusztin.medium.com/?source=post_page-----89ab079f4360--------------------------------)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://pauliusztin.medium.com/?source=post_page-----89ab079f4360--------------------------------)[![Paul
    Iusztin](../Images/d07551a78fa87940220b49d9358f3166.png)](https://pauliusztin.medium.com/?source=post_page-----89ab079f4360--------------------------------)[](https://towardsdatascience.com/?source=post_page-----89ab079f4360--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----89ab079f4360--------------------------------)
    [Paul Iusztin](https://pauliusztin.medium.com/?source=post_page-----89ab079f4360--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----89ab079f4360--------------------------------)
    Â·12 min readÂ·Jun 3, 2023
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº[Towards Data Science](https://towardsdatascience.com/?source=post_page-----89ab079f4360--------------------------------)
    Â·é˜…è¯»æ—¶é—´12åˆ†é’ŸÂ·2023å¹´6æœˆ3æ—¥
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/07469861a1fd728e3dce4224cc62ce4f.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/07469861a1fd728e3dce4224cc62ce4f.png)'
- en: Photo by [Hassan Pasha](https://unsplash.com/@hpzworkz?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[Hassan Pasha](https://unsplash.com/@hpzworkz?utm_source=medium&utm_medium=referral)æ‹æ‘„ï¼Œ[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: This tutorial represents **lesson 5 out of a 7-lesson course** that will walk
    you step-by-step through how to **design, implement, and deploy an ML system**
    using **MLOps good practices**. During the course, you will build a production-ready
    model to forecast energy consumption levels for the next 24 hours across multiple
    consumer types from Denmark.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ•™ç¨‹ä»£è¡¨**7èŠ‚è¯¾ä¸­çš„ç¬¬5èŠ‚**ï¼Œå°†é€æ­¥æŒ‡å¯¼ä½ å¦‚ä½•**è®¾è®¡ã€å®æ–½å’Œéƒ¨ç½²MLç³»ç»Ÿ**ï¼Œä½¿ç”¨**MLOpsè‰¯å¥½å®è·µ**ã€‚åœ¨è¯¾ç¨‹ä¸­ï¼Œä½ å°†æ„å»ºä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„æ¨¡å‹ï¼Œç”¨äºé¢„æµ‹æœªæ¥24å°æ—¶å†…æ¥è‡ªä¸¹éº¦çš„å¤šç§æ¶ˆè´¹ç±»å‹çš„èƒ½æºæ¶ˆè€—æ°´å¹³ã€‚
- en: '*By the end of this course, you will understand all the fundamentals of designing,
    coding and deploying an ML system using a batch-serving architecture.*'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '*åˆ°è¯¾ç¨‹ç»“æŸæ—¶ï¼Œä½ å°†ç†è§£å¦‚ä½•ä½¿ç”¨æ‰¹å¤„ç†æœåŠ¡æ¶æ„æ¥è®¾è®¡ã€ç¼–ç å’Œéƒ¨ç½²MLç³»ç»Ÿçš„æ‰€æœ‰åŸºæœ¬åŸç†ã€‚*'
- en: This course *targets mid/advanced machine learning engineers* who want to level
    up their skills by building their own end-to-end projects.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬è¯¾ç¨‹*é’ˆå¯¹ä¸­çº§/é«˜çº§æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆ*ï¼Œå¸Œæœ›é€šè¿‡æ„å»ºè‡ªå·±çš„ç«¯åˆ°ç«¯é¡¹ç›®æå‡æŠ€èƒ½ã€‚
- en: Nowadays, certificates are everywhere. Building advanced end-to-end projects
    that you can later show off is the best way to get recognition as a professional
    engineer.
  id: totrans-12
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¦‚ä»Šï¼Œè¯ä¹¦éšå¤„å¯è§ã€‚æ„å»ºå…ˆè¿›çš„ç«¯åˆ°ç«¯é¡¹ç›®ï¼Œå¹¶åœ¨ä¹‹åå±•ç¤ºå‡ºæ¥ï¼Œæ˜¯è·å¾—ä¸“ä¸šå·¥ç¨‹å¸ˆè®¤å¯çš„æœ€ä½³æ–¹å¼ã€‚
- en: 'Table of Contents:'
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç›®å½•ï¼š
- en: Course Introduction
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¯¾ç¨‹ä»‹ç»
- en: Course Lessons
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¯¾ç¨‹å†…å®¹
- en: Data Source
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ•°æ®æº
- en: 'Lesson 5: Data Validation for Quality and Integrity using GE. Model Performance
    Continuous Monitoring.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¯¾ç¨‹ 5ï¼šä½¿ç”¨GEè¿›è¡Œè´¨é‡å’Œå®Œæ•´æ€§çš„æ•°æ®éªŒè¯ã€‚æ¨¡å‹æ€§èƒ½æŒç»­ç›‘æ§ã€‚
- en: 'Lesson 5: Code'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¯¾ç¨‹ 5ï¼šä»£ç 
- en: Conclusion
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: References
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å‚è€ƒæ–‡çŒ®
- en: Course Introduction
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è¯¾ç¨‹ä»‹ç»
- en: '***At the end of this 7 lessons course, you will know how to:***'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '***åœ¨è¿™7èŠ‚è¯¾çš„è¯¾ç¨‹ç»“æŸæ—¶ï¼Œä½ å°†çŸ¥é“å¦‚ä½•ï¼š***'
- en: design a batch-serving architecture
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è®¾è®¡æ‰¹å¤„ç†æœåŠ¡æ¶æ„
- en: use Hopsworks as a feature store
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Hopsworksä½œä¸ºç‰¹å¾å­˜å‚¨
- en: design a feature engineering pipeline that reads data from an API
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªä»APIè¯»å–æ•°æ®çš„ç‰¹å¾å·¥ç¨‹ç®¡é“
- en: build a training pipeline with hyper-parameter tunning
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ„å»ºä¸€ä¸ªå…·æœ‰è¶…å‚æ•°è°ƒä¼˜çš„è®­ç»ƒç®¡é“
- en: use W&B as an ML Platform to track your experiments, models, and metadata
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨W&Bä½œä¸ºMLå¹³å°æ¥è·Ÿè¸ªä½ çš„å®éªŒã€æ¨¡å‹å’Œå…ƒæ•°æ®
- en: implement a batch prediction pipeline
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ç°æ‰¹å¤„ç†é¢„æµ‹ç®¡é“
- en: use Poetry to build your own Python packages
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: deploy your own private PyPi server
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: orchestrate everything with Airflow
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: use the predictions to code a web app using FastAPI and Streamlit
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: use Docker to containerize your code
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: use Great Expectations to ensure data validation and integrity
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: monitor the performance of the predictions over time
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: deploy everything to GCP
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: build a CI/CD pipeline using GitHub Actions
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If that sounds like a lot, don't worry. After you cover this course, you will
    understand everything I said before. Most importantly, you will know WHY I used
    all these tools and how they work together as a system.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: '**If you want to get the most out of this course,** [**I suggest you access
    the GitHub repository**](https://github.com/iusztinpaul/energy-forecasting) **containing
    all the lessons'' code. This course is designed to quickly read and replicate
    the code along the articles.**'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: By the end of the course, you will know how to implement the diagram below.
    Don't worry if something doesn't make sense to you. I will explain everything
    in detail.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4b5c3b0b8e2162ea8fd268ca745199ec.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
- en: Diagram of the architecture you will build during the course [Image by the Author].
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: By the **end of Lesson 5**, you will know how to use Great Expectations to validate
    the integrity and quality of your data. Also, you will understand how to implement
    a monitoring component on top of your ML system.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: 'Course Lessons:'
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Batch Serving. Feature Stores. Feature Engineering Pipelines.](https://medium.com/towards-data-science/a-framework-for-building-a-production-ready-feature-engineering-pipeline-f0b29609b20f)'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[Training Pipelines. ML Platforms. Hyperparameter Tuning.](https://medium.com/towards-data-science/a-guide-to-building-effective-training-pipelines-for-maximum-results-6fdaef594cee)'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[Batch Prediction Pipeline. Package Python Modules with Poetry.](https://medium.com/towards-data-science/unlock-the-secret-to-efficient-batch-prediction-pipelines-using-python-a-feature-store-and-gcs-17a1462ca489)'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[Private PyPi Server. Orchestrate Everything with Airflow.](/unlocking-mlops-using-airflow-a-comprehensive-guide-to-ml-system-orchestration-880aa9be8cff)'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Data Validation for Quality and Integrity using GE. Model Performance Continuous
    Monitoring.**'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[Consume and Visualize your Modelâ€™s Predictions using FastAPI and Streamlit.
    Dockerize Everything.](https://medium.com/towards-data-science/fastapi-and-streamlit-the-python-duo-you-must-know-about-72825def1243)'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[Deploy All the ML Components to GCP. Build a CI/CD Pipeline Using Github Actions.](https://medium.com/towards-data-science/seamless-ci-cd-pipelines-with-github-actions-on-gcp-your-tools-for-effective-mlops-96f676f72012)'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[[Bonus] Behind the Scenes of an â€˜Imperfectâ€™ ML Project â€” Lessons and Insights](https://medium.com/towards-data-science/imperfections-unveiled-the-intriguing-reality-behind-our-mlops-course-creation-6ff7d52ecb7e)'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For more context, check out [Lesson 3](/unlock-the-secret-to-efficient-batch-prediction-pipelines-using-python-a-feature-store-and-gcs-17a1462ca489),
    which will teach you how to build an inference pipeline using batch architecture
    and a Feature Store.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: è¦äº†è§£æ›´å¤šèƒŒæ™¯ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[ç¬¬3è¯¾](/unlock-the-secret-to-efficient-batch-prediction-pipelines-using-python-a-feature-store-and-gcs-17a1462ca489)ï¼Œè¿™å°†æ•™ä½ å¦‚ä½•ä½¿ç”¨æ‰¹å¤„ç†æ¶æ„å’Œç‰¹å¾å­˜å‚¨æ„å»ºæ¨ç†ç®¡é“ã€‚
- en: Also, [Lesson 4](/unlocking-mlops-using-airflow-a-comprehensive-guide-to-ml-system-orchestration-880aa9be8cff)
    will show you how to orchestrate all the pipelines using Airflow.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œ[ç¬¬4è¯¾](/unlocking-mlops-using-airflow-a-comprehensive-guide-to-ml-system-orchestration-880aa9be8cff)å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨Airflowæ¥åè°ƒæ‰€æœ‰çš„ç®¡é“ã€‚
- en: This lesson will leverage the above ideas and assume you already understand
    them.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™èŠ‚è¯¾å°†åˆ©ç”¨ä¸Šè¿°è§‚ç‚¹ï¼Œå¹¶å‡è®¾ä½ å·²ç»ç†è§£äº†è¿™äº›è§‚ç‚¹ã€‚
- en: Data Source
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ•°æ®æº
- en: We used a free & open API that provides hourly energy consumption values for
    all the energy consumer types within Denmark [1].
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå…è´¹ä¸”å¼€æ”¾çš„APIï¼Œæä¾›ä¸¹éº¦æ‰€æœ‰èƒ½æºæ¶ˆè´¹è€…ç±»å‹çš„æ¯å°æ—¶èƒ½æºæ¶ˆè€—å€¼ [1]ã€‚
- en: They provide an intuitive interface where you can easily query and visualize
    the data. [You can access the data here](https://www.energidataservice.dk/tso-electricity/ConsumptionDE35Hour)
    [1].
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: ä»–ä»¬æä¾›äº†ä¸€ä¸ªç›´è§‚çš„ç•Œé¢ï¼Œä½ å¯ä»¥è½»æ¾æŸ¥è¯¢å’Œå¯è§†åŒ–æ•°æ®ã€‚[ä½ å¯ä»¥åœ¨è¿™é‡Œè®¿é—®æ•°æ®](https://www.energidataservice.dk/tso-electricity/ConsumptionDE35Hour)
    [1]ã€‚
- en: 'The data has 4 main attributes:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®æœ‰4ä¸ªä¸»è¦å±æ€§ï¼š
- en: '**Hour UTC:** the UTC datetime when the data point was observed.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**å°æ—¶ UTCï¼š** æ•°æ®ç‚¹è¢«è§‚æµ‹åˆ°çš„UTCæ—¥æœŸæ—¶é—´ã€‚'
- en: '**Price Area:** Denmark is divided into two price areas: DK1 and DK2 â€” divided
    by the Great Belt. DK1 is west of the Great Belt, and DK2 is east of the Great
    Belt.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ä»·æ ¼åŒºåŸŸï¼š** ä¸¹éº¦è¢«åˆ†ä¸ºä¸¤ä¸ªä»·æ ¼åŒºåŸŸï¼šDK1å’ŒDK2â€”â€”ç”±å¤§è´å°”ç‰¹åˆ†éš”ã€‚DK1ä½äºå¤§è´å°”ç‰¹ä»¥è¥¿ï¼ŒDK2ä½äºå¤§è´å°”ç‰¹ä»¥ä¸œã€‚'
- en: '**Consumer Type:** The consumer type is the Industry Code DE35, owned and maintained
    by Danish Energy.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ¶ˆè´¹è€…ç±»å‹ï¼š** æ¶ˆè´¹è€…ç±»å‹æ˜¯å·¥ä¸šä»£ç DE35ï¼Œç”±ä¸¹éº¦èƒ½æºå…¬å¸æ‹¥æœ‰å’Œç»´æŠ¤ã€‚'
- en: '**Total Consumption:** Total electricity consumption in kWh'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ€»æ¶ˆè€—ï¼š** æ€»ç”µåŠ›æ¶ˆè€—ï¼ˆå•ä½ï¼šåƒç“¦æ—¶ï¼‰'
- en: '**Note:** The observations have a lag of 15 days! But for our demo use case,
    that is not a problem, as we can simulate the same steps as it would in real-time.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ³¨æ„ï¼š** è§‚æµ‹æ•°æ®æœ‰15å¤©çš„å»¶è¿Ÿï¼ä½†å¯¹äºæˆ‘ä»¬çš„æ¼”ç¤ºç”¨ä¾‹ï¼Œè¿™ä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå®æ—¶å‘ç”Ÿçš„ç›¸åŒæ­¥éª¤ã€‚'
- en: '![](../Images/e0bc098121320b6b981889d8d712952d.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e0bc098121320b6b981889d8d712952d.png)'
- en: A screenshot from our web app showing how we forecasted the energy consumption
    for area = 1 and consumer_type = 212 [Image by the Author].
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„ç½‘é¡µåº”ç”¨æˆªå›¾ï¼Œå±•ç¤ºäº†å¦‚ä½•é¢„æµ‹åŒºåŸŸ = 1 å’Œæ¶ˆè´¹è€…ç±»å‹ = 212 çš„èƒ½æºæ¶ˆè€— [ä½œè€…å›¾ç‰‡]ã€‚
- en: 'The data points have an hourly resolution. For example: "2023â€“04â€“15 21:00Z",
    "2023â€“04â€“15 20:00Z", "2023â€“04â€“15 19:00Z", etc.'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®ç‚¹å…·æœ‰æ¯å°æ—¶çš„åˆ†è¾¨ç‡ã€‚ä¾‹å¦‚ï¼šâ€œ2023â€“04â€“15 21:00Zâ€ï¼Œâ€œ2023â€“04â€“15 20:00Zâ€ï¼Œâ€œ2023â€“04â€“15 19:00Zâ€ï¼Œç­‰ç­‰ã€‚
- en: We will model the data as multiple time series. Each unique **price area** and
    **consumer type tuple represents its** unique time series.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†æ•°æ®å»ºæ¨¡ä¸ºå¤šä¸ªæ—¶é—´åºåˆ—ã€‚æ¯ä¸ªå”¯ä¸€çš„**ä»·æ ¼åŒºåŸŸ**å’Œ**æ¶ˆè´¹è€…ç±»å‹å…ƒç»„è¡¨ç¤ºå…¶**å”¯ä¸€çš„æ—¶é—´åºåˆ—ã€‚
- en: Thus, we will build a model that independently forecasts the energy consumption
    for the next 24 hours for every time series.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªæ¨¡å‹ï¼Œç‹¬ç«‹é¢„æµ‹æ¯ä¸ªæ—¶é—´åºåˆ—æœªæ¥24å°æ—¶çš„èƒ½æºæ¶ˆè€—ã€‚
- en: '*Check out the video below to better understand what the data looks like* ğŸ‘‡'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '*æŸ¥çœ‹ä¸‹é¢çš„è§†é¢‘ä»¥æ›´å¥½åœ°ç†è§£æ•°æ®çš„æ ·å­* ğŸ‘‡'
- en: Course & data source overview [Video by the Author].
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¾ç¨‹å’Œæ•°æ®æºæ¦‚è¿° [ä½œè€…è§†é¢‘]ã€‚
- en: 'Lesson 5: Data Validation for Quality and Integrity using GE. Model Performance
    Continuous Monitoring.'
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¬¬5è¯¾ï¼šä½¿ç”¨GEè¿›è¡Œæ•°æ®è´¨é‡å’Œå®Œæ•´æ€§çš„éªŒè¯ã€‚æ¨¡å‹æ€§èƒ½æŒç»­ç›‘æ§ã€‚
- en: The goal of Lesson 5
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬5è¯¾çš„ç›®æ ‡
- en: At this point, the ML pipeline is implemented and orchestrated. That means we
    are done, right?
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å‰ï¼Œæœºå™¨å­¦ä¹ æµç¨‹å·²ç»å®æ–½å¹¶åè°ƒå¥½äº†ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å®Œæˆäº†å—ï¼Ÿ
- en: Not quiteâ€¦
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜ä¸å®Œå…¨â€¦â€¦
- en: One final step, which will transform you from a good engineer to an excellent
    one, is adding a component that will allow you to quickly diagnose what is happening
    in your production system.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åä¸€æ­¥ï¼Œå°†ä½¿ä½ ä»ä¸€ä¸ªä¼˜ç§€çš„å·¥ç¨‹å¸ˆæˆé•¿ä¸ºä¸€ä¸ªæ°å‡ºçš„å·¥ç¨‹å¸ˆï¼Œå°±æ˜¯æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè®©ä½ èƒ½å¤Ÿå¿«é€Ÿè¯Šæ–­ç”Ÿäº§ç³»ç»Ÿä¸­å‘ç”Ÿçš„æƒ…å†µã€‚
- en: 'During Lesson 5, you will primarily *learn 2 different* topics that serve one
    single goal: to ensure your production system is working correctly.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç¬¬5è¯¾ä¸­ï¼Œä½ å°†ä¸»è¦*å­¦ä¹ ä¸¤ä¸ªä¸åŒ*çš„ä¸»é¢˜ï¼Œè¿™äº›ä¸»é¢˜æœåŠ¡äºä¸€ä¸ªå…±åŒç›®æ ‡ï¼šç¡®ä¿ä½ çš„ç”Ÿäº§ç³»ç»Ÿæ­£å¸¸å·¥ä½œã€‚
- en: '**1\. Data Validation:** check if the data generated by the FE pipeline is
    OK before ingesting it into the Feature Store.'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '**1\. æ•°æ®éªŒè¯ï¼š** åœ¨å°†æ•°æ®å¯¼å…¥ç‰¹å¾å­˜å‚¨ä¹‹å‰ï¼Œæ£€æŸ¥FEç®¡é“ç”Ÿæˆçš„æ•°æ®æ˜¯å¦æ­£å¸¸ã€‚'
- en: '**2\. Model Monitoring:** continually compute various metrics that reflect
    the performance of your production model.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '**2\. æ¨¡å‹ç›‘æ§ï¼š** æŒç»­è®¡ç®—åæ˜ ä½ ç”Ÿäº§æ¨¡å‹æ€§èƒ½çš„å„ç§æŒ‡æ ‡ã€‚'
- en: '![](../Images/bc9c67310f0bc41eb8a94d05c6f3ddab.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bc9c67310f0bc41eb8a94d05c6f3ddab.png)'
- en: Diagram of the final architecture with the Lesson 5 components highlighted in
    blue [Image by the Author].
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: I will go into more detail in the *Theoretical Concepts & Tools* section. Still,
    as a brief overview, to continually monitor your model's performance, you will
    use your old predictions with the newly gathered ground truth to compute a desired
    metric, in your case MAPE.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: For example, you predict the energy consumption values from the 1st of June
    for 24 hours. Initially, you don't have the data to compute the metrics. But,
    after 12 hours, you can collect the real energy consumption. Thus, you just put
    your hands on the ground truth to compute the desired metrics for the last 12
    hours.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: After 1 hour, you can compute the metric for another data point, and so onâ€¦
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: This is the strategy we will adopt in this tutorial.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: Theoretical Concepts & Tools
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**Data Validation:** Data validation refers to the process of ensuring data
    quality and integrity. What do I mean by that?'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: As you automatically gather data from different sources (in our case, an API),
    you need a way to continually validate that the data you just extracted follows
    a set of rules that your system expects.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, you expect that the energy consumption values are:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: of type float,
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: not null,
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: â‰¥0.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'While you developed the ML pipeline, the API returned only values that respected
    these terms, as data people call it: a "data contract."'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: But, as you leave your system to run in production for a 1 month, 1 year, 2
    years, etc., you will never know what could change to data sources you don't have
    control over.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: Thus, you need a way to constantly check these characteristics before ingesting
    the data into the Feature Store.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: '**Note:** To see how to extend this concept to unstructured data, such as images,
    you can check my [Master Data Integrity to Clean Your Computer Vision Datasets](https://medium.com/towards-data-science/master-data-integrity-to-clean-your-computer-vision-datasets-df432cf9e596)
    article.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '**Great Expectations (aka GE):** GE is a popular tool that easily lets you
    do data validation and report the results. Hopsworks has GE support. You can add
    a GE validation suit to Hopsworks and choose how to behave when new data is inserted,
    and the validation step fails â€” [read more about GE + Hopsworks](https://www.hopsworks.ai/post/data-validation-for-enterprise-ai-using-great-expectations-with-hopsworks)
    [2].'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b6f170c915d6b637bc8f61293e6e3241.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
- en: Screenshot of GE data validation runs inside Hopswork [Image by the Author].
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: '**Ground Truth Types:** While your model is running in production, you can
    have access to your ground truth in 3 different scenarios:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: '**real-time:** an ideal scenario where you can easily access your target. For
    example, when you recommend an ad and the consumer either clicks it or not.'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**delayed:** eventually, you will access the ground truths. But, unfortunately,
    it will be too late to react in time adequately.'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**none:** you can''t automatically collect any GT. Usually, in these cases,
    you have to hire human annotators if you need any actuals.'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**æ— ï¼š** ä½ æ— æ³•è‡ªåŠ¨æ”¶é›†ä»»ä½• GTã€‚é€šå¸¸åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœéœ€è¦å®é™…æ•°æ®ï¼Œä½ å¿…é¡»è˜è¯·äººå·¥æ³¨é‡Šå‘˜ã€‚'
- en: '![](../Images/f7dd6d4d8927ea55b4b01751f0cafe92.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f7dd6d4d8927ea55b4b01751f0cafe92.png)'
- en: Ground truth/targets/actuals types [Image by the Author].
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: çœŸå®æ•°æ®/ç›®æ ‡/å®é™…æ•°æ®ç±»å‹ [ä½œè€…æä¾›çš„å›¾åƒ]ã€‚
- en: 'In our case, we are somewhere between #1\. and #2\. The GT isn''t precisely
    in real-time, but it has a delay only of 1 hour.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 'åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»‹äº #1 å’Œ #2 ä¹‹é—´ã€‚GT ä¸å®Œå…¨æ˜¯å®æ—¶çš„ï¼Œä½†å»¶è¿Ÿåªæœ‰ 1 å°æ—¶ã€‚'
- en: Whether a delay of 1 hour is OK depends a lot on the business context, but let's
    say that, in your case, it is okay.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: å»¶è¿Ÿ 1 å°æ—¶æ˜¯å¦åˆé€‚å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä¸šåŠ¡èƒŒæ™¯ï¼Œä½†å‡è®¾åœ¨ä½ çš„æƒ…å†µä¸‹ï¼Œè¿™æ˜¯å¯ä»¥çš„ã€‚
- en: 'As we considered that a delay of 1 hour is ok for our use case, we are in good
    luck: we have access to the GT in real-time(ish).'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬è®¤ä¸º 1 å°æ—¶çš„å»¶è¿Ÿå¯¹äºæˆ‘ä»¬çš„ç”¨ä¾‹æ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¾ˆå¹¸è¿ï¼šæˆ‘ä»¬å®æ—¶ï¼ˆè¿‘å®æ—¶ï¼‰è®¿é—® GTã€‚
- en: This means we can use metrics such as MAPE to monitor the model's performance
    in real-time(ish).
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ MAPE ç­‰æŒ‡æ ‡æ¥å®æ—¶ï¼ˆè¿‘å®æ—¶ï¼‰ç›‘æ§æ¨¡å‹çš„æ€§èƒ½ã€‚
- en: In scenarios 2 or 3, we needed to use data & concept drifts as proxy metrics
    to compute performance signals in time.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æƒ…æ™¯ 2 æˆ– 3 ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ•°æ®å’Œæ¦‚å¿µæ¼‚ç§»ä½œä¸ºä»£ç†æŒ‡æ ‡æ¥è®¡ç®—æ—¶é—´ä¸Šçš„æ€§èƒ½ä¿¡å·ã€‚
- en: '![](../Images/7a1335174dc43023cb2db7a8ff2b3a97.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7a1335174dc43023cb2db7a8ff2b3a97.png)'
- en: Screenshot with the observations and predictions overlapped over time. As you
    can see, the GT isn't available for the latest 24 hours of forecasts [Image by
    the Author].
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç¤ºè§‚å¯Ÿç»“æœå’Œé¢„æµ‹é‡å çš„æˆªå›¾ã€‚å¦‚ä½ æ‰€è§ï¼ŒGT åœ¨æœ€æ–°çš„ 24 å°æ—¶é¢„æµ‹ä¸­ä¸å¯ç”¨ [ä½œè€…æä¾›çš„å›¾åƒ]ã€‚
- en: '**ML Monitoring:** ML monitoring is the process of assuring that your production
    system works well over time. Also, it gives you a mechanism to proactively adapt
    your system, such as retraining your model in time or adapting it to new changes
    in the environment.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '**ML ç›‘æ§ï¼š** ML ç›‘æ§æ˜¯ç¡®ä¿ä½ çš„ç”Ÿäº§ç³»ç»Ÿéšæ—¶é—´æ­£å¸¸è¿è¡Œçš„è¿‡ç¨‹ã€‚åŒæ—¶ï¼Œå®ƒä¸ºä½ æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥ä¸»åŠ¨è°ƒæ•´ç³»ç»Ÿï¼Œä¾‹å¦‚åŠæ—¶é‡æ–°è®­ç»ƒæ¨¡å‹æˆ–ä½¿å…¶é€‚åº”ç¯å¢ƒä¸­çš„æ–°å˜åŒ–ã€‚'
- en: In our case, we will continually compute the MAPE metric. Thus, if the error
    suddenly spikes, you can create an alarm to inform you or automatically trigger
    a hyper-optimization tuning step to adapt the model configuration to the new environment.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æŒç»­è®¡ç®— MAPE æŒ‡æ ‡ã€‚å› æ­¤ï¼Œå¦‚æœè¯¯å·®çªç„¶æ¿€å¢ï¼Œä½ å¯ä»¥åˆ›å»ºè­¦æŠ¥æ¥é€šçŸ¥ä½ ï¼Œæˆ–è‡ªåŠ¨è§¦å‘è¶…å‚æ•°ä¼˜åŒ–æ­¥éª¤ä»¥å°†æ¨¡å‹é…ç½®é€‚åº”æ–°ç¯å¢ƒã€‚
- en: '![](../Images/19ccebd0ef39654b91664283b9da6c21.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/19ccebd0ef39654b91664283b9da6c21.png)'
- en: Screenshot with the mean MAPE metric between all the time series computed over
    time [Image by the Author].
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç¤ºæ‰€æœ‰æ—¶é—´åºåˆ—è®¡ç®—å‡ºçš„å¹³å‡ MAPE æŒ‡æ ‡çš„æˆªå›¾ [ä½œè€…æä¾›çš„å›¾åƒ]ã€‚
- en: 'Lesson 5: Code'
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¬¬ 5 è¯¾ï¼šä»£ç 
- en: '[You can access the GitHub repository here.](https://github.com/iusztinpaul/energy-forecasting)'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '[ä½ å¯ä»¥åœ¨è¿™é‡Œè®¿é—® GitHub ä»“åº“ã€‚](https://github.com/iusztinpaul/energy-forecasting)'
- en: '**Note:** All the installation instructions are in the READMEs of the repository.
    Here you will jump straight to the code.'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ³¨æ„ï¼š** æ‰€æœ‰çš„å®‰è£…è¯´æ˜éƒ½åœ¨ä»“åº“çš„ README æ–‡ä»¶ä¸­ã€‚åœ¨è¿™é‡Œï¼Œä½ å°†ç›´æ¥è·³åˆ°ä»£ç éƒ¨åˆ†ã€‚'
- en: '*The code within Lesson 5 is located under the following:*'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '*ç¬¬ 5 è¯¾ä¸­çš„ä»£ç ä½äºä»¥ä¸‹ä½ç½®ï¼š*'
- en: '[***feature-pipeline***](https://github.com/iusztinpaul/energy-forecasting/tree/main/feature-pipeline)
    *folder â€”* ***data validation,***'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[***feature-pipeline***](https://github.com/iusztinpaul/energy-forecasting/tree/main/feature-pipeline)
    *æ–‡ä»¶å¤¹ â€”* ***æ•°æ®éªŒè¯ï¼Œ***'
- en: '[***batch-prediction-pipeline***](https://github.com/iusztinpaul/energy-forecasting/tree/main/batch-prediction-pipeline)*folder
    â€”* ***ML monitoring.***'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[***batch-prediction-pipeline***](https://github.com/iusztinpaul/energy-forecasting/tree/main/batch-prediction-pipeline)
    *æ–‡ä»¶å¤¹ â€”* ***ML ç›‘æ§ã€‚***'
- en: Using Docker, you can quickly host everything inside Airflow, so you don't have
    to waste a lot of time setting things up.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Dockerï¼Œä½ å¯ä»¥å¿«é€Ÿåœ¨ Airflow ä¸­æ‰˜ç®¡æ‰€æœ‰å†…å®¹ï¼Œè¿™æ ·ä½ å°±ä¸å¿…æµªè´¹å¤§é‡æ—¶é—´è¿›è¡Œè®¾ç½®ã€‚
- en: Directly storing credentials in your git repository is a huge security risk.
    That is why you will inject sensitive information using a **.env** file.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ç›´æ¥å°†å‡­è¯å­˜å‚¨åœ¨ä½ çš„ git ä»“åº“ä¸­æ˜¯ä¸€ä¸ªå·¨å¤§çš„å®‰å…¨é£é™©ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å°†ä½¿ç”¨ **.env** æ–‡ä»¶æ¥æ³¨å…¥æ•æ„Ÿä¿¡æ¯ã€‚
- en: The **.env.default** is an example of all the variables you must configure.
    It is also helpful to store default values for attributes that are not sensitive
    (e.g., project name).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '**.env.default** æ˜¯ä½ å¿…é¡»é…ç½®çš„æ‰€æœ‰å˜é‡çš„ç¤ºä¾‹ã€‚å®ƒä¹Ÿæœ‰åŠ©äºå­˜å‚¨ä¸æ•æ„Ÿçš„å±æ€§çš„é»˜è®¤å€¼ï¼ˆä¾‹å¦‚é¡¹ç›®åç§°ï¼‰ã€‚'
- en: '![](../Images/0f2af448ab3e5abc1a151b1ecb324575.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0f2af448ab3e5abc1a151b1ecb324575.png)'
- en: A screenshot of the .env.default file [Image by the Author].
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: .env.default æ–‡ä»¶çš„æˆªå›¾ [ä½œè€…æä¾›çš„å›¾åƒ]ã€‚
- en: Prepare Credentials
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å‡†å¤‡å‡­è¯
- en: I don't want to repeat myself too much. You already have step-by-step instructions
    on how to set up your credentials in the **"Prepare Credentials"** of previous
    lessons.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: Fortunately, in this article, you don't have to prepare additional credentials
    from previous lessons.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: Checking the **â€œPrepare Credentialsâ€** of[Lesson 4](https://medium.com/towards-data-science/unlocking-mlops-using-airflow-a-comprehensive-guide-to-ml-system-orchestration-880aa9be8cff)
    is a great starting point showing you how to prepare all your credentials and
    tools. Also, check the [GitHub Repository](https://github.com/iusztinpaul/energy-forecasting)
    for additional information.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: It will show you how to complete all your credentials in your **.env** file.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: Now, let's start coding ğŸ”¥
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: Data Validation
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Overview of doing data validation with GE + Hopsworks [Video by the Author].
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: The GE suit is defined in the [*feature-pipeline/feature_pipeline/etc/validation.py*](https://github.com/iusztinpaul/energy-forecasting/blob/main/feature-pipeline/feature_pipeline/etl/validation.py)
    file.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
- en: In the code below, you defined a GE **ExpectationSuite** called **energy_consumption_suite.**
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: 'Using the **ExpectationConfiguration** class, you can add various validation
    tests. In the following example, 2 tests were added:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
- en: Checks if the columns of the table match with a given ordered list.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Checks the length of the columns to be equal to 4.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '*Easy and powerful ğŸ”¥*'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
- en: Now, let's take a look at the full validation suit ğŸ‘‡
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
- en: 'Using GE, you will check a Pandas DataFrame for the following characteristics:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
- en: 'The columns should be equal to: ["datetime_utc,"â€¦ "energy_consumption"].'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The DF should have exactly 4 columns.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Column "datetime_utc" should have all the values different than null.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Column "area" expects only values equal to 0, 1 or 2.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Column "area" should be of type *int8.*
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Column "consumer_type" expects only values equal to 111, â€¦
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Column "consumer_type" should be of type *int32*.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Column "energy_consumption" should have values â‰¥ 0.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Column "energy_consumption" should be of type float64.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Column "energy_consumption" should have all the values different than null.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '***As you can see, the quality checks mostly resume to:***'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: Check the schema of the table.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the type of the columns.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the values of the columns (different logic for discrete or continuous
    features).
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check for nulls.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will attach this validation suit in the **to_feature_store()** loading function
    of the FE pipeline from the [*feature-pipeline/feature_pipeline/etl/load.py*](https://github.com/iusztinpaul/energy-forecasting/blob/main/feature-pipeline/feature_pipeline/etl/load.py)
    file.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: Now Hopsworks will run the given GE validation suit every time a new DataFrame
    is inserted into the feature group.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: You can choose to reject the new data if the validation suit fails or to get
    an alarm to take manual action.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
- en: ML Monitoring
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Overview of the ML monitoring dashboard built inside the course [video by the
    Author].
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: When it comes to ML monitoring, the hardest part isn't the code itself but mostly
    choosing how to monitor your ML models.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æ¶‰åŠåˆ° ML ç›‘æ§æ—¶ï¼Œæœ€å›°éš¾çš„éƒ¨åˆ†ä¸æ˜¯ä»£ç æœ¬èº«ï¼Œè€Œæ˜¯å¦‚ä½•é€‰æ‹©ç›‘æ§ä½ çš„ ML æ¨¡å‹ã€‚
- en: Note that tools, such as [Evidently](https://www.evidentlyai.com/) or [Arize](https://arize.com/),
    are usually used for ML monitoring. But in this case, I wanted to keep it simple
    and not add another tool to the series.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œåƒ [Evidently](https://www.evidentlyai.com/) æˆ– [Arize](https://arize.com/)
    è¿™æ ·çš„å·¥å…·é€šå¸¸ç”¨äº ML ç›‘æ§ã€‚ä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æƒ³ä¿æŒç®€å•ï¼Œä¸å†æ·»åŠ å¦ä¸€ä¸ªå·¥å…·ã€‚
- en: '***But the concepts remain the same, which is the most crucial to understand.***'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '***ä½†æ¦‚å¿µä»ç„¶æ˜¯ç›¸åŒçš„ï¼Œè¿™ä¸€ç‚¹æœ€ä¸ºå…³é”®ã€‚***'
- en: 'In the code snippet below, we did the following:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬åšäº†ä»¥ä¸‹äº‹æƒ…ï¼š
- en: Loaded the predictions from the GCP bucket. All the predictions are aggregated
    in the **predictions_monitoring.parquet** file during the batch prediction step.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä» GCP å­˜å‚¨æ¡¶åŠ è½½äº†é¢„æµ‹æ•°æ®ã€‚æ‰€æœ‰é¢„æµ‹æ•°æ®éƒ½åœ¨æ‰¹é‡é¢„æµ‹æ­¥éª¤ä¸­èšåˆåœ¨ **predictions_monitoring.parquet** æ–‡ä»¶ä¸­ã€‚
- en: Prepared the structure of the predictions DataFrame.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å‡†å¤‡äº†é¢„æµ‹ DataFrame çš„ç»“æ„ã€‚
- en: Connected to the Hopsworks Feature Store.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è¿æ¥åˆ° Hopsworks ç‰¹å¾å­˜å‚¨ã€‚
- en: Queried the Feature Store for data within the minimum and maximum predictions
    datetime edges. This is your GT. You want to get everything available based on
    your prediction's datetime window.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æŸ¥è¯¢äº†ç‰¹å¾å­˜å‚¨ä¸­ä½äºæœ€å°å’Œæœ€å¤§é¢„æµ‹æ—¶é—´è¾¹ç•Œçš„æ•°æ®ã€‚è¿™å°±æ˜¯ä½ çš„ GTã€‚ä½ æƒ³æ ¹æ®é¢„æµ‹çš„æ—¶é—´çª—å£è·å–æ‰€æœ‰å¯ç”¨çš„æ•°æ®ã€‚
- en: Prepared the structure of the GT DataFrame.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å‡†å¤‡äº† GT DataFrame çš„ç»“æ„ã€‚
- en: Merge the two DataFrames.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åˆå¹¶ä¸¤ä¸ª DataFrameã€‚
- en: Where the GT is available, compute the MAPE metric. Out of simplicity, you will
    compute the MAPE metrics aggregated over all the time series.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨ GT å¯ç”¨çš„åœ°æ–¹ï¼Œè®¡ç®— MAPE æŒ‡æ ‡ã€‚ä¸ºäº†ç®€åŒ–ï¼Œä½ å°†è®¡ç®—æ‰€æœ‰æ—¶é—´åºåˆ—çš„ MAPE æŒ‡æ ‡çš„èšåˆå€¼ã€‚
- en: Write the results back to the GCP bucket, which will be loaded & displayed by
    the frontend.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å°†ç»“æœå†™å›åˆ° GCP å­˜å‚¨æ¡¶ï¼Œç”±å‰ç«¯åŠ è½½å’Œæ˜¾ç¤ºã€‚
- en: The function defined above will act as its own task in the Airflow DAG. It will
    be called every time the ML pipeline is running. Thus, every hour, it will look
    for new matches between a prediction and a GT, compute the MAPE metric and upload
    it to GCS.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šé¢å®šä¹‰çš„å‡½æ•°å°†åœ¨ Airflow DAG ä¸­ä½œä¸ºè‡ªå·±çš„ä»»åŠ¡è¿è¡Œã€‚æ¯æ¬¡ ML ç®¡é“è¿è¡Œæ—¶ï¼Œå®ƒéƒ½ä¼šè¢«è°ƒç”¨ã€‚å› æ­¤ï¼Œæ¯å°æ—¶ï¼Œå®ƒå°†æŸ¥æ‰¾é¢„æµ‹å’Œ GT ä¹‹é—´çš„æ–°åŒ¹é…é¡¹ï¼Œè®¡ç®—
    MAPE æŒ‡æ ‡å¹¶å°†å…¶ä¸Šä¼ åˆ° GCSã€‚
- en: Read [Lesson 6](https://medium.com/towards-data-science/fastapi-and-streamlit-the-python-duo-you-must-know-about-72825def1243)
    to see how you can display the results from the GCP bucket in a beautiful UI using
    Streamlit and FastAPI.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: é˜…è¯» [ç¬¬6è¯¾](https://medium.com/towards-data-science/fastapi-and-streamlit-the-python-duo-you-must-know-about-72825def1243)
    äº†è§£å¦‚ä½•ä½¿ç”¨ Streamlit å’Œ FastAPI ä»¥ç¾è§‚çš„ UI æ˜¾ç¤ºæ¥è‡ª GCP å­˜å‚¨æ¡¶çš„ç»“æœã€‚
- en: Conclusion
  id: totrans-178
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: Congratulations! You finished the **fifth lesson** from the **Full Stack 7-Steps
    MLOps Framework** course. It means you are close to knowing how to build an end-to-end
    ML system using MLOps good practices.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: æ­å–œä½ ï¼ä½ å®Œæˆäº† **ç¬¬äº”è¯¾** æ¥è‡ª **å…¨æ ˆ7æ­¥ MLOps æ¡†æ¶** è¯¾ç¨‹ã€‚è¿™æ„å‘³ç€ä½ æ¥è¿‘äºäº†è§£å¦‚ä½•ä½¿ç”¨ MLOps å¥½å®è·µæ„å»ºä¸€ä¸ªç«¯åˆ°ç«¯çš„ ML
    ç³»ç»Ÿã€‚
- en: 'In this lesson, you learned how to:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•ï¼š
- en: use GE to build a data validation suit that tests your data quality and integrity,
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ GE æ„å»ºä¸€ä¸ªæ•°æ®éªŒè¯å¥—ä»¶æ¥æµ‹è¯•ä½ çš„æ•°æ®è´¨é‡å’Œå®Œæ•´æ€§ï¼Œ
- en: understand why ML monitoring is essential,
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç†è§£ä¸ºä»€ä¹ˆ ML ç›‘æ§è‡³å…³é‡è¦ï¼Œ
- en: build your own ML monitoring system to track model performance in real time.
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ„å»ºä½ è‡ªå·±çš„ ML ç›‘æ§ç³»ç»Ÿï¼Œä»¥å®æ—¶è·Ÿè¸ªæ¨¡å‹æ€§èƒ½ã€‚
- en: Now that you understand the power of taking control of your data and ML system,
    you can sleep like a baby at night knowing that everything is working well or
    if not; you can quickly diagnose the issue.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ ç†è§£äº†æŒæ§æ•°æ®å’Œ ML ç³»ç»Ÿçš„åŠ›é‡ï¼Œä½ å¯ä»¥å®‰ç¨³åœ°ç¡è§‰ï¼ŒçŸ¥é“ä¸€åˆ‡è¿è½¬è‰¯å¥½ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å¿«é€Ÿè¯Šæ–­ã€‚
- en: '[Check out Lesson 6](https://medium.com/towards-data-science/fastapi-and-streamlit-the-python-duo-you-must-know-about-72825def1243)
    to learn how to use your predictions and monitoring metrics from your GCP bucket
    to build a web app using FastAPI and Streamlit.'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '[æŸ¥çœ‹ç¬¬6è¯¾](https://medium.com/towards-data-science/fastapi-and-streamlit-the-python-duo-you-must-know-about-72825def1243)ä»¥äº†è§£å¦‚ä½•ä½¿ç”¨ä½ çš„é¢„æµ‹å’Œæ¥è‡ª
    GCP å­˜å‚¨æ¡¶çš„ç›‘æ§æŒ‡æ ‡ï¼Œåˆ©ç”¨ FastAPI å’Œ Streamlit æ„å»ºä¸€ä¸ª Web åº”ç”¨ã€‚'
- en: '**Also,** [**you can access the GitHub repository here**](https://github.com/iusztinpaul/energy-forecasting)**.**'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ­¤å¤–ï¼Œ** [**ä½ å¯ä»¥åœ¨è¿™é‡Œè®¿é—® GitHub ä»“åº“**](https://github.com/iusztinpaul/energy-forecasting)**ã€‚**'
- en: ğŸ’¡ My goal is to help machine learning engineers level up in designing and productionizing
    ML systems. Follow me on [LinkedIn](https://www.linkedin.com/in/pauliusztin/)
    or subscribe to my [weekly newsletter](https://pauliusztin.substack.com/) for
    more insights!
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ’¡ æˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆåœ¨è®¾è®¡å’Œç”Ÿäº§åŒ– ML ç³»ç»Ÿæ–¹é¢æå‡æŠ€èƒ½ã€‚å…³æ³¨æˆ‘åœ¨ [LinkedIn](https://www.linkedin.com/in/pauliusztin/)
    æˆ–è®¢é˜…æˆ‘çš„ [æ¯å‘¨é€šè®¯](https://pauliusztin.substack.com/) è·å–æ›´å¤šè§è§£ï¼
- en: ğŸ”¥ If you enjoy reading articles like this and wish to support my writing, consider
    [becoming a Medium member](https://pauliusztin.medium.com/membership). Using [my
    referral link](https://pauliusztin.medium.com/membership), you can support me
    without extra cost while enjoying limitless access to Medium's rich collection
    of stories.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ”¥ å¦‚æœä½ å–œæ¬¢é˜…è¯»ç±»ä¼¼çš„æ–‡ç« å¹¶å¸Œæœ›æ”¯æŒæˆ‘çš„å†™ä½œï¼Œè€ƒè™‘ [æˆä¸º Medium ä¼šå‘˜](https://pauliusztin.medium.com/membership)ã€‚é€šè¿‡ä½¿ç”¨
    [æˆ‘çš„æ¨èé“¾æ¥](https://pauliusztin.medium.com/membership)ï¼Œä½ å¯ä»¥åœ¨æ²¡æœ‰é¢å¤–è´¹ç”¨çš„æƒ…å†µä¸‹æ”¯æŒæˆ‘ï¼ŒåŒæ—¶äº«å— Medium
    ä¸°å¯Œæ•…äº‹çš„æ— é™è®¿é—®ã€‚
- en: '[](https://pauliusztin.medium.com/membership?source=post_page-----89ab079f4360--------------------------------)
    [## Join Medium with my referral link - Paul Iusztin'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://pauliusztin.medium.com/membership?source=post_page-----89ab079f4360--------------------------------)
    [## ä½¿ç”¨æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥ Medium - Paul Iusztin'
- en: ğŸ¤– Join to get exclusive content about designing and building production-ready
    ML systems ğŸš€ Unlock full access toâ€¦
  id: totrans-190
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ğŸ¤– åŠ å…¥ä»¥è·å–æœ‰å…³è®¾è®¡å’Œæ„å»ºç”Ÿäº§å°±ç»ª ML ç³»ç»Ÿçš„ç‹¬å®¶å†…å®¹ ğŸš€ è§£é”å®Œæ•´è®¿é—®â€¦
- en: pauliusztin.medium.com](https://pauliusztin.medium.com/membership?source=post_page-----89ab079f4360--------------------------------)
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '[pauliusztin.medium.com](https://pauliusztin.medium.com/membership?source=post_page-----89ab079f4360--------------------------------)'
- en: References
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å‚è€ƒèµ„æ–™
- en: '[1] [Energy Consumption per DE35 Industry Code from Denmark API](https://www.energidataservice.dk/tso-electricity/ConsumptionDE35Hour),
    [Denmark Energy Data Service](https://www.energidataservice.dk/about/)'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '[1] [ä¸¹éº¦ API çš„ DE35 è¡Œä¸šä»£ç èƒ½è€—](https://www.energidataservice.dk/tso-electricity/ConsumptionDE35Hour)ï¼Œ[ä¸¹éº¦èƒ½æºæ•°æ®æœåŠ¡](https://www.energidataservice.dk/about/)'
- en: '[2] [Data Validation for Enterprise AI: Using Great Expectations with Hopsworks](https://www.hopsworks.ai/post/data-validation-for-enterprise-ai-using-great-expectations-with-hopsworks)
    (2022), Hopsworks Blog'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '[2] [ä¼ä¸š AI æ•°æ®éªŒè¯ï¼šåœ¨ Hopsworks ä¸­ä½¿ç”¨ Great Expectations](https://www.hopsworks.ai/post/data-validation-for-enterprise-ai-using-great-expectations-with-hopsworks)ï¼ˆ2022ï¼‰ï¼ŒHopsworks
    åšå®¢'
