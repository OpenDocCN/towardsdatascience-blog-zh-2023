- en: 'Promotion Forecasting: Case Study with a Retail Giant'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/promotion-forecasting-case-study-with-a-retail-giant-4d8dcbae6b5c](https://towardsdatascience.com/promotion-forecasting-case-study-with-a-retail-giant-4d8dcbae6b5c)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Discover how a demand forecasting algorithm using machine learning, NLP and
    domain expertise led to an impressive 18% reduction in out-of-stocks and shortages
    across national operations in just one year
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@AlexandreWarembourg?source=post_page-----4d8dcbae6b5c--------------------------------)[![Alexandre
    Warembourg](../Images/cdc21c2c337c6dcdacdaaea60c49c832.png)](https://medium.com/@AlexandreWarembourg?source=post_page-----4d8dcbae6b5c--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4d8dcbae6b5c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----4d8dcbae6b5c--------------------------------)
    [Alexandre Warembourg](https://medium.com/@AlexandreWarembourg?source=post_page-----4d8dcbae6b5c--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4d8dcbae6b5c--------------------------------)
    ·7 min read·Dec 30, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/af1f61cdde4f34a147d5a5a767580379.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Source : Image created by Dall-E from Author Prompt.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Introduction: The Challenge at Hand'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the retail landscape, Auchan, a global leader, faced a critical challenge:
    mastering the art of promotion forecasting. This narrative unfolds the story of
    how, using machine learning, NLP, and deep domain knowledge, we achieved a breakthrough — reducing
    stockouts and overstock by 18% in just one year.'
  prefs: []
  type: TYPE_NORMAL
- en: Setting the Scene
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'At every store where the promotion is running, accurately forecasting the demand
    for these promotional items is a crucial challenge. The objective is clear but
    complex: aligning the supply accurately with the constantly changing customer
    demand to avoid surplus inventory and guarantee customer satisfaction.'
  prefs: []
  type: TYPE_NORMAL
- en: In Auchan Retail International’s data forecasting team, I embarked on a mission.
    Our target? To craft a forecasting model adaptable across a diverse country with
    minimal changes. The model, birthed for Auchan Ukraine, would later find its way
    to Romania and France, becoming an integral part of their promotion strategy.
  prefs: []
  type: TYPE_NORMAL
- en: The Forecasting Challenge
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I had to provide daily forecasts for all food products in Auchan Ukraine’s 22
    hypermarkets. These forecasts were split between regular and fresh items and extended
    up to 55 days ahead. The aim was to predict demand at the store and SKU level
    for the entire promotional operation.
  prefs: []
  type: TYPE_NORMAL
- en: Data and Granularity
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Forecasting sales in a store can be challenging, especially when dealing with
    a wide range of products and unpredictable sales patterns during promotions. This
    approach tested our limits.
  prefs: []
  type: TYPE_NORMAL
- en: Our strategy centred around available promotional pricing, display and dates,
    as about a third of the products lacked historical promotional data. Our modeling
    efforts focused on leveraging sales data for products on shelves and in promotions.
    We designed features specifically for promotions, ensuring that every aspect is
    captured.
  prefs: []
  type: TYPE_NORMAL
- en: About Feature Engineering
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Both models benefited from a diverse range of features, including common temporal features such as dayofweek, week, month ..etc. Incorporating
    sales aggregates, product and store attributes, and sophisticated target encoding within promotion.
  prefs: []
  type: TYPE_NORMAL
- en: 'The most important features was of course about the promotion we included:
    Promotion attributes such as mechanics, promotion discount rate, product display
    during promotion, number of weeks before last promotion, discount amount, promotion
    duration, one of the most important feature at daily level was the promotion momentum
    which revealed that the 4th day was outstanding for a 7th day promotion.'
  prefs: []
  type: TYPE_NORMAL
- en: Of course, we also included a lot of historical promotion aggregates, some momentum,
    static and dynamic aggregates. These features allowed us to effectively capture
    the complex dynamics of retail demand.
  prefs: []
  type: TYPE_NORMAL
- en: A Dual-Model Strategy
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I chose to use a machine learning algorithm rather than a statistical model,
    or even a traditional linear model, because of the wide range of products that
    can be modelled and predicted at once, and because machine learning is particularly
    good at using external factors such as promotions, events, prices … etc.
  prefs: []
  type: TYPE_NORMAL
- en: And choosing LightGBM was pivotal due to its efficiency and ability to manage
    non-linear, complex features. The direct forecasting approach as well as full
    feature approach complemented by a tailored cross-validation strategy, helped
    us manage erratic promotion patterns and maintain stability.
  prefs: []
  type: TYPE_NORMAL
- en: 'Those cross-validation strategy was polar opposite :'
  prefs: []
  type: TYPE_NORMAL
- en: First model benefited from a reducing window method to mitigate the historical
    effect of old promotions, where consumer promotional behavior changes rapidly.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Second model used an expanding windows method
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The First Model: Our robust Baseline'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: I built a feature-rich Tree Based algorithm based on an extensive EDA and the
    observation that past promotions’ average was a strong estimator. The algorithm
    is trained and driven entirely by promotion sales and attributes (as well as categorical
    feature for caracterize product, store, promotion, event ..etc.).
  prefs: []
  type: TYPE_NORMAL
- en: To understand the model’s structure better, think of it as a ‘Feature Full Forecasting
    Model,’ a term I explain in detail in [my article (It’s a derived of **Recency
    Aggregation Method part)**](https://medium.com/towards-artificial-intelligence/the-endless-possibilities-of-forecasting-in-data-science-a52237b26243)**.**
  prefs: []
  type: TYPE_NORMAL
- en: The model aimed to predict total sales for upcoming promotions at specific stores
    and SKUs based on past promotional sales data and attributes. We used a Tree-Based
    algorithm to predict the future based on past promotional sales, prices, and attributes
    data within a specific time frame and future promotion attributes.
  prefs: []
  type: TYPE_NORMAL
- en: To improve our first model, we used the ‘Mirror SKU’ approach. This involved
    creating a mirror image of each new product using existing data and reconstructing
    all necessary features for accurate forecasting.
  prefs: []
  type: TYPE_NORMAL
- en: 'The Second Model: Addressing the Extremes'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/6b400bdd5cb65614adf6d922b0490b70.png)'
  prefs: []
  type: TYPE_IMG
- en: 'source : Image by Author'
  prefs: []
  type: TYPE_NORMAL
- en: The second model uses a ‘Direct Model Forecasting’ approach and is more dynamic.
    Each day, product and store have their own features, and the algorithm is trained
    to predict the next day’s sales based on whether the product will be on promotion
    or on the backshelf.
  prefs: []
  type: TYPE_NORMAL
- en: The prediction is based on several factors, including the sales of the nth last
    day, the average of the nth last day of promotion, and the mean value of the last
    four Wednesdays in promotion ..etc.. The features are tailored to take advantage
    of the low granularity to capture more accurate predictions by including seasonality,
    events, trends, promotion momebtum, or price momentum …etc. This model is used
    with SKUs that have enough a history of sales.
  prefs: []
  type: TYPE_NORMAL
- en: Selecting the Right Metrics
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We worked with demand planners to define the scope of evaluation. This included
    the aggregated demand of the entire operation at SKU and STORE level, excluding
    operations with no sales for the entire 14 days.
  prefs: []
  type: TYPE_NORMAL
- en: We used metrics such as WMAPE (Weighted Mean Average Percent Error), bias, and
    the number of accurate operations at a certain threshold, in conjunction with
    business metrics such as total overstock and total missing quantities compared
    to planner forecast. The metrics have been computed through a thorough backtest
    of a complete year to verify that our algorithm is robust in any timeframe and
    takes into account trends and seasonality.
  prefs: []
  type: TYPE_NORMAL
- en: Data Preprocessing
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Promotion is a complex data process for all stakeholders so data preparation
    proved essential. This included : reconstructing promotions from promotion catalog
    datasets, utilizing EDA to determine actual promotion start dates, and filling
    data gaps where there was a promotion but no sales. We also refined promo mechanics
    and addressed pricing anomalies such as promotion price above latest shelf price
    which improved the model’s accuracy. I “fine-tuned” data by correcting promotion
    date inaccuracies and addressing various shortages revealed through EDA during
    data preprocessing. This step was vital for aligning our forecasts with real-world
    sales.'
  prefs: []
  type: TYPE_NORMAL
- en: One notable finding was factual shortages with no sales at the beginning of
    the promotion. We hypothesized that it was a delivery issue and stockout after
    sales acceleration was a lack of unit command by the planner. To find those shortage
    the easy way was to track no sales on high rotation product observe their latest
    sales, verify that no promotion within same day same brand and same family cannibalised
    the demand, if all that condition was there then the probability that the product
    was out of stock due to lack of command was high.
  prefs: []
  type: TYPE_NORMAL
- en: Another shortage that made sense was end of promotion out of stock, with moderate
    to high rotation product there was pattern with cumulative no sales or where promotion
    momentum break and decline until no sales and when we found those we can make
    hypothesis about out of stock potential. How to find this case easily? Reverse
    the process, find the last day of no sales or drastic decline within promotion
    and look back to try to find the momentum change, compare it to same product which
    is in promotion in another store to confirm your bias.
  prefs: []
  type: TYPE_NORMAL
- en: Addressing Limited Historical Data
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'For new products with sparse promotional history, I developed a “mirror SKU”
    method, significantly enhancing forecast accuracy. That method was tailored for
    transparency and followed this heuristic :'
  prefs: []
  type: TYPE_NORMAL
- en: For each sku without historical sales (our target)…
  prefs: []
  type: TYPE_NORMAL
- en: Generate high-quality SKUs candidates based on product sales attributes, selecting
    from the finest subset as Brand X subfamily.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Compute Product description distance (using NLP algorithm such as TFIDF and
    cosine distance) between candidates and target.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Computr Promotion price distance between target and candidates as an absolute
    difference
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Rank the recommendation from 2\. & 3 by minimise both metrics
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Extraction of 3 mirror’s SKU.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Combining that method with cross-learning from the first model we defined above
    resulted in a 25/30% improvement in metrics for new product forecasting.
  prefs: []
  type: TYPE_NORMAL
- en: Beyond Implementation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: After the model’s deployment, we provided detailed sales analyses and confidence
    intervals. These insights empowered demand planners, making decision-making more
    data-driven.
  prefs: []
  type: TYPE_NORMAL
- en: Collaborating closely with stakeholders was crucial for both adapting the model
    to retail complexities and customizing it to specific needs. Their insights were
    invaluable in refining the algorithm for practical application in retail settings.
  prefs: []
  type: TYPE_NORMAL
- en: The Impact
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Our model not only outperformed traditional forecasting methods but also marked
    a 15% improvement over previous demand planner forecasts. This led to over 30,000
    hours saved annually for planner and an 18% reduction in overstock and shortages
    for Auchan Ukraine at national level resulting in a profit of $100 000.
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This journey underscores the transformative power of data science in retail
    forecasting. It’s a testament to how targeted, data-driven strategies can lead
    to substantial operational improvements and efficiency.
  prefs: []
  type: TYPE_NORMAL
