- en: How to Test Your Unit Tests
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¦‚ä½•æµ‹è¯•ä½ çš„å•å…ƒæµ‹è¯•
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/how-to-test-your-unit-tests-afe18d6e19d8](https://towardsdatascience.com/how-to-test-your-unit-tests-afe18d6e19d8)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/how-to-test-your-unit-tests-afe18d6e19d8](https://towardsdatascience.com/how-to-test-your-unit-tests-afe18d6e19d8)
- en: '[Unit Testing](https://medium.com/tag/unit-testing)'
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[å•å…ƒæµ‹è¯•](https://medium.com/tag/unit-testing)'
- en: A brief introduction to mutation testing
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: çªå˜æµ‹è¯•ç®€ä»‹
- en: '[](https://dr-robert-kuebler.medium.com/?source=post_page-----afe18d6e19d8--------------------------------)[![Dr.
    Robert KÃ¼bler](../Images/3b8d8b88f76c0c43d9c305e3885e7ab9.png)](https://dr-robert-kuebler.medium.com/?source=post_page-----afe18d6e19d8--------------------------------)[](https://towardsdatascience.com/?source=post_page-----afe18d6e19d8--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----afe18d6e19d8--------------------------------)
    [Dr. Robert KÃ¼bler](https://dr-robert-kuebler.medium.com/?source=post_page-----afe18d6e19d8--------------------------------)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://dr-robert-kuebler.medium.com/?source=post_page-----afe18d6e19d8--------------------------------)[![Dr.
    Robert KÃ¼bler](../Images/3b8d8b88f76c0c43d9c305e3885e7ab9.png)](https://dr-robert-kuebler.medium.com/?source=post_page-----afe18d6e19d8--------------------------------)[](https://towardsdatascience.com/?source=post_page-----afe18d6e19d8--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----afe18d6e19d8--------------------------------)
    [Dr. Robert KÃ¼bler](https://dr-robert-kuebler.medium.com/?source=post_page-----afe18d6e19d8--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----afe18d6e19d8--------------------------------)
    Â·5 min readÂ·Jan 16, 2023
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----afe18d6e19d8--------------------------------)
    Â·é˜…è¯»æ—¶é•¿5åˆ†é’ŸÂ·2023å¹´1æœˆ16æ—¥
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/fbcb034d926169de17728b3dae68786b.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fbcb034d926169de17728b3dae68786b.png)'
- en: Photo by [Erik Mclean](https://unsplash.com/@introspectivedsgn?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Erik Mclean](https://unsplash.com/@introspectivedsgn?utm_source=medium&utm_medium=referral)
    æä¾›ï¼Œæ¥è‡ª [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: 'In my last article, I talked about how unit testing is an essential aspect
    of the work of a data scientist because incorrect code leads to faulty analyses.
    One way to improve unit testing is to use **property-based testing** alongside
    **example-based testing**, i.e. the *normal* way of unit testing. You can check
    out my last article here:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘è®²è¿°äº†å•å…ƒæµ‹è¯•å¦‚ä½•æˆä¸ºæ•°æ®ç§‘å­¦å®¶å·¥ä½œä¸­çš„ä¸€ä¸ªé‡è¦æ–¹é¢ï¼Œå› ä¸ºé”™è¯¯çš„ä»£ç ä¼šå¯¼è‡´åˆ†æç»“æœå‡ºç°é—®é¢˜ã€‚æé«˜å•å…ƒæµ‹è¯•çš„ä¸€ç§æ–¹æ³•æ˜¯å°†**å±æ€§é©±åŠ¨æµ‹è¯•**ä¸**ç¤ºä¾‹é©±åŠ¨æµ‹è¯•**ç»“åˆä½¿ç”¨ï¼Œå³*å¸¸è§„*çš„å•å…ƒæµ‹è¯•æ–¹å¼ã€‚ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼š
- en: '[](/stop-hardcoding-your-unit-tests-e6643dfd254b?source=post_page-----afe18d6e19d8--------------------------------)
    [## Stop Hardcoding Your Unit Tests'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/stop-hardcoding-your-unit-tests-e6643dfd254b?source=post_page-----afe18d6e19d8--------------------------------)
    [## åœæ­¢ç¡¬ç¼–ç ä½ çš„å•å…ƒæµ‹è¯•'
- en: A guide to property-based testing in Python using Hypothesis
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Pythonä¸­ä½¿ç”¨Hypothesisè¿›è¡Œå±æ€§é©±åŠ¨æµ‹è¯•çš„æŒ‡å—
- en: towardsdatascience.com](/stop-hardcoding-your-unit-tests-e6643dfd254b?source=post_page-----afe18d6e19d8--------------------------------)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/stop-hardcoding-your-unit-tests-e6643dfd254b?source=post_page-----afe18d6e19d8--------------------------------)
- en: 'After publishing this article, I [got a response](https://medium.com/@dotcom.software/mutation-testing-is-also-an-amazing-technique-to-verify-if-weve-missed-any-edge-cases-in-our-unit-e3c63cae1a06)
    from **.com software** pointing me to **mutation testing**, which I want to explain
    to you today. Long story short:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å‘å¸ƒè¿™ç¯‡æ–‡ç« åï¼Œæˆ‘[æ”¶åˆ°äº†](https://medium.com/@dotcom.software/mutation-testing-is-also-an-amazing-technique-to-verify-if-weve-missed-any-edge-cases-in-our-unit-e3c63cae1a06)æ¥è‡ª**.comè½¯ä»¶**çš„å›åº”ï¼Œå‘æˆ‘æ¨èäº†**çªå˜æµ‹è¯•**ï¼Œæˆ‘ä»Šå¤©æƒ³å‘ä½ è§£é‡Šä¸€ä¸‹ã€‚é•¿è¯çŸ­è¯´ï¼š
- en: Mutation testing allows you to spot weak tests.
  id: totrans-14
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: çªå˜æµ‹è¯•å¯ä»¥å¸®åŠ©ä½ å‘ç°å¼±æµ‹è¯•ã€‚
- en: Weak tests are tests that give you a wrong sense of security because they pass
    **even if you know that they should not pass**, the king of them being `assert
    True` . Replacing these tests makes your whole test suite more meaningful and
    trustworthy.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å¼±æµ‹è¯•æ˜¯é‚£äº›ç»™ä½ é”™è¯¯å®‰å…¨æ„Ÿçš„æµ‹è¯•ï¼Œå› ä¸ºå®ƒä»¬å³ä½¿**æ˜çŸ¥é“ä¸è¯¥é€šè¿‡**ä¹Ÿä¼šé€šè¿‡ï¼Œå…¶ä¸­æœ€å…¸å‹çš„å°±æ˜¯`assert True`ã€‚æ›¿æ¢è¿™äº›æµ‹è¯•å¯ä»¥ä½¿ä½ çš„æ•´ä¸ªæµ‹è¯•å¥—ä»¶æ›´æœ‰æ„ä¹‰å’Œå¯ä¿¡ã€‚
- en: Now, letâ€™s see what this is all about!
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹è¿™æ˜¯ä»€ä¹ˆå§ï¼
- en: Weak Tests
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¼±æµ‹è¯•
- en: 'Consider this very simple function:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘è¿™ä¸ªéå¸¸ç®€å•çš„å‡½æ•°ï¼š
- en: '[PRE0]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Let us assume that you want to write a unit test despite the simplicity of
    this function. A *test_mean.py* file could look like this:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ä½ æƒ³ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œå°½ç®¡è¿™ä¸ªå‡½æ•°éå¸¸ç®€å•ã€‚ä¸€ä¸ª*test_mean.py* æ–‡ä»¶å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE1]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Calling `pytest test_mean.py` would then of course result in a passing test.
    Everything is green and we even got 100% coverage! Time to move on to the next
    feature, right? **No!**
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: è°ƒç”¨`pytest test_mean.py`å½“ç„¶ä¼šå¯¼è‡´æµ‹è¯•é€šè¿‡ã€‚ä¸€åˆ‡éƒ½æ˜¯ç»¿è‰²çš„ï¼Œæˆ‘ä»¬ç”šè‡³è¾¾åˆ°äº†100%çš„è¦†ç›–ç‡ï¼æ˜¯æ—¶å€™ç»§ç»­ä¸‹ä¸€ä¸ªåŠŸèƒ½äº†ï¼Œå¯¹å§ï¼Ÿ**ä¸ï¼**
- en: 'Let us take a close look at the assertion in the test code instead: the second
    argument to the function is zero, meaning that the `y` in the function is basically
    ignored. The input has a special shape that lets the test pass easier than anticipated.
    For example, it would even pass if the function was'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹æµ‹è¯•ä»£ç ä¸­çš„æ–­è¨€ï¼šå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯é›¶ï¼Œè¿™æ„å‘³ç€å‡½æ•°ä¸­çš„`y`åŸºæœ¬ä¸Šè¢«å¿½ç•¥äº†ã€‚è¾“å…¥å…·æœ‰ç‰¹æ®Šçš„å½¢çŠ¶ï¼Œä½¿æµ‹è¯•æ¯”é¢„æœŸæ›´å®¹æ˜“é€šè¿‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‡½æ•°æ˜¯
- en: '[PRE2]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Even after this simple **mutation of the function** â€” changing a plus to a minus
    â€”`test_mean` still passes.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿åœ¨è¿™ç§ç®€å•çš„**å‡½æ•°å˜å¼‚**â€”â€”å°†åŠ å·æ”¹ä¸ºå‡å·â€”â€”`test_mean`ä»ç„¶é€šè¿‡ã€‚
- en: '**This should not happen, i**f the test is any good, it should fail whenever
    we change the definition of the function!'
  id: totrans-26
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**è¿™ä¸åº”è¯¥å‘ç”Ÿ**ï¼Œå¦‚æœæµ‹è¯•è¶³å¤Ÿå¥½ï¼Œå®ƒåº”è¯¥åœ¨æˆ‘ä»¬æ›´æ”¹å‡½æ•°å®šä¹‰æ—¶å¤±è´¥ï¼'
- en: A test like this is as good as a metal detector that makes a noise even when
    presented with wood. Thatâ€™s why we call `test_mean` a **weak test**.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: åƒè¿™æ ·çš„æµ‹è¯•å°±åƒä¸€ä¸ªé‡‘å±æ¢æµ‹å™¨ï¼Œå³ä½¿é¢å¯¹æœ¨æä¹Ÿä¼šå‘å‡ºå£°éŸ³ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ç§°`test_mean`ä¸º**è–„å¼±çš„æµ‹è¯•**ã€‚
- en: This weak test might be easy to spot here but if you write code that is slightly
    more involved, you might create weak examples by accident and not even notice
    it, giving you a false sense of security.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè–„å¼±çš„æµ‹è¯•åœ¨è¿™é‡Œå¯èƒ½å¾ˆå®¹æ˜“è¢«å‘ç°ï¼Œä½†å¦‚æœä½ å†™çš„ä»£ç ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½ å¯èƒ½ä¼šæ„å¤–åœ°åˆ›å»ºå‡ºè–„å¼±çš„ç¤ºä¾‹å´æ²¡æœ‰æ³¨æ„åˆ°ï¼Œä»è€Œç»™ä½ ä¸€ç§è™šå‡çš„å®‰å…¨æ„Ÿã€‚
- en: Mutation Testing
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å˜å¼‚æµ‹è¯•
- en: 'We can use **mutation testing** to spot weak tests. The idea of mutation testing
    is quite old already: it was originally proposed by Richard Lipton as a student
    in 1971\. It is also very simple, it is so simple in fact that I gave it away
    already in the last chapter.'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨**å˜å¼‚æµ‹è¯•**æ¥å‘ç°è–„å¼±çš„æµ‹è¯•ã€‚å˜å¼‚æµ‹è¯•çš„ç†å¿µå·²ç»ç›¸å½“å¤è€ï¼šå®ƒæœ€åˆç”±ç†æŸ¥å¾·Â·åˆ©æ™®é¡¿åœ¨1971å¹´ä½œä¸ºå­¦ç”Ÿæå‡ºã€‚å®ƒä¹Ÿéå¸¸ç®€å•ï¼Œå®é™…ä¸Šæˆ‘åœ¨ä¸Šä¸€ç« å·²ç»ç®€å•ä»‹ç»è¿‡äº†ã€‚
- en: Mutate (apply small changes to) the source code of the function that you want
    to test and see if the tests still pass. If they do, they are weak. If they fail
    (and didnâ€™t fail for the original function), they survived and might be strong.
  id: totrans-31
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¯¹ä½ æƒ³è¦æµ‹è¯•çš„å‡½æ•°æºä»£ç è¿›è¡Œå°çš„ä¿®æ”¹ï¼Œå¹¶æŸ¥çœ‹æµ‹è¯•æ˜¯å¦ä»ç„¶é€šè¿‡ã€‚å¦‚æœå®ƒä»¬é€šè¿‡äº†ï¼Œé‚£å®ƒä»¬å°±æ˜¯è–„å¼±çš„ã€‚å¦‚æœå®ƒä»¬å¤±è´¥ï¼ˆå¹¶ä¸”åŸå‡½æ•°æ²¡æœ‰å¤±è´¥ï¼‰ï¼Œå®ƒä»¬å¹¸å­˜ä¸‹æ¥å¹¶å¯èƒ½æ˜¯å¼ºçš„ã€‚
- en: 'You have seen one mutation already, a change from + to -. Besides that, you
    can change:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å·²ç»çœ‹åˆ°äº†ä¸€ä¸ªå˜å¼‚ï¼Œå³ä» + å˜ä¸º -ã€‚æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥æ”¹å˜ï¼š
- en: '- to +'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '- æ”¹ä¸º +'
- en: / to * or vice versa,
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: / æ”¹ä¸º * æˆ–åä¹‹äº¦ç„¶ï¼Œ
- en: â‰¥ to > or even <,
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: â‰¥ æ”¹ä¸º > æˆ–è€… <ï¼Œ
- en: â‰¤ to < or even >
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: â‰¤ æ”¹ä¸º < æˆ–è€… >
- en: = to != or vice versa
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: = æ”¹ä¸º != æˆ–åä¹‹äº¦ç„¶
- en: add or subtract 1 from integers
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»æ•´æ•°ä¸­åŠ å‡1
- en: add some random characters to strings
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å‘å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸€äº›éšæœºå­—ç¬¦
- en: â€¦
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: â€¦
- en: you get the idea. Just simple tweaks that **still produce valid source code**,
    changing the original function that you want to test into something slightly different.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ æ˜ç™½äº†å§ã€‚åªéœ€ç®€å•çš„è°ƒæ•´ï¼Œ**ä»ç„¶ç”Ÿæˆæœ‰æ•ˆçš„æºä»£ç **ï¼Œå°†ä½ æƒ³è¦æµ‹è¯•çš„åŸå‡½æ•°å˜æˆç¨å¾®ä¸åŒçš„ä¸œè¥¿ã€‚
- en: Of course, you can do this manually and change your source code a couple of
    times, always followed by a `pytest` . But since this is no fun, [people created
    a package to do just that automatically](https://github.com/boxed/mutmut) and
    log the results.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œä½ å¯ä»¥æ‰‹åŠ¨å®Œæˆè¿™äº›æ“ä½œï¼Œå‡ æ¬¡æ›´æ”¹æºä»£ç ï¼Œæ¯æ¬¡ä¹‹åéƒ½è¿è¡Œä¸€æ¬¡`pytest`ã€‚ä½†å› ä¸ºè¿™æ²¡æœ‰è¶£å‘³ï¼Œ[æœ‰äººåˆ›å»ºäº†ä¸€ä¸ªåŒ…æ¥è‡ªåŠ¨å®Œæˆè¿™é¡¹å·¥ä½œ](https://github.com/boxed/mutmut)å¹¶è®°å½•ç»“æœã€‚
- en: Mutmut for Convenient Mutation Testing
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Mutmut æ–¹ä¾¿çš„å˜å¼‚æµ‹è¯•
- en: '[Anders HovmÃ¶ller aka boxed](https://github.com/boxed) and a lot of other contributors
    created a package called [mutmut](https://github.com/boxed/mutmut) to do the work
    for you.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '[Anders HovmÃ¶ller aka boxed](https://github.com/boxed)å’Œè®¸å¤šå…¶ä»–è´¡çŒ®è€…åˆ›å»ºäº†ä¸€ä¸ªåä¸º[mutmut](https://github.com/boxed/mutmut)çš„åŒ…æ¥ä¸ºä½ å®Œæˆè¿™é¡¹å·¥ä½œã€‚'
- en: First, install it via `pip install mutmut` . Then you have to extract the function(s)
    that you want to test into a file, letâ€™s call it *function.py*. Letâ€™s also still
    assume that the test is in *test_mean.py*. Then you can call
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œé€šè¿‡`pip install mutmut`å®‰è£…å®ƒã€‚ç„¶åï¼Œä½ éœ€è¦å°†ä½ æƒ³è¦æµ‹è¯•çš„å‡½æ•°æå–åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º*function.py*ã€‚æˆ‘ä»¬è¿˜å‡è®¾æµ‹è¯•åœ¨*test_mean.py*ä¸­ã€‚ç„¶åä½ å¯ä»¥è°ƒç”¨
- en: '[PRE3]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: and it will create some mutations of your *function.py* containing the *mean*
    function that we want to test.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒå°†åˆ›å»ºä¸€äº›åŒ…å«æˆ‘ä»¬æƒ³è¦æµ‹è¯•çš„*mean*å‡½æ•°çš„*function.py*çš„å˜å¼‚ã€‚
- en: '*If you open* function.py *in an editor that constantly reloads the file while
    mutmut is running, you can even see how the file gets changed live! But donâ€™t
    worry: mutmut will create a copy of the original file first before it makes modifications.*'
  id: totrans-48
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*å¦‚æœä½ åœ¨mutmutè¿è¡Œæ—¶åœ¨ä¸€ä¸ªä¼šä¸æ–­é‡æ–°åŠ è½½æ–‡ä»¶çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€* function.py *ï¼Œä½ ç”šè‡³å¯ä»¥çœ‹åˆ°æ–‡ä»¶å¦‚ä½•å®æ—¶å˜åŒ–ï¼ä½†ä¸ç”¨æ‹…å¿ƒï¼šmutmutä¼šåœ¨è¿›è¡Œä¿®æ”¹ä¹‹å‰å…ˆåˆ›å»ºåŸå§‹æ–‡ä»¶çš„å‰¯æœ¬ã€‚*'
- en: 'The output will look like this:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: è¾“å‡ºå°†å¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '![](../Images/38069b69d36188159342474601ce3ee1.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/38069b69d36188159342474601ce3ee1.png)'
- en: Image by the author.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚
- en: 'You can see several things here, especially **at the bottom**:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å‡ ä¸ªæ–¹é¢ï¼Œå°¤å…¶æ˜¯**åœ¨åº•éƒ¨**ï¼š
- en: 'Three mutants were created. (*side note: + to -, / to *, 2 to 3 in our case*)'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åˆ›å»ºäº†ä¸‰ä¸ªçªå˜ä½“ã€‚(*æ—æ³¨ï¼š+å˜ä¸º-ï¼Œ/å˜ä¸º*ï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­æ˜¯2å˜ä¸º3*)
- en: Two out of these three mutants were *killed*, meaning that the unit test that
    passed before failed after the file was changed, which is good ğŸ‰.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è¿™ä¸‰ä¸ªçªå˜ä½“ä¸­çš„ä¸¤ä¸ªè¢«*æ€æ­»*ï¼Œæ„å‘³ç€ä¹‹å‰é€šè¿‡çš„å•å…ƒæµ‹è¯•åœ¨æ–‡ä»¶æ›´æ”¹åå¤±è´¥äº†ï¼Œè¿™å¾ˆå¥½ ğŸ‰ã€‚
- en: 'One mutant survived, meaning that the test still passed although the source
    code changed. This is bad ğŸ™. We have even seen this survivor already:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªçªå˜ä½“å¹¸å­˜äº†ï¼Œè¿™æ„å‘³ç€å°½ç®¡æºä»£ç å‘ç”Ÿäº†å˜åŒ–ï¼Œæµ‹è¯•ä»ç„¶é€šè¿‡ã€‚è¿™å¾ˆç³Ÿç³• ğŸ™ã€‚æˆ‘ä»¬å·²ç»çœ‹åˆ°è¿‡è¿™ä¸ªå¹¸å­˜è€…ï¼š
- en: '[PRE4]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'You can also create an HTML report via `mutmut html` and open it in a browser:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ è¿˜å¯ä»¥é€šè¿‡ `mutmut html` åˆ›å»ºä¸€ä¸ªHTMLæŠ¥å‘Šå¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
- en: '![](../Images/cc091067fd6dceec2c9a101112a4d40e.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cc091067fd6dceec2c9a101112a4d40e.png)'
- en: Image by the author.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚
- en: The design could be better, but it contains the main information about the survivors.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡å¯ä»¥æ›´å¥½ï¼Œä½†å®ƒåŒ…å«äº†å…³äºå¹¸å­˜è€…çš„ä¸»è¦ä¿¡æ¯ã€‚
- en: '***Note:*** *Sometimes two weak single tests can make one better test suite.
    For example, if you add the assertion* `*assert mean(-1, 1) == 0*` *â€” another
    weak test as the mutant* `*return (x+y) * 2*` *would survive â€” in total no mutant
    would survive mutmutâ€™s procedure, improving the test suite.*'
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***æ³¨æ„ï¼š*** *æœ‰æ—¶ä¸¤ä¸ªè¾ƒå¼±çš„å•ç‹¬æµ‹è¯•å¯ä»¥å½¢æˆä¸€ä¸ªæ›´å¥½çš„æµ‹è¯•å¥—ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ·»åŠ äº†æ–­è¨€* `*assert mean(-1, 1) == 0*`
    *â€” å¦ä¸€ä¸ªè¾ƒå¼±çš„æµ‹è¯•ï¼Œå› ä¸ºçªå˜ä½“* `*return (x+y) * 2*` *å°†å¹¸å­˜ â€” æ€»çš„æ¥è¯´ï¼Œæ²¡æœ‰çªå˜ä½“ä¼šå¹¸å­˜äºmutmutçš„ç¨‹åºï¼Œä»è€Œæ”¹è¿›æµ‹è¯•å¥—ä»¶ã€‚*'
- en: Conclusion
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: In this article, we have seen that passing tests and even 100% test coverage
    can be deceiving. A passing test is nice, but if it still passes even after changing
    the function that is being tested, this is a red flag that indicates that the
    test might be weak.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°é€šè¿‡æµ‹è¯•ç”šè‡³100%çš„æµ‹è¯•è¦†ç›–ç‡å¯èƒ½ä¼šä»¤äººè¯¯è§£ã€‚é€šè¿‡çš„æµ‹è¯•å¾ˆå¥½ï¼Œä½†å¦‚æœå³ä½¿åœ¨æ›´æ”¹è¢«æµ‹è¯•å‡½æ•°åä»ç„¶é€šè¿‡ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªçº¢æ——ï¼Œè¡¨æ˜æµ‹è¯•å¯èƒ½è¾ƒå¼±ã€‚
- en: Mutation testing offers a structured way of changing (mutating) the function.
    The Python library mutmut even allows us to change our source code automatically
    (a backup is created beforehand) and check which tests still pass (ğŸ™) and which
    ones fail after the mutation (ğŸ‰).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: çªå˜æµ‹è¯•æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥æ›´æ”¹ï¼ˆçªå˜ï¼‰å‡½æ•°ã€‚Pythonåº“mutmutç”šè‡³å…è®¸æˆ‘ä»¬è‡ªåŠ¨æ›´æ”¹æºä»£ç ï¼ˆäº‹å…ˆåˆ›å»ºäº†å¤‡ä»½ï¼‰ï¼Œå¹¶æ£€æŸ¥å“ªäº›æµ‹è¯•åœ¨çªå˜åä»ç„¶é€šè¿‡ï¼ˆğŸ™ï¼‰ï¼Œå“ªäº›æµ‹è¯•å¤±è´¥ï¼ˆğŸ‰ï¼‰ã€‚
- en: This hardens your test suite, which in turn lets you produce the correct code
    that is necessary for faultless analyses.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä½¿ä½ çš„æµ‹è¯•å¥—ä»¶æ›´åŠ å¥å£®ï¼Œä»è€Œè®©ä½ ç”Ÿæˆæ­£ç¡®çš„ä»£ç ï¼Œè¿™å¯¹äºæ— é”™è¯¯åˆ†ææ˜¯å¿…è¦çš„ã€‚
- en: I hope that you learned something new, interesting, and useful today. Thanks
    for reading!
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å¸Œæœ›ä½ ä»Šå¤©å­¦åˆ°äº†æ–°çš„ã€æœ‰è¶£çš„ã€æœ‰ç”¨çš„ä¸œè¥¿ã€‚æ„Ÿè°¢é˜…è¯»ï¼
- en: '**As the last point, if you**'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '**æœ€åä¸€ç‚¹ï¼Œå¦‚æœä½ **'
- en: '**want to support me in writing more about machine learning and**'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**æƒ³æ”¯æŒæˆ‘å†™æ›´å¤šå…³äºæœºå™¨å­¦ä¹ çš„å†…å®¹å’Œ**'
- en: '**plan to get a Medium subscription anyway,**'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**è®¡åˆ’æ— è®ºå¦‚ä½•è·å¾—ä¸€ä¸ªMediumè®¢é˜…ï¼Œ**'
- en: '**why not do it** [**via this link**](https://dr-robert-kuebler.medium.com/membership)**?
    This would help me a lot! ğŸ˜Š**'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '**ä¸ºä»€ä¹ˆä¸é€šè¿‡** [**è¿™ä¸ªé“¾æ¥**](https://dr-robert-kuebler.medium.com/membership)**æ”¯æŒæˆ‘å‘¢**ï¼Ÿè¿™å¯¹æˆ‘å¸®åŠ©å¾ˆå¤§ï¼ğŸ˜Š**'
- en: '*To be transparent, the price for you does not change, but about half of the
    subscription fees go directly to me.*'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '*ä¸ºäº†é€æ˜èµ·è§ï¼Œå¯¹ä½ æ¥è¯´ä»·æ ¼ä¸ä¼šæ”¹å˜ï¼Œä½†çº¦ä¸€åŠçš„è®¢é˜…è´¹ç”¨ç›´æ¥å½’æˆ‘ã€‚*'
- en: '**Thanks a lot, if you consider supporting me!**'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '**éå¸¸æ„Ÿè°¢ï¼Œå¦‚æœä½ è€ƒè™‘æ”¯æŒæˆ‘ï¼**'
- en: '*If you have any questions, write me on* [*LinkedIn*](https://www.linkedin.com/in/dr-robert-k%C3%BCbler-983859150/)*!*'
  id: totrans-73
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨* [*LinkedIn*](https://www.linkedin.com/in/dr-robert-k%C3%BCbler-983859150/)*ä¸Šå†™ä¿¡ç»™æˆ‘ï¼*'
