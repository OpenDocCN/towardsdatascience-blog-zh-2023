- en: A Complete Guide to Cohort Analysis using BigQuery and Looker Studio
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/a-complete-guide-to-cohort-analysis-using-bigquery-and-looker-studio-1cd18c0edd79](https://towardsdatascience.com/a-complete-guide-to-cohort-analysis-using-bigquery-and-looker-studio-1cd18c0edd79)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Demystifying cohort analysis, step by step
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@damien.azzopardi?source=post_page-----1cd18c0edd79--------------------------------)[![Damien
    Azzopardi](../Images/4cceb06ac7792c0afcee94cfe9d8385f.png)](https://medium.com/@damien.azzopardi?source=post_page-----1cd18c0edd79--------------------------------)[](https://towardsdatascience.com/?source=post_page-----1cd18c0edd79--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----1cd18c0edd79--------------------------------)
    [Damien Azzopardi](https://medium.com/@damien.azzopardi?source=post_page-----1cd18c0edd79--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----1cd18c0edd79--------------------------------)
    ·5 min read·Mar 9, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/92801613a39771c131cf360df1915772.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Hunter Harritt](https://unsplash.com/ja/@hharritt?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/Ype9sdOPdYc?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  prefs: []
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Let’s admit it; cohort analysis may seem intimidating at first glance. Still,
    it is a powerful instrument that can provide valuable insights and, sometimes,
    the only correct way to visualize data. Mastering them will give you a clear advantage
    in your Data Analytics journey.
  prefs: []
  type: TYPE_NORMAL
- en: But first, what do we mean by cohort analysis?
  prefs: []
  type: TYPE_NORMAL
- en: A cohort analysis is a way to study and compare different groups of people over
    time.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: These groups are defined by a common characteristic, such as the date they joined
    a service or made their first purchase.
  prefs: []
  type: TYPE_NORMAL
- en: Cohort analysis is frequently used to analyze the rate customers end their relationship
    with a product or a service, a concept commonly referred to as “churn.” For subscription-based
    businesses, churn represents the percentage of customers who cancel their subscriptions
    within a given period.
  prefs: []
  type: TYPE_NORMAL
- en: Churn is an important business metric that can significantly impact revenue
    and growth. While a high churn rate can be a sign of customer dissatisfaction,
    low churn, on the contrary, can be proof of customer loyalty and satisfaction.
  prefs: []
  type: TYPE_NORMAL
- en: Now let’s demonstrate the power of cohort analysis by running a churn analysis
    for a subscription-based app that wants to analyze its customer’s behavior across
    2023.
  prefs: []
  type: TYPE_NORMAL
- en: Step 1 — Understanding your dataset
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'For this example, we’ll work with the `subscriptions` table stored in BigQuery.
    It contains a list of subscriptions made on our product, including the signup
    date and, most importantly, the information about their state, ***active*** or
    ***canceled***. Here’s what the table looks like:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/beafb0d1b5eac836043ed989e9874e4f.png)'
  prefs: []
  type: TYPE_IMG
- en: Query results (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'Now you’d like to look at churn evolution monthly. You might want to do this
    using the following query, taking the number of lost customers per month, and
    dividing them by the total number of customers over the same period:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/34f00bb2804a19feb83b8958be23937b.png)'
  prefs: []
  type: TYPE_IMG
- en: Query results (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/3e8217ee91c607cc3384fdbefe720427.png)'
  prefs: []
  type: TYPE_IMG
- en: Query results plotted (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: Good news, churn rate has decreased over the year. But does this reflect reality?
    I’m afraid it doesn’t. Looking at churn this way will only represent part of the
    picture. This is where cohorts go into action.
  prefs: []
  type: TYPE_NORMAL
- en: Step 2 — Data transformation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Remember, cohorts are groups defined by a common characteristic, in that case,
    their signup date. So let’s break it down into different cohorts; users who signed
    up in January, users who signed up in February, and so on. And for each cohort,
    we want to know how many customers signed up and how many canceled within each
    time frame. In other words, how many canceled after one month, two months, etc.
  prefs: []
  type: TYPE_NORMAL
- en: 'To do so, let’s use the following query:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d4a40d922522503e56c3f545861bf57d.png)'
  prefs: []
  type: TYPE_IMG
- en: Query results where signup_date = January 2023 (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'This query will return a total of 78 rows; 12 for January, 11 for February,
    10 for March, and so on. Here’s a visual cue to help you better understand the
    results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/6c653d89da412ac454729b535de49cd5.png)'
  prefs: []
  type: TYPE_IMG
- en: Query results illustrated (image by author)
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let’s break down each of the fields in the query results:'
  prefs: []
  type: TYPE_NORMAL
- en: '`signup_date`: the date customers signed up.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`cancellation_date`: the date customers canceled.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`cohort_month`: the difference between the `signup_date` and the `cancellation_date`,
    in month.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`max_subscriptions`: the total number of customers who signed up on that month.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`sum_cancellations`: the number of customers who canceled their subscriptions
    each month.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`r_sum_cancellations`: the running sum of members who canceled their subscriptions
    over time. We will need this field later on when building our visualization.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For example, looking at row number 5, we see that, out of the 67 customers who
    signed up on January, 2 of them canceled their subscription in May, four months
    after joining the service, for a total of 10 customers canceling between January
    and May.
  prefs: []
  type: TYPE_NORMAL
- en: Step 3 — Putting it all together in Looker Studio
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now that our dataset is ready let’s use it to visualize the cohorts in Looker
    Studio.
  prefs: []
  type: TYPE_NORMAL
- en: 'First, let’s create a new calculated field called `churn_rate` using the following
    formula:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Then, let’s create a new **Pivot Table** chart with the following criteria:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Row dimension**: `signup_date`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Column dimension**: `cohort_month`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Metric**: `churn_rate` as a percentage'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Sorting Row #1**: `signup_date` **Ascending**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Sorting Column #1**: `cohort_month` **Ascending**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To add more context to your dashboard, let’s add a table with the total number
    of subscriptions to the left of the cohort chart. To do so, create a new **Table**
    chart with the following criteria:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Dimension**: `signup_date`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Metric**: `max_subscriptions` with a **Max** aggregation'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Sort**: `signup_date` **Ascending**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding a bit of formatting, and voila!
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/9bf84527d6195b4acfdf34bbb8585e1d.png)'
  prefs: []
  type: TYPE_IMG
- en: '[Medium — Cohort Analysis Looker Studio](https://lookerstudio.google.com/reporting/ddcbc823-199a-4317-8898-9ea09a0d9cf3)
    (image by author)'
  prefs: []
  type: TYPE_NORMAL
- en: By looking at the churn this way, we can draw quick conclusions regarding user
    engagement. For example, the April 2023 cohort outperformed all other cohorts.
    In other words, the group with the lowest churn rate indicates that customers
    who joined in April were more committed and engaged with the product. By analyzing
    the reasons behind this cohort’s success, we can use those insights to improve
    customer retention and loyalty in the future.
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Cohort analysis is essential for any subscription-based business willing to
    monitor customer behavior and churn. It provides valuable insights for making
    informed marketing and retention strategy decisions, leading to higher revenue
    and customer satisfaction. Following the steps outlined in this article, you’re
    ready to implement cohort analysis and start reaping its benefits. Happy analyzing!
  prefs: []
  type: TYPE_NORMAL
- en: Resources
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[1] Google Sheets, [medium_cohorts_dataset_public](https://docs.google.com/spreadsheets/d/1TcjHMBoaZZsrlY17rOMIGtGIpEr9wXcX_-dQwv6Rxgw/edit?usp=sharing)
    (2023), Damien Azzopardi'
  prefs: []
  type: TYPE_NORMAL
- en: '[2] Looker Studio, [Medium — Cohort Analysis Looker Studio](https://lookerstudio.google.com/reporting/ddcbc823-199a-4317-8898-9ea09a0d9cf3)
    (2023), Damien Azzopardi'
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/@damien.azzopardi/membership?source=post_page-----1cd18c0edd79--------------------------------)
    [## Join Medium with my referral link.'
  prefs: []
  type: TYPE_NORMAL
- en: Did you enjoy this article? Become a member now and discover stories, thinking,
    and expertise from writers on any topic.
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: medium.com](https://medium.com/@damien.azzopardi/membership?source=post_page-----1cd18c0edd79--------------------------------)
  prefs: []
  type: TYPE_NORMAL
