- en: 'Streamlining Azure VM Performance While Slashing Costs: Proven Strategies for
    Optimal Efficiency'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/streamlining-azure-vm-performance-while-slashing-costs-proven-strategies-for-optimal-efficiency-23a9bfc7fe62](https://towardsdatascience.com/streamlining-azure-vm-performance-while-slashing-costs-proven-strategies-for-optimal-efficiency-23a9bfc7fe62)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Techniques for minimizing costs while not compromising efficiency
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://mg-subha.medium.com/?source=post_page-----23a9bfc7fe62--------------------------------)[![Subha
    Ganapathi](../Images/d346759d5990b79aae7ef2c3a5ab7cf3.png)](https://mg-subha.medium.com/?source=post_page-----23a9bfc7fe62--------------------------------)[](https://towardsdatascience.com/?source=post_page-----23a9bfc7fe62--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----23a9bfc7fe62--------------------------------)
    [Subha Ganapathi](https://mg-subha.medium.com/?source=post_page-----23a9bfc7fe62--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----23a9bfc7fe62--------------------------------)
    ·8 min read·Jul 13, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/83c0f9729173d8812e7e8d12c6a7868f.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Photo by** [**Growtika**](https://unsplash.com/@growtika?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    **on** [**Unsplash**](https://unsplash.com/photos/Am6pBe2FpJw?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)'
  prefs: []
  type: TYPE_NORMAL
- en: Overview
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: While setting up an Azure VM, it is important to understand the pricing model
    and service offerings well in advance before setting up the environment. If not,
    we may end up paying exorbitant bills that could have been avoided if cost-optimization
    strategies had been followed. In this article, we discuss practical strategies
    and insights to help you avoid such situations and maintain better control over
    your costs. We’ll also discuss how much is too much and the role of premium features
    in Azure pricing.
  prefs: []
  type: TYPE_NORMAL
- en: Note that the article has images having sizing and configurations in Azure.
    These have been procured from the Azure portal from a certain region at the time
    of writing. They have been shown here purely for demonstration purposes and should
    not be considered to be indicative of current availability or configurations for
    your region. It is advisable to refer to the official Azure documentation (or
    your Azure Portal) for the most up-to-date and accurate information regarding
    costs and pricing.
  prefs: []
  type: TYPE_NORMAL
- en: Let’s get started.
  prefs: []
  type: TYPE_NORMAL
- en: Implement Scheduling mechanisms to start and stop your Azure VM
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Azure VMs are billed based on resource usage, which includes CPU, memory, and
    storage consumption. It’s important to note that you will be charged for these
    resources, even if the VM is idle or not actively being used. In other words,
    you will get charged just for keeping the VM ‘ON’ whether or not there are processes/jobs
    running inside the VM at a certain point in time. Hence, workload optimization
    is necessary to prevent unnecessary expenses.
  prefs: []
  type: TYPE_NORMAL
- en: 'To effectively handle this, do the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Identify the processes and jobs you intend to set up in the VM. This can be
    a process related to your application server, or even a job that runs within a
    database hosted on the VM.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Determine dependencies between jobs i.e., Identify jobs that need to run in
    parallel and those that need to run concurrently. Also, make a note of jobs that
    are independent of other jobs.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Attempt to schedule job runs within a consistent time frame. For example, if
    you have multiple concurrent jobs that process data from a database, aligning
    the job runs within the same time range makes sense.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 4\. Once you have narrowed down the time range, you can schedule your VM to
    start and stop at a desired time frame. For example, if the jobs need to run between
    9 PM and 12 AM every night in a certain time zone, you can schedule your VM to
    start at 8.45 PM.
  prefs: []
  type: TYPE_NORMAL
- en: Scheduling a VM to start and stop can be done using Powershell, CLI, or Console.
    The Azure Console provides users with the functionality and ease of managing their
    Virtual Machines using the Azure Portal.
  prefs: []
  type: TYPE_NORMAL
- en: The options to start, stop and deallocate your VM can be found by accessing
    your VM in the Azure Portal. Below is the automation template provided by Azure.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4396f4a1a8958588b6ecab97f99b63d1.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Tasks in Azure Console (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: Here are the steps to access the automation templates -
  prefs: []
  type: TYPE_NORMAL
- en: Select your VM and access the Tasks(preview).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/10d9a3c2249d660c38471101ed1a0269.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM — Automation -Tasks (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: Click on ‘Add a task’
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0b9334885ff6323eac05ab32bf8a0bcb.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM — Tasks — Add a task (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: Select the template ‘Start Virtual Machine’
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/748fea3870899707064ca99683422a4b.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM- Automation Template (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: After authenticating yourself, you can configure the time you want to start
    the VM.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/54e51ae746907558c4406ea3a31ef63c.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM — Configuring Start VM automation task (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: The same steps can be used to Power off and deallocate the VM as well.
  prefs: []
  type: TYPE_NORMAL
- en: '**The most important step that helps reduce costs effectively is to deallocate
    the VM.** There is a major difference between stopping a VM and deallocating a
    VM. When you stop a VM, Azure Resource Management temporarily halts the VM but
    retains the allocated resources and preserves the VM’s state. However, when you
    deallocate the VM, Azure Resource Management releases the allocated resources
    back to the Azure Resource pool. The released resources become available for other
    resources or services to utilize. They may also be allocated to other applications
    or virtual machines based on demand. Thereby, you save on Compute Costs. Remember
    that you will still need to pay for the Storage Costs. Below is a visual that
    shows the components in an Azure Environment and its interaction with a Virtual
    Machine.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/9550a4420c02fd8696f4cb8e31965ede.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure Resource Management (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: A good strategy to consider is to de-allocate your VMs during periods of inactivity.
    De-allocating non-production environments is also a good option that can help
    achieve significant cost savings. Ensure that deallocation aligns with your operational
    needs and doesn’t impact critical processes or services.
  prefs: []
  type: TYPE_NORMAL
- en: '**Change disk from Premium to Standard**'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: It is natural to want advanced features like premium disk storage, managed disks,
    and automatic scaling for your environment. But it is often necessary to ask yourself
    if they are actually needed for your use case.
  prefs: []
  type: TYPE_NORMAL
- en: Azure supports a range of premium and standard disks. As you may have guessed,
    Premium Disks cost more than Standard Disks. If you have I/O intensive operations
    such as databases and big data processing, you will have to continue with premium
    disks. But if you have workloads that are not time-bound and not too intensive,
    then standard disks are a good option. Let’s see this with an example.
  prefs: []
  type: TYPE_NORMAL
- en: Let’s say that you have a script that pulls data from an external file system
    on a daily basis (once a day) and populates the data for a cloud-based reporting
    tool. This is a less intensive operation and can be easily handled using a standard
    disk.
  prefs: []
  type: TYPE_NORMAL
- en: Let’s assume that you have a SQL Database hosted on the VM that connects directly
    to a self-service report that users can query in an ad-hoc fashion. If that’s
    the case, it is better to stick to a premium disk. However, you can consider downgrading
    to a lower tier within a premium disk to get some cost savings.
  prefs: []
  type: TYPE_NORMAL
- en: Below is the process to change the disk via the Console. Click on the Azure
    VM and access the ‘Disks’ option in the side pane.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e036f3945f800772f073779b1d1b93e1.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM — Disks (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: Click on the hyperlink in the Disk Name.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e54966d327eccb41c8ed98d4f54b52b1.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM- Current OS (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: Click ‘Size + performance’ in the side pane that follows.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0bccf7338989c5d11aab679843810a33.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM- Size + Performance (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: The current configuration being used is shown with a grey highlight. This is
    where users can change their disk from a premium to a standard disk type. You
    can select a different configuration by clicking on it. Note that any configuration
    that is not applicable to your environment will not be clickable.
  prefs: []
  type: TYPE_NORMAL
- en: '**Change the configuration of the VM**'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Azure offers VMs of different sizes, RAM, storage, and computing power. Each
    series and generation of Azure VM is designed to deliver specific performance
    characteristics, allowing users to choose the most suitable type based on their
    workload. The figure below shows the different generations offered by Azure VM.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/38564ba0f729e5625690b369c98d4ef5.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM Generations (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: Determine your workload and downgrade to a VM that best matches your workload
    requirements and also results in cost savings. Below are the steps to do the same
    -
  prefs: []
  type: TYPE_NORMAL
- en: Click on the VM
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the ‘Size’ in the side pane
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](../Images/b665c32f3ab2fd9b59f213eafac60017.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM -Size (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: The resulting pane shows the different VM generations and all associated details
    like the cost per hour, RAM, and workloads supported.
  prefs: []
  type: TYPE_NORMAL
- en: Note that this is just a sample image and is not intended to show all available
    configuration options.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b155f95c1d7842095223d21500c9b2a4.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM- Disk Generations & Sizes (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: Scroll all the way to the right to access the Cost/hour.
  prefs: []
  type: TYPE_NORMAL
- en: Note that these costs are at the time of writing the article. The current size
    and generation of the VM being used by your workloads are shown at the top. To
    change the VM configuration, click ‘Resize’.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5ca4fbf77672c8a22700b2ab36134885.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Azure VM — Resize the Configuration of the VM (Image by the author)**'
  prefs: []
  type: TYPE_NORMAL
- en: '**Consider changing to regions with lesser pricing**'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The pricing of Azure can vary across different regions. Regions with lower demand
    may have slightly lower pricing than regions with higher demand and limited availability
    of resources. Compare pricing across different regions using the Azure Pricing
    calculator while planning your deployment. However, try to select a region that
    is close to you to avoid unnecessary network delays.
  prefs: []
  type: TYPE_NORMAL
- en: For example, you may find that a region that is based out of Eastern Europe
    is less expensive compared to regions that are on the East and West coasts of
    the US. Let’s assume that you have a few users who are in Europe who need access
    to the VMs that you set up. To improve performance, it may make sense to set up
    VMs in a region that is close to their location rather than setting up VMs in
    a US region. However, it is important to be aware that there might be data transfer
    regulations and restrictions to consider when determining the optimal region for
    your VM setup. Additionally, it is important to consider that as the region gets
    farther from your current location, the performance may be affected by increased
    network latency, resulting in slower response times.
  prefs: []
  type: TYPE_NORMAL
- en: Concluding Remarks
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this article, we discussed 4 strategies to reduce costs on Azure bills without
    compromising on the efficiency of existing/new workloads. All of these can be
    seamlessly implemented using the Azure portal without having to use a programmatic
    approach. Understanding your workload requirements and processing needs is key
    to managing a cost-effective environment. At the same time, it is crucial to balance
    cost savings with factors such as performance and data transfer regulations. By
    applying these techniques, you can streamline Azure VM performance while effectively
    managing costs, ensuring efficient utilization of resources, and achieving your
    desired outcomes.
  prefs: []
  type: TYPE_NORMAL
