- en: How to Create Climate Stripes
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/how-to-create-climate-stripes-e46ab1bdade](https://towardsdatascience.com/how-to-create-climate-stripes-e46ab1bdade)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A Data Visualization Tutorial using R
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@irfanalghani11?source=post_page-----e46ab1bdade--------------------------------)[![Irfan
    Alghani Khalid](../Images/6a5f58a353463a0c2c8f4192ca9509e6.png)](https://medium.com/@irfanalghani11?source=post_page-----e46ab1bdade--------------------------------)[](https://towardsdatascience.com/?source=post_page-----e46ab1bdade--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----e46ab1bdade--------------------------------)
    [Irfan Alghani Khalid](https://medium.com/@irfanalghani11?source=post_page-----e46ab1bdade--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----e46ab1bdade--------------------------------)
    ·5 min read·Jan 10, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/03bfc65addd424d90c810393216fe448.png)'
  prefs: []
  type: TYPE_IMG
- en: The Climate Stripes. (The picture is created by the author)
  prefs: []
  type: TYPE_NORMAL
- en: TL;DR
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This article will teach you how to create the climate stripes visualization
    using R. We’ll use data from the MetOffice and generate the stripes using the
    ggplot library.
  prefs: []
  type: TYPE_NORMAL
- en: The Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A picture is worth thousands of words. Data visualization is one of them. When
    we want to influence people, a graph can make you aware of something that you
    maybe didn’t care about. Climate Stripes is also one of them. But what is it?
  prefs: []
  type: TYPE_NORMAL
- en: The Climate Stripes were made by Prof Ed Hawkins back in 2018\. This visualization
    shows a compilation of color bars that represent temperature changes relative
    to the temperature in 1961–1990\. It only shows colors, but that’s what made this
    graph beautiful and frightening simultaneously.
  prefs: []
  type: TYPE_NORMAL
- en: Each color bar represents the relative temperature with the one in 1961–1990\.
    Blue means lower, and red means higher. The darker the color is, the higher the
    temperature rise is.
  prefs: []
  type: TYPE_NORMAL
- en: If you’ve noticed, the article’s cover is the climate stripes. Now we’ll create
    that chart using R. Without further ado, let’s get started!
  prefs: []
  type: TYPE_NORMAL
- en: The Implementation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Data source
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To implement the graph, we need to find the data source first. In this article,
    we’ll use the dataset from the MetOffice called HadCRUT5.
  prefs: []
  type: TYPE_NORMAL
- en: This dataset collects near-surface temperatures for several regions. It combines
    data from the CRUTEM5 (surface air temperature) and HadSST4 (sea surface temperature)
    datasets.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/09ff3dc3d84950de921da3a11d278723.png)'
  prefs: []
  type: TYPE_IMG
- en: The picture is taken by the author.
  prefs: []
  type: TYPE_NORMAL
- en: The MetOffice has provided the data in time series and grid format. In this
    case, we’ll be going to use the time series data. You can read more details about
    the dataset through the link [**here**](https://www.metoffice.gov.uk/hadobs/hadcrut5/).
  prefs: []
  type: TYPE_NORMAL
- en: The libraries
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The R language has provided a library called tidyverse. This all-in-one library
    contains functions that are useful for data manipulation (dplyr) and visualization
    (ggplot).
  prefs: []
  type: TYPE_NORMAL
- en: 'We’ll be going to load that library along with the scales and glue library.
    Here is the code for doing that:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Load the data
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: After we load the libraries, the next step is to load the data. As I’ve mentioned
    before, we’ll be going to use the annual time series dataset from HadCRUT5\. Please
    download the dataset through this link [**here**](https://www.metoffice.gov.uk/hadobs/hadcrut5/data/current/analysis/diagnostics/HadCRUT.5.0.1.0.analysis.summary_series.global.monthly.csv).
  prefs: []
  type: TYPE_NORMAL
- en: 'After you download the data, let’s load it using the read_csv function like
    this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Let’s take a look at the dataset:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/c12072ebb2c137330aee2ba0666e3e67.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As you can see here, from left to right, each column represents the year, the
    temperature anomalies in Celsius, the lower confidence, and the upper confidence.
    To visualize the graph, we’ll be going to use the first and the second column.
    Let’s run this code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: The code will select the desired columns and convert the name simultaneously.
    The conversion will make our data processing easier.
  prefs: []
  type: TYPE_NORMAL
- en: Visualize the data
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Okay, now the exciting part, we’ll be going to visualize the data using the
    ggplot library. If you hear ggplot for the first time, don’t worry! I’ll guide
    you to generate the graph. Let’s add these lines of code first:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'So the code will create a collection of stripes using the geom_tile function.
    The ggplot function will handle the data processing. With that function, we choose
    the columns that become the XY axis and the color. The result will look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/496f8f1d07b3859f5c6a5c3731f45060.png)'
  prefs: []
  type: TYPE_IMG
- en: The picture is created by the author.
  prefs: []
  type: TYPE_NORMAL
- en: 'Hmm, still not looking good. Let’s tweak the graph. First, we’ll change the
    color palette by using the scale_fill_stepsn function like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Inside the function, we set parameters like colors to set the color palettes,
    values since the data have negative values, and n.breaks to break the color palettes
    into 12 different color ranges. The result will look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a6bbbd6d98710a20f0e436fdaf5c319b.png)'
  prefs: []
  type: TYPE_IMG
- en: The picture is created by the author.
  prefs: []
  type: TYPE_NORMAL
- en: 'Looks better! But wait, there are some weird gaps on the graph. Let’s add a
    function called coord_cartesian to remove the gap. Here is the code for doing
    that:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'After we add the code, here’s the result:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/fde57ea811abf1e9bc8c97afba73707f.png)'
  prefs: []
  type: TYPE_IMG
- en: The picture is created by the author.
  prefs: []
  type: TYPE_NORMAL
- en: 'Nice! Now we need to remove all ticks and the graph’s background. Here is the
    code for doing that:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'Here’s the final result:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e55d6d7d441df318ef13a68f72b8b6ba.png)'
  prefs: []
  type: TYPE_IMG
- en: The picture is created by the author.
  prefs: []
  type: TYPE_NORMAL
- en: 'Well done, you’ve created the climate stripes! Let’s save the graph using the
    ggsave function. Here is the code for doing that:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Addition: Add labels'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'If you’re interested in adding some labels and titles to your graph, it’s possible!
    The power of ggplot is that it can override the previous style that we’ve given
    before. Let’s take a look at this code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'On the bottom part, you can see I’ve added three functions. Let me explain
    to you each of them:'
  prefs: []
  type: TYPE_NORMAL
- en: Scale_x_continuous will help you to generate labels on the x-axis,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: labs will help you to visualize the title on the graph,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: the theme will tweak the appearance of the background and texts.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'After you run the code again, the final result will look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/07e87a83439a653fa6cec6ff192241f6.png)'
  prefs: []
  type: TYPE_IMG
- en: The picture is created by the author.
  prefs: []
  type: TYPE_NORMAL
- en: Final Remarks
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now you’ve learned how to create the climate stripes using R. I hope it helps
    you to learn more from this article, especially the data visualization part.
  prefs: []
  type: TYPE_NORMAL
- en: If you are interested in my article, please follow me on Medium. Thank you for
    reading my article!
  prefs: []
  type: TYPE_NORMAL
- en: References
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[1] [https://www.reading.ac.uk/planet/climate-resources/climate-stripes](https://www.reading.ac.uk/planet/climate-resources/climate-stripes)'
  prefs: []
  type: TYPE_NORMAL
- en: '[2] [https://www.youtube.com/watch?v=NrEdAtSlTMo](https://www.youtube.com/watch?v=NrEdAtSlTMo)'
  prefs: []
  type: TYPE_NORMAL
