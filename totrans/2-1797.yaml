- en: Run Interactive Sessions With ChatGPT In Jupyter Notebook
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åœ¨ Jupyter Notebook ä¸­ä¸ ChatGPT è¿è¡Œäº¤äº’å¼ä¼šè¯
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/run-interactive-sessions-with-chatgpt-in-jupyter-notebook-87e00f2ee461](https://towardsdatascience.com/run-interactive-sessions-with-chatgpt-in-jupyter-notebook-87e00f2ee461)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/run-interactive-sessions-with-chatgpt-in-jupyter-notebook-87e00f2ee461](https://towardsdatascience.com/run-interactive-sessions-with-chatgpt-in-jupyter-notebook-87e00f2ee461)
- en: Use LangChain and IPyWidgets to run conversational sessions with ChatGPT about
    custom documents in Jupyter Notebook
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ LangChain å’Œ IPyWidgets åœ¨ Jupyter Notebook ä¸­ä¸ ChatGPT è¿›è¡Œå…³äºè‡ªå®šä¹‰æ–‡æ¡£çš„å¯¹è¯
- en: '[](https://konstantin-rink.medium.com/?source=post_page-----87e00f2ee461--------------------------------)[![Konstantin
    Rink](../Images/41bfc069d7382a0fd56f081eea7eb2d9.png)](https://konstantin-rink.medium.com/?source=post_page-----87e00f2ee461--------------------------------)[](https://towardsdatascience.com/?source=post_page-----87e00f2ee461--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----87e00f2ee461--------------------------------)
    [Konstantin Rink](https://konstantin-rink.medium.com/?source=post_page-----87e00f2ee461--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://konstantin-rink.medium.com/?source=post_page-----87e00f2ee461--------------------------------)[![Konstantin
    Rink](../Images/41bfc069d7382a0fd56f081eea7eb2d9.png)](https://konstantin-rink.medium.com/?source=post_page-----87e00f2ee461--------------------------------)[](https://towardsdatascience.com/?source=post_page-----87e00f2ee461--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----87e00f2ee461--------------------------------)
    [Konstantin Rink](https://konstantin-rink.medium.com/?source=post_page-----87e00f2ee461--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----87e00f2ee461--------------------------------)
    Â·6 min readÂ·May 4, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒäº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----87e00f2ee461--------------------------------)
    Â·é˜…è¯»æ—¶é—´ 6 åˆ†é’ŸÂ·2023å¹´5æœˆ4æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/3e2944ef6748fadb370f0238766a8a0f.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3e2944ef6748fadb370f0238766a8a0f.png)'
- en: Original photo by [Charles Etoroma](https://unsplash.com/@charlesetoroma?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    from [Unsplash](https://unsplash.com/de/fotos/ddPTOSMa-MI?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText).
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: åŸå§‹ç…§ç‰‡ç”± [Charles Etoroma](https://unsplash.com/@charlesetoroma?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    æä¾›ï¼Œæ¥è‡ª [Unsplash](https://unsplash.com/de/fotos/ddPTOSMa-MI?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)ã€‚
- en: In March 2023, OpenAI released its API for developers to access ChatGPT and
    its Whisper models. Since then, developers can integrate these services and models
    into their applications and products via their API. Many great tutorials have
    then been published on how to create your own ChatGPT Chat web app using their
    API together with Streamlit or Streamlit Chat.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 2023å¹´3æœˆï¼ŒOpenAI å‘å¸ƒäº†å…¶ APIï¼Œä¾›å¼€å‘è€…è®¿é—® ChatGPT å’Œ Whisper æ¨¡å‹ã€‚ä»é‚£æ—¶èµ·ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ API å°†è¿™äº›æœåŠ¡å’Œæ¨¡å‹é›†æˆåˆ°ä»–ä»¬çš„åº”ç”¨ç¨‹åºå’Œäº§å“ä¸­ã€‚è®¸å¤šç²¾å½©çš„æ•™ç¨‹éšåå‘å¸ƒäº†å¦‚ä½•ä½¿ç”¨å…¶
    API ç»“åˆ Streamlit æˆ– Streamlit Chat åˆ›å»ºè‡ªå·±çš„ ChatGPT èŠå¤© web åº”ç”¨ç¨‹åºã€‚
- en: This article proposes a **lighter-weight approach**. Instead of running or hosting
    a Streamlit server or working with Docker containers, **all the work is done in
    a Jupyter Notebook**.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡æå‡ºäº†ä¸€ç§ **æ›´è½»é‡çº§çš„æ–¹æ³•**ã€‚æ— éœ€è¿è¡Œæˆ–æ‰˜ç®¡ Streamlit æœåŠ¡å™¨æˆ–ä½¿ç”¨ Docker å®¹å™¨ï¼Œ**æ‰€æœ‰å·¥ä½œéƒ½åœ¨ Jupyter Notebook
    ä¸­å®Œæˆ**ã€‚
- en: In this article, you will learn **how to run interactive sessions about your
    custom documents** **with** OpenAIâ€™s LargeLanguageModel (LLM) **ChatGPT in Jupyter
    Notebook** by using **LangChain** and **IPyWidgets**.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ–‡ä¸­ï¼Œä½ å°†å­¦ä¹  **å¦‚ä½•ä½¿ç”¨ OpenAI çš„å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ChatGPT åœ¨ Jupyter Notebook ä¸­è¿è¡Œå…³äºè‡ªå®šä¹‰æ–‡æ¡£çš„äº¤äº’å¼ä¼šè¯**ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨
    **LangChain** å’Œ **IPyWidgets**ã€‚
- en: 'The final result will look like this:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€ç»ˆç»“æœå°†å¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '![](../Images/43e468f126b37e2c69924176c1f375f1.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/43e468f126b37e2c69924176c1f375f1.png)'
- en: Figure 1\. Demo of the final result (image by author).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 1\. æœ€ç»ˆç»“æœçš„æ¼”ç¤ºï¼ˆå›¾ç‰‡æ¥è‡ªä½œè€…ï¼‰ã€‚
- en: The following chapters will explain each part of the code separately.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ç« èŠ‚å°†åˆ†åˆ«è§£é‡Šä»£ç çš„æ¯ä¸€éƒ¨åˆ†ã€‚
- en: ğŸ’¾ [Here](https://github.com/darinkist/MediumArticle_InteractiveChatGPTSessionsInJupyterNotebook)
    you can find the complete code as a Notebook.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ’¾ [è¿™é‡Œ](https://github.com/darinkist/MediumArticle_InteractiveChatGPTSessionsInJupyterNotebook)
    ä½ å¯ä»¥æ‰¾åˆ°å®Œæ•´çš„ä»£ç  Notebookã€‚
- en: Prerequisites
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å…ˆå†³æ¡ä»¶
- en: Before we can start working on our conversational sessions with ChatGPT, some
    things need to be done first.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬å¼€å§‹ä¸ ChatGPT çš„å¯¹è¯ä¹‹å‰ï¼Œéœ€è¦å…ˆå®Œæˆä¸€äº›å‡†å¤‡å·¥ä½œã€‚
- en: OpenAI API key ğŸ”‘
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: OpenAI API å¯†é’¥ ğŸ”‘
- en: Since we want to use ChatGPT, we first need a valid OpenAI API key. The needed
    key can be created under this [link](https://platform.openai.com/account/api-keys)
    and then by clicking on the
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ ChatGPTï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„ OpenAI API å¯†é’¥ã€‚æ‰€éœ€çš„å¯†é’¥å¯ä»¥åœ¨ [æ­¤é“¾æ¥](https://platform.openai.com/account/api-keys)
    ä¸­åˆ›å»ºï¼Œç„¶åç‚¹å‡»
- en: '`+ Create new secret key` button.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '`+ åˆ›å»ºæ–°çš„å¯†é’¥` æŒ‰é’®ã€‚'
- en: OpenAI offers a free trial period before you charge money. The prices are super
    fair in my opinion, considering that hosting your own LLM is more expensive in
    many cases.
  id: totrans-21
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: OpenAI æä¾›äº†ä¸€ä¸ªå…è´¹çš„è¯•ç”¨æœŸï¼Œä¹‹åæ‰æ”¶è´¹ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œä»·æ ¼éå¸¸å…¬å¹³ï¼Œè€ƒè™‘åˆ°åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ‰˜ç®¡ä½ è‡ªå·±çš„ LLM æ›´ä¸ºæ˜‚è´µã€‚
- en: Installing the OpenAI package ğŸ“¦
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å®‰è£… OpenAI åŒ… ğŸ“¦
- en: 'Once we have the key, we also need to install the official OpenAI package by
    running the following command:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬æ‹¥æœ‰å¯†é’¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…å®˜æ–¹ OpenAI åŒ…ï¼š
- en: '[PRE0]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Installing the LangChain package ğŸ¦œï¸ğŸ”—
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å®‰è£… LangChain åŒ… ğŸ¦œï¸ğŸ”—
- en: LangChain is a relatively new framework built on top of LLMs like ChatGPT. Its
    goal is to chain different components together to create more advanced use cases
    around LLM like question-answering over specific documents or chatbots.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: LangChain æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„æ¡†æ¶ï¼Œå»ºç«‹åœ¨ ChatGPT ç­‰ LLMs ä¹‹ä¸Šã€‚å®ƒçš„ç›®æ ‡æ˜¯å°†ä¸åŒçš„ç»„ä»¶é“¾å¼è¿æ¥åœ¨ä¸€èµ·ï¼Œä»¥åˆ›å»ºæ›´é«˜çº§çš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œä¾‹å¦‚ç‰¹å®šæ–‡æ¡£ä¸Šçš„é—®ç­”æˆ–èŠå¤©æœºå™¨äººã€‚
- en: 'To install it, run the following command:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å®‰è£…å®ƒï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
- en: '[PRE1]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Install or update Jupyter Widgets ğŸª
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å®‰è£…æˆ–æ›´æ–° Jupyter Widgets ğŸª
- en: If you are using Jupyter Notebook or Jupyter Lab, ipywidgets should be already
    installed. However, it could be the case that you are using an older version of
    the package. This article uses the (latest) version `8.0.5`.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ä½¿ç”¨ Jupyter Notebook æˆ– Jupyter Labï¼Œipywidgets åº”è¯¥å·²ç»å®‰è£…ã€‚ç„¶è€Œï¼Œå¯èƒ½ä½ æ­£åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬çš„åŒ…ã€‚æœ¬æ–‡ä½¿ç”¨çš„æ˜¯ï¼ˆæœ€æ–°ï¼‰ç‰ˆæœ¬
    `8.0.5`ã€‚
- en: 'To install or update ipywidgets, run the command below:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å®‰è£…æˆ–æ›´æ–° ipywidgetsï¼Œè¯·è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š
- en: '[PRE2]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: After the successful installation, do a restart of your Jupyter Notebook/Lab.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: å®‰è£…æˆåŠŸåï¼Œé‡å¯ä½ çš„ Jupyter Notebook/Labã€‚
- en: '**Off-topic**: â€¦I knowâ€¦ Jupiter does not have a ring â€” its Saturn ğŸª :P'
  id: totrans-34
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**é¢˜å¤–è¯**ï¼šâ€¦æˆ‘çŸ¥é“â€¦ æœ¨æ˜Ÿæ²¡æœ‰å…‰ç¯ â€” è¿™æ˜¯åœŸæ˜Ÿ ğŸª :P'
- en: Data ğŸ“‘
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ•°æ® ğŸ“‘
- en: As promised above, we will not only create an interactive session with ChatGPT
    but also send our own document to ChatGPT and then ask questions about them. The
    document we use as an example is a Wikipedia article about the [Collapse of Silicon
    Valley Bank](https://en.wikipedia.org/wiki/Collapse_of_Silicon_Valley_Bank) (Wikipedia
    contributors, [CC BY-SA 3.0](https://en.wikipedia.org/wiki/Wikipedia:Text_of_the_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License))
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£å¦‚ä¸Šé¢æ‰¿è¯ºçš„ï¼Œæˆ‘ä»¬ä¸ä»…ä¼šåˆ›å»ºä¸€ä¸ªä¸ ChatGPT çš„äº’åŠ¨ä¼šè¯ï¼Œè¿˜ä¼šå°†è‡ªå·±çš„æ–‡æ¡£å‘é€ç»™ ChatGPTï¼Œç„¶åè¯¢é—®æœ‰å…³è¿™äº›æ–‡æ¡£çš„é—®é¢˜ã€‚æˆ‘ä»¬ç”¨ä½œç¤ºä¾‹çš„æ–‡æ¡£æ˜¯å…³äº
    [ç¡…è°·é“¶è¡Œå€’é—­](https://en.wikipedia.org/wiki/Collapse_of_Silicon_Valley_Bank) çš„ Wikipedia
    æ–‡ç« ï¼ˆWikipedia è´¡çŒ®è€…ï¼Œ[CC BY-SA 3.0](https://en.wikipedia.org/wiki/Wikipedia:Text_of_the_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License)ï¼‰
- en: '**Note**: I downloaded the mentioned article as a text file using the [wikipedia
    package](https://pypi.org/project/wikipedia/). Of course you can use any text
    files or DocumentLoaders you like.'
  id: totrans-37
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**æ³¨æ„**ï¼šæˆ‘ä½¿ç”¨ [wikipedia package](https://pypi.org/project/wikipedia/) ä¸‹è½½äº†æåˆ°çš„æ–‡ç« ä½œä¸ºæ–‡æœ¬æ–‡ä»¶ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•ä½ å–œæ¬¢çš„æ–‡æœ¬æ–‡ä»¶æˆ–
    DocumentLoadersã€‚'
- en: Project structure
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é¡¹ç›®ç»“æ„
- en: Our project has the following folder structure
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„é¡¹ç›®æœ‰ä»¥ä¸‹æ–‡ä»¶å¤¹ç»“æ„
- en: '[PRE3]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Integrating ChatGPT with LangChain
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å°† ChatGPT ä¸ LangChain é›†æˆ
- en: Now that we have all the packages and tools we need, we can work on combining
    or using ChatGPT with LangChain. As mentioned above, LangChain has a number of
    helpful features to load documents and start conversation sessions with ChatGPT.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†æ‰€éœ€çš„æ‰€æœ‰åŒ…å’Œå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç€æ‰‹å°† ChatGPT ä¸ LangChain ç»“åˆä½¿ç”¨ã€‚æ­£å¦‚ä¸Šé¢æåˆ°çš„ï¼ŒLangChain å…·æœ‰è®¸å¤šæœ‰ç”¨çš„åŠŸèƒ½æ¥åŠ è½½æ–‡æ¡£å’Œå¼€å§‹ä¸
    ChatGPT çš„å¯¹è¯ä¼šè¯ã€‚
- en: The code below shows the logic that we later combine with Jupyter Widgets.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†æˆ‘ä»¬ç¨åå°†ä¸ Jupyter Widgets ç»“åˆçš„é€»è¾‘ã€‚
- en: In `line 10` we have to set our OpenAI API key. `Lines 12-13` load all text
    documents (in this example only one) from the specified `/documents` path.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ `line 10` ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»è®¾ç½®æˆ‘ä»¬çš„ OpenAI API å¯†é’¥ã€‚`Lines 12-13` ä»æŒ‡å®šçš„ `/documents` è·¯å¾„åŠ è½½æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶ï¼ˆåœ¨æœ¬ä¾‹ä¸­åªæœ‰ä¸€ä¸ªï¼‰ã€‚
- en: '[Chroma](https://github.com/chroma-core/chroma) ( `lines 15-16`) is an in-memory
    embedding database that contains our text document in the form of embeddings using
    `OpenAIEmbeddings`.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '[Chroma](https://github.com/chroma-core/chroma) ï¼ˆ`lines 15-16`ï¼‰æ˜¯ä¸€ä¸ªå†…å­˜ä¸­çš„åµŒå…¥æ•°æ®åº“ï¼ŒåŒ…å«æˆ‘ä»¬ä»¥
    `OpenAIEmbeddings` å½¢å¼çš„æ–‡æœ¬æ–‡æ¡£ã€‚'
- en: After we initialized ChatGPT in `line 18`, we create a `ConversationalRetrievalChain`
    (`line 21`). To start a conversation with ChatGPT, we need to specify a question
    and a chat history (`lines 24â€“29 and line 31`) so that it remembers the previous
    conversations, for example, in case we reference in a follow-up question to a
    previous answer.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬åˆå§‹åŒ– ChatGPT çš„ `line 18` åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª `ConversationalRetrievalChain` ï¼ˆ`line 21`ï¼‰ã€‚è¦å¼€å§‹ä¸
    ChatGPT å¯¹è¯ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªé—®é¢˜å’ŒèŠå¤©è®°å½•ï¼ˆ`lines 24â€“29 å’Œ line 31`ï¼‰ï¼Œä»¥ä¾¿å®ƒè®°ä½ä¹‹å‰çš„å¯¹è¯ï¼Œä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬åœ¨åç»­é—®é¢˜ä¸­å¼•ç”¨ä¹‹å‰çš„ç­”æ¡ˆæ—¶ã€‚
- en: '**Note**: If you have the choice between Jupyter Notebook and Jupyter Lab,
    go for the latter one. With Jupyter Lab, you have more options to debug your code
    (i.e., the log console)'
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**æ³¨æ„**ï¼šå¦‚æœä½ åœ¨é€‰æ‹© Jupyter Notebook å’Œ Jupyter Lab ä¹‹é—´çŠ¹è±«ï¼Œè¯·é€‰æ‹©åè€…ã€‚ä½¿ç”¨ Jupyter Labï¼Œä½ æœ‰æ›´å¤šçš„é€‰é¡¹æ¥è°ƒè¯•ä»£ç ï¼ˆå³ï¼Œæ—¥å¿—æ§åˆ¶å°ï¼‰ã€‚'
- en: Combining it with an interactive design
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å°†å…¶ä¸äº¤äº’è®¾è®¡ç»“åˆèµ·æ¥ã€‚
- en: With the logic above, we could already start a conversation. However, it would
    not be interactive. For each new question, we would have to create a new cell
    with the code from `lines 24â€“29 and line 31`.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å¼€å§‹å¯¹è¯äº†ã€‚ç„¶è€Œï¼Œè¿™å°†ä¸ä¼šæ˜¯äº’åŠ¨å¼çš„ã€‚å¯¹äºæ¯ä¸ªæ–°é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å•å…ƒæ ¼ï¼ŒåŒ…å«`lines 24â€“29 and line
    31`ä¸­çš„ä»£ç ã€‚
- en: To make our conversation interactive, we will use Jupyter widgets, CSS, and
    optionally two avatar images and a loading animation gif.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿æˆ‘ä»¬çš„å¯¹è¯å…·æœ‰äº’åŠ¨æ€§ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Jupyter å°éƒ¨ä»¶ã€CSSï¼Œå¹¶å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸¤ä¸ªå¤´åƒå›¾åƒå’Œä¸€ä¸ªåŠ è½½åŠ¨ç”» gifã€‚
- en: I used the avatar images ([bear](https://www.flaticon.com/free-icon/bear_3940403?term=animal+bear&page=1&position=21&origin=search&related_id=3940403),
    [cat](https://www.flaticon.com/free-icon/cat_4322991?term=animal+cat&page=1&position=60&origin=search&related_id=4322991))from
    [Animal icons created by Freepik â€” Flaticon](https://www.flaticon.com/free-icons/animal)
    (*Flaticon license Free for personal and commercial use with attribution*)
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä½¿ç”¨äº†å¤´åƒå›¾åƒï¼ˆ[ç†Š](https://www.flaticon.com/free-icon/bear_3940403?term=animal+bear&page=1&position=21&origin=search&related_id=3940403)ï¼Œ[çŒ«](https://www.flaticon.com/free-icon/cat_4322991?term=animal+cat&page=1&position=60&origin=search&related_id=4322991)ï¼‰æ¥è‡ª[Freepik
    åˆ›å»ºçš„åŠ¨ç‰©å›¾æ ‡ â€” Flaticon](https://www.flaticon.com/free-icons/animal)ï¼ˆ*Flaticon è®¸å¯ï¼Œä¸ªäººå’Œå•†ä¸šä½¿ç”¨å‡å…è´¹ï¼Œéœ€ç½²å*ï¼‰ã€‚
- en: And the [loading animation](https://loading.io/spinner/bars/-bounce-bar-column-chart-equalizer-histogram-rectangle-block-progress-facebook)
    ([free license](https://loading.io/license/#free-license)) from loading.io.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»¥åŠæ¥è‡ª loading.io çš„[åŠ è½½åŠ¨ç”»](https://loading.io/spinner/bars/-bounce-bar-column-chart-equalizer-histogram-rectangle-block-progress-facebook)ï¼ˆ[å…è´¹è®¸å¯](https://loading.io/license/#free-license)ï¼‰ã€‚
- en: All images are located in the `images/` folder.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ‰€æœ‰å›¾åƒéƒ½ä½äº`images/`æ–‡ä»¶å¤¹ä¸­ã€‚
- en: The following CSS and HTML was used from [Bootstrap snippet. chat app](https://www.bootdey.com/snippets/view/chat-app)
    ([MIT license](https://www.bootdey.com/license))
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ CSS å’Œ HTML æ¥è‡ª[Bootstrap snippet. chat app](https://www.bootdey.com/snippets/view/chat-app)ï¼ˆ[MIT
    è®¸å¯](https://www.bootdey.com/license)ï¼‰ã€‚
- en: The code snippet below shows the libraries we need to import first
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†æˆ‘ä»¬éœ€è¦é¦–å…ˆå¯¼å…¥çš„åº“ã€‚
- en: '[PRE4]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: After the import, we add the following code to a new cell. This is necessary
    because we use the `%%html` cell magic.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¼å…¥åï¼Œæˆ‘ä»¬å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ä¸€ä¸ªæ–°å•å…ƒæ ¼ä¸­ã€‚è¿™æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†`%%html`å•å…ƒæ ¼é­”æ³•ã€‚
- en: The code below shows how the logic from above (Integrating ChatGPT with LangChain)
    is combined with HTML code.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•å°†ä¸Šè¿°é€»è¾‘ï¼ˆå°† ChatGPT ä¸ LangChain é›†æˆï¼‰ä¸ HTML ä»£ç ç»“åˆèµ·æ¥ã€‚
- en: To make our session interactive, we need to create a method that is trigged
    by changes to the Jupyter Text Widget (our input filed).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿æˆ‘ä»¬çš„ä¼šè¯å…·æœ‰äº’åŠ¨æ€§ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç”± Jupyter Text Widgetï¼ˆæˆ‘ä»¬çš„è¾“å…¥å­—æ®µï¼‰æ›´æ”¹è§¦å‘çš„æ–¹æ³•ã€‚
- en: We have to set the `text.continuous_update` to `False`. Otherwise, our defined
    method would be triggered with every single character we type in.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¿…é¡»å°†`text.continuous_update`è®¾ç½®ä¸º`False`ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•å°†åœ¨æ¯ä¸ªå­—ç¬¦è¾“å…¥æ—¶è¢«è§¦å‘ã€‚
- en: Last but not least, we define the appearance or layout of the input field, output,
    and loading bar.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å®šä¹‰äº†è¾“å…¥å­—æ®µã€è¾“å‡ºå’ŒåŠ è½½æ¡çš„å¤–è§‚æˆ–å¸ƒå±€ã€‚
- en: We use the `flex_flow="column-reverse"` here to always have the scroll bar at
    the bottom, so we donâ€™t have to scroll down for each new message.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨`flex_flow="column-reverse"`ï¼Œä»¥ä¾¿å§‹ç»ˆå°†æ»šåŠ¨æ¡ç½®äºåº•éƒ¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¿…ä¸ºæ¯æ¡æ–°æ¶ˆæ¯å‘ä¸‹æ»šåŠ¨ã€‚
- en: Thatâ€™s it! Now we can start an interactive session!
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: å°±è¿™äº›ï¼ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹ä¸€ä¸ªäº’åŠ¨ä¼šè¯äº†ï¼
- en: The complete code can be found [here](https://github.com/darinkist/MediumArticle_InteractiveChatGPTSessionsInJupyterNotebook)
  id: totrans-64
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å®Œæ•´ä»£ç å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/darinkist/MediumArticle_InteractiveChatGPTSessionsInJupyterNotebook)æ‰¾åˆ°ã€‚
- en: Demo Session
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ¼”ç¤ºä¼šè¯
- en: As mentioned above, I used for this demo an article about the Silicon Valley
    Bankâ€™s collapse. Since this event happened after ChatGPTâ€™s latest update or refresh,
    it is not aware of the collapse.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä¸ºè¿™ä¸ªæ¼”ç¤ºä½¿ç”¨äº†ä¸€ç¯‡å…³äºç¡…è°·é“¶è¡Œå€’é—­çš„æ–‡ç« ã€‚ç”±äºæ­¤äº‹ä»¶å‘ç”Ÿåœ¨ ChatGPT æœ€è¿‘çš„æ›´æ–°æˆ–åˆ·æ–°ä¹‹åï¼Œå®ƒæ— æ³•äº†è§£è¿™æ¬¡å€’é—­ã€‚
- en: 'Letâ€™s find it out by using the official console (figure 2):'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨å®˜æ–¹æ§åˆ¶å°ï¼ˆå›¾ 2ï¼‰æ¥æ‰¾å‡ºç­”æ¡ˆï¼š
- en: '![](../Images/1d08f289be2476ab9c7172aef8dec88b.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1d08f289be2476ab9c7172aef8dec88b.png)'
- en: Figure 2\. ChatGPTâ€™s ([ChatGPT Mar 23 Version](https://help.openai.com/en/articles/6825453-chatgpt-release-notes))
    answer (image by author).
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 2\. ChatGPT çš„ï¼ˆ[ChatGPT Mar 23 ç‰ˆæœ¬](https://help.openai.com/en/articles/6825453-chatgpt-release-notes)ï¼‰å›ç­”ï¼ˆå›¾ç‰‡ç”±ä½œè€…æä¾›ï¼‰ã€‚
- en: 'We can see that the current version (March 23) is not aware of the collapse.
    Letâ€™s start our interactive session:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“å‰ç‰ˆæœ¬ï¼ˆ3æœˆ23æ—¥ï¼‰å°šæœªäº†è§£å€’é—­æƒ…å†µã€‚è®©æˆ‘ä»¬å¼€å§‹æˆ‘ä»¬çš„äº’åŠ¨ç¯èŠ‚ï¼š
- en: '![](../Images/faf1cc78574e8db19129b5f05bcfd2e3.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/faf1cc78574e8db19129b5f05bcfd2e3.png)'
- en: Figure 3\. Interactive output (image by author).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾3\. äº’åŠ¨è¾“å‡ºï¼ˆä½œè€…æä¾›çš„å›¾ç‰‡ï¼‰ã€‚
- en: BÃ„M! With the information we provided via LangChain, ChatGPT can provide more
    detailed answers about the collapse.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: BÃ„Mï¼é€šè¿‡æˆ‘ä»¬æä¾›çš„ä¿¡æ¯ï¼ŒChatGPTèƒ½å¤Ÿæä¾›å…³äºå€’é—­çš„æ›´è¯¦ç»†å›ç­”ã€‚
- en: Conclusion
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: If you are looking for a lightweight alternative to create your own ChatGPT
    chat web application, then this approach could be a pretty good alternative. All
    the needed work can be done in a Jupyter Notebook with LangChain, IPyWidgets,
    and HTML/CSS. Since LangChain is relatively new, I expect many updates and possible
    code changes soon.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ åœ¨å¯»æ‰¾ä¸€ä¸ªè½»é‡çº§çš„æ›¿ä»£æ–¹æ¡ˆæ¥åˆ›å»ºä½ è‡ªå·±çš„ChatGPTèŠå¤©ç½‘é¡µåº”ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å¯èƒ½æ˜¯ä¸€ä¸ªç›¸å½“ä¸é”™çš„é€‰æ‹©ã€‚æ‰€æœ‰éœ€è¦çš„å·¥ä½œéƒ½å¯ä»¥åœ¨Jupyter Notebookä¸­é€šè¿‡LangChainã€IPyWidgetså’ŒHTML/CSSå®Œæˆã€‚ç”±äºLangChainç›¸å¯¹è¾ƒæ–°ï¼Œæˆ‘é¢„è®¡ä¸ä¹…ä¼šæœ‰è®¸å¤šæ›´æ–°å’Œå¯èƒ½çš„ä»£ç æ›´æ”¹ã€‚
- en: Sources
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ¥æº
- en: Wikipedia contributors. (2023, May 1). Collapse of Silicon Valley Bank. In *Wikipedia,
    The Free Encyclopedia*. Retrieved 18:56, May 1, 2023, from [https://en.wikipedia.org/w/index.php?title=Collapse_of_Silicon_Valley_Bank&oldid=1152681730](https://en.wikipedia.org/w/index.php?title=Collapse_of_Silicon_Valley_Bank&oldid=1152681730)
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: ç»´åŸºç™¾ç§‘è´¡çŒ®è€…ã€‚ï¼ˆ2023å¹´5æœˆ1æ—¥ï¼‰ã€‚ç¡…è°·é“¶è¡Œå€’é—­ã€‚åœ¨*ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±ç™¾ç§‘å…¨ä¹¦*ä¸­ã€‚æ£€ç´¢äº2023å¹´5æœˆ1æ—¥18:56ï¼Œæ¥è‡ª[https://en.wikipedia.org/w/index.php?title=Collapse_of_Silicon_Valley_Bank&oldid=1152681730](https://en.wikipedia.org/w/index.php?title=Collapse_of_Silicon_Valley_Bank&oldid=1152681730)
