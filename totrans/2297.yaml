- en: Visualizations of New York City
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/visualizations-of-new-york-city-f7b4772e9518](https://towardsdatascience.com/visualizations-of-new-york-city-f7b4772e9518)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Bringing NYC Open Data to life with Python and Plotly
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@anthonybaum?source=post_page-----f7b4772e9518--------------------------------)[![Anthony
    Baum](../Images/7c79710f88cac1b378807b2fef8e19ae.png)](https://medium.com/@anthonybaum?source=post_page-----f7b4772e9518--------------------------------)[](https://towardsdatascience.com/?source=post_page-----f7b4772e9518--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----f7b4772e9518--------------------------------)
    [Anthony Baum](https://medium.com/@anthonybaum?source=post_page-----f7b4772e9518--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----f7b4772e9518--------------------------------)
    ·9 min read·Aug 18, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/3253b6702c804c0143397b8f62aed9b8.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Fabien BELLANGER](https://unsplash.com/@fabbel78?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  prefs: []
  type: TYPE_NORMAL
- en: New York City’s [open data platform](https://opendata.cityofnewyork.us/) is
    an incredible source of information. All public data collected and generated by
    the city is [mandated by law](https://opendata.cityofnewyork.us/open-data-law/)
    to be made available through the portal, as well as being free for use by the
    public.
  prefs: []
  type: TYPE_NORMAL
- en: Datasets range from transport, housing, and motor vehicle incidents, to a Central
    Park squirrel census, and even park ranger reports of aggressive turtle encounters.
  prefs: []
  type: TYPE_NORMAL
- en: Geography, infrastructure, and sociology datasets like these represent real-world
    processes and events. Even if you have no connection to or little interest in
    NYC or urban areas in general, they give you a chance to work with data that looks
    a lot more like what you’ll encounter in a professional role than the likes of
    MNIST or Titanic survivors. Better still, they’re almost as easy to access.
  prefs: []
  type: TYPE_NORMAL
- en: We’re going to run through a demonstration of just how easy these datasets are
    to use and build some interesting visuals in the process.
  prefs: []
  type: TYPE_NORMAL
- en: 'To keep the code blocks as succinct as possible, here are the required modules
    for all the code in this post:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Make sure they’re installed if you want to replicate anything yourself.
  prefs: []
  type: TYPE_NORMAL
- en: Building Footprints
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Dataset](https://data.cityofnewyork.us/Housing-Development/Building-Footprints/nqwf-w8eh)'
  prefs: []
  type: TYPE_NORMAL
- en: This is one of my favorite datasets to play around with. The data includes footprint
    polygons, ages, and heights for most of the buildings in NYC.
  prefs: []
  type: TYPE_NORMAL
- en: We’ll start with data pull separate from the visualization code since we’re
    using this dataset for a couple of different visuals.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: That gives us a working dataset that looks like this.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/58cc63945e08b994b429e9b0e0f2f08c.png)'
  prefs: []
  type: TYPE_IMG
- en: The geometry column is the polygon for the building footprint, and the centroid
    column is a singular point for the center of the footprint, i.e. a single lat/long
    for the building’s location. Now we can get into the fun stuff.
  prefs: []
  type: TYPE_NORMAL
- en: Visualizing New vs Old
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: At this point, the city is a mashup of old brownstones, densely packed single-family
    homes and rowhouses, blocky apartment complexes, and glass towers overlooking
    the rivers.
  prefs: []
  type: TYPE_NORMAL
- en: Say we want to figure out where to live and we want a neighborhood with a lot
    of older buildings for some historical charm. In many American cities and particularly
    in the Northeast, buildings from the 1930’s and earlier are called “prewar buildings”,
    or “prewars”, colloquially.
  prefs: []
  type: TYPE_NORMAL
- en: To find a neighborhood that might suit what we’re looking for, we can use a
    scatter plot on a map using the centroid for each building as the point location,
    and a KDE plot to highlight high density of prewars.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/f41601fc1a2f61ae1a3acd153d62ac56.png)'
  prefs: []
  type: TYPE_IMG
- en: Display of the streets and neighborhoods with high numbers of prewar buildings.
    Chart created with Plotly.
  prefs: []
  type: TYPE_NORMAL
- en: If you’re familiar with NYC, some of this is not surprising and some might be
    a little more unexpected. The quintessential brownstone rows of Cobble Hill and
    the West Village are obvious. But I actually wasn’t expecting such a high number
    of the buildings in Greenpoint and Williamsburg (the northern tip of Brooklyn)
    to be that old.
  prefs: []
  type: TYPE_NORMAL
- en: Building Sizes
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Because we have the building footprints and roof heights in the datasets, we
    can calculate building volume. We can then visualize the average size of building
    by borough to compare.
  prefs: []
  type: TYPE_NORMAL
- en: To do this we’ll use the geometry of the building footprint and the roof height
    to calculate building volume for each building in the data. We’ll use the centroid
    of each footprint to place it in a borough.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/a96ce55cc0d592dd741dc1c65d04646d.png)'
  prefs: []
  type: TYPE_IMG
- en: Volumetric bar plot of building volume by borough. Chart created with Plotly.
  prefs: []
  type: TYPE_NORMAL
- en: No shocks here that Manhattan buildings are bigger. However, you might have
    expected bigger differences between the other three boroughs, perhaps especially
    between Brooklyn with its towers overlooking the East River and Staten Island
    with its distinctly NYC suburb looks.
  prefs: []
  type: TYPE_NORMAL
- en: All four of the outer boroughs have huge swathes of low density housing. Queens
    in particular is huge, being 56% larger than Brooklyn, the second largest borough.
  prefs: []
  type: TYPE_NORMAL
- en: We can see this in building size distributions with a boxenplot. Note that the
    volumes are logarithmic to better display the outer boroughs alongside Manhattan’s
    dramatically higher number of massive buildings.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d565849e186dc933b3a5edfcf48f62ef.png)'
  prefs: []
  type: TYPE_IMG
- en: The large volume of small, single family homes in Queens is clear vs even Staten
    Island.
  prefs: []
  type: TYPE_NORMAL
- en: WiFi Hotspots
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Dataset](https://data.cityofnewyork.us/City-Government/NYC-Wi-Fi-Hotspot-Locations/yjub-udmw)'
  prefs: []
  type: TYPE_NORMAL
- en: NYC operates wifi hotspots across much of the city, and their locations are
    available through the open data portal. These are only city-operated hotspots,
    so the likes of Starbucks are not included.
  prefs: []
  type: TYPE_NORMAL
- en: We can read the JSON file directly from the portal side and create a map of
    locations.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/578f33bb7d90f1b99451ad6835bcdcb3.png)'
  prefs: []
  type: TYPE_IMG
- en: Locations of City of New York operated wifi hotspots. Chart created with Plotly.
  prefs: []
  type: TYPE_NORMAL
- en: Most NYC subway stations have free wifi, and they show up really nicely on this
    map. The high-density areas of hotspots extending up both sides of Central Park
    are mostly subway stations.
  prefs: []
  type: TYPE_NORMAL
- en: You can also clearly see two of the main subway lines into Queens and Brooklyn
    by just looking for the locations arranged in unnaturally straight lines.
  prefs: []
  type: TYPE_NORMAL
- en: Squirrel Census
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Dataset](https://data.cityofnewyork.us/Environment/2018-Central-Park-Squirrel-Census-Squirrel-Data/vfnx-vebw)'
  prefs: []
  type: TYPE_NORMAL
- en: The Squirrel Census ([https://www.thesquirrelcensus.com/](https://www.thesquirrelcensus.com/))
    is a science, design, and storytelling project focusing on the Eastern gray (Sciurus
    carolinensis). They count squirrels and present their findings to the public.
  prefs: []
  type: TYPE_NORMAL
- en: This data contains squirrel data for each of the 3,023 sightings, including
    location coordinates, age, primary and secondary fur color, elevation, activities,
    communications, and interactions between squirrels and humans.
  prefs: []
  type: TYPE_NORMAL
- en: Now let’s ask a fun question.
  prefs: []
  type: TYPE_NORMAL
- en: '*Where in Central Park are the loudest squirrels?*'
  prefs: []
  type: TYPE_NORMAL
- en: 'There are three fields in the data denoting different noises/calls from a squirrel:
    ‘kuks’, ‘quaas’, and ‘moans’. We’ll say any kind of noise means noisy, and create
    a density map to show us where the loud squirrels are hanging out.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/bc92821f3f73cc43463e5a20dfc14ec2.png)'
  prefs: []
  type: TYPE_IMG
- en: Density map of observations where a squirrel was making sounds. Chart created
    with Plotly.
  prefs: []
  type: TYPE_NORMAL
- en: Looks like the squirrels of the Upper West Side have the most to say.
  prefs: []
  type: TYPE_NORMAL
- en: Final Notes
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There’s a wealth of further data to explore on NYC Open Data, so make sure to
    check it out for yourself. Most large cities also have their own open data programs.
    Notable examples of extensive data programs include [Los Angeles](https://data.lacity.org/),
    [Toronto](https://open.toronto.ca/), [London](https://data.london.gov.uk/), and
    [Singapore](https://beta.data.gov.sg/).
  prefs: []
  type: TYPE_NORMAL
- en: NYC Open Data is public domain and so per the [Open Data FAQs](https://opendata.cityofnewyork.us/faq/)
    “there are no restrictions on the use of Open Data”, including commercial use.
    See the [terms of use](https://opendata.cityofnewyork.us/overview/#termsofuse)
    for further detail.
  prefs: []
  type: TYPE_NORMAL
- en: The code for everything in this post is available on [GitHub](https://github.com/wxbaum/visualizing-nyc),
    and I’ve attached an MIT license to the repo so you can take and use anything
    you want.
  prefs: []
  type: TYPE_NORMAL
