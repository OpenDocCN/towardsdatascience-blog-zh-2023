# 人工智能如何用来预测和解释学生表现？

> 原文：[https://towardsdatascience.com/beyond-grades-using-ai-to-forecast-and-explain-student-performance-23580747e8b0](https://towardsdatascience.com/beyond-grades-using-ai-to-forecast-and-explain-student-performance-23580747e8b0)

## 人工智能能否用来减少留级率并改善教育？

[](https://medium.com/@chrisgalea?source=post_page-----23580747e8b0--------------------------------)[![Christian Galea](../Images/1e4e32ce529f7694422f130897eb071b.png)](https://medium.com/@chrisgalea?source=post_page-----23580747e8b0--------------------------------)[](https://towardsdatascience.com/?source=post_page-----23580747e8b0--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----23580747e8b0--------------------------------) [Christian Galea](https://medium.com/@chrisgalea?source=post_page-----23580747e8b0--------------------------------)

·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----23580747e8b0--------------------------------) ·27分钟阅读·2023年9月18日

--

![](../Images/c7ed926388535f0bf6b0c61eb4495e82.png)

图片由 [Dids](https://www.pexels.com/@didsss/) 提供，来源于 [Pexels](https://www.pexels.com/photo/photo-of-empty-class-room-2675061/)

# 👋 介绍

机器学习（ML）通过使计算机能够从数据中学习和做出决策，已经显著改变了各个行业。从推荐电商网站上的产品到诊断医疗状况，机器学习和人工智能（AI）的应用范围广泛且深远。

机器学习在音频、图像和视频处理中的应用也非常有用。例如，人脸识别和图像质量改进，这些内容在我之前的两篇文章中有所介绍。

[](/what-is-image-super-resolution-and-why-do-we-need-it-9c3bd9dc233e?source=post_page-----23580747e8b0--------------------------------) [## 什么是“图像超分辨率”，我们为什么需要它？

### 该领域的简介、应用及当前问题

towardsdatascience.com](/what-is-image-super-resolution-and-why-do-we-need-it-9c3bd9dc233e?source=post_page-----23580747e8b0--------------------------------) [](/image-super-resolution-an-overview-of-the-current-state-of-research-94294a77ed5a?source=post_page-----23580747e8b0--------------------------------) [## 图像超分辨率：当前研究状态概述

### 对流行技术和剩余挑战的回顾

towardsdatascience.com](/image-super-resolution-an-overview-of-the-current-state-of-research-94294a77ed5a?source=post_page-----23580747e8b0--------------------------------)

最近，大型语言模型（LLMs）如 [ChatGPT](https://chat.openai.com/) 展示了 ML 在自然语言处理（NLP）中的强大能力，这是一种使计算机具备理解文本和语音的能力，与人类相当——有时，甚至比某些人类更强的能力……

在解决问题时，不同的 AI 领域也可以结合在一起。例如，在之前的一篇文章中，我使用了机器学习和 ChatGPT 来预测一个移动游戏应用的用户是否会在接下来的几天内停止玩游戏（这被称为玩家流失问题）：

[](/player-churn-rate-prediction-data-analysis-and-visualisation-part-1-12a9fdff9c10?source=post_page-----23580747e8b0--------------------------------) [## 如何预测玩家流失，借助 ChatGPT 的一些帮助

### 使用低代码平台进行玩家流失预测的数据分析和模型训练

towardsdatascience.com](/player-churn-rate-prediction-data-analysis-and-visualisation-part-1-12a9fdff9c10?source=post_page-----23580747e8b0--------------------------------)

AI 和 ML 在教育领域也有许多应用，这无疑构成了我们日常生活许多方面的基础。毕竟，良好的教育确保了明天的这一代能够引领和推动人类的进步。

尽管其重要性，我常常觉得文章没有充分阐明 AI 和 ML 在教育中的应用，而是更侧重于引人注目和点击诱导的内容。这就是为什么本文将考虑这样一个用例，特别是 ML 如何用于识别可能因学术困难或其他因素如社会经济因素而面临重读风险的学生——并帮助确定其背后的原因。

鉴于全球许多学生即将返回——而一些学生已经返回——他们的学习桌前，这也许是一个相当及时的文章，可以提供关于如何利用 ML 和 AI 改善学生教育的见解。

这种预测能力的意义是巨大的。通过及早识别出有困难的学生，学校可以针对具体需求量身定制干预措施，从而可能避免学生重读一年。这不仅有利于个别学生，还可以使教育机构更有效地分配资源。

从这些模型中获得的见解还可以促进对影响学生表现的各种因素之间复杂相互作用的深入理解。

本文将介绍数据科学家的思考过程以及如何解读任何发现，如下所示：

1.  [🖥️ 配置](#b7ec)

1.  [🗂️ 数据集](#2302)

1.  [🔍 数据探索](#da14)

1.  [🔮 一些预测的时间](#f3d8)

1.  [💯 奖励：我们可以预测实际成绩吗？](#a192)

1.  [⚠️ 伦理和教学关注](#6bfe)

1.  [🗒️ 结论](#a3a9)

1.  [📚 参考文献](#e2ad)

# 🖥️ 配置

如上所述，之前的文章中使用了一个低代码机器学习平台进行流失预测 [a previous article](https://medium.com/towards-data-science/player-churn-rate-prediction-data-analysis-and-visualisation-part-1-12a9fdff9c10)。在这篇文章中，我将使用一个不同的平台 [Dataiku](https://www.dataiku.com/)，该平台也旨在使数据科学和机器学习变得简单——特别是对那些可能不太熟悉像 Python 这样的编程语言的人。

提供了一个免费层，实际上提供了大多数功能，尽管它需要在你自己的计算机上本地安装（这可能是好事也可能是坏事，取决于你的看法）。

请注意，Dataiku Science Studio (DSS) 仅作为实验版本提供用于测试目的，支持 [Windows](https://www.dataiku.com/product/get-started/windows/)，在撰写本文时尚未正式支持。完整的警告列表可以在 Dataiku 文档 [这里](https://doc.dataiku.com/dss/latest/installation/other/windows.html) 中找到。

当你启动 Dataiku DSS 时，你应该会看到类似这样的界面（但没有我正在处理的项目和条目）：

![](../Images/892d841474d593b870dc6b0202adf21c.png)

Dataiku DSS 的主屏幕。图片由作者提供。

# 🗂️ 数据集

我们将使用的数据集基于 UCI 机器学习库中的一个名为‘学生表现’ [1] 的数据集，拥有 CC BY 4.0 许可证。许多用于演示机器学习工具和应用的经典数据集都来源于 UCI 库，因此这是一个值得与其他平台如 [Kaggle](https://www.kaggle.com/) 一起考虑的重要数据来源。

[](https://archive.ics.uci.edu/dataset/320/student+performance?source=post_page-----23580747e8b0--------------------------------) [## UCI 机器学习库

### 发现全球的数据集！

archive.ics.uci.edu](https://archive.ics.uci.edu/dataset/320/student+performance?source=post_page-----23580747e8b0--------------------------------)

这个数据集实际上用于 Dataiku 培训和认证的一个评估中，也可以通过点击 +New Project > DSS Tutorials > ML Practitioner > ML Practitioner Assessment 直接在 Dataiku 中找到。

数据集中包含关于四所学校（GP、LT、MS、RC）的信息，包括：

+   学生特征，如学习时间、空闲时间、缺勤次数。

+   地理和社会经济指标，如通勤时间、家庭互联网接入、父母婚姻状态。

我们的数据集中有许多特征，但主要关注的特征包括以下内容：

+   `school`: 学生的学校名称（即 GP、LT、MS、RC 之一）

+   `failures`: 过去的班级失败次数

+   `grade`: 学生的成绩（例如，来自考试或其他评估）

+   `repeated`：学生是否需要重复学年。这是我们希望预测的*目标变量*。因此，这是一项二元分类问题，其中“正类”是学生重复学年，“负类”是无需重复学年的学生。

所有特征的详细描述可以在上面链接的UCI网站上查看。

# 🔍 数据探索

在考虑对数据做任何处理之前，你应该首先理解数据——不仅要了解特征表示的内容，还要探索和分析它们的特性。

让我们首先查看对最重要特征的单变量分析：

![](../Images/2d4f8c8f790137f4fe33d4926027495c.png)

我们数据集中四个重要变量的单变量分析。图片作者提供。

已经可以观察到很多内容：

+   `school`：每所学校的样本数量明显不平衡，GP和RC占样本的大多数（总数的61%）。属于LT和MS的样本明显较少。

+   `failures`：大多数学生（占总数的79%）似乎没有过去的失败记录。其余的学生有1到3次失败记录。

+   `grade`：一半的学生（50%）获得了10.0、12.0或13.0的成绩。

+   `repeated`：这是我们希望预测的特征，理想情况下应该是平衡的，以帮助减少机器学习模型对某个类别的偏好。不幸的是，这个特征往往是不平衡的——结果显示有兴趣的类别是代表性不足的：仅30%的数据代表学生重复学年的情况。这将使得进行高精度预测变得更困难，因此在设计ML模型时也需要记住这一点。

让我们超越单独考虑每个变量的范围，查看学校与成绩之间的互动：

![](../Images/fc2bee0f2c8b57345585cd26793342f7.png)

关于‘学校’和‘成绩’特征的频率表和马赛克图。图片作者提供。

在上图中，我们可以看到每所学校的前五个最常见成绩的样本数量（其余成绩被归类为“其他”），这两者在下方的频率表和相应的马赛克图中展示。这些图表基本上展示了相同的信息，但方式不同——表格显示原始值，而马赛克图则以视觉形式展示相同的数字。

我们还可以使用直方图来显示每所学校的每个成绩的频率：

![](../Images/aff01d0583587b35b886cc6a5487be4c.png)

按‘学校’划分的‘成绩’直方图。学校LT具有最高的均值和中位数成绩，而RC的平均成绩最低。图片作者提供。

从这些可视化图中，很明显不同学校之间存在一些差异。例如，似乎LT学校的平均和中位数成绩最高，而RC学校的平均成绩最低。这让我们质疑学校与学生成绩之间是否存在某种关系。让我们使用[卡方独立性检验](https://en.wikipedia.org/wiki/Chi-squared_test)来测试一下：

![](../Images/6e8374d57258fba44458f02d06ac097d.png)

卡方独立性检验。图片由作者提供。

测试的假设是`学校`和`成绩`是独立的。然而，测试结果显示在给定的置信水平0.05下，应当拒绝这一假设。换句话说，`学校`和`成绩`*不是*独立的。

这也许并不令人惊讶，因为我们期望不同学校的教育水平不同。然而，我们已经客观地证明了这一点（至少对于这个特定的数据集而言）。

鉴于上述情况，发现不同学校之间重修学生数量的差异也并不令人惊讶：

![](../Images/e64c87e439edb60eabd5a613468fdb07.png)

根据学生是否需要重修一年的情况对学校进行的单变量分析。图片由作者提供。

从上面的图像中观察到的一点是，RC学校有更高比例的学生需要重修一年。然而，这也是一个在查看统计数据时需要小心的例子——除了原始数字和百分比，我们还应该记住每所学校的总学生人数不同。

换句话说，学生人数较多的学校更有可能有更多的学生需要重修一年，仅仅因为有更多的学生。

举个简单的例子。假设学校A有20名学生需要重修一年，而学校B有200名学生需要重修一年。人们可能会说学校B比学校A差得多。然而，我们后来发现学校A有100名学生，而学校B有1000名学生。这意味着两所学校的重修率都是20%。显然，总学生人数也需要考虑在内。

在我们的案例中，考虑到每所学校的总学生人数不会改变观察结果太多，但在其他应用中仍然需要考虑。

到目前为止，我们对一些最重要的特征和需要注意的问题有了相当好的了解。是时候训练一些机器学习模型并做出预测了！

# 🔮 预测时间

机器学习模型通过进入Dataiku DSS的“实验室”部分进行训练，在那里我们可以配置要训练的模型及其超参数和全局设置。

为了简化起见，所有默认设置均保留（主要是将使用默认超参数设置训练逻辑回归模型和随机森林模型），除了优化度量标准——如前所述，我们的目标特征非常不平衡。这意味着度量标准的选择至关重要，因为一个模型可能在准确率等指标上获得很高的值。

正如在 [另一篇文章](/player-churn-rate-prediction-data-analysis-and-visualisation-part-1-12a9fdff9c10) 中讨论的那样，预测玩家流失的原因非常简单——一个模型可能倾向于预测最主导的类别，以至于它在大多数情况下都是正确的——即使它错误地预测了属于另一类别的*所有*样本，因为这些样本数量不多，不会显著影响性能！你可以在 [Baptiste Rocca](/handling-imbalanced-datasets-in-machine-learning-7a0e84220f28) 和 [Jason Brownlee](https://machinelearningmastery.com/failure-of-accuracy-for-imbalanced-class-distributions/) 的两篇精彩文章中阅读更多相关内容。

为了实现这一点，[接收器操作特征曲线下面积 (AUC ROC) ](https://developers.google.com/machine-learning/glossary#auc-area-under-the-roc-curve) 是一个更好的选择，可以最小化类别不平衡的影响。其值范围从 0 到 1（后者为完美分数）。

模型训练后，获得了以下结果：

![](../Images/f93cd15f18b0a8c62111b110cf534efe.png)

训练模型的结果。图像由作者提供。

*天哪!* 看到两个模型都获得了完美的 AUC 和 F1 分数 1.0，这可能是你的第一反应！

然而，我担心消息并不那么乐观——实际上 Dataiku DSS 询问“这可能是真的吗？” 不幸的是，任何模型在任何数据集上获得完美分数都是非常困难的，除非它是一个非常简单的、很可能是合成生成的数据集。因此，当你看到如此高的分数时，你应该立即对为什么会发生这种情况产生一些怀疑。

在这种情况下，这是因为一种叫做 [*数据泄露*](https://machinelearningmastery.com/data-leakage-machine-learning/) 的现象，即在训练集之外可能无法获得的信息——即在将模型应用于新未见过的数据时——被用来训练和创建模型。

我们可以通过查看随机森林模型中最重要的变量和逻辑回归模型中的顶级系数来获取一些线索。这两者都指示了在预测结果时哪些变量被赋予了最多的权重——即最重要性。

从上面的图像可以观察到，`grade` 排在两个模型列表的最上面。这意味着 `grade` 对于模型做出正确预测非常重要。

结果表明，`repeated`列（我们试图预测的那一列）是基于`grade`的！难怪模型表现良好——`grade`包含了直接得出我们目标变量所需的所有信息。

如果你考虑一下，这确实有意义——要确定一个学生是否需要重复学年，你自然会查看他们的成绩；如果成绩太低，这意味着他们没有学到足够的东西，重复课程会对他们有帮助。因此，在实际操作中，我们会根据学生的成绩来决定是否需要重复学年。

然而，我们显然无法提前知道它们的成绩，这也意味着这个特征不应该用于训练我们的模型——我们只应使用在学年期间可以使用的特征。

让我们丢弃`grade`特征，并重新训练我们的模型：

![](../Images/f2df7a22848f3ec4fb83a46e006bc860.png)

未使用‘grade’特征训练的模型结果。图片来源：作者。

啊，这样好多了！也许很奇怪，我们对模型表现得**更差**的情况感到满意，正如下面表格所示，总结了不同评估指标下模型的表现：

![](../Images/9a253aa51c9c1e87bc50fe31ec1ced99.png)

四个训练模型的结果。前两个模型使用了‘grade’特征，底部两个模型没有使用‘grade’特征。图片来源：作者。

如所观察到的，新模型通常比旧模型表现更差，但它们在现实世界中实际上是可用的。就AUC而言，最佳模型是随机森林，得分为0.922。尽管在召回率方面不如逻辑回归，但在准确率和精度方面更好。

这意味着，考虑到所有应被预测为需要重复学年的学生（‘正类’），随机森林模型错误地预测了更多的学生（比逻辑回归更多）为不需要重复学年。然而，随机森林模型更高的精度也意味着它较少出现假阳性，即错误地预测学生需要重复学年，而实际上他们不需要。

我们也可以在[混淆矩阵](https://en.wikipedia.org/wiki/Confusion_matrix)中清楚地观察到这种行为：

![](../Images/c4d27d678a12a1ff348add9e93f9ac8d.png)![](../Images/8ee4c313798cbf8484c9a2f19a724ca3.png)

随机森林模型（左）和逻辑回归模型（右）的混淆矩阵。‘1’表示学生需要重复学年，而‘0’表示学生不需要重复学年。图片来源：作者。

除了上面提到的[Baptiste Rocca](/handling-imbalanced-datasets-in-machine-learning-7a0e84220f28)的文章外，我还邀请你查看[Koo Ping Shung](/accuracy-precision-recall-or-f1-331fb37c5cb9)的文章，以获取更多关于准确性、精确度、召回率和F1的信息。

最好的模型真的取决于学校的需求——谨慎些，标记那些可能不需要重读一年（从而倾向于逻辑回归模型），还是避免过多的错误预测及其可能带来的后果，如资源浪费和烦恼的家长（从而选择随机森林模型）？

我可能会倾向于谨慎一些，选择逻辑回归模型，因为我知道可能有些学生实际上不需要重读一年。然而，这将给我一个机会来关注这些学生，然后手动重新评估是否需要让学生重读一年。毕竟，大多数机器学习模型确实需要某种形式的人工干预，以充分发挥其能力。

但是，请记住，只有两种类型的模型被训练，几乎没有对其超参数进行优化。因此，预计可以获得更好的性能。

希望你能认识到理解模型的重要性，而不是仅仅依据一个性能指标盲目使用它们——通常情况下，每个模型都有其优缺点，选择哪个模型取决于应用场景和你的需求。这是[可解释人工智能（XAI）](https://en.wikipedia.org/wiki/Explainable_artificial_intelligence)的一部分，它在不断增加的AI应用数量下变得越来越相关——也越来越必要。

我们可以做几种其他分析来更好地理解我们的模型，其中一些可能是针对所用模型类型的。然而，我会专注于两个重要的方面，以简化问题（并简洁！）。

第一个是*变量重要性*，我们在调查数据泄漏时实际上已经提到过。你可能还记得，这告诉我们模型在进行预测时优先考虑哪些特征，并给予哪些特征最多的“权重”。除了理解模型如何工作，它还帮助我们理解什么因素实际上会影响学生是否需要重读一年。

让我们关注在AUC方面表现最好的模型，即随机森林模型：

![](../Images/b74fce870acc4a9f1eab918b50b285d0.png)

随机森林模型的变量重要性。图片由作者提供。

如所示，最重要的变量（差距相当大）是‘学校是 RC’和‘失败次数’。这很有道理——我们之前观察到，学校 RC 的平均成绩较低，这意味着学生在取得好成绩方面遇到更多困难，并且面临更高的考试和评估失败风险。现在我们有一些更客观和明确的证据来支持我们最初的观察。

说到失败，将其列在首位也是有道理的，因为较高的失败次数表明学生在学习和理解课程内容方面确实遇到困难。

相比之下，其余变量的重要性相对较低，但当然它们仍然是相关的。第三和第四个变量也与学校有关，而第五个变量可能有些令人惊讶 — `Medu`。这指的是母亲的教育水平，它似乎起到了一定的作用。

为了更好地理解这些特征如何实际影响预测，我们可以查看部分依赖图（PDP）。这些图是通过基本上冻结样本中所有特征的值，然后仅变化感兴趣的特征来计算的。

特征的变化（在保持其他特征固定的情况下）显示其与结果的关系，例如是否是线性或单调的。更技术性地说，部分依赖性表示特征对机器学习模型预测结果的平均边际效应[2]。更多细节可以在 Christoph Molnar 的指南中找到 [这里](https://christophm.github.io/interpretable-ml-book/pdp.html)。

PDP 是通过所有样本计算并取平均的。每个样本的计算结果生成个体条件期望（ICE）图，以便进行更细粒度的分析（按学生层面）。

让我们考虑一个（应该是）相当直接的特征——学习时间。在查看数据或结果之前，我们可以直观地预期，学生重复学年的机会会随着学习时间的增加而减少，对吗？让我们看看`studytime`的 PDP 是否符合这一预期：

![](../Images/4263b66d002b360db5d7bfdea3d39ec8.png)

学习时间的 PDP。图像来源：作者。

显然，随着学习时间的增加，对结果的影响会减少。也就是说，学生重复学年的可能性确实因更高的学习时间而减少。如前所述，这可能是显而易见的，但拥有一些客观证据来进行合理性检查还是很好的。了解发生了什么总是很重要的，而不是盲目相信计算机的输出——记住，“垃圾进，垃圾出”！

然而，有两点需要注意：

1.  首先，部分依赖性的值相对较低，这意味着学习时间对结果的影响可能并不大。这是可以预期的，因为`studytime`被赋予了相对较低的重要性。

1.  其次，除了部分依赖性外，还展示了训练集中特征值的分布。我们应当对训练集中只有少量样本的特征值保持谨慎，因为我们实际上是在训练数据的区域外得出结论（外推）。

现在让我们看看`Medu`：

![](../Images/35e5c937ae44c31ddf6931fc787c2977.png)

母亲教育水平的PDP。图片来源：作者。

尽管其效应的幅度略高于`studytime`，但仍然相对较低。然而，仍然可以观察到，母亲的教育水平提高时，学生需要留级的可能性趋于减少。

当教育水平超过3（中等教育）且等于4（高等教育）时，会出现特别显著的下降。这背后的解释可能是，教育水平较高的母亲在孩子遇到困难时（例如做作业时）会更有能力提供帮助。

最后，让我们查看学校的PDP：

![](../Images/a30c46fa5ea61763873a71429e591346.png)

学校的PDP。图片来源：作者。

学校是模型中最重要的变量，因此在不同学校之间会看到一些较大的差异。特别是，学校RC往往增加学生需要留级的可能性，而学校LT则基本上相反。这些观察结果再次与我们之前的分析一致。

我们将通过检查模型在测试集上的表现来总结这一部分，即模型在训练过程中未见过的一组样本：

![](../Images/950649ecfb9ef147dca40b46faabf000.png)

最佳分类模型在测试集上的表现。图片来源：作者。

结果与在验证集上计算的结果相似，表明模型在不同样本集之间的表现相当一致。尽管结果不是完美的，但鉴于我们几乎没有对使用的模型或其参数进行优化，结果仍然相当不错。值得注意的是，精确度和召回率比较平衡，准确率为0.851。然而，考虑到数据集的不平衡，AUC值为0.915更具参考意义。

让我们看看模型在不同学校之间的表现，通过计算一个新的特征叫做`prediction_correct`，该特征简单地检查预测值是否与已知（真实）值匹配：

![](../Images/bd270852a60bd60269669b7a4a6876ed.png)

各学校正确（和错误）预测的分布。图片来源：作者。

看起来模型在各学校之间的表现非常相似，不过它似乎在学校MS的表现最好（96%的样本预测正确），在学校RC的表现最差（75%的样本预测正确）。

但如果我们想知道模型在哪里出现了问题呢？是在预测学生是否需要重复一年时，还是在预测学生*不*需要重复一年时？也就是说，模型的表现是否在预测类别之间以及不同学校之间有显著差异？

让我们进行子群体分析，从而计算各个学校的指标：

![](../Images/9360287a2ceb203bb39b0c22f7ad877a.png)

跨学校的子群体分析。图片由作者提供。

此外，让我们计算每个目标类别和每个学校的正确预测数量的直方图：

![](../Images/45aa097f036fc744e12dd4a36d508e3b.png)

按学校划分的每个类别（学生是否重复一年）的正确预测数量。蓝色条形表示正确预测，橙色条形表示错误预测。图片由作者提供。

主要观察结果包括：

1.  在各个学校中，样本数量较多的类别（多数类）预测得较好。这包括GP、LT和MS中的类别‘0’（学生不需要重复一年），以及RC中的类别‘1’（学生需要重复一年）。MS的样本几乎被完全预测正确。

1.  少数类（即学校RC的‘0’，其他学校的‘1’）的差异更为显著。对于GP和LT，正确预测的样本数量几乎等于错误预测的样本数量。对于MS，大多数样本被正确预测。

1.  除了上面的（2），学校RC的错误预测样本数量高于其他学校（如前所述）。然而，也可以观察到，少数类（‘0’）的错误样本数量高于正确预测的数量。

学校RC的观察结果可能是由于（a）RC的少数类样本比其他学校的少数类样本多（即RC的样本分布不同），以及（b）RC与其他学校相比是一个‘异常值’，因为它有更多需要重复一年学生。这意味着模型可能已经学习了如何在其他学校（样本数量较多）上表现良好，而在RC上的表现则较差。因此，模型可能需要调整以更好地适应这个学校的样本。

# 💯 奖金：我们能预测实际的分数吗？

在上述所有情况下，我们训练了一个分类模型来预测学生是否需要重复一年。但如果我们想知道实际的分数呢？毕竟，分数也可以用来判断学生是否需要重复一年。

那么问题就变成了——预测分数是否更好，然后通过应用一个阈值将其转化为二元分类问题？

如前所述，学生是否需要重读一年直接基于成绩——如果成绩低于10，则需要重读一年；否则则不需要。因此，我们也可以训练一个回归模型，然后创建一个新特征，将低于10的成绩转换为‘1’（学生需要重读一年），否则转换为‘0’。

所以，让我们尝试一下！我在Dataiku中快速训练了几个回归模型，结果如下：

![](../Images/3841b5eee7ef145f15fbdd7ebe76a6e4.png)

回归模型的表现。图片来源：作者。

随机森林模型的表现远优于普通最小二乘（OLS）模型，即使它仍然不出色。然而，可以训练更多模型，我们也没有调优任何参数来提高性能，因此这些结果对于第一次尝试来说相当不错。

在上面用于分类模型的相同测试集上的结果如下：

![](../Images/cf91ba256cb5fbbeca5d4daab9eb9862.png)

最佳回归模型在测试集上的表现。图片来源：作者。

这些结果与上面的结果相似，验证了我们在训练过程中看到的结果与在实际未见数据上部署模型时可能会看到的结果是一致的。虽然结果并不出色，但也不算太差——例如，平均绝对误差表明预测成绩的误差平均为+/- 1.2。

现在，让我们创建一个新的二元特征，其中低于10的成绩表示学生需要重读一年，而成绩大于或等于10则不需要重读一年。这使得结果与我们之前处理的二元分类情况类似。让我们查看结果：

![](../Images/5b7d04071bfb8c5496c43aec41e418f5.png)

使用预测成绩来判断学生是否需要重读一年时，回归模型的表现。图片来源：作者。

应注意，有些结果不可用，例如ROC。然而，这些需要类别概率，而我们显然没有，因为我们对预测的数值成绩使用了简单的阈值。

可以观察到，我们拥有的指标的表现整体上不如分类情况。你可以说这在意料之中——毕竟，直接进行分类不是比先进行回归再进行二值化更好么？

实际上，不应该有很大差异——毕竟，成绩与是否需要重读一年之间有非常简单明了的关系。实际上，如果我们考虑准确率，差异并不大（0.82对比0.85），而F1分数也相当接近（0.74对比0.77）。

由于我们没有训练多种模型，也没有进行任何形式的参数/超参数优化，因此我们预计分类和回归模型的性能会有所提升。

然而，我们可以说的是，可以同时执行这两个任务——即预测学生是否需要重复一年及其相关概率，或者预测成绩（然后可以用来判断学生是否需要重复一年）。

最后，让我们检查一下这种第二种方法是否对任何类型的预测或学校存在失败情况，类似于我们对分类模型所做的：

![](../Images/d385935c7ca18f468ed135e910c1fea3.png)

每个类别的正确预测数量（无论学生是否需要重复一年），按学校分类。图片由作者提供。

对分类模型可以做出类似的观察，尽管误分类样本的数量较高（鉴于上述讨论的较低性能指标值，这是可以预期的）。或许有趣的是，学校RC的类别‘0’的误分类样本数量现在略低于正确分类样本的数量。

# ⚠️ 伦理和教育关注

拥有可以预测学生是否需要重复一年或者预测他们成绩的机器学习模型当然很好，但我们真的可以信任它们吗？如果预测不准确，会有什么影响？我们是否愿意让机器学习做出这样关键的决策？

## 透明性

主要关注之一是预测模型使用的透明性。教育机构必须向教育工作者和学生提供有关这些模型如何运作、依赖什么数据以及如何做出预测的清晰信息。透明的沟通有助于建立信任，使个人更好地理解决策过程。

这也是为什么我们进行了大量分析，并试图理解模型是如何运作的，以及它如何使用我们的特征（并且这是否有意义）。虽然一些模型（特别是基于深度学习的模型）往往是‘黑箱’，内部运行情况不明，但我们发现仍有一些工具可以帮助揭示其内部运作情况。

## 偏见缓解与反馈循环

另一个关键方面是缓解数据和模型中固有的偏见。偏见可能会加剧不平等，因此积极识别和纠正这些偏见是至关重要的。定期审计模型的预测以检查偏见是确保公平性的必要措施。换句话说，我们应当持续监测模型的预测，以确保它们保持任何期望的特征和行为。

我们还应采取措施对抗已知的偏见来源。例如，如果目标特征不平衡（如本案例所示），我们可以使用不同的评估指标，如ROC AUC，并调整决策阈值，以适应我们的要求，例如改善少数类别的性能或减少假阴性（错误预测学生不需要重读一年）。

此外，输入特征的分布可能随时间变化，从而导致预测性能下降，这个问题被称为数据漂移。因此，模型可能需要使用新数据进行重新训练，以确保其保持相关性和令人满意的性能。

拥有这样的反馈循环对于持续改进至关重要。通过收集预测结果的数据，机构不仅可以优化其模型，还能解决任何意外问题，并随着时间的推移提高其准确性和公平性。

## 人工监督

如前所述，人工监督仍然不可或缺，以防止过度依赖自动预测。这不仅适用于数据分析、模型选择和所选模型的运行情况，也适用于任何决策。

确实，教育决策——如是否重读一年或提供额外支持——应包括能考虑更广泛背景的教育者，包括学生的整体进展、潜力和个人情况。这可以通过使用如Shapley值或个体条件期望（ICE）图等工具来促进：

![](../Images/f5157f2390c800225323bb8615ef55b6.png)

特定学生的三个最强特征的Shapley值。失败次数（3）、学校（RC）以及学生不愿意继续接受高等教育，都导致了该学生极有可能会重读学年。

归根结底，教育者与学生在日常互动中建立的关系是机器无法复制的，这要求对模型输出进行人工分析。在如此敏感的应用中，ML应作为助手或顾问，而不是完全的决策者。

## 提升ML模型性能

还有几种方法可以进一步改进并帮助最大化任何训练过的ML模型的性能。例如，收集更全面和准确的数据至关重要。机构必须投资于数据收集系统，这些系统可以捕捉学生表现的全景视图，包括学术和非学术因素。数据越多，ML模型预测任何期望结果的能力就越强。

对更复杂的算法（及其超参数）和特征工程技术的实验也是提高模型预测能力所必需的。如在[之前的文章](/player-churn-rate-prediction-data-analysis-and-visualisation-part-1-12a9fdff9c10)中观察到，特征工程可以显著提升模型性能。这也是为什么了解数据并进行彻底探索至关重要，因为这将使我们能够确定可以生成哪些新特征。

## 验证

为了评估模型的泛化能力，进行稳健的验证是至关重要的，它确保模型在不同的人群和教育背景下表现一致。在我们的案例中，对两个不同数据集（从同一数据集中提取）进行评估表明，两个案例中的表现非常相似。另一方面，一个过拟合训练集的模型在其他数据集上的表现会大幅下降，这会促使采取行动（例如，使用更多的数据和更简单的模型）。

## 长期影响评估

进行长期研究以评估在教育环境中使用预测模型的影响至关重要。这些研究可以帮助我们了解这些工具如何影响学生的成果，以及它们是否真正有助于改善教育成果。它们还可以帮助我们确定什么样的性能水平是可以接受的，以增加对机器学习模型的依赖。例如，可能会确定只有当AUC ROC超过0.95时，才会考虑机器学习模型。

# 🗒️结论

这篇文章考虑了数据科学、机器学习、人工智能与教育的融合。具体来说，我们看到如何应用数据科学和机器学习来预测学生表现。这是通过两种方式完成的：

1.  使用分类预测学生是否需要重复学年

1.  使用回归预测学生的成绩

我们还看到如何将这两种方法结合起来，首先预测成绩，然后基于成绩应用阈值来确定哪些学生需要重复一年。

在性能方面没有明确的胜者，因为我们没有进行任何优化（无论是分类情况还是回归情况）。然而，这确实展示了预测和分析执行方式的灵活性，同时还需要考虑学校的具体要求。

我们还进行了相当多的分析——无论是在训练机器学习模型之前，还是之后。这是为了理解数据和训练后的模型。特别是，我们考虑了多个指标来确定每个模型的优点（和缺点），以帮助我们确定哪个模型最适合我们的需求，并观察哪些特征在预测结果中最为重要。这也帮助教育者理解影响学生表现的最重要因素，并采取措施最大化学生学习效果。

当然，还可以进行更多的分析。然而，这个案例研究中所做的分析已经提供了很多有用的见解。此外，还可以进行其他类型的机器学习方法，例如 [因果推断](https://en.wikipedia.org/wiki/Causal_inference)（建模处理变量有无效应的结果差异，其它条件相同）。

希望这能体现数据科学家需要处理的信息的广度。

整篇文章中使用了 Dataiku DSS 软件，具有以下优缺点：

**✔️ 优点：**

+   功能非常丰富（而且我们甚至没有探索它的所有功能）。

+   界面友好且响应迅速，这意味着那些对 Python 等编程语言不太自信的人也能很容易地执行数据科学和机器学习任务。

+   可以在本地计算机上运行，确保您的数据隐私得到保护。

+   大多数功能是完全免费的（那些不免费的主要是面向企业用户的，例如支持的用户数量和数据库连接类型）。

**❌ 缺点：**

+   大量的功能也可能使平台使用起来有些压倒性。然而，提供了教程来介绍新用户使用平台及其几个数据科学方面的知识。

+   Dataiku DSS 目前尚未在 Windows 机器上正式支持，这令人遗憾，因为这种操作系统非常普遍。

总的来说，我认为这个平台对数据科学家非常有用，无论他们是否熟悉编程。对于那些了解 Python 或 R 等语言的人来说，Dataiku DSS 可能会使某些任务变得更简单、更快捷。自定义函数也可以直接在平台内编写，增强了平台的灵活性和执行更高级任务的能力。

希望这篇文章让您读得很有趣！请随时留下任何反馈或问题，并记得[关注](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa9be78db0c9b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplayer-churn-rate-prediction-data-analysis-and-visualisation-part-1-12a9fdff9c10&user=Christian+Galea&userId=a9be78db0c9b) 我，并[注册接收电子邮件更新](https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F416973f06c74&operation=register&redirect=https%3A%2F%2Fmedium.com%2F%40chrisgalea&newsletterV3=a9be78db0c9b&newsletterV3Id=416973f06c74&user=Christian+Galea&userId=a9be78db0c9b) 以确保您在未来文章发布时会收到通知。

# 📚 参考文献

[1] P. Cortez 和 A. Silva. “利用数据挖掘预测中学学生表现。” 收录于 A. Brito 和 J. Teixeira 编，《第五届未来商业技术会议（FUBUTEC 2008）论文集》第 5–12 页，葡萄牙波尔图，2008 年 4 月，EUROSIS，ISBN 978–9077381–39–7。

[2] J.H. Friedman, “贪婪函数逼近：一种梯度提升机器。”《统计年鉴》（2001）：1189–1232。

![](../Images/9b800d9a965cfbb1a33f23e4d154787b.png)

图片来源：[Pixabay](https://www.pexels.com/photo/application-blur-business-code-270408/)

📝 *对这篇文章有什么想法吗？请随时在* [*LinkedIn*](https://www.linkedin.com/in/cgalea) *上发布留言、评论或直接给我发消息！*

📧 *请务必* [***关注***](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa9be78db0c9b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplayer-churn-rate-prediction-data-analysis-and-visualisation-part-1-12a9fdff9c10&user=Christian+Galea&userId=a9be78db0c9b) *我的 Medium 个人资料，并* [***注册接收电子邮件更新***](https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F416973f06c74&operation=register&redirect=https%3A%2F%2Fmedium.com%2F%40chrisgalea&newsletterV3=a9be78db0c9b&newsletterV3Id=416973f06c74&user=Christian+Galea&userId=a9be78db0c9b) *以确保您在未来文章发布时会收到通知。*

[## Medium

### 在 Medium 上关注我！

medium.com](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fa9be78db0c9b&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fplayer-churn-rate-prediction-data-analysis-and-visualisation-part-1-12a9fdff9c10&user=Christian+Galea&userId=a9be78db0c9b&source=post_page-----23580747e8b0--------------------------------)

📚 *查看我的* [*其他 Medium 文章*](https://medium.com/@chrisgalea)*：*

[](https://medium.com/@chrisgalea?source=post_page-----23580747e8b0--------------------------------) [## Christian Galea — Medium

### 阅读 Christian Galea 在 Medium 上的文章。博士后研究员，计算机视觉与机器学习（特别是……）

[medium.com](https://medium.com/@chrisgalea?source=post_page-----23580747e8b0--------------------------------)
