- en: Beyond Churn Prediction and Churn Uplift
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è¶…è¶Šæµå¤±é¢„æµ‹å’Œæµå¤±æå‡
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/beyond-churn-prediction-and-churn-uplift-45225e5a7541](https://towardsdatascience.com/beyond-churn-prediction-and-churn-uplift-45225e5a7541)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/beyond-churn-prediction-and-churn-uplift-45225e5a7541](https://towardsdatascience.com/beyond-churn-prediction-and-churn-uplift-45225e5a7541)
- en: '[CAUSAL DATA SCIENCE](https://towardsdatascience.com/tagged/causal-data-science)'
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[å› æœæ•°æ®ç§‘å­¦](https://towardsdatascience.com/tagged/causal-data-science)'
- en: How to best target policies in the presence of churn
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¦‚ä½•åœ¨å­˜åœ¨æµå¤±çš„æƒ…å†µä¸‹æœ€ä½³åœ°é’ˆå¯¹æ”¿ç­–
- en: '[](https://medium.com/@matteo.courthoud?source=post_page-----45225e5a7541--------------------------------)[![Matteo
    Courthoud](../Images/d873eab35a0cf9fc696658c0bee16b33.png)](https://medium.com/@matteo.courthoud?source=post_page-----45225e5a7541--------------------------------)[](https://towardsdatascience.com/?source=post_page-----45225e5a7541--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----45225e5a7541--------------------------------)
    [Matteo Courthoud](https://medium.com/@matteo.courthoud?source=post_page-----45225e5a7541--------------------------------)'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@matteo.courthoud?source=post_page-----45225e5a7541--------------------------------)[![Matteo
    Courthoud](../Images/d873eab35a0cf9fc696658c0bee16b33.png)](https://medium.com/@matteo.courthoud?source=post_page-----45225e5a7541--------------------------------)[](https://towardsdatascience.com/?source=post_page-----45225e5a7541--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----45225e5a7541--------------------------------)
    [Matteo Courthoud](https://medium.com/@matteo.courthoud?source=post_page-----45225e5a7541--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----45225e5a7541--------------------------------)
    Â·12 min readÂ·Jul 25, 2023
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----45225e5a7541--------------------------------)
    Â·é˜…è¯»æ—¶é—´12åˆ†é’ŸÂ·2023å¹´7æœˆ25æ—¥
- en: --
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/af36704bf3fd645df857033ca3b5e3a6.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/af36704bf3fd645df857033ca3b5e3a6.png)'
- en: Cover, image by Author
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: å°é¢ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: A very common task in data science is *churn prediction*. However, predicting
    churn is often just an intermediate step and rarely the final objective. Usually,
    what we actually care about is **reducing churn**, which is a separate objective,
    not necessarily related. In fact, for example, knowing that long-term customers
    are less likely to churn than new customers is not an actionable insight since
    we cannot increase customersâ€™ tenure. What we would like to know instead is how
    one (or more) treatment impacts churn. This is often referred to as **churn uplift**.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®ç§‘å­¦ä¸­çš„ä¸€ä¸ªéå¸¸å¸¸è§çš„ä»»åŠ¡æ˜¯*æµå¤±é¢„æµ‹*ã€‚ç„¶è€Œï¼Œé¢„æµ‹æµå¤±å¾€å¾€åªæ˜¯ä¸€ä¸ªä¸­é—´æ­¥éª¤ï¼Œå¾ˆå°‘æ˜¯æœ€ç»ˆç›®æ ‡ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å®é™…å…³å¿ƒçš„æ˜¯**å‡å°‘æµå¤±**ï¼Œè¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç›®æ ‡ï¼Œä¸ä¸€å®šç›¸å…³ã€‚äº‹å®ä¸Šï¼Œä¾‹å¦‚ï¼ŒçŸ¥é“é•¿æœŸå®¢æˆ·æ¯”æ–°å®¢æˆ·æ›´ä¸å®¹æ˜“æµå¤±å¹¶ä¸æ˜¯ä¸€ä¸ªå¯æ“ä½œçš„è§è§£ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•å¢åŠ å®¢æˆ·çš„ç•™å­˜æ—¶é—´ã€‚æˆ‘ä»¬æƒ³çŸ¥é“çš„æ˜¯æŸä¸€ï¼ˆæˆ–å¤šç§ï¼‰æªæ–½å¦‚ä½•å½±å“æµå¤±ã€‚è¿™é€šå¸¸è¢«ç§°ä¸º**æµå¤±æå‡**ã€‚
- en: 'In this article, we will be going **beyond** both churn prediction and churn
    uplift and consider instead the ultimate goal of churn-prevention campaigns: **increasing
    revenue**. First of all, a policy that reduces churn might also have an impact
    on revenue, which should be taken into account. However, and more importantly,
    increasing revenue is relevant only if the customer does not churn. Vice-versa,
    decreasing churn is more relevant for high-revenue customers. This **interaction**
    between churn and revenue is critical in understanding the profitability of any
    treatment campaign and should not be overlooked.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†**è¶…è¶Š**æµå¤±é¢„æµ‹å’Œæµå¤±æå‡ï¼Œè½¬è€Œè€ƒè™‘æµå¤±é¢„é˜²æ´»åŠ¨çš„ç»ˆæç›®æ ‡ï¼š**å¢åŠ æ”¶å…¥**ã€‚é¦–å…ˆï¼Œå‡å°‘æµå¤±çš„æ”¿ç­–å¯èƒ½ä¹Ÿä¼šå¯¹æ”¶å…¥äº§ç”Ÿå½±å“ï¼Œè¿™åº”äºˆä»¥è€ƒè™‘ã€‚ç„¶è€Œï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå¢åŠ æ”¶å…¥åªæœ‰åœ¨å®¢æˆ·ä¸æµå¤±çš„æƒ…å†µä¸‹æ‰æ˜¯ç›¸å…³çš„ã€‚ç›¸åï¼Œå‡å°‘æµå¤±å¯¹é«˜æ”¶å…¥å®¢æˆ·æ›´ä¸ºç›¸å…³ã€‚è¿™ç§æµå¤±ä¸æ”¶å…¥ä¹‹é—´çš„**äº’åŠ¨**åœ¨ç†è§£ä»»ä½•æªæ–½æ´»åŠ¨çš„ç›ˆåˆ©æ€§æ—¶è‡³å…³é‡è¦ï¼Œä¸åº”è¢«å¿½è§†ã€‚
- en: Gifts and Subscriptions
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¤¼å“å’Œè®¢é˜…
- en: 'For the rest of the article, we are going to use a **toy example** to illustrate
    the main idea. Suppose we were a company interested in reducing our customerâ€™s
    churn and ultimately increasing our revenue. Suppose we have decided to test a
    new idea: sending a **gift** of *1$* to our users. In order to test whether the
    treatment works, we have randomly sent it only to a subsample of our customer
    base.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ª**ç©å…·ç¤ºä¾‹**æ¥è¯´æ˜ä¸»è¦è§‚ç‚¹ã€‚å‡è®¾æˆ‘ä»¬æ˜¯ä¸€å®¶å¸Œæœ›å‡å°‘å®¢æˆ·æµå¤±å¹¶æœ€ç»ˆå¢åŠ æ”¶å…¥çš„å…¬å¸ã€‚å‡è®¾æˆ‘ä»¬å†³å®šæµ‹è¯•ä¸€ä¸ªæ–°æƒ³æ³•ï¼šå‘ç”¨æˆ·å‘é€*1ç¾å…ƒ*çš„**ç¤¼å“**ã€‚ä¸ºäº†æµ‹è¯•è¿™ä¸€æªæ–½æ˜¯å¦æœ‰æ•ˆï¼Œæˆ‘ä»¬éšæœºåœ°ä»…å°†å…¶å‘é€ç»™æˆ‘ä»¬çš„å®¢æˆ·åŸºç¡€ä¸­çš„ä¸€éƒ¨åˆ†æ ·æœ¬ã€‚
- en: '[PRE0]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Letâ€™s have a look at the data we have at our disposal. I import the data-generating
    process `dgp_gift()` from `src.dgp`. I also import some plotting functions and
    libraries from `src.utils`.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æ‰‹å¤´çš„æ•°æ®ã€‚æˆ‘ä»`src.dgp`å¯¼å…¥æ•°æ®ç”Ÿæˆè¿‡ç¨‹`dgp_gift()`ã€‚æˆ‘è¿˜ä»`src.utils`å¯¼å…¥äº†ä¸€äº›ç»˜å›¾å‡½æ•°å’Œåº“ã€‚
- en: '[PRE1]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](../Images/60c257533f7eaad8407d6061856721b5.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/60c257533f7eaad8407d6061856721b5.png)'
- en: Data snapshot, image by Author
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®å¿«ç…§ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: 'We have information on `100_000` customers for which we observe the number
    of `months` they have been active customers, the revenue they generated in the
    last month (`rev_old`), the change in revenue between the last month and the previous
    one (`rev_change`), whether they were randomly sent a `gift` and the two outcomes
    of interest: `churn`, i.e. whether they are not active customers anymore and the
    `revenue` they have generated in the current month. We denote the outcomes with
    the letter *Y*, the treatment with the letter *W* and the other variables with
    the letter *X*.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æœ‰`100_000`ä¸ªå®¢æˆ·çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ä»–ä»¬ä½œä¸ºæ´»è·ƒå®¢æˆ·çš„`months`æ•°é‡ã€ä¸Šä¸ªæœˆä»–ä»¬äº§ç”Ÿçš„æ”¶å…¥ï¼ˆ`rev_old`ï¼‰ã€ä¸Šä¸ªæœˆä¸ä¹‹å‰ä¸€ä¸ªæœˆçš„æ”¶å…¥å˜åŒ–ï¼ˆ`rev_change`ï¼‰ã€ä»–ä»¬æ˜¯å¦è¢«éšæœºé€äº†`gift`ä»¥åŠä¸¤ä¸ªæ„Ÿå…´è¶£çš„ç»“æœï¼š`churn`ï¼Œå³ä»–ä»¬æ˜¯å¦ä¸å†æ˜¯æ´»è·ƒå®¢æˆ·ï¼Œä»¥åŠä»–ä»¬åœ¨å½“å‰æœˆäº§ç”Ÿçš„`revenue`ã€‚æˆ‘ä»¬ç”¨å­—æ¯*Y*è¡¨ç¤ºç»“æœï¼Œç”¨å­—æ¯*W*è¡¨ç¤ºå¤„ç†ï¼Œç”¨å­—æ¯*X*è¡¨ç¤ºå…¶ä»–å˜é‡ã€‚
- en: '[PRE2]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Note** that, for simplicity, we consider a single-period snapshot of the
    data, and we summarize the panel structure of the data in just a couple of variables.
    Usually, we would have a longer time series but also a longer time horizon for
    what concerns the outcome (e.g. [customer lifetime value](https://en.wikipedia.org/wiki/Customer_lifetime_value)).'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ³¨æ„**ï¼šä¸ºäº†ç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬è€ƒè™‘æ•°æ®çš„å•æœŸå¿«ç…§ï¼Œå¹¶ä»…ç”¨å‡ ä¸ªå˜é‡æ€»ç»“æ•°æ®çš„é¢æ¿ç»“æ„ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šæœ‰æ›´é•¿çš„æ—¶é—´åºåˆ—ï¼Œä½†å¯¹äºç»“æœï¼ˆä¾‹å¦‚ï¼Œ[å®¢æˆ·ç»ˆèº«ä»·å€¼](https://en.wikipedia.org/wiki/Customer_lifetime_value)ï¼‰æ¥è¯´ï¼Œæ—¶é—´èŒƒå›´ä¹Ÿä¼šæ›´é•¿ã€‚'
- en: 'We can represent the underlying data-generating process with the following
    **Directed Acyclic Graph (DAG)**. Nodes represent variables, and arrows represent
    potential causal relationships. I have highlighted in green the two relationships
    of interest: the effect of the `gift` on `churn` and `revenue`. Note that `churn`
    is related to revenue since churned customers, by definition, generate zero revenue.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹**æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰**æ¥è¡¨ç¤ºæ½œåœ¨çš„æ•°æ®ç”Ÿæˆè¿‡ç¨‹ã€‚èŠ‚ç‚¹ä»£è¡¨å˜é‡ï¼Œç®­å¤´ä»£è¡¨æ½œåœ¨çš„å› æœå…³ç³»ã€‚æˆ‘ç”¨ç»¿è‰²æ ‡å‡ºäº†ä¸¤ä¸ªæ„Ÿå…´è¶£çš„å…³ç³»ï¼š`gift`å¯¹`churn`å’Œ`revenue`çš„å½±å“ã€‚è¯·æ³¨æ„ï¼Œ`churn`ä¸revenueç›¸å…³ï¼Œå› ä¸ºæµå¤±çš„å®¢æˆ·æ ¹æ®å®šä¹‰ä¸ä¼šäº§ç”Ÿæ”¶å…¥ã€‚
- en: '![](../Images/b590f0d1f8557ac05319968b4a22c5cc.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b590f0d1f8557ac05319968b4a22c5cc.png)'
- en: DAG of the data generating process, image by Author
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®ç”Ÿæˆè¿‡ç¨‹çš„DAGï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: Importantly, past revenue and revenue change are predictors of `churn` and `revenue`
    but are not related to our intervention. On the contrary, the intervention affects
    `churn` and `revenue` differentially depending on the customer's total active
    `months`.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¦çš„æ˜¯ï¼Œè¿‡å»çš„æ”¶å…¥å’Œæ”¶å…¥å˜åŒ–æ˜¯`churn`å’Œ`revenue`çš„é¢„æµ‹å› å­ï¼Œä½†ä¸æˆ‘ä»¬çš„å¹²é¢„æ— å…³ã€‚ç›¸åï¼Œå¹²é¢„æ ¹æ®å®¢æˆ·çš„æ€»æ´»è·ƒ`months`å¯¹`churn`å’Œ`revenue`æœ‰ä¸åŒçš„å½±å“ã€‚
- en: 'While simplistic, this data-generating process aims at capturing an important
    **insight**: variables that are good predictors of `churn` or `revenue`, are not
    necessarily variables that predict `churn` or `revenue` **lift**. We will see
    later how this impacts our analysis.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡ç®€å•ï¼Œè¿™ä¸ªæ•°æ®ç”Ÿæˆè¿‡ç¨‹æ—¨åœ¨æ•æ‰ä¸€ä¸ªé‡è¦çš„**æ´å¯Ÿ**ï¼šé¢„æµ‹`churn`æˆ–`revenue`çš„å˜é‡ä¸ä¸€å®šæ˜¯é¢„æµ‹`churn`æˆ–`revenue`**æå‡**çš„å˜é‡ã€‚ç¨åæˆ‘ä»¬å°†çœ‹åˆ°è¿™å¦‚ä½•å½±å“æˆ‘ä»¬çš„åˆ†æã€‚
- en: Letâ€™s start first by exploring the data.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹æ¢ç´¢æ•°æ®ã€‚
- en: Exploratory Data Analysis
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ¢ç´¢æ€§æ•°æ®åˆ†æ
- en: Letâ€™s start with `churn`. How many customers did the company lose last month?
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»`churn`å¼€å§‹ã€‚å…¬å¸ä¸Šä¸ªæœˆæµå¤±äº†å¤šå°‘å®¢æˆ·ï¼Ÿ
- en: '[PRE3]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The company lost almost *20%* of its customers last month! Did the `gift` help
    in preventing churn?
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: å…¬å¸ä¸Šä¸ªæœˆå‡ ä¹*æŸå¤±äº†20%*çš„å®¢æˆ·ï¼`gift`æ˜¯å¦æœ‰åŠ©äºé˜²æ­¢æµå¤±ï¼Ÿ
- en: We want to compare the churn frequency of customers that received the gift with
    the churn frequency of customers that did not receive the gift. Since the gift
    was randomized, the difference-in-means estimator is an unbiased estimator for
    the [average treatment effect (ATE)](https://en.wikipedia.org/wiki/Average_treatment_effect)
    of the `gift` on `churn`.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æƒ³è¦æ¯”è¾ƒæ”¶åˆ°ç¤¼ç‰©çš„å®¢æˆ·çš„æµå¤±é¢‘ç‡ä¸æœªæ”¶åˆ°ç¤¼ç‰©çš„å®¢æˆ·çš„æµå¤±é¢‘ç‡ã€‚ç”±äºç¤¼ç‰©æ˜¯éšæœºå‘æ”¾çš„ï¼Œå› æ­¤å‡å€¼å·®å¼‚ä¼°è®¡é‡æ˜¯`gift`å¯¹`churn`çš„[å¹³å‡å¤„ç†æ•ˆåº”ï¼ˆATEï¼‰](https://en.wikipedia.org/wiki/Average_treatment_effect)çš„æ— åä¼°è®¡é‡ã€‚
- en: '![](../Images/a7cb2d5b9e5312b682fcea01b4346383.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a7cb2d5b9e5312b682fcea01b4346383.png)'
- en: Average Treatment Effect, image by Author
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: å¹³å‡å¤„ç†æ•ˆåº”ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›
- en: We compute the difference-in-means estimate by linear regression. We also include
    other covariates to improve the efficiency of the estimator.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é€šè¿‡çº¿æ€§å›å½’è®¡ç®—å‡å€¼å·®å¼‚ä¼°è®¡ã€‚æˆ‘ä»¬è¿˜åŒ…æ‹¬å…¶ä»–åå˜é‡ä»¥æé«˜ä¼°è®¡å™¨çš„æ•ˆç‡ã€‚
- en: '[PRE5]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/b6cb632b38aeb03ba248537b61fe1497.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b6cb632b38aeb03ba248537b61fe1497.png)'
- en: Churn regression table, image by Author
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æµå¤±å›å½’è¡¨ï¼Œå›¾ç‰‡æ¥æºï¼šä½œè€…
- en: It looks like the `gift` decreased churn by around *11* percentage points, i.e.
    almost one-third of the baseline level of *32%*! Did it also have an impact on
    `revenue`?
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: çœ‹èµ·æ¥`gift`å°†æµå¤±ç‡é™ä½äº†å¤§çº¦*11*ä¸ªç™¾åˆ†ç‚¹ï¼Œå³å‡ ä¹æ˜¯åŸºå‡†æ°´å¹³*32%*çš„ä¸‰åˆ†ä¹‹ä¸€ï¼å®ƒæ˜¯å¦å¯¹`revenue`ä¹Ÿæœ‰å½±å“ï¼Ÿ
- en: As for churn, we regress `revenue` on `gift`, our treatment variable, to estimate
    the average treatment effect.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: è‡³äºæµå¤±ç‡ï¼Œæˆ‘ä»¬å°†`revenue`å¯¹`gift`ï¼Œå³æˆ‘ä»¬çš„å¤„ç†å˜é‡ï¼Œè¿›è¡Œå›å½’ï¼Œä»¥ä¼°è®¡å¹³å‡å¤„ç†æ•ˆæœã€‚
- en: '[PRE6]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/c6b3d83f32af833c18ccf477978cb6e8.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c6b3d83f32af833c18ccf477978cb6e8.png)'
- en: Revenue regression table, image by Author
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: æ”¶å…¥å›å½’è¡¨ï¼Œå›¾ç‰‡æ¥æºï¼šä½œè€…
- en: It looks like the `gift` on average increased revenue by *0.63$*, which means
    that it was **not profitable**. Does it mean that we should stop sending gifts
    to our customers? It depends. In fact, the gift might be effective for certain
    customer segments. We just need to identify them.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: çœ‹èµ·æ¥`gift`å¹³å‡å¢åŠ çš„æ”¶å…¥ä¸º*0.63$*ï¼Œè¿™æ„å‘³ç€å®ƒ**å¹¶ä¸ç›ˆåˆ©**ã€‚è¿™æ˜¯å¦æ„å‘³ç€æˆ‘ä»¬åº”è¯¥åœæ­¢å‘å®¢æˆ·èµ é€ç¤¼ç‰©ï¼Ÿè¿™è¦çœ‹æƒ…å†µã€‚äº‹å®ä¸Šï¼Œç¤¼ç‰©å¯èƒ½å¯¹æŸäº›å®¢æˆ·ç¾¤ä½“æœ‰æ•ˆã€‚æˆ‘ä»¬åªéœ€è¦è¯†åˆ«è¿™äº›å®¢æˆ·ç¾¤ä½“ã€‚
- en: Targeting Policies
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å®šå‘ç­–ç•¥
- en: In this section, we will try to understand if there is a data-informed profitable
    way to send the `gift`, by targeting specific customers. In particular, we will
    **compare** different targeting **policies** with the objective of increasing
    revenue.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å°è¯•é€šè¿‡é’ˆå¯¹ç‰¹å®šå®¢æˆ·æ¥äº†è§£æ˜¯å¦å­˜åœ¨æ•°æ®é©±åŠ¨çš„ç›ˆåˆ©å‘é€`gift`çš„æ–¹æ³•ã€‚ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬å°†**æ¯”è¾ƒ**ä¸åŒçš„ç›®æ ‡**ç­–ç•¥**ï¼Œç›®çš„æ˜¯å¢åŠ æ”¶å…¥ã€‚
- en: Throughout this section, we will need some algorithms to either predict `revenue`
    or `churn`, or the probability of receiving the `gift`. We use gradient-boosted
    tree models from the `[lightgbm](https://lightgbm.readthedocs.io/en/latest/index.html)`
    library. We use the same models for all policies so that we cannot attribute differences
    in performance to prediction accuracy.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€äº›ç®—æ³•æ¥é¢„æµ‹`revenue`æˆ–`churn`ï¼Œæˆ–æ¥æ”¶`gift`çš„æ¦‚ç‡ã€‚æˆ‘ä»¬ä½¿ç”¨æ¥è‡ª`[lightgbm](https://lightgbm.readthedocs.io/en/latest/index.html)`åº“çš„æ¢¯åº¦æå‡æ ‘æ¨¡å‹ã€‚æˆ‘ä»¬å¯¹æ‰€æœ‰ç­–ç•¥ä½¿ç”¨ç›¸åŒçš„æ¨¡å‹ï¼Œä»¥ä¾¿æˆ‘ä»¬æ— æ³•å°†æ€§èƒ½å·®å¼‚å½’å› äºé¢„æµ‹å‡†ç¡®æ€§ã€‚
- en: '[PRE7]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: To **evaluate** each policy, we would like to compare the implied profits with
    the policy *Î â½Â¹â¾*, with the implied profits without the policy *Î â½â°â¾*, for each
    single individual, in a separate validation dataset. We call these two quantities
    **potential outcomes**, and their difference the **profit uplift**, as we denoted
    with *Ï„.* Note that uplift is never observable since, for each customer, we only
    observe one of the two **potential outcomes**, with or without the `gift`. However,
    since we are working with synthetic data, we can do oracle evaluation. If you
    want to know more about how to evaluate uplift models with real data, I recommend
    my introductory article.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: è¦**è¯„ä¼°**æ¯é¡¹æ”¿ç­–ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å•ç‹¬çš„éªŒè¯æ•°æ®é›†ä¸­ï¼Œå°†æœ‰æ”¿ç­–çš„éšå«åˆ©æ¶¦*Î â½Â¹â¾*ä¸æ²¡æœ‰æ”¿ç­–çš„éšå«åˆ©æ¶¦*Î â½â°â¾*è¿›è¡Œæ¯”è¾ƒã€‚æˆ‘ä»¬ç§°è¿™ä¸¤ä¸ªé‡ä¸º**æ½œåœ¨ç»“æœ**ï¼Œå®ƒä»¬çš„å·®å¼‚ä¸º**åˆ©æ¶¦æå‡**ï¼Œç”¨*Ï„*è¡¨ç¤ºã€‚è¯·æ³¨æ„ï¼Œæå‡ä»æœªè¢«è§‚å¯Ÿåˆ°ï¼Œå› ä¸ºå¯¹äºæ¯ä¸ªå®¢æˆ·ï¼Œæˆ‘ä»¬åªèƒ½è§‚å¯Ÿåˆ°ä¸¤ç§**æ½œåœ¨ç»“æœ**ä¹‹ä¸€ï¼Œå³æœ‰æˆ–æ²¡æœ‰`gift`ã€‚ç„¶è€Œï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åˆæˆæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œé¢„è¨€è¯„ä¼°ã€‚å¦‚æœä½ æƒ³äº†è§£å¦‚ä½•ç”¨çœŸå®æ•°æ®è¯„ä¼°æå‡æ¨¡å‹ï¼Œæˆ‘æ¨èæˆ‘çš„å…¥é—¨æ–‡ç« ã€‚
- en: '[](/8a078996a113?source=post_page-----45225e5a7541--------------------------------)
    [## Evaluating Uplift Models'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/8a078996a113?source=post_page-----45225e5a7541--------------------------------)
    [## è¯„ä¼°æå‡æ¨¡å‹'
- en: One of the most widespread applications of causal inference in the industry
    is uplift modeling, a.k.a. the estimationâ€¦
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: è¡Œä¸šä¸­å› æœæ¨æ–­çš„æœ€å¹¿æ³›åº”ç”¨ä¹‹ä¸€æ˜¯æå‡å»ºæ¨¡ï¼Œä¹Ÿç§°ä¸ºä¼°è®¡...
- en: towardsdatascience.com](/8a078996a113?source=post_page-----45225e5a7541--------------------------------)
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/8a078996a113?source=post_page-----45225e5a7541--------------------------------)
- en: First of all, letâ€™s define profits *Î * as the net revenue *R* when the customer
    does not churn *C*.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®šä¹‰åˆ©æ¶¦*Î *ä¸ºå½“å®¢æˆ·ä¸æµå¤±æ—¶çš„å‡€æ”¶å…¥*R*ã€‚
- en: '![](../Images/3d61704184736c560d209e823c3cba24.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3d61704184736c560d209e823c3cba24.png)'
- en: Profit formula, image by Author
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ©æ¶¦å…¬å¼ï¼Œå›¾ç‰‡æ¥æºï¼šä½œè€…
- en: 'Therefore, the overall effect on profits for treated individuals is given by
    the difference between two hypothetical quantities: the profits when treated *Î â½Â¹â¾*
    minus the profits when not treated *Î â½â°â¾*.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œå¯¹äºå¤„ç†è¿‡çš„ä¸ªä½“ï¼Œæ€»ä½“åˆ©æ¶¦æ•ˆåº”ç”±ä¸¤ä¸ªå‡è®¾é‡çš„å·®å¼‚ç»™å‡ºï¼šå¤„ç†æ—¶çš„åˆ©æ¶¦*Î â½Â¹â¾*å‡å»æœªå¤„ç†æ—¶çš„åˆ©æ¶¦*Î â½â°â¾*ã€‚
- en: '![](../Images/db1fbbbaabcafb973a46e9fd51dbe5ce.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/db1fbbbaabcafb973a46e9fd51dbe5ce.png)'
- en: Profit lift formula, image by author
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: The effect for untreated individuals is zero.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 1\. Target Churning Customers
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A first policy could be to just target **churning customers**. Letâ€™s say we
    send the `gift` only to customers with above-average predicted churn.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The policy is not profitable and would lead to an aggregate **loss** of more
    than *5000$*.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: You might think that the problem is the **arbitrary threshold**, but this is
    not the case. Below I plot the aggregate effect for all possible policy thresholds.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](../Images/8068de4f2278ce28dbea3051e2afcadd.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
- en: Aggregate effect by churn threshold, image by Author
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: As we can see, no matter the threshold, it is basically impossible to make any
    profit.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: The problem is that the fact that a customer is likely to churn does not imply
    that the `gift` will have any impact on their churn probability. The two measures
    are not completely unrelated (e.g. we cannot decrease the churning probability
    of customers that have a 0% probability of churning), but they are not the same
    thing.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: 2\. Target revenue customers
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Letâ€™s now try a different policy: we send the gift only to **high-revenue customers**.
    For example, we might send the gift only to the top 10% of customers by revenue.
    The idea is that if the policy indeed decreases churn, these are the customers
    for whom decreasing churn is more profitable.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The policy is again unprofitable, leading to substantial **losses**. As before,
    this is not a problem of selecting the threshold, as we can see in the plot below.
    The best we can do is set a threshold so high that we do not treat anyone, and
    we make zero profits.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '![](../Images/de2a1e6a19f72c4c37f19ce64772cc3d.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
- en: Aggregate effect by revenue threshold, image by Author
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: The problem is that, in our setting, the churn probability of high-revenue customers
    does not decrease enough to make the `gift` profitable. This is also partially
    due to the fact, often observed in reality, that high-revenue customers are also
    the least likely to churn, to begin with.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s now consider a more relevant set of policies: policies based on **uplift**.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: 3\. Target churn uplift customers
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A more sensible approach would be to target customers whose `churn` probability
    decreases the most when receiving the *1$* `gift`. We estimate churn uplift using
    the [double-robust estimator](https://arxiv.org/abs/2004.14497), one of the best-performing
    uplift models. If you are unfamiliar with meta-learners, I recommend starting
    from my introductory article.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: '[](/8a9c1e340832?source=post_page-----45225e5a7541--------------------------------)
    [## Understanding Meta Learners'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: In many settings, we are not just interested in estimating a causal effect,
    but also in whether this effect isâ€¦
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/8a9c1e340832?source=post_page-----45225e5a7541--------------------------------)
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: We import the doubly-robust learner from [econml](https://econml.azurewebsites.net/),
    a Microsoft library.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Now that we have estimated churn uplift, we might be tempted to just target
    customers with a high negative uplift (negative, since we want to *decrease* churn).
    For example, we might send the `gift` to all customers with an estimated uplift
    larger than the average churn.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¢ç„¶æˆ‘ä»¬å·²ç»ä¼°è®¡äº†å®¢æˆ·æµå¤±çš„æå‡ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå€¾å‘äºåªé’ˆå¯¹é‚£äº›å…·æœ‰é«˜è´Ÿé¢æå‡çš„å®¢æˆ·ï¼ˆè´Ÿé¢ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¦*å‡å°‘*æµå¤±ï¼‰ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†`ç¤¼ç‰©`å‘é€ç»™æ‰€æœ‰ä¼°è®¡æµå¤±é«˜äºå¹³å‡æ°´å¹³çš„å®¢æˆ·ã€‚
- en: '[PRE16]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The policy is still unprofitable, leading to almost *4000$* in losses.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ”¿ç­–ä»ç„¶ä¸ç›ˆåˆ©ï¼Œå¯¼è‡´äº†æ¥è¿‘*4000$*çš„æŸå¤±ã€‚
- en: 'The problem is that we havenâ€™t considered the cost of the policy. In fact,
    decreasing the churn probability is **only profitable for high-revenue customers**.
    Take the extreme case: avoiding churn of a customer that does not generate any
    revenue is not worth any intervention.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜åœ¨äºæˆ‘ä»¬æ²¡æœ‰è€ƒè™‘æ”¿ç­–çš„æˆæœ¬ã€‚å®é™…ä¸Šï¼Œé™ä½æµå¤±æ¦‚ç‡**ä»…å¯¹é«˜æ”¶å…¥å®¢æˆ·**æœ‰åˆ©ã€‚ä»¥æç«¯æƒ…å†µä¸ºä¾‹ï¼šé¿å…æµå¤±ä¸€ä¸ªä¸äº§ç”Ÿä»»ä½•æ”¶å…¥çš„å®¢æˆ·æ˜¯æ²¡æœ‰ä»·å€¼çš„å¹²é¢„ã€‚
- en: Therefore, letâ€™s only send the `gift` to customers whose churn probability weighted
    by revenue decreases more than the cost of the gift.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘ä»¬åªå°†`ç¤¼ç‰©`å‘é€ç»™é‚£äº›å…¶æµå¤±æ¦‚ç‡åŠ æƒæ”¶å…¥ä¸‹é™å¹…åº¦å¤§äºç¤¼ç‰©æˆæœ¬çš„å®¢æˆ·ã€‚
- en: '[PRE18]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: This policy is finally profitable!
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸€æ”¿ç­–æœ€ç»ˆæ˜¯ç›ˆåˆ©çš„ï¼
- en: 'However, we still have not considered one channel: the intervention might also
    affect the revenue of existing customers.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶æ²¡æœ‰è€ƒè™‘åˆ°ä¸€ä¸ªæ¸ é“ï¼šå¹²é¢„ä¹Ÿå¯èƒ½ä¼šå½±å“ç°æœ‰å®¢æˆ·çš„æ”¶å…¥ã€‚
- en: 4\. Target revenue uplift customers
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4\. ç›®æ ‡æ”¶å…¥æå‡å®¢æˆ·
- en: A symmetric approach to the previous one would be to consider only the impact
    on `revenue`, ignoring the impact on churn. We could estimate the `revenue` uplift
    for non-churning customers and treat only customers whose incremental effect on
    revenue, net of churn, is greater than the cost of the `gift`.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸å‰ä¸€ç§æ–¹æ³•å¯¹ç§°çš„æ–¹æ³•æ˜¯åªè€ƒè™‘å¯¹`æ”¶å…¥`çš„å½±å“ï¼Œå¿½ç•¥å¯¹æµå¤±çš„å½±å“ã€‚æˆ‘ä»¬å¯ä»¥ä¼°è®¡éæµå¤±å®¢æˆ·çš„`æ”¶å…¥`æå‡ï¼Œåªå¤„ç†é‚£äº›åœ¨æµå¤±åå¯¹æ”¶å…¥çš„å¢é‡æ•ˆæœå¤§äº`ç¤¼ç‰©`æˆæœ¬çš„å®¢æˆ·ã€‚
- en: '[PRE20]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '[PRE21]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: This policy is profitable as well but ignores the effect on churn. How do we
    combine this policy with the previous one?
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸€æ”¿ç­–ä¹Ÿæœ‰åˆ©å¯å›¾ï¼Œä½†å¿½ç•¥äº†å¯¹æµå¤±çš„å½±å“ã€‚æˆ‘ä»¬å¦‚ä½•å°†è¿™ä¸€æ”¿ç­–ä¸ä¹‹å‰çš„æ”¿ç­–ç»“åˆèµ·æ¥ï¼Ÿ
- en: 5\. Target revenue uplift customers
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5\. ç›®æ ‡æ”¶å…¥æå‡å®¢æˆ·
- en: The best way to efficiently **combine** both the effect on churn and the effect
    on net revenue is simply to estimate **total revenue uplift**. The implied optimal
    policy is to treat customers whose total revenue uplift is greater than the cost
    of the `gift`.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: é«˜æ•ˆ**ç»“åˆ**å¯¹æµå¤±å’Œå¯¹å‡€æ”¶å…¥å½±å“çš„æœ€ä½³æ–¹æ³•å°±æ˜¯ä¼°è®¡**æ€»æ”¶å…¥æå‡**ã€‚éšå«çš„æœ€ä½³æ”¿ç­–æ˜¯å¤„ç†é‚£äº›æ€»æ”¶å…¥æå‡å¤§äº`ç¤¼ç‰©`æˆæœ¬çš„å®¢æˆ·ã€‚
- en: '[PRE22]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[PRE23]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: This policy is by far the best-performing one, generating an aggregate profit
    of more than *2000$*!
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸€æ”¿ç­–è¿„ä»Šä¸ºæ­¢è¡¨ç°æœ€å¥½ï¼Œäº§ç”Ÿäº†è¶…è¿‡*2000$*çš„æ€»åˆ©æ¶¦ï¼
- en: '[PRE24]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '![](../Images/df577aa7e5ec99f0697bbecb61e040a7.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/df577aa7e5ec99f0697bbecb61e040a7.png)'
- en: Comparing policies, image by Author
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯”è¾ƒæ”¿ç­–ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: Intuition and Decomposition
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç›´è§‰ä¸åˆ†è§£
- en: 'If we compare the different policies, it is clear that targeting high-revenue
    or high-churn probability customers were the **worst choices**. This is not necessarily
    always the case, but it happened in our simulated data because of two facts that
    are also common in many real scenarios:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æ¯”è¾ƒä¸åŒçš„æ”¿ç­–ï¼Œå¾ˆæ˜æ˜¾ï¼Œé’ˆå¯¹é«˜æ”¶å…¥æˆ–é«˜æµå¤±æ¦‚ç‡å®¢æˆ·æ˜¯**æœ€ç³Ÿç³•çš„é€‰æ‹©**ã€‚è¿™å¹¶ä¸æ€»æ˜¯å¦‚æ­¤ï¼Œä½†åœ¨æˆ‘ä»¬çš„æ¨¡æ‹Ÿæ•°æ®ä¸­å‘ç”Ÿäº†è¿™ç§æƒ…å†µï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªåœ¨è®¸å¤šå®é™…åœºæ™¯ä¸­ä¹Ÿå¾ˆå¸¸è§çš„äº‹å®ï¼š
- en: Revenue and churn probability are negatively correlated
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ”¶å…¥ä¸æµå¤±æ¦‚ç‡å‘ˆè´Ÿç›¸å…³
- en: The effect of the `gift` on `churn` (or `revenue`) was not strongly negatively
    (or positively for `revenue`) correlated with the baseline values
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`ç¤¼ç‰©`å¯¹`æµå¤±`ï¼ˆæˆ–`æ”¶å…¥`ï¼‰çš„å½±å“ä¸åŸºå‡†å€¼å¹¶æ²¡æœ‰å¼ºçƒˆçš„è´Ÿç›¸å…³ï¼ˆæˆ–å¯¹`æ”¶å…¥`çš„æ­£ç›¸å…³ï¼‰'
- en: Either one of these two facts can be enough to make targeting revenue or churn
    a bad strategy. What one should target instead is customers with a high **incremental**
    effect. And itâ€™s best to directly use as outcome the variable of interest, `revenue`
    in this case, whenever available.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›äº‹å®ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½è¶³ä»¥ä½¿å¾—ä»¥æ”¶å…¥æˆ–æµå¤±ä¸ºç›®æ ‡çš„ç­–ç•¥å˜å¾—ä¸ä½³ã€‚åº”è¯¥å…³æ³¨çš„æ˜¯é‚£äº›å…·æœ‰é«˜**å¢é‡**æ•ˆæœçš„å®¢æˆ·ã€‚è€Œä¸”ï¼Œæœ€å¥½ç›´æ¥ä½¿ç”¨æ„Ÿå…´è¶£çš„å˜é‡ï¼Œå³åœ¨è¿™ç§æƒ…å†µä¸‹çš„`æ”¶å…¥`ï¼Œåªè¦æœ‰æ•°æ®ã€‚
- en: To better understand the mechanism, we can **decompose** the aggregate effect
    of a policy on profits into three parts.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ›´å¥½åœ°ç†è§£æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥**åˆ†è§£**æ”¿ç­–å¯¹åˆ©æ¶¦çš„æ•´ä½“å½±å“ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚
- en: '![](../Images/1ae2e768dfbeed0989162376ccf47118.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1ae2e768dfbeed0989162376ccf47118.png)'
- en: Profit lift decomposition, image by Author
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ©æ¶¦æå‡åˆ†è§£ï¼Œå›¾åƒç”±ä½œè€…æä¾›
- en: This implies that there are **three channels** that make treating a customer
    profitable.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ„å‘³ç€æœ‰**ä¸‰ä¸ªæ¸ é“**ä½¿å¾—å¯¹å®¢æˆ·çš„å¤„ç†å…·æœ‰ç›ˆåˆ©æ€§ã€‚
- en: If itâ€™s a *high-revenue* customer and the treatment *decreases* its churn probability
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœè¿™æ˜¯ä¸€ä¸ª*é«˜æ”¶å…¥*å®¢æˆ·å¹¶ä¸”å¤„ç†*å‡å°‘*äº†å…¶æµå¤±æ¦‚ç‡
- en: If itâ€™s a *non-churning* customer and the treatment *increases* its revenue
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœè¿™æ˜¯ä¸€ä¸ª*éæµå¤±*å®¢æˆ·å¹¶ä¸”å¤„ç†*å¢åŠ *äº†å…¶æ”¶å…¥
- en: It the treatment has a strong impact on *both* its revenue and churn probability
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœå¤„ç†å¯¹*å…¶æ”¶å…¥*å’Œæµå¤±æ¦‚ç‡*éƒ½æœ‰*å¼ºå½±å“
- en: Targeting by churn uplift exploits only the first channel, targeting by net
    revenue uplift exploits only the second channel, and targeting by total revenue
    uplift exploits all three channels, making it the **most effective** method.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡æµå¤±æå‡è¿›è¡Œçš„ç›®æ ‡å®šä½ä»…åˆ©ç”¨ç¬¬ä¸€ä¸ªæ¸ é“ï¼Œé€šè¿‡å‡€æ”¶å…¥æå‡è¿›è¡Œçš„ç›®æ ‡å®šä½ä»…åˆ©ç”¨ç¬¬äºŒä¸ªæ¸ é“ï¼Œè€Œé€šè¿‡æ€»æ”¶å…¥æå‡è¿›è¡Œçš„ç›®æ ‡å®šä½åˆ©ç”¨æ‰€æœ‰ä¸‰ä¸ªæ¸ é“ï¼Œä½¿å…¶æˆä¸º**æœ€æœ‰æ•ˆ**çš„æ–¹æ³•ã€‚
- en: 'Bonus: weighting'
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¥–é‡‘ï¼šåŠ æƒ
- en: As highlighted by [Lemmens, Gupta (2020)](https://www.hbs.edu/ris/Publication%20Files/14-020_2d6c9da0-94d3-4dd5-9952-d81feb432f61.pdf),
    sometimes it might be worth **weighting** observations when estimating uplift.
    In particular, it might be worth giving more weight to observations close to the
    treatment policy threshold.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚[Lemmens, Gupta (2020)](https://www.hbs.edu/ris/Publication%20Files/14-020_2d6c9da0-94d3-4dd5-9952-d81feb432f61.pdf)æ‰€å¼ºè°ƒï¼Œæœ‰æ—¶åœ¨ä¼°è®¡æå‡æ—¶å¯èƒ½å€¼å¾—å¯¹è§‚å¯Ÿå€¼è¿›è¡Œ**åŠ æƒ**ã€‚ç‰¹åˆ«æ˜¯ï¼Œå¯èƒ½å€¼å¾—å¯¹æ¥è¿‘å¤„ç†æ”¿ç­–é˜ˆå€¼çš„è§‚å¯Ÿå€¼ç»™äºˆæ›´å¤šæƒé‡ã€‚
- en: 'The **idea** is that weighting generally decreases the efficiency of the estimator.
    However, we are not interested in having correct estimates for all the observations,
    but rather we are interested in estimating the **policy threshold** correctly.
    In fact, whether you estimate a net profit of *1$* or *1000$* it does not matter:
    the implied policy is the same: send the `gift`. However, estimating a net profit
    of *1$* rather than *-1$* reverses the policy implications. Therefore, a large
    loss in accuracy away from the threshold sometimes is worth a small gain in accuracy
    at the threshold.'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '**è§‚ç‚¹**æ˜¯ï¼ŒåŠ æƒé€šå¸¸ä¼šé™ä½ä¼°è®¡é‡çš„æ•ˆç‡ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒå¯¹æ‰€æœ‰è§‚å¯Ÿå€¼è·å¾—æ­£ç¡®çš„ä¼°è®¡ï¼Œè€Œæ˜¯å…³å¿ƒæ­£ç¡®ä¼°è®¡**æ”¿ç­–é˜ˆå€¼**ã€‚å®é™…ä¸Šï¼Œæ— è®ºä½ ä¼°è®¡*1$*è¿˜æ˜¯*1000$*çš„å‡€åˆ©æ¶¦éƒ½æ— å…³ç´§è¦ï¼šéšå«çš„æ”¿ç­–æ˜¯ç›¸åŒçš„ï¼šå‘é€`ç¤¼ç‰©`ã€‚ç„¶è€Œï¼Œä¼°è®¡*1$*çš„å‡€åˆ©æ¶¦è€Œä¸æ˜¯*-1$*ä¼šé¢ å€’æ”¿ç­–çš„å«ä¹‰ã€‚å› æ­¤ï¼Œè·ç¦»é˜ˆå€¼çš„å‡†ç¡®æ€§å¤§å¹…ä¸‹é™æœ‰æ—¶å€¼å¾—åœ¨é˜ˆå€¼å¤„çš„å°å¹…æé«˜å‡†ç¡®æ€§ã€‚'
- en: Letâ€™s try using negative exponential weights, decreasing in distance from the
    threshold.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨è´ŸæŒ‡æ•°æƒé‡ï¼Œè·ç¦»é˜ˆå€¼è¶Šè¿œæƒé‡è¶Šä½ã€‚
- en: '[PRE25]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '[PRE26]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'In our case, weighting is not worth it: the implied policy is still profitable
    but less than the one obtained with the unweighted model, *2028$*.'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼ŒåŠ æƒæ˜¯ä¸å€¼å¾—çš„ï¼šéšå«çš„æ”¿ç­–ä»ç„¶æœ‰åˆ©å¯å›¾ï¼Œä½†ä¸å¦‚æœªåŠ æƒæ¨¡å‹æ‰€è·å¾—çš„*2028$*ã€‚
- en: '**Conclusion**'
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**ç»“è®º**'
- en: In this article, we have explored why and how one should go **beyond** churn
    prediction and churn uplift modeling. In particular, one should concentrate on
    the final business objective of increasing profitability. This implies shifting
    the focus from *prediction* to *uplift* but also combining churn and revenue into
    a single outcome.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†ä¸ºä»€ä¹ˆä»¥åŠå¦‚ä½•åº”å½“**è¶…è¶Š**æµå¤±é¢„æµ‹å’Œæµå¤±æå‡å»ºæ¨¡ã€‚ç‰¹åˆ«æ˜¯ï¼Œåº”é›†ä¸­äºæé«˜ç›ˆåˆ©çš„æœ€ç»ˆä¸šåŠ¡ç›®æ ‡ã€‚è¿™æ„å‘³ç€å°†é‡ç‚¹ä»*é¢„æµ‹*è½¬ç§»åˆ°*æå‡*ï¼ŒåŒæ—¶å°†æµå¤±å’Œæ”¶å…¥ç»“åˆæˆä¸€ä¸ªç»“æœã€‚
- en: An important caveat concerns the dimension of the data available. We have used
    a toy dataset that highly simplifies the problem in at least **two dimensions**.
    First of all, backward, we normally have longer time series that can (and should)
    be used for both prediction and modeling purposes. Second, forward, one should
    combine churn with a longer-run estimate of customer profitability, usually referred
    to as *customer lifetime value*.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªé‡è¦çš„è­¦å‘Šæ¶‰åŠåˆ°æ•°æ®çš„ç»´åº¦ã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªç©å…·æ•°æ®é›†ï¼Œè¿™åœ¨è‡³å°‘**ä¸¤ä¸ªç»´åº¦**ä¸Šé«˜åº¦ç®€åŒ–äº†é—®é¢˜ã€‚é¦–å…ˆï¼Œå›æº¯ï¼Œæˆ‘ä»¬é€šå¸¸æœ‰æ›´é•¿æ—¶é—´çš„æ—¶é—´åºåˆ—ï¼Œè¿™äº›æ—¶é—´åºåˆ—å¯ä»¥ï¼ˆå¹¶ä¸”åº”è¯¥ï¼‰ç”¨äºé¢„æµ‹å’Œå»ºæ¨¡ç›®çš„ã€‚å…¶æ¬¡ï¼Œå‰ç»ï¼Œåº”è¯¥å°†æµå¤±ä¸é•¿æœŸçš„å®¢æˆ·ç›ˆåˆ©ä¼°è®¡ç›¸ç»“åˆï¼Œé€šå¸¸ç§°ä¸º*å®¢æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼*ã€‚
- en: References
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å‚è€ƒæ–‡çŒ®
- en: Kennedy (2022), [â€œTowards Optimal Doubly Robust Estimation of Heterogeneous
    Causal Effectsâ€](https://arxiv.org/abs/2004.14497)
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kennedy (2022), [â€œæœç€æœ€ä¼˜åŒé‡ç¨³å¥ä¼°è®¡å¼‚è´¨å› æœæ•ˆåº”â€](https://arxiv.org/abs/2004.14497)
- en: Bonvini, Kennedy, Keele (2021), [â€œMinimax Optimal Subgroup Identificationâ€](https://arxiv.org/abs/2306.17464)
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bonvini, Kennedy, Keele (2021), [â€œæœ€å°æœ€å¤§æœ€ä¼˜å­ç»„è¯†åˆ«â€](https://arxiv.org/abs/2306.17464)
- en: Lemmens, Gupta (2020), [â€œManaging Churn to Maximize Profitsâ€](https://www.hbs.edu/ris/Publication%20Files/14-020_2d6c9da0-94d3-4dd5-9952-d81feb432f61.pdf)
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Lemmens, Gupta (2020), [â€œç®¡ç†æµå¤±ä»¥æœ€å¤§åŒ–åˆ©æ¶¦â€](https://www.hbs.edu/ris/Publication%20Files/14-020_2d6c9da0-94d3-4dd5-9952-d81feb432f61.pdf)
- en: Related Articles
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç›¸å…³æ–‡ç« 
- en: '[Evaluating Uplift Models](/8a078996a113)'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[è¯„ä¼°æå‡æ¨¡å‹](/8a078996a113)'
- en: '[Understanding Meta Learners](/8a9c1e340832)'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[ç†è§£å…ƒå­¦ä¹ è€…](/8a9c1e340832)'
- en: '[Understanding AIPW, the Doubly-Robust Estimator](/ed4097dab27a)'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[ç†è§£ AIPWï¼Œå³åŒé‡ç¨³å¥ä¼°è®¡å™¨](/ed4097dab27a)'
- en: Code
  id: totrans-143
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Code
- en: 'You can find the original Jupyter Notebook here:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°åŸå§‹çš„ Jupyter Notebookï¼š
- en: '[](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/beyond_churn.ipynb?source=post_page-----45225e5a7541--------------------------------)
    [## Blog-Posts/notebooks/beyond_churn.ipynb at main Â· matteocourthoud/Blog-Posts'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '[## Blog-Posts/notebooks/beyond_churn.ipynb at main Â· matteocourthoud/Blog-Posts](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/beyond_churn.ipynb?source=post_page-----45225e5a7541--------------------------------)'
- en: Code and notebooks for my Medium blog posts. Contribute to matteocourthoud/Blog-Posts
    development by creating anâ€¦
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æˆ‘åœ¨ Medium åšå®¢æ–‡ç« ä¸­çš„ä»£ç å’Œç¬”è®°æœ¬ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªâ€¦æ¥è´¡çŒ®äº matteocourthoud/Blog-Posts çš„å¼€å‘ã€‚
- en: github.com](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/beyond_churn.ipynb?source=post_page-----45225e5a7541--------------------------------)
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '[github.com](https://github.com/matteocourthoud/Blog-Posts/blob/main/notebooks/beyond_churn.ipynb?source=post_page-----45225e5a7541--------------------------------)'
- en: Thank you for reading!
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ„Ÿè°¢é˜…è¯»ï¼
- en: '*I really appreciate it!* ğŸ¤— *If you liked the post and want to see more, consider*
    [***following me***](https://medium.com/@matteo.courthoud)*. I post once a week
    on topics related to causal inference and data analysis. I try to keep my posts
    simple but precise, always providing code, examples, and simulations.*'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '*æˆ‘éå¸¸æ„Ÿè°¢ï¼* ğŸ¤— *å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« å¹¶æƒ³çœ‹åˆ°æ›´å¤šå†…å®¹ï¼Œè¯·è€ƒè™‘* [***å…³æ³¨æˆ‘***](https://medium.com/@matteo.courthoud)*ã€‚æˆ‘æ¯å‘¨å‘å¸ƒä¸€æ¬¡å…³äºå› æœæ¨æ–­å’Œæ•°æ®åˆ†æçš„å†…å®¹ã€‚æˆ‘å°è¯•ä¿æŒæ–‡ç« ç®€æ´è€Œå‡†ç¡®ï¼Œå§‹ç»ˆæä¾›ä»£ç ã€ç¤ºä¾‹å’Œæ¨¡æ‹Ÿã€‚*'
- en: '*Also, a small* ***disclaimer****: I write to learn, so mistakes are the norm,
    even though I try my best. Please, when you spot them, let me know. I also appreciate
    suggestions on new topics!*'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '*æ­¤å¤–ï¼Œä¸€ä¸ªå°å°çš„* ***å…è´£å£°æ˜***ï¼šæˆ‘å†™ä½œæ˜¯ä¸ºäº†å­¦ä¹ ï¼Œå› æ­¤é”™è¯¯æ˜¯å¸¸æœ‰çš„äº‹ï¼Œå°½ç®¡æˆ‘å°½åŠ›è€Œä¸ºã€‚å¦‚æœä½ å‘ç°äº†é”™è¯¯ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚æˆ‘ä¹Ÿå¾ˆæ„Ÿæ¿€å¯¹æ–°ä¸»é¢˜çš„å»ºè®®ï¼'
