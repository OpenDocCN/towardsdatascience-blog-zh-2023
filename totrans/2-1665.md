# 在 Python 中绘制维恩图

> 原文：[https://towardsdatascience.com/plotting-venn-diagrams-in-python-6c55e0d78e57](https://towardsdatascience.com/plotting-venn-diagrams-in-python-6c55e0d78e57)

## 学习如何使用维恩图展示两个或更多数据集之间的关系

[](https://weimenglee.medium.com/?source=post_page-----6c55e0d78e57--------------------------------)[![Wei-Meng Lee](../Images/10fc13e8a6858502d6a7b89fcaad7a10.png)](https://weimenglee.medium.com/?source=post_page-----6c55e0d78e57--------------------------------)[](https://towardsdatascience.com/?source=post_page-----6c55e0d78e57--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----6c55e0d78e57--------------------------------) [Wei-Meng Lee](https://weimenglee.medium.com/?source=post_page-----6c55e0d78e57--------------------------------)

·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----6c55e0d78e57--------------------------------) ·阅读时间8分钟·2023年2月24日

--

![](../Images/2ed9f5f1ccb1be0bc142682d0a50dda0.png)

图片由 [Dustin Humes](https://unsplash.com/@dustinhumes_photography?utm_source=medium&utm_medium=referral) 提供，[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

在数据可视化中，我们生成的大多数图表属于以下一种或多种类型：

+   条形图

+   饼图

+   折线图

+   直方图

+   时间序列

然而，有一种图表不常用，那就是 **维恩图**。**维恩图** 是另一种被低估的可视化形式。它实际上是一种非常有用的可视化形式，可以让你检查两个不同数据集之间的关系。例如，以下维恩图展示了两个生物集的关系——集合 A（左圈；有两条腿的生物）和 B（右圈；会飞的生物）。重叠区域包含那些既有两条腿又能飞的生物：

![](../Images/aa03f8a417428d010024c735ad872a4f.png)

来源: [https://en.wikipedia.org/wiki/Venn_diagram#/media/File:Venn_diagram_example.png](https://en.wikipedia.org/wiki/Venn_diagram#/media/File:Venn_diagram_example.png)

在本文中，我将向你展示如何从样本数据集中绘制一个维恩图。我还会展示如何自定义维恩图以修改其外观和感觉。

所以让我们开始吧！

# **安装 matplotlib-venn 包**

使用 `pip` 命令安装 `matplotlib-venn` 包：

[PRE0]

# 数据集

对于数据集，我创建了一个虚构的数据文件，名为 **purchases.csv**，内容如下：

[PRE1]

该文件包含了不同客户通过 `custid` 识别的三款 Mac 产品（Mac mini、Mac Studio 和 MacBook Pro 13）的购买记录。

下一步是将其加载到 Pandas DataFrame 对象中：

[PRE2]

![](../Images/fb4e06c4177e705e09f207f72b2175e4.png)

所有图片由作者提供

# 绘制Venn图

要绘制一个2圆Venn图，有几种方法。最简单的方法是向`venn2()`函数（在`matplotlib_venn`包中）提供两个*集合*的值，它会自动为你绘制Venn图。

让我们使用这种方法来绘制一个2圆Venn图，显示购买Mac mini、Mac Studio及两者的数量。

首先，我会找到所有购买了Mac mini的客户，并提取`custid`作为一个*集合*：

[PRE3]

以下`custid`集合是那些购买了Mac mini的：

[PRE4]

同样，我会提取所有购买了Mac Studio的`custid`：

[PRE5]

这些是购买了Mac Studio的客户：

[PRE6]

现在我们准备绘制2圆Venn图：

[PRE7]

![](../Images/9ae2401e887f90b99e64b6098cd98176.png)

> 注意，你需要提供要显示在Venn图上的标签。如果不提供，默认标签是A和B，这可能会有点误导或混淆。

如果你想要一个3圆Venn图，只需调用`venn3()`函数：

[PRE8]

![](../Images/5175a3ae845b6db5b58d901febc5f482.png)

我非常喜欢这种方法，因为我不需要手动计算有多少人只购买了Mac mini，有多少人购买了Mac Studio，有多少人购买了Mac mini和Mac Studio等。

# 备选方法 1

第二种方法是手动传递数值到`venn2()`或`venn3()`函数中。对于`venn2()`函数，格式是：`venn2(subsets = (*Ab*,*aB*,*AB*))`，其中：

+   ***Ab***表示集合A中但不在集合B中的项目数量

+   ***aB***表示集合B中但不在集合A中的项目数量

+   **AB**表示同时包含在集合A和B中的项目数量

让我们使用数据框计算**Ab**、**aB**和**AB**的值。首先，找到购买了Mac mini但没有购买Mac Studio的人：

[PRE9]

然后，找到购买了Mac Studio但没有购买Mac mini的人：

[PRE10]

最后，找到购买了*Mac mini*和*Mac Studio*的*所有*人：

[PRE11]

计算了**Ab**、**aB**和**AB**的值后，你只需计算每个集合中的项目数，并将它们传递给`venn2()`函数：

[PRE12]

不足为奇，结果与我们之前得到的相同：

![](../Images/9ae2401e887f90b99e64b6098cd98176.png)

# 备选方法 2

下一种方法是二进制方法。你可以用**字典**代替传递值作为元组。对于2圆Venn图，你以以下格式传递二进制值：

+   ***Ab*** — “`10`”

+   ***aB***— “`01`"

+   ***AB***— “`11`”

对于3圆Venn图，二进制值如下：

+   ***Abc*** — “`100`”

+   ***ABc*** — “`110`”

+   ***ABC*** — “`111`”

+   ***aBC***— “`011`"

+   **abC** — “`001`”

+   ***AbC***— “`101`”

+   ***aBc*** — “`010`”

以下代码片段绘制了你之前绘制的相同2圆Venn图：

[PRE13]

# 自定义Venn图

由于生成的Venn图是使用matplotlib创建的，因此它可以像使用matplotlib创建的任何图表一样自定义。

## 设置透明度

你可以使用 `alpha` 参数设置圆圈的透明度：

[PRE14]

下面是将 `alpha` 参数设置为 0.8 的图表效果。如果你想要更浅的色调，可以将其设置为更低的值，如 0.1 或 0.2：

![](../Images/6a722fde2d84e740f2208505e435a8a2.png)

## 设置颜色

你可以使用 `set_colors` 参数指定圆圈的单独颜色：

[PRE15]

![](../Images/0b8db6e703d4fdc2cdf9df2a0e9ded60.png)

## 设置线条样式

要绘制圆圈的轮廓，使用 `venn2_circles()` 函数（用于 2 圆韦恩图）与 `venn2()` 函数结合使用。以下代码片段展示了如何绘制带有 `--` 虚线和 `5` 线宽的轮廓：

[PRE16]

> 你可以参考 [https://matplotlib.org/3.1.0/gallery/lines_bars_and_markers/linestyles.html](https://matplotlib.org/3.1.0/gallery/lines_bars_and_markers/linestyles.html) 了解支持的线条样式列表。

这是更新后的韦恩图：

![](../Images/f944c57181997731d277b47bf050256f.png)

## 设置字体大小

韦恩图上显示有两种类型的标签：

+   **标签** — 圆圈外的文本

+   **子集标签** — 圆圈内的文本

以下代码片段设置了两种类型标签的字体大小：

[PRE17]

![](../Images/599bd7a716ea2eed1cff459d01a4772b.png)

## 自定义线条样式

你还可以在 `venn2_circles()` 函数之外以编程方式设置轮廓的样式和线宽：

[PRE18]

![](../Images/2d64c090692178178d0cbbb31d30bf43.png)

## 设置图表标题

由于这是 matplotlib，你显然可以为图形设置标题：

[PRE19]

![](../Images/aa82bc1050093691ca2710d62c707f1e.png)

## 设置子集标签

如果你想自定义单独标签的外观，可以使用 `get_label_by_id()` 函数并传入单个圆圈的二进制值来引用标签，并设置它们的显示文本和颜色：

[PRE20]

![](../Images/f6d600d24223bd4b1c96efc89a0f1e3c.png)

**如果你喜欢阅读我的文章，并且这些文章对你的职业/学习有帮助，请考虑成为 Medium 会员。每月 $5，你可以无限访问 Medium 上的所有文章（包括我的）。如果你使用以下链接注册，我将获得少量佣金（对你没有额外费用）。你的支持意味着我将能花更多时间写这样的文章。**

[](https://weimenglee.medium.com/membership?source=post_page-----6c55e0d78e57--------------------------------) [## 通过我的推荐链接加入 Medium - Wei-Meng Lee

### 阅读 Wei-Meng Lee 的每一个故事（以及 Medium 上成千上万的其他作家）。你的会员费直接支持…

weimenglee.medium.com](https://weimenglee.medium.com/membership?source=post_page-----6c55e0d78e57--------------------------------)

# 总结

就这样完成了！你学会了如何使用示例数据框绘制简单的2圈和3圈维恩图，并且了解了可以对图形进行的各种自定义。绘制维恩图很简单，更具挑战性的是整理你的数据，以便将其传递给API进行绘图。无论如何，希望你玩得开心！
