# 如何使用Matplotlib创建口红图

> 原文：[https://towardsdatascience.com/how-to-create-a-lipstick-chart-with-matplotlib-2fde5412fee9](https://towardsdatascience.com/how-to-create-a-lipstick-chart-with-matplotlib-2fde5412fee9)

## Matplotlib教程

## 一个数据可视化示例，数值越低越好

[](https://medium.com/@oscarleo?source=post_page-----2fde5412fee9--------------------------------)[![Oscar Leo](../Images/7733c9147bad2875a35155fca3903aa8.png)](https://medium.com/@oscarleo?source=post_page-----2fde5412fee9--------------------------------)[](https://towardsdatascience.com/?source=post_page-----2fde5412fee9--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----2fde5412fee9--------------------------------) [Oscar Leo](https://medium.com/@oscarleo?source=post_page-----2fde5412fee9--------------------------------)

·发布于[数据科学探索](https://towardsdatascience.com/?source=post_page-----2fde5412fee9--------------------------------) ·6分钟阅读·2023年9月2日

--

![](../Images/b56bd1ce8dea80d01f57cf4978f28670.png)

今天，我将向你展示如何创建一个口红图，以可视化那些数值越低越好的指标的进展。

当指标具有相似的趋势和主题但尺度不同时，这种方法非常适合。我的目标是分享一个信息，而不仅仅是一个图表。

我准备了一个关于死亡率和疾病的简单数据集，以便你可以专注于创建可视化。

数据来自于[世界银行](https://data.worldbank.org/)，在Creative Commons许可证下公开。如果你想了解更多，我在我的新免费通讯[数据奇迹](https://open.substack.com/pub/datawonder/p/the-worlds-progress-on-mortality?r=17ashl&utm_campaign=post&utm_medium=web)中写了关于该可视化的内容。

如果你喜欢这个教程，确保也看看我的其他教程。

![Oscar Leo](../Images/a3badd168c6bfbbdc3d060f9191ca1d2.png)

[Oscar Leo](https://medium.com/@oscarleo?source=post_page-----2fde5412fee9--------------------------------)

## Matplotlib教程

[查看列表](https://medium.com/@oscarleo/list/matplotlib-tutorials-262e5d7f0847?source=post_page-----2fde5412fee9--------------------------------)8个故事![](../Images/51b77b8f6d7ea69abdcd113427d4a52a.png)![](../Images/56c078b5447338a07b7bce2b23cf7133.png)![](../Images/c3088ee7cd4994f027ddddbc6ae423cd.png)

让我们开始吧。

## 第1步 - 导入库

最简单的部分是导入所需的库，如pandas和matplotlib。

[PRE0]

恭喜，你刚刚完成了第1步！ 🥳

## 第2步 — 创建Seaborn样式

接下来，我想创建一个颜色方案并选择一个字体。像[Coolors](https://coolors.co/)和[Colorhunt](https://colorhunt.co/)这样的网站是寻找美丽颜色的好资源。

这是我为本教程创建seaborn样式的代码和设置。

[PRE1]

我正在移除所有刻度线和线条，以创建一个干净的可视化，网格线对我们的口红图没有额外的信息。

## 步骤3 — 读取数据

你可以像我在下面的代码中那样直接从URL读取CSV。

[PRE2]

下面是数据框的样子。

![](../Images/f47de81d9444a2532f04bd649b46d1cb.png)

截图由作者提供

大多数值是不言而喻的，除了“per”，它显示每行的刻度。例如，最新的“孕产妇死亡率”值是每10万次分娩中有223例。

## 步骤4 — 添加条形图

现在，是时候添加一些数据了。

我正在为2000年及最新值添加条形图。由于我的目标是展示每个值的相对减少，我将每一行除以其2000年的值。

这意味着2000年的每个条形图都会达到1，因此这只是一个视觉辅助，不会添加任何额外的信息。

[PRE3]

我创建一个图形，并像这样运行`add_bars()`函数。

[PRE4]

到目前为止的代码结果如下。

![](../Images/fc47eb7eb76ec908c817a3b30591bd15.png)

图表由作者创建

让我们继续。

## 步骤5 — 格式化坐标轴

每行的名称太长，无法不换行使用。这就是为什么我创建了以下函数，在几个地方添加`\n`到字符串中的原因。

[PRE5]

我还想增加字体大小并移除不必要的信息，以使图表易于阅读。现在创建可视化的代码如下所示。

[PRE6]

这是更新后的结果。

![](../Images/b2665ace9f254cd4fc29b7698ecefbb4.png)

截图由作者提供

让我们添加一些额外的信息。

## 步骤5 — 添加有用的信息

你总是希望确保用户理解他们看到的内容。目前，我们没有任何有用的信息。

首先，我想添加当前值，使用以下函数来实现。

[PRE7]

由于目的是展示每个指标相对于2000年的值的相对减少，我还有另一个函数显示每行的变化。

[PRE8]

我将这两个函数添加到一个for循环中。

[PRE9]

这是输出结果。

![](../Images/c20a06fc75efed11b61d0d42daf28bc3.png)

图表由作者创建

开始看起来不错。

## 步骤6 — 添加标题和图例

在这一步，我只是使用一些内置的Matplotlib函数来添加标题和图例。由于我们在`add_bars()`中定义了`label`，所以大部分样式是自动的。

除了定义标题和图例外，我还使用`Line2D`添加了边框以实现视觉效果。

[PRE10]

现在图表看起来是这样的。

![](../Images/5641db15d4ac07c7e7364c27821d92c9.png)

图表由作者创建

## 步骤7 — 创建图像并添加填充

图表看起来有点拥挤，所以最后一步是添加一些填充。我通过将图形转换为PIL图像来实现这一点，使用如下函数。

[PRE11]

这是添加填充的函数。

[PRE12]

现在我们已经编写了所有创建数据可视化所需的代码。

这是使用所有函数创建最终口红图的完整代码片段。

[PRE13]

这是完成的产品。

![](../Images/2f96394bd75b98d0250a070b8fdcd6fd.png)

作者提供的截图

完成了！

# 结论

感谢你阅读本教程；我希望你学到了一些可以在数据可视化项目中重复使用的技巧。

如果你想查看更多教程和美丽的数据可视化，请在这里关注我，订阅[数据奇迹](https://datawonder.substack.com/)以及在Twitter上关注[oscarl3o](https://twitter.com/oscarl3o)。

下次见。
