- en: Become Fluent in Python Decorators via Visualization
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é€šè¿‡å¯è§†åŒ–æŒæ¡ Python è£…é¥°å™¨
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/become-fluent-in-python-decorators-via-visualization-4cc6ac06f2cb](https://towardsdatascience.com/become-fluent-in-python-decorators-via-visualization-4cc6ac06f2cb)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/become-fluent-in-python-decorators-via-visualization-4cc6ac06f2cb](https://towardsdatascience.com/become-fluent-in-python-decorators-via-visualization-4cc6ac06f2cb)
- en: Comprehend Python Decorators By Visualization
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é€šè¿‡å¯è§†åŒ–ç†è§£ Python è£…é¥°å™¨
- en: '[](https://chengzhizhao.medium.com/?source=post_page-----4cc6ac06f2cb--------------------------------)[![Chengzhi
    Zhao](../Images/186bba91822dbcc0f926426e56faf543.png)](https://chengzhizhao.medium.com/?source=post_page-----4cc6ac06f2cb--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4cc6ac06f2cb--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----4cc6ac06f2cb--------------------------------)
    [Chengzhi Zhao](https://chengzhizhao.medium.com/?source=post_page-----4cc6ac06f2cb--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://chengzhizhao.medium.com/?source=post_page-----4cc6ac06f2cb--------------------------------)[![Chengzhi
    Zhao](../Images/186bba91822dbcc0f926426e56faf543.png)](https://chengzhizhao.medium.com/?source=post_page-----4cc6ac06f2cb--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4cc6ac06f2cb--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----4cc6ac06f2cb--------------------------------)
    [Chengzhi Zhao](https://chengzhizhao.medium.com/?source=post_page-----4cc6ac06f2cb--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4cc6ac06f2cb--------------------------------)
    Â·7 min readÂ·Jan 23, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒåœ¨ [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4cc6ac06f2cb--------------------------------)
    Â·é˜…è¯»æ—¶é—´ 7 åˆ†é’ŸÂ·2023 å¹´ 1 æœˆ 23 æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/c44b22b6f30e95008253cc13f75711a4.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c44b22b6f30e95008253cc13f75711a4.png)'
- en: Photo by [Huyen Bui](https://unsplash.com/ja/@huyenbui30?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/vM9R9uu_BKY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Huyen Bui](https://unsplash.com/ja/@huyenbui30?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    æä¾›ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/photos/vM9R9uu_BKY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
- en: Python decorator is syntactic sugar. You can achieve everything without explicitly
    using the decorator. However, Using the decorator can help your code be more concise
    and readable. Ultimately, you write fewer lines of code by leveraging Python decorators.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Python è£…é¥°å™¨æ˜¯è¯­æ³•ç³–ã€‚ä½ å¯ä»¥åœ¨ä¸æ˜¾å¼ä½¿ç”¨è£…é¥°å™¨çš„æƒ…å†µä¸‹å®ç°æ‰€æœ‰åŠŸèƒ½ã€‚ç„¶è€Œï¼Œä½¿ç”¨è£…é¥°å™¨å¯ä»¥ä½¿ä½ çš„ä»£ç æ›´åŠ ç®€æ´å’Œå¯è¯»ã€‚æœ€ç»ˆï¼Œé€šè¿‡åˆ©ç”¨ Python
    è£…é¥°å™¨ï¼Œä½ å¯ä»¥å†™æ›´å°‘çš„ä»£ç è¡Œæ•°ã€‚
- en: Nevertheless, Python decorator isn't a trivial concept to comprehend. Understanding
    Python decorators requires building blocks, including closure, function as an
    object, and deep knowledge of how Python code is executed.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œç†è§£ Python è£…é¥°å™¨å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„æ¦‚å¿µã€‚ç†è§£ Python è£…é¥°å™¨éœ€è¦æ„å»ºå—ï¼ŒåŒ…æ‹¬é—­åŒ…ã€å‡½æ•°ä½œä¸ºå¯¹è±¡ï¼Œä»¥åŠå¯¹ Python ä»£ç æ‰§è¡Œæ–¹å¼çš„æ·±åˆ»ç†è§£ã€‚
- en: Many online resources talk about Python decorators, but many tutorials only
    provide some sample code walkthroughs. Reading sample code could help to get a
    basic understanding of Python decorator. When it comes time to implement your
    decorator, we might still need clarification and clarity about the decorator concept
    and yet have to refer to the online resource to refresh our memory for detail.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: è®¸å¤šåœ¨çº¿èµ„æºè®¨è®ºäº† Python è£…é¥°å™¨ï¼Œä½†è®¸å¤šæ•™ç¨‹åªæä¾›äº†ä¸€äº›ç¤ºä¾‹ä»£ç çš„æ¼”ç¤ºã€‚é˜…è¯»ç¤ºä¾‹ä»£ç å¯ä»¥å¸®åŠ©ä½ å¯¹ Python è£…é¥°å™¨æœ‰ä¸€ä¸ªåŸºæœ¬çš„ç†è§£ã€‚å½“éœ€è¦å®ç°ä½ çš„è£…é¥°å™¨æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä»ç„¶éœ€è¦å¯¹è£…é¥°å™¨æ¦‚å¿µæœ‰æ›´æ¸…æ™°çš„ç†è§£ï¼Œå¹¶ä¸”è¿˜éœ€è¦å‚è€ƒåœ¨çº¿èµ„æºä»¥ä¾¿è¯¦ç»†å›é¡¾ã€‚
- en: Reading code sometimes doesn't deepen memory but seeing images does. In this
    article, I want to help you understand Python decorator with some visualization
    and fun examples.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: é˜…è¯»ä»£ç æœ‰æ—¶å¹¶ä¸ä¼šåŠ æ·±è®°å¿†ï¼Œä½†çœ‹åˆ°å›¾åƒå´ä¼šæœ‰æ‰€å¸®åŠ©ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³é€šè¿‡ä¸€äº›å¯è§†åŒ–å’Œæœ‰è¶£çš„ç¤ºä¾‹æ¥å¸®åŠ©ä½ ç†è§£ Python è£…é¥°å™¨ã€‚
- en: Python Functions are Objects
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Python å‡½æ•°æ˜¯å¯¹è±¡
- en: '![](../Images/5005c7b57120ec09d984c5e80f8e5eb6.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5005c7b57120ec09d984c5e80f8e5eb6.png)'
- en: Python Functions are Objects | Image by Author
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Python å‡½æ•°æ˜¯å¯¹è±¡ | å›¾ç‰‡ä½œè€…
- en: 'If we went to Python programming 101 class, we might get a drawing like this.
    We defined a variable, a representational name used to reference an object. The
    variable `foo` points to an object at a given time. It can be a list `[1,2,3,4]`
    , it can be a dictionary `[â€œcityâ€: â€œNew Yorkâ€]`, or it can a string `â€œI like dumplingsâ€`'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 'å¦‚æœæˆ‘ä»¬å‚åŠ äº† Python ç¼–ç¨‹åŸºç¡€è¯¾ç¨‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°è¿™æ ·çš„å›¾ç¤ºã€‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥å¼•ç”¨å¯¹è±¡çš„è¡¨ç¤ºæ€§åç§°ã€‚å˜é‡ `foo` åœ¨æŸä¸€æ—¶åˆ»æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨
    `[1,2,3,4]`ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—å…¸ `[â€œcityâ€: â€œNew Yorkâ€]`ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² `â€œI like dumplingsâ€`'
- en: A less covered discussed topic in Python is that the variable `foo` can also
    point to a function `add()` . When the variable refers to a function, the `foo`
    can pass around the same way you used other types like int, str, list, or dict.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Python ä¸­ä¸€ä¸ªè¾ƒå°‘è®¨è®ºçš„è¯é¢˜æ˜¯å˜é‡ `foo` ä¹Ÿå¯ä»¥æŒ‡å‘å‡½æ•° `add()`ã€‚å½“å˜é‡å¼•ç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œ`foo` å¯ä»¥åƒä½¿ç”¨ intã€strã€list
    æˆ– dict ç­‰å…¶ä»–ç±»å‹ä¸€æ ·ä¼ é€’ã€‚
- en: What does that mean I can pass `foo` around? **This unlocks us to pass a function
    as an argument. Furthermore, we can return a function as a return type**
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆè¿™æ„å‘³ç€æˆ‘å¯ä»¥ä¼ é€’ `foo` å—ï¼Ÿ**è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†å‡½æ•°ä½œä¸ºè¿”å›ç±»å‹è¿”å›ã€‚**
- en: '[PRE0]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '**Code walkthrough**'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '**ä»£ç è®²è§£**'
- en: '**Function Definition**: we defined three functions called `add` which adds
    two objects; `I_am_1()` which simply returns number 1; `return_1` which return
    the function `I_am_1`'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**å‡½æ•°å®šä¹‰**ï¼šæˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ `add`ï¼Œç”¨äºåŠ ä¸¤ä¸ªå¯¹è±¡ï¼›`I_am_1()`ï¼Œç®€å•è¿”å›æ•°å­— 1ï¼›`return_1`ï¼Œè¿”å›å‡½æ•° `I_am_1`'
- en: '**Interesting Fact**: Then we point to another variable `foo` to it. To prove
    that function is an object like the other types, we can even remove the original
    function reference named `add` . The rest of the code is still runnable due to
    `foo` refers to the object for the function.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æœ‰è¶£çš„äº‹å®**ï¼šç„¶åæˆ‘ä»¬å°†å…¶æŒ‡å‘å¦ä¸€ä¸ªå˜é‡ `foo`ã€‚ä¸ºäº†è¯æ˜å‡½æ•°åƒå…¶ä»–ç±»å‹ä¸€æ ·æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ç§»é™¤åŸå§‹å‡½æ•°å¼•ç”¨ `add`ã€‚å…¶ä½™ä»£ç ä»ç„¶å¯ä»¥è¿è¡Œï¼Œå› ä¸º
    `foo` å¼•ç”¨çš„æ˜¯å‡½æ•°çš„å¯¹è±¡ã€‚'
- en: '**Result Explain**: `return_1()()` looks wired at first. If we take a closer
    look, it is the same way as we are calling the function, `return_1()` is `I_am_1`
    as it just returns this function. In this case, we can think `return_1()()=1`mentally,
    so it does not surprise us the `foo(1,2)` gives an output of 3\. We can also pass
    `foo(1,2)` to another function. In this case, we passed it to itself. Since `foo(1,2)=3`
    , the outer function will operate as `foo(3,3)` . To get the result, we can pass
    the entire function with its arguments over and let the program execute at runtime
    to decipher everything.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ç»“æœè§£é‡Š**ï¼š`return_1()()` èµ·åˆçœ‹èµ·æ¥æœ‰äº›å¥‡æ€ªã€‚å¦‚æœæˆ‘ä»¬ä»”ç»†è§‚å¯Ÿï¼Œå®ƒå®é™…ä¸Šæ˜¯è°ƒç”¨å‡½æ•°çš„æ–¹å¼ï¼Œ`return_1()` å°±æ˜¯ `I_am_1`ï¼Œå› ä¸ºå®ƒåªæ˜¯è¿”å›è¿™ä¸ªå‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†
    `return_1()()=1` ç†è§£ä¸ºå¿ƒé‡Œæ´»åŠ¨ï¼Œå› æ­¤ `foo(1,2)` å¾—åˆ° 3 çš„è¾“å‡ºä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å°† `foo(1,2)` ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†å…¶ä¼ é€’ç»™äº†å®ƒè‡ªå·±ã€‚ç”±äº
    `foo(1,2)=3`ï¼Œå¤–éƒ¨å‡½æ•°å°†ä½œä¸º `foo(3,3)` æ“ä½œã€‚ä¸ºäº†å¾—åˆ°ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªå‡½æ•°åŠå…¶å‚æ•°ä¼ é€’ï¼Œå¹¶è®©ç¨‹åºåœ¨è¿è¡Œæ—¶æ‰§è¡Œä»¥è§£è¯»æ‰€æœ‰å†…å®¹ã€‚'
- en: '**Code Visualisation**'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '**ä»£ç å¯è§†åŒ–**'
- en: '![](../Images/1b5c4e5630701aa221fbaedd63d6d7ff.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1b5c4e5630701aa221fbaedd63d6d7ff.png)'
- en: Pass Function to another Function | Image By Author
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: å°†å‡½æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•° | å›¾ç‰‡ä½œè€…
- en: Python Decorators Structure
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Python è£…é¥°å™¨ç»“æ„
- en: 'A Python decorator transforms the functionality of the original object without
    modifying the original one. It is syntax sugar that allows users to extend the
    object''s ability more conveniently instead of duplicating some existing code.
    Decorators are a pythonic implementation of the [decorator design pattern](http://en.wikipedia.org/wiki/Decorator_pattern)
    (Note: python decorator isn''t precisely the same as decorator design pattern).'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: Python è£…é¥°å™¨åœ¨ä¸ä¿®æ”¹åŸå§‹å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œè½¬æ¢åŸå§‹å¯¹è±¡çš„åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œä½¿ç”¨æˆ·å¯ä»¥æ›´æ–¹ä¾¿åœ°æ‰©å±•å¯¹è±¡çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯é‡å¤ä¸€äº›ç°æœ‰çš„ä»£ç ã€‚è£…é¥°å™¨æ˜¯
    [è£…é¥°å™¨è®¾è®¡æ¨¡å¼](http://en.wikipedia.org/wiki/Decorator_pattern) çš„ Python å®ç°ï¼ˆæ³¨æ„ï¼šPython
    è£…é¥°å™¨ä¸è£…é¥°å™¨è®¾è®¡æ¨¡å¼å¹¶ä¸å®Œå…¨ç›¸åŒï¼‰ã€‚
- en: 'We have discussed that we can return a function as a return type.Now, we extend
    that idea to demonstrate how a decorator works: **we can return a function as
    a return type within another function.**'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å·²ç»è®¨è®ºäº†å¯ä»¥å°†å‡½æ•°ä½œä¸ºè¿”å›ç±»å‹è¿”å›ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ‰©å±•è¿™ä¸ªæ¦‚å¿µï¼Œæ¼”ç¤ºè£…é¥°å™¨å¦‚ä½•å·¥ä½œï¼š**æˆ‘ä»¬å¯ä»¥åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…å°†å‡½æ•°ä½œä¸ºè¿”å›ç±»å‹è¿”å›ã€‚**
- en: To make our example more fun, we can create our decorator like a wrapper around
    a function and later stacks the multiple decorators.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è®©æˆ‘ä»¬çš„ç¤ºä¾‹æ›´æœ‰è¶£ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªè£…é¥°å™¨ï¼Œåƒä¸€ä¸ªå‡½æ•°çš„åŒ…è£…å™¨ï¼Œç„¶åå †å å¤šä¸ªè£…é¥°å™¨ã€‚
- en: Let's first define our functions and use the example of making some dumplings.
    ğŸ¥ŸğŸ¥ŸğŸ¥Ÿ
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆå®šä¹‰æˆ‘ä»¬çš„å‡½æ•°ï¼Œå¹¶ä»¥åˆ¶ä½œä¸€äº›é¥ºå­ä¸ºä¾‹ã€‚ğŸ¥ŸğŸ¥ŸğŸ¥Ÿ
- en: '[PRE1]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Code walkthrough**'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**ä»£ç è®²è§£**'
- en: '**Function Definition**: we defined three functions called `add_filling_vegetable`,
    `add_dumplings_wrapper`, and `dumplings` . Within `add_filling_vegetable` and
    `add_dumplings_wrapper`, we define a wrapper function that wraps around the original
    function passed as an argument. Additionally, we can do additional things. In
    this case, we print some text before and after the original function. If the original
    function also defined parameters, we can pass them in from the wrapper function.
    We also leverage the magic `*args` and `**kwargs` to be more flexible'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**å‡½æ•°å®šä¹‰**ï¼šæˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ `add_filling_vegetable`ã€`add_dumplings_wrapper` å’Œ `dumplings`ã€‚åœ¨
    `add_filling_vegetable` å’Œ `add_dumplings_wrapper` ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼Œè¯¥å‡½æ•°åŒ…è£¹åœ¨ä½œä¸ºå‚æ•°ä¼ é€’çš„åŸå§‹å‡½æ•°å‘¨å›´ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åšå…¶ä»–çš„äº‹æƒ…ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨åŸå§‹å‡½æ•°ä¹‹å‰å’Œä¹‹åæ‰“å°ä¸€äº›æ–‡æœ¬ã€‚å¦‚æœåŸå§‹å‡½æ•°è¿˜å®šä¹‰äº†å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŒ…è£…å‡½æ•°ä¼ é€’å®ƒä»¬ã€‚æˆ‘ä»¬è¿˜åˆ©ç”¨äº†é­”æ³•
    `*args` å’Œ `**kwargs` æ¥æé«˜çµæ´»æ€§ã€‚'
- en: '**Result Explain**'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ç»“æœè§£é‡Š**'
- en: 'we can call the default ingredients for `meat` by using the default one `add_dumplings_wrapper(add_filling_vegetable(dumplings))()`
    , we can see the function are chaining together. It''s not readable, which we
    will fix shortly with decorator syntax. The core idea here is that we keep passing
    the function object as an argument to another. The function does two things: 1)
    continue doing the unmodified original function; 2) execute additional code. The
    execution of the entire code is like a round trip.'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨é»˜è®¤çš„ `add_dumplings_wrapper(add_filling_vegetable(dumplings))()` æ¥è°ƒç”¨é»˜è®¤çš„æˆåˆ†
    `meat`ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡½æ•°æ˜¯é“¾å¼è°ƒç”¨çš„ã€‚è¿™ä¸æ˜“è¯»ï¼Œæˆ‘ä»¬å°†å¾ˆå¿«ç”¨è£…é¥°å™¨è¯­æ³•æ¥ä¿®å¤å®ƒã€‚è¿™é‡Œçš„æ ¸å¿ƒæ€æƒ³æ˜¯æˆ‘ä»¬ä¸æ–­å°†å‡½æ•°å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åšäº†ä¸¤ä»¶äº‹ï¼š1)
    ç»§ç»­æ‰§è¡Œæœªä¿®æ”¹çš„åŸå§‹å‡½æ•°ï¼›2) æ‰§è¡Œé™„åŠ çš„ä»£ç ã€‚æ•´ä¸ªä»£ç çš„æ‰§è¡Œå°±åƒæ˜¯ä¸€ä¸ªå¾€è¿”æ—…è¡Œã€‚
- en: '![](../Images/bef2eccb094b8a80cbf6f137f7804084.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bef2eccb094b8a80cbf6f137f7804084.png)'
- en: '`add_dumplings_wrapper(add_filling_vegetable(dumplings))() | Image By Author`'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '`add_dumplings_wrapper(add_filling_vegetable(dumplings))() | å›¾ç‰‡ç”±ä½œè€…æä¾›`'
- en: 2\. for `add_dumplings_wrapper(add_filling_vegetable(dumplings))(ingredients=â€™tofuâ€™)`
    it changes the default ingredients from `meat` to `tofu` by passing an additional
    argument. In this case, `*args` and `**kwargs` is very useful for resolving the
    complexity. The wrapper functions don't have to unwrap to know the context of
    the argument. As a decorator, it is safe to pass down the actual function without
    modifying them.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 2\. å¯¹äº `add_dumplings_wrapper(add_filling_vegetable(dumplings))(ingredients=â€™tofuâ€™)`ï¼Œå®ƒé€šè¿‡ä¼ é€’é¢å¤–çš„å‚æ•°å°†é»˜è®¤æˆåˆ†ä»
    `meat` æ”¹ä¸º `tofu`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`*args` å’Œ `**kwargs` å¯¹äºè§£å†³å¤æ‚æ€§éå¸¸æœ‰ç”¨ã€‚åŒ…è£…å™¨å‡½æ•°ä¸éœ€è¦è§£åŒ…ä»¥äº†è§£å‚æ•°çš„ä¸Šä¸‹æ–‡ã€‚ä½œä¸ºä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒå¯ä»¥å®‰å…¨åœ°ä¼ é€’å®é™…å‡½æ•°è€Œä¸éœ€è¦ä¿®æ”¹å®ƒä»¬ã€‚
- en: '![](../Images/f9310b64980d7273c4f08cb100cf7f6f.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f9310b64980d7273c4f08cb100cf7f6f.png)'
- en: '`add_dumplings_wrapper(add_filling_vegetable(dumplings))(ingredients=â€™tofuâ€™)`'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '`add_dumplings_wrapper(add_filling_vegetable(dumplings))(ingredients=â€™tofuâ€™)`'
- en: So far, we havenâ€™t touched the decorator syntax yet. Letâ€™s make a small change
    in how we define the original function and call it `fancy_dumplings`.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è§¦åŠè£…é¥°å™¨è¯­æ³•ã€‚è®©æˆ‘ä»¬å¯¹åŸå§‹å‡½æ•°çš„å®šä¹‰åšä¸€ä¸ªå°æ”¹å˜ï¼Œç§°å…¶ä¸º `fancy_dumplings`ã€‚
- en: '[PRE2]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Now decorator simplifies how we call all the functions and makes it more readable.
    We only need to call `fancy_dumplings` only once. it is much cleaner visually
    than nesting multiple functions horizontally.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è£…é¥°å™¨ç®€åŒ–äº†æˆ‘ä»¬è°ƒç”¨æ‰€æœ‰å‡½æ•°çš„æ–¹å¼ï¼Œä½¿å…¶æ›´å…·å¯è¯»æ€§ã€‚æˆ‘ä»¬åªéœ€è¦è°ƒç”¨ä¸€æ¬¡`fancy_dumplings`ã€‚è¿™æ¯”æ°´å¹³åµŒå¥—å¤šä¸ªå‡½æ•°åœ¨è§†è§‰ä¸Šè¦å¹²å‡€å¾—å¤šã€‚
- en: What can I use decorators for?
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æˆ‘å¯ä»¥ç”¨è£…é¥°å™¨åšä»€ä¹ˆå‘¢ï¼Ÿ
- en: Great! How to create the Python decorators are clear to us now. What can I use
    decorators for?
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: å¤ªæ£’äº†ï¼ç°åœ¨æˆ‘ä»¬æ¸…æ¥šäº†å¦‚ä½•åˆ›å»º Python è£…é¥°å™¨ã€‚æˆ‘å¯ä»¥ç”¨è£…é¥°å™¨åšä»€ä¹ˆå‘¢ï¼Ÿ
- en: There are many potential practical use cases for Python decorators. It makes
    your code easier to read and dynamically. *Note you donâ€™t necessarily need to
    go decorators. We can always implement a wrapper around another function to achieve
    the same goal.* ***The decorator is just syntactic sugar****.*
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: Python è£…é¥°å™¨æœ‰è®¸å¤šæ½œåœ¨çš„å®é™…åº”ç”¨åœºæ™¯ã€‚å®ƒä½¿ä½ çš„ä»£ç æ›´æ˜“è¯»ä¸”æ›´å…·åŠ¨æ€æ€§ã€‚*è¯·æ³¨æ„ï¼Œä½ ä¸ä¸€å®šéœ€è¦ä½¿ç”¨è£…é¥°å™¨ã€‚æˆ‘ä»¬æ€»æ˜¯å¯ä»¥åœ¨å¦ä¸€ä¸ªå‡½æ•°å‘¨å›´å®ç°ä¸€ä¸ªåŒ…è£…å™¨æ¥è¾¾åˆ°ç›¸åŒçš„ç›®çš„ã€‚*
    ***è£…é¥°å™¨åªæ˜¯è¯­æ³•ç³–***ã€‚
- en: You can build your time decorator to evaluate the performance for a given function.
    The following is a timer example from [Primer on Python Decorators](https://realpython.com/primer-on-python-decorators/#a-few-real-world-examples)
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥æ„å»ºä¸€ä¸ªæ—¶é—´è£…é¥°å™¨æ¥è¯„ä¼°ç»™å®šå‡½æ•°çš„æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯æ¥è‡ª [Python è£…é¥°å™¨å…¥é—¨](https://realpython.com/primer-on-python-decorators/#a-few-real-world-examples)
    çš„ä¸€ä¸ªè®¡æ—¶å™¨ç¤ºä¾‹ã€‚
- en: '[PRE3]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: It measures the time to execute a given function. Letâ€™s stack it with our dumplings
    example.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒæµ‹é‡æ‰§è¡Œç»™å®šå‡½æ•°çš„æ—¶é—´ã€‚è®©æˆ‘ä»¬å°†å…¶ä¸æˆ‘ä»¬çš„é¥ºå­ç¤ºä¾‹ç»“åˆèµ·æ¥ã€‚
- en: '[PRE4]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: You can keep stacking the decorators to achieve your goal by simply calling
    the original function without worrying about wrapping other functions around when
    calling, as we have provided the sequence of the decorator when we define the
    original function.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥ç»§ç»­å †å è£…é¥°å™¨æ¥å®ç°ä½ çš„ç›®æ ‡ï¼Œåªéœ€ç®€å•åœ°è°ƒç”¨åŸå§‹å‡½æ•°ï¼Œæ— éœ€æ‹…å¿ƒåœ¨è°ƒç”¨æ—¶åŒ…è£…å…¶ä»–å‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å®šä¹‰åŸå§‹å‡½æ•°æ—¶å·²ç»æä¾›äº†è£…é¥°å™¨çš„é¡ºåºã€‚
- en: '![](../Images/d99170ba9040d4b0cb7d30c8879e8e77.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d99170ba9040d4b0cb7d30c8879e8e77.png)'
- en: Photo by [Markus Spiske](https://unsplash.com/@markusspiske?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/IiEFmIXZWSw?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ç…§ç‰‡ç”±[Markus Spiske](https://unsplash.com/@markusspiske?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)æä¾›ï¼Œå‘å¸ƒåœ¨[Unsplash](https://unsplash.com/photos/IiEFmIXZWSw?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)ä¸Šã€‚
- en: Final Thoughts
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æœ€åçš„æƒ³æ³•
- en: There are many possibilities you can leverage the Python decorators. Essentially,
    itâ€™s a wrapper to alert the behavior of the original function. It depends on your
    perspective to judge how practical the decorator is, but it shouldn't be a syntax
    that feels foreign to you. I hope with some visualization, the concept of decorators
    becomes more straightforward to understand. Please let me know if you have any
    comments on this story.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥åˆ©ç”¨ Python è£…é¥°å™¨çš„è®¸å¤šå¯èƒ½æ€§ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…è£…å™¨ï¼Œç”¨äºæ”¹å˜åŸå§‹å‡½æ•°çš„è¡Œä¸ºã€‚è£…é¥°å™¨çš„å®ç”¨æ€§å–å†³äºä½ çš„è§‚ç‚¹ï¼Œä½†å®ƒä¸åº”æ˜¯è®©ä½ æ„Ÿåˆ°é™Œç”Ÿçš„è¯­æ³•ã€‚å¸Œæœ›é€šè¿‡ä¸€äº›å¯è§†åŒ–ï¼Œè£…é¥°å™¨çš„æ¦‚å¿µå˜å¾—æ›´å®¹æ˜“ç†è§£ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªæ•…äº‹æœ‰ä»»ä½•è¯„è®ºï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚
- en: 'I hope this story is helpful to you. This article is **part of a series** of
    my engineering & data science stories that currently consist of the following:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: å¸Œæœ›è¿™ä¸ªæ•…äº‹å¯¹ä½ æœ‰å¸®åŠ©ã€‚æœ¬æ–‡æ˜¯**æˆ‘çš„å·¥ç¨‹ä¸æ•°æ®ç§‘å­¦æ•…äº‹ç³»åˆ—çš„ä¸€éƒ¨åˆ†**ï¼Œç›®å‰åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š
- en: '![Chengzhi Zhao](../Images/51b8d26809e870b4733e4e5b6d982a9f.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![Chengzhi Zhao](../Images/51b8d26809e870b4733e4e5b6d982a9f.png)'
- en: '[Chengzhi Zhao](https://chengzhizhao.medium.com/?source=post_page-----4cc6ac06f2cb--------------------------------)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '[Chengzhi Zhao](https://chengzhizhao.medium.com/?source=post_page-----4cc6ac06f2cb--------------------------------)'
- en: Data Engineering & Data Science Stories
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ•°æ®å·¥ç¨‹ä¸æ•°æ®ç§‘å­¦æ•…äº‹
- en: '[View list](https://chengzhizhao.medium.com/list/data-engineering-data-science-stories-ddab37f718e7?source=post_page-----4cc6ac06f2cb--------------------------------)53
    stories![](../Images/8b5085966553259eef85cc643e6907fa.png)![](../Images/9dcdca1fc00a5694849b2c6f36f038d4.png)![](../Images/2a6b2af56aa4d87fa1c30407e49c78f7.png)'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '[æŸ¥çœ‹åˆ—è¡¨](https://chengzhizhao.medium.com/list/data-engineering-data-science-stories-ddab37f718e7?source=post_page-----4cc6ac06f2cb--------------------------------)53ä¸ªæ•…äº‹![](../Images/8b5085966553259eef85cc643e6907fa.png)![](../Images/9dcdca1fc00a5694849b2c6f36f038d4.png)![](../Images/2a6b2af56aa4d87fa1c30407e49c78f7.png)'
- en: You can also [**subscribe to my new articles**](https://chengzhizhao.medium.com/subscribe)
    or become a [**referred Medium member**](https://chengzhizhao.medium.com/membership)who
    gets unlimited access to all the stories on Medium.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ ä¹Ÿå¯ä»¥[**è®¢é˜…æˆ‘çš„æ–°æ–‡ç« **](https://chengzhizhao.medium.com/subscribe)æˆ–æˆä¸º[**æ¨èçš„ Medium
    ä¼šå‘˜**](https://chengzhizhao.medium.com/membership)ï¼Œäº«å—å¯¹ Medium ä¸Šæ‰€æœ‰æ•…äº‹çš„æ— é™è®¿é—®æƒé™ã€‚
- en: In case of questions/comments, **do not hesitate to write in the comments**
    of this story or **reach me directly** through [Linkedin](https://www.linkedin.com/in/chengzhizhao/)
    or [Twitter](https://twitter.com/ChengzhiZhao).
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœ‰ç–‘é—®/è¯„è®ºï¼Œ**è¯·éšæ—¶åœ¨æœ¬æ–‡è¯„è®ºä¸­å†™ä¸‹**ï¼Œæˆ–é€šè¿‡[Linkedin](https://www.linkedin.com/in/chengzhizhao/)æˆ–[Twitter](https://twitter.com/ChengzhiZhao)ç›´æ¥è”ç³»æˆ‘ã€‚
