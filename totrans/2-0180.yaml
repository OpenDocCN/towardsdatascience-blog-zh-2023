- en: A Comprehensive Overview of Regression Evaluation Metrics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 回归评估指标的全面概述
- en: 原文：[https://towardsdatascience.com/a-comprehensive-overview-of-regression-evaluation-metrics-6264af0926db](https://towardsdatascience.com/a-comprehensive-overview-of-regression-evaluation-metrics-6264af0926db)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/a-comprehensive-overview-of-regression-evaluation-metrics-6264af0926db](https://towardsdatascience.com/a-comprehensive-overview-of-regression-evaluation-metrics-6264af0926db)
- en: '![](../Images/77a024aef30e9daead7e900ad76280bf.png)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/77a024aef30e9daead7e900ad76280bf.png)'
- en: Image created by author using icons from [icons8](https://icons8.com/)
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 图片由作者使用来自 [icons8](https://icons8.com/) 的图标创建
- en: An extensive reference into commonly used regression evaluation metrics and
    their practical applications across various scenarios
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对常用回归评估指标及其在各种场景中的实际应用进行广泛参考
- en: '[](https://eryk-lewinson.medium.com/?source=post_page-----6264af0926db--------------------------------)[![Eryk
    Lewinson](../Images/56e09e19c0bbfecc582da58761d15078.png)](https://eryk-lewinson.medium.com/?source=post_page-----6264af0926db--------------------------------)[](https://towardsdatascience.com/?source=post_page-----6264af0926db--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----6264af0926db--------------------------------)
    [Eryk Lewinson](https://eryk-lewinson.medium.com/?source=post_page-----6264af0926db--------------------------------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://eryk-lewinson.medium.com/?source=post_page-----6264af0926db--------------------------------)[![Eryk
    Lewinson](../Images/56e09e19c0bbfecc582da58761d15078.png)](https://eryk-lewinson.medium.com/?source=post_page-----6264af0926db--------------------------------)[](https://towardsdatascience.com/?source=post_page-----6264af0926db--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----6264af0926db--------------------------------)
    [Eryk Lewinson](https://eryk-lewinson.medium.com/?source=post_page-----6264af0926db--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----6264af0926db--------------------------------)
    ·15 min read·May 1, 2023
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: ·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----6264af0926db--------------------------------)
    ·阅读时间 15 分钟·2023年5月1日
- en: --
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: As a data scientist, evaluating the performance of machine learning models is
    a crucial aspect of your work. To do so effectively, you have a wide range of
    statistical metrics at your disposal, each with its own unique strengths and weaknesses.
    By developing a solid understanding of these metrics, you are not only better
    equipped to choose the best one for optimizing your model but also to explain
    your choice and its implications to business stakeholders.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 作为数据科学家，评估机器学习模型的性能是你工作的重要方面。为了有效地做到这一点，你可以利用各种统计指标，每个指标都有其独特的优点和缺点。通过深入理解这些指标，你不仅可以更好地选择优化模型的最佳指标，还能向业务利益相关者解释你的选择及其影响。
- en: In this article, I focus on metrics that are used to evaluate regression problems
    which predict numeric values — such as the price of a house or a forecast of a
    company’s sales for next month. Since regression analysis is considered to be
    the foundation of data science, it is essential to understand its nuances.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我重点介绍了用于评估回归问题的指标，这些问题预测数值——如房价或公司下月销售预测。由于回归分析被视为数据科学的基础，理解其细微差别是至关重要的。
- en: A quick primer on residuals
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 残差的快速概述
- en: Residuals are the building blocks of the majority of the metrics. In simple
    terms, a residual is a difference between the actual value and the predicted one.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 残差是大多数指标的基本构建块。简单来说，残差是实际值与预测值之间的差异。
- en: '[PRE0]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The following figure presents the relationship between a target variable (*y*)
    and a single feature (*x*). The blue dots represent observations. The red line
    is the fit of a machine learning model, in this case, a linear regression. The
    orange lines represent the differences between the observed values and the predictions
    for those observations. As such, residuals can be calculated for each observation
    in the dataset, be it the training or test set.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了目标变量(*y*)与单个特征(*x*)之间的关系。蓝色点代表观测值。红线是机器学习模型的拟合结果，在这种情况下是线性回归。橙色线条表示观测值与这些观测的预测之间的差异。因此，可以为数据集中每个观测值（无论是训练集还是测试集）计算残差。
- en: '![](../Images/356b81e83a3513f71b5a25e3e422e269.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/356b81e83a3513f71b5a25e3e422e269.png)'
- en: '*Figure 1\. Example of residuals in a linear model with one feature*'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 1\. 具有一个特征的线性模型中的残差示例*'
- en: Regression evaluation metrics
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 回归评估指标
- en: This section discusses some of the most popular regression evaluation metrics
    that can help you assess the effectiveness of your model.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 本节讨论了一些最受欢迎的回归评估指标，这些指标可以帮助你评估模型的有效性。
- en: Bias
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 偏差
- en: The simplest error measure would be the sum of residuals, sometimes referred
    to as bias. As the residuals can be both positive (prediction is smaller than
    the actual value) and negative (prediction is larger than the actual value), bias
    generally tells us whether our predictions were higher or lower than the actuals.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 最简单的误差度量是残差的总和，有时称为偏差。由于残差可以是正值（预测值小于实际值）和负值（预测值大于实际值），偏差通常告诉我们预测值是否高于或低于实际值。
- en: However, as the residuals of opposing signs offset each other, we can obtain
    a model that generates predictions with a very low bias, while not being accurate
    at all.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，由于对立符号的残差相互抵消，我们可能会得到一个产生非常低偏差预测的模型，而其准确性却非常差。
- en: Alternatively, we can calculate the average residual, or *mean bias error* (MBE).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，我们可以计算平均残差，或称为*均值偏差误差*（MBE）。
- en: R-squared
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: R平方
- en: The next metric is probably the first one you encounter while learning about
    regression models, especially if that is during statistics or econometrics classes.
    *R-squared*(R²), also known as the coefficient of determination, represents the
    proportion of variance explained by a model. To be more precise, R² corresponds
    to the degree to which the variance in the dependent variable (the target) can
    be explained by the independent variables (features).
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个指标可能是你在学习回归模型时首先遇到的，特别是在统计学或计量经济学课程中。*R平方*（R²），也称为决定系数，表示模型解释的方差比例。更准确地说，R²
    对应于因变量（目标）方差的程度可以由自变量（特征）解释。
- en: The following formula is used to calculate R².
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 以下公式用于计算 R²。
- en: '![](../Images/bec0d09162fb4bcbdcfa481c3c1c8a01.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bec0d09162fb4bcbdcfa481c3c1c8a01.png)'
- en: 'Where:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 其中：
- en: RSS is the residual sum of squares, which is the sum of squared residuals. This
    value captures the prediction error of a model.
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RSS 是残差平方和，即残差平方的总和。这个值捕捉了模型的预测误差。
- en: TSS is the total sum of squares. To calculate this value, first we assume a
    simple model in which the prediction for each observation is the mean of all the
    observed actuals. TSS is proportional to the variance of the dependent variable,
    as TSS/N is the actual variance of *y* where *N* is the number of observations*.*
    That is why we can think of TSS as the variance that a simple mean model cannot
    explain.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TSS 是总平方和。为了计算这个值，我们首先假设一个简单模型，其中每个观测值的预测值是所有观察实际值的均值。TSS 与因变量的方差成正比，因为 TSS/N
    是*y* 的实际方差，其中 *N* 是观察次数。也就是说，我们可以将 TSS 看作是简单均值模型无法解释的方差。
- en: Effectively, we are comparing the fit of a model (represented by the red line
    in Figure 2) to that of a simple mean model (represented by the green line).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，我们是在比较一个模型的拟合程度（如图2中的红线所示）与一个简单均值模型的拟合程度（如图中绿色线所示）。
- en: '![](../Images/3710edf168b1704dd64a2052e0ed0a76.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3710edf168b1704dd64a2052e0ed0a76.png)'
- en: '*Figure 2\. Comparing the fit of a linear model to a simple mean benchmark*'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '*图2\. 比较线性模型与简单均值基准的拟合情况*'
- en: Knowing what the components of R² stand for, we can see that RSS/TSS represents
    the fraction of the total variance in the target that our model was not able to
    explain.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 了解了 R² 的组成部分后，我们可以看到 RSS/TSS 代表了目标总方差中模型无法解释的部分。
- en: There are quite a few additional points to keep in mind when working with R².
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用 R² 时需要注意一些额外的点。
- en: First of all, R² is a relative metric, that is, it can be used to compare with
    other models trained on the same dataset. A higher value indicates a better fit.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，R² 是一个相对度量，即它可以用于与在相同数据集上训练的其他模型进行比较。更高的值表示拟合更好。
- en: 'R² can also be used to get a rough estimate of how the model performs in general.
    However, we should be careful when using R² for such evaluations:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: R² 也可以用来粗略估计模型的整体表现。然而，在使用 R² 进行这种评估时，我们应该小心：
- en: First, different fields (social sciences, biology, finance, and more) consider
    different values of R² as good or bad.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，不同领域（社会科学、生物学、金融等）对 R² 的不同值有不同的好坏标准。
- en: Second, R² does not give any measure of bias, so we can have an overfitted (highly
    biased) model with a high value of R². As such, we should also look at other metrics
    to get a good understanding of a model’s performance.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其次，R² 并没有给出任何偏差的度量，因此我们可能会有一个高 R² 值的过拟合（高度偏差）模型。因此，我们还应该查看其他指标，以便更好地理解模型的表现。
- en: A potential drawback of R² is that it assumes that every feature helps in explaining
    the variation in the target, when that might not always be the case. For this
    reason, if we continue adding features to a linear model estimated using ordinary
    least squares (OLS), the value of R² might increase or remain unchanged, but it
    never decreases.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: Why? By design, OLS estimation minimizes the RSS. Suppose a model with an additional
    feature does not improve the value of R² of the first model. In that case, the
    OLS estimation technique sets that feature’s coefficients to zero (or some statistically
    insignificant value). In turn, this effectively brings us back to the initial
    model. In the worst-case scenario, we can get the score of our starting point.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: A solution to the problem mentioned in the previous point is the adjusted R²,
    which additionally penalizes adding features that are not useful for predicting
    the target. The value of the adjusted R² decreases if the increase in the R² caused
    by adding new features is not significant enough.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: As the last point, we left the often misunderstood issue of R²’s range of values.
    If a linear model is fitted using OLS, the range of R² is 0 to 1\. That is because
    when using the OLS estimation (which minimizes the RSS), the general property
    is that *RSS ≤ TSS.* In the worst-case scenario, OLS estimation would result in
    obtaining the mean model. In that case, RSS would be equal to TSS and result in
    the minimum value of R² being 0\. On the other hand, the best case would be RSS
    = 0 and R² = 1.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: In the case of non-linear models, it is possible that R² is negative. As the
    model fitting procedure of such models is not based on iteratively minimizing
    the RSS, the fitted model could have an RSS greater than the TSS. In other words,
    the model’s predictions fit the data worse than the simple mean model. For more,
    information, see [When is R squared negative?](https://stats.stackexchange.com/questions/12900/when-is-r-squared-negative)
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: '*Bonus*: Using R², we can evaluate how much better our model fits the data
    as compared to the simple mean model. We can think of a positive R² value in terms
    of improving the performance of a baseline model — something along the lines of
    a skill score. For example, R² of 40% indicates that our model has reduced the
    mean squared error by 40% compared to the baseline mean model.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: Mean squared error
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Mean squared error* (MSE) is one of the most popular evaluation metrics. As
    shown in the following formula, MSE is closely related to the residual sum of
    squares. The difference is that we are now interested in the average error instead
    of the total error.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b217c2e88140bbd58b0c959ca54381d9.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
- en: 'Here are some points to take into account when working with MSE:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: MSE uses the mean (instead of the sum) to keep the metric independent of the
    dataset size.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: As the residuals are squared, MSE puts a significantly heavier penalty on large
    errors. Some of those might be outliers, so MSE is not robust to their presence.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于残差被平方，MSE 对大误差施加了显著更重的惩罚。其中一些可能是离群值，因此 MSE 对其存在不鲁棒。
- en: As the metric is expressed using squares, sums, and constants (1/N) it is differentiable.
    This is useful for optimization algorithms.
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于度量指标是通过平方、求和和常数（1/N）表示的，它是可导的。这对优化算法非常有用。
- en: While optimizing for MSE (setting its derivative to 0), the model aims for the
    total sum of predictions to be equal to the total sum of actuals. That is, it
    leads to predictions that are correct on average. Therefore, they are unbiased.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在优化 MSE（将其导数设为 0）时，模型的目标是使预测的总和等于实际值的总和。也就是说，这会导致预测在平均上是正确的。因此，它们是无偏的。
- en: MSE is not measured in the original units, which can make it harder to interpret.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MSE 不以原始单位进行测量，这可能使其更难解释。
- en: MSE is an example of a scale-dependent metric, that is, the error is expressed
    in the units of the underlying data (even though it actually needs a square root
    to be expressed on the same scale). Therefore, such metrics cannot be used to
    compare the performance between different datasets.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MSE 是一个依赖于尺度的度量指标，即误差以基础数据的单位表示（尽管实际上需要平方根才能以相同尺度表示）。因此，这些度量指标不能用于比较不同数据集之间的性能。
- en: Root mean squared error
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 均方根误差
- en: '*Root mean squared error* (RMSE) is closely related to MSE, as it is simply
    the square root of the latter. By taking the square we bring the metric back to
    the scale of the target variable, so it is easier to interpret and understand.
    However, one fact that is often overlooked is that although RMSE is on the same
    scale as the target, an RMSE of 10 does not actually mean we are off by 10 units
    on average.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '*均方根误差*（RMSE）与 MSE 紧密相关，因为它只是后者的平方根。通过平方我们将度量指标恢复到目标变量的尺度，因此更容易解释和理解。然而，一个经常被忽视的事实是，虽然
    RMSE 与目标在同一尺度上，但 RMSE 为 10 实际上并不意味着我们的平均偏差为 10 个单位。'
- en: '![](../Images/75d46b7d334fbaf5d13c5cde45b72546.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/75d46b7d334fbaf5d13c5cde45b72546.png)'
- en: Other than the scale, RMSE has the same properties as MSE. As a matter of fact,
    optimizing for RMSE while training a model will result in the same model as that
    obtained while optimizing for MSE.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 除了尺度之外，RMSE 具有与 MSE 相同的属性。实际上，在训练模型时优化 RMSE 会得到与优化 MSE 时相同的模型。
- en: Mean absolute error
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 平均绝对误差
- en: The formula to calculate *mean absolute error* (MAE) is similar to the MSE formula.
    We simply have to replace the square with the absolute value.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 计算*平均绝对误差*（MAE）的公式类似于 MSE 公式。我们只需将平方替换为绝对值即可。
- en: '![](../Images/75977f451d32d69c2454441c5fac56c8.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/75977f451d32d69c2454441c5fac56c8.png)'
- en: 'Characteristics of MAE include the following:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: MAE 的特点包括：
- en: Due to the lack of squaring, the metric is expressed at the same scale as the
    target variable, making it easier to interpret.
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于没有平方，该度量指标以与目标变量相同的尺度表示，从而更易于解释。
- en: All errors are treated equally, so the metric is robust to outliers.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有误差都被平等对待，因此该度量对离群值具有鲁棒性。
- en: Absolute value disregards the direction of the errors, so underforecasting =
    overforecasting.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绝对值忽略了误差的方向，因此低估 = 高估。
- en: Similar to MSE and RMSE, MAE is also scale-dependent, so we cannot compare it
    between different datasets.
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类似于 MSE 和 RMSE，MAE 也依赖于尺度，因此我们不能在不同的数据集之间进行比较。
- en: When you optimize for MAE, the prediction must be as many times higher than
    the actual value as it should be lower. That means that we are effectively looking
    for the median; that is, a value that splits a dataset into two equal parts.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你优化 MAE 时，预测值必须比实际值高出多少倍，就必须低多少倍。这意味着我们实际上是在寻找中位数，即将数据集分成两个相等部分的值。
- en: As the formula contains absolute values, MAE is not easily differentiable.
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于公式包含绝对值，MAE 不容易求导。
- en: Mean absolute percentage error
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 平均绝对百分比误差
- en: '*Mean absolute percentage error* (MAPE) is one of the most popular metrics
    on the business side. That is because it is expressed as a percentage, which makes
    it much easier to understand and interpret.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '*平均绝对百分比误差*（MAPE）是商业领域最受欢迎的指标之一。这是因为它以百分比表示，使其更易于理解和解释。'
- en: '![](../Images/6695b92fcc981929de25eb03c7d683fb.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6695b92fcc981929de25eb03c7d683fb.png)'
- en: To make the metric even easier to read, we can multiply it by 100% to express
    the number as a percentage.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使度量指标更易读，我们可以将其乘以 100% 以将数字表示为百分比。
- en: 'Points to consider:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 需要考虑的事项：
- en: MAPE is expressed as a percentage, which makes it a scale-independent metric.
    It can be used to compare predictions on different scales.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MAPE can exceed 100%.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MAPE is undefined when the actuals are zero (division by zero). Additionally,
    it can take extreme values when the actuals are very close to zero.
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MAPE is asymmetric and puts a heavier penalty on negative errors (when predictions
    are higher than actuals) than on positive ones. This is caused by the fact that
    the percentage error cannot exceed 100% for forecasts that are too low. Meanwhile,
    there is no upper limit for forecasts that are too high. As a result, optimizing
    for MAPE will favor models that underforecast rather than overforecast.
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Hyndman (2021) elaborates on the often-forgotten assumption of MAPE, that is,
    the unit of measurement of the variable has a meaningful zero value. As such,
    forecasting demand and using MAPE do not raise any red flags. However, we will
    encounter that problem when forecasting temperature expressed on the Celsius scale
    (and not only that one). That is because the temperature has an arbitrary zero
    point and it does not make sense to talk about percentages in their context.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MAPE is not differentiable everywhere, which can result in problems while using
    it as the optimization criterion.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: As MAPE is a relative metric, the same error can result in a different loss
    depending on the actual value. For example, for a predicted value of 60 and an
    actual of 100, the MAPE would be 40%. For a predicted value of 60 and an actual
    of 20, the nominal error is still 40, but on the relative scale, it is 300%.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Unfortunately, MAPE does not provide a good way to differentiate the important
    from the irrelevant. Assume we are working on demand forecasting and over a horizon
    of a few months, we get a MAPE of 10% for two different products. Then, it turns
    out that the first product sells an average of 1 million units per month, while
    the other only 100\. Both have the same 10% MAPE. When aggregating over all products,
    those two would contribute equally, which can be far from desirable. In such cases,
    it makes sense to consider weighted MAPE (wMAPE).
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Symmetric mean absolute percentage error
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: While discussing MAPE, I mentioned that one of its potential drawbacks is its
    asymmetry (not limiting the predictions that are higher than the actuals). *Symmetric
    mean absolute percentage error* (sMAPE) is a related metric that attempts to fix
    that issue.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/2515d0171cb1876af60e131a9fb6b0a6.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
- en: 'Points to consider when using sMAPE:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: It is expressed as a bounded percentage, that is, it has lower (0%) and upper
    (200%) bounds.
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The metric is still unstable when both the true value and the forecast are very
    close to zero. When it happens, we will deal with division by a number very close
    to zero.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The range of 0% to 200% is not intuitive to interpret. Dividing by two in the
    denominator is often omitted.
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Whenever the actual value or the forecast has a value is 0, sMAPE will automatically
    hit the upper boundary value.
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无论实际值还是预测值为 0，sMAPE 都会自动达到上限值。
- en: sMAPE includes the same assumptions as MAPE regarding a meaningful zero value.
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: sMAPE 包含与 MAPE 相同的假设，即有意义的零值。
- en: While fixing the asymmetry of boundlessness, sMAPE introduces another kind of
    delicate asymmetry caused by the denominator of the formula. Imagine two cases.
    In the first one, we have A = 100 and F = 120\. The sMAPE is 18.2%. Now a similar
    case, in which we have A = 100 and F = 80, the sMAPE is 22.2%. As such, sMAPE
    tends to penalize underforecasting more severely than overforecasting.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在修正无界的不对称性时，sMAPE 引入了另一种微妙的不对称性，这是由公式的分母造成的。设想两种情况。在第一种情况下，我们有 A = 100 和 F =
    120。sMAPE 为 18.2%。现在类似的情况，我们有 A = 100 和 F = 80，sMAPE 为 22.2%。因此，sMAPE 倾向于对低估进行比高估更严厉的惩罚。
- en: sMAPE might be one of the most controversial error metrics, especially in time
    series forecasting. That is because there are at least a few versions of this
    metric in the literature, each one with slight differences that impact its properties.
    Finally, the name of the metric suggests that there is no asymmetry, but that
    is not the case.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: sMAPE 可能是最具争议的误差指标之一，尤其是在时间序列预测中。这是因为文献中至少有几种不同版本的这个指标，每一种都有细微的差异，这些差异会影响其属性。最后，这个指标的名称暗示了没有不对称性，但实际上并非如此。
- en: Other regression evaluation metrics to consider
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他回归评估指标
- en: 'I have not described all the possible regression evaluation metrics, as there
    are dozens (if not hundreds). Here are a few more metrics to consider while evaluating
    models:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我没有描述所有可能的回归评估指标，因为有几十种（如果不是上百种）。这里有一些其他的指标可以在评估模型时考虑：
- en: '*Mean squared log error* (MSLE) is a cousin of MSE, with the difference that
    we take the log of the actuals and predictions before calculating the squared
    error. Taking the logs of the two elements in subtraction results in measuring
    the ratio or relative difference between the actual value and the prediction,
    while neglecting the scale of the data. That is why MSLE reduces the impact of
    outliers on the final score. MSLE also puts a heavier penalty on underforecasting.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*均方对数误差*（MSLE）是 MSE 的一个相关指标，区别在于我们在计算平方误差之前对实际值和预测值取对数。对两个元素进行对数变换的结果是测量实际值与预测值之间的比例或相对差异，同时忽略数据的规模。这就是为什么
    MSLE 减少了异常值对最终得分的影响。MSLE 还对低估进行了更严厉的惩罚。'
- en: '*Root mean squared log error* (RMSLE) is a metric that takes the square root
    of MSLE. It has the same properties as MSLE.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*均方根对数误差*（RMSLE）是一个对 MSLE 取平方根的指标。它具有与 MSLE 相同的属性。'
- en: '*Akaike information criterion* (AIC) and *Bayesian information criterion* (BIC)
    are examples of information criteria. They are used to find a balance between
    a good fit and the complexity of a model. If we start with a simple model with
    a few parameters and add more, our model will probably fit the training data better.
    However, it will also grow in complexity and risk overfitting. On the other hand,
    if we start with many parameters and systematically remove some of them, the model
    becomes simpler. At the same time, we reduce the risk of overfitting at the potential
    cost of losing on performance (goodness of fit). The difference between AIC and
    BIC is the weight of the penalty for complexity. Keep in mind that it is not valid
    to compare the information criteria on different datasets or even subsamples of
    the same dataset but with a different number of observations.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*赤池信息量准则*（AIC）和 *贝叶斯信息量准则*（BIC）是信息准则的例子。它们用于在良好的拟合度和模型复杂性之间找到平衡。如果我们从一个简单的模型开始，拥有少量参数，然后逐步增加参数，我们的模型可能会更好地拟合训练数据。然而，这也会增加模型的复杂性，并有过拟合的风险。另一方面，如果我们从许多参数开始，并系统地删除一些参数，模型会变得更简单。与此同时，我们减少了过拟合的风险，但可能会牺牲性能（拟合优度）。AIC
    和 BIC 的区别在于对复杂性的惩罚权重。请记住，将信息准则用于不同的数据集或同一数据集的不同子样本（但观察数量不同）是不有效的。'
- en: When to use each evaluation metric
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 何时使用每种评估指标
- en: As with the majority of data science problems, there is no single best metric
    for evaluating the performance of a regression model. The metric chosen for a
    use case will depend on the data used to train the model, the business case we
    are trying to help, and so on. For this reason, we might often use a single metric
    for the training of a model (the metric optimized for), but when reporting to
    stakeholders, data scientists often present a selection of metrics.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 与大多数数据科学问题一样，没有单一的最佳指标来评估回归模型的性能。为特定用例选择的指标将取决于用于训练模型的数据、我们试图解决的业务案例等等。因此，我们可能会在模型训练中使用单一的优化指标，但在向利益相关者报告时，数据科学家通常会呈现多个指标的选择。
- en: 'While choosing the metrics, consider a few of the following questions:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择指标时，请考虑以下几个问题：
- en: Do you expect frequent outliers in the dataset? If so, how do you want to account
    for them?
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你是否预期数据集中会有频繁的异常值？如果是这样，你希望如何考虑这些异常值？
- en: Is there a business preference for overforecasting or underforecasting?
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在业务中，对于过度预测还是不足预测更有偏好？
- en: Do you want a scale-dependent or scale-independent metric?
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要一个依赖于尺度的指标还是一个独立于尺度的指标？
- en: I believe it is useful to explore the metrics on some toy cases to fully understand
    their nuances. While most of the metrics are available in the `metrics` module
    of `scikit-learn`, for this particular task, the good old spreadsheets might be
    a more suitable tool.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 我认为探索一些示例数据以全面理解这些指标的细微差别是有用的。虽然大多数指标都可以在`scikit-learn`的`metrics`模块中找到，但对于这个特定的任务，传统的电子表格可能是更合适的工具。
- en: The following example contains five observations. Table 1 shows the actual values,
    predictions, and some metrics used to calculate most of the considered metrics.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例包含五个观察值。表1展示了实际值、预测值以及用于计算大多数考虑的指标的一些指标。
- en: '![](../Images/28e8794d3ab108b4fe3f61d7ebde8c36.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/28e8794d3ab108b4fe3f61d7ebde8c36.png)'
- en: '*Table 1\. Example of calculating the performance metrics on five observations*'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '*表1\. 对五个观察值计算性能指标的示例*'
- en: The first three rows contain scenarios in which the absolute difference between
    the actual value and the prediction is 20\. The first two rows show an overforecast
    and underforecast of 20, with the same actual. The third row shows an overforecast
    of 20, but with a smaller actual. In those rows, it is easy to observe the particularities
    of MAPE and sMAPE.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 前三行包含了实际值与预测值之间的绝对差为20的情景。前两行显示了实际值相同的情况下的过度预测和不足预测。第三行显示了实际值较小的情况下的过度预测。在这些行中，很容易观察到MAPE和sMAPE的特性。
- en: '![](../Images/d34d552c080b4dc1d936c99bfe079a2c.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d34d552c080b4dc1d936c99bfe079a2c.png)'
- en: '*Table 2\. Performance metrics calculated using the values in Table 1*'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '*表2\. 使用表1中的值计算的性能指标*'
- en: The fifth row in Table 1 contained a prediction 8x smaller than the actual value.
    For the sake of experimentation, replace that prediction with one that is 8x higher
    than the actual. Table 3 contains the revised observations.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 表1中的第五行包含了一个比实际值小8倍的预测。为了实验的目的，将该预测值替换为比实际值高8倍的预测。表3包含了修订后的观察数据。
- en: '![](../Images/da10e3c33b6639ce067b85532a2cc7bd.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/da10e3c33b6639ce067b85532a2cc7bd.png)'
- en: '*Table 3\. Performance metrics after modifying a single observation to be more
    extreme*'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '*表3\. 修改单个观察值为更极端情况后的性能指标*'
- en: '![](../Images/2cdc6584f9ba1f6961e7bb65ddbd8c33.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2cdc6584f9ba1f6961e7bb65ddbd8c33.png)'
- en: '*Table 4\. Performance metrics calculated using the modified values in Table
    3*'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '*表4\. 使用表3中的修改值计算的性能指标*'
- en: Basically, all metrics exploded in size, which is intuitively consistent. That
    is not the case for sMAPE, which stayed the same between both cases.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 基本上，所有指标的大小都爆炸性增长，这在直观上是合理的。sMAPE则保持不变。
- en: I highly encourage you to play around with such toy examples to more fully understand
    how different kinds of scenarios impact the evaluation metrics. This experimentation
    should make you more comfortable making a decision on which metric to optimize
    for and the consequences of such a choice. These exercises might also help you
    explain your choices to stakeholders.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 我强烈建议你尝试这些示例，以更全面地了解不同情境如何影响评估指标。这种实验应该让你在决定优化哪个指标及其选择后果时更加自信。这些练习还可能帮助你向利益相关者解释你的选择。
- en: Wrapping up
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this post, I covered some of the most popular regression evaluation metrics.
    As explained, each one comes with its own set of advantages and disadvantages.
    And it is up to the data scientist to understand those and make a choice about
    which one (or more) is suitable for a particular use case. The metrics mentioned
    can also be applied to pure regression tasks — such as predicting salary based
    on a selection of features connected to experience — but also to the domain of
    time series forecasting.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: As always, any constructive feedback is more than welcome. You can reach out
    to me on [Twitter](https://twitter.com/erykml1) or in the comments.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
- en: '*Liked the article? Become a Medium member to continue learning by reading
    without limits. If you use* [*this link*](https://eryk-lewinson.medium.com/membership)
    *to become a member, you will support me at no extra cost to you. Thanks in advance
    and see you around!*'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
- en: 'You might also be interested in one of the following:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: '[](/dealing-with-outliers-using-three-robust-linear-regression-models-544cfbd00767?source=post_page-----6264af0926db--------------------------------)
    [## Dealing with Outliers Using Three Robust Linear Regression Models'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: With a hands-on example of using Huber, RANSAC and Theil-Sen regression algorithms
  id: totrans-123
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/dealing-with-outliers-using-three-robust-linear-regression-models-544cfbd00767?source=post_page-----6264af0926db--------------------------------)
    [](/verifying-the-assumptions-of-linear-regression-in-python-and-r-f4cd2907d4c0?source=post_page-----6264af0926db--------------------------------)
    [## Verifying the Assumptions of Linear Regression in Python and R
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: Dive deeper into the Gauss-Markov Theorem and other assumptions of linear regression!
  id: totrans-125
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/verifying-the-assumptions-of-linear-regression-in-python-and-r-f4cd2907d4c0?source=post_page-----6264af0926db--------------------------------)
    [](/interpreting-the-coefficients-of-linear-regression-cc31d4c6f235?source=post_page-----6264af0926db--------------------------------)
    [## Interpreting the coefficients of linear regression
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: Learn how to correctly interpret the results of linear regression — including
    cases with transformations of variables
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'towardsdatascience.com](/interpreting-the-coefficients-of-linear-regression-cc31d4c6f235?source=post_page-----6264af0926db--------------------------------)
    [](/choosing-the-correct-error-metric-mape-vs-smape-5328dec53fac?source=post_page-----6264af0926db--------------------------------)
    [## Choosing the correct error metric: MAPE vs. sMAPE'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: The pros and cons of two popular error metrics
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/choosing-the-correct-error-metric-mape-vs-smape-5328dec53fac?source=post_page-----6264af0926db--------------------------------)
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: References
  id: totrans-131
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Jadon, A., Patil, A., & Jadon, S. (2022). A Comprehensive Survey of Regression
    Based Loss Functions for Time Series Forecasting. *arXiv preprint arXiv:2211.02989*.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: 'Hyndman, R. J. (2006). Another look at forecast-accuracy metrics for intermittent
    demand. *Foresight: The International Journal of Applied Forecasting*, *4*(4),
    43–46.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 'Hyndman, R. J. (2006). 重新审视间歇需求的预测准确度度量。*Foresight: The International Journal
    of Applied Forecasting*, *4*(4), 43–46。'
- en: Hyndman, R. J., & Koehler, A. B. (2006). Another look at measures of forecast
    accuracy. *International journal of forecasting*, *22*(4), 679–688.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: Hyndman, R. J., & Koehler, A. B. (2006). 重新审视预测准确度的度量。*International journal
    of forecasting*, *22*(4), 679–688。
- en: 'Hyndman, R.J., & Athanasopoulos, G. (2021) *Forecasting: principles and practice*,
    3rd edition, OTexts: Melbourne, Australia. OTexts.com/fpp3.'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 'Hyndman, R.J., & Athanasopoulos, G. (2021) *Forecasting: principles and practice*,
    第3版, OTexts: Melbourne, Australia. OTexts.com/fpp3。'
- en: All images, unless noted otherwise, are by the author.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 除非另有说明，所有图片均由作者提供。
- en: '*Originally published at* [*NVIDIA’s developer blog*](https://developer.nvidia.com/blog/a-comprehensive-overview-of-regression-evaluation-metrics/)
    *on April 20th, 2023*'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '*最初发布于* [*NVIDIA的开发者博客*](https://developer.nvidia.com/blog/a-comprehensive-overview-of-regression-evaluation-metrics/)
    *2023年4月20日*'
