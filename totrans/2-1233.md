# 机器学习实验的艺术

> 原文：[https://towardsdatascience.com/how-to-run-machine-learning-experiments-that-really-matter-2ba0a88bc579](https://towardsdatascience.com/how-to-run-machine-learning-experiments-that-really-matter-2ba0a88bc579)

## 5个简单的策略帮助你从机器学习实验中获得最大收益

[](https://medium.com/@samuel.flender?source=post_page-----2ba0a88bc579--------------------------------)[![Samuel Flender](../Images/390d82a673de8a8bb11cef66978269b5.png)](https://medium.com/@samuel.flender?source=post_page-----2ba0a88bc579--------------------------------)[](https://towardsdatascience.com/?source=post_page-----2ba0a88bc579--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----2ba0a88bc579--------------------------------) [Samuel Flender](https://medium.com/@samuel.flender?source=post_page-----2ba0a88bc579--------------------------------)

·发表于[数据科学之路](https://towardsdatascience.com/?source=post_page-----2ba0a88bc579--------------------------------) ·阅读时间7分钟·2023年1月17日

--

![](../Images/c90986e2d4e211752d520f635a80b495.png)

图片由[Oudom Pravat](https://unsplash.com/@opravat?utm_source=medium&utm_medium=referral)提供，[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)上的照片

实验是机器学习行业的核心。我们之所以进步，是因为我们进行实验。

然而，并非所有实验都是同等有意义的。一些实验比其他实验产生更多的商业影响。然而，专注于影响的实验选择、执行和迭代的艺术，通常不会在标准的机器学习课程中涵盖。

这常常会引起很多混淆。新的机器学习从业者可能会觉得你应该把所有东西都投入到一个问题上，然后“看看哪些有效”。但事实并非如此。

需要明确的是，我不是在谈论离线和在线测试及其变体的统计数据，例如[A/B测试](/the-joy-of-a-b-testing-theory-practice-and-pitfalls-de58acbdb04a)。我谈论的是实验完成前后发生的事情。我们如何选择实验的对象？如果结果是负面的，我们该怎么办？我们如何尽可能高效地进行迭代？

更广泛地说，你如何从机器学习实验中获得最大的收益？这里有5个简单的策略供你采纳。

# 1 — 知道何时进行实验

作为机器学习从业者，你脑海中总会有无数个问题。比如，如果我们去掉这个特征会怎样？如果我们添加那层神经网络会怎样？如果我们使用这个声称更快的其他库会怎样？花时间的可能性是无穷的。

鉴于你的时间预算有限，你应该如何决定实验的内容？以下是一些实用的建议：

**优先考虑预期收益最高的实验。** 花时间充分了解现有模型并找出最大的差距：这就是你要集中精力的地方。例如，如果一个模型仅使用少量特征，那么最好的实验可能是围绕特征发现进行的。如果一个模型是简单的逻辑回归模型，那么在模型架构方面的工作可能更有前景。

**不要为了了解已经知道的东西而进行实验。** 在考虑启动任何实验之前，先进行研究。如果文献中对你尝试回答的问题有广泛的共识，那么你可能不需要围绕它设计实验。相信共识，除非你有强有力的理由不这样做。

**在实验之前定义清晰的成功标准。** 如果没有明确的成功标准，你永远不知道什么时候完成。就是这么简单。我见过太多因为实验后启动标准发生变化而未能部署的模型。通过在进行任何实验之前定义并沟通清晰的标准来避免这一陷阱。

# 2 — 总是从假设开始

科学实验总是从假设开始。我们首先提出假设，然后进行实验以确认或排除它。无论哪种结果，我们都获得了知识。这就是科学的运作方式。

科学假设必须是一个声明，通常含有“因为”这个词。它不能是一个问题。“哪个模型更好？”不是一个假设。

一个假设可以是：

+   “我假设 BERT 模型对于这个问题效果更好，因为单词的上下文很重要，而不仅仅是它们的频率”，

+   “我假设神经网络在这个问题上比逻辑回归效果更好，因为特征和目标之间的依赖关系是非线性的”，

+   “我假设添加这组特征会提高模型性能，因为这些特征在另一个相关的用例中也被使用”，

等等。

我常常看到人们进行大量实验并将结果呈现在长长的电子表格中，却没有明确的结论。当被问到“为什么这个数字比那个数字大？”时，答案通常是某种形式的临时猜测。这就是 HARKing，即在结果已知后进行假设。

HARKing 是科学的对立面，它是伪科学。它很危险，因为它可能导致[统计偶然现象](/is-my-model-really-better-560e729f81d2)，这些结果看起来真实，但实际上只是偶然的结果（并且在实际应用中不会出现）。

科学方法 — 在实验之前制定假设 — 是防止偶然发现的最佳保护措施。

# 3 — 创建紧密的反馈循环

在你的机器学习流程中改变一件事应该像改变一行代码并在终端中执行提交脚本一样简单。如果复杂得多，最好先缩短反馈周期。紧凑的反馈循环意味着你可以快速测试想法，而不需要复杂的操作。

这里有一些方法来实现这一点：

+   **自动化命名。** 花在思考如何命名（模型、实验、数据集等）的时间，是未能实际进行实验的时间。与其试图起一些巧妙和深刻的名字，比如“BERT_lr0p05_batchsize64_morefeatures_bugfix_v2”，不如使用[coolname](https://pypi.org/project/coolname/)等库来自动化命名，只需将参数直接写入日志文件中。

+   **慷慨记录。** 记录实验参数时，最好多记录一些。记录是便宜的，但由于记不清楚修改了哪些设置而重新运行实验是昂贵的。

+   **避免笔记本。** 笔记本难以版本控制、共享，并且将代码与日志混在一起，使得每次想要更改内容时都需要上下滚动。笔记本在探索性数据分析和可视化中有其用处，但在机器学习实验中，脚本通常更好：它们可以版本控制、共享，并且在代码与日志（即输入与输出）之间创建明确的界限。

+   **从小做起，快速失败。** 最好先在一个小的子样本数据集上进行实验。这可以让你快速获得反馈而不浪费太多时间，并且“快速失败”：如果这个想法不起作用，你会尽早知道。

+   **一次只改变一件事。** 如果你同时改变多个东西，你就无法知道这些改变中的哪一个导致了你看到的模型性能变化。通过一次只改变一件事来简化你的工作。

# 4 — 避免“新奇事物”偏见。

我经常看到人们对最新的机器学习研究论文过于兴奋，并试图将其强行应用于特定的用例。现实是，我们在机器学习生产中遇到的问题往往与机器学习研究中的问题大相径庭。

例如，像BERT这样的超大型语言模型在学术基准数据集如GLUE上取得了显著进展，GLUE包含了许多语言学上棘手的问题。

> “奖杯无法放进行李箱里，因为它太小了。是什么太小了，奖杯还是行李箱？”

然而，一个典型的商业问题可能仅仅是检测电子商务目录中包含电池的所有产品，对于这种问题，简单的词袋方法完全可以解决，而BERT可能是杀鸡用牛刀。

“新奇事物”偏见的解药，再次是严格遵循科学方法，并在进行任何实验之前制定清晰的假设。

“这是一种新模型”并不是一个假设。

# 5 — 避免实验炼狱

实验的结果可以是积极的（我们确认了假设）或消极的（我们否定了假设），这两种结果同样有价值。积极的结果改进我们的生产模型，从而提升我们的业务指标，而消极的结果则缩小了我们的搜索范围。

我看到过太多的同行陷入“实验炼狱”：实验结果是消极的（这个想法不起作用），但他们却没有结束并继续前进，而是不断尝试原始想法的不同修改，可能是因为组织压力，可能是因为“沉没成本”偏见，或者其他原因。

实验炼狱会阻碍你转向其他更有成果的想法。接受消极实验结果只是过程的一部分，并在需要时继续前进。这就是经验科学应有的进展方式。

# 结语：始终保持实验

总结一下，

+   **知道何时实验**：优先考虑预期收益最大的实验，

+   **总是从假设开始**：避免HARKing的伪科学，

+   **创建紧密的反馈循环**：尽可能让你快速测试想法，

+   **避免“新奇事物偏见”**：记住，学术问题上的成功不一定是业务问题成功的良好指标，

+   **避免实验炼狱**：接受消极结果是过程的一部分，并在需要时继续前进。

让我以一条建议作为结束，这条建议是我在亚马逊的科学经理曾经给我的：

最优秀的机器学习科学家的机器很少闲置。

他指的是最优秀的机器学习科学家总是有一系列他们想要进行的实验，这些实验对应于他们制定并希望测试的不同假设。每当他们的机器即将闲置（例如即将开始周末假期时），他们会在注销前从他们的待办事项中提交实验。

机器学习是一个经验性的领域。更多的实验带来更多的知识，最终带来更多的专业知识。掌握影响力巨大的机器学习实验的艺术，你就走上了成为机器学习专家的道路。

*👉* [*关注*](/@samuel.flender) *我，在 Medium 上查看更多我的内容。*

📫* [*订阅*](/subscribe/@samuel.flender) *以便直接将我的下一篇文章发送到你的收件箱中。*

💪* [*成为 Medium 会员*](/@samuel.flender/membership) *，并解锁无限访问权限。*

*还在好奇如何最大化你作为机器学习专业人员的影响力吗？请查看下面链接的文章 👇*

[](/the-most-effective-creatives-maximize-leverage-not-hours-worked-20ed0070fdd7?source=post_page-----2ba0a88bc579--------------------------------) [## 最有效的创意者最大化杠杆效应，而不是工作小时数

### 忘掉“安静退出”：3种策略，用更少的时间创造更多的商业影响

[towardsdatascience.com](/the-most-effective-creatives-maximize-leverage-not-hours-worked-20ed0070fdd7?source=post_page-----2ba0a88bc579--------------------------------)
