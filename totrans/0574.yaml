- en: Correlation ‚Äî When Pearson‚Äôs r Is Not Enough
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: ÂéüÊñáÔºö[https://towardsdatascience.com/correlation-when-pearsons-r-is-not-enough-aded72308635](https://towardsdatascience.com/correlation-when-pearsons-r-is-not-enough-aded72308635)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Comparison of various correlation methodologies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@fmnobar?source=post_page-----aded72308635--------------------------------)[![Farzad
    Mahmoodinobar](../Images/2d75209693b712300e6f0796bd2487d0.png)](https://medium.com/@fmnobar?source=post_page-----aded72308635--------------------------------)[](https://towardsdatascience.com/?source=post_page-----aded72308635--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----aded72308635--------------------------------)
    [Farzad Mahmoodinobar](https://medium.com/@fmnobar?source=post_page-----aded72308635--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ¬∑Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----aded72308635--------------------------------)
    ¬∑15 min read¬∑Feb 1, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/9e7d5ed242ff9c85c8f6b6b7bbf72661.png)'
  prefs: []
  type: TYPE_IMG
- en: Only One Key Will Unlock, by [DALL.E 2](https://openai.com/dall-e-2/)
  prefs: []
  type: TYPE_NORMAL
- en: We are very familiar with the phrase ‚Äúcorrelation does not imply causation‚Äù
    but let‚Äôs go through a real example to understand what implications confusing
    correlation with causation can have. In February 1998, a [paper](https://pubmed.ncbi.nlm.nih.gov/9500320/)
    was published claiming a causal association between certain vaccines and autism
    in children. This paper was later found to be fraudulent and was [retracted in
    2010](https://pubmed.ncbi.nlm.nih.gov/20137807/). One can only imagine the implication
    of such a claim on the lives of those who were not vaccinated based on the findings
    of this paper where correlation was mistaken for causation.
  prefs: []
  type: TYPE_NORMAL
- en: In this post, we are going to take a closer look at correlation to better understand
    what it is. We will learn that based on the type of the variables in study, what
    would be the recommended correlation methodology to use. Finally, we will implement
    some of the most common methodologies in a Python environment.
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/@fmnobar/membership?source=post_page-----aded72308635--------------------------------)
    [## Join Medium with my referral link - Farzad Mahmoodinobar'
  prefs: []
  type: TYPE_NORMAL
- en: Read every story from Farzad (and other writers on Medium). Your membership
    fee directly supports Farzad and other‚Ä¶
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: medium.com](https://medium.com/@fmnobar/membership?source=post_page-----aded72308635--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: What Is Correlation?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Correlation is a statistical measure of the relationship (or association) between
    two variables of interest. It quantifies the *direction* and *strength* of such
    a relationship using ‚ÄúCorrelation Coefficient‚Äù. Let‚Äôs breakdown what we conceptually
    need to know about correlation coefficient:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Range and Direction:** Correlation coefficient ranges (almost always ‚Äî we‚Äôll
    talk about the exceptions) from -1 to 1, inclusive of both. Positive and negative
    is based on the direction of relation between the two.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Interpretation:** A value of 1 means that there is perfect positive correlation
    between the two variables (i.e. as one increases, the other one increases the
    same amount and vice versa). On the other hand a value of -1 means that there
    is a perfect but negative correlation between the two (i.e. as one increases,
    the other one decreases the same amount and vice versa). A correlation of 0 means
    that as one variable changes, the other one remains unchanged.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Measurement:** There is more than one way to measure correlation. We will
    look into various measurement methodologies in this post.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Now that we are familiar with what correlation is, let‚Äôs dive into various methodologies
    of calculating correlation.
  prefs: []
  type: TYPE_NORMAL
- en: '*(All images, unless otherwise noted, are by the author.)*'
  prefs: []
  type: TYPE_NORMAL
- en: Overall Comparison of Correlation Methodologies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Table below provides an overview and comparison of various correlation methodologies
    that we will be discussing in this post. This table makes a great reference for
    future use.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/bb1bc56833bafd3477e4e319e6a0a5ce.png)'
  prefs: []
  type: TYPE_IMG
- en: Comparison of Correlation Methodologies
  prefs: []
  type: TYPE_NORMAL
- en: Let‚Äôs discuss these methodologies in more detail.
  prefs: []
  type: TYPE_NORMAL
- en: Data Set
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In order to implement some of the correlation methodologies, we will be using
    a data set from [UCI Machine Learning Repository](https://archive-beta.ics.uci.edu/dataset/10/automobile)
    (CC BY 4.0), which includes car prices and a set of car properties associated
    with each car price. I have cleaned up and filtered the data, which can be downloaded
    from [this link](https://gist.github.com/fmnobar/c9b4029e08e97978a9a53f4eb034b16f).
    We will be looking at the correlation between car price and engine size or fuel
    type of the car for some of the correlation methodolgoies. For the remainder of
    the methodologies, we will be creating small data sets on the spot for implementation.
  prefs: []
  type: TYPE_NORMAL
- en: Let‚Äôs import the car data into a Pandas dataframe and then visualize price and
    engine sizes in a scatterplot to get a better sense for the visual relationship
    between these two variables.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/10a31c61d980bad3ac4e1e083b3a9ae8.png)'
  prefs: []
  type: TYPE_IMG
- en: Scatter Plot of Car Prices vs. Engine Size
  prefs: []
  type: TYPE_NORMAL
- en: Scatterplot demonstrates that as prices increase, engine sizes increase. Therefore,
    we expect the correlation to be positive. Let‚Äôs see if calculation supports this.
  prefs: []
  type: TYPE_NORMAL
- en: Correlation Calculation Methodologies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 1\. Pearson Correlation Coefficient
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This is the most widely-used correlation. Pearson correlation coefficient (PCC),
    which is also known as Pearson‚Äôs *r*, is a measure of linear correlation between
    two variables. As the definition suggests, this method assumes a linear relationship
    between the two variables and therefore is not suitable for non-linear relationships.
    This correlation further assumes that the variables are approximately normally
    distributed.
  prefs: []
  type: TYPE_NORMAL
- en: 'Mathematically it can be calculated as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e92f67f4b6a77bb724efeea316e37f7b.png)'
  prefs: []
  type: TYPE_IMG
- en: Pearson‚Äôs *r*
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4b67b0fa5a0dffecd439c5e84a2ced44.png)'
  prefs: []
  type: TYPE_IMG
- en: 1.1\. Pearson‚Äôs Correlation Coefficient ‚Äî Implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Luckily for us, we do not have to calculate this mathematically ourselves. Let‚Äôs
    use Python to calculate Pearson‚Äôs r between price and engine size in our data
    set.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/ce3e3b8579ca2b6a5de99740ce8f0048.png)'
  prefs: []
  type: TYPE_IMG
- en: ‚Äústatistic‚Äù of ~0.89 is the correlation coefficient that we were looking for.
    As we expected, there is a positive (and relatively strong) correlation between
    the two. The ‚Äúpvalue‚Äù is the result of the null hypothesis test that the distributions
    of the provided data are uncorrelated and normally distributed. The p-value is
    a very small number in this example, meaning we can reject the null hypothesis
    (i.e. there is a correlation).
  prefs: []
  type: TYPE_NORMAL
- en: 2\. Spearman‚Äôs Rank Correlation Coefficient
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Also known as Spearman‚Äôs ùúå (reads as ‚Äúrho‚Äù) is a measure of rank correlation
    between two variables, which measures how well the relationship between the two
    variables can be described by a monotonic function. Conceptually, this is much
    simpler than it sounds, once we define ‚Äúrank correlation‚Äù and ‚Äúmonotonic function‚Äù.
  prefs: []
  type: TYPE_NORMAL
- en: '**Rank Correlation:** Rank correlation measures the similarity of the order
    of two sets of data, relative to each other (recall that PCC did not directly
    measure the relative rank).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Monotonic Function:** A function is called monotonic if and only if it preserves
    the given order of its arguments ‚Äî in other words, the function always increases
    or always decreases as the input values increase (which sounds just like correlation
    as we defined it). There is a distinction between a monotonic relationship and
    a linear relationship. Linear relationship is a specific type of monotonic relationship
    where the rate of increase remains constant ‚Äî in other words, unlike a linear
    relationship, the amount of change (increase or decrease) in a monotonic relationship
    can vary.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Mathematically, and when all n ranks are distinct integers, it calculates as
    follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/f5d68ef6451867ea2f020dd8f09c40b8.png)'
  prefs: []
  type: TYPE_IMG
- en: Spearman‚Äôs Rank Correlation Coefficient
  prefs: []
  type: TYPE_NORMAL
- en: 'Where:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/7a6e05fdd3491d1e18cde13f38c8ab63.png)'
  prefs: []
  type: TYPE_IMG
- en: 2.1\. Spearman‚Äôs Rank Correlation Coefficient ‚Äî Implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let‚Äôs look at how this can be calculated in Python for the same two variables
    of price and engine size.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/3541dc3ebdfd3a4f043a3a8178619e85.png)'
  prefs: []
  type: TYPE_IMG
- en: Results are very similar to Pearson‚Äôs *r*, as expected.
  prefs: []
  type: TYPE_NORMAL
- en: 3\. Kendall‚Äôs Tau
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Kendall‚Äôs Tau, denoted by ùõï, is a non-parametric measure of rank correlation.
    We know what rank correlation means from the prevous correlation methodology.
    Non-parametric means it does not rely on the probability distribution of the underlying
    data. Kendall‚Äôs Tau is non-parametric because it only measures the rank correlation
    based on the relative ordering of the data (and not the specific values of the
    data).
  prefs: []
  type: TYPE_NORMAL
- en: 'Mathematically, Kendall‚Äôs Tau can be calculated in two different ways, which
    only differ in how they are normalized to be limited to the range of -1 to 1\.
    We will define both here for reference:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0a67f1c7cc0c2d9a1a5c98923aba064d.png)'
  prefs: []
  type: TYPE_IMG
- en: Kendall‚Äôs Tau ‚Äî b
  prefs: []
  type: TYPE_NORMAL
- en: 'Where:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/417c28c978ea00f533f8ed6977e34c15.png)![](../Images/21f36085af255d0c615b8abe0f856a14.png)'
  prefs: []
  type: TYPE_IMG
- en: Kendall‚Äôs Tau ‚Äî c
  prefs: []
  type: TYPE_NORMAL
- en: 'Where:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/434a8795836b2fa9fda2ffe045cf7aae.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Concordant pair means that both observations are ranked the same way relative
    to other observations. For example, let‚Äôs assume:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/2cf91bba83051acfbc99c3d6c3c38570.png)'
  prefs: []
  type: TYPE_IMG
- en: and then the two pairs of observations are (x_1, x_2) and (y_1, y_2). Then this
    pair is considered concordant in a case where if x_1 is ranked higher than x_2,
    then y_1 is also ranked higher than y_2\. The reverse would be discordant.
  prefs: []
  type: TYPE_NORMAL
- en: 3.1\. Kendall‚Äôs Tau ‚Äî Implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let‚Äôs look at how these two interpretations of Kendall‚Äôs Tau can be calculated
    in Python for the same two variables of price and engine size.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/52e72939cecd3a76eac5d0e9047f8045.png)'
  prefs: []
  type: TYPE_IMG
- en: Similar to other correlation measures, there is a positive correlation along
    with a very small ‚Äúpvalue‚Äù, suggesting the existence of a correlation. And as
    expected, there is not a large difference between the two implematation of Tau
    b or c.
  prefs: []
  type: TYPE_NORMAL
- en: 4\. Point-Biserial
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Point-Biserial correlation coefficient measures the correlation between a binary
    (or dichotomous) and a continuous variable. A binary or dichotomous variable is
    one that only takes two values (e.g. 0 or 1, female or male, etc.). As an example,
    recall that Pearson‚Äôs *r* measures the correlation between the two **continuous**
    variables. But there are cases where we deal with one binary and one continuous
    variable. In such cases, we can use the Point-Biserial correlation coefficient.
  prefs: []
  type: TYPE_NORMAL
- en: 'Point-Biserial correlation coefficient can be calculated as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/cc8455e65c36696f6e46a688c75f80a5.png)'
  prefs: []
  type: TYPE_IMG
- en: Point-Biserial Correlation Coefficient
  prefs: []
  type: TYPE_NORMAL
- en: 'Where:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/518c1605f38f8feb5ff12f7163cfcd3a.png)'
  prefs: []
  type: TYPE_IMG
- en: 4.1\. Point-Biserial ‚Äî Implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In our data set, fuel type can either be gas or diesel, which we can use as
    a binary variable. First we will create a new column named ‚Äúfuel-type-binary‚Äù
    where shows a value of 0 for gas and 1 for diesel. Then we calculate the Point-Biserial
    correlation coefficient between fuel type and car price.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/c77fa643f595a9bcd12869afbbc3c63b.png)'
  prefs: []
  type: TYPE_IMG
- en: 5\. Phi Coefficient
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Phi coefficient (a.k.a. mean square contingency coefficient), denoted by …∏,
    is yet another measure of association (or correlation) between two variables but
    it is only used when both are binary or dichotomous variables. If you are a machine
    learning practitioner with a focus on classification, you may also know this as
    the Matthews Correlation Coefficient (MCC). In machine learning, MCC is used as
    a measure of quality of binary or multiclass classifications.
  prefs: []
  type: TYPE_NORMAL
- en: 'Mathematically, …∏ for two binary variables of X and Y is defined as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b49517249b60244310bbfc02552ad006.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Where:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/005c4d249e11502167e9b7c77970b25c.png)![](../Images/2a675a5742d636c2b979b8e98f60648b.png)'
  prefs: []
  type: TYPE_IMG
- en: The tabular representation above is called a ‚Äúcontingency table‚Äù. Next, let‚Äôs
    look at how we can implement Phi Coefficient in Python. We will cover two approaches
    here for the sake of completeness.
  prefs: []
  type: TYPE_NORMAL
- en: 5.1\. Phi Coefficient ‚Äî Implementation In Pandas
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We will take the following steps in the code block below:'
  prefs: []
  type: TYPE_NORMAL
- en: Import necessary packages
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 2\. Create a dataframe from two assumed binary variables of X and Y
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 3\. Create a contingency table
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 4\. Calculate the Phi Coefficient
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/3847c698b54ab06c96277fff73b630e5.png)'
  prefs: []
  type: TYPE_IMG
- en: This is not difficult to calculate but still is relatively manual and prone
    to error. Let‚Äôs look at the second approach, which is much more straight forward.
  prefs: []
  type: TYPE_NORMAL
- en: 5.2\. Phi Coefficient ‚Äî Implementation In scikit-learn
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Remember that Phi Coefficient is also known as the Matthews Correlation Coefficient
    (MCC)? scikit-learn happens to have that in their library so let‚Äôs see how we
    can implement it, following below steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Import necessary packages
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 2\. Create two assumed binary variables
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 3\. Calculate MCC
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/25867506c39b9d223a1b43bfbcb1911f.png)'
  prefs: []
  type: TYPE_IMG
- en: As expected, this number is identical to the number we generated in the first
    approach.
  prefs: []
  type: TYPE_NORMAL
- en: '**Pro Tip:** This method is intended to measure the quality of binary (and
    multi-class) classifications and we are using it to calculate the association
    between the two variables in this example. Typical use cases in machine learning
    would be to use the MCC to measure the correlation or association of ground truth
    and predicted values in a classification problem. Our approach here is fine and
    it generates the correct results but that is an important caveat, in case you
    decide to use MCC in the future.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 6\. Cramer‚Äôs V
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Cramer‚Äôs V (a.k.a. Cramer‚Äôs Phi and denoted by V) is a measure of association
    (or correlation) between two categorical (**nominal**) variables. This is very
    similar to Phi Coefficient but it is more generalized in that it can be applied
    to *n*n* contingency tables (unlike …∏, which can only be applied to binary variables).
  prefs: []
  type: TYPE_NORMAL
- en: '**Important Note:** This is the only measure in this post with a range of 0
    to 1 (inclusive) (compared to other correlation measures with the range of -1
    to 1, inclusive).'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Cramer‚Äôs V can be calculated as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/7945e495593bad4f4c4637ac4e111473.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Where:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b9f7dba970db740d18933fff0c45bb00.png)'
  prefs: []
  type: TYPE_IMG
- en: 6.1\. Cramer‚Äôs V ‚Äî Implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Let‚Äôs look at an example of how we can implement Cramer‚Äôs V. We will be taking
    the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Import necessary libraries
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 2\. Create a dataframe of two variables of X and Y, each with two different
    classes
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 3\. Create a contingency table
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 4\. Calculate the chi-squared statistic
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 5\. Calculate Cramer‚Äôs V
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/f28bd01c7dd0cc097cca94a8ca34d76c.png)'
  prefs: []
  type: TYPE_IMG
- en: 7\. Polychoric Correlation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Polychoric correlation is a measure of association (or correlation) between
    two categorical (**ordinal**) variables. Since these are ordinal variables, the
    correlation considers the strength and direction of association (and hence the
    range of -1 to 1, unlike Cramer‚Äôs V). A special case of Polychoric Correlation
    is Tetrachoric Correlation that is only used with binary or dichotomous variables
    ‚Äî we will cover that one later in the post.
  prefs: []
  type: TYPE_NORMAL
- en: 8\. Partial Correlation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Partial Correlation is a measure of correlation between two variables while
    controlling for one or more confounding factors. A confounding factor is a variable
    that is related to both independent and dependent (i.e output) variables. In other
    words, Partial Correlation measures the association (or correlation) between two
    variables when the effects of one or more other variables are removed from such
    a relationship.
  prefs: []
  type: TYPE_NORMAL
- en: A frequently used example of confounding factor is a study focused on the relationship
    between smoking (X) and lung cancer (Y). In this study, age (Z) is a confounding
    factor. Smokers tend to be older and age itself is a risk factor for lung cancer.
    Therefore, age (Z) can impact both smoking (X) and lung cancer (Y). Then partial
    correlation can be used to control for the confounding effect of Z (i.e. remove
    the impact of age from the study) and then the study will focus on the correlation
    between smoking (X) and lung cancer (Y) in a controlled environment.
  prefs: []
  type: TYPE_NORMAL
- en: 'Partial correlation can be calculated as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/f558a17ca2236224c43eb3da72f836aa.png)'
  prefs: []
  type: TYPE_IMG
- en: Partial Correlation
  prefs: []
  type: TYPE_NORMAL
- en: 'Where Covariance and Variance are calculated as:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/83cb82a05d0f809f0af2936769b8f75c.png)![](../Images/c4387a3510661eae5cb956aa67c1442d.png)'
  prefs: []
  type: TYPE_IMG
- en: We will look at two methods of implementing Partial Correlation in Python, first
    by directly calculating such a correlation and second by using a Python library
    to streamline the process.
  prefs: []
  type: TYPE_NORMAL
- en: 8.1\. Partial Correlation ‚Äî Implementation In Pandas
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Partial Correlation‚Äôs formula looks daunting but it can easily be implemented
    in Python. Let‚Äôs look at an example where we will be taking the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Import necessary packages
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 2\. Create a dataframe of X, Y and Z variables
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 3\. Calculate the Partial Correlation between X and Y, while controlling for
    Z
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/ff45dd0064711dac057209c334d77813.png)'
  prefs: []
  type: TYPE_IMG
- en: 8.2\. Partial Correlation ‚Äî Implementation In Pingouin
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Previous approach helps with understanding the concept of Partial Correlation
    but it is not very efficient to create each of the correlations and use the formula
    to calculate the partial correlation ‚Äî it also increases the opportunity for human
    error. In the code block below, we will be leveraging the [pingouin](https://pingouin-stats.org/build/html/index.html)
    library to make the process easier, by going through the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Import necessary packages
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 2\. Create a dataframe of X, Y and Z variables
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 3\. Calculate the Partial Correlation between X and Y, while controlling for
    Z
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b152a393eaa0874e17ce1a8d468484a4.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Results are helpful in that there are additional fields. Let‚Äôs look at what
    these fields convey ([source](https://pingouin-stats.org/build/html/generated/pingouin.partial_corr.html#pingouin.partial_corr)):'
  prefs: []
  type: TYPE_NORMAL
- en: 'n: Sample size'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'r: Partial correlation coefficient'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'CI95%: 95% parametric confidence intervals around r'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'p-val: p-value'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Note that we decided to use Pearson‚Äôs *r* in this specific implementation, using
    `method = ‚Äòpearson‚Äô`. Another option is to use Spearman ùúå by including `method
    = ‚Äòspearman‚Äô`.
  prefs: []
  type: TYPE_NORMAL
- en: 9\. Tetrachoric Correlation Coefficient
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Tetrachoric Correlation Coefficient, is a special case of Polychoric Correlation
    that measures association between two binary (or dichotomous) variables. Recall
    that Phi Coefficient also measures association between two binary variables. The
    difference is that Phi Coefficient assumes a normal distribution of the underlying
    data, while Tetrachoric Correlation assumes a bivariate normal distribution. In
    other words, Tetrachoric Correlation assumes that the binary variables are generated
    from a continuous variable that follows a normal distribution, while Phi Correlation
    assumes that the binary variables themselves follow a normal distribution. Tetrachoric
    Correlation is useful in cases where the underlying continuous variable are not
    directly observable but can be assumed normally distributed. Such cases are common
    in psychological, medical, marketing and/or social sciences research where the
    underlying behavior is not directly observable (e.g. association between self-reported
    political views and actual voting behavior).
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this post we discussed the importance of understanding what correlation is
    and how it can be measured. Depending on the type of the variables being investigated
    for correlation, there are specific types of correlations recommended to use.
    We then walked through the most common correlation methodologies and how they
    can be implemented in a Python environment.
  prefs: []
  type: TYPE_NORMAL
- en: Thanks for Reading!
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If you found this post helpful, please [follow me on Medium](/@fmnobar) and
    subscribe to receive my latest posts!
  prefs: []
  type: TYPE_NORMAL
