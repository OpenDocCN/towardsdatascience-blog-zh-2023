# 以3种难度级别解释向量数据库

> 原文：[https://towardsdatascience.com/explaining-vector-databases-in-3-levels-of-difficulty-fc392e48ab78](https://towardsdatascience.com/explaining-vector-databases-in-3-levels-of-difficulty-fc392e48ab78)

## 从新手到专家：揭示不同背景下的向量数据库

[](https://medium.com/@iamleonie?source=post_page-----fc392e48ab78--------------------------------)[![Leonie Monigatti](../Images/4044b1685ada53a30160b03dc78f9626.png)](https://medium.com/@iamleonie?source=post_page-----fc392e48ab78--------------------------------)[](https://towardsdatascience.com/?source=post_page-----fc392e48ab78--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----fc392e48ab78--------------------------------) [Leonie Monigatti](https://medium.com/@iamleonie?source=post_page-----fc392e48ab78--------------------------------)

·发表在 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----fc392e48ab78--------------------------------) ·阅读时间8分钟·2023年7月4日

--

![](../Images/328d368e5d803b2e02d900d2bda2437e.png)

向量空间（图像由作者手绘）

最近，向量数据库引起了很多关注，许多向量数据库初创公司获得了数百万美元的融资。

你可能已经听说过这些内容，但直到现在才真正关心它们——至少，这就是我猜测你为什么在这里的原因……

如果你只是想要简短的答案，我们直接进入正题：

# 定义：什么是向量数据库？

向量数据库是一种存储和管理非结构化数据（如文本、图像或音频）的数据库，通过向量嵌入（高维向量）来便于快速找到和检索相似对象。

如果这个定义只会让你更加困惑，那么让我们一步一步来。本文受 [WIRED的“5 Levels”视频系列](https://www.wired.com/video/series/5-levels) 的启发，分三个难度级别来解读向量数据库：

+   [像5岁小孩一样解释它](#8273)

+   [向数字原住民和技术爱好者解释向量数据库](#ffae)

+   [向工程师和数据专业人士解释向量数据库](#61cf)

# 向量数据库：像5岁小孩一样解释（ELI5）

这有点偏题，但你知道我不理解的是什么吗？

当人们按颜色排列书架上的书时。——哎呀！

当他们不知道书封面的颜色时，怎么找到一本书呢？

![](../Images/5a8802eca019df91d0355facab341813.png)

图片由 [Luisa Brimble](https://unsplash.com/@luisabrimble?utm_source=medium&utm_medium=referral) 提供，来源于 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

## 向量数据库背后的直觉

如果你想快速找到一本特定的书，把书架按类别和作者排列比按颜色排列更有意义。这就是为什么大多数图书馆都这样组织，以帮助你快速找到你想要的书。

但是如何根据查询而不是按类别或作者找到阅读材料呢？如果你想读一本例如：

+   类似于《好饿的毛毛虫》或

+   关于一个像你一样喜欢吃的主要角色？

如果你没有时间浏览书架，最快的方法就是请图书管理员推荐，因为他们读过很多书，会准确知道哪本书最适合你的查询。

在组织书籍的例子中，你可以把图书管理员看作是向量数据库，因为向量数据库被设计用来存储关于对象（例如一本书）的复杂信息（例如书的情节）。因此，向量数据库可以帮助你根据特定查询（例如，一本书的主题是……）找到对象，而不是几个预定义的属性（例如作者）——就像图书管理员一样。

# 向数字原住民和科技爱好者解释向量数据库

现在，让我们回到图书馆的例子，并深入一点技术细节：当然，现在有比仅按类别或作者查找图书更先进的技术。

如果你访问图书馆，通常角落里会有一台电脑，帮助你找到具有一些更具体属性的书籍，如标题、ISBN、出版年份或一些关键词。根据你输入的值，数据库会查询可用的书籍。这种数据库通常是传统的关系型数据库。

![](../Images/5189b42393d6a2aa1d7fca335d8bd4d7.png)

## 关系型数据库和向量数据库之间的区别是什么？

关系型数据库和向量数据库之间的主要区别在于它们存储的**数据类型**。关系型数据库设计用于**结构化数据**，这些数据适合放入表格中，而向量数据库则用于存储**非结构化数据**，例如文本或图像。

存储的数据类型也影响**数据的检索方式**：在关系型数据库中，查询结果基于特定关键词的**匹配**。在向量数据库中，查询结果基于**相似性**。

你可以把传统的关系型数据库想象成电子表格。它们非常适合存储结构化数据，例如关于一本书的基本信息（例如标题、作者、ISBN等），因为这些信息可以存储在列中，这些列非常适合过滤和排序。

在关系型数据库中，你可以快速找到所有例如儿童书籍，并且标题中有“毛毛虫”的书。

但如果你喜欢“非常饥饿的毛毛虫”是关于食物的呢？你可以尝试搜索关键字“food”，但除非书籍的总结中提到了“food”这个关键字，否则你甚至找不到“非常饥饿的毛毛虫”。相反，你可能会得到一堆食谱和失望。

这就是关系数据库的一个局限性：你必须添加你认为某人可能需要找到特定项目的所有信息。但你怎么知道要添加哪些信息以及添加多少呢？添加所有这些信息是**耗时的**，并不能保证完整性。

这就是向量数据库发挥作用的地方！

但首先，我们要绕一个弯谈谈一个叫做**向量嵌入**的概念。

现在的机器学习（ML）算法可以将给定的对象（例如，单词或文本）转换为保留该对象信息的数值表示。想象一下，你给一个ML模型一个单词（例如，“food”），然后这个ML模型进行其魔法，返回给你一个长长的数字列表。这长长的数字列表就是你单词的数值表示，称为向量嵌入。

由于这些嵌入是一长串数字，我们称它们为高维的。假设这些嵌入只有三维，以便如下图所示进行可视化。

![](../Images/6066a6abfbf53900a1639cb3931afddd.png)

你可以看到，像“hungry”，“thirsty”，“food”和“drink”这样的相似单词都被分组在一个相似的角落，而像“bicycle”和“car”这样的其他单词则靠近在一起，但在这个向量空间中的不同角落。

数值表示使我们能够对通常不适合计算的对象（如单词）应用数学计算。例如，以下计算将无法进行，除非你用单词的嵌入来替代单词：

[PRE0]

由于我们能够使用嵌入进行计算，我们还可以计算一对嵌入对象之间的距离。两个嵌入对象越接近，它们的相似度就越高。

正如你所看到的，向量嵌入非常酷。

让我们回到我们的例子，假设我们将图书馆中每本书的内容嵌入到向量数据库中并存储这些嵌入。现在，当你想找到一 “本主角喜欢食物的儿童书”时，你的查询也会被嵌入，返回的书籍是与你的查询最相似的，例如“非常饥饿的毛毛虫”或者“金发姑娘与三只熊”。

## 向量数据库的使用案例是什么？

向量数据库早在大型语言模型（LLMs）引起热潮之前就已经存在了。最初，它们被用于推荐系统，因为它们可以快速找到与给定查询相似的对象。但由于它们可以为LLMs提供长期记忆，最近它们也被用于问答应用中。

# 向工程师和数据专业人士解释向量数据库

如果你在打开本文之前就已经猜到向量数据库可能是一种存储向量嵌入的方式，并且只想了解向量嵌入的实际情况，那么让我们深入探讨一下，谈谈算法吧。

## 向量数据库是如何工作的？

向量数据库能够快速检索查询的相似对象，因为它们已经预先计算过这些对象。其基础概念称为近似最近邻（ANN）搜索，它使用不同的算法进行索引和计算相似度。

正如你所想的那样，使用简单的k-最近邻（kNN）算法计算查询与每个嵌入对象之间的相似度，当你有数百万个嵌入时，可能会变得非常耗时。使用ANN，你可以在速度和准确性之间做出一些妥协，快速检索出与查询最相似的对象。

**索引** — 为此，向量数据库**索引**向量嵌入。这一步骤将向量映射到一种数据结构，以便更快地搜索。

你可以把索引想象成将图书馆中的书籍按不同类别（如作者或类型）分组。但由于嵌入可以包含更复杂的信息，进一步的类别可能是“主要角色的性别”或“情节的主要地点”。因此，索引可以帮助你从所有可用向量中检索出较小的一部分，从而加快检索速度。

我们不会深入探讨索引算法的技术细节，但如果你对进一步阅读感兴趣，可以从查阅层次可导航小世界（HNSW）开始。

**相似度度量 —** 为了从索引向量中找到与查询最接近的邻居，向量数据库应用相似度度量。常见的相似度度量包括余弦相似度、点积、欧几里得距离、曼哈顿距离和汉明距离。

## 向量数据库相对于将向量嵌入存储在NumPy数组中的优势是什么？

我经常遇到的一个问题是：**我们不能仅使用NumPy数组来存储嵌入吗？** 当然可以，如果你没有很多嵌入或者只是做一个有趣的爱好项目。但正如你可能已经猜到的，当你有很多嵌入时，向量数据库显著更快，而且你不必将所有内容都保存在内存中。

*我会简短说明，因为Ethan Rosenthal对使用向量数据库与使用NumPy数组的区别进行了比我能写得更好的解释。*

[## 你真的需要向量数据库吗？ | Ethan Rosenthal](https://www.ethanrosenthal.com/2023/04/10/nn-vs-ann/?source=post_page-----fc392e48ab78--------------------------------)

### 剧透警报：答案可能是！虽然，我使用“实际上”这个词暴露了我的偏见。向量数据库是……

[www.ethanrosenthal.com](https://www.ethanrosenthal.com/2023/04/10/nn-vs-ann/?source=post_page-----fc392e48ab78--------------------------------)

# 享受了这个故事吗？

[*免费订阅*](https://medium.com/subscribe/@iamleonie) *以便在我发布新故事时收到通知。*

[](https://medium.com/@iamleonie/subscribe?source=post_page-----fc392e48ab78--------------------------------) [## 每当 Leonie Monigatti 发布时，获取一封电子邮件。

### 每当 Leonie Monigatti 发布时，获取一封电子邮件。通过注册，如果你还没有 Medium 账户，你将创建一个…

medium.com](https://medium.com/@iamleonie/subscribe?source=post_page-----fc392e48ab78--------------------------------)

*在* [*LinkedIn*](https://www.linkedin.com/in/804250ab/)、[*Twitter*](https://twitter.com/helloiamleonie)*和* [*Kaggle*](https://www.kaggle.com/iamleonie)*上找到我！*
