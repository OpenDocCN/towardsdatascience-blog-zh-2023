["```py\n# Data Handling\nimport pandas as pd\n\n# Data visualization Libraries\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.io as pio\n```", "```py\n# Load in data:\nmpg = sns.load_dataset('mpg')\n\n# Get dataset showing average MPG per year by using groupby:\nmpg = mpg.groupby(['model_year'])['mpg'].mean().to_frame().reset_index()\n\n# Rename columns:\nmpg = mpg.rename(columns={'model_year': 'Year',\n                          'mpg': 'Average MPG'})\nmpg.head()\n```", "```py\npx.bar(mpg, x='Year', y='Average MPG')\n```", "```py\n# Generate base plot:\nplot = px.bar(mpg, x='Year', y='Average MPG', color='Average MPG',\n              color_continuous_scale=px.colors.diverging.RdYlGn)\n\n# Remove colorbar:\nplot.update_coloraxes(showscale=False)\n\n# Update plotly style:\nplot.update_layout(template='plotly_white')\n\nplot.show()\n```", "```py\n# Label axes:\nplot.update_xaxes(title='Model Year',\n                  dtick=1)\nplot.update_yaxes(title='Average Miles Per Gallon (MPG)')\n```", "```py\n# Update plot layout:\nplot.update_layout(\n    title=dict(\n        text='<b>Average Miles Per Gallon of Cars Over Time</b>\\\n              <br><i><sup>A Visualization of Improvements in \\\n              Fuel Efficiency During the Energy Crisis Era</sup></i>',\n        x=0.085,\n        y=0.95,\n        font=dict(\n            family='Helvetica',\n            size=25,\n            color='#272b4f'\n        )))\n```", "```py\n# Add annotation on data source:\nplot.add_annotation(x=0,\n                    y=-0.15,\n                    showarrow=False,\n                    text=\"<i>Fuel mileage data courtesy of \\\n                          Python Seaborn Library</i>\",\n                    textangle=0,\n                    xanchor='left',\n                    xref=\"paper\",\n                    yref=\"paper\",\n                    font_color='#a6aeba')\n```", "```py\n# Add average MPG across era:\nplot.add_hline(y=mpg['Average MPG'].mean())\n\n# Add explanation of line:\nplot.add_annotation(x=.05,\n                    y=0.67,\n                    text=\"Average MPG, 1970 through 1982\",\n                    textangle=0,\n                    xanchor='left',\n                    xref=\"paper\",\n                    yref=\"paper\",\n                    font_color='black',\n                    bordercolor='black',\n                    borderpad=5,\n                    showarrow=True,\n                    arrowhead=2,\n                    bgcolor='white',\n                    arrowside='end'\n                    )\n```", "```py\n# Add highlight box:\nplot.add_vrect(x0=\"74.5\",\n               x1=\"79.5\",\n               fillcolor=\"lightgray\",\n               opacity=0.3,\n               line_width=0)\n\n# Add explanation of line:\nplot.add_annotation(x=.45,\n                    y=0.9,\n                    text=\"Period of Consistent Improvement\n                         <br>until Breakthrough in 1980's\",\n                    textangle=0,\n                    xanchor='left',\n                    xref=\"paper\",\n                    yref=\"paper\",\n                    font_color='black',\n                    showarrow=False,\n                    )\n```", "```py\n# Data prep:\ndisplacement = sns.load_dataset('mpg')\nseventies = round(\n    displacement[displacement['model_year'] < 80]['displacement'].mean(), 2)\neighties = round(\n    displacement[displacement['model_year'] >= 80]['displacement'].mean(), 2)\n\n# Create text string:\nexplanation = \"<b>Why the Improvement in MPG?</b> <br>\\\n               In the 70's, average engine size was {} <br>\\\n               cubic inches versus {} from 1980 to 1982.<br>\\\n               Larger engines are usually less efficient.\".format(seventies, eighties)\n\n# Add explanation for trends:\nplot.add_annotation(x=.615,\n                    y=0.02,\n                    text=explanation,\n                    textangle=0,\n                    xanchor='left',\n                    xref=\"paper\",\n                    yref=\"paper\",\n                    font_color='black',\n                    bordercolor='black',\n                    borderpad=5,\n                    bgcolor='white',\n                    showarrow=False\n                    )\n```", "```py\n# Load in Libraries:\n\n# Data Handling\nimport pandas as pd\n\n# Data visualization Libraries\nimport seaborn as sns\nimport plotly.express as px\n\n# Load in data:\nmpg = sns.load_dataset('mpg')\nmpg.head()\n\n# Get dataset showing average MPG per year by using groupby:\nmpg = mpg.groupby(['model_year'])['mpg'].mean().to_frame().reset_index()\n\n# Rename columns:\nmpg = mpg.rename(columns={'model_year': 'Year',\n                          'mpg': 'Average MPG'})\n\n# Generate base plot:\nplot = px.bar(mpg, x='Year', y='Average MPG', color='Average MPG',\n              color_continuous_scale=px.colors.diverging.RdYlGn)\n\n# Remove colorbar:\nplot.update_coloraxes(showscale=False)\n\n# Update plotly style:\nplot.update_layout(template='plotly_white')\n\n# Label axes:\nplot.update_xaxes(title='Model Year',\n                  dtick=1)\nplot.update_yaxes(title='Average Miles Per Gallon (MPG)')\n\n# Add labels and source:\n\n# Update plot layout:\nplot.update_layout(\n    title=dict(\n        text='<b>Average Miles Per Gallon of Cars Over Time</b>\\\n              <br><i><sup>A Visualization of Improvements in \\\n              Fuel Efficiency During the Energy Crisis Era</sup></i>',\n        x=0.085,\n        y=0.95,\n        font=dict(\n            family='Helvetica',\n            size=25,\n            color='#272b4f'\n        )))\n\n# Add annotation on data source:\nplot.add_annotation(x=0,\n                    y=-0.15,\n                    showarrow=False,\n                    text=\"<i>Fuel mileage data courtesy of \\\n                          Python Seaborn Library</i>\",\n                    textangle=0,\n                    xanchor='left',\n                    xref=\"paper\",\n                    yref=\"paper\",\n                    font_color='#a6aeba')\n\n# Add highlight box:\nplot.add_vrect(x0=\"74.5\",\n               x1=\"79.5\",\n               fillcolor=\"lightgray\",\n               opacity=0.3,\n               line_width=0)\n\n# Add explanation of line:\nplot.add_annotation(x=.45,\n                    y=0.9,\n                    text=\"Period of Consistent Improvement\\\n                         <br>until Breakthrough in 1980's\",\n                    textangle=0,\n                    xanchor='left',\n                    xref=\"paper\",\n                    yref=\"paper\",\n                    font_color='black',\n                    showarrow=False,\n                    )\n\n# Add average MPG across era\n\n# Create Line:\nplot.add_hline(y=mpg['Average MPG'].mean())\n\n# Add explanation of line:\nplot.add_annotation(x=.05,\n                    y=0.67,\n                    text=\"Average MPG, 1970 through 1982\",\n                    textangle=0,\n                    xanchor='left',\n                    xref=\"paper\",\n                    yref=\"paper\",\n                    font_color='black',\n                    bordercolor='black',\n                    borderpad=5,\n                    showarrow=True,\n                    arrowhead=2,\n                    bgcolor='white',\n                    arrowside='end'\n                    )\n\n# Add a box to explain the trends\n\n# Data prep:\ndisplacement = sns.load_dataset('mpg')\nseventies = round(\n    displacement[displacement['model_year'] < 80]['displacement'].mean(), 2)\neighties = round(\n    displacement[displacement['model_year'] >= 80]['displacement'].mean(), 2)\n\n# Create text string:\nexplanation = \"<b>Why the Improvement in MPG?</b> <br>\\\n               In the 70's, average engine size was {} <br>\\\n               cubic inches versus {} from 1980 to 1982.<br>\\\n               Larger engines are usually less efficient.\".format(seventies, eighties)\n\n# Add explanation for trends:\nplot.add_annotation(x=.615,\n                    y=0.02,\n                    text=explanation,\n                    textangle=0,\n                    xanchor='left',\n                    xref=\"paper\",\n                    yref=\"paper\",\n                    font_color='black',\n                    bordercolor='black',\n                    borderpad=5,\n                    bgcolor='white',\n                    showarrow=False\n                    )\n\nplot.show()\n```"]