- en: Understanding Time Series Trend
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/understanding-time-series-trend-addfd9d7764e](https://towardsdatascience.com/understanding-time-series-trend-addfd9d7764e)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Deterministic trends vs stochastic trends, and how to deal with them
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://vcerq.medium.com/?source=post_page-----addfd9d7764e--------------------------------)[![Vitor
    Cerqueira](../Images/9e52f462c6bc20453d3ea273eb52114b.png)](https://vcerq.medium.com/?source=post_page-----addfd9d7764e--------------------------------)[](https://towardsdatascience.com/?source=post_page-----addfd9d7764e--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----addfd9d7764e--------------------------------)
    [Vitor Cerqueira](https://vcerq.medium.com/?source=post_page-----addfd9d7764e--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----addfd9d7764e--------------------------------)
    ·6 min read·Mar 14, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4c837fdc4590f7f0194f180a27dce0f4.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Ali Abdul Rahman](https://unsplash.com/@_actually_?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  prefs: []
  type: TYPE_NORMAL
- en: Detecting and dealing with the trend is a key step in the modeling of time series.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this article, we’ll:'
  prefs: []
  type: TYPE_NORMAL
- en: Describe what is the trend of a time series, and its different characteristics;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Explore how to detect it;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Discuss ways of dealing with trend;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Understanding Trend
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Trend as a building block of time series
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'At any given time, a time series can be decomposed into three parts: trend,
    seasonality, and the remainder.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/47794fbdb75abb78fe7dfa0a145ab264.png)'
  prefs: []
  type: TYPE_IMG
- en: Additive decomposition of a time series
  prefs: []
  type: TYPE_NORMAL
- en: The trend represents the long-term change in the level of a time series. This
    change can be either upward (increase in level) or downward (decrease in level).
    If the change is systematic in one direction, then the trend is monotonic.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/55b9b6390229c5643ae542c9854c116a.png)'
  prefs: []
  type: TYPE_IMG
- en: USA GDP time series with an upward and monotonic trend. Data source in reference
    [1]. Image by author.
  prefs: []
  type: TYPE_NORMAL
- en: Trend as a cause of non-stationarity
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A time series is stationary if its statistical properties do not change. This
    includes the level of the time series, which is constant under stationary conditions.
  prefs: []
  type: TYPE_NORMAL
- en: So, when a time series exhibits a trend, the stationarity assumption is not
    met. Modeling non-stationary time series is challenging. If untreated, statistical
    tests and forecasts can be misleading. This is why it’s important to detect and
    deal with the trend before modeling time series.
  prefs: []
  type: TYPE_NORMAL
- en: A proper characterization of the trend affects modeling decisions. This, further
    down the line, impacts forecasting performance.
  prefs: []
  type: TYPE_NORMAL
- en: Deterministic Trends
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A trend can be either deterministic or stochastic.
  prefs: []
  type: TYPE_NORMAL
- en: Deterministic trends can be modeled with a well-defined mathematical function.
    This means that the long-term behavior of the time series is predictable. Any
    deviation from the trend line is only temporary.
  prefs: []
  type: TYPE_NORMAL
- en: 'In most cases, deterministic trends are linear and can be written as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e7d42c8f91c97b81899fc0ad452693bc.png)'
  prefs: []
  type: TYPE_IMG
- en: The equation for a linear trend. The coefficient *b is the expected change in
    the trend in consecutive periods. The coefficient a is the intercept.*
  prefs: []
  type: TYPE_NORMAL
- en: But, trends can also follow an exponential or polynomial form.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4b3de48533091e7c5209759aa56c2563.png)'
  prefs: []
  type: TYPE_IMG
- en: Exponential trend equation. This trend can be made linear by taking the log
    on both sides.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the economy, there are several examples of time series that increase exponentially,
    such as GDP:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/2d4c6ece4cf5abc9e04f720cee0ce702.png)'
  prefs: []
  type: TYPE_IMG
- en: USA GDP time series. The original trend is exponential, but it becomes linear
    after the logarithm transformation. Data source in reference [1]. Image by author.
  prefs: []
  type: TYPE_NORMAL
- en: A time series with a deterministic trend is called trend-stationary. This means
    the series becomes stationary after removing the trend component.
  prefs: []
  type: TYPE_NORMAL
- en: 'Linear trends can also be modeled by including time as an explanatory variable.
    Here’s an example of how you could do this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Stochastic Trends
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A stochastic trend can change randomly, which makes their behavior difficult
    to predict.
  prefs: []
  type: TYPE_NORMAL
- en: 'A random walk is an example of a time series with a stochastic trend:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/c3957e6b6cbbb55ef2c7954bf8b7424d.png)'
  prefs: []
  type: TYPE_IMG
- en: A random walk time series whose trend changes suddenly and unpredictably. Image
    by author.
  prefs: []
  type: TYPE_NORMAL
- en: Stochastic trends are related to unit roots, integration, and differencing.
  prefs: []
  type: TYPE_NORMAL
- en: Time series with stochastic trends are referred to as difference-stationary.
    This means that the time series can be made stationary by differencing operations.
    Differencing means taking the difference between consecutive values.
  prefs: []
  type: TYPE_NORMAL
- en: Difference-stationary time series are also called integrated. For example, ARIMA
    (Auto-Regressive Integrated Moving Average) models contain a specific term (I)
    for integrated time series. This term involves applying differencing steps until
    the series becomes stationary.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, difference-stationary or integrated time series are characterized by
    unit roots. Without going into mathematical details, a unit root is a characteristic
    of non-stationary time series.
  prefs: []
  type: TYPE_NORMAL
- en: Forecasting Implications
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Deterministic and stochastic trends have different implications for forecasting.
  prefs: []
  type: TYPE_NORMAL
- en: Deterministic trends have a constant variance throughout time. In the case of
    a linear trend, this implies that the slope will not change. But, real-world time
    series show complex dynamics with the trend changing over long periods. So, long-term
    forecasting with deterministic trend models can lead to poor performance. The
    assumption of constant variance leads to narrow forecasting intervals that underestimate
    uncertainty.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/ddfb97d314dec41e493dab23a1ab8b8b.png)'
  prefs: []
  type: TYPE_IMG
- en: Many realizations of a random walk. Image by author.
  prefs: []
  type: TYPE_NORMAL
- en: Stochastic trends are assumed to change over time. As a result, the variance
    of a time series increases across time. This makes stochastic trends better for
    long-term forecasting because they provide more reasonable uncertainty estimations.
  prefs: []
  type: TYPE_NORMAL
- en: How to Detect Trend
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Stochastic trends can be detected using unit root tests. For example, the augmented
    Dickey-Fuller test, or the KPSS test.
  prefs: []
  type: TYPE_NORMAL
- en: Augmented Dickey-Fuller (ADF) test
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The ADF test checks whether an auto-regressive model contains a unit root.
    The hypotheses of the test are:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Null hypothesis: There is a unit root (the time series is not stationary);'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Alternative hypothesis: There’s no unit root.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'This test is available in *statsmodels*:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'The parameter *regression=‘ct’* is used to include a constant term and the
    deterministic trend in the model. As you can check [in the documentation](https://www.statsmodels.org/dev/generated/statsmodels.tsa.stattools.adfuller.html),
    there are four possible alternative values to this parameter:'
  prefs: []
  type: TYPE_NORMAL
- en: '*c*: including a constant term (default value);'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*ct*: a constant term plus linear trend;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*ctt*: constant term plus a linear and quadratic trend;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*n*: no constant or trend.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Choosing which terms should be included is important. A wrong inclusion or exclusion
    of a term can substantially reduce the power of the test. In our case, we used
    the *ct* option because the log GPD series shows a linear deterministic trend
    behavior.
  prefs: []
  type: TYPE_NORMAL
- en: KPSS test
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The KPSS test can also be used to detect stochastic trends. The test hypotheses
    are opposite relative to ADF:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Null hypothesis: the time series is trend-stationary;'
  prefs: []
  type: TYPE_NORMAL
- en: 'Alternative hypothesis: There is a unit root.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: The KPSS rejects the null hypothesis, while ADF doesn’t. So, both tests signal
    the presence of a unit root. Note that a time series can have a trend with both
    deterministic and stochastic components.
  prefs: []
  type: TYPE_NORMAL
- en: So, how can you deal with unit roots?
  prefs: []
  type: TYPE_NORMAL
- en: How to Deal with Trend
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We’ve explored how to use time as an explanatory variable to account for a linear
    trend.
  prefs: []
  type: TYPE_NORMAL
- en: Another way to deal with trends is by differencing. Instead of working with
    the absolute values, you model how the time series changes in consecutive periods.
  prefs: []
  type: TYPE_NORMAL
- en: 'A single differencing operation is usually enough to achieve stationarity.
    Yet, sometimes you need to do this process many times. You can use ADF or KPSS
    to estimate the required number of differencing steps. The *pmdarima* library
    wraps this process in the function *ndiffs*:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'In this case, the log GPD series needs 2 differencing steps for stationarity:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/38c33ab80e8b74a4eb28f838be5e7337.png)'
  prefs: []
  type: TYPE_IMG
- en: Second differences of the log GDP time series. Image by author.
  prefs: []
  type: TYPE_NORMAL
- en: Key Takeaways
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The trend is a key time series component;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Time series that exhibit a trend are non-stationary because the mean level is
    not constant;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The trend of a time series can be deterministic or stochastic. Deterministic
    trends are modeled with well-defined mathematical functions, while stochastic
    trends can change randomly;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Stochastic trends can be detected using unit root tests such as ADF or KPSS;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Differencing operations are used to remove stochastic trends from a time series.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thank you for reading, and see you in the next story!
  prefs: []
  type: TYPE_NORMAL
- en: References
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[1] [GDP Timeseries Data for various Countries](https://www.kaggle.com/datasets/iamtushara/gdp-timeseries-data-for-various-countries)
    (License: CC0: Public Domain)'
  prefs: []
  type: TYPE_NORMAL
- en: '[2] [Stochastic and deterministic trends, in Forecasting: Principles and Practice](https://otexts.com/fpp2/stochastic-and-deterministic-trends.html)'
  prefs: []
  type: TYPE_NORMAL
- en: '[3] [A Random Walk — introduction and properties](https://www.youtube.com/watch?v=ouahL4HbwBE&ab_channel=BenLambert)
    by Ben Lambert'
  prefs: []
  type: TYPE_NORMAL
