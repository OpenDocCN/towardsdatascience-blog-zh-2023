- en: Unlock Your Full Potential as a Business Analyst With the Powerful 5-Step Causal
    Impact Framework
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/unlock-your-full-potential-as-a-business-analyst-with-the-powerful-5-step-causal-impact-framework-8783f8cda4dc?source=collection_archive---------4-----------------------](https://towardsdatascience.com/unlock-your-full-potential-as-a-business-analyst-with-the-powerful-5-step-causal-impact-framework-8783f8cda4dc?source=collection_archive---------4-----------------------)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**Causal inference can help you become a business analyst rockstar**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@juanjosemunozp?source=post_page-----8783f8cda4dc--------------------------------)[![Juan
    Jose Munoz](../Images/b42d72e9e2a2eaf11da5465e9b041d53.png)](https://medium.com/@juanjosemunozp?source=post_page-----8783f8cda4dc--------------------------------)[](https://towardsdatascience.com/?source=post_page-----8783f8cda4dc--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----8783f8cda4dc--------------------------------)
    [Juan Jose Munoz](https://medium.com/@juanjosemunozp?source=post_page-----8783f8cda4dc--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----8783f8cda4dc--------------------------------)
    ·7 min read·Nov 22, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '**In a business context, the leadership is often interested in the impact of
    a decision or event on the KPI of interest.** As a performance analyst, I spend
    most of my time answering some variant of this question: “What is the impact of
    {News, government announcement, special event…} in the Country’s X performance?”.
    Intuitively, we can answer this question if we had a way of knowing what would
    have happened if the News/ announcement/ Special event had never happened.'
  prefs: []
  type: TYPE_NORMAL
- en: '**This is the essence of causal inference, and some very talented people are
    working hard to make causal inference frameworks available for us to use.**'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/2d9ad0b0b476457ea4385e4790bb2aeb.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Andrew George](https://unsplash.com/@andrewjoegeorge?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  prefs: []
  type: TYPE_NORMAL
- en: Google Causal Impact library is one of those frameworks. Developed by Google
    to help them make better marketing budget decisions, this library can help us
    quantify the impact of any event or intervention on a time series of interest.
    It may sound scary, but it’s actually quite intuitive.
  prefs: []
  type: TYPE_NORMAL
- en: As business analysts, we should leverage these tools in our day-to-day lives;
    here are 5 easy steps you can take to implement your first Causal Impact analysis.
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 1: Install and Import Packages'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: For this guide, we will be using Python.
  prefs: []
  type: TYPE_NORMAL
- en: We will start by installing the Google Causal Impact package.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: you can find more information about this package in github:[https://github.com/WillianFuks/tfcausalimpact](https://github.com/WillianFuks/tfcausalimpact)
  prefs: []
  type: TYPE_NORMAL
- en: To run a Causal Impact analysis, you only need 4 packages.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 2: Import Data and Define Pre/Post Periods'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**We can think of the Causal Impact framework as a time series problem.**'
  prefs: []
  type: TYPE_NORMAL
- en: On a specific date, we observe an event, news, etc.… and track how our measure
    of interest changes after this event compared to some baseline. You can think
    of your baseline as a control group.
  prefs: []
  type: TYPE_NORMAL
- en: 'To perform a Causal Impact analysis, we will need the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Date of the event to study
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Time Series of our variable of interest for our impacted unit
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Time Series of our variable of interest for our impacted unit
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Time Series of our variable of interest for other multiple units that were not
    impacted by the event
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'For my example, I am using a made-up scenario as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Event:** Global conference happened on July 9th, 2022, in Barcelona'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Variable of Interest**: Passenger revenue for an airline'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Impacted Unit**: Barcelona'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Control group:** Other European Markets'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Question:** What was the impact of the Conference on Passenger revenue in
    Barcelona?'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: When considering the time frame, you should aim to keep the post-period as short
    as possible, and the pre-period should be longer than your post-period.
  prefs: []
  type: TYPE_NORMAL
- en: Please note that the data is artificial for illustration only.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/10c5454cbd2ea71e6fb94de81e38a013.png)'
  prefs: []
  type: TYPE_IMG
- en: Head of data DataFrame
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 3: Creating a Control Group'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This step is the most critical part.
  prefs: []
  type: TYPE_NORMAL
- en: 'To estimate the impact of any event or treatment, we need to know our unit
    of interest *(example: Barcelona Passenger Revenue)* under the treatment and under
    no treatment. This is the main problem of causal inference.'
  prefs: []
  type: TYPE_NORMAL
- en: We can never observe our unit of interest under two mutually exclusive circumstances.
    The solution is to create a counterfactual scenario.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**You can think of a counterfactual as a hypothetical scenario where the event/treatment
    did not occur.**'
  prefs: []
  type: TYPE_NORMAL
- en: '**Our control group will help us create this scenario.** To decide which markets
    to include in our control group, we need to calculate which markets have predictive
    power to predict our market of interest (Barcelona). We will use correlation to
    establish this predictive power.'
  prefs: []
  type: TYPE_NORMAL
- en: This step needs to be done using the PRE-TREATMENT period only.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: When checking correlation using time series, we need our data to be stationary,
    meaning without a trend or seasonal components, to avoid finding spurious correlations.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/38628a17b0baca69aa5f4626ef92bf1a.png)'
  prefs: []
  type: TYPE_IMG
- en: Results from adfuller test
  prefs: []
  type: TYPE_NORMAL
- en: '**However, most of the time series are not stationary, but we can use a method
    called differencing to make them stationary.**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/655da767b7c923283bf63b1c80f151b5.png)'
  prefs: []
  type: TYPE_IMG
- en: Each row represents the % difference from the previous day.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/7fdb6f7eec170d9658400614ce461658.png)'
  prefs: []
  type: TYPE_IMG
- en: Now, we can use this new time series to establish the correlation between markets.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/3f2e240aadea11ea2b4eec232b06ed17.png)'
  prefs: []
  type: TYPE_IMG
- en: Markets that we will use for our control group
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 4: Implementing CausalImpact'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now, we are ready to implement CausalImpact.
  prefs: []
  type: TYPE_NORMAL
- en: '**In a nutshell, CausalImpact will use our control group to learn to predict
    the Passenger Revenue in Barcelona during the Pre-period**. The model will use
    this to predict the counterfactual post-period scenario where the Conference did
    not happen.'
  prefs: []
  type: TYPE_NORMAL
- en: The Delta between what actually happened and the counterfactual scenario is
    the impact of the conference.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 5: Interpreting Results & Validation'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Google CausalImpact makes it very easy to visualize and summarize the results.
  prefs: []
  type: TYPE_NORMAL
- en: You can start by plotting the impact.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/f7c4fdf29aaecd2eaf4d7610bd933670.png)'
  prefs: []
  type: TYPE_IMG
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: Depending on what you are measuring, you might be interested in average impact
    or cumulative impact. In our case, we are interested in the cumulative impact
    over the period of the conference.
  prefs: []
  type: TYPE_NORMAL
- en: Based on the analysis, the conference contributed to a +$2.8M upside in passenger
    revenue for Barcelona.
  prefs: []
  type: TYPE_NORMAL
- en: For a more comprehensive summary, you can use the below command.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: '**Unlike in machine learning, Causal Impact has no accuracy measures, which
    can make validation a bit tricky.**'
  prefs: []
  type: TYPE_NORMAL
- en: However, there are 3 things you can do to validate your results.
  prefs: []
  type: TYPE_NORMAL
- en: Ensure your confidence interval in the Pre-period is not too broad — this could
    indicate that your control group is not predictive enough.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure the confidence interval of the estimated impact does not contain 0
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use refutation tests, for example, if you conduct the same analysis but change
    the event date to any day in the pre-period, the impact should be 0
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This is one of the most common analyses I do at work; once you get familiar
    with the 5 steps framework, you too can use it and be on your way to becoming
    a business analyst rockstar.
  prefs: []
  type: TYPE_NORMAL
- en: '**References**'
  prefs: []
  type: TYPE_NORMAL
- en: '[1]Brodersen, K. H., Gallusser, F., Koehler, J., Remy, N., & Scott, S. L. (2015).
    Inferring causal impact using Bayesian structural time-series models.'
  prefs: []
  type: TYPE_NORMAL
- en: '[2]Molak, A., & Jaokar, A. (2023). Causal Inference and Discovery in Python:
    Unlock the secrets of modern causal machine learning with DoWhy, EconML, PyTorch
    and more [Paperback]. May 31.'
  prefs: []
  type: TYPE_NORMAL
- en: '[3][https://research.google/pubs/pub41854/](https://research.google/pubs/pub41854/)[Inferring
    the effect of an event using CausalImpact by Kay Brodersen](https://www.youtube.com/watch?v=GTgZfCltMm8&ab_channel=BigThingsConference)'
  prefs: []
  type: TYPE_NORMAL
