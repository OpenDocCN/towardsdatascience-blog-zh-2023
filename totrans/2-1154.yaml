- en: How to Create Interpolation Videos with Stable Diffusion and Deform
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/how-to-create-videos-with-stable-diffusion-1c9c3b34be84](https://towardsdatascience.com/how-to-create-videos-with-stable-diffusion-1c9c3b34be84)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Generative AI
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Using frame interpolation to create videos with Stable Diffusion and Deforum
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)[![Oscar
    Leo](../Images/7733c9147bad2875a35155fca3903aa8.png)](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)[](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)
    [Oscar Leo](https://medium.com/@oscarleo?source=post_page-----1c9c3b34be84--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----1c9c3b34be84--------------------------------)
    ·6 min read·Feb 17, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/10a84d5f8ec2a71a26f5a620cabc9241.png)'
  prefs: []
  type: TYPE_IMG
- en: Image generated by the author using [DeForum](https://github.com/deforum-art/deforum-stable-diffusion)
  prefs: []
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Everywhere you look, you see images generated by algorithms such as Stable Diffusion
    and Midjourney. Video, however, is a far more challenging prospect.
  prefs: []
  type: TYPE_NORMAL
- en: I work with a media production company, and AI videos have a long way to go
    before they become widely used within the industry. The quality is not there yet,
    by a mile.
  prefs: []
  type: TYPE_NORMAL
- en: Challenges
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There are several challenges, such as flickering between frames, resolution,
    and computation, to name a few.
  prefs: []
  type: TYPE_NORMAL
- en: I should also mention the ongoing debate about copyright issues for algorithms
    trained on content from the internet. It’s clear that the current approach is
    too liberal. I’ll follow this development with great interest.
  prefs: []
  type: TYPE_NORMAL
- en: Current use-cases
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: However, media production is all about creating engaging and unique content,
    and AI can certainly be a component of that already.
  prefs: []
  type: TYPE_NORMAL
- en: One use case is to add a different style to an original video, as they did in
    [the crow](https://www.youtube.com/watch?v=5dvxY6vXHsA), where they first recorded
    a dancer and then had an algorithm adjust each frame.
  prefs: []
  type: TYPE_NORMAL
- en: We will see progress on that topic constantly going forward, but in this post,
    I’ll show you a simple approach to get you started. We will create a short video
    by transforming images through interpolation using [DeForum](https://github.com/deforum-art/deforum-stable-diffusion).
  prefs: []
  type: TYPE_NORMAL
- en: Let’s get started! :)
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 1: Setting up VastAI'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To use Deforum, you need a GPU. If you don’t have one on your computer, the
    easiest and cheapest alternative is [vast.ai](https://vast.ai/).
  prefs: []
  type: TYPE_NORMAL
- en: Instance Configuration
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: First, you need to select which image to use. I’ll go for pytorch/pytorch version
    “1.13.1-cuda11.6-cudnn8-devel” It’s not the only correct option, but it works.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/17372a05e72c7d9ef587a1b2e5b1b0bd.png)'
  prefs: []
  type: TYPE_IMG
- en: 'For launch mode, I’ll go for the most straightforward option: a standard Jupyter
    notebook.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1a6e331741dbdfd171454fcd03854e0a.png)'
  prefs: []
  type: TYPE_IMG
- en: The last configuration you need to change is to increase the disk space since
    the models are massive.
  prefs: []
  type: TYPE_NORMAL
- en: Selecting a GPU
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Next, it’s time to select a GPU. There are thousands of options, but a standard
    3090 will work fine. Make sure that the upload and download speeds are decent.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a6039087b76c5121dac399762e26d1c6.png)'
  prefs: []
  type: TYPE_IMG
- en: The price should be around $0.4 per hour, but feel free to pay more if you want
    a better GPU.
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 2: Install Deforum'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Deforum explains the installation process on their GitHub, but I’ll also write
    it here to make this tutorial easier to follow.
  prefs: []
  type: TYPE_NORMAL
- en: '2.1: Open instance'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To open your instance, go to “Instances” in the menu to the left and click the
    blue “Open button” to the right.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e20274fb75bc0965c908b87fde9014a4.png)'
  prefs: []
  type: TYPE_IMG
- en: '2.2: Open terminal'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Once inside, open a terminal by clicking “New” and selecting the terminal option.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/9c9dbf9c3df85a38a14f3c4992491941.png)'
  prefs: []
  type: TYPE_IMG
- en: Run the following two commands to install conda and close the terminal for the
    changes to take effect.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Open a new terminal just like before and activate the conda environment.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '2.3: Install everything'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Install everything by running the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'After a few minutes, you can test if everything is working correctly by running
    the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 3: Create a video'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 3.1 Open notebook
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When everything is installed and working, close the terminal, and open “Deforum_Stable_Diffusion.ipynb”
    inside the deforum-stable-diffusion folder.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d9b3fbc64b012cdc98120857f405f233.png)'
  prefs: []
  type: TYPE_IMG
- en: Change the kernel to dsd and run the first three cells. It can take a little
    time for the third cell to finish.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/32ede2f8c1bfdb9eddb29a5011e2d75f.png)'
  prefs: []
  type: TYPE_IMG
- en: 3.2 Select a starting image [optional]
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If you want to, you can start from an original image. I’m going to use the following
    image from [Pexels](https://www.pexels.com/).
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/444df0de9a45529c29099c2fc1d4b907.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Photo by Nout Gons: [https://www.pexels.com/photo/city-street-photo-378570/](https://www.pexels.com/photo/city-street-photo-378570/)'
  prefs: []
  type: TYPE_NORMAL
- en: You need to make sure that the image is of a reasonable size. Otherwise, it
    won’t fit into RAM. So I resized this image to 801x512 (Deforum will cut the sides
    to 768x512).
  prefs: []
  type: TYPE_NORMAL
- en: To upload the image, click upload, and place it somewhere reasonable. For example,
    I put it under /deforum-stable-diffusion.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/2ba45648d68e246a783e95b8c641e41d.png)'
  prefs: []
  type: TYPE_IMG
- en: 3.3 Deforum settings
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As soon as you open the Notebook, you’ll see hundreds of settings you can adjust.
    Unfortunately, it’s not a perfect interface because many settings are only relevant
    based on previous choices.
  prefs: []
  type: TYPE_NORMAL
- en: '**Note:** The individual settings can be hard to find and don’t come in the
    order that I write them. It’s best to search for the location using ctrl+F or
    cmd+F.'
  prefs: []
  type: TYPE_NORMAL
- en: First, we change the **animation_mode** to **Interpolation** and **interpolate_x_frames**
    to some reasonable value. **interpolate_x_frames** decides how many frames the
    algorithm should generate between your keyframes.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Next, we create our prompts by changing **animation_prompts**. The numbers you
    see to the left don’t matter for **Interpolation**.
  prefs: []
  type: TYPE_NORMAL
- en: For other use cases, that number decides when to start using a specific prompt,
    but for Interpolation, these become our keyframes, and we generate **interpolate_x_frames**
    frames between each.
  prefs: []
  type: TYPE_NORMAL
- en: Here are my prompts, but you can write whatever you want.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: If you don’t use an original image, continue to **3.4**; otherwise, follow the
    instructions below.
  prefs: []
  type: TYPE_NORMAL
- en: Now, we change **W** and **H** to the dimensions of our selected image. In my
    case, that’s 801x512.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'To use the image, we need to change the following settings as well:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '**Strength** decides how much of the original image to keep. A number close
    to 1 means we will save much of the original image. **Init_image** should, of
    course, point to the location of your image.'
  prefs: []
  type: TYPE_NORMAL
- en: '**3.4 Generate images**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Run cells 3, 4, and 5\. First, the algorithm will generate keyframes based on
    your prompts in **animation_prompts**.
  prefs: []
  type: TYPE_NORMAL
- en: When the keyframes are done, it will continue to create the intermediate frames.
    This can take some time if you have many prompts in **animation_prompts** and
    a large **interpolate_x_frames**.
  prefs: []
  type: TYPE_NORMAL
- en: '**3.5 Create video**'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Create a new cell at the bottom of your Notebook, and paste the following code.
    Then run the cell to create your video.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Here’s what my video looks like:'
  prefs: []
  type: TYPE_NORMAL
- en: 'And here’s one more example:'
  prefs: []
  type: TYPE_NORMAL
- en: That’s it for my tutorial; happy hacking! If you create something cool, please
    share.
  prefs: []
  type: TYPE_NORMAL
- en: Thank you for reading! :)
  prefs: []
  type: TYPE_NORMAL
