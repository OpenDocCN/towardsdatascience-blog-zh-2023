# 超越 Numpy 和 Pandas：释放鲜为人知的 Python 库的潜力

> 原文：[https://towardsdatascience.com/beyond-numpy-and-pandas-unlocking-the-potential-of-lesser-known-python-libraries-86d2bdc4d230](https://towardsdatascience.com/beyond-numpy-and-pandas-unlocking-the-potential-of-lesser-known-python-libraries-86d2bdc4d230)

## 3 个数据专业人员应该了解的 Python 科学计算库

[](https://federicotrotta.medium.com/?source=post_page-----86d2bdc4d230--------------------------------)[![Federico Trotta](../Images/e997e3a96940c16ab5071629016d82fd.png)](https://federicotrotta.medium.com/?source=post_page-----86d2bdc4d230--------------------------------)[](https://towardsdatascience.com/?source=post_page-----86d2bdc4d230--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----86d2bdc4d230--------------------------------) [Federico Trotta](https://federicotrotta.medium.com/?source=post_page-----86d2bdc4d230--------------------------------)

·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----86d2bdc4d230--------------------------------) ·阅读时间 12 分钟·2023 年 7 月 6 日

--

![](../Images/8d87b395925ef2d403f2cee6542c46b9.png)

图片由 [OrMaVaredo](https://pixabay.com/it/users/ormavaredo-14515736/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=5826755) 提供，来源于 [Pixabay](https://pixabay.com/it//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=5826755)

Python 是世界上使用最广泛的编程语言之一，为开发者提供了广泛的库。

无论如何，当涉及数据处理和科学计算时，我们通常会想到 `Numpy`、`Pandas` 或 `SciPy` 等库。

在这篇文章中，我们介绍了 3 个你可能感兴趣的 Python 库。

# 1\. Dask

## 介绍 Dask

Dask 是一个灵活的并行计算库，使大规模数据处理的分布式计算和并行处理成为可能。

那么，我们为什么要使用 Dask 呢？正如他们在 [他们的网站](https://www.dask.org/) 上所说：

> Python 已经成长为数据分析和通用编程领域的主导语言。这一增长得益于像 NumPy、pandas 和 scikit-learn 这样的计算库。然而，这些包并未设计用于超越单机的规模。Dask 的开发旨在将这些包及其生态系统本地扩展到多核机器和分布式集群，当数据集超出内存时。

因此，Dask 的一个常见用途是 [如他们所说](https://docs.dask.org/en/latest/dataframe.html)：

> Dask DataFrame 在 pandas 常用的情况下使用，通常是当 pandas 因数据大小或计算速度而失败时：
> 
> - 操作大数据集，即使这些数据集无法完全加载到内存中
> 
> - 通过使用多个核心加速长时间计算
> 
> - 在大型数据集上进行分布式计算，使用标准 pandas 操作，如 groupby、join 和时间序列计算

所以，当我们需要处理巨大的 Pandas 数据框时，Dask 是一个不错的选择。这是因为 Dask：

> 允许用户在笔记本电脑上处理 100GB+ 的数据集，或在工作站上处理 1TB+ 的数据集

这是一项相当令人印象深刻的结果。

在幕后发生的情况是：

> Dask 数据框协调许多按索引排列的 pandas 数据框/系列。Dask 数据框是按*行*分区的，通过按索引值分组行以提高效率。这些 pandas 对象可能存储在磁盘上或其他机器上。

所以，我们可以得到类似这样的结果：

![](../Images/71811bfd3b02b98adc658fe6251dc6ed.png)

Dask 和 Pandas 数据框之间的区别。图像由作者提供，灵感来自于已引用的 Dask 网站上的图像。

## Dask 的一些功能展示

首先，我们需要安装 Dask。我们可以通过`pip`或`conda`来完成，方法如下：

[PRE0]

**功能一：打开 CSV 文件**

我们可以展示的第一个 Dask 特性是如何打开 CSV 文件。我们可以这样做：

[PRE1]

所以，正如我们在代码中看到的，使用 Dask 的方式与 Pandas 非常相似。特别是：

+   我们使用`read_csv()`方法，就像在 Pandas 中一样。

+   我们以完全相同的方式截取列，就像在 Pandas 中一样。实际上，如果我们有一个名为`df`的 Pandas 数据框，我们会这样截取列：`df['column_name']`。

+   我们对截取的列应用`mean()`方法，类似于 Pandas，但这里我们还需要添加`compute()`方法。

此外，即使打开 CSV 文件的方法与 Pandas 相同，在幕后 Dask 也在轻松处理超出单台机器内存容量的大型数据集。

这意味着我们看不到任何实际差异，除了一个事实，那就是大型数据框在 Pandas 中无法打开，但在 Dask 中可以。

**功能二：扩展机器学习工作流**

我们还可以使用 Dask 创建一个包含大量样本的分类数据集。然后，我们可以将其拆分为训练集和测试集，用 ML 模型拟合训练集，并为测试集计算预测结果。

我们可以这样做：

[PRE2]

这个例子强调了 Dask 处理庞大数据集的能力，即使在机器学习问题的情况下，通过将计算分布到多个核心上。

具体来说，我们可以使用方法`dask_datasets.make_classification()`创建一个用于分类的“Dask 数据集”，并且我们可以指定样本数量和块（甚至非常庞大！）。

和之前一样，预测结果是通过`compute()`方法获得的。

[PRE3]

**功能三：高效的图像处理**

Dask 利用的并行处理能力也可以应用于图像。

具体来说，我们可以打开多个图像，调整其大小，并保存调整后的图像。我们可以这样做：

[PRE4]

所以，这里是处理流程：

1.  我们用方法`dask_image.imread.imread("image*.jpg")`打开当前文件夹中的所有“.jpg”图像（或者是一个你可以指定的文件夹中的图像）。

1.  我们用`da.stack()`方法中的列表推导式将它们调整到300x300。

1.  我们使用方法`compute()`来计算结果，就像以前一样。

1.  我们用for循环保存所有调整大小的图像。

# 2\. SymPy

## 介绍Sympy

如果你需要进行数学计算和运算，并且希望坚持使用Python，你可以尝试Sympy。

确实：为何使用其他工具和软件，当我们可以使用我们喜爱的Python呢？

根据他们在[网站](https://www.sympy.org/en/index.html)上的描述，Sympy是：

> 一个用于符号数学的Python库。它旨在成为一个功能齐全的计算机代数系统（CAS），同时保持代码尽可能简单，以便易于理解和扩展。SymPy完全用Python编写。

但为什么使用SymPy？他们建议：

> SymPy是...
> 
> **- 免费：** 根据BSD许可证，SymPy既是免费的（在言论上），也是免费的（在酒精上）。
> 
> **- 基于Python：** SymPy完全用Python编写，并且使用Python作为其语言。
> 
> **- 轻量级：** SymPy仅依赖于mpmath，一个用于任意浮点运算的纯Python库，使其易于使用。
> 
> **- 一个库：** 除了作为交互工具使用外，SymPy可以嵌入到其他应用程序中，并通过自定义函数进行扩展。

所以，它基本上具备了Python爱好者喜欢的所有特点！

现在，让我们看看它的一些功能。

## SymPy的某些功能展示

首先，我们需要安装它：

[PRE5]

[PRE6]

**特性一：解决代数方程**

如果我们需要解决代数方程，可以像这样使用SymPy：

[PRE7]

所以，这就是过程：

1.  我们使用`symbols()`方法定义方程的符号。

1.  我们用`Eq`方法编写代数方程。

1.  我们用`solve()`方法解决方程。

当我在大学时，我使用过不同的工具来解决这些问题，我不得不说，正如我们所见，SymPy非常易读且用户友好。

但确实：它是一个Python库，那会有什么不同呢？

**特性二：计算导数**

计算导数是我们在数据分析中可能需要的另一项任务。通常，我们可能需要进行计算，SymPy确实简化了这个过程。实际上，我们可以这样做：

[PRE8]

所以，正如我们所见，过程非常简单且自解释：

1.  我们使用`symbols()`定义我们要导出的函数的符号。

1.  我们定义函数。

1.  我们用`diff()`计算导数，指定函数和我们计算导数的符号（这是绝对导数，但对于具有`x`和`y`变量的函数，我们也可以进行偏导数计算）。

如果我们测试它，我们会看到结果在2到3秒内到达。所以，它也相当快。

**特性三：计算积分**

当然，如果SymPy可以计算导数，它也可以计算积分。让我们来做一下：

[PRE9]

所以，在这里我们使用方法 `integrate()`，指定要积分的函数和积分变量。

难道不更简单吗？！

# 3. Xarray

## 介绍 Xarray

Xarray 是一个 Python 库，它扩展了 NumPy 的功能和特性，使我们能够使用标签数组和数据集。

正如[他们的网站](https://docs.xarray.dev/en/stable/)上所说的：

> Xarray 使得在 Python 中处理带标签的多维数组变得简单、高效且有趣！

以及[也](https://docs.xarray.dev/en/stable/getting-started-guide/why-xarray.html)：

> Xarray 在原始的类似 NumPy 的多维数组之上引入了标签，如维度、坐标和属性，从而允许更直观、更简洁且错误更少的开发体验。

换句话说，它通过为数组维度添加标签或坐标来扩展 NumPy 数组的功能。这些标签提供了元数据，并使得对多维数据进行更高级的分析和操作成为可能。

例如，在 NumPy 中，数组是通过基于整数的索引进行访问的。

在 Xarray 中，每个维度可以有一个关联的标签，使得基于有意义的名称理解和操作数据变得更容易。

例如，在 Xarray 中，我们可以使用 `arr.sel(x=0, y=1, z=2)` 来代替 `arr[0, 1, 2]`，其中 `x`、`y` 和 `z` 是维度标签。

这使得代码更加可读！

所以，让我们看看 Xarray 的一些功能。

## Xarray 的一些功能示例

一如既往，要安装它：

[PRE10]

**功能一：处理带标签的坐标**

假设我们想创建一些与温度相关的数据，并希望用坐标如纬度和经度来标记这些数据。我们可以这样做：

[PRE11]

如果我们打印它们，我们得到：

[PRE12]

所以，让我们一步步来看这个过程：

1.  我们已经创建了一个温度值的 NumPy 数组。

1.  我们已经将纬度和经度值定义为 NumPy 数组。

1.  我们已经使用方法 `DataArray()` 将所有数据存储在一个 Xarray 数组中。

1.  我们使用方法 `sel()` 选择了纬度和经度的一个子集，这个方法选择了我们想要的子集值。

结果也很容易读取，因此标签在很多情况下确实很有帮助。

**功能二：处理缺失数据**

假设我们正在收集一年中的温度数据。我们想知道数组中是否有一些空值。方法如下：

[PRE13]

于是我们得到有 10 个空值。

同样，如果我们仔细看看代码，我们可以看到可以将 Pandas 的方法应用于 Xarray，如 `isnull.sum()`，在这个例子中，这个方法计算了缺失值的总数。

**功能一：处理和分析多维数据**

当我们有可能给数组加标签时，处理和分析多维数据的诱惑很大。那么，为什么不试试呢？

例如，假设我们仍在收集与特定纬度和经度相关的温度数据。

我们可能希望计算均值、最大值和中位数温度。我们可以这样做：

[PRE14]

我们达到了我们想要的结果，并且方式也很清晰易读。

再次如前所述，我们通过 Pandas 的函数应用于一个数组来计算最大值、最小值和均值。

# 结论

在这篇文章中，我们展示了三种用于科学计算的库。

虽然 SymPy 可以替代其他工具和软件，让我们有可能使用 Python 代码进行数学计算，但 Dask 和 Xarray 扩展了其他库的功能，帮助我们在遇到其他最知名的 Python 数据分析和处理库的困难时应对。

![](../Images/5079e3af9eda458328cb258c452fb935.png)

费德里科·特罗塔

嗨，我是费德里科·特罗塔，我是一名自由职业的技术作家。

想与我合作？[联系我](https://bio.link/federicotrotta)。
