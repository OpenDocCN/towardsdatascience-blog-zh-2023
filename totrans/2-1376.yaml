- en: Running Jaffle Shop dbt Project in Docker
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åœ¨Dockerä¸­è¿è¡ŒJaffle Shop dbté¡¹ç›®
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/jaffle-shop-dbt-docker-93a9b14532a4](https://towardsdatascience.com/jaffle-shop-dbt-docker-93a9b14532a4)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/jaffle-shop-dbt-docker-93a9b14532a4](https://towardsdatascience.com/jaffle-shop-dbt-docker-93a9b14532a4)
- en: A containerised version of the popular Jaffle Shop dbt project
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æµè¡Œçš„Jaffle Shop dbté¡¹ç›®çš„å®¹å™¨åŒ–ç‰ˆæœ¬
- en: '[](https://gmyrianthous.medium.com/?source=post_page-----93a9b14532a4--------------------------------)[![Giorgos
    Myrianthous](../Images/ff4b116e4fb9a095ce45eb064fde5af3.png)](https://gmyrianthous.medium.com/?source=post_page-----93a9b14532a4--------------------------------)[](https://towardsdatascience.com/?source=post_page-----93a9b14532a4--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----93a9b14532a4--------------------------------)
    [Giorgos Myrianthous](https://gmyrianthous.medium.com/?source=post_page-----93a9b14532a4--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://gmyrianthous.medium.com/?source=post_page-----93a9b14532a4--------------------------------)[![Giorgos
    Myrianthous](../Images/ff4b116e4fb9a095ce45eb064fde5af3.png)](https://gmyrianthous.medium.com/?source=post_page-----93a9b14532a4--------------------------------)[](https://towardsdatascience.com/?source=post_page-----93a9b14532a4--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----93a9b14532a4--------------------------------)
    [Giorgos Myrianthous](https://gmyrianthous.medium.com/?source=post_page-----93a9b14532a4--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----93a9b14532a4--------------------------------)
    Â·8 min readÂ·Apr 28, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒäº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----93a9b14532a4--------------------------------)
    Â·8åˆ†é’Ÿé˜…è¯»Â·2023å¹´4æœˆ28æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/90bb3052f4f1d0f374def43154a20afe.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/90bb3052f4f1d0f374def43154a20afe.png)'
- en: Photo by [Ryan Howerter](https://unsplash.com/@rhowerter?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/JXIFjYVbAS8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[Ryan Howerter](https://unsplash.com/@rhowerter?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)çš„ç…§ç‰‡ï¼Œæ¥è‡ª[Unsplash](https://unsplash.com/photos/JXIFjYVbAS8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)'
- en: If you are new to data build tool (dbt) you have probably come across the so
    called Jaffle Shop, a project used for testing purposes.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æ˜¯æ•°æ®æ„å»ºå·¥å…·ï¼ˆdbtï¼‰çš„æ–°æ‰‹ï¼Œä½ å¯èƒ½å·²ç»é‡åˆ°è¿‡æ‰€è°“çš„Jaffle Shopï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºæµ‹è¯•çš„é¡¹ç›®ã€‚
- en: '`jaffle_shop` is a fictional ecommerce store. This dbt project transforms raw
    data from an app database into a customers and orders model ready for analytics.'
  id: totrans-9
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`jaffle_shop` æ˜¯ä¸€ä¸ªè™šæ„çš„ç”µå­å•†åŠ¡å•†åº—ã€‚è¿™ä¸ªdbté¡¹ç›®å°†åº”ç”¨æ•°æ®åº“ä¸­çš„åŸå§‹æ•°æ®è½¬æ¢æˆä¸€ä¸ªé€‚åˆåˆ†æçš„å®¢æˆ·å’Œè®¢å•æ¨¡å‹ã€‚'
- en: ''
  id: totrans-10
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '- [Jaffle Shop GitHub project](https://github.com/dbt-labs/jaffle_shop)'
  id: totrans-11
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '- [Jaffle Shop GitHubé¡¹ç›®](https://github.com/dbt-labs/jaffle_shop)'
- en: One fundamental issue I observed with the Jaffle Shop project is that it expects
    users, who may be newcomers to dbt, to configure and host a local database for
    the dbt models to materialize.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘è§‚å¯Ÿåˆ°çš„Jaffle Shopé¡¹ç›®çš„ä¸€ä¸ªæ ¹æœ¬é—®é¢˜æ˜¯ï¼Œå®ƒæœŸæœ›ç”¨æˆ·ï¼ˆå¯èƒ½æ˜¯dbtçš„æ–°æ‰‹ï¼‰é…ç½®å¹¶æ‰˜ç®¡ä¸€ä¸ªæœ¬åœ°æ•°æ®åº“ï¼Œä»¥ä¾¿dbtæ¨¡å‹èƒ½å¤Ÿç”Ÿæˆã€‚
- en: In this tutorial, Iâ€™ll demonstrate how to create a containerized version of
    the project using Docker. This will allow us to deploy a Postgres instance and
    configure the dbt project to read from and write to that database. Iâ€™ll also provide
    a link to a GitHub project Iâ€™ve created that will help you get all the services
    up and running in no time.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Dockeråˆ›å»ºé¡¹ç›®çš„å®¹å™¨åŒ–ç‰ˆæœ¬ã€‚è¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿéƒ¨ç½²ä¸€ä¸ªPostgreså®ä¾‹ï¼Œå¹¶å°†dbté¡¹ç›®é…ç½®ä¸ºä»è¯¥æ•°æ®åº“è¯»å–å’Œå†™å…¥ã€‚æˆ‘è¿˜ä¼šæä¾›ä¸€ä¸ªæˆ‘åˆ›å»ºçš„GitHubé¡¹ç›®é“¾æ¥ï¼Œå®ƒå°†å¸®åŠ©ä½ è¿…é€Ÿå¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚
- en: '[**Subscribe to Data Pipeline**](https://thedatapipeline.substack.com/welcome)**,
    a newsletter dedicated to Data Engineering**'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[**è®¢é˜…æ•°æ®ç®¡é“**](https://thedatapipeline.substack.com/welcome)**ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“æ³¨äºæ•°æ®å·¥ç¨‹çš„æ–°é—»é€šè®¯**'
- en: Creating the Dockerfile and docker-compose.yml
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åˆ›å»ºDockerfileå’Œdocker-compose.yml
- en: Letâ€™s begin by defining the services we want to run through Docker. First, weâ€™ll
    create a `[docker-compose.yml](https://github.com/gmyrianthous/jaffle_shop/blob/main/docker-compose.yml)`
    file where we'll define two services. The first service will be the Postgres database,
    and the second will be a custom service that we'll create in the next step using
    a Dockerfile.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å¼€å§‹å®šä¹‰æˆ‘ä»¬æƒ³è¦é€šè¿‡Dockerè¿è¡Œçš„æœåŠ¡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª`[docker-compose.yml](https://github.com/gmyrianthous/jaffle_shop/blob/main/docker-compose.yml)`æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å®šä¹‰ä¸¤ä¸ªæœåŠ¡ã€‚ç¬¬ä¸€ä¸ªæœåŠ¡æ˜¯Postgresæ•°æ®åº“ï¼Œç¬¬äºŒä¸ªæœåŠ¡æ˜¯æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€æ­¥ä¸­ä½¿ç”¨Dockerfileåˆ›å»ºçš„è‡ªå®šä¹‰æœåŠ¡ã€‚
- en: '[PRE0]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The file specifies the version of Docker Compose being used (version 3.9). It
    defines two services, `postgres` and `dbt`, each with their own settings.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ–‡ä»¶æŒ‡å®šäº†ä½¿ç”¨çš„Docker Composeç‰ˆæœ¬ï¼ˆ3.9ç‰ˆï¼‰ã€‚å®ƒå®šä¹‰äº†ä¸¤ä¸ªæœåŠ¡ï¼Œ`postgres` å’Œ `dbt`ï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„è®¾ç½®ã€‚
- en: The `postgres` service is based on the official `postgres` Docker image version
    15.2-alpine. It sets the container name to `postgres`, maps port 5432 (the default
    port for Postgres) to the host machine, and sets environment variables for the
    Postgres user and password. The `healthcheck` section specifies a command to test
    if the container is healthy, and sets a timeout and retries for the check.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '`postgres`æœåŠ¡åŸºäºå®˜æ–¹çš„`postgres` Dockeré•œåƒç‰ˆæœ¬15.2-alpineã€‚å®ƒå°†å®¹å™¨åç§°è®¾ç½®ä¸º`postgres`ï¼Œå°†ç«¯å£5432ï¼ˆPostgresçš„é»˜è®¤ç«¯å£ï¼‰æ˜ å°„åˆ°ä¸»æœºï¼Œå¹¶ä¸ºPostgresç”¨æˆ·å’Œå¯†ç è®¾ç½®ç¯å¢ƒå˜é‡ã€‚`healthcheck`éƒ¨åˆ†æŒ‡å®šäº†ä¸€ä¸ªå‘½ä»¤æ¥æµ‹è¯•å®¹å™¨æ˜¯å¦å¥åº·ï¼Œå¹¶è®¾ç½®äº†æ£€æŸ¥çš„è¶…æ—¶æ—¶é—´å’Œé‡è¯•æ¬¡æ•°ã€‚'
- en: The `dbt` service specifies a `dbt` container of the Docker image of current
    directory (using a Dockerfile). It mounts the current directory as a volume within
    the container, and specifies that it depends on the `postgres` service, and will
    only start once the `postgres` service is healthy.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '`dbt`æœåŠ¡æŒ‡å®šäº†ä¸€ä¸ª`dbt`å®¹å™¨ï¼Œè¯¥å®¹å™¨ä½¿ç”¨å½“å‰ç›®å½•çš„Dockeré•œåƒï¼ˆä½¿ç”¨Dockerfileï¼‰ã€‚å®ƒå°†å½“å‰ç›®å½•æŒ‚è½½ä¸ºå®¹å™¨ä¸­çš„ä¸€ä¸ªå·ï¼Œå¹¶æŒ‡å®šå®ƒä¾èµ–äº`postgres`æœåŠ¡ï¼Œå¹¶ä¸”åªæœ‰åœ¨`postgres`æœåŠ¡å¥åº·æ—¶æ‰ä¼šå¯åŠ¨ã€‚'
- en: In order to containerize the Jaffle Shop project, we need to create a `[Dockerfile](https://github.com/gmyrianthous/jaffle_shop/blob/main/Dockerfile)`
    that installs the necessary dependencies for both Python and dbt, and ensures
    that the container remains active once the environment has been set up.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å®¹å™¨åŒ–Jaffle Shopé¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª`[Dockerfile](https://github.com/gmyrianthous/jaffle_shop/blob/main/Dockerfile)`ï¼Œè¯¥æ–‡ä»¶å®‰è£…Pythonå’Œdbtæ‰€éœ€çš„ä¾èµ–é¡¹ï¼Œå¹¶ç¡®ä¿ç¯å¢ƒè®¾ç½®å®Œæ¯•åå®¹å™¨ä¿æŒæ´»åŠ¨çŠ¶æ€ã€‚
- en: '[PRE1]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Configuring Postgres with dbt
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é…ç½®Postgresä¸dbt
- en: To interact with dbt, weâ€™ll use the dbt Command Line Interface (CLI). A directory
    containing a `[dbt_project.yml](https://github.com/gmyrianthous/jaffle_shop/blob/main/dbt_project.yml)`
    file is considered a dbt project by the dbt CLI.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: è¦ä¸dbtäº¤äº’ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨dbtå‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰ã€‚åŒ…å«`[dbt_project.yml](https://github.com/gmyrianthous/jaffle_shop/blob/main/dbt_project.yml)`æ–‡ä»¶çš„ç›®å½•è¢«dbt
    CLIè§†ä¸ºä¸€ä¸ªdbté¡¹ç›®ã€‚
- en: We'll create one and specify some basic configurations, such as the dbt project
    name and the `profile` to use (which we'll create in the next step). Additionally,
    we'll specify the paths containing the various dbt entities and provide configuration
    about their materialization.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå¹¶æŒ‡å®šä¸€äº›åŸºæœ¬é…ç½®ï¼Œå¦‚dbté¡¹ç›®åç§°å’Œè¦ä½¿ç”¨çš„`profile`ï¼ˆæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€æ­¥ä¸­åˆ›å»ºï¼‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†æŒ‡å®šåŒ…å«å„ç§dbtå®ä½“çš„è·¯å¾„ï¼Œå¹¶æä¾›å…³äºå®ƒä»¬çš„ç‰©åŒ–é…ç½®ã€‚
- en: '[PRE2]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Now the [](https://github.com/gmyrianthous/jaffle_shop/blob/main/profiles/profiles.yml)
    `[profiles.yml](https://github.com/gmyrianthous/jaffle_shop/blob/main/profiles/profiles.yml)`
    file is used to store dbt profiles. A profile consists of targets, each of which
    specifying the connection details and credentials for the database or the data
    warehouse.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨`[profiles.yml](https://github.com/gmyrianthous/jaffle_shop/blob/main/profiles/profiles.yml)`æ–‡ä»¶ç”¨äºå­˜å‚¨dbté…ç½®æ–‡ä»¶ã€‚ä¸€ä¸ªé…ç½®æ–‡ä»¶åŒ…å«å¤šä¸ªç›®æ ‡ï¼Œæ¯ä¸ªç›®æ ‡æŒ‡å®šäº†æ•°æ®åº“æˆ–æ•°æ®ä»“åº“çš„è¿æ¥è¯¦ç»†ä¿¡æ¯å’Œå‡­æ®ã€‚
- en: '[PRE3]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: This file defines a profile named `jaffle_shop` that specifies the connection
    details for a Postgres database running on a Docker container named `postgres`.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º`jaffle_shop`çš„é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šäº†è¿è¡Œåœ¨åä¸º`postgres`çš„Dockerå®¹å™¨ä¸Šçš„Postgresæ•°æ®åº“çš„è¿æ¥è¯¦ç»†ä¿¡æ¯ã€‚
- en: '`jaffle_shop`: This is the name of the profile. It''s an arbitrary name chosen
    by the user to identify the profile.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`jaffle_shop`ï¼šè¿™æ˜¯é…ç½®æ–‡ä»¶çš„åç§°ã€‚å®ƒæ˜¯ç”¨æˆ·ä¸ºäº†è¯†åˆ«é…ç½®æ–‡ä»¶è€Œé€‰æ‹©çš„ä»»æ„åç§°ã€‚'
- en: '`target: dev`: This specifies the default target for the profile, which in
    this case is named `dev`.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`target: dev`ï¼šè¿™æŒ‡å®šäº†é…ç½®æ–‡ä»¶çš„é»˜è®¤ç›®æ ‡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹åä¸º`dev`ã€‚'
- en: '`outputs`: This section lists the output configurations for the profile, with
    the default output configuration named `dev`.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`outputs`ï¼šè¿™ä¸€éƒ¨åˆ†åˆ—å‡ºäº†é…ç½®æ–‡ä»¶çš„è¾“å‡ºé…ç½®ï¼Œé»˜è®¤çš„è¾“å‡ºé…ç½®åä¸º`dev`ã€‚'
- en: '`dev`: This specifies the connection details for the `dev` target, which uses
    a Postgres database.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dev`ï¼šè¿™æŒ‡å®šäº†`dev`ç›®æ ‡çš„è¿æ¥è¯¦ç»†ä¿¡æ¯ï¼Œè¯¥ç›®æ ‡ä½¿ç”¨Postgresæ•°æ®åº“ã€‚'
- en: '`type: postgres`: This specifies the type of the output, which in this case
    is a Postgres database.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`type: postgres`ï¼šè¿™æŒ‡å®šäº†è¾“å‡ºçš„ç±»å‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯Postgresæ•°æ®åº“ã€‚'
- en: '`host: postgres`: This specifies the hostname or IP address of the Postgres
    database server.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`host: postgres`ï¼šè¿™æŒ‡å®šäº†Postgresæ•°æ®åº“æœåŠ¡å™¨çš„ä¸»æœºåæˆ–IPåœ°å€ã€‚'
- en: '`user: postgres`: This specifies the username used to connect to the Postgres
    database.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`user: postgres`ï¼šè¿™æŒ‡å®šäº†ç”¨äºè¿æ¥åˆ°Postgresæ•°æ®åº“çš„ç”¨æˆ·åã€‚'
- en: '`password: postgres`: This specifies the password used to authenticate with
    the Postgres database.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`password: postgres`ï¼šè¿™æŒ‡å®šäº†ç”¨äºè®¤è¯Postgresæ•°æ®åº“çš„å¯†ç ã€‚'
- en: '`port: 5432`: This specifies the port number on which the Postgres database
    is listening.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`port: 5432`ï¼šè¿™æŒ‡å®šäº†Postgresæ•°æ®åº“ç›‘å¬çš„ç«¯å£å·ã€‚'
- en: '`dbname: postgres`: This specifies the name of the Postgres database to connect
    to.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dbname: postgres`ï¼šè¿™æŒ‡å®šäº†è¦è¿æ¥çš„ Postgres æ•°æ®åº“çš„åç§°ã€‚'
- en: '`schema: public`: This specifies the schema name to use when executing queries
    against the database.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`schema: public`ï¼šè¿™æŒ‡å®šäº†åœ¨å¯¹æ•°æ®åº“æ‰§è¡ŒæŸ¥è¯¢æ—¶è¦ä½¿ç”¨çš„æ¨¡å¼åç§°ã€‚'
- en: '`threads: 1`: This specifies the number of threads to use when running dbt
    tasks.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`threads: 1`ï¼šè¿™æŒ‡å®šäº†åœ¨è¿è¡Œ dbt ä»»åŠ¡æ—¶è¦ä½¿ç”¨çš„çº¿ç¨‹æ•°ã€‚'
- en: Jaffle Shop dbt models and seeds
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Jaffle Shop dbt æ¨¡å‹å’Œ seeds
- en: The source data for Jaffle Shop project consists of csv files for customers,
    payments and orders. In dbt, we can load this data into our database through [seeds](https://github.com/gmyrianthous/jaffle_shop/tree/main/seeds).
    We then use this source data to build [dbt models](https://github.com/gmyrianthous/jaffle_shop/tree/main/models)
    on top of it.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Jaffle Shop é¡¹ç›®çš„æºæ•°æ®åŒ…æ‹¬å®¢æˆ·ã€æ”¯ä»˜å’Œè®¢å•çš„ csv æ–‡ä»¶ã€‚åœ¨ dbt ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ [seeds](https://github.com/gmyrianthous/jaffle_shop/tree/main/seeds)
    å°†è¿™äº›æ•°æ®åŠ è½½åˆ°æ•°æ®åº“ä¸­ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ©ç”¨è¿™äº›æºæ•°æ®åœ¨å…¶åŸºç¡€ä¸Šæ„å»º [dbt æ¨¡å‹](https://github.com/gmyrianthous/jaffle_shop/tree/main/models)ã€‚
- en: 'Hereâ€™s an example model that generates some [metrics for our customers](https://github.com/gmyrianthous/jaffle_shop/blob/main/models/customers.sql):'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ¨¡å‹ï¼Œå®ƒç”Ÿæˆä¸€äº› [å®¢æˆ·çš„æŒ‡æ ‡](https://github.com/gmyrianthous/jaffle_shop/blob/main/models/customers.sql)ï¼š
- en: '[PRE4]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Running the services via Docker
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é€šè¿‡ Docker è¿è¡ŒæœåŠ¡
- en: 'Now letâ€™s build and spin up our Docker services. To do so, weâ€™ll simply need
    to run the following commands:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬æ„å»ºå¹¶å¯åŠ¨æˆ‘ä»¬çš„ Docker æœåŠ¡ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åªéœ€è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
- en: '[PRE5]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The commands above will run a Postgres instance and then build the dbt resources
    of Jaffle Shop as specified in the repository. These containers will remain up
    and running so that you can:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šè¿°å‘½ä»¤å°†è¿è¡Œä¸€ä¸ª Postgres å®ä¾‹ï¼Œç„¶åæ„å»º Jaffle Shop çš„ dbt èµ„æºï¼Œå¦‚ä»“åº“ä¸­æ‰€è¿°ã€‚è¿™äº›å®¹å™¨å°†ä¿æŒè¿è¡Œï¼Œä»¥ä¾¿ä½ å¯ä»¥ï¼š
- en: Query the Postgres database and the tables created out of dbt models
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æŸ¥è¯¢ Postgres æ•°æ®åº“åŠä» dbt æ¨¡å‹åˆ›å»ºçš„è¡¨
- en: Run further dbt commands via dbt CLI
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: é€šè¿‡ dbt CLI è¿è¡Œè¿›ä¸€æ­¥çš„ dbt å‘½ä»¤
- en: Running dbt commands via CLI
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é€šè¿‡ CLI è¿è¡Œ dbt å‘½ä»¤
- en: The dbt container, has built the specified models already. However, we can still
    access the container and run dbt commands via dbt CLI, either for new or modified
    models. To do so, we will first need to access the container.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: dbt å®¹å™¨å·²ç»æ„å»ºäº†æŒ‡å®šçš„æ¨¡å‹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®å®¹å™¨å¹¶é€šè¿‡ dbt CLI è¿è¡Œ dbt å‘½ä»¤ï¼Œæ— è®ºæ˜¯å¯¹äºæ–°æ¨¡å‹è¿˜æ˜¯ä¿®æ”¹è¿‡çš„æ¨¡å‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆè®¿é—®å®¹å™¨ã€‚
- en: 'The following command will list all active containers:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹å‘½ä»¤å°†åˆ—å‡ºæ‰€æœ‰æ´»åŠ¨çš„å®¹å™¨ï¼š
- en: '[PRE6]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Copy the id of `dbt` container, and then enter it when running the next command:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: å¤åˆ¶ `dbt` å®¹å™¨çš„ idï¼Œç„¶ååœ¨è¿è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤æ—¶è¾“å…¥å®ƒï¼š
- en: '[PRE7]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The command above will essentially give you access to the containerâ€™s bash which
    means you are now able to run dbt commands.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šé¢çš„å‘½ä»¤å°†åŸºæœ¬ä¸Šä¸ºä½ æä¾›å¯¹å®¹å™¨çš„ bash è®¿é—®æƒé™ï¼Œè¿™æ„å‘³ç€ä½ ç°åœ¨å¯ä»¥è¿è¡Œ dbt å‘½ä»¤ã€‚
- en: '[PRE8]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Note that since we have mounted the local directory to the running container,
    any changes in the local directory will be reflected to the container immediately.
    This means you are also able to create new models or modify existing ones and
    then go into the runnning container and build models, run tests, etc.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œç”±äºæˆ‘ä»¬å·²å°†æœ¬åœ°ç›®å½•æŒ‚è½½åˆ°æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¸­ï¼Œå› æ­¤æœ¬åœ°ç›®å½•ä¸­çš„ä»»ä½•æ›´æ”¹å°†ç«‹å³åæ˜ åˆ°å®¹å™¨ä¸­ã€‚è¿™æ„å‘³ç€ä½ ä¹Ÿå¯ä»¥åˆ›å»ºæ–°çš„æ¨¡å‹æˆ–ä¿®æ”¹ç°æœ‰çš„æ¨¡å‹ï¼Œç„¶åè¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶æ„å»ºæ¨¡å‹ã€è¿è¡Œæµ‹è¯•ç­‰ã€‚
- en: Querying the dbt models on Postgres database
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æŸ¥è¯¢ Postgres æ•°æ®åº“ä¸­çš„ dbt æ¨¡å‹
- en: You are also able to query the postgres database and the dbt models or snapshots
    created on it. In the same way, we will have to enter the running postgres container
    in order to be able to query the database directly.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ è¿˜å¯ä»¥æŸ¥è¯¢ postgres æ•°æ®åº“åŠå…¶ä¸Šåˆ›å»ºçš„ dbt æ¨¡å‹æˆ–å¿«ç…§ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å°†éœ€è¦è¿›å…¥æ­£åœ¨è¿è¡Œçš„ postgres å®¹å™¨ï¼Œä»¥ä¾¿ç›´æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚
- en: '[PRE9]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'We will then use `psql`, a terminal-based interface for PostgreSQL that allows
    us to query the database:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬å°†ä½¿ç”¨ `psql`ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäºç»ˆç«¯çš„ PostgreSQL ç•Œé¢ï¼Œå…è®¸æˆ‘ä»¬æŸ¥è¯¢æ•°æ®åº“ï¼š
- en: '[PRE10]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The two commands shared below can be used to list tables and views respectively:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤åˆ†åˆ«ç”¨äºåˆ—å‡ºè¡¨å’Œè§†å›¾ï¼š
- en: '[PRE11]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'And you can now query dbt models via a `SELECT` query:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ ç°åœ¨å¯ä»¥é€šè¿‡ `SELECT` æŸ¥è¯¢æ¥æŸ¥è¯¢ dbt æ¨¡å‹ï¼š
- en: '[PRE12]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Getting the full code
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è·å–å®Œæ•´ä»£ç 
- en: Iâ€™ve created a GitHub repository you can clone on your local machine and run
    the containerised version Jaffle Shop dbt project quickly. You can find the project
    as well as the code shared in this tutorial in the following link.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ª GitHub ä»“åº“ï¼Œä½ å¯ä»¥åœ¨æœ¬åœ°æœºå™¨ä¸Šå…‹éš†å®ƒï¼Œå¹¶å¿«é€Ÿè¿è¡Œå®¹å™¨åŒ–çš„ Jaffle Shop dbt é¡¹ç›®ã€‚ä½ å¯ä»¥åœ¨ä»¥ä¸‹é“¾æ¥ä¸­æ‰¾åˆ°é¡¹ç›®åŠæœ¬æ•™ç¨‹ä¸­å…±äº«çš„ä»£ç ã€‚
- en: '[](https://github.com/gmyrianthous/jaffle_shop?source=post_page-----93a9b14532a4--------------------------------)
    [## GitHub - gmyrianthous/jaffle_shop: This is a containerised version of Jaffle
    Shop dbt project'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://github.com/gmyrianthous/jaffle_shop?source=post_page-----93a9b14532a4--------------------------------)
    [## GitHub - gmyrianthous/jaffle_shopï¼šè¿™æ˜¯ Jaffle Shop dbt é¡¹ç›®çš„å®¹å™¨åŒ–ç‰ˆæœ¬'
- en: This is a containerised version of the popular Jaffle Shop dbt project published
    by dbt Labs. You can use this projectâ€¦
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ç”± dbt Labs å‘å¸ƒçš„æµè¡Œ Jaffle Shop dbt é¡¹ç›®çš„å®¹å™¨åŒ–ç‰ˆæœ¬ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªé¡¹ç›®â€¦
- en: github.com](https://github.com/gmyrianthous/jaffle_shop?source=post_page-----93a9b14532a4--------------------------------)
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '[github.com](https://github.com/gmyrianthous/jaffle_shop?source=post_page-----93a9b14532a4--------------------------------)'
- en: Final Thoughts
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æœ€åçš„æ€è€ƒ
- en: Data build tool (dbt) is one of the rapidly growing technologies in modern data
    stacks. If youâ€™re just starting to learn how to use dbt, I highly recommend experimenting
    with the Jaffle Shop project. Itâ€™s a self-contained project created by dbt Labs
    for testing and experimentation purposes.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®æ„å»ºå·¥å…· (dbt) æ˜¯ç°ä»£æ•°æ®æŠ€æœ¯æ ˆä¸­å¿«é€Ÿå¢é•¿çš„æŠ€æœ¯ä¹‹ä¸€ã€‚å¦‚æœä½ åˆšå¼€å§‹å­¦ä¹ å¦‚ä½•ä½¿ç”¨ dbtï¼Œæˆ‘å¼ºçƒˆæ¨èå°è¯• Jaffle Shop é¡¹ç›®ã€‚è¿™æ˜¯ä¸€ä¸ªç”±
    dbt Labs åˆ›å»ºçš„è‡ªåŒ…å«é¡¹ç›®ï¼Œç”¨äºæµ‹è¯•å’Œå®éªŒç›®çš„ã€‚
- en: dbt is a tool commonly used by data analysts and analytics engineers (in addition
    to data engineers), and it requires a connection to a database or data warehouse.
    However, many analysts might not be comfortable configuring and initializing a
    local database.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: dbt æ˜¯æ•°æ®åˆ†æå¸ˆå’Œåˆ†æå·¥ç¨‹å¸ˆï¼ˆé™¤äº†æ•°æ®å·¥ç¨‹å¸ˆï¼‰å¸¸ç”¨çš„å·¥å…·ï¼Œå®ƒéœ€è¦è¿æ¥åˆ°æ•°æ®åº“æˆ–æ•°æ®ä»“åº“ã€‚ç„¶è€Œï¼Œè®¸å¤šåˆ†æå¸ˆå¯èƒ½ä¸ä¹ æƒ¯é…ç½®å’Œåˆå§‹åŒ–æœ¬åœ°æ•°æ®åº“ã€‚
- en: In this article, we demonstrate how to get started with dbt and run all the
    services required to materialize dbt models on a local Postgres database. I hope
    this tutorial will help you get your dbt project and database up and running as
    quickly as possible. If you experience any issues running the project, please
    let me know in the comments, and Iâ€™ll do my best to help you debug your code and
    configuration.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¼”ç¤ºäº†å¦‚ä½•å¼€å§‹ä½¿ç”¨ dbt å¹¶è¿è¡Œæ‰€æœ‰å¿…è¦çš„æœåŠ¡ï¼Œä»¥åœ¨æœ¬åœ° Postgres æ•°æ®åº“ä¸Šå®ç° dbt æ¨¡å‹ã€‚æˆ‘å¸Œæœ›è¿™ä¸ªæ•™ç¨‹èƒ½å¸®åŠ©ä½ å°½å¿«å¯åŠ¨ä½ çš„
    dbt é¡¹ç›®å’Œæ•°æ®åº“ã€‚å¦‚æœåœ¨è¿è¡Œé¡¹ç›®æ—¶é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘ŠçŸ¥æˆ‘ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ è°ƒè¯•ä»£ç å’Œé…ç½®ã€‚
- en: ğŸ‘‰ [**Subscribe to Data Pipeline**](https://thedatapipeline.substack.com/welcome)**,
    a newsletter dedicated to Data Engineering**
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ‘‰ [**è®¢é˜… Data Pipeline**](https://thedatapipeline.substack.com/welcome)**ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“æ³¨äºæ•°æ®å·¥ç¨‹çš„æ–°é—»é€šè®¯**
- en: ğŸ‘‡**Related articles you may also like** ğŸ‘‡
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ‘‡**ç›¸å…³çš„æ–‡ç« ä½ ä¹Ÿå¯èƒ½å–œæ¬¢** ğŸ‘‡
- en: '[](/dbt-cli-model-selection-52ddd038d8b2?source=post_page-----93a9b14532a4--------------------------------)
    [## Model Selection For dbt CLI'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/dbt-cli-model-selection-52ddd038d8b2?source=post_page-----93a9b14532a4--------------------------------)
    [## dbt CLI çš„æ¨¡å‹é€‰æ‹©'
- en: A complete cheatsheet for selecting specific models when running dbt commands
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: è¿è¡Œ dbt å‘½ä»¤æ—¶é€‰æ‹©ç‰¹å®šæ¨¡å‹çš„å®Œæ•´å¤‡å¿˜å•
- en: 'towardsdatascience.com](/dbt-cli-model-selection-52ddd038d8b2?source=post_page-----93a9b14532a4--------------------------------)
    [](/etl-vs-elt-68e221d78719?source=post_page-----93a9b14532a4--------------------------------)
    [## ETL vs ELT: Whatâ€™s the Difference?'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/dbt-cli-model-selection-52ddd038d8b2?source=post_page-----93a9b14532a4--------------------------------)
    [](/etl-vs-elt-68e221d78719?source=post_page-----93a9b14532a4--------------------------------)
    [## ETL ä¸ ELTï¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- en: A comparison between ETL and ELT in the context of Data Engineering
  id: totrans-84
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: æ•°æ®å·¥ç¨‹èƒŒæ™¯ä¸‹çš„ ETL ä¸ ELT æ¯”è¾ƒ
- en: towardsdatascience.com](/etl-vs-elt-68e221d78719?source=post_page-----93a9b14532a4--------------------------------)
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/etl-vs-elt-68e221d78719?source=post_page-----93a9b14532a4--------------------------------)
