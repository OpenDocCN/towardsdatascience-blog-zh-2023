- en: Presenting Spatial Data With Web Maps
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ç½‘ç»œåœ°å›¾å±•ç¤ºç©ºé—´æ•°æ®
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/presenting-spatial-data-with-web-maps-4069c01e26ac](https://towardsdatascience.com/presenting-spatial-data-with-web-maps-4069c01e26ac)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/presenting-spatial-data-with-web-maps-4069c01e26ac](https://towardsdatascience.com/presenting-spatial-data-with-web-maps-4069c01e26ac)
- en: A deep dive into map tiles, base maps, map layers and vector data
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ·±å…¥æ¢è®¨åœ°å›¾å›¾å—ã€åŸºç¡€åœ°å›¾ã€åœ°å›¾å›¾å±‚å’ŒçŸ¢é‡æ•°æ®
- en: '[](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)[![Mary
    M](../Images/549561899f2bd146ef32039ab1495875.png)](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------)
    [Mary M](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)[![Mary
    M](../Images/549561899f2bd146ef32039ab1495875.png)](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)[](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------)
    [Mary M](https://medium.com/@mm1718?source=post_page-----4069c01e26ac--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------)
    Â·15 min readÂ·Aug 15, 2023
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒäº [Towards Data Science](https://towardsdatascience.com/?source=post_page-----4069c01e26ac--------------------------------)
    Â·15 åˆ†é’Ÿé˜…è¯»Â·2023å¹´8æœˆ15æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/3a11fdfd0efd8f0644ba1bcdf58e4d19.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3a11fdfd0efd8f0644ba1bcdf58e4d19.png)'
- en: Map of historical peat bogland in the west of Ireland, Corine Land Cover data
    2000
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: çˆ±å°”å…°è¥¿éƒ¨å†å²æ³¥ç‚­æ²¼æ³½åœ°å›¾ï¼ŒCorine åœŸåœ°è¦†ç›–æ•°æ® 2000
- en: '[https://github.com/mmc1718/webmap-ireland](https://github.com/mmc1718/webmap-ireland)'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://github.com/mmc1718/webmap-ireland](https://github.com/mmc1718/webmap-ireland)'
- en: ğŸ—º Contents
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ğŸ—º å†…å®¹
- en: '**Introduction**'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ç®€ä»‹**'
- en: '- [How web maps work](#5d68)'
  id: totrans-11
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- [ç½‘ç»œåœ°å›¾çš„å·¥ä½œåŸç†](#5d68)'
- en: '[**Preparing the Base Map**](#3ae2)'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[**å‡†å¤‡åŸºç¡€åœ°å›¾**](#3ae2)'
- en: '- [Creating a vector tileset](#a134)'
  id: totrans-13
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- [åˆ›å»ºçŸ¢é‡å›¾å—é›†](#a134)'
- en: '- [Identifying required changes](#c058)'
  id: totrans-14
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- [è¯†åˆ«æ‰€éœ€çš„æ›´æ”¹](#c058)'
- en: '- [Modifying the tileset](#f889)'
  id: totrans-15
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- [ä¿®æ”¹å›¾å—é›†](#f889)'
- en: '[**Styling the Base Map**](#f083) **-** [Create a JSON style file](#96b2)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[**æ ·å¼åŒ–åŸºç¡€åœ°å›¾**](#f083) **-** [åˆ›å»º JSON æ ·å¼æ–‡ä»¶](#96b2)'
- en: '- [Serve styled map tiles](#d5a8)'
  id: totrans-17
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- [æä¾›æ ·å¼åŒ–çš„åœ°å›¾å›¾å—](#d5a8)'
- en: '[**Creating the Web Map**](#ea4d) **-** [Loading the base map](#c765)'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[**åˆ›å»ºç½‘ç»œåœ°å›¾**](#ea4d) **-** [åŠ è½½åŸºç¡€åœ°å›¾](#c765)'
- en: '- [Overlaying data on the map](#883f)'
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '- [åœ¨åœ°å›¾ä¸Šå åŠ æ•°æ®](#883f)'
- en: There are many ways to make a map. We can use desktop GIS software such as QGIS
    or ArcGIS, web frameworks such as Leaflet or Mapbox GL JS, or do things the old
    fashioned way with ink and paper.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ¶ä½œåœ°å›¾çš„æ–¹å¼æœ‰å¾ˆå¤šç§ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¡Œé¢ GIS è½¯ä»¶ï¼Œå¦‚ QGIS æˆ– ArcGISï¼Œä½¿ç”¨ Web æ¡†æ¶ï¼Œå¦‚ Leaflet æˆ– Mapbox GL
    JSï¼Œæˆ–è€…ä½¿ç”¨ä¼ ç»Ÿçš„å¢¨æ°´å’Œçº¸å¼ æ¥å®Œæˆã€‚
- en: Web maps are a great choice for presenting spatial data because they are easily
    shareable and have the benefit of being interactive. There are a number of tools
    available that make the process of creating a web map straightforward whilst giving
    us full control over the different elements of the map.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: ç½‘ç»œåœ°å›¾æ˜¯å±•ç¤ºç©ºé—´æ•°æ®çš„ç»ä½³é€‰æ‹©ï¼Œå› ä¸ºå®ƒä»¬æ˜“äºåˆ†äº«ä¸”å…·æœ‰äº’åŠ¨æ€§ã€‚ç°åœ¨æœ‰è®¸å¤šå·¥å…·å¯ä»¥ä½¿åˆ›å»ºç½‘ç»œåœ°å›¾çš„è¿‡ç¨‹å˜å¾—ç®€å•ï¼ŒåŒæ—¶è®©æˆ‘ä»¬å®Œå…¨æ§åˆ¶åœ°å›¾çš„å„ä¸ªå…ƒç´ ã€‚
- en: '**I will be going through of the full process of creating your own map using
    open source software and open data sources**, including how to create a custom
    vector base map with **OpenStreetMap** and **Natural** **Earth** data, serve tiles
    using **Tileserver**, load your base map on a web page and overlay spatial data
    on the map using **Maplibre**.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**æˆ‘å°†ä»‹ç»ä½¿ç”¨å¼€æºè½¯ä»¶å’Œå¼€æ”¾æ•°æ®æºåˆ›å»ºæ‚¨è‡ªå·±çš„åœ°å›¾çš„å®Œæ•´è¿‡ç¨‹**ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨**OpenStreetMap**å’Œ**Natural** **Earth**æ•°æ®åˆ›å»ºè‡ªå®šä¹‰çŸ¢é‡åŸºç¡€åœ°å›¾ï¼Œä½¿ç”¨**Tileserver**æä¾›å›¾å—ï¼Œå°†åŸºç¡€åœ°å›¾åŠ è½½åˆ°ç½‘é¡µä¸Šï¼Œå¹¶ä½¿ç”¨**Maplibre**åœ¨åœ°å›¾ä¸Šå åŠ ç©ºé—´æ•°æ®ã€‚'
- en: As an example, I will create a peat bog of Ireland showing bog loss over a ten
    year period. I have prepared data from the Corine Land Cover inventory so that
    it is ready to display on a web map. The result will be an aesthetically pleasing
    map of Irelandâ€™s bogs viewable in the browser.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºç¤ºä¾‹ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªå±•ç¤ºåå¹´æœŸé—´æ³¥ç‚­æ²¼æ³½æŸå¤±çš„çˆ±å°”å…°æ³¥ç‚­æ²¼æ³½åœ°å›¾ã€‚æˆ‘å·²å‡†å¤‡å¥½æ¥è‡ª Corine åœŸåœ°è¦†ç›–æ¸…å•çš„æ•°æ®ï¼Œä½¿å…¶å¯ä»¥åœ¨ç½‘ç»œåœ°å›¾ä¸Šæ˜¾ç¤ºã€‚æœ€ç»ˆç»“æœå°†æ˜¯ä¸€ä¸ªåœ¨æµè§ˆå™¨ä¸­å¯æŸ¥çœ‹çš„ç¾è§‚çš„çˆ±å°”å…°æ²¼æ³½åœ°å›¾ã€‚
- en: 'You can view a deployed version of the final map here: [https://marymcguire.dev/ireland-bog-map](https://marymcguire.dev/ireland-bog-map.html)'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 'ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹å·²éƒ¨ç½²çš„æœ€ç»ˆåœ°å›¾ç‰ˆæœ¬: [https://marymcguire.dev/ireland-bog-map](https://marymcguire.dev/ireland-bog-map.html)'
- en: 'The repository for this project is found [here](https://github.com/mmc1718/webmap-ireland):'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé¡¹ç›®çš„ä»£ç åº“å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/mmc1718/webmap-ireland)æ‰¾åˆ°ï¼š
- en: '[](https://github.com/mmc1718/webmap-ireland?source=post_page-----4069c01e26ac--------------------------------)
    [## GitHub - mmc1718/webmap-ireland: webmap displaying peat bogs in Ireland'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://github.com/mmc1718/webmap-ireland?source=post_page-----4069c01e26ac--------------------------------)
    [## GitHub - mmc1718/webmap-ireland: æ˜¾ç¤ºçˆ±å°”å…°æ³¥ç‚­æ²¼æ³½çš„ç½‘ç»œåœ°å›¾'
- en: webmap displaying peat bogs in Ireland. Contribute to mmc1718/webmap-ireland
    development by creating an account onâ€¦
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: æ˜¾ç¤ºçˆ±å°”å…°æ³¥ç‚­æ²¼æ³½çš„ç½‘ç»œåœ°å›¾ã€‚é€šè¿‡åˆ›å»ºè´¦æˆ·æ¥ä¸ºmmc1718/webmap-irelandçš„å‘å±•åšè´¡çŒ®â€¦
- en: github.com](https://github.com/mmc1718/webmap-ireland?source=post_page-----4069c01e26ac--------------------------------)
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: github.com](https://github.com/mmc1718/webmap-ireland?source=post_page-----4069c01e26ac--------------------------------)
- en: Docker will be the main dependency in this project, so if you havenâ€™t already
    you will need to install it in order to follow along. Some basic knowledge of
    GIS concepts will be assumed, along with basic use of the terminal, reading JSON
    files, and an ability to follow simple examples using JavaScript and HTML.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: Dockerå°†æ˜¯è¿™ä¸ªé¡¹ç›®çš„ä¸»è¦ä¾èµ–ï¼Œå› æ­¤å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…ï¼Œä½ éœ€è¦å…ˆå®‰è£…å®ƒæ‰èƒ½ç»§ç»­ã€‚å‡è®¾ä½ å…·æœ‰ä¸€äº›åŸºæœ¬çš„GISæ¦‚å¿µçŸ¥è¯†ï¼ŒåŸºæœ¬çš„ç»ˆç«¯ä½¿ç”¨ã€è¯»å–JSONæ–‡ä»¶çš„èƒ½åŠ›ï¼Œå¹¶èƒ½å¤Ÿè·Ÿéšä½¿ç”¨JavaScriptå’ŒHTMLçš„ç®€å•ç¤ºä¾‹ã€‚
- en: How web maps work
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç½‘ç»œåœ°å›¾å¦‚ä½•å·¥ä½œ
- en: 'Digital maps are comprised of two main parts: the base map, and the data layer.
    If you arenâ€™t already familiar with web maps, they are no different.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°å­—åœ°å›¾ç”±ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼šåŸºç¡€åœ°å›¾å’Œæ•°æ®å±‚ã€‚å¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰ç½‘ç»œåœ°å›¾ï¼Œå®ƒä»¬ä¸æ­¤æ— å¼‚ã€‚
- en: '![](../Images/e345905b73b9fa9195ccc40937cd8690.png)![](../Images/43af9a50646f79bd82da4a20c15a17d7.png)![](../Images/1118d9d74e974465a05e4d8583c6abdd.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e345905b73b9fa9195ccc40937cd8690.png)![](../Images/43af9a50646f79bd82da4a20c15a17d7.png)![](../Images/1118d9d74e974465a05e4d8583c6abdd.png)'
- en: Three web map views of Dublin, map data copyright OpenStreetMap
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: éƒ½æŸæ—çš„ä¸‰ä¸ªç½‘ç»œåœ°å›¾è§†å›¾ï¼Œåœ°å›¾æ•°æ®ç‰ˆæƒå½’OpenStreetMapæ‰€æœ‰
- en: The data layer is usually the reason for making a map in the first place. The
    base map provides a basic map for us to overlay our data on. Styling is important
    both for the base map, to support the data layer whilst not being distracting,
    and for the data layer by making the data legible and conveying additional information
    about its value (darker or lighter colours, or larger or smaller symbols convey
    meaning).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®å±‚é€šå¸¸æ˜¯åˆ¶ä½œåœ°å›¾çš„æ ¹æœ¬åŸå› ã€‚åŸºç¡€åœ°å›¾ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåŸºç¡€åœ°å›¾ï¼Œä»¥ä¾¿æˆ‘ä»¬åœ¨å…¶ä¸Šå åŠ æ•°æ®ã€‚æ ·å¼è®¾è®¡å¯¹åŸºç¡€åœ°å›¾å¾ˆé‡è¦ï¼Œä»¥æ”¯æŒæ•°æ®å±‚è€Œä¸åˆ†æ•£æ³¨æ„åŠ›ï¼Œå¹¶ä¸”å¯¹æ•°æ®å±‚ä¹Ÿå¾ˆé‡è¦ï¼Œä½¿æ•°æ®å¯è¯»å¹¶ä¼ è¾¾å…³äºå…¶ä»·å€¼çš„é™„åŠ ä¿¡æ¯ï¼ˆè¾ƒæš—æˆ–è¾ƒäº®çš„é¢œè‰²ï¼Œæˆ–è¾ƒå¤§æˆ–è¾ƒå°çš„ç¬¦å·ä¼ è¾¾ä¸åŒçš„æ„ä¹‰ï¼‰ã€‚
- en: Typically, web base maps come in the form of sets of individual map tile pieces,
    which fit together to make a map.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œç½‘ç»œåŸºç¡€åœ°å›¾ä»¥ä¸€ç»„å•ç‹¬çš„åœ°å›¾ç“¦ç‰‡çš„å½¢å¼å‡ºç°ï¼Œè¿™äº›ç“¦ç‰‡æ‹¼æ¥åœ¨ä¸€èµ·å½¢æˆä¸€å¼ åœ°å›¾ã€‚
- en: '![](../Images/bb58f4bc4fd4fe639f279659a113f506.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bb58f4bc4fd4fe639f279659a113f506.png)'
- en: 'Diagram taken from **Web Map Tile Services for Spatial Data Infrastructures:
    Management and Optimization**, chapter published under CC BY license available
    at [https://www.intechopen.com/chapters/38302#F1](https://www.intechopen.com/chapters/38302#F1)'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç¤ºæ‘˜è‡ª**ã€Šç©ºé—´æ•°æ®åŸºç¡€è®¾æ–½çš„Webåœ°å›¾ç“¦ç‰‡æœåŠ¡ï¼šç®¡ç†ä¸ä¼˜åŒ–ã€‹**ï¼Œè¯¥ç« èŠ‚åœ¨CC BYè®¸å¯è¯ä¸‹å‘å¸ƒï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è§[https://www.intechopen.com/chapters/38302#F1](https://www.intechopen.com/chapters/38302#F1)
- en: Importantly, the map tiles are sorted into different zoom levels, meaning that
    a complete map tileset actually includes many versions of the map â€” one for each
    zoom level. As you scroll in and out on a web map (or â€˜slippy mapâ€™), the features
    become more or less detailed, with some only appearing once you have hit certain
    zoom levels. In the background, the page loads new tile pieces corresponding to
    the zoom level and section of the map you are viewing.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¦çš„æ˜¯ï¼Œè¿™äº›åœ°å›¾ç“¦ç‰‡è¢«åˆ†ç±»ä¸ºä¸åŒçš„ç¼©æ”¾çº§åˆ«ï¼Œè¿™æ„å‘³ç€å®Œæ•´çš„åœ°å›¾ç“¦ç‰‡é›†å®é™…ä¸ŠåŒ…æ‹¬äº†è®¸å¤šç‰ˆæœ¬çš„åœ°å›¾â€”â€”æ¯ä¸ªç¼©æ”¾çº§åˆ«ä¸€ä¸ªã€‚å½“ä½ åœ¨ç½‘ç»œåœ°å›¾ï¼ˆæˆ–â€œæ»‘åŠ¨åœ°å›¾â€ï¼‰ä¸Šæ”¾å¤§æˆ–ç¼©å°æ—¶ï¼Œåœ°å›¾ç‰¹å¾ä¼šå˜å¾—æ›´åŠ è¯¦ç»†æˆ–ä¸é‚£ä¹ˆè¯¦ç»†ï¼Œæœ‰äº›ç‰¹å¾åªæœ‰åœ¨è¾¾åˆ°æŸäº›ç¼©æ”¾çº§åˆ«æ—¶æ‰ä¼šå‡ºç°ã€‚åœ¨åå°ï¼Œé¡µé¢ä¼šåŠ è½½ä¸å½“å‰æŸ¥çœ‹çš„ç¼©æ”¾çº§åˆ«å’Œåœ°å›¾éƒ¨åˆ†ç›¸å¯¹åº”çš„æ–°ç“¦ç‰‡ã€‚
- en: Put together, this collection of tiles is known as a tile pyramid. We visualise
    it as a pyramid because the higher the zoom, the more tiles are needed to cover
    the entire area. [Maptiler has a great visualisation of this](https://www.maptiler.com/google-maps-coordinates-tile-bounds-projection/#3/-46.28/26.66)
    which you can refer to when getting started with web maps.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™äº›ç“¦ç‰‡æ‹¼å‡‘åœ¨ä¸€èµ·ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªç“¦ç‰‡é‡‘å­—å¡”ã€‚æˆ‘ä»¬å°†å…¶è§†ä¸ºé‡‘å­—å¡”ï¼Œå› ä¸ºç¼©æ”¾çº§åˆ«è¶Šé«˜ï¼Œè¦†ç›–æ•´ä¸ªåŒºåŸŸæ‰€éœ€çš„ç“¦ç‰‡å°±è¶Šå¤šã€‚[Maptileræä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„å¯è§†åŒ–å›¾ç¤º](https://www.maptiler.com/google-maps-coordinates-tile-bounds-projection/#3/-46.28/26.66)ï¼Œä½ å¯ä»¥åœ¨å¼€å§‹ä½¿ç”¨ç½‘ç»œåœ°å›¾æ—¶å‚è€ƒã€‚
- en: You have likely heard of the distinction between vector and raster data when
    working with geospatial data. Map tiles are no different; the individual tiles
    can either be vector tiles, usually in the form of a .pbf file, or raster (.png)
    files.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¤„ç†åœ°ç†ç©ºé—´æ•°æ®æ—¶ï¼Œä½ å¯èƒ½å¬è¯´è¿‡çŸ¢é‡æ•°æ®å’Œæ …æ ¼æ•°æ®ä¹‹é—´çš„åŒºåˆ«ã€‚åœ°å›¾åˆ‡ç‰‡ä¹Ÿä¸ä¾‹å¤–ï¼›å•ä¸ªåˆ‡ç‰‡å¯ä»¥æ˜¯çŸ¢é‡åˆ‡ç‰‡ï¼Œé€šå¸¸æ˜¯ .pbf æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯æ …æ ¼ (.png)
    æ–‡ä»¶ã€‚
- en: I will be creating a tileset of vector tiles stored in Mapboxâ€™s MBTiles format
    for the base map. I prefer vector because of the flexibility they provide.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å°†åˆ›å»ºä¸€ä¸ªå­˜å‚¨åœ¨ Mapbox çš„ MBTiles æ ¼å¼ä¸­çš„çŸ¢é‡åˆ‡ç‰‡é›†ä½œä¸ºåŸºç¡€åœ°å›¾ã€‚æˆ‘æ›´å–œæ¬¢çŸ¢é‡ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚
- en: Preparing The Base Map
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å‡†å¤‡åŸºç¡€åœ°å›¾
- en: Creating a vector tileset
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åˆ›å»ºçŸ¢é‡åˆ‡ç‰‡é›†
- en: The first step is to create the base map tileset. There are many pre made base
    maps available, however I want the map to put the focus on the island of Ireland,
    excluding Great Britain. This is not commonly available, so I will be making my
    own base map.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºåŸºç¡€åœ°å›¾åˆ‡ç‰‡é›†ã€‚æœ‰è®¸å¤šç°æˆçš„åŸºç¡€åœ°å›¾å¯ç”¨ï¼Œä½†æˆ‘å¸Œæœ›åœ°å›¾å°†é‡ç‚¹æ”¾åœ¨çˆ±å°”å…°å²›ä¸Šï¼Œæ’é™¤å¤§ä¸åˆ—é¢ ã€‚è¿™å¹¶ä¸å¸¸è§ï¼Œå› æ­¤æˆ‘å°†åˆ¶ä½œè‡ªå·±çš„åŸºç¡€åœ°å›¾ã€‚
- en: I use [**Planetiler**](https://github.com/onthegomap/planetiler) to create vector
    tile base maps. Planetiler is a tool for creating vector map tilesets and is impressively
    fast. There is even a Docker image available, which makes generating a full tileset
    using Planetiler easy. Planetiler uses OpenStreetMap data to create map tiles
    and luckily for me, data extracts for Ireland and Northern Ireland are already
    available.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä½¿ç”¨[**Planetiler**](https://github.com/onthegomap/planetiler)æ¥åˆ›å»ºçŸ¢é‡åˆ‡ç‰‡åŸºç¡€åœ°å›¾ã€‚Planetiler
    æ˜¯ä¸€ä¸ªåˆ›å»ºçŸ¢é‡åœ°å›¾åˆ‡ç‰‡é›†çš„å·¥å…·ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚ç”šè‡³è¿˜æœ‰ä¸€ä¸ª Docker é•œåƒï¼Œè¿™ä½¿å¾—ä½¿ç”¨ Planetiler ç”Ÿæˆå®Œæ•´çš„åˆ‡ç‰‡é›†å˜å¾—ç®€å•ã€‚Planetiler
    ä½¿ç”¨ OpenStreetMap æ•°æ®æ¥åˆ›å»ºåœ°å›¾åˆ‡ç‰‡ï¼Œè€Œå¯¹æˆ‘æ¥è¯´ï¼Œçˆ±å°”å…°å’ŒåŒ—çˆ±å°”å…°çš„æ•°æ®æå–å·²ç»å¯ç”¨ã€‚
- en: 'Running the following command will download the required data and generate
    a tileset using the OpenMapTiles schema as default:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†ä¸‹è½½æ‰€éœ€çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨ OpenMapTiles æ¶æ„ä½œä¸ºé»˜è®¤å€¼ç”Ÿæˆåˆ‡ç‰‡é›†ï¼š
- en: '[PRE0]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Notice the minzoom parameter is set to 4\. This is because since our map focuses
    on Ireland only, there is no need to generate tiles at the very low zooms where
    Ireland is too small to see properly. Zoom 4 is the lowest that we need to go
    and setting a limit will save us tile generation time.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ minzoom å‚æ•°è®¾ç½®ä¸º 4ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„åœ°å›¾ä»…å…³æ³¨çˆ±å°”å…°ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨çˆ±å°”å…°è¿‡äºå°çš„éå¸¸ä½çš„ç¼©æ”¾çº§åˆ«ç”Ÿæˆåˆ‡ç‰‡ã€‚ç¼©æ”¾çº§åˆ« 4 æ˜¯æˆ‘ä»¬éœ€è¦çš„æœ€ä½çº§åˆ«ï¼Œè®¾ç½®é™åˆ¶å°†èŠ‚çœåˆ‡ç‰‡ç”Ÿæˆæ—¶é—´ã€‚
- en: The amount of time Planetiler will take to finish will vary depending on your
    hardware, but can take an hour or more. Leave the process running and do something
    else while waiting.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Planetiler å®Œæˆçš„æ—¶é—´å°†æ ¹æ®ä½ çš„ç¡¬ä»¶è€Œæœ‰æ‰€ä¸åŒï¼Œä½†å¯èƒ½éœ€è¦ä¸€ä¸ªå°æ—¶æˆ–æ›´é•¿æ—¶é—´ã€‚è®©è¿›ç¨‹è¿è¡Œï¼Œç­‰å¾…çš„åŒæ—¶åšäº›å…¶ä»–äº‹æƒ…ã€‚
- en: Once the tiles are finished, we are ready to view them. I use [**Tileserver**](https://github.com/maptiler/tileserver-gl)
    to do this. Once again, we can use Docker to run this step and save us time. Make
    sure you run this command in your terminal from the same directory as the tiles,
    or run using the full path to the mbtiles.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦åˆ‡ç‰‡å®Œæˆï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹å®ƒä»¬ã€‚æˆ‘ä½¿ç”¨[**Tileserver**](https://github.com/maptiler/tileserver-gl)æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨
    Docker æ¥è¿è¡Œæ­¤æ­¥éª¤ï¼Œä»è€ŒèŠ‚çœæ—¶é—´ã€‚ç¡®ä¿åœ¨ä¸åˆ‡ç‰‡ç›¸åŒçš„ç›®å½•ä¸­è¿è¡Œæ­¤å‘½ä»¤ï¼Œæˆ–è€…ä½¿ç”¨ mbtiles çš„å®Œæ•´è·¯å¾„è¿è¡Œã€‚
- en: '[PRE1]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Our tiles will now be viewable at http://localhost:8080.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„åˆ‡ç‰‡ç°åœ¨å¯ä»¥åœ¨ http://localhost:8080 ä¸ŠæŸ¥çœ‹ã€‚
- en: By default, Tileserver gives us the option to view either the raw tile data
    or styled tiles using the basic style. This is useful for checking our tiles are
    as expected and identifying any problems.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: é»˜è®¤æƒ…å†µä¸‹ï¼ŒTileserver å…è®¸æˆ‘ä»¬æŸ¥çœ‹åŸå§‹åˆ‡ç‰‡æ•°æ®æˆ–ä½¿ç”¨åŸºæœ¬æ ·å¼çš„æ ·å¼åŒ–åˆ‡ç‰‡ã€‚è¿™å¯¹äºæ£€æŸ¥æˆ‘ä»¬çš„åˆ‡ç‰‡æ˜¯å¦ç¬¦åˆé¢„æœŸå¹¶è¯†åˆ«ä»»ä½•é—®é¢˜éå¸¸æœ‰ç”¨ã€‚
- en: Even though the raw data isnâ€™t styled, the features are colour coded according
    the data layer they are in, with a legend at the side with the details. This will
    be important to note when it comes to styling.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿åŸå§‹æ•°æ®æ²¡æœ‰æ ·å¼ï¼ŒåŠŸèƒ½ä¹Ÿä¼šæ ¹æ®å®ƒä»¬æ‰€åœ¨çš„æ•°æ®å±‚è¿›è¡Œé¢œè‰²ç¼–ç ï¼Œå¹¶ä¸”æ—è¾¹æœ‰ä¸€ä¸ªå›¾ä¾‹æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚è¿™åœ¨æ ·å¼åŒ–æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚
- en: Identifying required changes
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¡®å®šæ‰€éœ€çš„æ›´æ”¹
- en: Viewing the tile data reveals an immediate problem with the tiles as they are.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹åˆ‡ç‰‡æ•°æ®æ­ç¤ºäº†åˆ‡ç‰‡æœ¬èº«å­˜åœ¨çš„ä¸€ä¸ªç›´æ¥é—®é¢˜ã€‚
- en: '![](../Images/98dd783a9410ac2c9070723852d6cfe1.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/98dd783a9410ac2c9070723852d6cfe1.png)'
- en: Viewing the unstyled vector tileset using Tileserver GL
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Tileserver GL æŸ¥çœ‹æœªæ ·å¼åŒ–çš„çŸ¢é‡åˆ‡ç‰‡é›†
- en: Even though we used data for Ireland and Northern Ireland only to generate our
    map, the outline of Great Britain is still visible. This is because Planetiler
    generates ocean polygons to fill in the water extent, leaving the land mass empty.
    What we are seeing is a hole in the ocean where the island of Great Britain should
    be â€” if you click on the island, you will see there are no features, not even
    land mass.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡æˆ‘ä»¬ä»…ä½¿ç”¨äº†çˆ±å°”å…°å’ŒåŒ—çˆ±å°”å…°çš„æ•°æ®æ¥ç”Ÿæˆåœ°å›¾ï¼Œä½†å¤§ä¸åˆ—é¢ çš„è½®å»“ä»ç„¶å¯è§ã€‚è¿™æ˜¯å› ä¸º Planetiler ç”Ÿæˆäº†å¡«å……æ°´åŸŸçš„æµ·æ´‹å¤šè¾¹å½¢ï¼Œä½¿å¾—é™†åœ°éƒ¨åˆ†ä¸ºç©ºã€‚æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯å¤§ä¸åˆ—é¢ å²›åº”åœ¨çš„ä½ç½®çš„æµ·æ´‹ç©ºæ´â€”â€”å¦‚æœä½ ç‚¹å‡»å²›å±¿ï¼Œä½ ä¼šå‘ç°æ²¡æœ‰ç‰¹å¾ï¼Œè¿é™†åœ°éƒ½æ²¡æœ‰ã€‚
- en: What can we do about the cut-out ocean effect? There is nothing we can do to
    fill in the hole, but what matters for our purposes is that we can style the background
    and land borders. Usually this would be done by styling the ocean around the land
    so that the background fills in the land. We will need to do this the other way
    around, and include a landmass polygon for the island of Ireland to style and
    contrast with the background.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¯¥å¦‚ä½•å¤„ç†åˆ‡å‰²æµ·æ´‹æ•ˆæœï¼Ÿæˆ‘ä»¬æ— æ³•å¡«è¡¥ç©ºæ´ï¼Œä½†å¯¹æˆ‘ä»¬æ¥è¯´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹èƒŒæ™¯å’Œé™†åœ°è¾¹ç•Œè¿›è¡Œæ ·å¼è®¾ç½®ã€‚é€šå¸¸è¿™ä¼šé€šè¿‡ç»™é™†åœ°å‘¨å›´çš„æµ·æ´‹è®¾ç½®æ ·å¼æ¥å®Œæˆï¼Œä»¥ä½¿èƒŒæ™¯å¡«å……é™†åœ°ã€‚æˆ‘ä»¬éœ€è¦åè¿‡æ¥åšï¼Œä¸ºçˆ±å°”å…°å²›åŒ…æ‹¬ä¸€ä¸ªé™†åœ°å¤šè¾¹å½¢ï¼Œä»¥å¯¹èƒŒæ™¯è¿›è¡Œæ ·å¼è®¾ç½®å’Œå¯¹æ¯”ã€‚
- en: Before creating a style file, some changes will need to be made. Firstly we
    will need to supplement the data with an extra feature â€” the land mass of Ireland.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åˆ›å»ºæ ·å¼æ–‡ä»¶ä¹‹å‰ï¼Œéœ€è¦åšä¸€äº›æ›´æ”¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨é¢å¤–çš„ç‰¹å¾æ¥è¡¥å……æ•°æ®â€”â€”çˆ±å°”å…°çš„é™†åœ°é¢ç§¯ã€‚
- en: There is a second issue with the tileset as it is which is a little less obvious
    but seen when zooming in.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ‡ç‰‡é›†è¿˜æœ‰ä¸€ä¸ªç¨å¾®ä¸é‚£ä¹ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œä½†åœ¨æ”¾å¤§æ—¶ä¼šçœ‹åˆ°ã€‚
- en: '![](../Images/f61c0260c556546df0260d4c4855d094.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f61c0260c556546df0260d4c4855d094.png)'
- en: Notice the county boundaries (in pink) disappear after zoom 4\. Between zooms
    1â€“4, the Planetiler OpenMapTiles schema uses data from Natural Earth instead of
    OSM for generating a lower resolution map of the planet. After zoom 4, data from
    OpenStreetMap is used. Since we generated tiles starting from zoom 4, this is
    noticeable.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„åˆ°å¿ç•Œï¼ˆç²‰è‰²ï¼‰åœ¨ç¼©æ”¾çº§åˆ« 4 ä¹‹åæ¶ˆå¤±ã€‚åœ¨ç¼©æ”¾çº§åˆ« 1-4 ä¹‹é—´ï¼ŒPlanetiler OpenMapTiles æ¨¡å¼ä½¿ç”¨ Natural Earth
    çš„æ•°æ®è€Œé OSM æ¥ç”Ÿæˆåœ°çƒçš„ä½åˆ†è¾¨ç‡åœ°å›¾ã€‚ç¼©æ”¾çº§åˆ« 4 ä¹‹åï¼Œä½¿ç”¨çš„æ˜¯ OpenStreetMap çš„æ•°æ®ã€‚ç”±äºæˆ‘ä»¬ä»ç¼©æ”¾çº§åˆ« 4 å¼€å§‹ç”Ÿæˆåˆ‡ç‰‡ï¼Œè¿™ä¸€ç‚¹å¾ˆæ˜æ˜¾ã€‚
- en: Because the Planetiler OpenMapTiles schema applies for the whole planet, there
    are inevitably some inconsistencies between countries. Irish county borders being
    filtered out of the OSM data is one of these inconsistencies. Our map is of Ireland
    in particular, so we want to get this right.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº Planetiler OpenMapTiles æ¨¡å¼é€‚ç”¨äºæ•´ä¸ªæ˜Ÿçƒï¼Œä¸å¯é¿å…åœ°åœ¨å›½å®¶ä¹‹é—´å­˜åœ¨ä¸€äº›ä¸ä¸€è‡´æ€§ã€‚çˆ±å°”å…°å¿ç•Œè¢«ä» OSM æ•°æ®ä¸­è¿‡æ»¤æ‰å°±æ˜¯è¿™äº›ä¸ä¸€è‡´æ€§ä¹‹ä¸€ã€‚æˆ‘ä»¬çš„åœ°å›¾ç‰¹åˆ«æ˜¯å…³äºçˆ±å°”å…°çš„ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›æŠŠå®ƒåšå¯¹ã€‚
- en: Aside from the inconsistency, county boundaries are an important feature in
    a map of Ireland that we would prefer to include at all zooms.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤äº†ä¸ä¸€è‡´æ€§å¤–ï¼Œå¿ç•Œåœ¨çˆ±å°”å…°åœ°å›¾ä¸Šæ˜¯ä¸€ä¸ªé‡è¦ç‰¹å¾ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ‰€æœ‰ç¼©æ”¾çº§åˆ«ä¸­éƒ½åŒ…æ‹¬å®ƒã€‚
- en: The easy solution is to add the county boundaries from Natural Earth back into
    the tileset from zoom 4 upwards.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»ç¼©æ”¾çº§åˆ« 4 å¼€å§‹ï¼Œå°† Natural Earth çš„å¿ç•Œæ·»åŠ å›åˆ‡ç‰‡é›†ä¸­ã€‚
- en: Modifying the tileset
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¿®æ”¹åˆ‡ç‰‡é›†
- en: '[**Tippecanoe**](https://github.com/felt/tippecanoe) is a really useful tool
    for working with MBTiles tilesets. It allows us to create mbtiles from GeoJSON
    data and merge MBtiles files together. All we need is the required extra data
    in GeoJSON format and we can merge the required features into the tileset.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '[**Tippecanoe**](https://github.com/felt/tippecanoe) æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç”¨äºå¤„ç† MBTiles
    åˆ‡ç‰‡é›†ã€‚å®ƒå…è®¸æˆ‘ä»¬ä» GeoJSON æ•°æ®åˆ›å»º mbtilesï¼Œå¹¶å°† MBtiles æ–‡ä»¶åˆå¹¶åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬åªéœ€è¦æ‰€éœ€çš„é¢å¤–æ•°æ®ï¼ˆGeoJSON æ ¼å¼ï¼‰ï¼Œå°±å¯ä»¥å°†æ‰€éœ€çš„ç‰¹å¾åˆå¹¶åˆ°åˆ‡ç‰‡é›†ä¸­ã€‚'
- en: '[](https://github.com/felt/tippecanoe?source=post_page-----4069c01e26ac--------------------------------)
    [## GitHub - felt/tippecanoe: Build vector tilesets from large collections of
    GeoJSON features.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://github.com/felt/tippecanoe?source=post_page-----4069c01e26ac--------------------------------)
    [## GitHub - felt/tippecanoe: ä»å¤§å‹ GeoJSON ç‰¹å¾é›†åˆä¸­æ„å»ºçŸ¢é‡åˆ‡ç‰‡é›†ã€‚'
- en: 'Build vector tilesets from large collections of GeoJSON features. - GitHub
    - felt/tippecanoe: Build vector tilesetsâ€¦'
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 'ä»å¤§å‹ GeoJSON ç‰¹å¾é›†åˆä¸­æ„å»ºçŸ¢é‡åˆ‡ç‰‡é›†ã€‚- GitHub - felt/tippecanoe: ä»å¤§å‹ GeoJSON ç‰¹å¾é›†åˆä¸­æ„å»ºçŸ¢é‡åˆ‡ç‰‡é›†â€¦'
- en: github.com](https://github.com/felt/tippecanoe?source=post_page-----4069c01e26ac--------------------------------)
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '[**GitHub - felt/tippecanoe**](https://github.com/felt/tippecanoe?source=post_page-----4069c01e26ac--------------------------------)'
- en: For fetching a polygon representing Ireland - or more likely multipolygon, thanks
    to its islands - I turn to OpenStreetMap, specifically [Overpass Turbo](https://overpass-turbo.eu/).
    It is not immediately clear which feature we need (the island of Ireland? Ireland
    and Northern Ireland?) so some exploration is needed.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è·å–è¡¨ç¤ºçˆ±å°”å…°çš„å¤šè¾¹å½¢â€”â€”æˆ–æ›´å¯èƒ½æ˜¯å¤šå¤šè¾¹å½¢ï¼Œæ„Ÿè°¢å…¶å²›å±¿â€”â€”æˆ‘è½¬å‘OpenStreetMapï¼Œç‰¹åˆ«æ˜¯[Overpass Turbo](https://overpass-turbo.eu/)ã€‚ä¸ç«‹å³æ¸…æ¥šæˆ‘ä»¬éœ€è¦å“ªä¸ªç‰¹å¾ï¼ˆçˆ±å°”å…°å²›ï¼Ÿçˆ±å°”å…°å’ŒåŒ—çˆ±å°”å…°ï¼Ÿï¼‰ï¼Œå› æ­¤éœ€è¦ä¸€äº›æ¢ç´¢ã€‚
- en: By using the â€˜query featuresâ€™ tool on [openstreetmap.org](https://www.openstreetmap.org/),
    I am able to find two relations which when combined, result in exactly the feature
    I need. By inspecting the tags I can create a query to use with Overpass.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡åœ¨[openstreetmap.org](https://www.openstreetmap.org/)ä¸Šä½¿ç”¨â€˜æŸ¥è¯¢ç‰¹å¾â€™å·¥å…·ï¼Œæˆ‘èƒ½å¤Ÿæ‰¾åˆ°ä¸¤ä¸ªå…³ç³»ï¼Œå½“å®ƒä»¬ç»“åˆæ—¶ï¼Œç»“æœæ­£æ˜¯æˆ‘æ‰€éœ€è¦çš„ç‰¹å¾ã€‚é€šè¿‡æ£€æŸ¥æ ‡ç­¾ï¼Œæˆ‘å¯ä»¥åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢ä»¥ä¾›Overpassä½¿ç”¨ã€‚
- en: 'Fetching the two features using **Overpass Turbo** looks like this:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨**Overpass Turbo**è·å–ä¸¤ä¸ªç‰¹å¾å¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '![](../Images/7f751f4fd2ba3c1d59a8bd059d9f833d.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7f751f4fd2ba3c1d59a8bd059d9f833d.png)'
- en: Screenshot of Overpass Turbo with relations of Ireland and Ulster displayed
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Overpass Turboçš„æˆªå›¾ï¼Œæ˜¾ç¤ºäº†çˆ±å°”å…°å’Œé˜¿å°”æ–¯ç‰¹çš„å…³ç³»
- en: 'The query:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥è¯¢ï¼š
- en: '[PRE2]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The export button gives us the option to save the results as a GeoJSON file.
    All that is left to do is merge the two features so that we are left with one
    MultiPolygon.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¼å‡ºæŒ‰é’®å…è®¸æˆ‘ä»¬å°†ç»“æœä¿å­˜ä¸ºGeoJSONæ–‡ä»¶ã€‚å‰©ä¸‹çš„å°±æ˜¯åˆå¹¶è¿™ä¸¤ä¸ªç‰¹å¾ï¼Œä»¥ä¾¿å¾—åˆ°ä¸€ä¸ªMultiPolygonã€‚
- en: 'The county boundaries are available to download from the [Natural Earth site](https://www.naturalearthdata.com/downloads/10m-cultural-vectors/).
    In fact, Planetiler will have already downloaded a copy of the Natural Earth data
    for you, but since we need country boundaries only, it will be simpler to download
    this extract separately. The file is called *Admin 1 â€” States, Provinces* and
    the download link here:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: å¿ç•Œçº¿å¯ä»¥ä»[Natural Earthç½‘ç«™](https://www.naturalearthdata.com/downloads/10m-cultural-vectors/)ä¸‹è½½ã€‚å®é™…ä¸Šï¼ŒPlanetilerå·²ç»ä¸ºä½ ä¸‹è½½äº†Natural
    Earthæ•°æ®çš„å‰¯æœ¬ï¼Œä½†ç”±äºæˆ‘ä»¬åªéœ€è¦å›½å®¶è¾¹ç•Œï¼Œå•ç‹¬ä¸‹è½½æ­¤æå–æ–‡ä»¶ä¼šæ›´ç®€å•ã€‚æ–‡ä»¶åä¸º*Admin 1 â€” States, Provinces*ï¼Œä¸‹è½½é“¾æ¥å¦‚ä¸‹ï¼š
- en: '[https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_1_states_provinces.zip](https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_1_states_provinces.zip)'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_1_states_provinces.zip](https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_1_states_provinces.zip)'
- en: You can find an example notebook preparing the two [GeoJSON files in the repo
    for this project](https://github.com/mmc1718/webmap-ireland/blob/main/notebooks/ireland_outline_counties.ipynb).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥åœ¨è¿™ä¸ªé¡¹ç›®çš„[GeoJSONæ–‡ä»¶ç¤ºä¾‹ç¬”è®°æœ¬](https://github.com/mmc1718/webmap-ireland/blob/main/notebooks/ireland_outline_counties.ipynb)ä¸­æ‰¾åˆ°å‡†å¤‡ä¸¤ä¸ªGeoJSONæ–‡ä»¶çš„ä¾‹å­ã€‚
- en: 'Once the GeoJSON files are ready, you can clone the [Tippecanoe repo](https://github.com/felt/tippecanoe)
    from GitHub and build the image using Docker or install from source (see the README
    for instructions). The commands I used to merge the data to my tileset are:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦GeoJSONæ–‡ä»¶å‡†å¤‡å¥½åï¼Œä½ å¯ä»¥ä»GitHubå…‹éš†[Tippecanoe repo](https://github.com/felt/tippecanoe)ï¼Œå¹¶ä½¿ç”¨Dockeræ„å»ºé•œåƒæˆ–ä»æºä»£ç å®‰è£…ï¼ˆè¯·å‚é˜…READMEè·å–è¯´æ˜ï¼‰ã€‚æˆ‘ç”¨äºå°†æ•°æ®åˆå¹¶åˆ°æˆ‘çš„tilesetä¸­çš„å‘½ä»¤å¦‚ä¸‹ï¼š
- en: '[PRE3]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Using Tileserver to preview the new tiles after merging the new data in, we
    notice some changes.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Tileserveré¢„è§ˆåˆå¹¶æ–°æ•°æ®åçš„æ–°å›¾å—æ—¶ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°äº†ä¸€äº›å˜åŒ–ã€‚
- en: 'Tip: when running Tileserver, make sure you are using the correct mbtiles file,
    the one you created using Tippecanoe. Use the parameter `--mbtiles` when running
    Tileserver to specify the file.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šè¿è¡ŒTileserveræ—¶ï¼Œè¯·ç¡®ä¿ä½¿ç”¨çš„æ˜¯æ­£ç¡®çš„mbtilesæ–‡ä»¶ï¼Œå³ä½ ä½¿ç”¨Tippecanoeåˆ›å»ºçš„æ–‡ä»¶ã€‚è¿è¡ŒTileserveræ—¶ä½¿ç”¨å‚æ•°`--mbtiles`æ¥æŒ‡å®šæ–‡ä»¶ã€‚
- en: '![](../Images/17d7441d51a350009b991bbcec93d8c0.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/17d7441d51a350009b991bbcec93d8c0.png)'
- en: Unstyled view of the vector data including Ireland and county boundary layers
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: æœªæ ·å¼åŒ–çš„çŸ¢é‡æ•°æ®è§†å›¾ï¼ŒåŒ…æ‹¬çˆ±å°”å…°å’Œå¿ç•Œå±‚
- en: The legend provides a quick way to verify our new layers are present. We can
    see two new layers here; â€˜irelandâ€™ and â€˜counties*â€™*.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ä¾‹æä¾›äº†ä¸€ç§å¿«é€ŸéªŒè¯æˆ‘ä»¬æ–°å›¾å±‚æ˜¯å¦å­˜åœ¨çš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ä¸¤ä¸ªæ–°å›¾å±‚ï¼›â€˜irelandâ€™å’Œâ€˜counties*â€™*ã€‚
- en: Styling the base map
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ ·å¼åŒ–åŸºç¡€åœ°å›¾
- en: Creating a JSON style file
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åˆ›å»ºJSONæ ·å¼æ–‡ä»¶
- en: Now we have prepared our base tileset, we are ready to start styling. When making
    the style I chose to highlight natural features such as mountains, with a reduced
    focus on man made infrastructure such as motorways, in-keeping with the subject
    matter of bogs.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½åŸºç¡€tilesetï¼Œå‡†å¤‡å¼€å§‹æ ·å¼åŒ–ã€‚å½“åˆ¶ä½œæ ·å¼æ—¶ï¼Œæˆ‘é€‰æ‹©çªå‡ºè‡ªç„¶ç‰¹å¾å¦‚å±±è„‰ï¼Œå‡å°‘å¯¹å¦‚é«˜é€Ÿå…¬è·¯ç­‰äººé€ åŸºç¡€è®¾æ–½çš„å…³æ³¨ï¼Œä»¥ä¿æŒæ²¼æ³½ä¸»é¢˜ã€‚
- en: If you arenâ€™t familiar with map styles, they are JSON documents which contain
    information about how to style the vector data in your tileset. [**Maputnik**](https://maputnik.github.io/)
    is an style editor we can use for creating and editing styles which allows us
    to preview our style as well as the raw data whilst working. It is an open source
    alternative to Mapboxâ€™s style editor and can be run using the publicly available
    Docker image.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å¯¹åœ°å›¾æ ·å¼ä¸ç†Ÿæ‚‰ï¼Œå®ƒä»¬æ˜¯åŒ…å«æœ‰å…³å¦‚ä½•æ ·å¼åŒ–åˆ‡ç‰‡é›†ä¸­çŸ¢é‡æ•°æ®çš„ä¿¡æ¯çš„ JSON æ–‡æ¡£ã€‚ [**Maputnik**](https://maputnik.github.io/)
    æ˜¯ä¸€ä¸ªæ ·å¼ç¼–è¾‘å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œç¼–è¾‘æ ·å¼ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨å·¥ä½œæ—¶é¢„è§ˆæ ·å¼å’ŒåŸå§‹æ•°æ®ã€‚å®ƒæ˜¯ Mapbox æ ·å¼ç¼–è¾‘å™¨çš„ä¸€ä¸ªå¼€æºæ›¿ä»£å“ï¼Œå¯ä»¥ä½¿ç”¨å…¬å¼€çš„ Docker
    é•œåƒè¿è¡Œã€‚
- en: '[](https://github.com/maputnik/editor?source=post_page-----4069c01e26ac--------------------------------)
    [## GitHub - maputnik/editor: An open source visual editor for the ''Mapbox Style
    Specification'''
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://github.com/maputnik/editor?source=post_page-----4069c01e26ac--------------------------------)
    [## GitHub - maputnik/editor: ä¸€ä¸ªå¼€æºçš„è§†è§‰ç¼–è¾‘å™¨ï¼Œç”¨äº''Mapbox Style Specification'''
- en: 'An open source visual editor for the ''Mapbox Style Specification'' - GitHub
    - maputnik/editor: An open source visualâ€¦'
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 'ä¸€ä¸ªå¼€æºçš„è§†è§‰ç¼–è¾‘å™¨ï¼Œç”¨äº''Mapbox Style Specification'' - GitHub - maputnik/editor: ä¸€ä¸ªå¼€æºçš„è§†è§‰â€¦'
- en: github.com](https://github.com/maputnik/editor?source=post_page-----4069c01e26ac--------------------------------)
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: github.com](https://github.com/maputnik/editor?source=post_page-----4069c01e26ac--------------------------------)
- en: Once Maputnik is open, open an empty style.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ Maputnik æ‰“å¼€ï¼Œæ‰“å¼€ä¸€ä¸ªç©ºç™½æ ·å¼ã€‚
- en: The first thing we need to do is connect it to our tileset. This is done using
    the â€˜Data Sourcesâ€™ tab. You will need to copy the link to your TileJSON file â€”
    viewable using Tileserver â€” and paste it into the `#OpenMapTiles` active data
    source. The TileJSON file is a JSON metadata file containing information about
    your tileset including the source URL.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è¿æ¥åˆ°æˆ‘ä»¬çš„åˆ‡ç‰‡é›†ã€‚è¿™æ˜¯é€šè¿‡â€˜æ•°æ®æºâ€™é€‰é¡¹å¡å®Œæˆçš„ã€‚ä½ éœ€è¦å¤åˆ¶ä½ çš„ TileJSON æ–‡ä»¶çš„é“¾æ¥ â€”â€” ä½¿ç”¨ Tileserver å¯ä»¥æŸ¥çœ‹
    â€”â€” å¹¶å°†å…¶ç²˜è´´åˆ° `#OpenMapTiles` æ´»è·ƒçš„æ•°æ®æºä¸­ã€‚TileJSON æ–‡ä»¶æ˜¯ä¸€ä¸ªåŒ…å«æœ‰å…³ä½ çš„åˆ‡ç‰‡é›†ä¿¡æ¯çš„ JSON å…ƒæ•°æ®æ–‡ä»¶ï¼ŒåŒ…æ‹¬æº URLã€‚
- en: '![](../Images/af62051af037826a81fe2bae5a6f2444.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/af62051af037826a81fe2bae5a6f2444.png)'
- en: Screenshot of Maputnik with Sources window open
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: Maputnik æˆªå›¾ï¼Œæ˜¾ç¤ºäº† Sources çª—å£
- en: If all is working well, you should be able to switch the view from â€˜Mapâ€™ to
    â€˜Inspectâ€™ and see your data on the screen. The data will look similar to the raw
    data viewed using Tileserver. Until you have created some style layers, your â€˜Mapâ€™
    view will just show a blank screen.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥èƒ½å¤Ÿå°†è§†å›¾ä»â€˜åœ°å›¾â€™åˆ‡æ¢åˆ°â€˜æ£€æŸ¥â€™ï¼Œå¹¶åœ¨å±å¹•ä¸Šçœ‹åˆ°ä½ çš„æ•°æ®ã€‚æ•°æ®å°†ç±»ä¼¼äºä½¿ç”¨ Tileserver æŸ¥çœ‹çš„åŸå§‹æ•°æ®ã€‚åœ¨ä½ åˆ›å»ºäº†ä¸€äº›æ ·å¼å›¾å±‚ä¹‹å‰ï¼Œä½ çš„â€˜åœ°å›¾â€™è§†å›¾å°†åªæ˜¾ç¤ºä¸€ä¸ªç©ºç™½å±å¹•ã€‚
- en: '![](../Images/141d2f4ba24e4005b9b4bc7af3afd5f2.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/141d2f4ba24e4005b9b4bc7af3afd5f2.png)'
- en: Switching between map and inspect views in Maputnik
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Maputnik ä¸­åˆ‡æ¢åœ°å›¾å’Œæ£€æŸ¥è§†å›¾
- en: Specifying how the features should be styled is done using style layers. These
    layers can be edited in the side panel in Maputnik and will be translated into
    JSON objects in the â€˜layersâ€™ field within our final style JSON file. Click the
    â€˜Add Layerâ€™ button to get started.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‡å®šç‰¹å¾æ ·å¼çš„æ–¹å¼æ˜¯é€šè¿‡æ ·å¼å›¾å±‚å®Œæˆçš„ã€‚è¿™äº›å›¾å±‚å¯ä»¥åœ¨ Maputnik çš„ä¾§è¾¹é¢æ¿ä¸­ç¼–è¾‘ï¼Œå¹¶å°†è¢«è½¬æ¢ä¸ºæˆ‘ä»¬æœ€ç»ˆæ ·å¼ JSON æ–‡ä»¶ä¸­çš„â€˜layersâ€™å­—æ®µä¸­çš„
    JSON å¯¹è±¡ã€‚ç‚¹å‡»â€˜æ·»åŠ å›¾å±‚â€™æŒ‰é’®å¼€å§‹æ“ä½œã€‚
- en: The first layer to create is typically the background. After that, add layers
    to target different features as you wish. Note the ordering of the layers makes
    a difference â€” features will be rendered on top of or behind each other depending
    on the style ordering.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªåˆ›å»ºçš„å›¾å±‚é€šå¸¸æ˜¯èƒŒæ™¯ã€‚ä¹‹åï¼Œæ ¹æ®éœ€è¦æ·»åŠ å›¾å±‚ä»¥å®šä½ä¸åŒçš„ç‰¹å¾ã€‚æ³¨æ„å›¾å±‚çš„é¡ºåºä¼šæœ‰æ‰€ä¸åŒ â€”â€” ç‰¹å¾å°†æ ¹æ®æ ·å¼é¡ºåºæ˜¾ç¤ºåœ¨å½¼æ­¤çš„ä¸Šæ–¹æˆ–ä¸‹æ–¹ã€‚
- en: Which features a style layer affects depends on its source (which data layer
    the features are in, e.g. transportation or landuse) and the filters we set. You
    can specify this when making the layer.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: æ ·å¼å›¾å±‚å½±å“å“ªäº›ç‰¹å¾å–å†³äºå…¶æºï¼ˆç‰¹å¾æ‰€åœ¨çš„æ•°æ®å±‚ï¼Œä¾‹å¦‚è¿è¾“æˆ–åœŸåœ°ä½¿ç”¨ï¼‰ä»¥åŠæˆ‘ä»¬è®¾ç½®çš„è¿‡æ»¤å™¨ã€‚ä½ å¯ä»¥åœ¨åˆ›å»ºå›¾å±‚æ—¶æŒ‡å®šè¿™ä¸€ç‚¹ã€‚
- en: 'For example, we can filter the boundary style layer to only affect land boundaries
    within the boundary source layer, ignoring the sea boundaries present by using
    the maritime tag:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿‡æ»¤è¾¹ç•Œæ ·å¼å›¾å±‚ï¼Œä»¥ä»…å½±å“è¾¹ç•Œæºå›¾å±‚ä¸­çš„é™†åœ°è¾¹ç•Œï¼Œé€šè¿‡ä½¿ç”¨ maritime æ ‡ç­¾å¿½ç•¥æµ·æ´‹è¾¹ç•Œï¼š
- en: '![](../Images/c9154a6b2b79503b53f820b81a0dc2d1.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c9154a6b2b79503b53f820b81a0dc2d1.png)'
- en: County boundary style options viewed in Maputnik
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Maputnik ä¸­æŸ¥çœ‹çš„å¿ç•Œæ ·å¼é€‰é¡¹
- en: 'In the JSON this field ends up being the following:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ JSON ä¸­ï¼Œè¿™ä¸ªå­—æ®µæœ€ç»ˆå˜æˆå¦‚ä¸‹ï¼š
- en: '[PRE4]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: In the side panel at the bottom you can see what the raw JSON looks like.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åº•éƒ¨çš„ä¾§è¾¹é¢æ¿ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°åŸå§‹ JSON çš„æ ·å­ã€‚
- en: Note that multiple style sheets can affect the same feature(s). This makes it
    possible to render different versions of the same feature, e.g. a point feature
    can show as both a label and an image.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œå¤šä¸ªæ ·å¼è¡¨å¯ä»¥å½±å“ç›¸åŒçš„ç‰¹å¾ã€‚è¿™ä½¿å¾—èƒ½å¤Ÿæ¸²æŸ“ç›¸åŒç‰¹å¾çš„ä¸åŒç‰ˆæœ¬ï¼Œä¾‹å¦‚ä¸€ä¸ªç‚¹ç‰¹å¾å¯ä»¥åŒæ—¶æ˜¾ç¤ºä¸ºæ ‡ç­¾å’Œå›¾åƒã€‚
- en: Styles created using Maputnik adhere to the Mapbox Style Specification, so if
    in doubt you can [check the documentation](https://docs.mapbox.com/mapbox-gl-js/style-spec/).
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Maputnik åˆ›å»ºçš„æ ·å¼éµå¾ª Mapbox æ ·å¼è§„èŒƒï¼Œå› æ­¤å¦‚æœæœ‰ç–‘é—®ï¼Œä½ å¯ä»¥ [æŸ¥çœ‹æ–‡æ¡£](https://docs.mapbox.com/mapbox-gl-js/style-spec/)ã€‚
- en: You can view my final style [here](https://github.com/mmc1718/webmap-ireland/blob/main/tileserver/styles/ireland.json).
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥åœ¨ [è¿™é‡Œ](https://github.com/mmc1718/webmap-ireland/blob/main/tileserver/styles/ireland.json)
    æŸ¥çœ‹æˆ‘æœ€ç»ˆçš„æ ·å¼ã€‚
- en: There in a wealth of information online when it comes to tips on cartography.
    Esri has published [a list of online resources](https://www.esri.com/arcgis-blog/products/product/mapping/favorite-tools-and-resources-for-cartographers/),
    which is a great place to start.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨çº¿æœ‰å¤§é‡å…³äºåˆ¶å›¾çš„æç¤ºä¿¡æ¯ã€‚Esri å‘å¸ƒäº† [ä¸€ä»½åœ¨çº¿èµ„æºåˆ—è¡¨](https://www.esri.com/arcgis-blog/products/product/mapping/favorite-tools-and-resources-for-cartographers/)ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚
- en: Note for the style I have added an extra remote source for fonts and sprites
    (logos or images). This can be done in the sources window in Maputnik where we
    added our tile source. The sources I use are `https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf`
    for fonts and `https://openmaptiles.github.io/osm-bright-gl-style/sprite` for
    sprites. (check out Orange Mugâ€™s custom fonts repo here [https://github.com/orangemug/font-glyphs](https://github.com/orangemug/font-glyphs))
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œæˆ‘ä¸ºæ ·å¼æ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„è¿œç¨‹å­—ä½“å’Œç²¾çµï¼ˆå¾½æ ‡æˆ–å›¾åƒï¼‰æºã€‚è¿™å¯ä»¥åœ¨ Maputnik çš„æºçª—å£ä¸­å®Œæˆï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ·»åŠ äº†æˆ‘ä»¬çš„å›¾å—æºã€‚æˆ‘ä½¿ç”¨çš„æºæ˜¯
    `https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf` ç”¨äºå­—ä½“å’Œ
    `https://openmaptiles.github.io/osm-bright-gl-style/sprite` ç”¨äºç²¾çµã€‚ï¼ˆæŸ¥çœ‹ Orange Mug
    çš„è‡ªå®šä¹‰å­—ä½“åº“ [https://github.com/orangemug/font-glyphs](https://github.com/orangemug/font-glyphs)ï¼‰
- en: Serving styled map tiles
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æä¾›æ ·å¼åœ°å›¾å›¾å—
- en: Once your style is ready, download it from Maputnik and save it in the same
    directory as your MBTiles tileset. We will need to create a config file for Tileserver
    so that it can find your custom style when serving tiles.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ çš„æ ·å¼å‡†å¤‡å¥½ï¼Œä» Maputnik ä¸‹è½½å®ƒå¹¶ä¿å­˜åœ¨ä¸ä½ çš„ MBTiles å›¾å—é›†ç›¸åŒçš„ç›®å½•ä¸­ã€‚æˆ‘ä»¬éœ€è¦ä¸º Tileserver åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨æä¾›å›¾å—æ—¶å®ƒå¯ä»¥æ‰¾åˆ°ä½ çš„è‡ªå®šä¹‰æ ·å¼ã€‚
- en: Create a new file called config.json and make sure it contains something like
    the following.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªåä¸º config.json çš„æ–°æ–‡ä»¶ï¼Œå¹¶ç¡®ä¿å…¶åŒ…å«å¦‚ä¸‹å†…å®¹ã€‚
- en: '[PRE5]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: This config file will load an mbtiles file named ireland.mbtiles (using the
    path defined under options -> paths -> mbtiles). Tileserver will look for a style
    file called ireland.json found in the styles directory (options -> paths -> styles)
    to serve. Note that the paths for fonts, styles and mbtiles are assumed to be
    relative to root.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé…ç½®æ–‡ä»¶å°†åŠ è½½ä¸€ä¸ªåä¸º ireland.mbtiles çš„ mbtiles æ–‡ä»¶ï¼ˆä½¿ç”¨åœ¨é€‰é¡¹ -> è·¯å¾„ -> mbtiles ä¸‹å®šä¹‰çš„è·¯å¾„ï¼‰ã€‚Tileserver
    å°†æŸ¥æ‰¾åœ¨æ ·å¼ç›®å½•ï¼ˆé€‰é¡¹ -> è·¯å¾„ -> stylesï¼‰ä¸­åä¸º ireland.json çš„æ ·å¼æ–‡ä»¶æ¥æä¾›æœåŠ¡ã€‚è¯·æ³¨æ„ï¼Œå­—ä½“ã€æ ·å¼å’Œ mbtiles çš„è·¯å¾„å‡å®šæ˜¯ç›¸å¯¹äºæ ¹ç›®å½•çš„ã€‚
- en: Restarting Tileserver in the directory containing our new config file will make
    our new style available for viewing at localhost:8080.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åŒ…å«æ–°é…ç½®æ–‡ä»¶çš„ç›®å½•ä¸­é‡æ–°å¯åŠ¨ Tileserver å°†ä½¿æˆ‘ä»¬æ–°çš„æ ·å¼åœ¨ localhost:8080 ä¸Šå¯ä¾›æŸ¥çœ‹ã€‚
- en: 'Tip: If you want your tiles to be available somewhere other than localhost,
    you will need to include â€˜domainsâ€™ in your config. See the [Tileserver docs](https://tileserver.readthedocs.io/en/latest/config.html)
    for details.'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šå¦‚æœä½ å¸Œæœ›ä½ çš„å›¾å—åœ¨ localhost ä¹‹å¤–çš„åœ°æ–¹å¯ç”¨ï¼Œä½ éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŒ…å«â€˜domainsâ€™ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚è§ [Tileserver æ–‡æ¡£](https://tileserver.readthedocs.io/en/latest/config.html)ã€‚
- en: Creating the Web Map
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ›å»º Web åœ°å›¾
- en: Loading the base map
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åŠ è½½åŸºç¡€åœ°å›¾
- en: We have our base map and style. Now all that is left is to overlay the data
    on the map. I have two data files concerning bogs across Ireland. The steps I
    took to prepare the data can be viewed [on GitHub](https://github.com/mmc1718/webmap-ireland/tree/main/notebooks).
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å·²ç»æœ‰äº†åŸºç¡€åœ°å›¾å’Œæ ·å¼ã€‚ç°åœ¨å‰©ä¸‹çš„å°±æ˜¯å°†æ•°æ®å åŠ åˆ°åœ°å›¾ä¸Šã€‚æˆ‘æœ‰ä¸¤ä¸ªå…³äºçˆ±å°”å…°æ²¼æ³½çš„æ•°æ®æ–‡ä»¶ã€‚æˆ‘å‡†å¤‡æ•°æ®çš„æ­¥éª¤å¯ä»¥åœ¨ [GitHub](https://github.com/mmc1718/webmap-ireland/tree/main/notebooks)
    ä¸ŠæŸ¥çœ‹ã€‚
- en: I am using [Maplibre](https://maplibre.org/) to create my map. Maplibre is the
    open source alternative to Mapbox GL JS and is very similar. We can add a JavaScript
    script directly in our HTML file, or we can use a JavaScript file and import it.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä½¿ç”¨ [Maplibre](https://maplibre.org/) æ¥åˆ›å»ºæˆ‘çš„åœ°å›¾ã€‚Maplibre æ˜¯ Mapbox GL JS çš„å¼€æºæ›¿ä»£å“ï¼Œéå¸¸ç›¸ä¼¼ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨
    HTML æ–‡ä»¶ä¸­æ·»åŠ  JavaScript è„šæœ¬ï¼Œæˆ–è€…ä½¿ç”¨ JavaScript æ–‡ä»¶å¹¶å¯¼å…¥å®ƒã€‚
- en: Following the example in [Maplibreâ€™s documentation,](https://maplibre.org/maplibre-gl-js/docs/)
    get started by creating an HTML file. Include a `<script>` tag with the following
    snippet which will create a map instance using the newly created custom base map.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç…§[Maplibre æ–‡æ¡£](https://maplibre.org/maplibre-gl-js/docs/)ä¸­çš„ç¤ºä¾‹ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ã€‚åŒ…å«ä¸€ä¸ª`<script>`æ ‡ç­¾ï¼Œæ ‡ç­¾å†…çš„ä»£ç å°†ä½¿ç”¨æ–°åˆ›å»ºçš„è‡ªå®šä¹‰åº•å›¾åˆ›å»ºåœ°å›¾å®ä¾‹ã€‚
- en: '[PRE6]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Note I have included the link to my style file being served by Tileserver in
    the â€˜styleâ€™ field.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œæˆ‘åœ¨â€˜styleâ€™å­—æ®µä¸­åŒ…å«äº†ç”± Tileserver æä¾›çš„æ ·å¼æ–‡ä»¶é“¾æ¥ã€‚
- en: 'Setting bounds means the user will not be able to pan the map outside the defined
    bounding box coordinates, which is useful since our data is confined to a small
    area of the map. By default it is possible to pan accross the whole world, not
    what we want in our case. Custom bounds can be found using this handy tool: [https://norbertrenner.de/osm/bbox.html](https://norbertrenner.de/osm/bbox.html).'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾ç½®è¾¹ç•Œæ„å‘³ç€ç”¨æˆ·å°†æ— æ³•å°†åœ°å›¾å¹³ç§»åˆ°å®šä¹‰çš„è¾¹ç•Œæ¡†åæ ‡ä¹‹å¤–ï¼Œè¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•°æ®ä»…é™äºåœ°å›¾ä¸Šçš„ä¸€ä¸ªå°åŒºåŸŸã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä»¥å¹³ç§»æ•´ä¸ªä¸–ç•Œï¼Œè¿™åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹ä¾¿çš„å·¥å…·æ‰¾åˆ°è‡ªå®šä¹‰è¾¹ç•Œï¼š[https://norbertrenner.de/osm/bbox.html](https://norbertrenner.de/osm/bbox.html)ã€‚
- en: 'To view our page we will need a web server. I use [VSCodeâ€™s Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)
    extension for quickly viewing web pages while developing locally. It is free to
    install and means you can serve web apps with the click of a button. Loading the
    page will show us our base map:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: è¦æŸ¥çœ‹æˆ‘ä»¬çš„é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª Web æœåŠ¡å™¨ã€‚æˆ‘ä½¿ç”¨[VSCode çš„ Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)
    æ‰©å±•æ¥å¿«é€ŸæŸ¥çœ‹å¼€å‘ä¸­çš„ç½‘é¡µã€‚å®ƒå¯ä»¥å…è´¹å®‰è£…ï¼Œå¹¶ä¸”æ„å‘³ç€ä½ åªéœ€ç‚¹å‡»ä¸€ä¸‹æŒ‰é’®å³å¯æä¾› Web åº”ç”¨ã€‚åŠ è½½é¡µé¢å°†æ˜¾ç¤ºæˆ‘ä»¬çš„åº•å›¾ï¼š
- en: '![](../Images/8b09e5c4d3090e556143ab75257f3435.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8b09e5c4d3090e556143ab75257f3435.png)'
- en: Base map of Ireland, styled by author
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æ ·å¼çš„çˆ±å°”å…°åº•å›¾
- en: Overlaying data on the map
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åœ¨åœ°å›¾ä¸Šå åŠ æ•°æ®
- en: Next, we add the data layers to our map. Again, the Maplibre website has many
    examples covering a range of scenarios which you can use when creating your map.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ•°æ®å›¾å±‚æ·»åŠ åˆ°åœ°å›¾ä¸­ã€‚åŒæ ·ï¼ŒMaplibre ç½‘ç«™æä¾›äº†è®¸å¤šç¤ºä¾‹ï¼Œæ¶µç›–äº†åˆ›å»ºåœ°å›¾æ—¶å¯èƒ½é‡åˆ°çš„å„ç§åœºæ™¯ã€‚
- en: To load GeoJSON files, we first need to add the file paths as sources. Once
    we have defined the file sources, we can then add layers with styling options
    to the map. This is all done inside a function which is run when the mapâ€™s â€˜loadâ€™
    event triggers (this is what `map.on(â€œload" â€¦)`means). I have named the new function
    `setUpMap` and passed it into`map.on(â€œload")` as the second parameter.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: è¦åŠ è½½ GeoJSON æ–‡ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å°†æ–‡ä»¶è·¯å¾„æ·»åŠ ä¸ºæºã€‚å®šä¹‰æ–‡ä»¶æºåï¼Œæˆ‘ä»¬å¯ä»¥å°†å…·æœ‰æ ·å¼é€‰é¡¹çš„å›¾å±‚æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚è¿™ä¸€åˆ‡éƒ½åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å®Œæˆï¼Œè¯¥å‡½æ•°åœ¨åœ°å›¾çš„â€œåŠ è½½â€äº‹ä»¶è§¦å‘æ—¶è¿è¡Œï¼ˆè¿™å°±æ˜¯`map.on(â€œload"
    â€¦)`çš„æ„æ€ï¼‰ã€‚æˆ‘å°†æ–°å‡½æ•°å‘½åä¸º`setUpMap`å¹¶å°†å…¶ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™`map.on(â€œload")`ã€‚
- en: '[PRE7]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Each layer is styled using a different colour and is slightly transparent to
    allow place labels and details in the base map to show through. I used [this handy
    tool](https://www.colorhexa.com/647433) for choosing and comparing colours.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªå›¾å±‚ä½¿ç”¨ä¸åŒçš„é¢œè‰²è¿›è¡Œæ ·å¼è®¾ç½®ï¼Œå¹¶ä¸”ç¨å¾®é€æ˜ï¼Œä»¥ä¾¿åŸºç¡€åœ°å›¾ä¸­çš„åœ°ç‚¹æ ‡ç­¾å’Œç»†èŠ‚èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚æˆ‘ä½¿ç”¨äº†[è¿™ä¸ªæ–¹ä¾¿çš„å·¥å…·](https://www.colorhexa.com/647433)æ¥é€‰æ‹©å’Œæ¯”è¾ƒé¢œè‰²ã€‚
- en: 'I also added an interactive legend using a plug-in called maplibre-gl-legend
    found here: [https://github.com/watergis/maplibre-gl-legend](https://github.com/watergis/maplibre-gl-legend).
    The following code defines the legend:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘è¿˜ä½¿ç”¨äº†ä¸€ä¸ªåä¸º maplibre-gl-legend çš„æ’ä»¶ï¼Œæ’ä»¶å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š[https://github.com/watergis/maplibre-gl-legend](https://github.com/watergis/maplibre-gl-legend)ã€‚ä»¥ä¸‹ä»£ç å®šä¹‰äº†å›¾ä¾‹ï¼š
- en: '[PRE8]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The legend also provides a way for me to include an attribution for the data
    source without having to add this elsewhere.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ä¾‹è¿˜æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œä½¿æˆ‘èƒ½å¤Ÿä¸ºæ•°æ®æºåŒ…å«ç½²åï¼Œè€Œæ— éœ€åœ¨å…¶ä»–åœ°æ–¹æ·»åŠ è¿™ä¸€å†…å®¹ã€‚
- en: 'Viewing the final result shows us a map of bogland complete with an interactive
    legend:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹æœ€ç»ˆç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå®Œæ•´çš„æ²¼æ³½åœ°åœ°å›¾ï¼Œé™„å¸¦äº’åŠ¨å›¾ä¾‹ï¼š
- en: '![](../Images/55218bc6cdf3434c780312d6c6b4090f.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/55218bc6cdf3434c780312d6c6b4090f.png)'
- en: Map of peat bog loss in Ireland between 2000â€“2012 with legend
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: çˆ±å°”å…°2000â€“2012å¹´é—´æ³¥ç‚­æ²¼æ³½æŸå¤±çš„åœ°å›¾ï¼Œé™„å¸¦å›¾ä¾‹
- en: '*Thanks for reading! If you found this article useful, consider leaving a clap,
    following the author or starring the project on GitHubğŸ‘*'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '*æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œå¯ä»¥è€ƒè™‘ç‚¹èµã€å…³æ³¨ä½œè€…æˆ–åœ¨ GitHub ä¸Šç»™é¡¹ç›®åŠ æ˜ŸğŸ‘*'
