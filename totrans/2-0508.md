# 选择正确的路径：流失模型与提升模型

> 原文：[https://towardsdatascience.com/choosing-the-right-path-churn-models-vs-uplift-models-b8489306aa80](https://towardsdatascience.com/choosing-the-right-path-churn-models-vs-uplift-models-b8489306aa80)

## 我们真的需要流失模型吗？也许提升建模能给我们更全面的答案？

[](https://markeltsefon.medium.com/?source=post_page-----b8489306aa80--------------------------------)[![Mark Eltsefon](../Images/5ab4cccd496f73cd155bbb253f85ec4d.png)](https://markeltsefon.medium.com/?source=post_page-----b8489306aa80--------------------------------)[](https://towardsdatascience.com/?source=post_page-----b8489306aa80--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----b8489306aa80--------------------------------) [Mark Eltsefon](https://markeltsefon.medium.com/?source=post_page-----b8489306aa80--------------------------------)

·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page-----b8489306aa80--------------------------------) ·阅读时间5分钟·2023年6月16日

--

![](../Images/36738e16e1255cb2287618e37fe708cd.png)

照片由 [cmophoto.net](https://unsplash.com/@cmophoto?utm_source=medium&utm_medium=referral) 提供，来源于 [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

让我们假设我们在电商领域工作，产品经理找到了我们并要求建立流失模型。

但实际上他问了我们什么？

流失模型能给我们什么？

好吧，这一切都与了解特定客户离开的可能性有关。我们的下一步由**启发式**方法驱动：

> 如果我们对可能流失的客户提供折扣，他们将会留下来。

但我们的目标稍有不同。让我们假设我们只能做两件事：给予优惠或不给予优惠，在我们的案例中就是折扣。有4种可能的结果。

![](../Images/e52359e2c4fc5518f1b2b20265e59b4d.png)

图片由作者提供

1.  **利润让步。** 我们提供了折扣，用户使用了它并购买了商品，但即使没有折扣用户也会进行购买。这是一个负面结果，因为利润被让步了。

1.  **处理成本。** 我们提供了折扣，但用户没有使用，也没有进行购买。这也被视为负面结果，因为我们在处理过程中产生了成本，如发送短信，尤其是在处理大量用户时。

1.  **成功。** 我们提供了折扣，用户使用了它，并仅仅因为这个优惠进行了购买。这是我们期望的结果。

1.  **流失客户。** 我们提供了折扣，但用户最终离开了我们。例如，在订阅服务的情况下，用户收到了一则折扣通知，却发现自己在过去6个月里一直在支付订阅费用，最终决定取消。这是我们可能遇到的最负面的结果。

> 我们真正的目标不是估计流失的概率，而是为每个用户应用最合适的处理。

我们如何开始实现这一目标？

首先，进行一个简单的AB测试至关重要。这涉及向一个组提供折扣，同时保持一个没有折扣的对照组。

实验后我们有三种主要方法。

# **双模型方法**

第一种方法涉及构建两个独立的模型：一个用于控制组（没有任何折扣），另一个用于处理组（有折扣）。为了构建这些独立模型，我们可以选择任何类型的机器学习模型。

通过将每个客户通过两个模型，我们可以计算提升作为预测结果之间的差异。

**优点：**

+   实施很简单。

**缺点：**

+   这并不能直接预测提升。我们估计的是用户行动（购买）的概率。

+   两模型设置引入了双重误差建模，因为两个模型都有各自的误差，从而导致整体误差增大。

# 目标转换

第二种方法围绕目标变量本身的转换。通过创建一个表示提升的新目标，我们可以直接计算所需的结果。

我们使用以下公式引入一个新的目标变量：

![](../Images/25fd3350344d31d633dd6b22646f6782.png)

作者提供的图片

这里，Y表示原始目标变量，而W表示是否应用了目标处理。换句话说，Y表示是否给予折扣，W则表示是否进行了购买。

转换后的变量Z在两种情况下取值为1：

+   用户属于目标组（W = 1）且Y = 1（用户收到了折扣并且进行了购买）。

+   用户属于控制组（W = 0）且Y = 0（用户未获得折扣且用户没有购买）。

然后我们只需要用新的目标训练模型（例如逻辑回归）。

计算提升时，我们可以使用以下公式：

![](../Images/33cfd3a56869c7434f265fe11dd65b07.png)

作者提供的图片

**优点：**

+   实施仍然很简单。

+   由于只有一个模型，它比第一种方法更具鲁棒性和稳定性。

**缺点：**

+   这仍然无法直接预测提升。我们预测的是转换后的变量。

# 基于树的模型

第三种方法利用了基于树的模型。

目标是识别数据集中对处理最为敏感的子群体，从而实现最大影响的有针对性干预。

![](../Images/6fe3a645bcfb2b0349e96037fe23e67d.png)

基于树的提升模型。[https://github.com/uber/causalml](https://github.com/uber/causalml)

用于提升目的的示例决策树如上方突出显示的图像所示。红色表示提升值。通过观察图像，我们可以得出总体提升差异为0.0127（基于随机度量）。然而，当我们深入树中时，我们观察到某些子群体展示出更高的提升差异。

> 这些子群体成为我们的目标，因为它们拥有最大收益的潜力。

## **如何构建这棵树？**

有很多关于构建决策树的教程，但在这里我将概述基本方法。

+   选择特征并识别目标变量，在我们的案例中，目标变量是提升。

+   选择一个分割标准来确定节点如何划分。

+   通过递归地重复分割过程来构建树，直到满足停止标准。

值得注意的是，构建提升树时常用的分割标准有三种，按受欢迎程度排序如下：

+   KL散度

+   卡方

+   欧几里得距离

**优点：**

+   最准确的方法之一

+   我们有一个决策树，因此我们可以构建树的森林和不同的集成方法，这些方法提高准确性并减少方差。

**缺点：**

+   这是一种决策树方法，因此算法倾向于高估具有多个级别的分类变量。为了解决这个问题，我们可以使用均值插补。

# 结论

现在我们知道，解决客户流失问题需要超越仅仅估计流失概率的策略。**终极目标**是对每个用户应用最合适的治疗方案，并带来商业影响，而不仅仅是流失概率。

提升建模可以应用于超越流失的各种商业挑战，提供了一个有力的解决方案，并具有即时的商业影响。

关于提升建模仍然存在许多有趣的问题，例如处理多重治疗、估计不同的提升模型以及利用多臂老虎机进行生产，但我会将答案留到下一个帖子。

# 感谢阅读，不要害怕犯错和学习。这是进步的唯一途径！
