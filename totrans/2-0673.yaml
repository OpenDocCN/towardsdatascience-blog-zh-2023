- en: Model Selection For dbt CLI
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/dbt-cli-model-selection-52ddd038d8b2](https://towardsdatascience.com/dbt-cli-model-selection-52ddd038d8b2)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A complete cheatsheet for selecting specific models when running dbt commands
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://gmyrianthous.medium.com/?source=post_page-----52ddd038d8b2--------------------------------)[![Giorgos
    Myrianthous](../Images/ff4b116e4fb9a095ce45eb064fde5af3.png)](https://gmyrianthous.medium.com/?source=post_page-----52ddd038d8b2--------------------------------)[](https://towardsdatascience.com/?source=post_page-----52ddd038d8b2--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----52ddd038d8b2--------------------------------)
    [Giorgos Myrianthous](https://gmyrianthous.medium.com/?source=post_page-----52ddd038d8b2--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----52ddd038d8b2--------------------------------)
    ·7 min read·Jan 25, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/86526646e5b957d9c7aba56a61a39a50.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Yulia Matvienko](https://unsplash.com/@yuliamatvienko?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/photos/kgz9vsP5JCU?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  prefs: []
  type: TYPE_NORMAL
- en: When working on dbt projects you need to ensure that the CLI commands used to
    run or test models, seeds and snapshots encompass only the resource (or a subset)
    of interest. In other words, you need to be able to target specific models, tests,
    seeds or snapshots in order to avoid wasting resources and money. This is even
    more important when you work with fairly big models that process large volumes
    of data.
  prefs: []
  type: TYPE_NORMAL
- en: By default, `dbt run|test|seed|snapshot` will execute all corresponding nodes
    in the dependency graph (i.e. `dbt run` will run all models, `dbt tests` will
    run all model tests, and so on). In this article, we will present all the possible
    model selection shorthands you can take advantage when running or testing models,
    seeds or snapshots via dbt Command Line Interface (CLI).
  prefs: []
  type: TYPE_NORMAL
- en: If you are looking into experimenting with the commands that we will present
    in the next few sections, feel free to create an example dbt project locally.
    You can do so (in probably less than two minutes) by f[ollowing this step-by-step
    guide where you can also find a containerised dbt environment](/create-local-dbt-project-e12c31bd3992).
  prefs: []
  type: TYPE_NORMAL
- en: Run all resources in a dbt project
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In order to select all resources within a dbt project, all you need to do is
    select the project name:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Select a specific resource
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In order to execute `run`, `test`, `snapshot` or `seed` command for a specific
    model, all you need to do is specify the model name in the `--select` option:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'You can even run a specific model, seed or snapshot by its specific path that
    points to the SQL file that defines it:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Select multiple models
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`--select` accepts multiple arguments which means that it is capable of running
    multiple models (or tests, snapshots and seeds) at the same time. To do so, simply
    provide all mode, test, snapshot or seed names when running the command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Select node and downstream dependencies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In order to run a dbt node as well as its downstream dependencies, you will
    need to specify the `+` operator after the resource name.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Select model and upstream dependencies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Likewise, to select a node and its upstream dependencies, the `+` operator
    needs to be specified prior to the node name:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: Select model with downstream and upstream dependencies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now in order to run a model as well as all of its downstream and upstream dependencies,
    you just need to specify the model name in-between two `+` operators:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Select model and N downstream dependencies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There’s a chance that instead of running all the downstream (children) dependencies
    of a model, you may have to run only a number of edges to step through. This can
    be achieved once again using the `+` operator, but this time specifying the degree/level
    of parent models to execute.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: Select model and N upstream dependencies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In the same way, you can specify the number of edges to step through when it
    comes to upstream (or parent) dependencies
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Select model and N upstream and M downstream dependencies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Finally, to select a model as well as N parent and M children nodes, you can
    specify the model in between the number of edges to step through for both upstream
    and downstream dependencies:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: Exclude a model
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Apart from `--select`, the dbt CLI also offers the `--exclude` flag (with the
    same semantics as `--select`). Any model specified in the `--exclude` argument
    will be removed from the set of models selected with `--select`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following command, will run all models except the one called `my_model`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'The `--exclude` argument is also applicable to other dbt commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: Note that both `--select` and `--exclude` arguments can be combined in a single
    dbt command.
  prefs: []
  type: TYPE_NORMAL
- en: For example, the following command will run all models in package `my_package`
    except the model `user_base_model` and its downstream dependencies.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: Run a model in a specific package
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To run a model, test, snapshot or seed that belongs to a specific dbt package,
    you need to follow the dot notation as illustrated in the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: Run all models in a specific path
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In order to run models, tests, snapshots or seeds placed under a specific directory,
    you can use the following selector notation:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'In addition to the dot notation, you can also run models in a specific path
    as illustrated below:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Select model with a specific tag
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'If you have tagged resources and you would like to execute all of them, you
    can provide the `tag` selector followed by the tag name, as illustrated in the
    following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: Combining multiple selectors
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Note that you can actually combine pretty much any selector described in this
    tutorial in a single command. For example, the following command will run every
    resource tagged with the `finance` tag, the individual model `my_model` as well
    as all the models in the path `path.to.my.marketing.models`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 'And as usual, this can be applied to pretty much every resource, including
    tests, seeds and snapshots:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: Final Thoughts
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In conclusion, when working with dbt projects, it is important to be able to
    target specific models, tests, seeds, or snapshots in order to avoid wasting resources
    and money. The dbt Command Line Interface (CLI) offers a variety of shorthands
    that allow you to select specific resources to run, test, seed, or snapshot. These
    include the ability to include or exclude such models when running any dbt command.
  prefs: []
  type: TYPE_NORMAL
- en: '[**Become a member**](https://gmyrianthous.medium.com/membership) **and read
    every story on Medium. Your membership fee directly supports me and other writers
    you read. You’ll also get full access to every story on Medium.**'
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://gmyrianthous.medium.com/membership?source=post_page-----52ddd038d8b2--------------------------------)
    [## Join Medium with my referral link — Giorgos Myrianthous'
  prefs: []
  type: TYPE_NORMAL
- en: As a Medium member, a portion of your membership fee goes to writers you read,
    and you get full access to every story…
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: gmyrianthous.medium.com](https://gmyrianthous.medium.com/membership?source=post_page-----52ddd038d8b2--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: '**Related articles you may also like**'
  prefs: []
  type: TYPE_NORMAL
- en: '[](/etl-vs-elt-68e221d78719?source=post_page-----52ddd038d8b2--------------------------------)
    [## ETL vs ELT: What’s the Difference?'
  prefs: []
  type: TYPE_NORMAL
- en: A comparison between ETL and ELT in the context of Data Engineering
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/etl-vs-elt-68e221d78719?source=post_page-----52ddd038d8b2--------------------------------)
    [](/staging-intermediate-mart-models-dbt-2a759ecc1db1?source=post_page-----52ddd038d8b2--------------------------------)
    [## Staging vs Intermediate vs Mart Models in dbt
  prefs: []
  type: TYPE_NORMAL
- en: Understanding the purpose of staging, intermediate and mart models in the context
    of data build tool (dbt)
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/staging-intermediate-mart-models-dbt-2a759ecc1db1?source=post_page-----52ddd038d8b2--------------------------------)
    [](/dbt-models-structure-c31c8977b5fc?source=post_page-----52ddd038d8b2--------------------------------)
    [## How to Structure Your dbt Projects and Data Models
  prefs: []
  type: TYPE_NORMAL
- en: Enforcing meaningful structure to dbt data models
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/dbt-models-structure-c31c8977b5fc?source=post_page-----52ddd038d8b2--------------------------------)
  prefs: []
  type: TYPE_NORMAL
