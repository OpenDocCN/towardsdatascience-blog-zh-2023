- en: 'Simulation 104: Electromagnetic Mapping with Vector Fields'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/simulation-104-electromagnetic-mapping-with-vector-fields-96ab3d5e7637](https://towardsdatascience.com/simulation-104-electromagnetic-mapping-with-vector-fields-96ab3d5e7637)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Modeling electric and magnetic fields
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@ln8378?source=post_page-----96ab3d5e7637--------------------------------)[![Le
    Nguyen](../Images/05289b40bb528d5ba2a0ee00d1a75990.png)](https://medium.com/@ln8378?source=post_page-----96ab3d5e7637--------------------------------)[](https://towardsdatascience.com/?source=post_page-----96ab3d5e7637--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----96ab3d5e7637--------------------------------)
    [Le Nguyen](https://medium.com/@ln8378?source=post_page-----96ab3d5e7637--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----96ab3d5e7637--------------------------------)
    ·12 min read·Aug 7, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: Water, fire, air, and dirt, magnets how do they work? It’s not miracles, it’s
    science! We’ve all played with magnets before be it on the fridge or in science
    class, but we might not understand what magnets really are or what they do. In
    this article we will learn the basic theory behind electric and magnetic fields
    and learn how to make a computational framework to model them.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/020d7ba51206fe914a2ca5d34d2e965c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 1: [Example of electric field](https://en.wikipedia.org/wiki/Magnetic_field)'
  prefs: []
  type: TYPE_NORMAL
- en: 'In this article we will:'
  prefs: []
  type: TYPE_NORMAL
- en: Learn basic electromagnetic (EM) theory
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Create vector fields
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Map out EM fields using vector fields
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Electric and Magnetic Fields
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Electromagnetism is one of the [4 fundamental forces of the universe](https://www.space.com/four-fundamental-forces.html).
    It is the force that governs the behavior of charged particles and electric and
    magnetic fields are how this force manifests itself. In this section, we will
    break down the theory behind each of these fields
  prefs: []
  type: TYPE_NORMAL
- en: Electric Fields
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[Electric fields](https://en.wikipedia.org/wiki/Electric_field) are inherent
    to charged particles. It is the reason why charged particles can repel and attract
    each other. By convention, we say that positively charged particles have an electric
    field that points outward and negatively charged particles have an electric field
    that points inward seen in figure 2\. In the attractive case when a negatively
    and a positively charged particle are near each other, the field lines start at
    the positive charge and terminate at the negative charge as seen in figure 1.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e2de614782b1cfb78ace055cf79cbca6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 2: [Electric field lines](https://en.wikipedia.org/wiki/Field_line)
    for a positive, negative, and neutrally charged particle.'
  prefs: []
  type: TYPE_NORMAL
- en: The force charged particles exert on each other is described by [**Coulomb’s
    law**](https://en.wikipedia.org/wiki/Coulomb%27s_law). Coulomb’s law states that
    the force between charges is proportional to the charge of each particle divided
    by the distance between then. The exact equation is stated in equation 1 below.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0705e7403276153cb37333a10592ee9f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Equation 1: Coulomb’s law'
  prefs: []
  type: TYPE_NORMAL
- en: We now know the basics of electric fields and can move on to magnetic.
  prefs: []
  type: TYPE_NORMAL
- en: Magnetic Fields
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[Magnetic fields](https://en.wikipedia.org/wiki/Magnetic_field#:~:text=A%20magnetic%20field%20is%20a,electric%20currents%2C%20and%20magnetic%20materials.)
    are a bit more complicated than electric fields because they are generated from
    moving charges. This can be due to electric currents in the case of [electromagnets](https://en.wikipedia.org/wiki/Electromagnet)
    or inherent magnetic dipoles due to electron spin in [ferromagnets](https://en.wikipedia.org/wiki/Ferromagnetism).
    In either case, the magnetic field is what exerts force between magnets (and moving
    charges). Magnetic field is more complicated because, unlike charged particles,
    there are no magnetic monopoles. That is, there are no positive and negative magnets,
    each one has a north and a south end that are attracted to the opposite end of
    other magnets. This means that orientation and geometry of the magnets need to
    be taken into account when determining magnet field.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4236ed5a5e364f1a04bbb65e2e03919d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 3: [Magnetic field lines](https://commons.wikimedia.org/wiki/File:VFPt_cylindrical_magnet_thumb.svg)
    of a cylindrical magnet'
  prefs: []
  type: TYPE_NORMAL
- en: Because of the complexity of magnetic fields, we are going to be looking at
    the simplest case of magnets that are so small or so far apart their geometry
    does not matter. In this case, magnets can be treated like charged particles or
    rather a positive and negative particle next to each other like in figure 1\.
    This simplified set up is know as [magnet dipole-dipole interaction](https://en.wikipedia.org/wiki/Magnetic_dipole%E2%80%93dipole_interaction#:~:text=Magnetic%20dipole%E2%80%93dipole%20interaction%2C%20also,in%20calculating%20their%20interaction%20energy.)
    and it further simplifies if we assume the magnets are aligned in the same direction.
  prefs: []
  type: TYPE_NORMAL
- en: With all these simplifying assumptions we get the magnetic field described in
    equation 2 with the force applied by the magnetic field described in equation
    3.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/bf2c2e2f4cd612bf2927387b7760546a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Equation 2: Magnet dipole-dipole field'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d86bb56851b70cad4ab851db739a266e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Equation 3: Magnet dipole-dipole force'
  prefs: []
  type: TYPE_NORMAL
- en: With an understanding of electric and magnetic fields, we will move on to vector
    fields; a computational scheme which will help us model our fields.
  prefs: []
  type: TYPE_NORMAL
- en: '*Note: many simplifications were taken in covering the theory behind EM fields
    for the sake of brevity and simplicity for this introductory article. More advanced
    explanations will be given in future articles.*'
  prefs: []
  type: TYPE_NORMAL
- en: Vector Fields
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Vectors](https://en.wikipedia.org/wiki/Vector_(mathematics_and_physics)) are
    mathematical representations of quantities that also have an associated direction.
    For instance, I could tell you the windspeed outside is 25 mph which is the quantity,
    or scalar, associated with windspeed, but if I told you that the windspeed is
    25 mph northeast you now have the windspeed vector since you know the strength
    or magnitude of the wind as well as what direction it is blowing.'
  prefs: []
  type: TYPE_NORMAL
- en: Keeping with this windspeed analogy, a vector could only represent the wind
    at one point in space, but let’s say we want to know how the wind is behaving
    over an entire area. For this, we need a [vector field](https://en.wikipedia.org/wiki/Vector_field)
    which is similar to a mesh grid as discussed in our [pervious article](https://medium.com/towards-data-science/simulation-101-conductive-heat-transfer-a4f09b3e16b4),
    except instead of looking at points in a grid we are now looking at vectors in
    a grid. An example of a vector field is shown below in figure 4\. As we can see,
    there are many uniformly spaced vectors with their own direction and size. Visually,
    the magnitude or strength of the vector is represented by size so bigger vectors
    represent a higher windspeed in their given direction.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b7436a054f45eb07facb6a881b93577b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 4: [Example of a vector field](https://commons.wikimedia.org/wiki/File:VectorField.svg?uselang=en#Licensing)'
  prefs: []
  type: TYPE_NORMAL
- en: Vector fields are perfect computational tools to model electromagnetic fields
    because, as we saw in the previous section, they have a strength and direction.
    We will now go into how to model electric and magnetic fields using vector fields.
  prefs: []
  type: TYPE_NORMAL
- en: EM Field Mapping
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To create our vector fields we are going to be using [matplotlib’s arrow function](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.arrow.html).
    This function will plot a vector at a given x,y positions along with an x,y magnitude.
    Combine this with with [numpy’s mesh grid function](https://numpy.org/doc/stable/reference/generated/numpy.meshgrid.html)
    and we can create a vector field by making a mesh grid of vectors. Now, let’s
    get started.
  prefs: []
  type: TYPE_NORMAL
- en: Electric Field
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let’s first create a [class](https://docs.python.org/3/tutorial/classes.html)
    for charged particle we can call to make however many particles we want. The class
    will take in a position and a given charge amount to initialize a particle.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Now let’s write a function for Coulomb’s law that will take in coulomb’s constant,
    the charge of a particle, and the distance to some observation point. Note that
    at this point we are using Coulomb’s law to look at the field strength at some
    observation point due to one particle so the charge of a second particle is not
    needed (yet). Also note we are representing our direction unit vector with *r*
    divided by the magnitude of *r*.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Let’s map the electric field around a single charged particle. We will make
    a ring of observation points around our particle and see what the field strength
    (magnitude) and direction is. Our results will be seen in figure 5.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/6254f47f08525b61c7840c1e254385c6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 5: Simulated positively charged particle with electric field'
  prefs: []
  type: TYPE_NORMAL
- en: We have successfully simulated the electric field around a single charged particle
    which is cool, but let’s simulate something more interesting. How about a negative
    charge next to a positive one like in figure 1? Now we will have 2 charged particles
    with equal and opposite charges so we have to keep track of the electric field
    from both particles and see how they add up to the overall field. This will require
    us to find 2 distance *r*s from each particle to a given observation point and
    then find the vector contribution of field from each particle to [sum them up](https://www.physicsclassroom.com/class/vectors/Lesson-1/Vector-Addition)
    and get the overall field at that observation point.
  prefs: []
  type: TYPE_NORMAL
- en: Here we will be using a mesh grid of observation points to create a vector field.
    See results for our electric charge dipole in figure 6.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/b111f77eb3bccdf3c330377339df787e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 6: Simulated electric field for charge dipole'
  prefs: []
  type: TYPE_NORMAL
- en: We’ve have now simulated the electric field for a positive and negative charge
    like in figure 1\. As we can see all of the vector heads are pointing in the correct
    direction; from the positive charge (red) to the negative charge (blue). There
    is some visual noise added by looking at observation points near our charged particles.
    Due to how Coulomb’s law is formulated, as the distance from the particle goes
    to 0, the field strength will go to infinity; thus we will get large vectors looking
    at points near the charges. We can choose to normalize them or remove them or
    just keep them in as a sanity check.
  prefs: []
  type: TYPE_NORMAL
- en: Now that we have simulated electric field, it’s time to move onto magnetic.
  prefs: []
  type: TYPE_NORMAL
- en: Magnetic Field
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As we simplified our magnetic field scenario to look like electric field, the
    code will look very similar. We will define a magnet class and a dipole-dipole
    interaction function. Note that different from equation 2, I use x and y coordinates
    instead of a distance *r*. This just makes the computation cleaner since unlike
    particle charge, dipole (*m*) is a vector in itself with x,y components. Also
    note that here we will be mapping *magnetic field* not *magnetic force.* The magnetic
    force applied by a magnetic field is dependent on how a charged particle/other
    magnetic moves through it which is outside the scope of this article.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Now let us simulate a magnetic field. Here we will simulate the magnetic field
    of an electron and use its dipole.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/63e2e88511c3faef88a6850dc339faf0.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 7: Simulated magnetic field of an electron'
  prefs: []
  type: TYPE_NORMAL
- en: Here we see our simulated magnetic field of an electron. It looks a bit odd
    because we are only working in 2 dimensions so really we are only seeing a vertical
    slice of the magnetic field. In 3 dimensions [we would see the vectors curl towards
    us and coil around the electron](http://www.faithfulscience.com/classical-physics/electric-and-magnetic-fields.html).
  prefs: []
  type: TYPE_NORMAL
- en: We will see the same effect with 2 electrons as well.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/91b000d5cfd8fef82f0db236050c1877.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 8: Magnetic field of 2 electrons (they are represented by different
    color but have the same dipole)'
  prefs: []
  type: TYPE_NORMAL
- en: This may not be the most intuitive result, but in a future article we will do
    EM field mapping in 3 dimensions and include geometry to see better defined fields.
  prefs: []
  type: TYPE_NORMAL
- en: Full Code
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Electric Field
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Magnetic Field
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: References
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: All figures used in this article were either generated by the author or fall
    under the [creative common license CC BY-SA](https://creativecommons.org/licenses/by-sa/3.0/)
    as stated by the original image creators
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Introduction to Electrodynamics, 4th edition [https://hansandcassady.org/David%20J.%20Griffiths-Introduction%20to%20Electrodynamics-Addison-Wesley%20(2012).pdf](https://hansandcassady.org/David%20J.%20Griffiths-Introduction%20to%20Electrodynamics-Addison-Wesley%20(2012).pdf)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
