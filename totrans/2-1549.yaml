- en: Multivariate Analysis — Going Beyond One Variable At A Time
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/multivariate-analysis-going-beyond-one-variable-at-a-time-5d341bd4daca](https://towardsdatascience.com/multivariate-analysis-going-beyond-one-variable-at-a-time-5d341bd4daca)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Multivariate analysis and visualization in Python
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@fmnobar?source=post_page-----5d341bd4daca--------------------------------)[![Farzad
    Mahmoodinobar](../Images/2d75209693b712300e6f0796bd2487d0.png)](https://medium.com/@fmnobar?source=post_page-----5d341bd4daca--------------------------------)[](https://towardsdatascience.com/?source=post_page-----5d341bd4daca--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----5d341bd4daca--------------------------------)
    [Farzad Mahmoodinobar](https://medium.com/@fmnobar?source=post_page-----5d341bd4daca--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----5d341bd4daca--------------------------------)
    ·9 min read·Jan 12, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5c2d26281810d576715f7708bbbd9c84.png)'
  prefs: []
  type: TYPE_IMG
- en: an owl reflecting on the data, by [DALL.E 2](https://openai.com/dall-e-2/)
  prefs: []
  type: TYPE_NORMAL
- en: It has become common practice these days for companies and businesses to collect
    as much information as reasonably possible, even if the use cases of such data
    are unknown at the time of collection — the hope is to understand and use the
    data at some point in the future. Once such data sets are available, data-driven
    individuals will dive into the data looking for the hidden patterns and relationships
    within the data. One of the tools of finding such hidden patterns in the data
    is multivariate analysis.
  prefs: []
  type: TYPE_NORMAL
- en: '*Multivariate* analysis involves analyzing the relationships between multiple
    variables (i.e. multivariate data) and understanding how they influence each other.
    It is an important tool that helps us better understand complex data sets to make
    data-driven and informed decisions. If you are interested in only analyzing the
    impact of one variable at a time, that can be accomplished through a *univariate*
    analysis, which I covered in [this post](/univariate-analysis-intro-and-implementation-b9d1e07e5c16).'
  prefs: []
  type: TYPE_NORMAL
- en: '[](/univariate-analysis-intro-and-implementation-b9d1e07e5c16?source=post_page-----5d341bd4daca--------------------------------)
    [## Univariate Analysis — Intro and Implementation'
  prefs: []
  type: TYPE_NORMAL
- en: 'Univariate analysis using seaborn: statistical data visualization'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/univariate-analysis-intro-and-implementation-b9d1e07e5c16?source=post_page-----5d341bd4daca--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: Now that we are familiar with *multivariate* data, we can define *univariate*
    data as a special case of *multivariate* data where data consists of only one
    variable. Similarly, *bivariate* data consists of two variables and so forth.
  prefs: []
  type: TYPE_NORMAL
- en: We will discuss bivariate/multivariate analysis of both numerical and categorical
    variables in this post. Therefore, let’s go over a quick refresher about the distinction
    between these two types of variables and then we can move on to the analysis.
  prefs: []
  type: TYPE_NORMAL
- en: '**Numerical Variables:** Represent a measurable quantity, which can be either
    continuous or discrete variables. Continuous ones can take on any value within
    a certain range (e.g. height, weight, etc.), while discrete numerical variables
    can only take on specific values within a range (e.g. number of children, count
    of cars in a parking lot, etc.)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Categorical Variables:** Represent a group (or category) and can take on
    a limited number of values, such as car brands, dog breeds, etc.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Now that we understand the distinction between these two types of variables,
    we can move on to the analysis itself.
  prefs: []
  type: TYPE_NORMAL
- en: I have organized this post in the format of a series of questions and answers,
    which I personally find an effective method of learning. I have also included
    a link to the notebook that I used to create this exercise towards the end. Feel
    free to download and practice after reading this post!
  prefs: []
  type: TYPE_NORMAL
- en: Let’s get started!
  prefs: []
  type: TYPE_NORMAL
- en: '*(All images, unless otherwise noted, are by the author.)*'
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://medium.com/@fmnobar/membership?source=post_page-----5d341bd4daca--------------------------------)
    [## Join Medium with my referral link - Farzad Mahmoodinobar'
  prefs: []
  type: TYPE_NORMAL
- en: Read every story from Farzad (and other writers on Medium). Your membership
    fee directly supports Farzad and other…
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: medium.com](https://medium.com/@fmnobar/membership?source=post_page-----5d341bd4daca--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: Data Set
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In order to practice multivariate analysis, we will be using a data set from
    [UCI Machine Learning Repository](https://archive-beta.ics.uci.edu/dataset/10/automobile)
    (CC BY 4.0), which includes car prices and a set of car properties associated
    with each car price. In order to simplify the process, I have cleaned up and filtered
    the data, which can be downloaded from [this link](https://gist.github.com/fmnobar/c9b4029e08e97978a9a53f4eb034b16f).
  prefs: []
  type: TYPE_NORMAL
- en: Let’s start with importing the libraries we will be using today, then we will
    read the data set into a dataframe and look at the top 5 rows of the dataframe
    to familiarize ourselves with the data.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/ff72bc71a0bbe3a9d65b49c2b4290ce2.png)'
  prefs: []
  type: TYPE_IMG
- en: Column that we will be using in this post are self-explanatory so do not worry
    about understanding all of the columns at this point.
  prefs: []
  type: TYPE_NORMAL
- en: Let’s move on to the analysis!
  prefs: []
  type: TYPE_NORMAL
- en: Numerical Bivariate Analysis
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Let’s start with a case of bivariate data, consisting of only two variables.
    The goal of bivariate analysis is to understand the relationship between two variables.
    There are various statistical techniques that can be used to analyze bivariate
    data and using scatterplots is one of the most common ones. Let’s see how scatterplots
    work.
  prefs: []
  type: TYPE_NORMAL
- en: '**Question 1:**'
  prefs: []
  type: TYPE_NORMAL
- en: What is the relationship between price and engine size? One might intuitively
    expect cars with larger engines to have higher prices (all else equal) but let’s
    see if data supports this. Create a scatterplot with price in the x-axis and engine-size
    in the y-axis.
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/660a62d731e543b8703b30f522a0dc39.png)'
  prefs: []
  type: TYPE_IMG
- en: Scatterplot of price vs. engine size
  prefs: []
  type: TYPE_NORMAL
- en: As we see, there seems to be a positive relationship between the price and engine
    size in our data. Note this does not imply a causation (whether that is correct
    or incorrect) and merely shows a positive correlation between the two. Let’s add
    in the correlation values to have a quantitative measure for our reference.
  prefs: []
  type: TYPE_NORMAL
- en: '**Question 2:**'
  prefs: []
  type: TYPE_NORMAL
- en: Return the correlation between price and other variables in a descending order.
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a84356105fa742d5c85ea429810850ef.png)'
  prefs: []
  type: TYPE_IMG
- en: Results confirm the positive correlation that we observed in the scatterplot
    between price and engine size. Let’s try to go one layer deeper and look at the
    variation within the data.
  prefs: []
  type: TYPE_NORMAL
- en: Heterogeneity and Stratification
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Heterogeneity in the data refers to the variation within a data set. For example,
    our data set consists of different body styles, such as sedan, hatchback, wagon,
    convertible, etc. Do we expect the correlation between price and engine size to
    be similar in all of these body styles? For example, incremental willingness to
    pay of customers for larger engines in convertibles might be higher compared to
    wagons which are primarily used by families. Let’s look into that hypothesis and
    see if such a variation across body styles exists, by stratifying our data across
    body styles.
  prefs: []
  type: TYPE_NORMAL
- en: '**Question 3:**'
  prefs: []
  type: TYPE_NORMAL
- en: The data set includes car prices with various body styles, as indicated in column
    “body-style”. How many rows per class are there in the data set?
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/300c5a8fd56b16618a7e74d00a6de2ab.png)'
  prefs: []
  type: TYPE_IMG
- en: According to the results, there are five classes.
  prefs: []
  type: TYPE_NORMAL
- en: '**Question 4:**'
  prefs: []
  type: TYPE_NORMAL
- en: Create a scatterplot per body style of price versus engine size to demonstrate
    whether there is a visual variance among the body styles.
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/beea590425e09c769485ac14478f41d0.png)'
  prefs: []
  type: TYPE_IMG
- en: Scatterplots of price vs. engine size broken down by body style
  prefs: []
  type: TYPE_NORMAL
- en: Now that is interesting! The distributions are quite different than the overall
    distribution that we observed in Question 1 and demonstrate visual differences
    among these five body styles. All five body styles demonstrate a positive correlation
    between price and engine size as expected but the slope seems to be the highest
    for convertibles (despite smaller number of data points), compared to wagons.
    Let’s look at correlation numbers to quantify these.
  prefs: []
  type: TYPE_NORMAL
- en: '**Question 5:**'
  prefs: []
  type: TYPE_NORMAL
- en: What are the correlations between price and engine size for each of the body
    styles?
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/3f1a00e2d972d72192dcf473cc4ea224.png)'
  prefs: []
  type: TYPE_IMG
- en: Results confirm our visual inspection — correlation of price and engine size
    is positive for all body styles, with the highest correlation belonging to convertibles
    and the lowest to the wagons, as we intuitively expected. Next, we are going to
    look at a categorical bivariate analysis.
  prefs: []
  type: TYPE_NORMAL
- en: '**Categorical Bivariate Analysis**'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we are going to create a similar bivariate analysis but for
    categorical variables. In statistics, this type of analysis is usually visualized
    through a “contingency table” (aka cross-tabulation or crosstab), which displays
    the frequency or count of observations for two (for bivariate) or more (for multivariate)
    categorical variables. Let’s look at an example to better understand contingency
    tables.
  prefs: []
  type: TYPE_NORMAL
- en: '**Question 6:**'
  prefs: []
  type: TYPE_NORMAL
- en: Create a contingency table of car’s body style and number of cylinders. Do you
    see a pattern in the results?
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/6dae922f62246e9d1e6c33a8ab11b73e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If you are familiar with cars, the most common cylinder counts are 4, 6 and
    8, which is where we see most of the frequency in the table as well. We can also
    see that majority of the cars in our data set are four cylinders with body types
    of sedans and hatchbacks, followed by wagons. Did you notice that we are doing
    a mental math to calculate the percentage of total for each combination of cylinder
    count and body style? Contingency tables can be normalized to address this exact
    topic. There are three approaches to normalize such a table:'
  prefs: []
  type: TYPE_NORMAL
- en: Entries in each row sum to 1
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Entries of each column sum to 1
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Entries of the entire table sum to 1
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Let’s try one of these in the next question.
  prefs: []
  type: TYPE_NORMAL
- en: '**Question 7:**'
  prefs: []
  type: TYPE_NORMAL
- en: Create a cross-tabulation table similar to the previous question normalized
    in a manner that the sum of the entries of each row equal to 1, rounded to 2 decimal
    places.
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer:**'
  prefs: []
  type: TYPE_NORMAL
- en: I am going to demonstrate two different approaches here for learning purposes.
    First approach uses Pandas’ crosstab and the second one uses groupby.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/b3ceb7dda346a6b22c1e9c0d179e6ace.png)'
  prefs: []
  type: TYPE_IMG
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1bdb1938ff9376b3110f3b4a0d887a68.png)'
  prefs: []
  type: TYPE_IMG
- en: Mixed Numerical and Categorical Data Bivariate Analysis
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There are many instances where we need to analyze data that is a mix of numerical
    and categorical variables so let’s take a look at how that can be accomplished,
    now that we know how to tackle each data type independently.
  prefs: []
  type: TYPE_NORMAL
- en: '**Question 8:**'
  prefs: []
  type: TYPE_NORMAL
- en: Create a series of boxplots demonstrating the distribution of price (numerical
    variable in the y-axis) for different body styles (categorical variable in the
    x-axis).
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/8e8004bcf2da4937cfd068207274526b.png)'
  prefs: []
  type: TYPE_IMG
- en: Boxplot of car prices stratified by body style
  prefs: []
  type: TYPE_NORMAL
- en: I personally find this visualization very informative. For example, we can see
    that hatchbacks have a relatively smaller price range compared to hardtops or
    convertibles. Convertibles start from a higher price compared to other body styles
    and there seem to be a good range of prices, based on various characteristics
    of the car.
  prefs: []
  type: TYPE_NORMAL
- en: What if we wanted to just focus on sedans and see how the price range changes
    with the number of cylinders? Let’s create the boxplots.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'Results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/275566bb329736e1b6c50549e68c496e.png)'
  prefs: []
  type: TYPE_IMG
- en: Boxplot of sedans’ prices stratified by number of cylinders
  prefs: []
  type: TYPE_NORMAL
- en: As expected the price increases as the number of cylinders increase.
  prefs: []
  type: TYPE_NORMAL
- en: Notebook with Practice Questions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Below is the notebook with both questions and answers for reference and practice.
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this post, we introduced multivariate analysis as a tool to find hidden patterns
    within the data and then worked through implementation of such analysis for numerical
    and categorical variables and the mix of the two. We utilized visualization tools
    such as scatterplots and boxplots to visualize the relationship among variables
    and quantified such correlations in some instances.
  prefs: []
  type: TYPE_NORMAL
- en: Thanks for Reading!
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If you found this post helpful, please [follow me on Medium](https://medium.com/@fmnobar)
    and subscribe to receive my latest posts!
  prefs: []
  type: TYPE_NORMAL
