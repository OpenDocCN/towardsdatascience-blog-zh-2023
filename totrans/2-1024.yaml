- en: 'Hacking Statistical Significance: Hypothesis Testing with ML Approaches'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/hacking-statistical-significance-hypothesis-testing-with-ml-approaches-74ff102c5ff1](https://towardsdatascience.com/hacking-statistical-significance-hypothesis-testing-with-ml-approaches-74ff102c5ff1)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Test Statistical Significance in any Context Without Assumptions
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@cerlymarco?source=post_page-----74ff102c5ff1--------------------------------)[![Marco
    Cerliani](../Images/48a07a024349bac3c8e397bf5a0372e2.png)](https://medium.com/@cerlymarco?source=post_page-----74ff102c5ff1--------------------------------)[](https://towardsdatascience.com/?source=post_page-----74ff102c5ff1--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page-----74ff102c5ff1--------------------------------)
    [Marco Cerliani](https://medium.com/@cerlymarco?source=post_page-----74ff102c5ff1--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page-----74ff102c5ff1--------------------------------)
    ·7 min read·Jan 10, 2023
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d51442429b9c1ef354277a898ba90539.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Christian Stahl](https://unsplash.com/@woodpecker65?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  prefs: []
  type: TYPE_NORMAL
- en: The importance of data analytics is well-known in every field. From business
    to academics, carrying out proper analysis is the key to reaching cutting-edge
    results. In this sense, it is crucial to correctly manipulate and extract meaningful
    insights from the data at our disposal. **Data Analysts/Scientists are responsible
    to fill the gap between theoretical hypothesis and practical evidence**.
  prefs: []
  type: TYPE_NORMAL
- en: '**Providing an analytical answer to all the questions that may raise is an
    expensive and hard journey**. Translating a question/need in the analytical language
    it’s the first step to carrying out. The goodness of this kind of operation is
    crucial since it influences the correctness of the final results. During the preliminary
    phases is it important to understand the analytic goals and point out which are
    the best data sources, frameworks, and people to engage in order to reach the
    best outcomes.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Most of the time **analytically answering questions is made by carrying out
    a statistical test**. Many statistical tests work as below:'
  prefs: []
  type: TYPE_NORMAL
- en: State a null hypothesis, which is the default option that can describe the world.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: State an alternative and complementary hypothesis.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Calculate a test statistic (a function of the data) and outline the final results.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Given the distribution of the test statistic known, the probability to observe
    any value of the underlying statistic can be easily calculated (p-value)**. If
    the p-value is smaller than a prefixed (generally 0.01 or 0.05) significance level
    the null hypothesis is rejected in favor of the alternative hypothesis.'
  prefs: []
  type: TYPE_NORMAL
- en: 'There’s nothing wrong with statistical testing, but **there are some hidden
    pitfalls we should pay attention to**:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Strict assumptions on the data**. Most of the time the underlying data must
    follow normal or known distributions. As we know, real-world phenomena are not
    normally distributed at all.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Limitation to quantities/statistics we are not interested in**. If we want
    to test something custom or more complicated we may be in trouble.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In this post, we introduce some fancy and simple methods to test hypotheses
    and extract meaningful insights from the data at our disposal. **We don’t reach
    conclusions using standard statistical tests but using simulations and permutations**.
  prefs: []
  type: TYPE_NORMAL
- en: DATA SETUP
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In order to explain the methodologies, we use a dataset containing records of
    house sales in King County (USA). The dataset is accessible from [Kaggle](https://www.kaggle.com/datasets/harlfoxem/housesalesprediction)
    and it’s available under the [CC0 Public Domain Licence](https://creativecommons.org/publicdomain/zero/1.0/).
    It contains house sale prices, sold between May 2014 and May 2015, for King County
    (including Seattle).
  prefs: []
  type: TYPE_NORMAL
- en: 'The dataset contains around 20,000 entries of houses sold with different numerical
    attributes: *selling prices, number of bedrooms, number of bathrooms, square footage
    of the living space, number of floors, latitude/longitude, the building year,*
    and much more.'
  prefs: []
  type: TYPE_NORMAL
- en: In a standard predictive application, it would be interesting to forecast the
    selling price of the houses given their features. Here we are not interested in
    this kind of application. **We want to answer some questions by looking at the
    data in a way that differs from classical statistical testing but that it’s equally
    efficient (or maybe more flexible)**.
  prefs: []
  type: TYPE_NORMAL
- en: SIMULATION
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Let’s imagine being interested to know whether there’s an association between
    the building years of houses and the selling prices.
  prefs: []
  type: TYPE_NORMAL
- en: Selling prices have a distribution that differs much from a normal one. As we
    expect a clear linear relationship between prices and building year does not exist.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/5e9457cb34e7f8b085e2600b6241e1be.png)'
  prefs: []
  type: TYPE_IMG
- en: Price distribution (left). Price vs building years (right) [image by the author]
  prefs: []
  type: TYPE_NORMAL
- en: The median selling price is 45,000$. The houses built in 2015 (the newer ones
    according to our dataset) have higher median prices. This seems to be reasonable
    but **it would be interesting to understand if this effect is “due to chance”**.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/69cab55601cdc4648afa46078dafcc6a.png)'
  prefs: []
  type: TYPE_IMG
- en: Lowest and highest median selling prices by year [image by the author]
  prefs: []
  type: TYPE_NORMAL
- en: With “due to chance” we are referring to the fact that **we are observing only
    a sample of the entire population**. The data we have at our disposal is limited
    to only a part of all the house transactions that happened between 2014 and 2015
    in King County. There may be more houses built in 2015 that are sold in this period
    and aren’t recorded in our dataset.
  prefs: []
  type: TYPE_NORMAL
- en: The best we can do in this situation is to take note of the limitations and
    try to **estimate the real median** of the sold houses built in 2015\. We can
    do this **through simulations**.
  prefs: []
  type: TYPE_NORMAL
- en: As the first step, we compute and store the observed difference between the
    median selling price of houses built in 2015 and the median selling price on all
    the data at our disposal. This value (*observed difference*) represents the difference
    in prices we can observe and that we want to verify.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: At this point, we want to check if our *observed difference* might as well be
    registered by any random subgroup of sales. We randomly sample groups of the same
    size as the 2015’s houses and compute the difference between their median prices
    and the dataset’s median price.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Lastly, we verify how many times the simulated price differences are higher
    than our *observed difference.* This value can be interpreted as the probability
    of success and represents our estimated *p-value*.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: With a lower p-value, we are more confident to reject the null hypothesis and
    accept the alternative one. In our case, we are more confident to reject the hypothesis
    that states there is no price difference between the 2015’s houses and the other
    ones.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/9c6130efb24965a5a39c3c3494cb7ebb.png)'
  prefs: []
  type: TYPE_IMG
- en: Simulation results for 2015 and 2012 [image by the author]
  prefs: []
  type: TYPE_NORMAL
- en: According to our needs, we can carry out tests on all the building years of
    our interest. Below is shown the result of the test for all the years.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/c3013304e166e73ea4b147f4683b3394.png)'
  prefs: []
  type: TYPE_IMG
- en: Simulation results for all the building years with their median selling prices
    [image by the author]
  prefs: []
  type: TYPE_NORMAL
- en: MULTIVARIATE SIMULATION
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This is an incredible result! **With a few lines of code, we can test and verify
    any empirical question**. Our study verifies the presence of selling price differences
    between years of building. Does it mean that houses build in 2015 are different
    from ones built in the 80s? Not properly, since we have only verified a possible
    difference in prices. There are a lot of factors which may discriminate houses
    built in different years. Hopefully, our dataset has many other features that
    we can use to verify further possible differences.
  prefs: []
  type: TYPE_NORMAL
- en: As before, we want to check if there is a difference between houses built in
    2015 and the others. Now we don’t look only at selling prices but we consider
    all the available features. To operate this kind of multidimensional test efficiently,
    we fit a binary classification model that discriminates between the 2015’s houses
    and the others. We register the ROC-AUC as a metric of goodness (*observed score*).
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Then we check if our *observed score* might as well be registered by any random
    subgroup of house sales. We randomly sample groups of the same size as the 2015’s
    houses, fit a binary classifier to discriminate them, and register the obtained
    ROC-AUC.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Finally, we can verify, as before, if the *observed score* is higher than the
    simulated ones and compute the relative p-value.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: In our case, we are more confident to reject the hypothesis that states there
    is no overall difference between the 2015’s houses and the other ones.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/d20481f3d534b309abec23af357a7c8e.png)'
  prefs: []
  type: TYPE_IMG
- en: Simulation results for 2015 and 2012 [image by the author]
  prefs: []
  type: TYPE_NORMAL
- en: SUMMARY
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this post, we presented a method based on simulation to answer any sort of
    question that may arise observing the data at our disposal. The flexibility of
    the proposed approach makes it suitable to be applied in any sort of context and
    without particular preliminary assumptions. We also proposed a sort of multivariate
    generalization to test differences between data subgroups as a further demonstration
    that the methodology can be extended in any field to verify any sort of hypothesis.
  prefs: []
  type: TYPE_NORMAL
- en: '[**CHECK MY GITHUB REPO**](https://github.com/cerlymarco/MEDIUM_NoteBook)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Keep in touch: [Linkedin](https://www.linkedin.com/in/marco-cerliani-b0bba714b/)'
  prefs: []
  type: TYPE_NORMAL
